<!DOCTYPE HTML>
<html lang="ga" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Feidhmíocht a Chomparáid: Lúba vs. Atrialltóirí - An Teanga Ríomhchláraithe Rust</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/css/ferris.css">
        <link rel="stylesheet" href="src/css/2018-edition.css">
        <link rel="stylesheet" href="src/css/semantic-notes.css">
        <link rel="stylesheet" href="src/css/listing.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">An Teanga Ríomhchláraithe Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/aindriu80/rust-lang/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="feidhmíocht-a-chomparáid-lúb-vs-iterators"><a class="header" href="#feidhmíocht-a-chomparáid-lúb-vs-iterators">Feidhmíocht a Chomparáid: Lúb vs. Iterators</a></h2>
<p>Chun a chinneadh cé acu lúb nó iterators a úsáid, ní mór duit fios a bheith agat cé acu
tá cur i bhfeidhm níos tapúla: an leagan den fheidhm <code>search</code> le sainráite
<code>for</code> lúb nó an leagan le iterators.</p>
<p>Reáchtáileamar tagarmharc trí ábhar iomlán <em>The Adventures of
Sherlock Holmes</em> le Sir Arthur Conan Doyle isteach i <code>String</code> agus ag lorg an
focal <em>the</em> san ábhar. Seo iad torthaí an tagarmhairc ar an
leagan de <code>search</code> ag baint úsáide as an lúb <code>for</code> agus an leagan ag baint úsáide as iterators:</p>
<pre><code class="language-text">test bench_search_for  ... bench:  19,620,300 ns/iter (+/- 915,700)
test bench_search_iter ... bench:  19,234,900 ns/iter (+/- 657,200)
</code></pre>
<p>Tá feidhmíocht den chineál céanna ag an dá fheidhmiú! Ní mhíneoimid an
cód tagarmharcála anseo, toisc nach bhfuil an pointe a chruthú go bhfuil an dá leagan
comhionann ach chun tuiscint ghinearálta a fháil ar an gcaoi a bhfuil an dá fheidhmiú seo
i gcomparáid le feidhmíocht-ciallmhar.</p>
<p>Chun tagarmharc níos cuimsithí a fháil, ba cheart duit seiceáil ag baint úsáide as téacsanna éagsúla de
méideanna éagsúla mar an <code>contents</code>, focail éagsúla agus focail d'fhaid éagsúla
mar an <code>query</code>, agus gach cineál éagsúlachta eile. Is é an pointe seo:
iterators, cé gur astarraingt ardleibhéil, a thiomsú síos go dtí thart ar an
an cód céanna agus a bheadh ​​dá scríobhfá an cód leibhéal níos ísle tú féin. Tá iterators amháin
as astarraingtí <em>nialais-chostais</em> Rust, rud a chiallaíonn úsáid as an astarraingt
ní fhorchuirtear aon am rite breise. Tá sé seo cosúil le conas Bjarne
Sainmhíníonn Stroustrup, dearthóir bunaidh agus feidhmitheoir C++
<em>zero-overhead</em> in “Fondúireachtaí C++” (2012):</p>
<blockquote>
<p>Go ginearálta, cloíonn feidhmeanna C++ leis an bprionsabal náid forchostais: Cad atá tú
ná húsáid, ní íocann tú as. Agus anuas air sin: An rud a úsáideann tú, ní fhéadfá lámh a chur air
cód ar bith níos fearr.</p>
</blockquote>
<p>Mar shampla eile, tógtar an cód seo a leanas ó dhíchódóir fuaime. Tá an
úsáideann algartam díchódaithe an oibríocht matamaitice tuar líneach chun
meastachán a dhéanamh ar luachanna na todhchaí bunaithe ar fheidhm líneach de na samplaí roimhe seo. seo
Úsáideann cód slabhra iterator chun roinnt matamaitice a dhéanamh ar thrí athróg i raon feidhme: a
slice de shonraí <code>buffer</code>, sraith de 12 <code>coefficients</code>, agus méid faoina
chun sonraí a aistriú in <code>qlp_shift</code>. Dhearbhaigh muid na hathróga laistigh den sampla seo
ach níor tugadh aon luachanna dóibh; cé nach bhfuil mórán brí leis an gcód seo
taobh amuigh dá chomhthéacs, is sampla gonta, fíor-dhomhain é fós den chaoi a bhfuil Rust
aistríonn smaointe ardleibhéil go cód ísealleibhéil.</p>
<pre><code class="language-rust ignore">let buffer: &amp;mut [i32];
let coefficients: [i64; 12];
let qlp_shift: i16;

for i in 12..buffer.len() {
    let prediction = coefficients.iter()
                                 .zip(&amp;buffer[i - 12..i])
                                 .map(|(&amp;c, &amp;s)| c * s as i64)
                                 .sum::&lt;i64&gt;() &gt;&gt; qlp_shift;
    let delta = buffer[i];
    buffer[i] = prediction as i32 + delta;
}</code></pre>
<p>Chun luach <code>prediction</code> a ríomh, atriálann an cód seo trí gach ceann de na
12 luach i <code>coefficients</code> agus úsáidtear an modh <code>zip</code> chun an chomhéifeacht a phéireáil
luachanna leis na 12 luach roimhe seo sa <code>buffer</code>. Ansin, do gach péire, muid
iolrú na luachanna le chéile, suim na torthaí go léir, agus aistrigh na giotán sa
suimigh <code>qlp_shift</code> ar dheis.</p>
<p>Is minic a thugann ríomhanna in fheidhmchláir mar dhíchódóirí fuaime tosaíocht don fheidhmíocht
is airde. Anseo, tá iterator á chruthú againn, ag baint úsáide as dhá oiriúntóir, agus ansin
ag caitheamh an luacha. Cén cód tionóil a dhéanfadh an cód Rust seo a thiomsú dó? Bhuel,
ó thaobh na scríbhneoireachta seo de, tiomsaíonn sé síos go dtí an tionól céanna a scríobhfá de láimh.
Níl aon lúb ar chor ar bith a fhreagraíonn don atriall thar na luachanna i
<code>coefficients</code>: Tá a fhios ag Rust go bhfuil 12 atriall ann, mar sin "dírollaíonn sé" an
lúb. Is optamú é <em>Unrolling</em> a bhainfidh an lastuas den lúb
cód rialaithe agus ina ionad sin gineann sé cód athchleachtach do gach atriall de
an lúb.</p>
<p>Faigheann gach comhéifeachtaí a stóráil i gcláir, rud a chiallaíonn rochtain a fháil ar an
luachanna an-tapa. Níl aon seiceálacha teorann ar an rochtain eagair ag am rite.
Déanann na huasmhéaduithe seo go léir a bhfuil Rust in ann a chur i bhfeidhm an cód a eascraíonn as
thar a bheith éifeachtach. Anois go bhfuil sé seo ar eolas agat, is féidir leat iterators agus dúnta a úsáid
gan eagla! Déanann siad cosúil go bhfuil cód ag leibhéal níos airde ach ní fhorchuireann siad a
pionós feidhmíochta ritime as é sin a dhéanamh.</p>
<h2 id="achoimre"><a class="header" href="#achoimre">Achoimre</a></h2>
<p>Is gnéithe Rust iad dúnta agus iterators spreagtha ag ríomhchlárú feidhmiúil
smaointe teanga. Cuireann siad le cumas Rust a chur in iúl go soiléir
smaointe ardleibhéil ar fheidhmíocht ísealleibhéil. Feidhmeanna dúnta agus
is amhlaidh nach gcuirtear isteach ar fheidhmíocht am rite. Tá sé seo mar chuid de
Tá sé mar sprioc ag Rust a dhícheall a dhéanamh astarraingtí gan costas a sholáthar.</p>
<p>Anois go bhfuil sainléiriú ár dtionscadal I/O feabhsaithe againn, féachaimis
roinnt gnéithe níos mó de <code>cargo</code> a chabhróidh linn an tionscadal a roinnt leis an
domhan.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch13-03-improving-our-io-project.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch14-00-more-about-cargo.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch13-03-improving-our-io-project.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch14-00-more-about-cargo.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="src/css/ferris.js"></script>


    </div>
    </body>
</html>
