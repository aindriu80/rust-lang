<!DOCTYPE HTML>
<html lang="ga" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bunúsacha na Clársceidealaithe Asincrónaí: Asincrónach, Fanacht, Todhchaí, agus Sruthanna - An Teanga Ríomhchláraithe Rust</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/css/ferris.css">
        <link rel="stylesheet" href="src/css/2018-edition.css">
        <link rel="stylesheet" href="src/css/semantic-notes.css">
        <link rel="stylesheet" href="src/css/listing.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">An Teanga Ríomhchláraithe Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/aindriu80/rust-lang/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="bunúsacha-na-cláreagraithe-asincrónaí-asincrónach-fanacht-todhchaí-agus-sruthanna"><a class="header" href="#bunúsacha-na-cláreagraithe-asincrónaí-asincrónach-fanacht-todhchaí-agus-sruthanna">Bunúsacha na Cláreagraithe Asincrónaí: Asincrónach, Fanacht, Todhchaí, agus Sruthanna</a></h1>
<p>Féadann sé tamall a thógáil chun go leor oibríochtaí a iarrann muid ar an ríomhaire a dhéanamh a chríochnú. Bheadh ​​sé
deas dá bhféadfaimis rud éigin eile a dhéanamh agus muid ag fanacht leis na
próisis fhada sin a bheith críochnaithe. Cuireann ríomhairí nua-aimseartha dhá theicníc ar fáil chun
oibriú ar níos mó ná oibríocht amháin ag an am: comhthreomhaireacht agus comhthráthacht. Nuair a
thosaímid ag scríobh clár a bhaineann le hoibríochtaí comhthreomhara nó comhthráthacha,
áfach, tagaimid go tapa ar dhúshláin nua a bhaineann le <em>chláreagrú_asincrónach</em>, áit nach bhféadfadh oibríochtaí críochnú go seicheamhach san ord a
tosaíodh. Tógálann an chaibidil seo ar úsáid snáitheanna i gCaibidil 16 le haghaidh comhthreomhaireachta
agus comhthráthachta trí chur chuige malartach a thabhairt isteach i leith
chláreagrú_asincrónach: Todhchaí, Sruthanna Rust, an comhréir <code>async</code> agus <code>await</code> a
thacaíonn leo, agus na huirlisí chun oibríochtaí
asincrónacha a bhainistiú agus a chomhordú.</p>
<p>Breithnímis ar shampla. Abair go bhfuil tú ag easpórtáil físeán atá cruthaithe agat de
cheiliúradh teaghlaigh, oibríocht a d'fhéadfadh nóiméad go huaireanta a thógáil.
Úsáidfidh an easpórtáil físeáin an oiread cumhachta LAP agus GPU agus is féidir leis. Dá mbeadh
croílár LAP amháin agat agus mura gcuirfeadh do chóras oibriúcháin an easpórtáil sin ar sos go dtí go
bhí sé críochnaithe—is é sin, dá ndéanfadh sé an easpórtáil <em>go sioncrónach</em>—ní fhéadfá
aon rud eile a dhéanamh ar do ríomhaire agus an tasc sin á rith. Bheadh ​​sé sin
ina thaithí sách frustrach. Ar ámharaí an tsaoil, is féidir le córas oibriúcháin do ríomhaire,
agus déanann sé, cur isteach go dofheicthe ar an easpórtáil go minic go leor chun ligean duit
obair eile a dhéanamh ag an am céanna.</p>
<p>Anois abair go bhfuil tú ag íoslódáil físeán a roinneann duine eile, rud a d'fhéadfadh tamall a thógáil freisin
ach nach nglacann an oiread sin ama LAP. Sa chás seo, caithfidh an LAP fanacht
le go dtiocfaidh sonraí ón líonra. Cé gur féidir leat tosú ag léamh na sonraí a luaithe
a thosaíonn siad ag teacht, d'fhéadfadh sé tamall a thógáil chun iad go léir a thaispeáint. Fiú nuair a bheidh na sonraí go léir i láthair, má tá an físeán sách mór, d'fhéadfadh sé soicind nó dhó a thógáil chun é a luchtú go léir. B'fhéidir nach bhfuil cuma mhór air sin, ach is tréimhse an-fhada é do phróiseálaí nua-aimseartha, ar féidir leis na billiúin oibríochtaí a dhéanamh gach soicind. Arís, cuirfidh do chóras oibriúcháin isteach go dofheicthe ar do chlár chun ligean don LAP obair eile a dhéanamh agus é ag fanacht leis an nglao líonra a bheith críochnaithe.</p>
<p>Is sampla d'oibríocht <em>ceangailte le LAP</em> nó <em>ceangailte le ríomh</em> é an onnmhairiú físeáin.
Tá sé teoranta ag luas próiseála sonraí féideartha an ríomhaire laistigh den LAP nó
GPU, agus cé mhéad den luas sin is féidir leis a thiomnú don oibríocht. Is sampla d'oibríocht <em>ceangailte le hIO</em> é an íoslódáil físeáin, toisc go bhfuil sé teoranta ag
luas <em>ionchuir agus aschuir</em> an ríomhaire; ní féidir leis dul ach chomh tapa agus is féidir na sonraí
a sheoladh trasna an líonra.</p>
<p>Sna samplaí seo araon, soláthraíonn cur isteach dofheicthe an chórais oibriúcháin
cineál comhthráthachta. Ní tharlaíonn an comhthráthacht sin ach ag leibhéal an chláir iomláin, áfach: cuireann an córas oibriúcháin isteach ar chlár amháin chun ligean do chláir eile
obair a dhéanamh. I go leor cásanna, toisc go dtuigeann muid ár gcláir ar
leibhéal i bhfad níos mine ná mar a dhéanann an córas oibriúcháin, is féidir linn
deiseanna le haghaidh comhthráthachta nach féidir leis an gcóras oibriúcháin a fheiceáil a fheiceáil.</p>
<p>Mar shampla, má táimid ag tógáil uirlis chun íoslódálacha comhad a bhainistiú, ba cheart go mbeimid
in ann ár gclár a scríobh sa chaoi is nach gcuirfidh tús le híoslódáil amháin bac ar an gcomhéadan úsáideora,
agus ba cheart go mbeadh úsáideoirí in ann il-íoslódálacha a thosú ag an am céanna. Tá go leor
APIanna córais oibriúcháin chun idirghníomhú leis an líonra ag <em>blocáil</em>, áfach;
is ​​é sin, cuireann siad bac ar dhul chun cinn an chláir go dtí go mbeidh na sonraí atá á bpróiseáil acu
réidh go hiomlán.</p>
<blockquote>
<p>Nóta: Seo mar a oibríonn <em>an chuid is mó</em> de ghlaonna feidhme, má smaoiníonn tú air. Mar sin féin,
is gnách go mbíonn an téarma <em>blocáil</em> curtha in áirithe do ghlaonna feidhme a idirghníomhaíonn le
comhaid, an líonra, nó acmhainní eile ar an ríomhaire, mar is iad sin na
cásanna ina mbainfeadh clár aonair leas as an oibríocht a bheith
<em>neamh</em>-bhlocálach.</p>
</blockquote>
<p>D'fhéadfaimis ár bpríomhshnáithe a sheachaint trí shnáithe tiomnaithe a chruthú chun
gach comhad a íoslódáil. Mar sin féin, bheadh ​​​​forchostais na snáitheanna sin ina fhadhb sa deireadh. Bheadh ​​​​sé níos fearr mura mbeadh an glao blocáilte sa chéad
áit. Bheadh ​​​​sé níos fearr freisin dá bhféadfaimis scríobh san stíl dhíreach chéanna a úsáidimid
i gcód blocála, cosúil leis seo:</p>
<pre><code class="language-rust ignore does_not_compile">let data = fetch_data_from(url).await;
println!("{data}");</code></pre>
<p>Sin go díreach a thugann teibíocht <em>async</em> (gearr do <em>asynchronous</em>) Rust
dúinn. Sa chaibidil seo, foghlaimeoidh tú gach rud faoi neamhshioncrónach agus muid ag clúdach na dtopaicí seo a leanas:</p>
<ul>
<li>Conas comhréir <code>async</code> agus <code>await</code> Rust a úsáid</li>
<li>Conas an tsamhail neamhshioncrónach a úsáid chun cuid de na dúshláin chéanna a ndearnamar breathnú orthu i gCaibidil 16 a réiteach</li>
<li>Conas a sholáthraíonn il-shnáithe agus neamhshioncrónach réitigh chomhlántacha, ar féidir leat a chomhcheangal i go leor cásanna</li>
</ul>
<p>Sula bhfeicfimid conas a oibríonn neamhshioncrónach i gcleachtas, áfach, ní mór dúinn seachbhóthar gearr a ghlacadh chun na difríochtaí idir comhthreomhaireacht agus comhthráthacht a phlé.</p>
<h3 id="comhthreomhaireacht-agus-comhthráthacht"><a class="header" href="#comhthreomhaireacht-agus-comhthráthacht">Comhthreomhaireacht agus Comhthráthacht</a></h3>
<p>Tá comhthreomhaireacht agus comhthráthacht den chuid is mó inmhalartaithe againn go dtí seo. Anois
ní mór dúinn idirdhealú níos cruinne a dhéanamh eatarthu, mar go
n-éireoidh na difríochtaí
níos soiléire agus muid ag tosú ag obair.</p>
<p>Smaoinigh ar na bealaí éagsúla a d'fhéadfadh foireann obair a roinnt ar thionscadal bogearraí.
D'fhéadfá tascanna iolracha a shannadh do bhall aonair, tasc amháin a shannadh do gach ball, nó
meascán den dá chur chuige a úsáid.</p>
<p>Nuair a oibríonn duine aonair ar roinnt tascanna éagsúla sula mbíonn aon cheann acu
críochnaithe, is <em>comhthráthacht</em> é seo. B’fhéidir go bhfuil dhá thionscadal éagsúla seiceáilte agat ar do ríomhaire, agus nuair a bhíonn tú leamh nó sáinnithe ar thionscadal amháin, aistríonn tú go dtí an ceann eile. Níl ionat ach duine amháin, mar sin ní féidir leat dul chun cinn a dhéanamh ar an dá thasc ag an am céanna, ach is féidir leat iltascanna a dhéanamh, ag déanamh dul chun cinn ar cheann ag an am trí athrú eatarthu (féach Fíor 17-1).</p>
<figure>
<img src="img/trpl17-01.svg" class="center" alt="A diagram with boxes labeled Task A and Task B, with diamonds in them representing subtasks. There are arrows pointing from A1 to B1, B1 to A2, A2 to B2, B2 to A3, A3 to A4, and A4 to B3. The arrows between the subtasks cross the boxes between Task A and Task B." />
<figcaption>Figure 17-1: A concurrent workflow, switching between Task A and Task B</figcaption>
</figure>
<p>Nuair a roinneann an fhoireann grúpa tascanna trí gach ball a chur ag obair air ina aonar, is <em>comhthreomhaireacht</em> é seo. Is féidir le gach duine ar an bhfoireann
dul chun cinn a dhéanamh ag an am céanna (féach Fíor 17-2).</p>
<figure>
<img src="img/trpl17-02.svg" class="center" alt="Léaráid le boscaí lipéadaithe Tasc A agus Tasc B, le diamaint iontu a léiríonn fo-thascanna. Tá saigheada ag pointeáil ó A1 go A2, A2 go A3, A3 go A4, B1 go B2, agus B2 go B3. Níl aon saigheada ag trasnú idir na boscaí do Thasc A agus Tasc B." />
<figcaption>Fíor 17-2: Sreabhadh oibre comhthreomhar, áit a ndéantar obair ar Thasc A agus Tasc B go neamhspleách</figcaption>
</figure>
<p>Sna sreabhanna oibre seo araon, b'fhéidir go mbeadh ort comhordú a dhéanamh idir
tascanna éagsúla. B’fhéidir gur cheap tú go raibh an tasc a shanntar do dhuine amháin go hiomlán neamhspleách ar obair gach duine eile, ach i ndáiríre éilíonn sé ar dhuine eile ar an bhfoireann a dtasc a chríochnú ar dtús. D’fhéadfaí cuid den obair a dhéanamh go comhthreomhar, ach bhí cuid di <em>sraitheach</em> i ndáiríre: ní fhéadfadh sé tarlú ach i
sraith, tasc amháin i ndiaidh a chéile, mar atá i bhFíor 17-3.</p>
<figure>
<img src="img/trpl17-03.svg" class="center" alt="Léaráid le boscaí lipéadaithe Tasc A agus Tasc B, le diamaint iontu a léiríonn fo-thascanna. Tá saigheada ag pointeáil ó A1 go A2, A2 go péire línte tiubha ingearacha cosúil le siombail “sos”, ón tsiombail sin go A3, B1 go B2, B2 go B3, atá faoin tsiombail sin, B3 go A3, agus B3 go B4." />
<figcaption>Fíor 17-3: Sreabhadh oibre atá comhthreomhar go páirteach, áit a ndéantar obair ar Thasc A agus ar Thasc B go neamhspleách go dtí go mbíonn bac ar Thasc A3 ar thorthaí Thasc B3.</figcaption>
</figure>
<p>Mar an gcéanna, b'fhéidir go dtuigfeá go mbraitheann ceann de do thascanna féin ar cheann eile de do chuid tascanna. Anois tá do chuid oibre comhthráthach sraitheach freisin.</p>
<p>Is féidir le comhthreomhaireacht agus comhthráthacht trasnú lena chéile freisin. Má fhoghlaimíonn tú
go bhfuil comhghleacaí sáinnithe go dtí go gcríochnaíonn tú ceann de do thascanna, is dócha go ndíreoidh tú do chuid iarrachtaí go léir ar an tasc sin chun do chomhghleacaí a "dhíbhlocáil". Ní féidir leatsa agus do
chomhghleacaí oibriú go comhthreomhar a thuilleadh, agus ní féidir leatsa
oibriú go comhthreomhar ar do thascanna féin a thuilleadh.</p>
<p>Tagann na dinimic bhunúsacha chéanna i bhfeidhm le bogearraí agus crua-earraí. Ar mheaisín
le croí LAP amháin, ní féidir leis an LAP ach oibríocht amháin a dhéanamh ag an am, ach
is féidir leis oibriú go comhthreomhar fós. Ag baint úsáide as uirlisí ar nós snáitheanna, próisis, agus neamhshioncrónach,
is féidir leis an ríomhaire gníomhaíocht amháin a chur ar sos agus aistriú go cinn eile sula
bhfilleann sé ar an gcéad ghníomhaíocht sin arís. Ar mheaisín le croíleacáin iolracha LAP,
is féidir leis obair a dhéanamh go comhthreomhar freisin. Is féidir le croí amháin tasc amháin a dhéanamh agus
croí eile ceann nach mbaineann leis ar chor ar bith a dhéanamh, agus tarlaíonn na hoibríochtaí sin ag an am céanna i ndáiríre.</p>
<p>Nuair a bhíonn muid ag obair le neamhshioncrónach i Rust, bímid i gcónaí ag déileáil le comhthráthacht.
Ag brath ar an gcrua-earraí, an córas oibriúcháin, agus an t-am rith neamhshioncrónach atá á úsáid againn (tuilleadh faoi amanna rith neamhshioncrónacha go luath), féadfaidh an comhthráthacht sin comhthreomhaireacht a úsáid freisin
faoi chochall.</p>
<p>Anois, déanaimis iniúchadh ar an gcaoi a n-oibríonn cláir neamhshioncrónach i Rust i ndáiríre.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch16-04-extensible-concurrency-sync-and-send.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch17-01-futures-and-syntax.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch16-04-extensible-concurrency-sync-and-send.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch17-01-futures-and-syntax.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="src/css/ferris.js"></script>


    </div>
    </body>
</html>
