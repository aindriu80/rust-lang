<!DOCTYPE HTML>
<html lang="ga" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>An Teanga R√≠omhchl√°raithe Rust</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/css/ferris.css">
        <link rel="stylesheet" href="src/css/2018-edition.css">
        <link rel="stylesheet" href="src/css/semantic-notes.css">
        <link rel="stylesheet" href="src/css/listing.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">An Teanga R√≠omhchl√°raithe Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/aindriu80/rust-lang/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="an-teanga-r√≠omhchl√°raithe-rust"><a class="header" href="#an-teanga-r√≠omhchl√°raithe-rust">An Teanga R√≠omhchl√°raithe Rust</a></h1>
<p><em>le Steve Klabnik, Carol Nichols, agus Chris Krycho, le rann√≠oca√≠ochta√≠ √≥n
Pobal Rust</em></p>
<p>Glactar leis sa leagan seo den t√©acs go bhfuil Rust 1.82.0 in √∫s√°id agat (eisithe 2024-10-17)
n√≥ n√≠os d√©ana√≠. F√©ach an rann√°n <a href="ch01-01-installation.html">‚ÄúInstallation‚Äù de Chaibidil 1</a><!-- neamhaird -->
a shuite√°il n√≥ a nuashonr√∫ Rust.</p>
<p>T√° an fhorm√°id HTML ar f√°il ar l√≠ne ag
<a href="https://doc.rust-lang.org/stable/book/">https://doc.rust-lang.org/stable/book/</a>
agus as l√≠ne le suite√°lacha meirge d√©anta le <code>rustup</code>; rith <code>rustup doc --book</code> le hoscailt.</p>
<p>T√° roinnt <a href="appendix-06-translation.html">aistri√∫ch√°in</a> pobail ar f√°il freisin.</p>
<p>T√° an t√©acs seo ar f√°il i bhform√°id <a href="https://nostarch.com/rust-programming-language-2nd-edition">bogha agus r√≠omhleabhair √≥ No Starch
Br√∫igh</a>.</p>
<blockquote>
<p><strong>üö® An dteasta√≠onn uait eisp√©ireas foghlama n√≠os idirghn√≠omha√≠? Bain triail as leagan eile
de Rust Book, ina bhfuil: tr√°th na gceist, aibhsi√∫, l√©irshamhl√∫, agus
n√≠os m√≥</strong>: <a href="https://rust-book.cs.brown.edu">https://rust-book.cs.brown.edu</a></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="r√©amhfhocal"><a class="header" href="#r√©amhfhocal">R√©amhfhocal</a></h1>
<p>N√≠ raibh s√© chomh soil√©ir i gc√≥na√≠, ach t√° teanga r√≠omhchl√°raithe Rust go bun√∫sach
faoi <em>cumhacht√∫</em> : is cuma c√©n cine√°l c√≥d at√° √° scr√≠obh agat anois, a Rust
a chumasa√≠onn duit dul i bhfad n√≠os faide, chun cl√°r a dh√©anamh go muin√≠neach i raon n√≠os leithne de
fearainn n√° mar a rinne t√∫ roimhe seo.</p>
<p>T√≥g, mar shampla, obair ‚Äúleibh√©al c√≥rais‚Äù a dh√©ile√°lann le sonra√≠ ar leibh√©al √≠seal
bainist√≠ocht cuimhne, ionada√≠ocht sonra√≠, agus comhairgeadra. Go traidisi√∫nta, seo
Feictear r√©imse na gcl√°r mar rud stuama, nach bhfuil inrochtana ach ag c√∫pla duine roghnaithe
chaith siad na blianta riachtanacha ag foghlaim chun na gaist√≠ m√≠ch√°ili√∫la a sheachaint. Agus
fi√∫ iad si√∫d a chleachtann √©, d√©anann siad amhlaidh go c√∫ramach, ar eagla go mbeadh a gc√≥d oscailte d√≥
d√∫shaothr√∫, tuairteanna, n√≥ √©illi√∫.</p>
<p>Briseann meirge na bacainn√≠ seo s√≠os tr√≠ dheireadh a chur leis na seanghaist√≠ agus tr√≠ shol√°thar a
sraith uirlis√≠ cairdi√∫il, snasta chun cabhr√∫ leat ar an mbealach. R√≠omhchl√°raitheoir√≠ a bhfuil g√° acu
is f√©idir le "tumadh s√≠os" i rial√∫ ag leibh√©al n√≠os √≠sle √© sin a dh√©anamh le Rust, gan dul i mbun
an gn√°thriosca tuairte√°la n√≥ poill sl√°nd√°la, agus gan a bheith ag foghlaim
na point√≠ m√≠ne de toolchain fickle. N√≠os fearr f√≥s, t√° an teanga deartha chun
t√∫ a threor√∫ go n√°d√∫rtha i dtreo c√≥d iontaofa at√° √©ifeachtach √≥ thaobh luas
agus √∫s√°id chuimhne.</p>
<p>Is f√©idir le r√≠omhchl√°raitheoir√≠ at√° ag obair cheana f√©in le c√≥d leibh√©al √≠seal √∫s√°id a bhaint as Rust a ard√∫
a n-uaillmhianta. Mar shampla, is rud r√©as√∫nta √© comhthreomhaireacht a thabhairt isteach i Rust
oibr√≠ocht riosca √≠seal: glacfaidh an tiomsaitheoir na bot√∫in chlasaiceacha duit. Agus
is f√©idir leat dul i ngleic le optimizations n√≠os ionsaith√≠ i do ch√≥d leis an muin√≠n
nach dtabharfaidh t√∫ tuairteanna n√≥ leochaileachta√≠ isteach de thaisme.</p>
<p>Ach n√≠l Rust teoranta do r√≠omhchl√°r√∫ c√≥rais √≠seal-leibh√©il. T√° s√© l√©iritheach agus
eirgeanama√≠ochta go leor chun aipeanna CLI, freastalaithe gr√©as√°in, agus go leor cine√°lacha eile c√≥d a dh√©anamh
taitneamhach go leor a scr√≠obh - gheobhaidh t√∫ sampla√≠ simpl√≠ den d√° cheann n√≠os d√©ana√≠ sa
leabhar. Ligeann obair le Rust duit scileanna a th√≥g√°il a aistr√≠onn √≥ cheann amh√°in
fearainn go ceann eile; is f√©idir leat Rust a fhoghlaim tr√≠ app gr√©as√°in a scr√≠obh, ansin iad sin a chur i bhfeidhm
scileanna c√©anna chun d√≠ri√∫ ar do Raspberry Pi.</p>
<p>Cuims√≠onn an leabhar seo go hioml√°n an acmhainneacht at√° ag Rust chun a chuid √∫s√°ideoir√≠ a chumhacht√∫. T√° s√© a
t√©acs cairdi√∫il sochaideartha a bhfuil s√© mar aidhm aige cabhr√∫ leat leibh√©al suas n√≠ hamh√°in do
eolas ar Rust, ach freisin do bhaint amach agus do mhuin√≠n mar r√≠omhchl√°raitheoir i
ginear√°lta. Mar sin tumadh isteach, b√≠ r√©idh le foghlaim - agus f√°ilte romhat chuig an bpobal Rust!</p>
<p>‚Äî Nicholas Matsakis agus Aaron Turon</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="r√©amhr√°"><a class="header" href="#r√©amhr√°">R√©amhr√°</a></h1>
<blockquote>
<p>N√≥ta: Is ionann an t-eagr√°n seo den leabhar agus <a href="https://nostarch.com/rust-programming-language-2nd-edition">An Teanga R√≠omhchl√°raithe
Rust</a> ar f√°il i bhform√°id chl√≥ite agus r√≠omhleabhair √≥ <a href="https://nostarch.com/">No Starch
Press</a>.</p>
</blockquote>
<p>F√°ilte go dt√≠ <em>The Rust Programming Language</em>, leabhar tosaigh faoi Rust.
Cuid√≠onn teanga r√≠omhchl√°raithe Rust leat bogearra√≠ n√≠os tap√∫la agus n√≠os iontaofa a scr√≠obh.
Is minic a bh√≠onn contr√°rthachta√≠ ag eirgeanama√≠ocht ardleibh√©il agus rial√∫ √≠sealleibh√©il sa r√≠omhchl√°r√∫
dearadh teanga; Tugann Rust d√∫shl√°n don choinbhleacht sin. Tr√≠ chothrom√∫ cumhachtach
cumas teicni√∫il agus taith√≠ iontach forbr√≥ra, tugann Rust an rogha duit
chun sonra√≠ √≠seal-leibh√©il a rial√∫ (cos√∫il le h√∫s√°id chuimhne) gan aon str√≥
a bhaineann go traidisi√∫nta le rial√∫ den s√≥rt sin.</p>
<h2 id="c√©-d√≥-a-bhfuil-rust"><a class="header" href="#c√©-d√≥-a-bhfuil-rust">C√© d√≥ a bhfuil Rust</a></h2>
<p>T√° Rust oiri√∫nach do go leor daoine ar ch√∫iseanna √©ags√∫la. Breathna√≠mid ar roinnt de
na gr√∫pa√≠ is t√°bhachta√≠.</p>
<h3 id="foirne-forbr√≥ir√≠"><a class="header" href="#foirne-forbr√≥ir√≠">Foirne Forbr√≥ir√≠</a></h3>
<p>Is uirlis th√°irgi√∫il √© Rust chun comhoibri√∫ i measc foirne m√≥ra de
forbr√≥ir√≠ a bhfuil leibh√©il √©ags√∫la eolais ar r√≠omhchl√°r√∫ c√≥rais acu. C√≥d leibh√©al √≠seal
seans maith go bhfuil fabhtanna caolch√∫iseacha √©ags√∫la ann, ar f√©idir iad a ghabh√°il i bhformh√≥r na dteangacha eile
ach amh√°in tr√≠ th√°st√°il fhairsing agus athbhreithni√∫ c√∫ramach c√≥d ag taith√≠
fhorbr√≥ir√≠. I Rust, imr√≠onn an tiomsaitheoir r√≥l coime√°da√≠ geata tr√≠ dhi√∫lt√∫
c√≥d a thioms√∫ leis na fabhtanna do-fheicthe seo, lena n-√°ir√≠tear fabhtanna comhairgeadra. Tr√≠ oibri√∫
taobh leis an tiomsaitheoir, is f√©idir leis an bhfoireann a gcuid ama a chaitheamh ag d√≠ri√∫ ar na cl√°ir
loighic seachas dul ar th√≥ir fabhtanna.</p>
<p>Tugann Rust uirlis√≠ forbr√≥ra comhaimseartha chuig saol r√≠omhchl√°raithe na gc√≥ras freisin:</p>
<ul>
<li>D√©anann lasta, an bainisteoir sple√°chais agus an uirlis t√≥g√°la at√° san √°ireamh, cur leis,
sple√°chais a thioms√∫, agus a bhainisti√∫ gan phian agus comhsheasmhach ar fud na Rust
√©iceach√≥ras.</li>
<li>Cinnt√≠onn an uirlis form√°idithe Rustfmt st√≠l c√≥daithe chomhsheasmhach trasna
fhorbr√≥ir√≠.</li>
<li>Cumhachta√≠onn an t-anail√≠seoir Rust Timpeallacht Chomhth√°ite Forbartha (IDE)
comhth√°th√∫ chun c√≥d a chomhl√°n√∫ agus teachtaireachta√≠ earr√°ide inl√≠ne.</li>
</ul>
<p>Tr√≠ √∫s√°id a bhaint as na huirlis√≠ seo agus uirlis√≠ eile in √©iceach√≥ras Rust, is f√©idir le forbr√≥ir√≠ a bheith
t√°irgi√∫il agus c√≥d leibh√©al c√≥rais √° scr√≠obh.</p>
<h3 id="dalta√≠"><a class="header" href="#dalta√≠">Dalta√≠</a></h3>
<p>T√° Rust ann do mhic l√©inn agus d√≥ibh si√∫d ar sp√©is leo foghlaim faoi ch√≥rais
coincheapa. Ag baint √∫s√°ide as Rust, t√° go leor daoine tar √©is foghlaim faoi √°bhair mar oibri√∫
forbairt c√≥ras. T√° an pobal an-fh√°ilteach agus s√°sta freagra a thabhairt
ceisteanna dalta√≠. Tr√≠ iarrachta√≠ mar an leabhar seo, t√° na foirne Rust ag iarraidh
coincheapa c√≥rais a dh√©anamh n√≠os inrochtana do n√≠os m√≥ daoine, go h√°irithe iad si√∫d nach bhfuil nua acu
r√≠omhchl√°r√∫.</p>
<h3 id="cuideachta√≠"><a class="header" href="#cuideachta√≠">Cuideachta√≠</a></h3>
<p>√ös√°ideann na c√©adta cuideachta√≠, idir bheag agus mh√≥r, Rust i dt√°irgeadh √©ags√∫la
tascanna, lena n-√°ir√≠tear uirlis√≠ l√≠ne ordaithe, seirbh√≠s√≠ gr√©as√°in, uirlis√≠ DevOps, leabaithe
gl√©asanna, anail√≠s fuaime agus f√≠se agus trasch√≥d√∫, cryptocurrencies,
bithfhaisn√©is√≠ocht, innill chuardaigh, feidhmchl√°ir Internet of Things, meais√≠n
foghlama, agus fi√∫ codanna m√≥ra de bhrabhs√°la√≠ gr√©as√°in Firefox.</p>
<h3 id="forbr√≥ir√≠-foinse-oscailte"><a class="header" href="#forbr√≥ir√≠-foinse-oscailte">Forbr√≥ir√≠ Foinse Oscailte</a></h3>
<p>T√° Rust ann do dhaoine at√° ag iarraidh teanga r√≠omhchl√°raithe Rust a th√≥g√°il, pobail,
uirlis√≠ forbr√≥ra, agus leabharlanna. Ba bhre√° linn go gcuirfe√° leis an Rust
teanga.</p>
<h3 id="daoine-a-bhfuil-luach-acu-ar-luas-agus-ar-chobhsa√≠ocht"><a class="header" href="#daoine-a-bhfuil-luach-acu-ar-luas-agus-ar-chobhsa√≠ocht">Daoine a bhfuil Luach acu ar Luas agus ar Chobhsa√≠ocht</a></h3>
<p>T√° Rust ann do dhaoine ar mian leo luas agus seasmhacht i dteanga. De r√©ir luais, t√°imid
Cialla√≠onn s√© c√© chomh tapa agus is f√©idir le c√≥d Rust rith agus an luas a ligeann Rust duit
cl√°ir a scr√≠obh. Cinnt√≠onn seice√°lacha an tiomsaitheora Rust cobhsa√≠ocht tr√≠ ghn√©
breiseanna agus athfhacht√≥ir√≠. T√° s√© seo i gcodarsnacht leis an gc√≥d oidhreachta brittle i
teangacha gan na seice√°lacha seo, ar minic go mb√≠onn eagla ar fhorbr√≥ir√≠ iad a mhodhn√∫. Le
ag iarraidh astarraingt√≠ nialasacha, gn√©ithe ardleibh√©il a thiomsa√≠onn go
c√≥d leibh√©al n√≠os √≠sle chomh tapa agus a scr√≠obhtar an c√≥d de l√°imh, d√©anann Rust a dh√≠cheall a dh√©anamh s√°bh√°ilte
c√≥d a bheith c√≥d tapa chomh maith.</p>
<p>T√° s√∫il ag an teanga Rust tac√∫ le go leor √∫s√°ideoir√≠ eile freisin; iad si√∫d at√° luaite
n√≠l anseo ach cuid de na p√°irtithe leasmhara is m√≥. Tr√≠d is tr√≠d, Rust is fearr
is √© an uaillmhian deireadh a chur leis na comhbhabht√°lacha a bhfuil glactha ag r√≠omhchl√°raitheoir√≠ leo
blianta tr√≠ sh√°bh√°ilteacht <em>agus</em> t√°irgi√∫lacht, luas <em>agus</em> eirgeanama√≠ocht a shol√°thar. Tabhair
D√©an iarracht Rust agus f√©ach an n-oibr√≠onn a roghanna duit.</p>
<h2 id="c√©-leis-an-leabhar-seo"><a class="header" href="#c√©-leis-an-leabhar-seo">C√© Leis an Leabhar Seo</a></h2>
<p>Glacann an leabhar seo leis go bhfuil c√≥d scr√≠ofa agat i dteanga r√≠omhchl√°r√∫ch√°in eile ach
n√≠ dh√©anann s√© aon toimhde faoi c√© acu. Rinneamar iarracht an t-√°bhar a dh√©anamh
inrochtana go ginear√°lta d√≥ibh si√∫d √≥ raon leathan de ch√∫lra√≠ cl√°r. muid
n√° caith go leor ama ag caint faoi cad is r√≠omhchl√°r√∫ <em>is</em> n√≥ conas smaoineamh
faoi. M√°s rud √© go bhfuil t√∫ nua go hioml√°n le r√≠omhchl√°r√∫, b'fhearr duit freastal ar
ag l√©amh leabhar a shol√°thra√≠onn r√©amhr√° go sonrach ar r√≠omhchl√°r√∫.</p>
<h2 id="conas-an-leabhar-seo-a-√ös√°id"><a class="header" href="#conas-an-leabhar-seo-a-√ös√°id">Conas an Leabhar Seo a √ös√°id</a></h2>
<p>Go ginear√°lta, glactar leis sa leabhar seo go bhfuil t√∫ ag l√©amh in ord √© √≥ th√∫s deireadh
ar ais. T√≥gann caibidl√≠ n√≠os d√©ana√≠ ar choincheapa i gcaibidl√≠ n√≠os luaithe, agus n√≠os luaithe
b'fh√©idir nach nd√©anann caibidl√≠ sonra√≠ ar √°bhar ar leith a mhionscr√∫d√∫ ach go dtabharfaidh siad cuairt ar√≠s orthu
an topaic i gcaibidil n√≠os d√©ana√≠.</p>
<p>Gheobhaidh t√∫ dh√° chine√°l caibidil sa leabhar seo: caibidl√≠ coincheapa agus tionscadail
caibidl√≠. I gcaibidl√≠ coincheapa, foghlaimeoidh t√∫ faoi ghn√© de Rust. I dtionscadal
caibidl√≠, t√≥gfaimid cl√°ir bheaga le ch√©ile</p>
<p>l√©i, ag cur an m√©id at√° foghlamtha agat i bhfeidhm
i bhfad. Is caibidl√≠ tionscadail iad Caibidil 2, 12, agus 21; is caibidl√≠ coincheapa an chuid eile.</p>
<p>M√≠n√≠onn Caibidil 1 conas Rust a shuite√°il, conas "Dia duit, domhan!" cl√°r,
agus conas Cargo, bainisteoir pac√°iste Rust agus uirlis t√≥g√°la a √∫s√°id. T√° Caibidil 2 a
r√©amheolas praitici√∫il ar chl√°r a scr√≠obh i Rust, tar √©is duit a
Cluiche buille faoi thuairim uimhreacha. Anseo cl√∫da√≠mid coincheapa ar ardleibh√©al, agus n√≠os d√©ana√≠
sol√°thr√≥idh caibidl√≠ sonra√≠ breise. M√°s mian leat do l√°mha a fh√°il salach
ar an bpointe boise, is √© Caibidil 2 an √°it chuige sin. Cl√∫da√≠onn Caibidil 3 gn√©ithe Rust
at√° cos√∫il le teangacha cl√°ir eile, agus i gCaibidil 4
beidh t√∫ ag foghlaim faoi ch√≥ras √∫in√©ireachta Rust. M√° t√° t√∫ thar a bheith c√∫ramach
foghlaimeoir ar fearr leis gach mionsonra a fhoghlaim sula mbogann t√∫ ar aghaidh go dt√≠ an ch√©ad cheann eile, tusa
b'fh√©idir gur mhaith leat gan bacadh le Caibidil 2 agus dul d√≠reach go dt√≠ Caibidil 3, ag filleadh ar Caibidil
2 nuair is mian leat oibri√∫ ar thionscadal ag cur na sonra√≠ at√° foghlamtha agat i bhfeidhm.</p>
<p>Caibideal 5 pl√©ann s√© strucht√∫ir agus modhanna, agus cl√∫da√≠onn Caibideal 6 √©umanna, abairt√≠ <code>match</code>,
agus an t√≥g√°il sreafa rialaithe <code>if let</code>. √ös√°idfidh t√∫ strucht√∫ir agus
√©umanna chun cine√°lacha saincheaptha a chruth√∫ i Rust.</p>
<p>I gCaibidil 7, foghlaimeoidh t√∫ faoi ch√≥ras mod√∫il Rust agus faoi rialacha pr√≠obh√°ideachais
chun do ch√≥d agus a Chomh√©adan Poibl√≠ um Chl√°r√∫ Feidhmchl√°ir a eagr√∫
(API). D√©antar pl√© i gCaibidil 8 ar roinnt strucht√∫ir choiteanna maidir le baili√∫ sonra√≠ a dh√©anann an
Sol√°thra√≠onn leabharlann caighde√°nach, mar shampla veicteoir√≠, teaghr√°in, agus l√©arsc√°ileanna hash. Caibidil 9
d√©anann s√© ini√∫chadh ar fheals√∫nacht agus teicn√≠c√≠ l√°imhse√°la earr√°id√≠ Rust.</p>
<p>D√≠r√≠tear i gCaibidil 10 ar chine√°lacha, tr√©ithe agus saolr√©anna, a thugann an chumhacht duit
chun c√≥d a bhaineann le cine√°lacha iolracha a shaini√∫. Baineann Caibidil 11 le t√°st√°il,
rud at√° riachtanach fi√∫ le r√°tha√≠ochta√≠ s√°bh√°ilteachta Rust chun do chl√°ir a chinnti√∫
T√° an loighic ceart. I gCaibidil 12, t√≥gfaimid √°r gcur i bhfeidhm f√©in ar fho-thacar
feidhmi√∫lacht √≥n uirlis l√≠ne ordaithe <code>grep</code> a chuarda√≠onn t√©acs
laistigh de chomhaid. Chun seo, bainfimid √∫s√°id as go leor de na coincheapa a phl√©amar sa
caibidl√≠ roimhe seo.</p>
<p>I gCaibidil 13 d√©antar ini√∫chadh ar dh√∫nadh agus iterators: gn√©ithe Rust a thagann as
teangacha r√≠omhchl√°r√∫ch√°in feidhme. I gCaibidil 14, scr√∫d√≥imid lasta n√≠os m√≥
doimhneacht agus labhair faoi na cleachtais is fearr chun do leabharlanna a roinnt le daoine eile.
Pl√©ann Caibidil 15 leideanna cliste a shol√°thra√≠onn an leabharlann chaighde√°nach agus an
tr√©ithe a chuireann ar chumas a bhfeidhmi√∫lachta.</p>
<p>I gCaibidil 16, si√∫lfaimid tr√≠ mh√∫nla√≠ √©ags√∫la de r√≠omhchl√°r√∫ comhthr√°thach agus
labhairt faoi conas a chuid√≠onn Rust leat r√≠omhchl√°r√∫ i sn√°itheanna iolracha gan eagla. I
Caibidil 17, cuirfimid leis sin tr√≠ ini√∫chadh a dh√©anamh ar async Rust agus ag fanacht le comhr√©ir agus
an tsamhail concurrency √©adrom a thaca√≠onn siad.</p>
<p>I gCaibidil 18 f√©achtar ar conas a chuirtear nathanna cainte Rust i gcompar√°id le r√≠omhchl√°r√∫ at√° d√≠rithe ar oibiachta√≠
prionsabail a bhf√©adfadh cur amach a bheith agat orthu.</p>
<p>Is tagairt √≠ Caibidil 19 do phatr√∫in agus meaitse√°il patr√∫n, at√° cumhachtach
beala√≠ chun smaointe a chur in i√∫l ar fud na gcl√°r Rust. I gCaibidil 20 t√° a
smorgasbord ard-√°bhair sp√©ise, lena n-√°ir√≠tear Rust neamhsh√°bh√°ilte, macra√≠, agus
n√≠os m√≥ faoi shaolr√©anna, tr√©ithe, cine√°lacha, feidhmeanna agus d√∫nta.</p>
<p>I gCaibidil 21, cuirfimid tionscadal i gcr√≠ch ina gcuirfimid leibh√©al √≠seal i bhfeidhm
freastala√≠ gr√©as√°in ilshn√°ithe!</p>
<p>Ar deireadh, t√° eolas √∫s√°ideach faoin teanga in aguis√≠n√≠ √°irithe a
n√≠os m√≥ form√°id tagartha. Cl√∫da√≠onn Aguis√≠n A eochairfhocail Rust, Aguis√≠n B
cl√∫da√≠onn s√© oibreoir√≠ agus siombail√≠ Rust, cl√∫da√≠onn Aguis√≠n C tr√©ithe in-d√≠orthaithe
a shol√°thra√≠onn an leabharlann chaighde√°nach, cl√∫da√≠onn Aguis√≠n D roinnt forbairt√≠ √∫s√°ideacha
uirlis√≠, agus m√≠n√≠onn Aguis√≠n E eagr√°in Rust. In Aguis√≠n F, is f√©idir leat a fh√°il
aistri√∫ch√°in ar an leabhar, agus in Aguis√≠n G cl√∫d√≥idh muid conas a dh√©antar Rust agus
cad √© Rust o√≠che.</p>
<p>N√≠l aon bhealach m√≠cheart leis an leabhar seo a l√©amh: m√°s mian leat dul ar aghaidh, t√©igh chuige!
Seans go mbeidh ort l√©im siar chuig caibidl√≠ n√≠os luaithe m√° bh√≠onn taith√≠ agat ar aon cheann d√≠obh
mearbhall. Ach d√©an cib√© rud a oibr√≠onn duit.</p>
<p><span id="ferris"></span></p>
<p>Cuid th√°bhachtach den phr√≥iseas foghlama Rust is ea foghlaim conas l√©amh an
teachtaireachta√≠ earr√°ide a thaispe√°nann an tiomsaitheoir: treor√≥idh siad seo t√∫ i dtreo an ch√≥id oibre.
Mar sin, cuirfimid go leor sampla√≠ ar f√°il nach dtioms√≥idh mar aon leis an earr√°id
teachtaireacht a thaispe√°nfaidh an tiomsaitheoir duit i ngach c√°s. B√≠odh a fhios sin m√° th√©ann t√∫ isteach
agus sampla randamach a rith, n√≠ fh√©adfaidh s√© a thioms√∫! B√≠ cinnte go l√©ann t√∫ an
t√©acs m√≥rthimpeall f√©achaint an bhfuil s√© i gceist an sampla a bhfuil t√∫ ag iarraidh a rith a rith
earr√°id. Cabhr√≥idh Ferris leat freisin idirdheal√∫ a dh√©anamh ar ch√≥d nach bhfuil i gceist a bheith ag obair:</p>
<div class="table-wrapper"><table><thead><tr><th>Ferris</th><th>Br√≠</th></tr></thead><tbody>
<tr><td><img src="img/ferris/does_not_compile.svg" class="ferris-explain" alt="Ferris le comhartha ceiste"/></td><td>N√≠ thiomsa√≠onn an c√≥d seo!</td></tr>
<tr><td><img src="img/ferris/panics.svg" class="ferris-explain" alt="Ferris ag caitheamh a l√°mha"/></td><td>Caoileann an c√≥d seo!</td></tr>
<tr><td><img src="img/ferris/not_desired_behavior.svg" class="ferris-explain" alt="Ferris le cr√∫b amh√°in suas, shrugging"/></td><td>N√≠ th√°irgeann an c√≥d seo an t-iompar at√° ag teast√°il.</td></tr>
</tbody></table>
</div>
<p>I bhformh√≥r na gc√°sanna, beidh muid t√∫ a threor√∫ chuig an leagan ceart d'aon ch√≥d sin n√≠ thiomsa√≠onn.</p>
<h2 id="c√≥d-foinse"><a class="header" href="#c√≥d-foinse">C√≥d Foinse</a></h2>
<p>Is f√©idir na comhaid foinse √≥na gineadh an leabhar seo a fh√°il ar
<a href="https://github.com/rust-lang/book/tree/main/src">GitHub</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="t√∫s-a-chur-leis"><a class="header" href="#t√∫s-a-chur-leis">T√∫s a chur leis</a></h1>
<p>Cuirimis t√∫s le do thuras Rust! T√° go leor le foghlaim, ach tosa√≠onn gach turas
√°it √©igin. Sa chaibidil seo, pl√©ifimid:</p>
<ul>
<li>Suite√°il Rust ar Linux, macOS, agus Windows</li>
<li>Ag scr√≠obh cl√°r a phriont√°lann <code>Dia duit, ar domhan!</code></li>
<li>Ag baint √∫s√°ide as <code>cargo</code>, bainisteoir pac√°iste Rust agus c√≥ras t√≥g√°la</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="suite√°il"><a class="header" href="#suite√°il">Suite√°il</a></h2>
<p>Is √© an ch√©ad ch√©im n√° Rust a shuite√°il. D√©anfaimid Rust a √≠osl√≥d√°il tr√≠ 'rustup', a
uirlis l√≠ne ordaithe chun leaganacha Rust agus uirlis√≠ gaolmhara a bhainisti√∫. Beidh ort
Nasc Idirl√≠n le haghaidh soghluaiste √≠osl√≥d√°il.</p>
<blockquote>
<p>N√≥ta: M√°s fearr leat gan <code>rustup</code> a √∫s√°id ar ch√∫is √©igin, f√©ach le do thoil an
<a href="https://forge.rust-lang.org/infra/other-installation-methods.html">leathanach Modhanna Eile Suite√°la Rust</a> le haghaidh tuilleadh roghanna.</p>
</blockquote>
<p>Suite√°il na c√©imeanna seo a leanas an leagan cobhsa√≠ is d√©ana√≠ den tiomsaitheoir Rust.
Cinnt√≠onn cobhsa√≠ocht Rust go bhfuil na sampla√≠ go l√©ir sa leabhar a
leanfaidh tioms√∫ ar aghaidh ag tioms√∫ le leaganacha Rust n√≠os nua√≠. D'fh√©adfadh an t-aschur
difr√≠ocht beag√°n idir leaganacha mar is minic a fheabhsa√≠onn Rust teachtaireachta√≠ earr√°ide agus
rabhaidh. I bhfocail eile, aon leagan n√≠os nua√≠, cobhsa√≠ de Rust a shuite√°il t√∫ ag baint √∫s√°ide as
ba ch√≥ir go n-oibreodh na c√©imeanna seo mar a bheif√≠ ag s√∫il leis le h√°bhar an leabhair seo.</p>
<blockquote>
<h3 id="nodaireacht-l√≠ne-ord√∫"><a class="header" href="#nodaireacht-l√≠ne-ord√∫">Nodaireacht L√≠ne Ord√∫</a></h3>
<p>Sa chaibidil seo agus tr√≠d an leabhar, taispe√°nfaimid roinnt orduithe a √∫s√°idtear sa
teirmin√©al. Tosa√≠onn l√≠nte ar ch√≥ir duit a chur isteach i teirmin√©al le <code>$</code>. tu
n√≠ g√° an carachtar <code>$</code> a chl√≥scr√≠obh; is √© an leid l√≠ne ordaithe a thaispe√°ntar do
cuir in i√∫l t√∫s gach ord√∫. L√≠nte nach dtosa√≠onn le <code>$</code> de ghn√°th
taispe√°in aschur an ordaithe roimhe seo. Ina theannta sin, PowerShell-shonrach
√∫s√°idfidh <code>&gt;</code> sampla√≠ seachas <code>$</code>.</p>
</blockquote>
<h3 id="suite√°il-rustup-ar-linux-n√≥-macos"><a class="header" href="#suite√°il-rustup-ar-linux-n√≥-macos">Suite√°il <code>rustup</code> ar Linux n√≥ macOS</a></h3>
<p>M√° t√° Linux n√≥ macOS √° √∫s√°id agat, oscail teirmin√©al agus cuir isteach an t-ord√∫ seo a leanas:</p>
<pre><code class="language-console">$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
</code></pre>
<p>√çosl√≥d√°lann an t-ord√∫ script agus cuireann s√© t√∫s le suite√°il an <code>rustup</code>
uirlis, a shuite√°lann an leagan cobhsa√≠ is d√©ana√≠ de Rust. Seans go dtabharfar leid th√∫
le haghaidh do phasfhocal. M√° √©ir√≠onn leis an suite√°il, feicfear an l√≠ne seo a leanas:</p>
<pre><code class="language-text">Rust is installed now. Great!
</code></pre>
<p>Beidh <em>linker</em> ag teast√°il uait freisin, ar cl√°r √© a √∫s√°ideann Rust chun p√°irt a ghlacadh ann
aschuir tiomsaithe i gcomhad amh√°in. Is d√≥cha go bhfuil ceann agat cheana f√©in. M√° fhaigheann t√∫
earr√°id√≠ nasc√≥ir√≠, ba cheart duit tiomsaitheoir C a shuite√°il, lena n-√°ireofar de ghn√°th a
nasc√≥ir. T√° tiomsaitheoir C √∫s√°ideach freisin toisc go mbraitheann roinnt pac√°ist√≠ Rust coitianta
C c√≥d agus beidh tiomsaitheoir C de dh√≠th.</p>
<p>Ar macOS, is f√©idir leat tiomsaitheoir C a fh√°il tr√≠:</p>
<pre><code class="language-console">$ xcode-select --install
</code></pre>
<p>Ba cheart go ginear√°lta d'√∫s√°ideoir√≠ Linux GCC n√≥ Clang a shuite√°il, de r√©ir a gcuid
doicim√©ad√∫ d√°ileach√°in. Mar shampla, m√° √∫s√°ideann t√∫ Ubuntu, is f√©idir leat a shuite√°il
an pac√°iste <code>build-essential</code>.</p>
<h3 id="suite√°il-rustup-ar-windows"><a class="header" href="#suite√°il-rustup-ar-windows">Suite√°il <code>rustup</code> ar Windows</a></h3>
<p>Ar Windows, t√©igh chuig <a href="https://www.rust-lang.org/tools/install">https://www.rust-lang.org/tools/install</a> agus lean
Treoracha le haghaidh suite√°il Rust. Ag pointe √©igin sa suite√°il, d√©anfaidh t√∫
a spreagadh chun Visual Studio a shuite√°il. Sol√°thra√≠onn s√© seo nasc√≥ir agus an d√∫chais
leabharlanna ag teast√°il chun cl√°ir a thioms√∫. M√° theasta√≠onn tuilleadh cabhrach uait leis an gc√©im seo, f√©ach
<a href="https://rust-lang.github.io/rustup/installation/windows-msvc.html">https://rust-lang.github.io/rustup/installation/windows-msvc.html</a></p>
<p>√ös√°ideann an chuid eile den leabhar seo orduithe a oibr√≠onn sa d√° <em>cmd.exe</em> agus PowerShell.
M√° t√° difr√≠ochta√≠ sonracha ann, m√≠neoimid c√© acu ba cheart a √∫s√°id.</p>
<h3 id="fabhtcheart√∫"><a class="header" href="#fabhtcheart√∫">Fabhtcheart√∫</a></h3>
<p>Chun seice√°il an bhfuil Rust suite√°ilte i gceart agat, oscail sliog√°n agus cuir isteach √© seo
l√≠ne:</p>
<pre><code class="language-console">$ rustc --version
</code></pre>
<p>Ba cheart duit uimhir an leagain a fheice√°il, hash a thiomn√∫ agus d√°ta geallta a dh√©anamh ar a dh√©ana√≠
leagan cobhsa√≠ at√° eisithe, san fhorm√°id seo a leanas:</p>
<pre><code class="language-text">rustc x.y.z (abcabcabc bbbb-mm-ll)
</code></pre>
<p>M√° fheiceann t√∫ an fhaisn√©is seo, t√° t√∫ tar √©is Rust a shuite√°il go rath√∫il! Mura nd√©anann t√∫
f√©ach an fhaisn√©is seo, seice√°il go bhfuil Rust i do athr√≥g c√≥rais <code>% PATH%</code> mar
leanas.</p>
<p>I Windows CMD, bain √∫s√°id as:</p>
<pre><code class="language-console">&gt; echo %PATH%
</code></pre>
<p>I PowerShell, bain √∫s√°id as:</p>
<pre><code class="language-powershell">&gt; echo $env:Path
</code></pre>
<p>I Linux agus macOS, bain √∫s√°id as:</p>
<pre><code class="language-console">$ echo $PATH
</code></pre>
<p>M√° t√° s√© sin ceart agus nach bhfuil Rust f√≥s ag obair, t√° roinnt cinn ann
√°iteanna inar f√©idir leat cabhair a fh√°il. Faigh amach conas dul i dteagmh√°il le Rustaceans eile (a
leasainm amaideach a dtugaimid orainn f√©in) ar <a href="https://www.rust-lang.org/community">an leathanach pobail</a>.</p>
<h3 id="nuashonr√∫-agus-d√≠shuite√°il"><a class="header" href="#nuashonr√∫-agus-d√≠shuite√°il">Nuashonr√∫ agus D√≠shuite√°il</a></h3>
<p>Nuair a bheidh Rust suite√°ilte tr√≠ <code>rustup</code>, d√©antar nuashonr√∫ go leagan nua-eisithe
√©asca. √ì do bhlaosc, rith an script nuashonraithe seo a leanas:</p>
<pre><code class="language-console">$ rustup update
</code></pre>
<p>Chun Rust agus <code>rustup</code> a dh√≠shuite√°il, rith an script d√≠shuite√°la seo a leanas √≥ do
sliog√°n:</p>
<pre><code class="language-console">$ rustup self uninstall
</code></pre>
<h3 id="doicim√©ad√∫ch√°n-√Åiti√∫il"><a class="header" href="#doicim√©ad√∫ch√°n-√Åiti√∫il">Doicim√©ad√∫ch√°n √Åiti√∫il</a></h3>
<p>Cuims√≠onn suite√°il Rust c√≥ip √°iti√∫il de na doicim√©id mar sin freisin
gur f√©idir leat √© a l√©amh as l√≠ne. Rith <code>rustup doc</code> chun an doicim√©ad√∫ √°iti√∫il a oscailt
i do bhrabhs√°la√≠.</p>
<p>Am ar bith a shol√°thra√≠onn an leabharlann chaighde√°nach cine√°l n√≥ feidhm agus n√≠ bh√≠onn
cinnte cad a dh√©anann s√© n√≥ conas √© a √∫s√°id, bain √∫s√°id as an comh√©adan r√≠omhchl√°r√∫ feidhmchl√°r
(API) doicim√©ad√∫ a fh√°il amach!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="dia-duit-a-dhomhanda"><a class="header" href="#dia-duit-a-dhomhanda">Dia duit, a Dhomhanda!</a></h2>
<p>Anois go bhfuil Rust suite√°ilte agat, t√° s√© in am do ch√©ad chl√°r Rust a scr√≠obh.
T√° s√© traidisi√∫nta agus t√∫ ag foghlaim teanga nua cl√°r beag a scr√≠obh
prionta√≠ an t√©acs <code>Dia duit, domhan!</code> ar an sc√°ile√°n, mar sin d√©anfaimid an rud c√©anna anseo!</p>
<blockquote>
<p>N√≥ta: Glacann an leabhar seo le cur amach bun√∫sach ar an l√≠ne ordaithe. D√©anann Rust
n√≠l aon √©ileamh ar d'eagarth√≥ireacht n√≥ d'uirlisi√∫ n√≥ c√° bhfuil c√≥na√≠ ar do ch√≥d, mar sin de
m√°s fearr leat timpeallacht forbartha comhth√°ite (IDE) a √∫s√°id ina ionad
an l√≠ne ordaithe, b√≠odh leisce ort an IDE is fearr leat a √∫s√°id. T√° roinnt IDEanna anois
m√©id na taca√≠ochta Rust; seice√°il doicim√©ad√∫ an IDE le haghaidh sonra√≠.
t√° an Rust fhoireann ag d√≠ri√∫ ar thaca√≠ocht iontach IDE a chumas√∫ tr√≠ <code>rust-analyzer</code>. F√©ach
<a href="appendix-04-useful-development-tools.html">Aguis√≠n D</a><!-- neamhaird --> le haghaidh tuilleadh sonra√≠.</p>
</blockquote>
<h3 id="eolaire-tionscadal-√°-chruth√∫"><a class="header" href="#eolaire-tionscadal-√°-chruth√∫">Eolaire Tionscadal √° Chruth√∫</a></h3>
<p>Tos√≥idh t√∫ tr√≠ eolaire a dh√©anamh chun do ch√≥d Rust a st√≥r√°il. Is cuma
go Rust √°it a bhfuil c√≥na√≠ ar do ch√≥d, ach do na cleachta√≠ agus na tionscadail sa leabhar seo,
molaimid eolaire <em>tionscadail</em> a dh√©anamh i do eolaire baile agus gach rud a choime√°d
do thionscadail ann.</p>
<p>Oscail teirmin√©al agus cuir isteach na horduithe seo a leanas chun eolaire <em>tionscadail</em> a dh√©anamh
agus eolaire don "Dia duit, an domhan!" tionscadal laistigh den eolaire <em>tionscadail</em>.</p>
<p>Le haghaidh Linux, macOS, agus PowerShell ar Windows, cuir isteach √© seo:</p>
<pre><code class="language-console">$ mkdir ~/tionscadail
$ cd ~/tionscadail
$ mkdir hello_world
$ cd hello_world
</code></pre>
<p>I gc√°s Windows CMD, cuir isteach √© seo:</p>
<pre><code class="language-cmd">&gt; mkdir "%USERPROFILE%\tionscadail"
&gt; cd /d "%USERPROFILE%\tionscadail"
&gt; mkdir hello_world
&gt; cd hello_world
</code></pre>
<h3 id="cl√°r-rust-√°-scr√≠obh-agus-√°-rith"><a class="header" href="#cl√°r-rust-√°-scr√≠obh-agus-√°-rith">Cl√°r Rust √° Scr√≠obh agus √° Rith</a></h3>
<p>Ansin, d√©an comhad foinse nua agus glaoigh air <em>main.rs</em>. Comhaid Rust deireadh i gc√≥na√≠ le
an s√≠neadh <em>.rs</em>. M√° t√° n√≠os m√≥ n√° focal amh√°in in √∫s√°id agat i d‚Äôainm comhaid, beidh an
Is √© an gn√°s fosc√≥r a √∫s√°id chun iad a scaradh. Mar shampla, √∫s√°id
<em>hello_world.rs</em> seachas <em>helloworld.rs</em>.</p>
<p>Anois oscail an comhad <em>main.rs</em> a chruthaigh t√∫ d√≠reach agus cuir isteach an c√≥d i Liost√∫ 1-1.</p>
<Listing number="1-1" file-name="main.rs" caption="Cl√°r a phriont√°lann `Dia duit, a shaoghail!`">
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!("Dia duit, domhan!");
}</code></pre></pre>
</Listing>
<p>S√°bh√°il an comhad agus t√©igh ar ais go dt√≠ do fhuinneog teirmin√©il sa
_~/tionscadail/hello_world eolaire. Ar Linux n√≥ macOS, cuir isteach an m√©id seo a leanas
orduithe chun an comhad a thioms√∫ agus a rith:</p>
<pre><code class="language-cons√≥l">$ rustc main.rs
$ ./main
Dia duit, domhan!
</code></pre>
<p>Ar Windows, cuir isteach an t-ord√∫ <code>.\main.exe</code> in ionad <code>./main</code>:</p>
<pre><code class="language-powershell">&gt; rustc main.rs
&gt; .\main.exe
Dia duit, domhan!
</code></pre>
<p>beag beann ar do ch√≥ras oibri√∫ch√°in, ba ch√≥ir an teaghr√°n <code>Dia duit, a Dhomhan!</code> a phriont√°il go dt√≠
an teirmin√©al. Mura bhfeiceann t√∫ an t-aschur seo, f√©ach ar ais chuig an
<a href="ch01-01-installation.html#troubleshooting">‚ÄúFabhtcheart√∫‚Äù</a><!-- neamhaird a dh√©anamh ar --> cuid den Suite√°il
alt le haghaidh beala√≠ chun cabhair a fh√°il.</p>
<p>M√° rinne <code>Dia duit, a domhan!</code> cl√≥, comhghairdeas! T√° Rust scr√≠ofa agat go hoifigi√∫il
cl√°r. D√©anann s√© sin r√≠omhchl√°raitheoir Rust duit - f√°ilte romhat!</p>
<h3 id="anatama√≠ocht-chl√°r-rust"><a class="header" href="#anatama√≠ocht-chl√°r-rust">Anatama√≠ocht Chl√°r Rust</a></h3>
<p>D√©anaimis athbhreithni√∫ ar seo "Dia duit, a domhan!" cl√°r go mion. Seo chugaibh an ch√©ad p√≠osa
an puzal:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {

}</code></pre></pre>
<p>Sainmh√≠n√≠onn na l√≠nte seo feidhm darb ainm <code>main</code>. T√° an fheidhm <code>main</code> speisialta: √©
i gc√≥na√≠ ar an gc√©ad ch√≥d a ritheann i ngach cl√°r inrite Rust. Anseo, an
dearbha√≠onn an ch√©ad l√≠ne feidhm darb ainm <code>main</code> nach bhfuil paraim√©adair agus tuairisce√°in ann
faic. D√° mbeadh paraim√©adair ann, rachadh siad laistigh de na l√∫ib√≠n√≠ <code>()</code>.</p>
<p>T√° corp na feidhme fillte i <code>{}</code>. √âil√≠onn Rust l√∫ib√≠n√≠ curly timpeall ar fad
comhlachta√≠ feidhm. Is st√≠l mhaith √© an l√∫ib√≠n cuartha tosaigh a chur ar an gc√©anna
l√≠ne mar dhearbh√∫ feidhme, ag cur sp√°s amh√°in eatarthu.</p>
<blockquote>
<p>N√≥ta: M√°s mian leat clo√≠ le st√≠l chaighde√°nach ar fud na dtionscadal Rust, is f√©idir leat
bain √∫s√°id as uirlis uathfhorm√°idithe ar a dtugtar <code>rustfmt</code> chun do ch√≥d a fhorm√°idi√∫ in a
st√≠l ar leith (tuilleadh ar <code>rustfmt</code> in
<a href="appendix-04-useful-development-tools.html">Aguis√≠n D</a><!-- neamhaird a dh√©anamh -->). T√° an uirlis seo curtha san √°ireamh ag foireann Rust
leis an d√°ileadh caighde√°nach Rust, mar is √© <code>rustc</code>, mar sin ba ch√≥ir go mbeadh s√© cheana f√©in
suite√°ilte ar do r√≠omhaire!</p>
</blockquote>
<p>T√° an c√≥d seo a leanas i gcorp na <code>main</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("Dia duit, a domhan!");
<span class="boring">}</span></code></pre></pre>
<p>D√©anann an l√≠ne seo an obair ar fad sa chl√°r beag seo: prionta√≠ s√≠ t√©acs chuig an
sc√°ile√°n. T√° ceithre shonra√≠ t√°bhachtacha le tabhairt faoi deara anseo.</p>
<p>Ar dt√∫s, glaonn <code>println!</code> macra Rust. D√° mba rud √© gur ghlaoigh s√© feidhm ina hionad, is √©
chuirf√≠ isteach mar <code>println</code> (gan an <code>!</code>). Pl√©ifimid macra√≠ Rust in
n√≠os m√≥ sonra√≠ i gCaibidil 20. Faoi l√°thair, n√≠ g√° duit ach fios a bheith agat go n-√∫s√°ideann t√∫ <code>!</code>
Cialla√≠onn s√© sin go bhfuil t√∫ ag glaoch ar mhacra in ionad gn√°thfheidhm agus na macra√≠ sin
n√° lean na rialacha c√©anna le feidhmeanna i gc√≥na√≠.</p>
<p>Ar an dara dul s√≠os, feiceann t√∫ an teaghr√°n <code>"Dia duit, domhan!"</code>. Gabhaimid an teaghr√°n seo mar arg√≥int
go <code>println!</code>, agus cl√≥itear an teaghr√°n go dt√≠ an sc√°ile√°n.</p>
<p>Sa tr√≠√∫ h√°it, deireadh muid an l√≠ne le leathstad (<code>;</code>), a l√©ir√≠onn go bhfuil s√© seo
t√° deireadh le cur in i√∫l agus t√° an ch√©ad cheann eile r√©idh le tos√∫. An chuid is m√≥ de na l√≠nte de ch√≥d Rust
deireadh le leathstad.</p>
<h3 id="is-c√©imeanna-ar-leith-iad-tioms√∫-agus-rith"><a class="header" href="#is-c√©imeanna-ar-leith-iad-tioms√∫-agus-rith">Is C√©imeanna ar Leith iad Tioms√∫ agus Rith</a></h3>
<p>T√° cl√°r nuachruthaithe d√≠reach √° rith agat, mar sin d√©anaimis scr√∫d√∫ ar gach c√©im sa
pr√≥iseas.</p>
<p>Sula ritheann t√∫ cl√°r Rust, n√≠ m√≥r duit √© a thioms√∫ ag baint √∫s√°ide as an tiomsaitheoir Rust tr√≠
an t-ord√∫ <code>rustc</code> a iontr√°il agus ainm do chomhaid foinse a thabhairt d√≥, mar
seo:</p>
<pre><code class="language-console">$ rustc main.rs
</code></pre>
<p>M√° t√° c√∫lra C n√≥ C++ agat, tabharfaidh t√∫ faoi deara go bhfuil s√© seo cos√∫il le <code>gc</code>
n√≥ <code>clang</code>. Tar √©is a thioms√∫ go rath√∫il, aschuir Rust inrite d√©n√°rtha.</p>
<p>Ar Linux, macOS, agus PowerShell ar Windows, is f√©idir leat an inrite a fheice√°il le
ag dul isteach an t-ord√∫ <code>ls</code> i do bhlaosc:</p>
<pre><code class="language-console">$ ls
main  main.rs
</code></pre>
<p>Ar Linux agus macOS, feicfidh t√∫ dh√° chomhad. Le PowerShell ar Windows, d√©anfaidh t√∫
f√©ach ar na tr√≠ chomhad ch√©anna a d'fheicfe√° ag baint √∫s√°ide as CMD. Le CMD ar Windows, t√∫
chuirfeadh s√© seo a leanas isteach:</p>
<pre><code class="language-cmd">&gt; dir /B %= deir an rogha /B gan ach ainmneacha na gcomhad a thaispe√°int =%
main.exe
main.pdb
main.rs
</code></pre>
<p>Taispe√°nann s√© seo an comhad c√≥d foinse leis an s√≠neadh <em>.rs</em>, an comhad inrite
(<em>main.exe</em> ar Windows, ach <em>main</em> ar gach ard√°n eile), agus, nuair a √∫s√°id
Windows, comhad ina bhfuil faisn√©is d√≠fhabhtaithe leis an iarmh√≠r <em>.pdb</em>.
As seo, ritheann t√∫ an comhad <em>main</em> n√≥ <em>main.exe</em>, mar seo:</p>
<pre><code class="language-console">$ ./main # or .\main.exe ar Windows
</code></pre>
<p>M√°s √© do <em>main.rs</em> do "Dia duit, domhan!" cl√°r, prionta√≠ an l√≠ne seo <code>Dia duit, domhan!</code> chuig do chr√≠ochfort.</p>
<p>M√° t√° n√≠os m√≥ eolas agat ar theanga dhinimici√∫il, mar Ruby, Python, n√≥
JavaScript, seans nach bhfuil t√∫ cleachta le cl√°r a thioms√∫ agus a rith mar
c√©imeanna ar leith. Is teanga tiomsaithe <em>roimh-ama</em> √© Rust, rud a chialla√≠onn gur f√©idir leat
cl√°r a thioms√∫ agus an inrite a thabhairt do dhuine eile, agus is f√©idir leo √© a rith
fi√∫ gan Rust a bheith suite√°ilte. M√° thugann t√∫ <em>.rb</em>, <em>.py</em>, n√≥
<em>.js</em>, n√≠ m√≥r cur i bhfeidhm Ruby, Python n√≥ JavaScript a bheith acu
suite√°ilte (faoi seach). Ach sna teangacha sin, n√≠l uait ach ord√∫ amh√°in chun
do chl√°r a thioms√∫ agus a rith. Is malairt-uaire √© gach rud i ndearadh teanga.</p>
<p>T√° s√© ceart go leor ach le <code>rustc</code> a thioms√∫ do chl√°ir shimpl√≠, ach mar do thionscadal
f√°s, beidh t√∫ ag iarraidh na roghanna go l√©ir a bhainisti√∫ agus √© a dh√©anamh √©asca do chuid a roinnt
c√≥d. Ansin, cuirfimid an uirlis lasta in aithne duit, a chabhr√≥idh leat scr√≠obh
cl√°ir Rust domhan f√≠or.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="dia-duit-cargo"><a class="header" href="#dia-duit-cargo">Dia duit, Cargo!</a></h2>
<p>Is √© Cargo c√≥ras t√≥g√°la Rust agus bainisteoir pac√°iste. √ös√°ideann an chuid is m√≥ de na Rustaceans an uirlis seo
a dtionscadail Rust a bhainisti√∫ mar go l√°imhse√°lann Cargo go leor tascanna duit,
mar shampla do ch√≥d a th√≥g√°il, na leabharlanna a bhraitheann do ch√≥d a √≠osl√≥d√°il, agus
ag t√≥g√°il na leabharlanna sin. (Tugaimid na leabharlanna a bhfuil do ch√≥d de dh√≠th orthu
<em>sple√°chais</em>.)</p>
<p>Na cl√°ir Rust is simpl√≠, cos√∫il leis an gceann at√° scr√≠ofa againn go dt√≠ seo, n√≠l aon cheann acu
sple√°chais. D√° mbeadh an "Dia duit, domhan!" tionscadal le Cargo, bheadh
n√° h√∫s√°id ach an chuid de Cargo a l√°imhse√°lann t√≥g√°il do ch√≥d. Agus t√∫ ag scr√≠obh n√≠os m√≥
cl√°ir chasta Rust, cuirfidh t√∫ sple√°chais leis, agus m√° thosa√≠onn t√∫ ar thionscadal
ag baint √∫s√°ide as Cargo, beidh s√© i bhfad n√≠os √©asca sple√°chais a chur leis.</p>
<p>Toisc go n-√∫s√°ideann formh√≥r m√≥r na dtionscadal Rust Cargo, an chuid eile den leabhar seo
glacann s√© leis go bhfuil Cargo √° √∫s√°id agat freisin. Tagann Cargo suite√°ilte le Rust m√° t√° t√∫
√∫s√°id na suite√°laithe oifigi√∫la a pl√©adh sa
<a href="ch01-01-installation.html#installation">‚ÄúSuite√°il‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt. M√° shuite√°il t√∫ Rust
tr√≠ mhodh √©igin eile, seice√°il an bhfuil Cargo suite√°ilte ag dul isteach sa
seo a leanas i do chr√≠ochfort:</p>
<pre><code class="language-console">$ cargo --version
</code></pre>
<p>M√° fheiceann t√∫ uimhir leagain, t√° s√© agat! M√° fheiceann t√∫ earr√°id, mar <code>ord√∫ n√≠or aims√≠odh</code>, f√©ach ar an doicim√©ad√∫ le haghaidh do mhodh suite√°la go
a chinneadh conas Cargo a shuite√°il ar leithligh.</p>
<h3 id="tionscadal-a-chruth√∫-le-cargo"><a class="header" href="#tionscadal-a-chruth√∫-le-cargo">Tionscadal a Chruth√∫ le Cargo</a></h3>
<p>D√©anaimis tionscadal nua a chruth√∫ ag baint √∫s√°ide as Cargo agus f√©achaint ar an difr√≠ocht at√° idir √© agus √°r gcuid
bunaidh "Dia duit, domhan!" tionscadal. T√©igh ar ais chuig d'eolaire <em>projects</em>
(n√≥ cib√© √°it ar shocraigh t√∫ do ch√≥d a st√≥r√°il). Ansin, ar aon ch√≥ras oibri√∫ch√°in,
re√°cht√°il an m√©id seo a leanas:</p>
<pre><code class="language-console">$ cargo new hello_cargo
$ cd hello_cargo
</code></pre>
<p>Crutha√≠onn an ch√©ad ord√∫ eolaire agus tionscadal nua ar a dtugtar <em>hello_cargo</em>.
T√° √°r dtionscadal ainmnithe againn mar <em>hello_cargo</em>, agus crutha√≠onn Cargo a chomhaid in a
eolaire den ainm c√©anna.</p>
<p>T√©igh isteach san eolaire <em>hello_cargo</em> agus liostaigh na comhaid. Feicfidh t√∫ an Cargo sin
t√° dh√° chomhad agus eolaire amh√°in ginte againn d√∫inn: comhad <em>Cargo.toml</em> agus a
eolaire <em>src</em> le comhad <em>main.rs</em> istigh.</p>
<p>Chuir s√© t√∫s le st√≥r nua Git chomh maith le comhad <em>.gitignore</em>.
N√≠ ghinfear comhaid Git m√° ritheann t√∫ <code>cargo new</code> laistigh de Git at√° ann cheana f√©in
st√≥r ; is f√©idir leat an t-iompar seo a sh√°r√∫ tr√≠ √∫s√°id a bhaint as <code>cargo new --vcs=git</code>.</p>
<blockquote>
<p>N√≥ta: Is c√≥ras rialaithe leagan coitianta √© Git. Is f√©idir leat <code>cargo new</code> a athr√∫ go
c√≥ras rialaithe leagan difri√∫il n√≥ c√≥ras rialaithe leagan ar bith a √∫s√°id tr√≠ √∫s√°id a bhaint as
an bhratach <code>--vcs</code>. Rith <code>cargo new --help</code> chun na roghanna at√° ar f√°il a fheice√°il.</p>
</blockquote>
<p>Oscail <em>Cargo.toml</em> i do rogha eagarth√≥ir t√©acs. Ba ch√≥ir breathn√∫ cos√∫il leis an
c√≥d i Liost√∫ 1-2.</p>
<Listing number="1-2" file-name="Cargo.toml" caption="Contents of *Cargo.toml* generated by `cargo new`">
<pre><code class="language-toml">[package]
name = "hello_cargo"
version = "0.1.0"
edition = "2021"

# F√©ach tuilleadh eochracha agus a sainmh√≠nithe ag https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
</code></pre>
</Listing>
<p>T√° an comhad seo sa <a href="https://toml.io"><em>TOML</em></a><!-- neamhaird a dh√©anamh ar --> (<em>Tom Soil√©ir, √çosr√°ta
Language</em>) form√°id, is √© sin form√°id chumra√≠ochta Cargo.</p>
<p>Is ceannteideal rann√≥ige √≠ an ch√©ad l√≠ne, <code>[package]</code>, a thugann le fios go bhfuil an
r√°itis seo a leanas ag chumr√∫ pac√°iste. De r√©ir mar a chuirimid tuilleadh eolais le
an comhad seo, cuirfimid ailt eile leis.</p>
<p>Leagann na ch√©ad tr√≠ l√≠ne eile an fhaisn√©is chumra√≠ochta a chaithfidh Cargo a thioms√∫
do chl√°r: an t-ainm, an leagan, agus an t-eagr√°n de Rust le h√∫s√°id. Labhr√≥imid
faoin eochair <code>edition</code> in <a href="aguis%C3%ADn-05-eagr%C3%A1in.html">Aguis√≠n E</a> <!-- neamhaird a dh√©anamh -->.</p>
<p>Is √≠ an l√≠ne dheireanach, <code>[dependencies]</code>, t√∫s rann√°in chun t√∫ a liost√∫
de sple√°chais do thionscadal. I Rust, tagra√≠tear do phac√°ist√≠ c√≥d mar
<em>crates</em>. N√≠ bheidh aon cliathbhosca√≠ eile ag teast√°il uainn don tionscadal seo, ach beidh muid sa
an ch√©ad tionscadal i gCaibidil 2, mar sin √∫s√°idfimid an rann√°n sple√°chais seo ansin.</p>
<p>Anois oscail <em>src/main.rs</em> agus f√©ach:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!("Dia duit, an domhan!");
}</code></pre></pre>
<p>T√° Cargo tar √©is "Dia duit, domhan!" cl√°r duitse, d√≠reach cos√∫il leis an gceann at√° againn
scr√≠ofa i Liost√∫ 1-1! Go dt√≠ seo, na difr√≠ochta√≠ idir √°r dtionscadal agus an
tionscadal Cargo ginte is ea gur chuir Cargo an c√≥d san eolaire <em>src</em>
agus t√° comhad cumra√≠ochta <em>Cargo.toml</em> againn san eolaire barr.</p>
<p>T√° s√∫il ag Cargo go mbeidh do chuid comhad foinse beo laistigh den eolaire <em>src</em>. T√° an
n√≠l eolaire tionscadail ardleibh√©il ann ach do chomhaid README, faisn√©is cead√∫nais,
comhaid cumra√≠ochta, agus aon rud eile nach mbaineann le do ch√≥d. Ag baint √∫s√°ide as Cargo
chuid√≠onn leat do thionscadail a eagr√∫. T√° √°it do gach rud, agus
t√° gach rud ina √°it.</p>
<p>M√° thosaigh t√∫ ar thionscadal nach n-√∫s√°ideann Cargo, mar a rinne muid leis an "Dia duit,
domhan!" tionscadal, is f√©idir leat √© a thiont√∫ go tionscadal a √∫s√°ideann Cargo. Bog an
c√≥d an tionscadail isteach san eolaire <em>src</em> agus cruthaigh <em>Cargo.toml</em> cu√≠
comhad. Bealach √©asca amh√°in chun an comhad <em>Cargo.toml</em> sin a fh√°il n√° <code>cargo init</code> a rith, rud a
cruth√≥idh s√© duit go huathoibr√≠och √©.</p>
<h3 id="tionscadal-cargo-a-th√≥g√°il-agus-a-re√°cht√°il"><a class="header" href="#tionscadal-cargo-a-th√≥g√°il-agus-a-re√°cht√°il">Tionscadal Cargo a Th√≥g√°il agus a Re√°cht√°il</a></h3>
<p>Anois breathna√≠mid ar cad at√° difri√∫il nuair a th√≥gaimid agus a ritheann muid an ‚ÄúDia duit, an domhan!‚Äù
cl√°r le Cargo! √ì d'eolaire <em>hello_cargo</em>, cuir do thionscadal le ch√©ile
ag dul isteach an t-ord√∫ seo a leanas:</p>
<pre><code class="language-console">$ cargo build
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 2.85 secs
</code></pre>
<p>Crutha√≠onn an t-ord√∫ seo comhad inrite i <em>target/debug/hello_cargo</em> (n√≥
<em>target\debug\hello_cargo.exe</em> ar Windows) seachas i do reatha
eolaire. Toisc gur t√≥g√°il d√≠fhabhtaithe √© an t√≥g√°il r√©amhshocraithe, cuireann Cargo an d√©n√°rtha isteach
eolaire darb ainm <em>debug</em>. Is f√©idir leat an inrite a rith leis an ord√∫ seo:</p>
<pre><code class="language-console">$ ./target/debug/hello_cargo # or .\target\debug\hello_cargo.exe on Windows
Dia duit, an domhan!
</code></pre>
<p>M√° √©ir√≠onn go maith leis, ba cheart do <code>Dia duit, an domhan!</code> priont√°il chuig an teirmin√©al. Ag rith <code>cargo build</code> don ch√©ad uair freisin is c√∫is le Cargo comhad nua a chruth√∫ ag an mbarr
leibh√©al: <em>Cargo.lock</em>. Coinn√≠onn an comhad seo s√∫il ar na leaganacha cruinne de
sple√°chais i do thionscadal. N√≠l sple√°chais ag an tionscadal seo, mar sin de
comhad beag√°n tana√≠. N√≠ bheidh ort an comhad seo a athr√∫ de l√°imh riamh; Cargo
bainist√≠onn s√© a bhfuil ann duit.</p>
<p>Th√≥gamar tionscadal le <code>cargo build</code> agus rith s√© leis
<code>./target/debug/hello_cargo</code>, ach is f√©idir linn <code>cargo run</code> a √∫s√°id freisin chun an
c√≥d agus ansin rith an inrite iarmhartach uile in aon ord√∫ amh√°in:</p>
<pre><code class="language-console">$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs
     Running `target/debug/hello_cargo`
Dia duit, an domhan!
</code></pre>
<p>T√° s√© n√≠os √°isi√∫la <code>cargo run</code> a √∫s√°id n√° cuimhneamh ar <code>cargo build</code>
agus ansin bain √∫s√°id as an cos√°n ioml√°n chuig an d√©n√°rtha, mar sin √∫s√°ideann an chuid is m√≥ forbr√≥ir√≠
<code>cargo run</code>.</p>
<p>Tabhair faoi deara nach bhfaca muid aschur an uair seo a thugann le fios go raibh Cargo √° thioms√∫
<code>hello_cargo</code>. Fuair ‚Äã‚ÄãCargo amach n√°r athraigh na comhaid, mar sin n√≠or athraigh
at√≥g√°il ach rith an d√©n√°rtha. M√° d'athraigh t√∫ do ch√≥d foinseach, Cargo
go mbeadh an tionscadal at√≥gtha agat roimh √© a rith, agus bheadh ‚Äã‚Äãs√© seo feicthe agat
aschur:</p>
<pre><code class="language-console">$ cargo run
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.33 secs
     Running `target/debug/hello_cargo`
Dia duit, an domhan!
</code></pre>
<p>Sol√°thra√≠onn Cargo ord√∫ freisin ar a dtugtar <code>cargo check</code>. Seice√°lann an t-ord√∫ seo go tapa
do ch√≥d chun a chinnti√∫ go dtiomsa√≠onn s√© ach nach dt√°irgtear c√≥d inrite:</p>
<pre><code class="language-console">$ cargo check
   Checking hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32 secs
</code></pre>
<p>C√©n f√°th nach mbeadh inrite uait? Go minic, b√≠onn <code>cargo check</code> i bhfad n√≠os tap√∫la n√°
<code>cargo build</code> toisc go scipeann s√© an ch√©im chun inrite a th√°irgeadh. M√° t√° t√∫
do chuid oibre a sheice√°il go lean√∫nach agus an c√≥d √° scr√≠obh, ag baint √∫s√°ide as <code>cargo check</code>
dl√∫s a chur leis an bpr√≥iseas chun t√∫ a chur ar an eolas an bhfuil do thionscadal f√≥s √° chur le ch√©ile! Mar
mar sin, ritheann go leor Rustaceans <code>cargo check</code> go tr√©imhsi√∫il agus iad ag scr√≠obh a gcuid
cl√°r chun a chinnti√∫ go dtiomsa√≠onn s√©. Ansin ritheann siad <code>cargo build</code> nuair a bh√≠onn siad
r√©idh le h√∫s√°id an inrite.</p>
<p>Gabhaimis siar a bhfuil foghlamtha againn go dt√≠ seo faoi Cargo:</p>
<ul>
<li>Is f√©idir linn tionscadal a chruth√∫ ag baint √∫s√°ide as <code>cargo new</code>.</li>
<li>Is f√©idir linn tionscadal a th√≥g√°il ag baint √∫s√°ide as <code>cargo build</code>.</li>
<li>Is f√©idir linn tionscadal a th√≥g√°il agus a re√°cht√°il in aon ch√©im amh√°in ag baint √∫s√°ide as <code>cargo run</code>.</li>
<li>Is f√©idir linn a th√≥g√°il le tionscadal gan a th√°irgeadh d√©n√°rtha a sheice√°il le haghaidh earr√°id√≠ ag baint √∫s√°ide as
<code>cargo check</code>.</li>
<li>In ionad toradh na t√≥g√°la a sh√°bh√°il san eolaire c√©anna len√°r gc√≥d,
St√≥r√°lann Cargo √© san eolaire <em>target/debug</em>.</li>
</ul>
<p>Bunt√°iste breise a bhaineann le Cargo a √∫s√°id n√° go bhfuil na horduithe mar an gc√©anna uimh
cuma c√©n c√≥ras oibri√∫ch√°in a bhfuil t√∫ ag obair air. Mar sin, ag an bpointe seo, n√≠ bheidh muid
treoracha sonracha a shol√°thar n√≠os faide le haghaidh Linux agus macOS i gcoinne Windows.</p>
<h3 id="ag-t√≥g√°il-le-haghaidh-eisi√∫int"><a class="header" href="#ag-t√≥g√°il-le-haghaidh-eisi√∫int">Ag T√≥g√°il le haghaidh Eisi√∫int</a></h3>
<p>Nuair a bheidh do thionscadal r√©idh le scaoileadh faoi dheireadh, is f√©idir leat  a √∫s√°id <code>cargo build --release</code> chun √© a thioms√∫ le optimizations. Cruth√≥idh an t-ord√∫ seo an
inrite in <em>target/release</em> in ionad <em>target/debug</em>. Na optimizations
d√©an do ch√≥d meirge a rith n√≠os tap√∫la, ach m√° chuirtear ar si√∫l iad, m√©ada√≠tear an t-am a th√≥gann s√©
chun do chl√°r a thioms√∫. Sin √© an f√°th go bhfuil dh√° phr√≥if√≠l √©ags√∫la ann: ceann amh√°in
le haghaidh forbartha, nuair is mian leat a at√≥g√°il go tapa agus go minic, agus ceann eile le haghaidh
ag t√≥g√°il an chl√°ir deiridh a thabharfaidh t√∫ d'√∫s√°ideoir nach nd√©anfar √© a at√≥g√°il
ar√≠s agus ar√≠s eile agus rithfidh sin chomh tapa agus is f√©idir. M√° t√° do chuid tagarmharc√°la √° dh√©anamh agat
am reatha an ch√≥id, b√≠ cinnte go ritheann t√∫ <code>cargo build --release</code> agus tagarmharc√°il leis
an inrite i <em>target/release</em>.</p>
<h3 id="cargo-mar-choinbhinsi√∫n"><a class="header" href="#cargo-mar-choinbhinsi√∫n">Cargo mar Choinbhinsi√∫n</a></h3>
<p>Le tionscadail shimpl√≠, n√≠ shol√°thra√≠onn Cargo m√≥r√°n luach seachas √∫s√°id a bhaint as
<code>rustc</code>, ach cruth√≥idh s√© a fhi√∫ntas de r√©ir mar a √©ir√≠onn do chl√°ir n√≠os casta.
Nuair a fh√°sann cl√°ir go comhaid iolracha n√≥ nuair a bh√≠onn sple√°chas ag teast√°il uathu, t√° s√© i bhfad n√≠os √©asca √© a dh√©anamh
lig do Cargo an t√≥g√°il a chomhord√∫.</p>
<p>C√© go bhfuil an tionscadal <code>hello_cargo</code> simpl√≠, √∫s√°ideann s√© go leor den r√©ad√∫lacht anois
uirlis√≠ a √∫s√°idfidh t√∫ sa chuid eile de do ghairm bheatha Rust. Go deimhin, a bheith ag obair ar aon
tionscadail at√° ann cheana f√©in, is f√©idir leat √∫s√°id a bhaint as na horduithe seo a leanas a sheice√°il amach an c√≥d
ag baint √∫s√°ide as Git, athraigh chuig eolaire an tionscadail sin, agus t√≥g:</p>
<pre><code class="language-console">$ git clone example.org/someproject
$ cd someproject
$ cargo build
</code></pre>
<p>Chun tuilleadh eolais a fh√°il faoi Cargo, seice√°il <a href="https://doc.rust-lang.org/cargo/">a dhoicim√©ad√∫</a>.</p>
<h2 id="achoimre"><a class="header" href="#achoimre">Achoimre</a></h2>
<p>T√° t√∫s iontach curtha agat le do thuras Rust cheana f√©in! Sa chaibidil seo,
d'fhoghlaim t√∫ conas:</p>
<ul>
<li>Suite√°il an leagan cobhsa√≠ is d√©ana√≠ de Rust ag baint √∫s√°ide as <code>rustup</code></li>
<li>Nuashonraigh go leagan Rust n√≠os nua√≠</li>
<li>Oscail doicim√©ad√∫ suite√°ilte go h√°iti√∫il</li>
<li>Scr√≠obh agus rith "Dia duit, a domhan!" cl√°r ag baint √∫s√°ide as <code>rustc</code> go d√≠reach</li>
<li>Cruthaigh agus rith tionscadal nua ag baint √∫s√°ide as coinbhinsi√∫in Cargo</li>
</ul>
<p>Is iontach an tr√°th √© seo le cl√°r n√≠os substainti√∫la a chur le ch√©ile chun dul i dtaith√≠ ar an l√©itheoireacht
agus c√≥d Rust √° scr√≠obh. Mar sin, i gCaibidil 2, t√≥gfaimid cl√°r cluiche tomhais.
M√°s fearr leat tos√∫ ag foghlaim conas a oibr√≠onn coincheapa r√≠omhchl√°raithe coitianta
Meirge, f√©ach Caibidil 3 agus ansin ar ais go Caibidil 2.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cluiche-tomhais-a-r√≠omhchl√°r√∫"><a class="header" href="#cluiche-tomhais-a-r√≠omhchl√°r√∫">Cluiche Tomhais a R√≠omhchl√°r√∫</a></h1>
<p>L√©imid isteach i Rust tr√≠ thionscadal praitici√∫il a oibri√∫ le ch√©ile! seo
Tugann caibidil c√∫pla coincheap Rust coitianta duit tr√≠na thaispe√°int duit conas √© a √∫s√°id
iad i gcl√°r f√≠or. Foghlaimeoidh t√∫ faoi <code>let</code>, <code>match</code>, modhanna, gaolmhar
feidhmeanna, cliathbhosca√≠ seachtracha, agus go leor eile! Sna caibidl√≠ seo a leanas, d√©anfaimid ini√∫chadh
na smaointe seo n√≠os mine. Sa chaibidil seo, n√≠ dh√©anfaidh t√∫ ach cleachtadh ar an
bun√∫sacha.</p>
<p>Cuirfimid fadhb r√≠omhchl√°raithe clasaiceach do thosaitheoir√≠ i bhfeidhm: cluiche tomhais. Seo chugaibh
conas a oibr√≠onn s√©: ginfidh an cl√°r sl√°nuimhir randamach idir 1 agus 100. It
spreagfaidh an t-imreoir ansin buille faoi thuairim a thabhairt. Tar √©is buille faoi thuairim a iontr√°il, cuirtear an
l√©ireoidh an cl√°r an bhfuil an buille faoi thuairim r√≥-√≠seal n√≥ r√≥-ard. M√° t√° an buille faoi thuairim
ceart, beidh an cluiche a phriont√°il teachtaireacht comhghairdeas agus scoir.</p>
<h2 id="tionscadal-nua-a-bhun√∫"><a class="header" href="#tionscadal-nua-a-bhun√∫">Tionscadal Nua a Bhun√∫</a></h2>
<p>Chun tionscadal nua a shocr√∫, t√©igh chuig an eolaire <em>projects</em> a chruthaigh t√∫ ann
Caibidil 1 agus d√©an tionscadal nua ag baint √∫s√°ide as Cargo, mar a leanas:</p>
<pre><code class="language-console">$ cargo new guessing_game
$ cd guessing_game
</code></pre>
<p>Glacann an ch√©ad ord√∫, <code>cargo new</code>, ainm an tionscadail (<code>guessing_game</code>)
mar an ch√©ad arg√≥int. Athra√≠onn an dara ord√∫ go dt√≠ na tionscadail nua
eolaire.</p>
<p>F√©ach ar an gcomhad <em>Cargo.toml</em> ginte:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial
rm -rf no-listing-01-cargo-new
cargo new no-listing-01-cargo-new --name guessing_game
cd no-listing-01-cargo-new
cargo run > output.txt 2>&1
cd ../../..
-->
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[package]
name = "guessing_game"
version = "0.1.0"
edition = "2021"

[dependencies]
</code></pre>
<p>Mar a chonaic t√∫ i gCaibidil 1, gineann <code>cargo new</code> "Dia duit, domhan!" cl√°r le haghaidh
leat. Seice√°il an comhad <em>src/main.rs</em>:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!("Hello, world!");
}</code></pre></pre>
<p>Anois d√©anaimis an "Dia duit, a domhan!" cl√°r agus √© a re√°cht√°il sa ch√©im ch√©anna
ag baint √∫s√°ide as an ord√∫ <code>cargo run</code>:</p>
<pre><code class="language-console">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.20s
     Running `target/debug/guessing_game`
Hello, world!
</code></pre>
<p>B√≠onn an t-ord√∫ <code>run</code> √°isi√∫il nuair is g√° duit athr√° tapa a dh√©anamh ar thionscadal,
mar a dh√©anfaimid sa chluiche seo, t√°st√°il tapa a dh√©anamh ar gach atriall roimh bogadh ar aghaidh go dt√≠
an tarna ceann.</p>
<p>Athoscail an comhad <em>src/main.rs</em>. Beidh an c√≥d ar fad √° scr√≠obh agat sa chomhad seo.</p>
<h2 id="buille-faoi-thuairim-a-phr√≥ise√°il"><a class="header" href="#buille-faoi-thuairim-a-phr√≥ise√°il">Buille faoi thuairim a phr√≥ise√°il</a></h2>
<p>Iarrfaidh an ch√©ad chuid den chl√°r cluiche buille faoi thuairim ionchur √∫s√°ideora, pr√≥iseas
an t-ionchur sin, agus seice√°il go bhfuil an t-ionchur san fhoirm a bhfuiltear ag s√∫il l√©i. Chun t√∫s a chur, d√©anfaimid
lig don imreoir buille faoi thuairim a ionchur. Cuir isteach an c√≥d i Liost√∫ 2-1 isteach
<em>src/main.rs</em>.</p>
<Listing number="2-1" file-name="src/main.rs" caption="C√≥d a fhaigheann buille faoi thuairim √≥n √∫s√°ideoir agus a phrionna√≠onn s√©">
<pre><code class="language-rust ignore">use std::io;

fn main() {
    println!("Guess the number!");

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin()
        .read_line(&amp;mut guess)
        .expect("Failed to read line");

    println!("You guessed: {}", guess);
}</code></pre>
</Listing>
<p>T√° go leor faisn√©ise sa ch√≥d seo, mar sin d√©anaimis dul thairis air l√≠ne ar l√≠ne. Chuig
ionchur √∫s√°ideora a fh√°il agus ansin an toradh a phriont√°il mar aschur, n√≠ m√≥r d√∫inn an
leabharlann ionchuir/aschuir <code>io</code> isteach sa sc√≥ip. Tagann an leabharlann <code>io</code> √≥n gcaighde√°n
leabharlann, ar a dtugtar <code>std</code>:</p>
<pre><code class="language-rust ignore">use std::io;
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {}", guess);
</span><span class="boring">}</span></code></pre>
<p>De r√©ir r√©amhshocraithe, t√° sraith m√≠reanna sainithe ag Rust sa leabharlann chaighde√°nach at√° aige
a thugann isteach raon feidhme gach cl√°ir. Tugtar an <em>prelude</em> ar an tacar seo, agus
is f√©idir leat gach rud at√° ann a fheice√°il <a href="../std/prelude/index.html">i gc√°ip√©is√≠ocht chaighde√°nach na leabharlainne</a>.</p>
<p>Mura bhfuil cine√°l is mian leat a √∫s√°id sa r√©amhr√°, caithfidh t√∫ an cine√°l sin a thabhairt leat
isteach sa raon feidhme go sainr√°ite le r√°iteas <code>use</code>. Ag baint √∫s√°ide as an leabharlann <code>std::io</code>
ar f√°il duit le roinnt gn√©ithe √∫s√°ideacha, lena n-√°ir√≠tear an cumas chun glacadh leis
ionchur √∫s√°ideora.</p>
<p>Mar a chonaic t√∫ i gCaibidil 1, is √© an fheidhm <code>main</code> an pointe iontr√°la isteach sa
cl√°r:</p>
<pre><code class="language-rust ignore"><span class="boring">use std::io;
</span><span class="boring">
</span>fn main() {
<span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {}", guess);
</span><span class="boring">}</span></code></pre>
<p>Dearbha√≠onn an chomhr√©ir <code>fn</code> feidhm nua; na l√∫ib√≠n√≠, <code>()</code>, cuir in i√∫l ann
nach bhfuil aon pharaim√©adair; agus cuireann an l√∫ib√≠n chatach, <code>{</code>, t√∫s le corp na feidhme.</p>
<p>Mar a d'fhoghlaim t√∫ i gCaibidil 1 freisin, is macra √© <code>println!</code> a phrionna√≠onn teaghr√°n go
an sc√°ile√°n:</p>
<pre><code class="language-rust ignore"><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span>    println!("Guess the number!");

    println!("Please input your guess.");
<span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {}", guess);
</span><span class="boring">}</span></code></pre>
<p>T√° leid √° phriont√°il ag an gc√≥d seo √° r√° cad √© an cluiche agus ag iarraidh ionchur
√≥n √∫s√°ideoir.</p>
<h3 id="luachanna-a-st√≥r√°il-le-athr√≥ga"><a class="header" href="#luachanna-a-st√≥r√°il-le-athr√≥ga">Luachanna a St√≥r√°il le Athr√≥ga</a></h3>
<p>Ansin, cruth√≥imid <em>athraitheach</em> chun ionchur an √∫s√°ideora a st√≥r√°il, mar seo:</p>
<pre><code class="language-rust ignore"><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span>    let mut guess = String::new();
<span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {}", guess);
</span><span class="boring">}</span></code></pre>
<p>Anois t√° an cl√°r ag √©ir√≠ suimi√∫il! T√° go leor ar si√∫l sa bheag√°n seo
l√≠ne. Bainimid √∫s√°id as an r√°iteas <code>let</code> chun an athr√≥g a chruth√∫. Seo sampla eile:</p>
<pre><code class="language-rust ignore">let √∫lla = 5;</code></pre>
<p>Crutha√≠onn an l√≠ne seo athr√≥g nua darb ainm <code>apples</code> agus ceangla√≠onn s√≠ √© leis an luach 5. In
Meirge, t√° athr√≥ga do-mhar√∫ de r√©ir r√©amhshocraithe, rud a chialla√≠onn nuair a thugaimid an athr√≥g a
luach, n√≠ athr√≥idh an luach. Beidh an coincheap seo √° phl√© againn go mion
an [‚ÄúAthr√≥ga agus Comhsh√≥cmhainneacht‚Äù][athr√≥ga-agus-sh√≥-sh√≥-athr√≥ga]<!-- neamhaird a dh√©anamh ar -->
alt i gCaibidil 3. Chun athr√≥g mutable a dh√©anamh, cuirimid <code>mut</code> roimh an
ainm athr√≥g:</p>
<pre><code class="language-rust ignore">let √∫lla = 5; // do-athraithe
let banana√≠ mut = 5; // inathraithe</code></pre>
<blockquote>
<p>N√≥ta: Tosa√≠onn an chomhr√©ir <code>//</code> tr√°cht a leanann go dt√≠ deireadh an
l√≠ne. D√©anann Rust neamhaird ar gach rud i dtuairim√≠. D√©anfaimid tr√°cht n√≠os m√≥ a phl√©
sonra√≠ i [Caibidil 3][tr√°chtanna] <!-- neamhaird -->.</p>
</blockquote>
<p>Ag filleadh ar an gcl√°r cluiche buille faoi thuairim, t√° a fhios agat anois go mbeidh <code>let mut guess</code>
athr√≥g chomhsh√≥ite a thabhairt isteach darb ainm <code>guess</code>. Ins√≠onn an comhartha comhionann (<code>=</code>) Rust d√∫inn
ag iarraidh rud √©igin a cheangal leis an athr√≥g anois. Ar thaobh na l√°imhe deise den chomhartha comhionann
an luach at√° faoi cheangal ag <code>guess</code>, at√° mar thoradh ar ghlaoch
<code>String::new</code>, feidhm a thugann sampla nua de <code>String</code> ar ais.
[<code>String</code>][teaghr√°n] Is cine√°l teaghr√°n √© <!-- neamhaird --> a shol√°thra√≠onn an caighde√°n
leabharlann at√° ina giot√°n t√©acs ionch√≥daithe UTF-8 infh√°s.</p>
<p>L√©ir√≠onn an chomhr√©ir <code>::</code> sa l√≠ne <code>::new</code> go bhfuil baint ag <code>new</code>
feidhm den chine√°l <code>String</code>. Feidhm <em>ghaolmhar</em> is ea feidhm at√°
curtha i bhfeidhm ar chine√°l, sa ch√°s seo <code>String</code>. Crutha√≠onn an fheidhm <code>new</code> seo a
teaghr√°n nua, folamh. Gheobhaidh t√∫ feidhm <code>new</code> ar go leor cine√°lacha toisc gur a
ainm coitianta ar fheidhm a dh√©anann luach nua de shaghas √©igin.</p>
<p>Ina hioml√°ine, chruthaigh an l√≠ne <code>let mut guess = String::new();</code> mutable
athr√≥g at√° ceangailte faoi l√°thair le sampla nua, folamh de <code>String</code>. T√° sin r√©idh!</p>
<h3 id="ag-f√°il-ionchur-√ös√°ideora"><a class="header" href="#ag-f√°il-ionchur-√ös√°ideora">Ag f√°il Ionchur √ös√°ideora</a></h3>
<p>Thabhairt chun cuimhne gur chuimsigh muid an fheidhmi√∫lacht ionchuir/aschuir √≥n gcaighde√°n
leabharlann le <code>use std::io;</code> ar an gc√©ad l√≠ne den chl√°r. Anois cuirfimid glaoch
an fheidhm <code>stdin</code> √≥n mod√∫l <code>io</code>, a ligfidh d√∫inn √∫s√°ideoir a l√°imhse√°il
ionchur:</p>
<pre><code class="language-rust ignore"><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span>    io::stdin()
        .read_line(&amp;mut guess)
<span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {}", guess);
</span><span class="boring">}</span></code></pre>
<p>Murar iomp√≥rt√°ladh muid an leabharlann <code>io</code> le <code>use std::io;</code> ag t√∫s na
an chl√°ir, d'fh√©adfaimis an fheidhm a √∫s√°id f√≥s tr√≠d an nglao feidhme seo a scr√≠obh mar
<code>std::io::stdin</code>. Tugann an fheidhm <code>stdin</code> sampla de
<a href="../std/io/struct.Stdin.html"><code>std::io::Stdin</code></a> <!-- d√©an neamhaird de -->, ar cine√°l √© a sheasann do
l√°imhse√°il go dt√≠ an t-ionchur caighde√°nach do do teirmin√©al.</p>
<p>Ansin, glaonn an l√≠ne <code>.read_line(&amp;mut guess)</code> ar <a href="../std/io/struct.Stdin.html#method.read_line"><code>read_line</code></a><!--
neamhaird --> modh ar an l√°imhse√°il ionchur caighde√°nach chun ionchur a fh√°il √≥n √∫s√°ideoir.
T√° <code>&amp;mut guess</code> √° rith againn freisin mar arg√≥int chun <code>read_line</code> a insint cad √©
teaghr√°n chun ionchur an √∫s√°ideora a st√≥r√°il. Is √© an jab ioml√°n de <code>read_line</code> a ghlacadh
is cuma cad iad na cine√°lacha √∫s√°ideora isteach i ionchur caighde√°nach agus cuir √© sin i sreang√°n
(gan a bhfuil ann a fhorscr√≠obh), mar sin cuirimid an teaghr√°n sin ar aghaidh mar
arg√≥int. N√≠ m√≥r an arg√≥int t√©ad a bheith mutable ionas gur f√©idir an modh a athr√∫
√°bhar an t√©ad.</p>
<p>L√©ir√≠onn an <code>&amp;</code> gur <em>reference</em> at√° san arg√≥int seo, rud a thugann bealach duit
lig do chodanna iolracha de do ch√≥d rochtain a fh√°il ar ph√≠osa amh√°in sonra√≠ gan g√° a dh√©anamh
na sonra√≠ sin a ch√≥ipe√°il isteach i gcuimhne ar√≠s agus ar√≠s eile. Is gn√© chasta iad tagairt√≠,
agus ceann de mh√≥rbhunt√°ist√≠ Rust n√° c√© chomh s√°bh√°ilte agus √©asca √© a √∫s√°id
tagairt√≠. N√≠ g√° go mbeadh a l√°n de na sonra√≠ sin ar eolas agat chun √© seo a chr√≠ochn√∫
cl√°r. Faoi l√°thair, n√≠l a fhios agat ach, cos√∫il le hathr√≥ga, is tagairt√≠ iad
immutable de r√©ir r√©amhshocraithe. Mar sin, n√≠ m√≥r duit <code>&amp;mut guess</code> a scr√≠obh seachas
<code>&amp;guess</code> chun √© a dh√©anamh mutable. (M√≠neoidh Caibidil 4 tagairt√≠ n√≠os m√≥
go cr√≠ochn√∫il.)</p>
<!-- Old heading. Do not remove or links may break. -->
<p><a id="handling-potential-failure-with-the-result-type"></a></p>
<h3 id="teip-f√©ideartha-a-l√°imhse√°il-le-result"><a class="header" href="#teip-f√©ideartha-a-l√°imhse√°il-le-result">Teip F√©ideartha a L√°imhse√°il le <code>Result</code></a></h3>
<p>T√°imid f√≥s ag obair ar an l√≠ne c√≥d seo. T√° an tr√≠√∫ l√≠ne √° phl√© againn anois
t√©acs, ach tabhair faoi deara go bhfuil s√© f√≥s mar chuid de l√≠ne ch√≥id loighci√∫il amh√°in. An ch√©ad cheann eile
Is cuid den mhodh seo:</p>
<pre><code class="language-rust ignore"><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span>        .expect("Failed to read line");
<span class="boring">
</span><span class="boring">    println!("You guessed: {}", guess);
</span><span class="boring">}</span></code></pre>
<p>D‚Äôfh√©adfaimis an c√≥d seo a scr√≠obh mar:</p>
<pre><code class="language-rust ignore">io::stdin().read_line(&amp;mut guess).expect("Failed to read line");</code></pre>
<p>Is deacair l√≠ne fhada amh√°in a l√©amh, √°fach, mar sin is fearr √≠ a roinnt. T√° s√©
Is minic a bh√≠onn s√© ciallmhar l√≠ne nua agus sp√°s b√°n eile a thabhairt isteach chun cabhr√∫ le briseadh fada
l√≠nte nuair a ghlaonn t√∫ ar mhodh leis an gcomhr√©ir <code>.method_name()</code>. Anois d√©anaimis
pl√©igh cad a dh√©anann an l√≠ne seo.</p>
<p>Mar a luadh cheana, cuireann <code>read_line</code> cib√© rud a chuireann an t-√∫s√°ideoir isteach sa teaghr√°n
tugaimid air, ach tugann s√© luach <code>Result</code> ar ais freisin. <a href="../std/result/enum.Result.html"><code>Result</code></a><!--
neamhaird a dh√©anamh ar --> is <a href="ch06-00-enums.html"><em>enumeration</em></a><!-- neamhaird -->, ar a dtugtar <em>enum</em> go minic,
at√° cine√°l is f√©idir a bheith i gceann de na st√°it iolracha. Glaoimid ar gach ceann acu
b'fh√©idir luaigh <em>variant</em>.</p>
<p><a href="ch06-00-enums.html">Caibidil 6</a> Cl√∫d√≥idh <!-- neamhaird --> enums n√≠os mine. An cusp√≥ir
de na cine√°lacha <code>Result</code> seo is ea faisn√©is l√°imhse√°la earr√°id√≠ a ionch√≥d√∫.</p>
<p>Is iad na leaganacha <code>Result</code> n√° <code>Ok</code> agus <code>Err</code>. L√©ir√≠onn an leagan <code>Ok</code> an
D'√©irigh leis an oibr√≠ocht, agus t√° an luach a ghintear go rath√∫il ann.
Cialla√≠onn an leagan <code>Err</code> gur theip ar an oibr√≠ocht, agus t√° faisn√©is ann
faoi ‚Äã‚Äãconas n√≥ c√©n f√°th ar theip ar an oibr√≠ocht.</p>
<p>T√° modhanna sainmh√≠nithe ar luachanna an chine√°il <code>Result</code>, cos√∫il le luachanna d'aon chine√°l
leo. Mar shampla de <code>Result</code> t√° <a href="../std/result/enum.Result.html#method.expect"><code>expect</code> method</a> <!-- neamhaird -->
gur f√©idir leat glaoch. M√°s luach <code>Err</code> √© an t-√∫s√°√≠r seo de <code>Result</code>, <code>expect</code>
a chur faoi deara an cl√°r a tuairte√°la agus a thaispe√°int ar an teachtaireacht a rith t√∫ mar
arg√≥int le <code>expect</code>. M√° thugann an modh <code>read_line</code> <code>Err</code> ar ais, dh√©anfadh s√©
is d√≥cha go bhfuil s√© mar thoradh ar earr√°id a th√°inig √≥n gc√≥ras oibri√∫ch√°in bun√∫sach.
M√°s luach <code>Ok</code> √© an t-√∫said seo de <code>Result</code>, glacfaidh <code>expect</code> an tuairisce√°n
an luach at√° ag <code>Ok</code> agus cuir an luach sin ar ais chugat ionas gur f√©idir leat √© a √∫s√°id.
Sa ch√°s seo, is √© an luach sin l√≠on na mbeart in ionchur an √∫s√°ideora.</p>
<p>Mura nglaoann t√∫ ‚Äòag s√∫il‚Äô, tioms√≥idh an cl√°r, ach gheobhaidh t√∫ rabhadh:</p>
<pre><code class="language-console">$ cargo build
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
warning: unused `Result` that must be used
  --&gt; src/main.rs:10:5
   |
10 |     io::stdin().read_line(&amp;mut guess);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: this `Result` may be an `Err` variant, which should be handled
   = note: `#[warn(unused_must_use)]` on by default
help: use `let _ = ...` to ignore the resulting value
   |
10 |     let _ = io::stdin().read_line(&amp;mut guess);
   |     +++++++

warning: `guessing_game` (bin "guessing_game") generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.59s
</code></pre>
<p>Tugann Rust fol√°ireamh n√°r √∫s√°id t√∫ an luach <code>Result</code> a fuarthas ar ais √≥ <code>read_line</code>,
ag tabhairt le fios n√°r l√°imhse√°ladh an cl√°r earr√°id fh√©ideartha.</p>
<p>Is √© an bealach ceart chun an rabhadh a chosc n√° c√≥d l√°imhse√°la earr√°id√≠ a scr√≠obh,
ach in√°r gc√°s ba mhaith linn ach a tuairte√°la an cl√°r seo nuair a tharla√≠onn fadhb, mar sin againn
is f√©idir <code>expect</code> a √∫s√°id. Foghlaimeoidh t√∫ faoi earr√°id√≠ a athshl√°n√∫ i <a href="ch09-02-recoverable-errors-with-result.html">Caibidil
9</a> <!-- neamhaird a dh√©anamh -->.</p>
<h3 id="luachanna-priont√°la-le-sealbh√≥ir√≠-√Åite-println"><a class="header" href="#luachanna-priont√°la-le-sealbh√≥ir√≠-√Åite-println">Luachanna Priont√°la le Sealbh√≥ir√≠ √Åite <code>println!</code></a></h3>
<p>Seachas an l√∫ib√≠n chatach deiridh, n√≠l ach l√≠ne amh√°in eile le pl√© ann
an c√≥d go dt√≠ seo:</p>
<pre><code class="language-rust ignore"><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span>    println!("You guessed: {}", guess);
<span class="boring">}</span></code></pre>
<p>Priont√°lann an l√≠ne seo an teaghr√°n ina bhfuil ionchur an √∫s√°ideora anois. An tacar <code>{}</code> de
l√∫ib√≠n√≠ curly is a placeholder: smaoineamh ar <code>{}</code> as little crab pincers that hold
luach i bhfeidhm. Nuair a bh√≠onn luach athr√≥ige √° phriont√°il, is f√©idir leis an ainm athr√≥g
dul taobh istigh de na l√∫ib√≠n√≠ curly. Nuair a phriont√°il an toradh ar mheast√≥ireacht ar
abairt, cuir l√∫ib√≠n√≠ chatach folamh sa teaghr√°n form√°id, ansin lean an
teaghr√°n form√°ide le liosta slonn scartha le cam√≥g le priont√°il i ngach folamh
l√∫ib√≠n curly placeholder san ord c√©anna. Athr√≥g a phriont√°il agus an toradh
de shloinneadh in aon ghlao amh√°in chun <code>println!</code> a bheadh ‚Äã‚Äãmar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
let y = 10;

println!("x = {x} and y + 2 = {}", y + 2);
<span class="boring">}</span></code></pre></pre>
<p>Phriont√°lfadh an c√≥d seo <code>x = 5 agus y + 2 = 12</code>.</p>
<h3 id="an-ch√©ad-chuid-a-th√°st√°il"><a class="header" href="#an-ch√©ad-chuid-a-th√°st√°il">An Ch√©ad Chuid a Th√°st√°il</a></h3>
<p>D√©anaimis an ch√©ad chuid den chluiche buille faoi thuairim a th√°st√°il. Rith √© ag √∫s√°id <code>cargo run</code>:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/listing-02-01/
cargo clean
cargo run
input 6 -->
<pre><code class="language-console">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 6.44s
     Running `target/debug/guessing_game`
Guess the number!
Please input your guess.
6
You guessed: 6
</code></pre>
<p>Ag an bpointe seo, d√©antar an ch√©ad chuid den chluiche: t√°imid ag f√°il ionchur √≥ na
m√©archl√°r agus ansin √© a phriont√°il.</p>
<h2 id="uimhir-r√∫nda-a-ghini√∫int"><a class="header" href="#uimhir-r√∫nda-a-ghini√∫int">Uimhir R√∫nda a Ghini√∫int</a></h2>
<p>Ansin, n√≠ m√≥r d√∫inn uimhir r√∫nda a ghini√∫int a dh√©anfaidh an t-√∫s√°ideoir iarracht a buille faoi thuairim. T√° an
ch√≥ir uimhir r√∫nda a bheith difri√∫il gach uair mar sin t√° an cluiche spraoi a imirt n√≠os m√≥
n√° uair amh√°in. √ös√°idfimid uimhir randamach idir 1 agus 100 ionas nach mbeidh an cluiche ann freisin
deacair. N√≠ chuims√≠onn Rust feidhmi√∫lacht uimhreacha randamacha ina chaighde√°n f√≥s
leabharlann. Mar sin f√©in, sol√°thra√≠onn foireann Rust cliathbhosca <a href="https://crates.io/crates/rand"><code>rand</code> crate</a> leis
d√∫irt feidhmi√∫lacht.</p>
<h3 id="ag-√ös√°id-cliathbhosca-chun-feidhmi√∫lacht-n√≠os-m√≥-a-fh√°il"><a class="header" href="#ag-√ös√°id-cliathbhosca-chun-feidhmi√∫lacht-n√≠os-m√≥-a-fh√°il">Ag √ös√°id cliathbhosca chun Feidhmi√∫lacht N√≠os M√≥ a Fh√°il</a></h3>
<p>Cuimhnigh gur baili√∫ch√°n de chomhaid c√≥d foinse Rust √© cliathbhosca. An tionscadal
t√°imid ag t√≥g√°il cliathbhosca <em>d√©n√°rtha</em>, at√° inrite. An <code>rand</code>
cliathbhosca <em>library</em> √© an gcliathbhosca, ina bhfuil c√≥d a bhearta√≠tear a √∫s√°id ann
cl√°ir eile agus n√≠ f√©idir iad a chur i gcr√≠ch leis f√©in.</p>
<p>Is √© comhord√∫ Cargo na cliathbhosca√≠ seachtracha an √°it a bhfuil an Cargo ag taitneamh i nd√°ir√≠re. Roimh d√∫inn
in ann c√≥d a scr√≠obh a √∫s√°ideann <code>rand</code>, n√≠ m√≥r d√∫inn an comhad <em>Cargo.toml</em> a mhodhn√∫ go
cuir an cliathbhosca <code>rand</code> san √°ireamh mar sple√°chas. Oscail an comhad sin anois agus cuir an
l√≠ne seo a leanas go dt√≠ an bun, faoi bhun an ceannt√°sc alt <code>[dependencies]</code> go
Cargo cruthaithe duit. B√≠ cinnte <code>rand</code> a shonr√∫ go d√≠reach mar at√° againn anseo, le
seans nach n-oibreoidh an uimhir leagain seo, n√≥ na sampla√≠ c√≥id sa rang teagaisc seo:</p>
<!-- When updating the version of `rand` used, also update the version of
`rand` used in these files so they all match:
* ch07-04-bringing-paths-into-scope-with-the-use-keyword.md
* ch14-03-cargo-workspaces.md
-->
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[dependencies]
rand = "0.8.5"
</code></pre>
<p>Sa chomhad <em>Cargo.toml</em>, t√° gach rud a leanann ceannt√°sc mar chuid de sin
alt a leanann ar aghaidh go dt√≠ go dtosa√≠onn alt eile. I <code>[dependencies]</code> t√∫
inis do Cargo cad iad na cliathbhosca√≠ seachtracha a bhraitheann do thionscadal agus c√© na leaganacha d√≠obh
na cliathbhosca√≠ sin at√° uait. Sa ch√°s seo, sonraimid an gcliathbhosca <code>rand</code> leis an
sonr√≥ir leagan sh√©imeantach <code>0.8.5</code>. Tuigeann Cargo <a href="http://semver.org">S√©imeantach
Leagan</a><!-- neamhaird --> (uaireanta ar a dtugtar <em>SemVer</em>), arb √© a
caighde√°nach chun uimhreacha leagan a scr√≠obh. Is √© an sonr√≥ir <code>0.8.5</code> i nd√°ir√≠re
gearrscr√≠bhinn le haghaidh <code>^0.8.5</code>, rud a chialla√≠onn aon leagan go bhfuil ar a laghad 0.8.5 ach
faoi ‚Äã‚Äãbhun 0.9.0.</p>
<p>Measann Cargo go bhfuil API poibl√≠ ag na leaganacha seo at√° comhoiri√∫nach leis an leagan
0.8.5, agus cinnt√≠onn an tsonra√≠ocht seo go bhfaighidh t√∫ an scaoileadh paiste is d√©ana√≠ sin
f√≥s le ch√©ile leis an gc√≥d sa chaibidil seo. Aon leagan 0.9.0 n√≥ n√≠os m√≥
N√≠ r√°tha√≠tear go mbeidh an API c√©anna ann agus a √∫s√°ideann na sampla√≠ seo a leanas.</p>
<p>Anois, gan aon cheann den ch√≥d a athr√∫, d√©anaimis an tionscadal a th√≥g√°il, mar a thaispe√°ntar i
Liost√°il 2-2.</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/listing-02-02/
rm Cargo.lock
cargo clean
cargo build -->
<Listing number="2-2" caption="The output from running `cargo build` after adding the rand crate as a dependency">
<pre><code class="language-console">$ cargo build
    Updating crates.io index
     Locking 16 packages to latest compatible versions
      Adding wasi v0.11.0+wasi-snapshot-preview1 (latest: v0.13.3+wasi-0.2.2)
      Adding zerocopy v0.7.35 (latest: v0.8.9)
      Adding zerocopy-derive v0.7.35 (latest: v0.8.9)
  Downloaded syn v2.0.87
  Downloaded 1 crate (278.1 KB) in 0.16s
   Compiling proc-macro2 v1.0.89
   Compiling unicode-ident v1.0.13
   Compiling libc v0.2.161
   Compiling cfg-if v1.0.0
   Compiling byteorder v1.5.0
   Compiling getrandom v0.2.15
   Compiling rand_core v0.6.4
   Compiling quote v1.0.37
   Compiling syn v2.0.87
   Compiling zerocopy-derive v0.7.35
   Compiling zerocopy v0.7.35
   Compiling ppv-lite86 v0.2.20
   Compiling rand_chacha v0.3.1
   Compiling rand v0.8.5
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 3.69s
</code></pre>
</Listing>
<p>Seans go bhfeicfidh t√∫ uimhreacha leaganacha √©ags√∫la (ach beidh siad go l√©ir ag lu√≠ leis an
c√≥d, a bhu√≠ochas le SemVer!) agus l√≠nte √©ags√∫la (ag brath ar an oibr√≠ocht
c√≥ras), agus f√©adfaidh na l√≠nte a bheith in ord difri√∫il.</p>
<p>Nuair a chuirimid sple√°chas seachtrach san √°ireamh, faigheann Cargo na leaganacha is d√©ana√≠ de
gach rud a theasta√≠onn √≥ sple√°chas √≥n <em>registry</em>, is c√≥ip de shonra√≠ √©
√≥ <a href="https://crates.io/">Crates.io</a>. Is √© Crates.io √°it a bhfuil daoine san √©iceach√≥ras Rust
post√°il a dtionscadail foinse oscailte Rust do dhaoine eile le h√∫s√°id.</p>
<p>Tar √©is an chl√°r a nuashonr√∫, seice√°lann Cargo an rann√°n <code>[dependencies]</code> agus
√≠osl√≥d√°il aon cliathbhosca√≠ liostaithe nach bhfuil √≠osl√≥d√°ilte cheana. Sa ch√°s seo,
c√© n√°r liosta√≠omar ach <code>rand</code> mar sple√°chas, rug Cargo cliathbhosca√≠ eile freisin
go mbraitheann <code>rand</code> ar a bheith ag obair. Tar √©is na cliathbhosca√≠ a √≠osl√≥d√°il, tiomsa√≠onn Rust
iad agus ansin d√©anann s√© an tionscadal a thioms√∫ leis na sple√°chais at√° ar f√°il.</p>
<p>M√° ritheann t√∫ <code>cargo build</code> l√°ithreach l√°ithreach gan aon athruithe a dh√©anamh, n√≠ m√≥r duit
n√≠ bhfaighidh t√∫ aon aschur ach amh√°in √≥n l√≠ne <code>Finished</code>. T√° a fhios ag Cargo cheana f√©in
√≠osl√≥d√°il agus tiomsa√≠odh na sple√°chais, agus n√≠l aon rud athraithe agat
f√∫thu i do chomhad <em>Cargo.toml</em>. T√° a fhios ag Cargo freisin nach bhfuil t√∫ tar √©is athr√∫
rud ar bith faoi do ch√≥d, mar sin n√≠ athchruinn√≠onn s√© √© sin ach an oiread. Gan faic le
a dh√©anamh, f√°gann s√© go simpl√≠.</p>
<p>M√° oscla√≠onn t√∫ an comhad <em>src/main.rs</em>, d√©an athr√∫ f√°nach, agus ansin √© a sh√°bh√°il agus
t√≥g ar√≠s, n√≠ fheicfidh t√∫ ach dh√° l√≠ne aschuir:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/listing-02-02/
touch src/main.rs
cargo build -->
<pre><code class="language-console">$ cargo build
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.13s
</code></pre>
<p>L√©ir√≠onn na l√≠nte seo nach nd√©anann Cargo an t√≥g√°il a nuashonr√∫ ach amh√°in le d'athr√∫ beag ar an
<em>src/main.rs</em> comhad. N√≠or athraigh do sple√°chais, mar sin t√° a fhios ag Cargo gur f√©idir
ath√∫s√°id a bhfuil √≠osl√≥d√°ilte aige cheana f√©in agus tiomsaithe d√≥ibh si√∫d.</p>
<h4 id="t√≥g√°lacha-in-at√°irgthe-a-chinnti√∫-leis-an-gcomhad-cargolock"><a class="header" href="#t√≥g√°lacha-in-at√°irgthe-a-chinnti√∫-leis-an-gcomhad-cargolock">T√≥g√°lacha In-at√°irgthe a Chinnti√∫ leis an gComhad <em>Cargo.lock</em></a></h4>
<p>T√° meicn√≠ocht ag Cargo a chinnt√≠onn gur f√©idir leat an d√©ant√°n c√©anna a at√≥g√°il gach uair
t√≥gann tusa n√≥ aon duine eile do ch√≥d: n√≠ √∫s√°idfidh Cargo ach na leaganacha de na
sple√°chais a shonraigh t√∫ go dt√≠ go l√©ir√≠onn t√∫ a mhalairt. Mar shampla, abair √© sin
an tseachtain seo chugainn tagann leagan 0.8.6 den gcliathbhosca <code>rand</code> amach, agus an leagan sin
t√° ceart√∫ch√°n t√°bhachtach ar fhabht, ach t√° aisch√©imni√∫ ann freisin a dh√©anfaidh
briseadh do ch√≥d. Chun √© seo a l√°imhse√°il, crutha√≠onn Rust an comhad <em>Cargo.lock</em> ar dt√∫s
an t-am a ritheann t√∫ <code>cargo build</code>, mar sin t√° s√© seo againn anois sa chluiche <em>guessing</em>
eolaire.</p>
<p>Nuair a th√≥gann t√∫ tionscadal den ch√©ad uair, d√©anann Cargo na leaganacha go l√©ir a l√©iri√∫
de na sple√°chais a oireann do na crit√©ir agus ansin iad a scr√≠obh chuig an
<em>Cargo.lock</em> comhad. Nuair a bheidh t√∫ ag t√≥g√°il do thionscadal sa todhcha√≠, feicfidh Cargo
go bhfuil an comhad <em>Cargo.lock</em> ann agus go n-√∫s√°idfidh s√© na leaganacha at√° sonraithe ann
seachas an obair ar fad a dh√©anamh chun leaganacha a aimsi√∫ ar√≠s. Ligeann s√© seo duit
t√≥g√°il in-at√°irgthe go huathoibr√≠och. I bhfocail eile, beidh do thionscadal
fanacht ag 0.8.5 go dt√≠ go n-uasghr√°d√≥idh t√∫ go sainr√°ite, a bhu√≠ochas leis an gcomhad <em>Cargo.lock</em>.
Toisc go bhfuil an comhad <em>Cargo.lock</em> t√°bhachtach le haghaidh t√≥g√°la in-at√°irgthe, is minic a bh√≠onn
sheice√°il i rial√∫ foinse leis an gcuid eile den ch√≥d i do thionscadal.</p>
<h4 id="cliathbhosca-√°-nuashonr√∫-chun-leagan-nua-a-fh√°il"><a class="header" href="#cliathbhosca-√°-nuashonr√∫-chun-leagan-nua-a-fh√°il">cliathbhosca √° nuashonr√∫ chun leagan nua a fh√°il</a></h4>
<p>Nuair is mian leat <em>do</em> cliathbhosca a nuashonr√∫, sol√°thra√≠onn Cargo an t-ord√∫ <code>update</code>,
a dh√©anfaidh neamhaird ar an gcomhad <em>Cargo.lock</em> agus figi√∫r amach go l√©ir na leaganacha is d√©ana√≠
a oireann do shonra√≠ochta√≠ i <em>Cargo.toml</em>. Scr√≠obhfaidh Cargo iad si√∫d ansin
leaganacha don chomhad <em>Cargo.lock</em>. Sa ch√°s seo, n√≠ bheidh ach lorg ag Cargo
leaganacha n√≠os m√≥ n√° 0.8.5 agus n√≠os l√∫ n√° 0.9.0. M√° t√° an gcliathbhosca <code>rand</code>
scaoileadh an d√° leagan nua 0.8.6 agus 0.9.0, d'fheicfe√° an m√©id seo a leanas m√°s rud √©
rith t√∫ <code>cargo update</code>:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/listing-02-02/
cargo update
assuming there is a new 0.8.x version of rand; otherwise use another update
as a guide to creating the hypothetical output shown here -->
<pre><code class="language-console">$ cargo update
    Updating crates.io index
    Updating rand v0.8.5 -&gt; v0.8.6
</code></pre>
<p>D√©anann Cargo neamhaird ar an scaoileadh 0.9.0. Ag an bpointe seo, thabharf√° athr√∫ faoi deara freisin
i do chomhad <em>Cargo.lock</em> ag tabhairt faoi deara gurb √© an leagan den chliabh√°n <code>rand</code> at√° t√∫
ag baint √∫s√°ide as anois t√° 0.8.6. Chun <code>rand</code> leagan 0.9.0 n√≥ aon leagan sa 0.9.<em>x</em> a √∫s√°id
sraith, bheadh ‚Äã‚Äãort an comhad <em>Cargo.toml</em> a nuashonr√∫ chun breathn√∫ mar seo ina ionad:</p>
<pre><code class="language-toml">[dependencies]
rand = "0.9.0"
</code></pre>
<p>An ch√©ad uair eile a ritheann t√∫ <code>cargo build</code>, d√©anfaidh Cargo cl√°r na gcliathbhosca a nuashonr√∫
ar f√°il agus d√©an do riachtanais <code>rand</code> a athmheas de r√©ir an leagain nua
at√° sonraithe agat.</p>
<p>T√° go leor eile le r√° faoi <a href="https://doc.rust-lang.org/cargo/">Cargo</a> <!-- neamhaird --> agus <a href="https://doc.rust-lang.org/cargo/reference/publishing.html">d√°
√©iceach√≥ras</a><!-- neamhaird a dh√©anamh ar -->, a phl√©faimid i gCaibidil 14, ach
faoi ‚Äã‚Äãl√°thair, sin √© gach n√≠ m√≥r duit fios a bheith agat. D√©anann Cargo an-√©asca √© a ath√∫s√°id
leabharlanna, mar sin t√° Rustaceans in ann tionscadail n√≠os l√∫ a scr√≠obh a chuirtear le ch√©ile
√≥ roinnt pac√°ist√≠.</p>
<h3 id="uimhir-randamach-√°-gini√∫int"><a class="header" href="#uimhir-randamach-√°-gini√∫int">Uimhir Randamach √° gini√∫int</a></h3>
<p>Cuirimis t√∫s le <code>rand</code> a √∫s√°id chun uimhir a ghini√∫int le buille faoi thuairim. Is √© an ch√©ad ch√©im eile
nuashonraigh <em>src/main.rs</em>, mar a thaispe√°ntar i Liost√∫ 2-3.</p>
<Listing number="2-3" file-name="src/main.rs" caption="Adding code to generate a random number">
<pre><code class="language-rust ignore">use std::io;
use rand::Rng;

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..=100);

    println!("The secret number is: {secret_number}");

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin()
        .read_line(&amp;mut guess)
        .expect("Failed to read line");

    println!("You guessed: {guess}");
}</code></pre>
</Listing>
<p>Ar dt√∫s cuirimid an l√≠ne <code>use rand::Rng;</code>. Sainmh√≠n√≠onn an tr√©ithe <code>Rng</code> modhanna a
cuireann ginead√≥ir√≠ uimhreacha randamacha i bhfeidhm, agus caithfidh an tr√©ith seo a bheith laistigh den sc√≥ip d√∫inn
na modhanna sin a √∫s√°id. Cl√∫d√≥idh Caibidil 10 tr√©ithe go mion.</p>
<p>Ansin, cuirfimid dh√° l√≠ne sa l√°r. Sa ch√©ad l√≠ne, tugaimid an
feidhm <code>rand::thread_rng</code> a thugann an uimhir randamach ar leith d√∫inn
ginead√≥ir a √∫s√°idfimid: ceann at√° √°iti√∫il don sn√°ithe reatha de
fhorghn√≠omh√∫ agus t√° s√≠ol√∫ ag an gc√≥ras oibri√∫ch√°in. Ansin tugaimid an <code>gen_range</code>
modh ar an nginead√≥ir uimhreacha randamacha. T√° an modh seo sainmh√≠nithe ag an <code>Rng</code>
tr√©ithe a thugamar isteach sa sc√≥ip leis an r√°iteas <code>use rand::Rng;</code>. T√° an
Glacann modh <code>gen_range</code> slonn raoin mar arg√≥int agus gineann s√© a
uimhir randamach sa raon. Glacann an cine√°l slonn raoin at√° √° √∫s√°id againn anseo
an fhoirm <code>start..=end</code> agus t√° s√© san √°ireamh ar na teorainneacha √≠ochtair agus uachtair, mar sin againn
N√≠ m√≥r <code>1..=100</code> a shonr√∫ chun uimhir idir 1 agus 100 a iarraidh.</p>
<blockquote>
<p>Tabhair faoi deara: N√≠ bheidh a fhios agat cad iad na tr√©ithe is c√≥ir a √∫s√°id agus c√© na modhanna agus na feidhmeanna
chun glaoch √≥ chliathbhosca, ionas go mbeidh doicim√©ad√∫ le treoracha le haghaidh gach cliathbhosca
√© a √∫s√°id. Gn√© n√©ata eile de lasta n√° go dt√≥gfaidh rith an ordaithe <code>cargo doc --open</code>
doicim√©ad√∫ a shol√°thra√≠onn do chuid sple√°chais go l√©ir go h√°iti√∫il agus go n-oscl√≥far √© i do bhrabhs√°la√≠.
M√° t√° suim agat i bhfeidhmi√∫lacht eile sa chliabh√°n <code>rand</code>, mar shampla, re√°cht√°il <code>cargo doc --open</code>
agus clice√°il <code>rand</code> sa bharra taoibh ar thaobh na l√°imhe cl√©.</p>
</blockquote>
<p>D√©anann an dara l√≠ne nua an uimhir r√∫nda a phriont√°il. T√° s√© seo √∫s√°ideach agus muid
an cl√°r a fhorbairt le bheith in ann √© a th√°st√°il, ach scriosfaimid as an
leagan deiridh. N√≠ m√≥r an cluiche √© m√° phriont√°ileann an cl√°r an freagra chomh luath
mar a thosa√≠onn s√©!</p>
<p>Bain triail as an gcl√°r a rith c√∫pla uair:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/listing-02-03/
cargo run
4
cargo run
5
-->
<pre><code class="language-console">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.02s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 7
Please input your guess.
4
You guessed: 4

$ cargo run
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.02s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 83
Please input your guess.
5
You guessed: 5
</code></pre>
<p>Ba cheart duit uimhreacha randamacha √©ags√∫la a fh√°il, agus ba cheart gur uimhreacha idir iad go l√©ir
1 agus 100. Jab iontach!</p>
<h2 id="an-bhuille-faoi-thuairim-a-chur-i-gcompar√°id-leis-an-uimhir-r√∫nda"><a class="header" href="#an-bhuille-faoi-thuairim-a-chur-i-gcompar√°id-leis-an-uimhir-r√∫nda">An Bhuille faoi thuairim a chur i gcompar√°id leis an Uimhir R√∫nda</a></h2>
<p>Anois go bhfuil ionchur √∫s√°ideora agus uimhir randamach againn, is f√©idir linn iad a chur i gcompar√°id. An ch√©im sin
l√©irithe i Liost√∫ 2-4. Tabhair faoi deara nach mbeidh an c√≥d seo le ch√©ile go f√≥ill, mar a dh√©anfaimid
m√≠nigh.</p>
<Listing number="2-4" file-name="src/main.rs" caption="Handling the possible return values of comparing two numbers">
<pre><code class="language-rust ignore does_not_compile">use rand::Rng;
use std::cmp::Ordering;
use std::io;

fn main() {
    // --snip--
<span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span>
    println!("You guessed: {guess}");

    match guess.cmp(&amp;secret_number) {
        Ordering::Less =&gt; println!("Too small!"),
        Ordering::Greater =&gt; println!("Too big!"),
        Ordering::Equal =&gt; println!("You win!"),
    }
}</code></pre>
</Listing>
<p>Ar dt√∫s cuirimid r√°iteas <code>use</code> eile leis, ag tabhairt cine√°l ar a dtugtar
<code>std::cmp::Ordering</code>isteach sa raon feidhme √≥n leabharlann chaighde√°nach. An cine√°l <code>Ordering</code>
Is enum eile √© agus t√° na leaganacha <code>Less</code>, <code>Greater</code>, agus <code>Equal</code> ann. Is iad seo
na tr√≠ thoradh is f√©idir nuair a dh√©anann t√∫ compar√°id idir dh√° luach.</p>
<p>Ansin cuirimid c√∫ig l√≠ne nua ag bun a √∫s√°ideann an cine√°l <code>Ordering</code>. T√° an
D√©anann modh <code>cmp</code> dh√° luach i gcompar√°id agus is f√©idir glaoch a chur air ar aon rud is f√©idir
i gcompar√°id. D√©anann s√© tagairt do cib√© rud is mian leat a chur i gcompar√°id leis: seo √©
compar√°id a dh√©anamh idir <code>guess</code> agus <code>secret_number</code>. Ansin filleann s√© leagan de na
‚ÄòOrd√∫‚Äô enum thugamar isteach sc√≥ip leis an r√°iteas ‚Äò√∫s√°ide‚Äô. √ös√°idimid a
<a href="ch06-02-match.html"><code>match</code></a><!-- neamhaird a dh√©anamh ar --> slonn le socr√∫ cad √© an ch√©ad rud eile le d√©anamh bunaithe air
c√©n leagan de <code>Ordering</code> a cuireadh ar ais √≥n nglao go <code>cmp</code> leis na luachanna
in <code>guess</code> agus <code>secret_number</code>.</p>
<p>T√° slonn <code>match</code> comhdh√©anta de <em>arms</em>. Is √©ard at√° i l√°mh n√° <em>pattern</em> to
mheaitse√°il i gcoinne, agus an c√≥d ba ch√≥ir a rith m√° t√° an luach a thugtar do <code>match</code>
oireann patr√∫n na l√°imhe sin. Glacann meirge an luach a thugtar do <code>match</code> agus cuma
tr√≠ phatr√∫n gach l√°mh ar a seal. Is iad patr√∫in agus an t√≥g√°il <code>match</code>
gn√©ithe cumhachtacha meirge: ligeann siad duit do ch√≥d a chur in i√∫l ar ch√°sanna √©ags√∫la
d'fh√©adfadh teacht trasna orthu agus d√©anann siad cinnte go l√°imhse√°lann t√∫ iad go l√©ir. Beidh na gn√©ithe seo cl√∫daithe go mion i gCaibidil 6 agus i gCaibidil 19, faoi seach.</p>
<p>Si√∫lfaimid tr√≠ shampla leis an slonn <code>match</code> a √∫s√°idimid anseo. Abair √© sin
t√° buille faoi thuairim ag an √∫s√°ideoir 50 agus is √© an uimhir r√∫nda a ghintear go randamach an uair seo 38.</p>
<p>Nuair a chuirtear an c√≥d i gcompar√°id le 50 go 38, fillfidh an modh <code>cmp</code>
<code>Ordering::Greater</code> toisc go bhfuil 50 n√≠os m√≥ n√° 38. Faigheann an slonn <code>match</code>
an luach <code>Ordering::Greater</code> agus tosa√≠onn s√© ag seice√°il patr√∫n gach l√°mh. Breathna√≠onn s√©
ag patr√∫n an ch√©ad l√°mh, <code>Ordering::Less</code>, agus feiceann s√© go bhfuil an luach
N√≠ hionann <code>Ordering::Greater</code> le <code>Ordering::Less</code>, mar sin d√©anann s√© neamhaird den ch√≥d i
an l√°mh sin agus a ghluaiseann go dt√≠ an ch√©ad l√°mh eile. Is √© patr√∫n an ch√©ad l√°mh eile
<code>Ordering::Greater</code>, a <em>dh√©anann</em> mar a ch√©ile le <code>Ordering::Greater</code>! An gaolmhar
d√©anfar c√≥d sa l√°mh sin a fhorghn√≠omh√∫ agus a phriont√°il <code>Too big!</code> ar an sc√°ile√°n. An <code>match</code>
cr√≠ochna√≠onn an abairt tar √©is an ch√©ad chluiche rath√∫il, mar sin n√≠ bhreathn√≥idh s√© ar an gceann deireanach
l√°mh sa ch√°s seo.</p>
<p>Mar sin f√©in, n√≠ thioms√≥idh an c√≥d i Liost√∫ 2-4 f√≥s. D√©anaimis iarracht √©:</p>
<!--
The error numbers in this output should be that of the code **WITHOUT** the
anchor or snip comments
-->
<pre><code class="language-console">$ cargo build
   Compiling libc v0.2.86
   Compiling getrandom v0.2.2
   Compiling cfg-if v1.0.0
   Compiling ppv-lite86 v0.2.10
   Compiling rand_core v0.6.2
   Compiling rand_chacha v0.3.0
   Compiling rand v0.8.5
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
error[E0308]: mismatched types
   --&gt; src/main.rs:22:21
    |
22  |     match guess.cmp(&amp;secret_number) {
    |                 --- ^^^^^^^^^^^^^^ expected `&amp;String`, found `&amp;{integer}`
    |                 |
    |                 arguments to this method are incorrect
    |
    = note: expected reference `&amp;String`
               found reference `&amp;{integer}`
note: method defined here
   --&gt; file:///home/.rustup/toolchains/1.82/lib/rustlib/src/rust/library/core/src/cmp.rs:838:8
    |
838 |     fn cmp(&amp;self, other: &amp;Self) -&gt; Ordering;
    |        ^^^

For more information about this error, try `rustc --explain E0308`.
error: could not compile `guessing_game` (bin "guessing_game") due to 1 previous error
</code></pre>
<p>Luaitear i gcro√≠l√°r na hearr√°ide go bhfuil <em>cine√°lacha m√≠mheaitse√°la</em> ann. T√° meirge ag
c√≥ras cine√°l l√°idir statach. Mar sin f√©in, t√° t√°tal cine√°il aige freisin. Nuair a scr√≠obhamar
<code>let mut guess = String::new()</code>, bh√≠ Rust in ann a thuiscint gur cheart go mbeadh <code>guess</code>
a <code>String</code> agus n√≠or chuir s√© orm an cine√°l a scr√≠obh. An <code>secret_number</code>, ar an taobh eile
l√°imhe, is cine√°l uimhreach √©. Is f√©idir luach idir 1 a bheith ag roinnt cine√°lacha uimhreacha Rust
agus 100: <code>i32</code>, uimhir 32 ghiot√°n; <code>u32</code>, uimhir 32-giot√°n gan s√≠ni√∫; <code>i64</code>, a
uimhir 64-giot√°n; chomh maith le daoine eile. Mura sonra√≠tear a mhalairt, mainneachtain√≠ Rust
an <code>i32</code>, is √© sin an cine√°l <code>secret_number</code> mura gcuireann t√∫ cine√°l faisn√©ise leis
in √°iteanna eile a chuirfeadh Rust le t√°tal a bhaint as cine√°l uimhri√∫il difri√∫il. An ch√∫is
is √© an earr√°id n√° nach f√©idir le Rust teaghr√°n agus cine√°l uimhreach a chur i gcompar√°id.</p>
<p>I ndeireadh na d√°la, ba mhaith linn an <code>String</code> a l√©ann an cl√°r mar ionchur a thiont√∫ ina
cine√°l uimhreach ionas gur f√©idir linn √© a chur i gcompar√°id go huimhri√∫il leis an uimhir r√∫nda. D√©anaimid amhlaidh tr√≠
an l√≠ne seo a chur leis an gcorp feidhme <code>main</code>:</p>
<p>span class="filename"&gt;Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span><span class="boring">use std::cmp::Ordering;
</span><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span>    // --snip--

    let mut guess = String::new();

    io::stdin()
        .read_line(&amp;mut guess)
        .expect("Failed to read line");

    let guess: u32 = guess.trim().parse().expect("Please type a number!");

    println!("You guessed: {guess}");

    match guess.cmp(&amp;secret_number) {
        Ordering::Less =&gt; println!("Too small!"),
        Ordering::Greater =&gt; println!("Too big!"),
        Ordering::Equal =&gt; println!("You win!"),
    }
<span class="boring">}</span></code></pre>
<p>Is √© an l√≠ne:</p>
<pre><code class="language-rust ignore">let guess: u32 = guess.trim().parse().expect("Please type a number!");</code></pre>
<p>Crutha√≠mid athr√≥g darb ainm <code>guess</code>. Ach fan, nach bhfuil an cl√°r cheana f√©in
athr√≥g darb ainm <code>guess</code>? D√©anann s√©, ach cuiditheach ligeann Rust d√∫inn sc√°th√∫ an
luach <code>guess</code> roimhe seo le ceann nua. Ligeann <em>Sc√°th√∫</em> d√∫inn an <code>guess</code> a ath√∫s√°id
ainm athr√≥g seachas iallach a chur orainn dh√° athr√≥g uath√∫la a chruth√∫, mar shampla
<code>guess_str</code> agus <code>guess</code>, mar shampla. Cl√∫d√≥imid √© seo n√≠os mine i
[Caibidil 3][sc√°th√∫] <!-- neamhaird -->, ach faoi l√°thair, fios go bhfuil an ghn√© seo
a √∫s√°idtear go minic nuair is mian leat luach a thiont√∫ √≥ chine√°l amh√°in go cine√°l eile.</p>
<p>Ceangla√≠onn muid an athr√≥g nua seo leis an slonn <code>guess.trim().parse()</code>. An <code>guess</code>
tagra√≠onn an abairt don bhunathr√≥g <code>guess</code> ina raibh an
ionchur mar teaghr√°n. Cuirfidh an modh <code>trim</code> ar shampla <code>String</code> deireadh le haon cheann
sp√°s b√°n ag t√∫s agus deireadh, rud nach m√≥r d√∫inn a dh√©anamh sular f√©idir linn a thiont√∫ ar an
teaghr√°n go <code>u32</code>, nach f√©idir ach sonra√≠ uimhri√∫la a bheith ann. Caithfidh an t-√∫s√°ideoir br√∫igh
<kbd>iontr√°il</kbd> chun <code>read_line</code> a sh√°samh agus chun a gcuid buille faoi thuairim a ionchur, rud a chuireann le
carachtar nual√≠ne don teaghr√°n. Mar shampla, m√° chuireann an t-√∫s√°ideoir cine√°l <kbd>5</kbd> agus
br√∫igh <kbd>iontr√°il</kbd>, breathna√≠onn <code>guess</code> mar seo: <code>5\n</code>. L√©ir√≠onn an <code>\n</code>
"l√≠ne nua." (Ar Windows, m√° bhr√∫nn t√∫ <kbd>iontr√°il</kbd> beidh tuairisce√°n iompair ann
agus l√≠ne nua, <code>\r\n</code>.) Cuireann an modh <code>trim</code> deireadh le <code>\n</code> n√≥ <code>\r\n</code>, agus mar thoradh air sin
i <code>5</code> d√≠reach.</p>
<p>Tionta√≠onn an <a href="../std/primitive.str.html#method.parse">modh <code>parse</code> ar teaghr√°in</a> <!-- neamhaird --> teaghr√°n go
cine√°l eile. Anseo, bainimid √∫s√°id as √© a thiont√∫ √≥ teaghr√°n go uimhir. Caithfimid
inis do Rust an cine√°l uimhreach cruinn at√° uainn tr√≠ √∫s√°id a bhaint as <code>let guess: u32</code>. An colon
(<code>:</code>) Tar √©is do 'buille faoi thuairim' a r√° le Rust d√©anfaimid cine√°l na hathr√≥ige an√≥t√°il. T√° meirge ag
c√∫pla cine√°l uimhreacha ionsuite; is sl√°nuimhir 32-giot√°n gan s√≠ni√∫ √© an <code>u32</code> a fheictear anseo.
Is rogha r√©amhshocraithe maith √© do l√≠on beag dearfach. Foghlaimeoidh t√∫ faoi
cine√°lacha uimhreacha eile i <a href="ch03-02-data-types.html#integer-types">Caibidil 3</a><!-- neamhaird a dh√©anamh ar -->.</p>
<p>Ina theannta sin, t√° an n√≥ta <code>u32</code> sa chl√°r samplach seo agus an chompar√°id
le <code>secret_number</code> cialla√≠onn s√© go mbainfidh Rust le tuiscint gur cheart go mbeadh <code>secret_number</code> ina <code>u32</code> chomh maith. Mar sin anois beidh an chompar√°id idir dh√° luach mar an gc√©anna
cine√°l!</p>
<p>N√≠ oibreoidh an modh <code>parse</code> ach ar charachtair ar f√©idir iad a thiont√∫ go loighci√∫il
isteach uimhreacha agus mar sin is f√©idir earr√°id√≠ a chruth√∫ go h√©asca. M√°s rud √©, mar shampla, an teaghr√°n
ina bhfuil <code>Aüëç%</code>, n√≠ bheadh ‚Äã‚Äãaon bhealach ann √© sin a thiont√∫ go huimhir. Mar gheall air
b'fh√©idir go dteipeann orthu, tugann an modh <code>parse</code> cine√°l <code>Result</code> ar ais, cos√∫il leis an <code>read_line</code>
(a pl√©adh n√≠os luaithe in <a href="ch02-00-guessing-game-tutorial.html#handling-potential-teip-le-toradh">‚ÄúAg L√°imhse√°il Teip F√©ideartha le
<code>Result</code>‚Äù</a> <!-- neamhaird-->). D√©ile√°lfaimid
an <code>Result</code> seo ar an mbealach c√©anna tr√≠ √∫s√°id a bhaint as an modh <code>expect</code> ar√≠s. M√° <code>parse</code>
seolann s√© leagan <code>Err</code> <code>Result</code> ar ais toisc nach raibh s√© in ann uimhir a chruth√∫ √≥n
teaghr√°n, beidh an glao <code>expect</code> tuairte√°la an cluiche agus a phriont√°il an teachtaireacht a thugaimid d√≥.
M√°s f√©idir le <code>parse</code> an teaghr√°n a thiont√∫ go huimhir go rath√∫il, seolfaidh s√© an
Leagan <code>Ok</code> de <code>Result</code>, agus tabharfaidh <code>expect</code> ar ais an uimhir a theasta√≠onn uainn
an luach <code>Ok</code>.</p>
<p>Rithfimid an cl√°r anois:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/no-listing-03-convert-string-to-number/
touch src/main.rs
cargo run
  76
-->
<pre><code class="language-console">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.26s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 58
Please input your guess.
  76
You guessed: 76
Too big!
</code></pre>
<p>Go deas! C√© gur cuireadh sp√°sanna leis roimh an buille faoi thuairim, bh√≠ an cl√°r f√≥s le sonr√∫
out that the user guessed 76. Rith an cl√°r c√∫pla uair chun an
iompar difri√∫il le cine√°lacha √©ags√∫la input: buille faoi thuairim an uimhir i gceart,
tomhas uimhir at√° r√≥-ard, agus buille faoi thuairim uimhir at√° r√≥-√≠seal.</p>
<p>T√° an chuid is m√≥ den chluiche ag obair anois, ach n√≠ f√©idir leis an √∫s√°ideoir ach buille faoi thuairim amh√°in a dh√©anamh.
D√©anaimis √© sin a athr√∫ tr√≠ l√∫b a chur leis!</p>
<h2 id="tomhais-ilghn√©itheacha-a-chead√∫-le-l√∫b"><a class="header" href="#tomhais-ilghn√©itheacha-a-chead√∫-le-l√∫b">Tomhais Ilghn√©itheacha a chead√∫ le L√∫b</a></h2>
<p>Crutha√≠onn an eochairfhocal <code>loop</code> l√∫b gan teorainn. Cuirfimid l√∫b leis chun √∫s√°ideoir√≠ a thabhairt seans n√≠os m√≥ an uimhir a thomhas:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span><span class="boring">use std::cmp::Ordering;
</span><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span>    // --snip--

    println!("The secret number is: {secret_number}");

    loop {
        println!("Please input your guess.");

        // --snip--

<span class="boring">
</span><span class="boring">        let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">        io::stdin()
</span><span class="boring">            .read_line(&amp;mut guess)
</span><span class="boring">            .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">        let guess: u32 = guess.trim().parse().expect("Please type a number!");
</span><span class="boring">
</span><span class="boring">        println!("You guessed: {guess}");
</span><span class="boring">
</span>        match guess.cmp(&amp;secret_number) {
            Ordering::Less =&gt; println!("Too small!"),
            Ordering::Greater =&gt; println!("Too big!"),
            Ordering::Equal =&gt; println!("You win!"),
        }
    }
}</code></pre>
<p>Mar a fheiceann t√∫, bhogamar gach rud √≥n leid ionchuir buille faoi thuairim isteach
l√∫b. B√≠ cinnte a eang√∫ na l√≠nte taobh istigh den l√∫b ceithre sp√°s eile an ceann
agus rith an cl√°r ar√≠s. Iarrfaidh an cl√°r anois buille faoi thuairim eile go deo,
a thugann isteach i nd√°ir√≠re fadhb nua. N√≠ cos√∫il gur f√©idir leis an √∫s√°ideoir √©ir√≠ as!</p>
<p>D'fh√©adfadh an t-√∫s√°ideoir cur isteach ar an gcl√°r i gc√≥na√≠ tr√≠ √∫s√°id a bhaint as aicearra an mh√©archl√°ir
<kbd>ctrl</kbd> - <kbd>c</kbd>. Ach t√° bealach eile chun √©al√∫ √≥n dosh√°raithe seo
ollph√©ist, mar a luadh sa phl√© <code>parse</code> i <a href="ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number">‚ÄúCompar√°id a dh√©anamh idir an Comparing the Guess to the
Secret Number‚Äù</a><!-- neamhaird -->: m√°
cuireann an t-√∫s√°ideoir freagra neamh-uimhir, beidh an cl√°r tuairte√°la. Is f√©idir linn a ghlacadh
bunt√°iste a bhaint as sin chun ligean don √∫s√°ideoir √©ir√≠ as, mar a thaispe√°ntar anseo:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/no-listing-04-looping/
touch src/main.rs
cargo run
(too small guess)
(too big guess)
(correct guess)
quit
-->
<pre><code class="language-console">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.23s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 59
Please input your guess.
45
You guessed: 45
Too small!
Please input your guess.
60
You guessed: 60
Too big!
Please input your guess.
59
You guessed: 59
You win!
Please input your guess.
quit
thread 'main' panicked at 'Please type a number!: ParseIntError { kind: InvalidDigit }', src/main.rs:28:47
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>M√° chl√≥scr√≠obhtar <code>quit</code> scoirfidh t√∫ an cluiche, ach mar a thabharfaidh t√∫ faoi deara, cuirfear aon cheann isteach
ionchur eile gan uimhir. T√° s√© seo suboptimal, a r√° a laghad; ba mhaith linn an cluiche
a stopadh freisin nuair a dh√©antar an uimhir cheart a thomhas.</p>
<h3 id="scoir-tar-√©is-tomhais-ceart"><a class="header" href="#scoir-tar-√©is-tomhais-ceart">Scoir Tar √©is Tomhais Ceart</a></h3>
<p>D√©anaimis an cluiche a r√≠omh le scor nuair a bh√≠onn an bua ag an √∫s√°ideoir tr√≠ r√°iteas <code>break</code> a chur leis:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span><span class="boring">use std::cmp::Ordering;
</span><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    loop {
</span><span class="boring">        println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">        let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">        io::stdin()
</span><span class="boring">            .read_line(&amp;mut guess)
</span><span class="boring">            .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">        let guess: u32 = guess.trim().parse().expect("Please type a number!");
</span><span class="boring">
</span><span class="boring">        println!("You guessed: {guess}");
</span><span class="boring">
</span>        // --snip--

        match guess.cmp(&amp;secret_number) {
            Ordering::Less =&gt; println!("Too small!"),
            Ordering::Greater =&gt; println!("Too big!"),
            Ordering::Equal =&gt; {
                println!("You win!");
                break;
            }
        }
    }
}</code></pre>
<p>Nuair a chuirtear an l√≠ne <code>break</code> isteach i ndiaidh <code>You win!</code> f√°gann an cl√°r an l√∫b nuair a
d√©anann an t-√∫s√°ideoir an uimhir r√∫nda a thomhas i gceart. Cialla√≠onn scor an l√∫b freisin
ag f√°g√°il an chl√°ir, toisc gurb √© an l√∫b an chuid dheireanach de <code>main</code>.</p>
<h3 id="ionchur-neamhbhail√≠-a-l√°imhse√°il"><a class="header" href="#ionchur-neamhbhail√≠-a-l√°imhse√°il">Ionchur Neamhbhail√≠ a L√°imhse√°il</a></h3>
<p>Chun iompar an chluiche a bheacht√∫ tuilleadh, seachas an cl√°r a thuar nuair
ionchuireann an t-√∫s√°ideoir neamhuimhir, d√©anaimis neamhaird a dh√©anamh den chluiche ar neamhuimhir mar sin de
is f√©idir leis an √∫s√°ideoir lean√∫int ar aghaidh le buille faoi thuairim. Is f√©idir linn √© sin a dh√©anamh ach an l√≠ne ina bhfuil <code>guess</code> a athr√∫
a thiont√∫ √≥ <code>String</code> go <code>u32</code>, mar a thaispe√°ntar i Liost√∫ 2-5.</p>
<Listing number="2-5" file-name="src/main.rs" caption="Ignoring a non-number guess and asking for another guess instead of crashing the program">
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span><span class="boring">use std::cmp::Ordering;
</span><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    loop {
</span><span class="boring">        println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">        let mut guess = String::new();
</span><span class="boring">
</span>        // --snip--

        io::stdin()
            .read_line(&amp;mut guess)
            .expect("Failed to read line");

        let guess: u32 = match guess.trim().parse() {
            Ok(num) =&gt; num,
            Err(_) =&gt; continue,
        };

        println!("You guessed: {guess}");

        // --snip--
<span class="boring">
</span><span class="boring">        match guess.cmp(&amp;secret_number) {
</span><span class="boring">            Ordering::Less =&gt; println!("Too small!"),
</span><span class="boring">            Ordering::Greater =&gt; println!("Too big!"),
</span><span class="boring">            Ordering::Equal =&gt; {
</span><span class="boring">                println!("You win!");
</span><span class="boring">                break;
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Aistr√≠mid √≥ ghlao <code>expect</code> go slonn <code>match</code> chun bogadh √≥ bhualadh
ar earr√°id chun an earr√°id a l√°imhse√°il. Cuimhnigh go dtugann <code>parse</code> cine√°l <code>Result</code> ar ais
agus is √©num √© <code>Result</code> a bhfuil na leaganacha <code>Ok</code> agus <code>Err</code> air. T√°imid ag √∫s√°id
l√©iri√∫ <code>match</code> anseo, mar a rinne muid le toradh <code>Ordering</code> an <code>cmp</code>
modh.</p>
<p>M√° t√° <code>parse</code> in ann an teaghr√°n a iomp√∫ ina huimhir go rath√∫il, d√©anfaidh s√©
seol ar ais luach <code>Ok</code> ina bhfuil an uimhir iarmhartach. Beidh an luach <code>Ok</code> sin
mheaitse√°il patr√∫n an ch√©ad l√°mh, agus beidh an slonn <code>match</code> ar ais d√≠reach an
luach <code>num</code> a th√°irg <code>parse</code> agus a chuir taobh istigh den luach <code>Ok</code>. An uimhir sin
cr√≠ochn√≥idh s√© san √°it a dteasta√≠onn uainn √© san athr√≥g nua <code>guess</code> at√° √° chruth√∫ againn.</p>
<p>M√° t√° <code>parse</code> <em>not</em> in ann an teaghr√°n a iomp√∫ ina huimhir, seolfaidh s√© uimhir ar ais
Luach <code>Err</code> ina bhfuil tuilleadh eolais faoin earr√°id. An luach <code>Err</code>
n√≠ mheaitse√°lann s√© leis an bpatr√∫n <code>Ok(num)</code> sa ch√©ad l√°mh <code>match</code>', ach is amhlaidh
meaitse√°il an patr√∫n <code>Err(_)</code> sa dara l√°mh. Is √© an fosc√≥r, <code>_</code>, a
luach catchall; sa sampla seo, t√°imid ag r√° go dteasta√≠onn uainn gach <code>Err</code> a mheaitse√°il
luachanna, is cuma c√©n t-eolas at√° istigh iontu. Mar sin beidh an cl√°r
c√≥d an dara l√°imhe a fhorghn√≠omh√∫, <code>continue</code>, a ins√≠onn don chl√°r dul go dt√≠ an
an ch√©ad atriall eile den <code>loop</code> agus iarr buille faoi thuairim eile. Mar sin, go h√©ifeachtach, an
d√©anann an cl√°r neamhaird ar gach earr√°id a d'fh√©adfadh <code>parse</code> a bheith orthu!</p>
<p>Anois ba ch√≥ir go n-oibreodh gach rud sa chl√°r mar a bh√≠othas ag s√∫il leis. D√©anaimis iarracht √©:</p>
<!-- manual-regeneration
cd listings/ch02-guessing-game-tutorial/listing-02-05/
cargo run
(too small guess)
(too big guess)
foo
(correct guess)
-->
<pre><code class="language-console">$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.13s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 61
Please input your guess.
10
You guessed: 10
Too small!
Please input your guess.
99
You guessed: 99
Too big!
Please input your guess.
foo
Please input your guess.
61
You guessed: 61
You win!
</code></pre>
<p>Iontach! Le tweak deiridh beag b√≠deach amh√°in, cr√≠ochn√≥imid an cluiche buille faoi thuairim. Athghairm
go bhfuil an cl√°r f√≥s ag priont√°il an uimhir r√∫nda. D'oibrigh s√© sin go maith le haghaidh
t√°st√°il, ach scriosann s√© an cluiche. Scriosaimid an <code>println!</code> a aschuireann an
uimhir r√∫nda. L√©ir√≠onn liost√∫ 2-6 an c√≥d deiridh.</p>
<Listing number="2-6" file-name="src/main.rs" caption="Complete guessing game code">
<pre><code class="language-rust ignore">use rand::Rng;
use std::cmp::Ordering;
use std::io;

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..=100);

    loop {
        println!("Please input your guess.");

        let mut guess = String::new();

        io::stdin()
            .read_line(&amp;mut guess)
            .expect("Failed to read line");

        let guess: u32 = match guess.trim().parse() {
            Ok(num) =&gt; num,
            Err(_) =&gt; continue,
        };

        println!("You guessed: {guess}");

        match guess.cmp(&amp;secret_number) {
            Ordering::Less =&gt; println!("Too small!"),
            Ordering::Greater =&gt; println!("Too big!"),
            Ordering::Equal =&gt; {
                println!("You win!");
                break;
            }
        }
    }
}</code></pre>
</Listing>
<p>Ag an bpointe seo, d'√©irigh leat an cluiche tomhais a th√≥g√°il. Comhghairdeachas!</p>
<h2 id="achoimre-1"><a class="header" href="#achoimre-1">Achoimre</a></h2>
<p>Bealach praitici√∫il a bh√≠ sa tionscadal seo chun go leor coincheap nua Rust a chur in aithne duit:
<code>let</code>, <code>match</code>, feidhmeanna, √∫s√°id cliathbhosca√≠ seachtracha, agus go leor eile. Sa ch√©ad cheann eile
c√∫pla caibidil, foghlaimeoidh t√∫ faoi na coincheapa seo n√≠os mine. Caibidil 3
cl√∫da√≠onn s√© na coincheapa at√° ag formh√≥r na dteangacha r√≠omhchl√°r√∫ch√°in, amhail athr√≥ga, sonra√≠
cine√°lacha, agus feidhmeanna, agus l√©ir√≠onn s√© conas iad a √∫s√°id i Rust. Scr√∫da√≠onn Caibidil 4
√∫in√©ireacht, gn√© a fh√°gann go bhfuil Rust difri√∫il √≥ theangacha eile. Caibidil 5
pl√©ann s√© strucht√∫ir agus comhr√©ir mhodhanna, agus m√≠n√≠onn Caibidil 6 conas a oibr√≠onn enums.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="coincheapa-coitianta-r√≠omhchl√°r√∫ch√°in"><a class="header" href="#coincheapa-coitianta-r√≠omhchl√°r√∫ch√°in">Coincheapa Coitianta R√≠omhchl√°r√∫ch√°in</a></h1>
<p>Cl√∫da√≠onn an chaibidil seo coincheapa at√° le feice√°il i mbeagnach gach teanga r√≠omhchl√°r√∫ch√°in
agus conas a oibr√≠onn siad i Rust. T√° go leor i gcoiteann ag go leor teangacha r√≠omhchl√°r√∫ch√°in ag
a gcro√≠. N√≠l aon cheann de na coincheapa a chuirtear i l√°thair sa chaibidil seo uath√∫il do Rust,
ach pl√©ifimid iad i gcomhth√©acs Meirge agus m√≠neoimid na coinbhinsi√∫in
timpeall ag baint √∫s√°ide as na coincheapa seo.</p>
<p>Go sonrach, foghlaimeoidh t√∫ faoi athr√≥ga, cine√°lacha bun√∫sacha, feidhmeanna, tuairim√≠,
agus sreabhadh rialaithe. Beidh na fond√∫ireachta√≠ seo i ngach cl√°r Rust, agus ag foghlaim
beidh siad go luath a thabhairt duit cro√≠ l√°idir chun t√∫s a chur as.</p>
<blockquote>
<h4 id="eochairfhocail"><a class="header" href="#eochairfhocail">Eochairfhocail</a></h4>
<p>T√° sraith <em>eochairfhocail</em> sa teanga Rust at√° curtha in √°irithe le h√∫s√°id ag an
teanga amh√°in, mar at√° i dteangacha eile. Coinnigh i gcuimhne nach f√©idir leat √© a √∫s√°id
na focail seo mar ainmneacha na n-athr√≥g n√≥ na bhfeidhmeanna. T√° an chuid is m√≥ de na heochairfhocail
br√≠onna speisialta, agus beidh t√∫ √° n-√∫s√°id chun tascanna √©ags√∫la a dh√©anamh i do Rust
cl√°ir; n√≠l feidhmi√∫lacht reatha ag cuid acu a bhaineann leo ach t√°
curtha in √°irithe le haghaidh feidhmi√∫lacht a d'fh√©adfa√≠ a chur le Rust amach anseo. tu
in ann liosta de na heochairfhocail a aimsi√∫ in <a href="aguis%C3%ADn-01-eochairfhocail.html">Aguis√≠n A</a><!-- neamhaird a dh√©anamh -->.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="athr√≥ga-agus-inathraitheacht"><a class="header" href="#athr√≥ga-agus-inathraitheacht">Athr√≥ga agus Inathraitheacht</a></h2>
<p>Mar a luadh sa <a href="ch02-00-guessing-game-tutorial.html#storing-values-with-variables">‚ÄúLuachanna St√≥r√°la le
Athr√≥ga‚Äù</a><!-- ignore --> alt, de r√©ir r√©amhshocraithe,
t√° athr√≥ga do- immutable. T√° s√© seo ar cheann de go leor nodanna a thugann Rust duit a scr√≠obh
do ch√≥d ar bhealach a bhaineann leas as an concurrency s√°bh√°ilteachta agus √©asca go
Cuireann meirge. Mar sin f√©in, t√° an rogha agat f√≥s do chuid athr√≥g a dh√©anamh mutable.
D√©anaimis ini√∫chadh ar conas agus c√©n f√°th a spreagann Rust t√∫ a bheith i bhfabhar do-mhoth√∫ch√°nacht agus c√©n f√°th
uaireanta b'fh√©idir gur mhaith leat rogha an di√∫ltaithe.</p>
<p>Nuair a bh√≠onn athr√≥g neamh-inchurtha, a luaithe a bh√≠onn luach ceangailte le hainm, n√≠ f√©idir leat athr√∫
an luach sin. Chun √© seo a l√©iri√∫, gintear tionscadal nua dar teideal <em>variables</em> in
do <em>projects</em> eolaire tr√≠ √∫s√°id a bhaint as <code>cargo new variables</code>.</p>
<p>Ansin, i do eolaire <em>variables</em> nua, oscail <em>src/main.rs</em> agus cuir ceann ina √°it
c√≥d leis an gc√≥d seo a leanas, nach dtioms√≥idh f√≥s:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let x = 5;
    println!("The value of x is: {x}");
    x = 6;
    println!("The value of x is: {x}");
}</code></pre>
<p>S√°bh√°il agus rith an cl√°r ag √∫s√°id <code>cargo run</code>. Ba cheart go bhfaighfe√° teachtaireacht earr√°ide
maidir le hearr√°id neamh-luaineachta, mar a thaispe√°ntar san aschur seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
error[E0384]: cannot assign twice to immutable variable `x`
 --&gt; src/main.rs:4:5
  |
2 |     let x = 5;
  |         - first assignment to `x`
3 |     println!("The value of x is: {x}");
4 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable
  |
help: consider making this binding mutable
  |
2 |     let mut x = 5;
  |         +++

For more information about this error, try `rustc --explain E0384`.
error: could not compile `variables` (bin "variables") due to 1 previous error
</code></pre>
<p>L√©ir√≠onn an sampla seo conas a chuid√≠onn an tiomsaitheoir leat teacht ar earr√°id√≠ i do chl√°ir.
Is f√©idir le hearr√°id√≠ tiomsaitheora a bheith frustrachas, ach i nd√°ir√≠re n√≠ chialla√≠onn siad ach do chl√°r
nach bhfuil t√∫ ag d√©anamh a bhfuil uait go f√≥ill go s√°bh√°ilte; n√≠ chialla√≠onn siad go bhfuil t√∫
nach r√≠omhchl√°raitheoir maith √©! Faigheann Rustaceans a bhfuil taith√≠ acu earr√°id√≠ tiomsaitheora f√≥s.</p>
<p>Fuair ‚Äã‚Äãt√∫ an teachtaireacht earr√°ide <code>cannot assign twice to immutable variable `x`</code> toisc go ndearna t√∫ iarracht an dara luach a shannadh don athr√≥g do-ath-inchurtha <code>x</code>.</p>
<p>T√° s√© t√°bhachtach go bhfaighimid earr√°id√≠ maidir le ham tiomsaithe nuair a dh√©anaimid iarracht a
luach at√° sainithe mar neamh-luaineach mar go bhf√©adfadh an c√°s seo a bheith mar thoradh air
fabhtanna. M√° oibr√≠onn cuid amh√°in d√°r gc√≥d ar an toimhde go mbeidh luach
cho√≠che agus athra√≠onn cuid eile d√°r gc√≥d an luach sin, is f√©idir
nach nd√©anfaidh an ch√©ad chuid den ch√≥d an rud a ceapadh d√≥ a dh√©anamh. An ch√∫is
Is f√©idir leis an gcine√°l seo fabht a bheith deacair a rian√∫ s√≠os i ndiaidh an bhf√≠ric, go h√°irithe
nuair a athra√≠onn an dara p√≠osa c√≥d an luach amh√°in <em>uaireanta</em>. An Meirge
r√°tha√≠onn tiomsaitheoir nuair a luann t√∫ nach n-athr√≥idh luach, i nd√°ir√≠re
N√≠ athr√≥idh, mar sin n√≠ g√° duit s√∫il a choinne√°il air f√©in. T√° do ch√≥d mar sin
n√≠os √©asca a r√©as√∫n√∫ tr√≠d.</p>
<p>Ach is f√©idir inathraitheacht a bheith an-√∫s√°ideach, agus is f√©idir c√≥d a dh√©anamh n√≠os √°isi√∫la a scr√≠obh.
C√© go bhfuil athr√≥ga do-laghdaithe de r√©ir r√©amhshocraithe, is f√©idir leat iad a dh√©anamh comhsh√≥ite faoi
ag cur <code>mut</code> os comhair an ainm athr√≥g mar a rinne t√∫ i <a href="ch02-00-guessing-game-tutorial.html#storing-values-with-variables">Caibidil
2</a> <!-- neamhaird -->. Nuair a chuirfear <code>mut</code> tugann s√© freisin
r√∫n do l√©itheoir√≠ an ch√≥id amach anseo tr√≠ chodanna eile den ch√≥d a chur in i√∫l
ag athr√∫ luach na hathr√≥ige seo.</p>
<p>Mar shampla, d√©anaimis <em>src/main.rs</em> a athr√∫ chuig an m√©id seo a leanas:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut x = 5;
    println!("The value of x is: {x}");
    x = 6;
    println!("The value of x is: {x}");
}</code></pre></pre>
<p>Nuair a ritheann muid an cl√°r anois, faigheann muid seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/variables`
The value of x is: 5
The value of x is: 6
</code></pre>
<p>T√° cead againn an luach faoi cheangal go <code>x</code> a athr√∫ √≥ <code>5</code> go <code>6</code> nuair is <code>mut</code>
√∫s√°idtear. I ndeireadh na d√°la, is f√∫t f√©in at√° s√© cinneadh a dh√©anamh maidir le s√≥cmhainneacht a √∫s√°id n√≥ gan √©
ag brath ar cad a cheapann t√∫ is soil√©ire sa ch√°s √°irithe sin.</p>
<h3 id="tairiseacha"><a class="header" href="#tairiseacha">Tairiseacha</a></h3>
<p>Cos√∫il le hathr√≥ga domhalartaithe, is luachanna iad <em>constants</em> at√° ceangailte d'ainm agus
nach bhfuil cead a athr√∫, ach t√° roinnt difr√≠ochta√≠ idir tairisigh
agus athr√≥ga.</p>
<p>Ar dt√∫s, n√≠l cead agat <code>mut</code> a √∫s√°id le tairisigh. N√≠ hamh√°in go bhfuil tairisigh
do-laghdaithe de r√©ir r√©amhshocraithe - t√° siad i gc√≥na√≠ dochorraithe. Dearbha√≠onn t√∫ tairisigh ag baint √∫s√°ide as an
eochairfhocal <code>const</code> in ionad an eochairfhocail <code>let</code>, agus cine√°l an luacha <em>must</em>
a bheith an√≥t√°ilte. Cl√∫d√≥imid cine√°lacha agus cl√≥scr√≠obhfaimid n√≥ta√≠ sa ch√©ad chuid eile,
<a href="ch03-02-data-types.html#data-types">‚ÄúCine√°lacha Sonra√≠‚Äù</a><!-- neamhaird a dh√©anamh ar -->, mar sin n√° b√≠ buartha faoi na sonra√≠
ceart anois. B√≠odh a fhios agat go gcaithfidh t√∫ an cine√°l a an√≥t√°il i gc√≥na√≠.</p>
<p>Is f√©idir tairisigh a dhearbh√∫ in aon raon feidhme, lena n-√°ir√≠tear an raon feidhme domhanda, a dh√©anann
√∫s√°ideach iad le haghaidh luachanna a gcaithfidh go leor codanna den ch√≥d a bheith ar an eolas f√∫thu.</p>
<p>Is √© an difr√≠ocht dheireanach nach f√©idir tairisigh a shocr√∫ ach do shloinneadh tairiseach,
n√≠ toradh √© sin ar luach nach bhf√©adfa√≠ a r√≠omh ach ag am rite.</p>
<p>Seo sampla de dhearbh√∫ seasta:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
<span class="boring">}</span></code></pre></pre>
<p>Is √© ainm an tairiseach n√° <code>THREE_HOURS_IN_SECONDS</code> agus socra√≠tear a luach go dt√≠ an
toradh ar iolr√∫ 60 (l√≠on na soicind i n√≥im√©id) faoi 60 (an uimhir
n√≥im√©ad in uair an chloig) faoi 3 (an l√≠on uaireanta is mian linn a chomhaireamh sa
cl√°r). Is √© an gn√°s ainmni√∫ch√°in at√° ag Rust maidir le tairisigh n√° gach c√°s uachtair a √∫s√°id le
b√©im idir focail. T√° an tiomsaitheoir in ann sraith theoranta de
oibr√≠ochta√≠ ag am tiomsaithe, a ligeann d√∫inn rogha a dh√©anamh an luach seo a scr√≠obh amach in a
bealach at√° n√≠os √©asca a thuiscint agus a fh√≠or√∫, seachas an tairiseach seo a shocr√∫
go dt√≠ an luach 10,800. F√©ach an rann√°n <a href="../reference/const_eval.html">Tagairt Meirge ar tairiseach
luach√°il</a> le haghaidh tuilleadh eolais ar na hoibr√≠ochta√≠ is f√©idir a √∫s√°id
nuair a dhearbha√≠tear tairisigh.</p>
<p>T√° tairisigh bail√≠ ar feadh an ama ar fad a ritheann cl√°r, laistigh den raon feidhme i
a dearbha√≠odh iad. D√©anann an air√≠ seo tairisigh √∫s√°ideach do luachanna i
d'fhearann ‚Äã‚Äãiarratais a bhf√©adfadh go mbeadh a fhios ag codanna √©ags√∫la den chl√°r
thart ar, mar shampla an t-uasl√≠on point√≠ a cheada√≠tear d‚Äôaon imreoir cluiche
thuilleamh, n√≥ luas an tsolais.</p>
<p>T√° s√© √∫s√°ideach luachanna cruach√≥daithe a √∫s√°idtear ar fud do chl√°ir a ainmni√∫ mar thairisigh
br√≠ an luacha sin a chur in i√∫l do lucht cothabh√°la an ch√≥id amach anseo. s√© freisin
cabhra√≠onn s√© le h√°it amh√°in a bheith i do ch√≥d bheadh ‚Äã‚Äãort a athr√∫ m√° t√° an
n√≠ m√≥r luach cruach√≥d a nuashonr√∫ amach anseo.</p>
<h3 id="sc√°thfhoghlaim"><a class="header" href="#sc√°thfhoghlaim">Sc√°thfhoghlaim</a></h3>
<p>Mar a chonaic t√∫ sa rang teagaisc cluiche buille faoi thuairim i <a href="ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number">Caibidil
2</a><!-- neamhaird a dh√©anamh ar -->, is f√©idir leat a dhearbh√∫
athr√≥g nua leis an ainm c√©anna leis an athr√≥g roimhe seo. Deir Rustaceans go bhfuil an
Is √© an ch√©ad athr√≥g <em>shadowed</em> ag an dara, rud a chialla√≠onn go bhfuil an dara
Is √© an t-athr√≥g a fheicfidh an tiomsaitheoir nuair a √∫s√°ideann t√∫ ainm na hathr√≥ige.
Go bun√∫sach, d√©anann an dara athr√≥g sc√°th√∫ ar an gc√©ad cheann, ag glacadh aon √∫s√°id√≠ a bhaintear as an
ainm inathraithe d√≥ f√©in go dt√≠ go sc√°tha√≠tear √© f√©in n√≥ go gcr√≠ochna√≠tear an raon feidhme.
Is f√©idir linn athr√≥g a sc√°th√∫ tr√≠ √∫s√°id a bhaint as ainm na hathr√≥ige c√©anna agus an t-athr√≥g a athr√°
√∫s√°id an eochairfhocail <code>let</code> mar seo a leanas:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 5;

    let x = x + 1;

    {
        let x = x * 2;
        println!("The value of x in the inner scope is: {x}");
    }

    println!("The value of x is: {x}");
}</code></pre></pre>
<p>Ceangla√≠onn an cl√°r seo <code>x</code> ar luach <code>5</code> ar dt√∫s. Ansin crutha√≠onn s√© athr√≥g nua
<code>x</code> tr√≠ <code>let x =</code> a athr√°, ag t√≥g√°il an luach bunaidh agus ag cur <code>1</code> leis mar sin de
Is √© luach <code>x</code> ansin <code>6</code>. Ansin, laistigh de raon feidhme istigh a crutha√≠odh leis an curly
l√∫ib√≠n√≠, sc√°tha√≠onn an tr√≠√∫ r√°iteas <code>let</code> <code>x</code> freisin agus crutha√≠onn s√© r√°iteas nua
athr√≥g, ag iolr√∫ an luach roimhe faoi <code>2</code> chun luach <code>12</code> a thabhairt do <code>x</code>.
Nuair a bh√≠onn an sc√≥ip sin thart, cuirtear deireadh leis an sc√°th√∫ istigh agus filleann <code>x</code> ar a bheith <code>6</code>.
Nuair a bheidh an cl√°r seo √° rith againn, aschuirfidh s√© an m√©id seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/variables`
The value of x in the inner scope is: 12
The value of x is: 6
</code></pre>
<p>N√≠ hionann an sc√°th√∫ agus athr√≥g a mharc√°il mar <code>mut</code> mar gheobhaidh muid a
earr√°id ama tiomsaithe m√° dh√©anaimid iarracht de thaisme athshannadh don athr√≥g seo gan
ag baint √∫s√°ide as an eochairfhocal <code>let</code>. Tr√≠ √∫s√°id a bhaint as <code>let</code>, is f√©idir linn c√∫pla claochl√∫ a dh√©anamh
ar luach ach an bhfuil an t-athr√≥g do-athlasta tar √©is na claochluithe sin
curtha i gcr√≠ch.</p>
<p>Is √© an difr√≠ocht eile idir <code>mut</code> agus sc√°thfhoghlaim n√° toisc go bhfuilimid
ag cruth√∫ athr√≥g nua go h√©ifeachtach nuair a √∫s√°idimid an eochairfhocal <code>let</code> ar√≠s, is f√©idir linn
cine√°l an luacha a athr√∫ ach an t-ainm c√©anna a ath√∫s√°id. Mar shampla, abair √°r
Iarrann an cl√°r ar √∫s√°ideoir a thaispe√°int c√© mh√©ad sp√°s at√° uathu idir t√©acs √©igin
ag ionchur carachtair sp√°is, agus ansin ba mhaith linn an t-ionchur sin a st√≥r√°il mar uimhir:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let spaces = "   ";
    let spaces = spaces.len();
<span class="boring">}</span></code></pre></pre>
<p>Is cine√°l teaghr√°n √© an ch√©ad athr√≥g <code>spaces</code> agus an dara hathr√≥g <code>spaces</code>
is cine√°l uimhreach √©. F√°gann sc√°th√∫ mar sin nach g√° d√∫inn teacht suas leis
ainmneacha √©ags√∫la, mar <code>spaces_str</code> agus <code>spaces_num</code>; ina ionad sin, is f√©idir linn a ath√∫s√°id
an t-ainm <code>spaces</code> n√≠os simpl√≠. Mar sin f√©in, m√° dh√©anaimid iarracht <code>mut</code> a √∫s√°id le haghaidh seo, mar a thaispe√°ntar
anseo, gheobhaidh muid earr√°id ama tiomsaithe:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let mut spaces = "   ";
    spaces = spaces.len();
<span class="boring">}</span></code></pre>
<p>Deir an earr√°id nach bhfuil cead againn cine√°l athr√≥ige a athr√∫:</p>
<pre><code class="language-console">$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
error[E0308]: mismatched types
 --&gt; src/main.rs:3:14
  |
2 |     let mut spaces = "   ";
  |                      ----- expected due to this value
3 |     spaces = spaces.len();
  |              ^^^^^^^^^^^^ expected `&amp;str`, found `usize`

For more information about this error, try `rustc --explain E0308`.
error: could not compile `variables` (bin "variables") due to 1 previous error
</code></pre>
<p>Anois go bhfuil ini√∫chadh d√©anta againn ar an gcaoi a n-oibr√≠onn athr√≥ga, breathna√≠mid ar n√≠os m√≥ cine√°lacha sonra√≠ iad
is f√©idir a bheith.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cine√°lacha-sonra√≠"><a class="header" href="#cine√°lacha-sonra√≠">Cine√°lacha Sonra√≠</a></h2>
<p>T√° gach luach i Rust de chine√°l <em>data</em> √°irithe, a ins√≠onn do Rust c√©n cine√°l
sonra√≠ √° shonr√∫ ionas go mbeidh a fhios aige conas oibri√∫ leis na sonra√≠ sin. Breathn√≥imid ar
dh√° fhothacar de chine√°l sonra√≠: sc√°lach agus cumaisc.</p>
<p>Coinnigh i gcuimhne gur teanga <em>statically typed</em> √≠ Rust, rud a chialla√≠onn go bhfuil s√©
n√≠ m√≥r go mbeadh a fhios ag na cine√°lacha athr√≥g go l√©ir ag am tiomsaithe. Is f√©idir leis an tiomsaitheoir de ghn√°th
t√°tal a bhaint as c√©n cine√°l ba mhaith linn a √∫s√°id bunaithe ar an luach agus conas a √∫s√°idimid √©. I gc√°sanna
nuair is f√©idir go leor cine√°lacha a dh√©anamh, mar shampla nuair a d'iompa√≠omar <code>String</code> go huimhri√∫il
cl√≥scr√≠obh ag baint √∫s√°ide as <code>parse</code> sa <a href="ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number">‚ÄúAg Compar√°id an Tomhais leis an R√∫nduine‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt sa
Caibidil 2, n√≠ m√≥r d√∫inn n√≥ta cine√°il a chur leis, mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let guess: u32 = "42".parse().expect("Not a number!");
<span class="boring">}</span></code></pre></pre>
<p>Mura gcuirfimid an n√≥ta cine√°l <code>: u32</code> a thaispe√°ntar sa ch√≥d roimhe seo, Rust
taispe√°nfaidh s√© an earr√°id seo a leanas, rud a chialla√≠onn go dteasta√≠onn n√≠os m√≥ √≥n tiomsaitheoir
faisn√©is uainn chun a fh√°il amach c√©n cine√°l ba mhaith linn a √∫s√°id:</p>
<pre><code class="language-console">$ cargo build
   Compiling no_type_annotations v0.1.0 (file:///projects/no_type_annotations)
error[E0284]: type annotations needed
 --&gt; src/main.rs:2:9
  |
2 |     let guess = "42".parse().expect("Not a number!");
  |         ^^^^^        ----- type must be known at this point
  |
  = note: cannot satisfy `&lt;_ as FromStr&gt;::Err == _`
help: consider giving `guess` an explicit type
  |
2 |     let guess: /* Type */ = "42".parse().expect("Not a number!");
  |              ++++++++++++

For more information about this error, try `rustc --explain E0284`.
error: could not compile `no_type_annotations` (bin "no_type_annotations") due to 1 previous error
</code></pre>
<p>Feicfidh t√∫ n√≥ta√≠ cine√°lacha √©ags√∫la le haghaidh cine√°lacha eile sonra√≠.</p>
<h3 id="cine√°lacha-scalar"><a class="header" href="#cine√°lacha-scalar">Cine√°lacha Scalar</a></h3>
<p>Is ionann cine√°l <em>scalar</em> agus luach amh√°in. T√° ceithre phr√≠omhchine√°l sc√°lach ag meirge:
sl√°nuimhreacha, uimhreacha sn√°mhphointe, Booles, agus carachtair. Seans go n-aithn√≠onn t√∫
iad seo √≥ theangacha r√≠omhchl√°r√∫ch√°in eile. L√©imid an chaoi a n-oibr√≠onn siad i Rust.</p>
<h4 id="cine√°lacha-sl√°nuimhir"><a class="header" href="#cine√°lacha-sl√°nuimhir">Cine√°lacha Sl√°nuimhir</a></h4>
<p>Is uimhir √© _ sl√°nuimhir_ gan comhph√°irt cod√°nach. D‚Äô√∫s√°ideamar sl√°nuimhir amh√°in
cl√≥scr√≠obh i gCaibidil 2, an cine√°l <code>u32</code>. Tugann an dearbh√∫ cine√°l seo le fios go bhfuil an
ba cheart gur sl√°nuimhir gan s√≠ni√∫ (cine√°lacha sl√°nuimhir s√≠nithe a bheadh ‚Äã‚Äãsa luach a bhaineann leis
tos√∫ le <code>i</code> in ionad <code>u</code>) a th√≥gann suas le 32 giot√°n sp√°is. L√©ir√≠onn T√°bla 3-1
na cine√°lacha sl√°nuimhir ionsuite i Rust. Is f√©idir linn aon cheann de na leaganacha seo a √∫s√°id chun a dhearbh√∫
an cine√°l luach sl√°nuimhir.</p>
<p><span class="caption">T√°bla 3-1: Cine√°lacha Sl√°nuimhir i Meirge</span></p>
<div class="table-wrapper"><table><thead><tr><th>Fad</th><th>S√≠nithe</th><th>Gan s√≠ni√∫</th></tr></thead><tbody>
<tr><td>8-giot√°n</td><td><code>i8</code></td><td><code>u8</code></td></tr>
<tr><td>16-giot√°n</td><td><code>i16</code></td><td><code>u16</code></td></tr>
<tr><td>32-giot√°n</td><td><code>i32</code></td><td><code>u32</code></td></tr>
<tr><td>64-giot√°n</td><td><code>i64</code></td><td><code>u64</code></td></tr>
<tr><td>128-giot√°n</td><td><code>i128</code></td><td><code>u128</code></td></tr>
<tr><td>arch</td><td><code>isize</code></td><td><code>usize</code></td></tr>
</tbody></table>
</div>
<p>Is f√©idir le gach malairt a bheith s√≠nithe n√≥ gan s√≠ni√∫ agus t√° m√©id follasach aige.
Tagra√≠onn <em>Signed</em> agus <em>unsigned</em> do cib√© an f√©idir an uimhir a bheith
di√∫ltach - i bhfocail eile, cib√© an g√° comhartha a bheith ag an uimhir
(s√≠nithe) n√≥ cib√© an mbeidh s√© dearfach cho√≠che agus an f√©idir a bheith mar sin
ionada√≠ocht gan comhartha (gan s√≠ni√∫). T√° s√© cos√∫il le huimhreacha a scr√≠obh ar ph√°ip√©ar: cathain
t√° an comhartha t√°bhachtach, taispe√°ntar uimhir le comhartha m√≥ide n√≥ comhartha l√∫ide; √°fach,
nuair at√° s√© s√°bh√°ilte glacadh leis go bhfuil an uimhir deimhneach, taispe√°ntar √© gan aon chomhartha.
St√≥r√°iltear uimhreacha s√≠nithe tr√≠ √∫s√°id a bhaint as <a href="https://en.wikipedia.org/wiki/Two%27s_complement">dh√° chomhl√°n√∫</a><!-- neamhaird
--> ionada√≠ocht.</p>
<p>Is f√©idir le gach leagan s√≠nithe uimhreacha a st√≥r√°il √≥ -(2<sup>n - 1</sup>) go 2<sup>n -
1</sup> - 1 san √°ireamh, √°it arb √© <em>n</em> l√≠on na ngiot√°n a √∫s√°ideann an leagan. Mar sin an
Is f√©idir le <code>i8</code> uimhreacha a st√≥r√°il √≥ -(2<sup>7</sup>) go 2<sup>7</sup> - 1, arb ionann √©
-128 go 127. Is f√©idir le leaganacha neamhsh√≠nithe uimhreacha a st√≥r√°il √≥ 0 go 2<sup>n</sup> - 1,
mar sin is f√©idir le <code>u8</code> uimhreacha a st√≥r√°il √≥ 0 go 2<sup>8</sup> - 1, arb ionann √© agus 0 go 255.</p>
<p>Ina theannta sin, braitheann na cine√°lacha <code>isize</code> agus <code>usize</code> ar ailtireacht an
r√≠omhaire a bhfuil do r√≠omhchl√°r ar si√∫l air, at√° sonraithe sa t√°bla mar ‚Äú√°irse‚Äù:
64 giot√°n m√° t√° t√∫ ar ailtireacht 64-giot√°n agus 32 giot√°n m√° t√° t√∫ ar 32-giot√°n
ailtireacht.</p>
<p>Is f√©idir leat sl√°nuimhreacha a scr√≠obh in aon cheann de na foirmeacha a thaispe√°ntar i dT√°bla 3-2. N√≥ta
go gceada√≠tear iarmh√≠r cine√°il i l√≠tir uimhreacha ar f√©idir a bheith ina gcine√°lacha iolracha uimhri√∫la,
mar <code>57u8</code>, chun an cine√°l a ainmni√∫. Is f√©idir le huimhreacha <code>_</code> a √∫s√°id mar a
deighilteoir amhairc chun an uimhir a dh√©anamh n√≠os √©asca le l√©amh, mar <code>1_000</code>, a dh√©anfaidh
beidh an luach c√©anna agat agus d√° mbeadh <code>1000</code> sonraithe agat.</p>
<p><span class="caption">T√°bla 3-2: Sl√°nuimhir Liteartha i Meirge</span></p>
<div class="table-wrapper"><table><thead><tr><th>Uimhreacha litrithe</th><th>Sampla</th></tr></thead><tbody>
<tr><td>Deach√∫il</td><td><code>98_222</code></td></tr>
<tr><td>Heics</td><td><code>0xff</code></td></tr>
<tr><td>Octal</td><td><code>0o77</code></td></tr>
<tr><td>D√©n√°rtha</td><td><code>0b1111_0000</code></td></tr>
<tr><td>Beart (<code>u8</code> amh√°in)</td><td><code>b'A'</code></td></tr>
</tbody></table>
</div>
<p>Mar sin c√©n chaoi a bhfuil a fhios agat c√©n cine√°l sl√°nuimhir at√° le h√∫s√°id? Mura bhfuil t√∫ cinnte, Rust's
is √°iteanna maithe iad mainneachtain√≠ de ghn√°th le tos√∫: r√©amhshocr√∫ cine√°lacha sl√°nuimhir go <code>i32</code>.
Is √© an pr√≠omhstaid ina n-√∫s√°idfe√° <code>isize</code> n√≥ <code>usize</code> agus t√∫ ag inn√©acs√∫
baili√∫ch√°n de shaghas √©igin.</p>
<blockquote>
<h5 id="s√°rshreabhadh-sl√°nuimhir"><a class="header" href="#s√°rshreabhadh-sl√°nuimhir">S√°rshreabhadh Sl√°nuimhir</a></h5>
<p>Ligean le r√° go bhfuil athr√≥g de chine√°l <code>u8</code> agat ar f√©idir leis luachanna a choinne√°il idir 0 agus
255. M√° dh√©anann t√∫ iarracht an athr√≥g a athr√∫ go luach lasmuigh den raon sin, mar
256, tarl√≥idh <em>integer overflow</em>, agus is f√©idir ceann amh√°in de dh√° iompar a bheith mar thoradh air.
Agus t√∫ ag tioms√∫ i m√≥d d√≠fhabhtaithe, cuims√≠onn Rust seice√°lacha le haghaidh r√≥-shreabhadh sl√°nuimhir
a chuireann faoi deara do chl√°r <em>panic</em> ag am rite m√° tharla√≠onn an t-iompar seo. Meirge
√∫s√°ideann an t√©arma <em>panicking</em> nuair a scoireann cl√°r le hearr√°id; pl√©ifimid
scaoll n√≠os doimhne sa <a href="ch09-01-unrecoverable-errors-with-panic.html">‚ÄúEarr√°id√≠ Do-aisghabh√°la le
<code>panic!</code>‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt i gCaibidil 9.</p>
<p>Agus t√∫ ag tioms√∫ i m√≥d scaoilte leis an mbratach <code>--release</code>, d√©anann Rust amhlaidh
<em>not</em> seice√°lacha a chur san √°ireamh le haghaidh r√≥-shreabhadh sl√°nuimhir a bh√≠onn ina ch√∫is le scaoll. Ina √°it sin, m√°s rud √©
tarla√≠onn r√≥-shreabhadh, feidhm√≠onn Rust <em>two's compliment wrapping</em>. I mbeag√°n focal, luachanna
n√≠os m√≥ n√° an t-uasluach is f√©idir leis an gcine√°l ‚Äútimfhilleadh‚Äù a choinne√°il chomh h√≠seal agus is f√©idir
de na luachanna is f√©idir leis an gcine√°l a choinne√°il. I gc√°s <code>u8</code>, d√©antar an luach 256
0, √©ir√≠onn an luach 257 1, agus mar sin de. N√≠ bheidh an cl√°r scanraithe, ach beidh an
beidh luach ag an athr√≥g is d√≥cha nach √© an luach a raibh t√∫ ag s√∫il leis
bhfuil. Meastar gur earr√°id √© a bheith ag brath ar iompar fillte an tsl√°nuimhir thar maoil.</p>
<p>Chun an fh√©idearthacht r√≥-shreabhadh a l√°imhse√°il go sainr√°ite, is f√©idir leat na teaghlaigh seo a √∫s√°id
modhanna a shol√°thra√≠onn an leabharlann chaighde√°nach do chine√°lacha uimhri√∫la primitive:</p>
<ul>
<li>Wrap i ngach modh leis na modhanna <code>wrapping_*</code>, mar shampla <code>wrapping_add</code>.</li>
<li>Tabhair ar ais an luach <code>None</code> m√° t√° cur thar maoil leis na modhanna <code>checked_*</code>.</li>
<li>Tabhair ar ais an luach agus Boole ag cur in i√∫l an raibh cur thar maoil le
na modhanna <code>overflowing_*</code>.</li>
<li>S√°ithithe ag √≠osluachanna n√≥ uasluachanna an luacha leis an <code>saturating_*</code>
modhanna.</li>
</ul>
</blockquote>
<h4 id="cine√°lacha-sn√°mhphointe"><a class="header" href="#cine√°lacha-sn√°mhphointe">Cine√°lacha Sn√°mhphointe</a></h4>
<p>T√° dh√° chine√°l primitive ag Rust freisin le haghaidh <em>floating-point numbers</em>, is iad sin
uimhreacha le point√≠ deach√∫la. Is iad cine√°lacha sn√°mhphointe meirge n√° <code>f32</code> agus <code>f64</code>,
at√° 32 giot√°n agus 64 giot√°n i m√©id, faoi seach. Is √© an cine√°l r√©amhshocraithe <code>f64</code>
mar gheall ar LAPanna nua-aimseartha, t√° s√© thart ar an luas c√©anna le <code>f32</code> ach t√° s√© in ann
n√≠os cruinne. T√° gach cine√°l sn√°mhphointe s√≠nithe.</p>
<p>Seo sampla a thaispe√°nann uimhreacha sn√°mhphointe i ngn√≠omh:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}</code></pre></pre>
<p>L√©ir√≠tear uimhreacha sn√°mhphointe de r√©ir an chaighde√°in IEEE-754.  Is sn√°mhphointe aon-chruinneas √© an cine√°l <code>f32</code>, agus t√° cruinneas d√∫bailte ag <code>f64</code>.</p>
<h4 id="oibr√≠ochta√≠-uimhri√∫la"><a class="header" href="#oibr√≠ochta√≠-uimhri√∫la">Oibr√≠ochta√≠ Uimhri√∫la</a></h4>
<p>Taca√≠onn Rust leis na hoibr√≠ochta√≠ bun√∫sacha matamaitice a mbeife√° ag s√∫il leo don uimhir ar fad
cine√°lacha: suimi√∫, deal√∫, iolr√∫, roinnt, agus fu√≠lleach. Sl√°nuimhir
teascadh an rann√°n i dtreo n√°id go dt√≠ an tsl√°nuimhir is gaire. L√©ir√≠onn an c√≥d seo a leanas
conas a d‚Äô√∫s√°idfe√° gach oibr√≠ocht uimhri√∫il i r√°iteas <code>let</code>:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    // addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;
    let truncated = -5 / 3; // Results in -1

    // remainder
    let remainder = 43 % 5;
}</code></pre></pre>
<p>√ös√°ideann gach slonn sna r√°itis seo oibreoir matamaitice agus d√©anann s√© meast√≥ireacht
go luach aonair, at√° ceangailte ansin le hathr√≥g. <a href="appendix-02-operators.html">Aguis√≠n
B</a><!-- neamhaird --> t√° liosta de na hoibreoir√≠ go l√©ir a Rust
sol√°thra√≠onn.</p>
<h4 id="an-cine√°l-boole"><a class="header" href="#an-cine√°l-boole">An Cine√°l Boole</a></h4>
<p>Mar at√° i bhformh√≥r na dteangacha r√≠omhchl√°r√∫ch√°in eile, t√° dh√° fh√©idearthacht ag cine√°l Boole in Rust
luachanna: <code>true</code> agus <code>false</code>. Is beart amh√°in iad Booleans. An cine√°l Boole i
Sonra√≠tear meirge ag baint √∫s√°ide as <code>bool</code>. Mar shampla:</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let t = true;

    let f: bool = false; // with explicit type annotation
}</code></pre></pre>
<p>Is √© an pr√≠omhbhealach chun luachanna Boole a √∫s√°id n√° tr√≠ choinn√≠ollacha, mar <code>if</code>
l√©iri√∫. Cl√∫d√≥imid conas a oibr√≠onn nathanna <code>if</code> i Rust sa <a href="ch03-05-control-flow.html#control-flow">‚ÄúControl
Sreabhadh‚Äù</a><!-- neamhaird a dh√©anamh --> alt.</p>
<h4 id="an-cine√°l-carachtair"><a class="header" href="#an-cine√°l-carachtair">An Cine√°l Carachtair</a></h4>
<p>Is √© an cine√°l <code>char</code> Rust an cine√°l aib√≠tre is primit√≠bh√≠ sa teanga. Seo iad
roinnt sampla√≠ de luachanna <code>char</code> a dhearbh√∫:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let c = 'z';
    let z: char = '‚Ñ§'; // with explicit type annotation
    let heart_eyed_cat = 'üòª';
}</code></pre></pre>
<p>Tabhair faoi deara go sonraimid <code>char</code> litri√∫il le comhartha√≠ athfhriotail singil, seachas teaghr√°n
litri√∫il, a √∫s√°ideann Sleachta d√∫bailte. T√° cine√°l <code>char</code> Rust ceithre beart i m√©id agus
L√©ir√≠onn Luach Sc√°lar Unicode, rud a chialla√≠onn gur f√©idir leis a l√°n n√≠os m√≥ a l√©iri√∫ n√°
ach ASCII. Litreacha accented; Carachtair na S√≠ne, na Seap√°ine agus na C√≥ir√©; emoji;
agus is luachanna <code>char</code> bail√≠ iad sp√°sanna ar leithead nialasach i Rust. Sc√°lar Unicode
R√©imn√≠onn luachanna √≥ <code>U+0000</code> go <code>U+D7FF</code> agus <code>U+E000</code> go <code>U+10FFFF</code> san √°ireamh.
Mar sin f√©in, n√≠ coincheap in Unicode √© ‚Äúcarachtar‚Äù i nd√°ir√≠re, mar sin do dhuine
b'fh√©idir nach bhfuil an intuiscint maidir le cad is ‚Äúcarachtar‚Äù ann ag teacht leis an rud at√° i ‚Äòchar‚Äô
Meirge. D√©anfaimid an t-√°bhar seo a phl√© go mion i <a href="ch08-02-strings.html#storing-utf-8-encoded-text-with-strings">‚ÄúAg st√≥r√°il T√©acs Ionch√≥daithe UTF-8 le
Teaghr√°in‚Äù</a><!-- neamhaird --> i gCaibidil 8.</p>
<h3 id="cine√°lacha-comhdh√∫ile"><a class="header" href="#cine√°lacha-comhdh√∫ile">Cine√°lacha Comhdh√∫ile</a></h3>
<p>Is f√©idir le <em>Compound types</em> luachanna iolracha a ghr√∫p√°il i gcine√°l amh√°in. T√° dh√° cheann ag meirge
cine√°lacha cumaisc primitive: tuples agus eagair.</p>
<h4 id="an-cine√°l-tuple"><a class="header" href="#an-cine√°l-tuple">An Cine√°l Tuple</a></h4>
<p>Is bealach ginear√°lta √© A <em>tuple</em> chun l√≠on luachanna a ghr√∫p√°il le ch√©ile le a
√©ags√∫lacht cine√°lacha isteach i gcine√°l cumaisc amh√°in. T√° fad seasta ag tuples: uair amh√°in
dearbhaithe, n√≠ f√©idir leo f√°s n√≥ crapadh i m√©id.</p>
<p>Crutha√≠mid tuple tr√≠ liosta luachanna at√° scartha le cam√≥ga a scr√≠obh taobh istigh
l√∫ib√≠n√≠. T√° cine√°l ag gach seasamh sa tuple, agus cine√°lacha an
n√≠ g√° go mbeadh luachanna difri√∫la sa tuple mar an gc√©anna. Chuireamar roghnach leis
cl√≥scr√≠obh n√≥ta√≠ sa sampla seo:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}</code></pre></pre>
<p>Ceangla√≠onn an athr√≥g <code>tup</code> leis an tuple ioml√°n toisc go meastar tuple a
eilimint cumaisc amh√°in. Chun na luachanna aonair a bhaint as tuple, is f√©idir linn
bain √∫s√°id as meaitse√°il patr√∫n chun luach tuple a scrios, mar seo:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {y}");
}</code></pre></pre>
<p>Crutha√≠onn an cl√°r seo tuple ar dt√∫s agus ceangla√≠onn s√© leis an athr√≥g <code>tup</code>. T√° s√© ansin
√∫s√°ideann patr√∫n le <code>let</code> chun <code>tup</code> a ghlacadh agus √© a iomp√∫ ina thr√≠ ar leith
athr√≥ga, <code>x</code>, <code>y</code>, agus <code>z</code>. Tugtar <em>destructuring</em> air seo toisc go mbriseann s√©
an tuple aonair i dtr√≠ chuid. Ar deireadh, prionta√≠ an cl√°r luach na
<code>y</code>, at√° <code>6.4</code>.</p>
<p>Is f√©idir linn eilimint tuple a rochtain go d√≠reach freisin tr√≠ √∫s√°id a bhaint as tr√©imhse (<code>.</code>) ina dhiaidh sin
inn√©acs an luacha ba mhaith linn a rochtain. Mar shampla:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
}</code></pre></pre>
<p>Crutha√≠onn an cl√°r seo an <code>x</code> tuple agus ansin rochtain a fh√°il ar gach eilimint den tuple
ag baint √∫s√°ide as a n-inn√©acsanna faoi seach. Mar is amhlaidh le formh√≥r na dteangacha r√≠omhchl√°r√∫ch√°in, an ch√©ad cheann
Is √© 0 inn√©acs i tuple.</p>
<p>T√° ainm speisialta ar an tuple gan luachanna, <em>unit</em>. An luach seo agus a
t√° an d√° chine√°l comhfhreagrach scr√≠ofa <code>()</code> agus seasann siad do luach folamh n√≥ luach
cine√°l fillte folamh. Go hintuigthe tugann na habairt√≠ an luach aonaid ar ais mura nd√©anann siad
aon luach eile a thabhairt ar ais.</p>
<h4 id="an-cine√°l-eagar"><a class="header" href="#an-cine√°l-eagar">An Cine√°l Eagar</a></h4>
<p>Bealach eile le baili√∫ch√°n illuachanna a bheith agat is ea <em>array</em>. Murab ionann
tuple, n√≠ m√≥r go mbeadh an cine√°l c√©anna ag gach eilimint d'eagar. Murab ionann agus arrays i
roinnt teangacha eile, t√° fad seasta ag eagair i Rust.</p>
<p>Scr√≠obhaimid na luachanna in eagar mar liosta cam√≥g-scartha taobh istigh de chearn√≥g
l√∫ib√≠n√≠:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let a = [1, 2, 3, 4, 5];
}</code></pre></pre>
<p>B√≠onn eagair √∫s√°ideach nuair is mian leat do shonra√≠ a leithdh√°ileadh ar an gcruach, mar a ch√©ile
na cine√°lacha eile at√° feicthe againn go dt√≠ seo, seachas an gcarn (beidh muid ag pl√© na
chairn agus an gcarn n√≠os m√≥ i <a href="ch04-01-what-is-ownership.html#the-stack-and-the-heap">Caibidil 4</a><!-- neamhaird -->) n√≥ nuair
ba mhaith leat a chinnti√∫ go mb√≠onn l√≠on seasta eilimint√≠ agat i gc√≥na√≠. N√≠l eagar mar
sol√∫btha mar an cine√°l veicteora, √°fach. Is cine√°l baili√∫ch√°in den chine√°l c√©anna √© <em>veicteoir</em>
ar f√°il ag an leabharlann chaighde√°nach a <em>is</em> cead chun f√°s n√≥ crapadh i m√©id. M√°s rud √©
n√≠l t√∫ cinnte c√© acu eagar n√≥ veicteoir a √∫s√°id, seans gur cheart duit a
veicteoir. <a href="ch08-01-vectors.html">Caibidil 8</a> <!-- neamhaird --> pl√©itear veicteoir√≠ n√≠os mine.</p>
<p>Mar sin f√©in, t√° arrays n√≠os √∫s√°id√≠ nuair a fhios agat ar l√≠on na n-eilimint√≠ nach mbeidh
g√° a athr√∫. Mar shampla, m√° bh√≠ t√∫ ag baint √∫s√°ide as ainmneacha na m√≠osa i
r√≠omhchl√°r, is d√≥cha go n-√∫s√°idfe√° eagar seachas veicteoir mar is eol duit
beidh 12 eilimint ann i gc√≥na√≠:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let m√≠onna = ["Ean√°ir", "Feabhra", "M√°rta", "Aibre√°n", "Bealtaine", "Meitheamh", "I√∫il",
 "L√∫nasa", "Me√°n F√≥mhair", "Deireadh F√≥mhair", "Samhain", "Nollaig"];
<span class="boring">}</span></code></pre></pre>
<p>Scr√≠obhann t√∫ cine√°l eagar ag baint √∫s√°ide as l√∫ib√≠n√≠ cearnacha le cine√°l gach d√∫il,
leathstad, agus ansin l√≠on na n-eilimint√≠ san eagar, mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a: [i32; 5] = [1, 2, 3, 4, 5];
<span class="boring">}</span></code></pre></pre>
<p>Anseo, is √© <code>i32</code> an cine√°l gach eilimint. Tar √©is an leathstad, an uimhir <code>5</code>
L√©ir√≠onn an eagar go bhfuil c√∫ig eilimint.</p>
<p>Is f√©idir leat freisin eagar a th√∫s√∫ chun an luach c√©anna a bheith ann do gach eilimint tr√≠
ag sonr√∫ an luach tosaigh, agus leathstad ina dhiaidh sin, agus ansin fad
an t-eagar idir l√∫ib√≠n√≠ cearnacha, mar a thaispe√°ntar anseo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = [3; 5];
<span class="boring">}</span></code></pre></pre>
<p>San eagar darb ainm <code>a</code> beidh gn√©ithe <code>5</code> a shocr√≥far ar fad ar an luach
<code>3</code> ar dt√∫s. T√° s√© seo mar an gc√©anna le scr√≠obh <code>let a = [3, 3, 3, 3, 3];</code> ach in a
bhealach n√≠os gonta.</p>
<h5 id="rochtain-a-fh√°il-ar-eilimint√≠-eagar"><a class="header" href="#rochtain-a-fh√°il-ar-eilimint√≠-eagar">Rochtain a fh√°il ar Eilimint√≠ Eagar</a></h5>
<p>Is √©ard at√° in eagar n√° smut√°n amh√°in de chuimhne ar mh√©id aitheanta seasta agus is f√©idir a bheith
leithroinnte ar an chairn. Is f√©idir leat teacht ar eilimint√≠ d'eagar tr√≠ √∫s√°id a bhaint as inn√©acs√∫,
mar seo:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}</code></pre></pre>
<p>Sa sampla seo, gheobhaidh an athr√≥g darb ainm <code>first</code> an luach <code>1</code> mar sin
is √© an luach ag inn√©acs <code>[0]</code> san eagar. Gheobhaidh an athr√≥g darb ainm <code>second</code>
an luach <code>2</code> √≥n inn√©acs <code>[1]</code> san eagar.</p>
<h5 id="rochtain-neamhbhail√≠-ar-eilimint-eagar"><a class="header" href="#rochtain-neamhbhail√≠-ar-eilimint-eagar">Rochtain Neamhbhail√≠ ar Eilimint Eagar</a></h5>
<p>Feicfimid cad a tharl√≥idh m√° dh√©anann t√∫ iarracht rochtain a fh√°il ar eilimint d'eagar at√° caite
deireadh an eagar. Abair go ritheann t√∫ an c√≥d seo, cos√∫il leis an gcluiche buille faoi thuairim i
Caibidil 2, chun inn√©acs eagair a fh√°il √≥n √∫s√°ideoir:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore panics">use std::io;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println!("Please enter an array index.");

    let mut index = String::new();

    io::stdin()
        .read_line(&amp;mut index)
        .expect("Failed to read line");

    let index: usize = index
        .trim()
        .parse()
        .expect("Index entered was not a number");

    let element = a[index];

    println!("The value of the element at index {index} is: {element}");
}</code></pre>
<p>D'√©irigh leis an gc√≥d seo a thioms√∫. M√° ritheann t√∫ an c√≥d seo ag baint √∫s√°ide as <code>cargo run</code> agus
cuir isteach <code>0</code>, <code>1</code>, <code>2</code>,<code>3</code>, n√≥ <code>4</code>, priont√°lfaidh an cl√°r an ceann comhfhreagrach
luach ag an inn√©acs sin san eagar. M√° chuireann t√∫ isteach ina ionad sin uimhir thar dheireadh na
an eagar, mar <code>10</code>, feicfidh t√∫ aschur mar seo:</p>
<!-- manual-regeneration
cd listings/ch03-common-programming-concepts/no-listing-15-invalid-array-access
cargo run
10
-->
<pre><code class="language-console">thread 'main' panicked at src/main.rs:19:19:
index out of bounds: the len is 5 but the index is 10
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>Bh√≠ earr√°id <em>runtime</em> mar thoradh ar an gcl√°r nuair a √∫s√°ideadh neamhbhail√≠
luach san oibr√≠ocht inn√©acsaithe. Chuaigh an cl√°r amach le teachtaireacht earr√°ide agus
n√≠or rith an r√°iteas <code>println!</code> deiridh. Nuair a dh√©anann t√∫ iarracht rochtain a fh√°il ar
eilimint ag baint √∫s√°ide as inn√©acs√∫, seice√°lfaidh Rust go bhfuil an t-inn√©acs a shonraigh t√∫ n√≠os l√∫
n√° an fad eagar. M√° t√° an t-inn√©acs n√≠os m√≥ n√° n√≥ cothrom leis an fad,
Beidh meirge scaoll. Caithfidh an tseice√°il seo tarl√∫ ag am rite, go h√°irithe sa ch√°s seo,
mar n√≠ f√©idir a fhios ag an tiomsaitheoir c√©n luach a chuirfidh √∫s√°ideoir isteach nuair a bheidh s√©
rith an c√≥d n√≠os d√©ana√≠.</p>
<p>Is sampla √© seo de phrionsabail s√°bh√°ilteachta cuimhne Rust i ngn√≠omh. I go leor
teangacha √≠sealleibh√©il, n√≠ dh√©antar seice√°il den chine√°l seo, agus nuair a chuireann t√∫ seice√°il ar f√°il
inn√©acs m√≠cheart, is f√©idir rochtain a fh√°il ar chuimhne neamhbhail√≠. Cosna√≠onn meirge t√∫ ina choinne seo
cine√°l earr√°ide tr√≠ dhul amach l√°ithreach in ionad an rochtain chuimhne a chead√∫ agus
ag lean√∫int. Pl√©ann Caibidil 9 n√≠os m√≥ de l√°imhse√°il earr√°id√≠ Rust agus conas is f√©idir leat
scr√≠obh c√≥d inl√©ite, s√°bh√°ilte nach scaoll n√° nach gceada√≠onn rochtain neamhbhail√≠ ar chuimhne.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="feidhmeanna"><a class="header" href="#feidhmeanna">Feidhmeanna</a></h2>
<p>T√° feidhmeanna forleithne i gc√≥d Rust. T√° ceann de na cinn is m√≥ feicthe agat cheana f√©in
feidhmeanna t√°bhachtacha sa teanga: an <code>main</code>, is √© sin an iontr√°il
pointe go leor cl√°r. T√° an eochairfhocal <code>fn</code> feicthe agat freisin, a ligeann duit
feidhmeanna nua a dhearbh√∫.</p>
<p>√ös√°ideann c√≥d meirge <em>nathair c√°s</em> mar ghn√°thst√≠l feidhme agus athr√≥g
ainmneacha, ina bhfuil litreacha beaga go l√©ir agus ina gcuirtear b√©im ar fhocail ar leith.
Seo cl√°r ina bhfuil sainmh√≠ni√∫ ar fheidhm shamplach:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("Another function.");
}</code></pre></pre>
<p>Sainmh√≠n√≠mid feidhm i Rust tr√≠ <code>fn</code> a iontr√°il agus ainm feidhme agus a
sraith l√∫ib√≠n√≠. Ins√≠onn na l√∫ib√≠n√≠ cuartha don tiomsaitheoir c√° bhfuil an fheidhm
tosa√≠onn agus cr√≠ochna√≠onn an comhlacht.</p>
<p>Is f√©idir linn aon fheidhm at√° sainithe againn a ghlaoch tr√≠na hainm a chur isteach agus sraith ina dhiaidh
de l√∫ib√≠n√≠. Toisc go bhfuil <code>another_function</code> sainmh√≠nithe sa chl√°r, is f√©idir √© a bheith
ar a dtugtar √≥n taobh istigh den <code>main</code>. Tabhair faoi deara gur shainmh√≠n√≠omar <code>another_function</code>
<em>tar √©is</em> an fheidhm <code>main</code> sa ch√≥d foinse; d'fh√©adfaimis √© a shaini√∫ roimhe seo
chomh maith. Is cuma le Rust c√©n √°it a shain√≠onn t√∫ do chuid feidhmeanna, ach amh√°in go bhfuil siad
sainithe √°it √©igin i raon feidhme at√° le feice√°il ag an nglaoiteoir.</p>
<p>Cuirimis t√∫s le tionscadal d√©n√°rtha nua darb ainm <em>functions</em> chun feidhmeanna a ini√∫chadh
a thuilleadh. Cuir an sampla <code>another_function</code> i <em>src/main.rs</em> agus rith √©. tu
Ba ch√≥ir go bhfeicfeadh s√© an t-aschur seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.28s
     Running `target/debug/functions`
Hello, world!
Another function.
</code></pre>
<p>Feidhm√≠onn na l√≠nte san ord ina bhfuil siad le feice√°il sa <code>main</code>.
Ar dt√∫s an "Dia duit, domhan!" prionta√≠ an teachtaireacht, agus ansin tugtar <code>another_function</code>
agus t√° a theachtaireacht cl√≥bhuailte.</p>
<h3 id="paraim√©adair"><a class="header" href="#paraim√©adair">Paraim√©adair</a></h3>
<p>Is f√©idir linn feidhmeanna a shaini√∫ chun <em>parameters</em> a bheith acu, ar athr√≥ga speisialta iad sin
mar chuid de sh√≠ni√∫ feidhme. Nuair a bh√≠onn paraim√©adair ag feidhm, is f√©idir leat
luachanna nithi√∫la a shol√°thar d√≥ le haghaidh na bparaim√©adar sin. Go teicni√∫il, an coincr√©it
<em>arguments</em> a thugtar ar luachanna, ach i gcomhr√° √≥c√°ideach, is gn√°ch go n-√∫s√°ideann daoine
na focail <em>parameter</em> agus <em>argument</em> go hidirmhalartaithe do cheachtar na hathr√≥ga
i sainmh√≠ni√∫ feidhme n√≥ sna luachanna nithi√∫la a chuirtear isteach nuair a ghlaonn t√∫ ar a
feidhm.</p>
<p>Sa leagan seo de <code>another_function</code> cuirimid paraim√©adar leis:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    another_function(5);
}

fn another_function(x: i32) {
    println!("The value of x is: {x}");
}</code></pre></pre>
<p>Bain triail as an gcl√°r seo a rith; ba cheart duit an t-aschur seo a leanas a fh√°il:</p>
<pre><code class="language-console">$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.21s
     Running `target/debug/functions`
The value of x is: 5
</code></pre>
<p>T√° paraim√©adar amh√°in darb ainm <code>x</code> sa dearbh√∫ <code>another_function</code>. An cine√°l
Sonra√≠tear <code>x</code> mar <code>i32</code>. Nuair a thugaimid <code>5</code> isteach go <code>another_function</code>, beidh an
<code>println!</code> cuireann macra <code>5</code> san √°it a raibh an p√©ire l√∫ib√≠n√≠ cuartha ina raibh <code>x</code>
sa teaghr√°n form√°ide.</p>
<p>I s√≠nithe feidhm, <em>n√≠ m√≥r duit</em> cine√°l gach paraim√©adar a dhearbh√∫. T√° s√© seo
cinneadh d‚Äôaon ghn√≥ i ndearadh Rust: n√≥ta√≠ cl√≥ite a √©il√≠onn san fheidhm
sainmh√≠nithe cialla√≠onn an tiomsaitheoir beagnach riamh g√° duit iad a √∫s√°id in aon √°it eile
an c√≥d chun a dh√©anamh amach c√©n cine√°l at√° i gceist agat. T√° an tiomsaitheoir in ann a thabhairt freisin
teachtaireachta√≠ earr√°ide n√≠os cabhrach m√° t√° a fhios aige cad iad na cine√°lacha a bhfuil an fheidhm ag s√∫il leo.</p>
<p>Agus paraim√©adair iolracha √° saini√∫, deighil na dearbhuithe paraim√©adar le
cam√≥ga, mar seo:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    print_labeled_measurement(5, 'h');
}

fn print_labeled_measurement(value: i32, unit_label: char) {
    println!("The measurement is: {value}{unit_label}");
}</code></pre></pre>
<p>Crutha√≠onn an sampla seo feidhm darb ainm <code>print_labeled_measurement</code> le dh√° cheann
paraim√©adair. Tugtar <code>value</code> ar an gc√©ad pharaim√©adar agus is <code>i32</code> √©. Is √© an dara
darb ainm <code>unit_label</code> agus is cine√°l <code>char</code> √©. Ansin prionta√≠ an fheidhm t√©acs ina bhfuil
an <code>value</code> agus an <code>unit_label</code> araon.</p>
<p>D√©anaimis iarracht an c√≥d seo a rith. Ionadaigh an r√≠omhchl√°r at√° i do <em>functions</em> faoi l√°thair
comhad <em>src/main.rs</em> an tionscadail leis an sampla roimhe seo agus √© a rith ag baint √∫s√°ide as <code>cargo run</code>:</p>
<pre><code class="language-console">$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/functions`
The measurement is: 5h
</code></pre>
<p>Toisc gur thugamar an fheidhm le <code>5</code> mar luach <code>value</code> agus <code>' h'</code> mar
an luach le haghaidh <code>unit_label</code>, t√° na luachanna sin in aschur an chl√°ir.</p>
<h3 id="r√°itis-agus-l√©irithe"><a class="header" href="#r√°itis-agus-l√©irithe">R√°itis agus L√©irithe</a></h3>
<p>T√° comhlachta√≠ feidhme comhdh√©anta de shraith r√°iteas a chr√≠ochna√≠onn go roghnach le
l√©iri√∫. Go dt√≠ seo, n√≠or cuireadh deireadh leis na feidhmeanna at√° cl√∫daithe againn
abairt, ach t√° slonn feicthe agat mar chuid de r√°iteas. Toisc
Is teanga bunaithe ar chaint √≠ meirge, is idirdheal√∫ t√°bhachtach √© seo
thuiscint. N√≠l na hidirdheal√∫ c√©anna ag teangacha eile, mar sin breathaimis orthu
cad iad r√°itis agus nathanna cainte agus conas a th√©ann a ndifr√≠ochta√≠ i bhfeidhm ar na coirp
of feidhmeanna.</p>
<ul>
<li>Is treoracha iad <strong>R√°itis</strong> a dh√©anann gn√≠omh √©igin agus nach bhfilleann
luach.</li>
<li>D√©anann <strong>l√©irithe</strong> luach iarmhartach. Breathna√≠mid ar roinnt sampla√≠.</li>
</ul>
<p>T√° r√°itis agus nathanna cainte √∫s√°idte againn cheana f√©in. Athr√≥g a chruth√∫ agus
is r√°iteas √© luach a shannadh d√≥ leis an eochairfhocal <code>let</code>. I Liosta 3-1,
<code>let y = 6;</code> is r√°iteas √©.</p>
<Listing number="3-1" file-name="src/main.rs" caption="A `main` function declaration containing one statement">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let y = 6;
}</code></pre></pre>
</Listing>
<p>Is r√°itis iad sainmh√≠nithe feidhmeanna freisin; is √© an sampla ioml√°n roimhe seo a
r√°iteas ann f√©in. (Mar a fheicfimid th√≠os, n√≠ feidhm <em>calling</em> a
r√°iteas.)</p>
<p>N√≠ thugann r√°itis luachanna ar ais. Mar sin, n√≠ f√©idir leat r√°iteas <code>let</code> a shannadh
chuig athr√≥g eile, mar a dh√©anann an c√≥d seo a leanas iarracht; gheobhaidh t√∫ earr√°id:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let x = (let y = 6);
}</code></pre>
<p>Nuair a bheidh an cl√°r seo √° rith agat, beidh cuma mar seo ar an earr√°id a gheobhaidh t√∫:</p>
<pre><code class="language-console">$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
error: expected expression, found `let` statement
 --&gt; src/main.rs:2:14
  |
2 |     let x = (let y = 6);
  |              ^^^
  |
  = note: only supported directly in conditions of `if` and `while` expressions

warning: unnecessary parentheses around assigned value
 --&gt; src/main.rs:2:13
  |
2 |     let x = (let y = 6);
  |             ^         ^
  |
  = note: `#[warn(unused_parens)]` on by default
help: remove these parentheses
  |
2 -     let x = (let y = 6);
2 +     let x = let y = 6;
  |

warning: `functions` (bin "functions") generated 1 warning
error: could not compile `functions` (bin "functions") due to 1 previous error; 1 warning emitted
</code></pre>
<p>N√≠ thugann an r√°iteas <code>let y = 6</code> luach ar ais, mar sin n√≠l aon rud ann
<code>x</code> chun ceangal a dh√©anamh. T√° s√© seo difri√∫il √≥n m√©id a tharla√≠onn i dteangacha eile, mar
C agus Ruby, √°it a dtugann an tasc ar ais luach an taisc. Sna
teangacha, is f√©idir leat <code>x = y = 6</code> a scr√≠obh agus t√° an luach ag <code>x</code> agus <code>y</code> araon
<code>6</code>; n√≠ h√© sin an c√°s i Rust.</p>
<p>Meas√∫na√≠onn na habairt√≠ go luach agus is ionann iad agus an chuid is m√≥ den chuid eile den ch√≥d a
scr√≠obhfaidh t√∫ i Rust. Smaoinigh ar oibr√≠ocht matamaitice, mar <code>5 + 6</code>, at√° ina
slonn a dh√©anann luach√°il ar an luach <code>11</code>. Is f√©idir le habairt√≠ a bheith mar chuid de
r√°itis: i Liost√∫ 3-1, is √© an <code>6</code> sa r√°iteas <code>let y = 6;</code>
slonn a dh√©anann luach√°il ar an luach <code>6</code>. Is √©ard at√° i gceist le glaoch ar fheidhm n√°
l√©iri√∫. Is l√©iri√∫ √© macra a ghlaoch. Crutha√≠odh bloc sc√≥ip nua le
Is slonn √© l√∫ib√≠n√≠ curly, mar shampla:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let y = {
        let x = 3;
        x + 1
    };

    println!("The value of y is: {y}");
}</code></pre></pre>
<p>An slonn seo:</p>
<pre><code class="language-rust ignore">{
    let x = 3;
    x + 1
}</code></pre>
<p>is bloc √© a dh√©anann, sa ch√°s seo, meast√≥ireacht ar <code>4</code>. T√° an luach sin ceangailte le <code>y</code>
mar chuid den r√°iteas <code>let</code>. Tabhair faoi deara nach bhfuil a
leathstad ag an deireadh, rud nach ionann agus an chuid is m√≥ de na l√≠nte at√° feicthe agat go dt√≠ seo.
N√≠ fhola√≠onn na habairt√≠ dar cr√≠och leathchoil√≠n. M√° chuireann t√∫ leathstad go dt√≠ an deireadh
de slonn, d√©anann t√∫ r√°iteas √©, agus n√≠ fhillfidh s√© ansin a
luach. Coinnigh seo san √°ireamh agus t√∫ ag ini√∫chadh luachanna agus nathanna tuairisce√°in fheidhme
seo chugainn.</p>
<h3 id="feidhmeanna-le-luachanna-tuairisce√°in"><a class="header" href="#feidhmeanna-le-luachanna-tuairisce√°in">Feidhmeanna le Luachanna Tuairisce√°in</a></h3>
<p>Is f√©idir le feidhmeanna luachanna a chur ar ais chuig an gc√≥d a ghlaonn orthu. N√≠ thugaimid ainm ar ais
luachanna, ach n√≠ m√≥r d√∫inn a gcine√°l a dhearbh√∫ tar √©is saighead (<code>-&gt;</code>). I Rust, an
T√° luach aischuir na feidhme comhchiallach le luach an deiridh
l√©iri√∫ i mbloic an choirp feidhm. Is f√©idir leat filleadh go luath √≥ a
feidhmi√∫ tr√≠ √∫s√°id a bhaint as an eochairfhocal <code>return</code> agus luach a shonr√∫, ach an chuid is m√≥
filleann feidhmeanna an slonn deiridh go hintuigthe. Seo sampla de a
feidhm a thugann luach ar ais:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn five() -&gt; i32 {
    5
}

fn main() {
    let x = five();

    println!("The value of x is: {x}");
}</code></pre></pre>
<p>N√≠l aon ghlaonna feidhme, macra√≠, n√≥ fi√∫ r√°itis <code>let</code> sna <code>five</code>
feidhm - gan ach an uimhir <code>5</code> leis f√©in. Sin feidhm fh√≠or-bhail√≠ i
Meirge. Tabhair faoi deara go sonra√≠tear cine√°l aischuir na feidhme freisin, mar <code>-&gt; i32</code>. Bain triail as
an c√≥d seo a rith; ba cheart go mbeadh cuma mar seo ar an aschur:</p>
<pre><code class="language-console">$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/functions`
The value of x is: 5
</code></pre>
<p>Is √© an <code>5</code> i <code>five</code> luach aischuir na feidhme, agus sin an f√°th a bhfuil an cine√°l tuairisce√°in
t√° <code>i32</code>. D√©anaimis √© seo a scr√∫d√∫ n√≠os mine. T√° dh√° mh√≠r th√°bhachtacha ann:
ar dt√∫s, l√©ir√≠onn an l√≠ne <code>let x = five();</code> go bhfuil luach aischuir a
feidhm chun athr√≥g a th√∫s√∫. Toisc go dtugann an fheidhm <code>five</code> <code>5</code> ar ais,
is ionann an l√≠ne sin agus an m√©id seo a leanas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
<span class="boring">}</span></code></pre></pre>
<p>Sa dara h√°it, n√≠l aon pharaim√©adair ag an bhfeidhm <code>five</code> agus sainmh√≠n√≠onn s√© cine√°l an
luach ar ais, ach t√° an comhlacht ar an fheidhm a uaigneach <code>5</code> gan aon leathstad
mar is l√©iri√∫ √© ar mian linn a luach a thabhairt ar ais.</p>
<p>Breathna√≠mis ar shampla eile:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = plus_one(5);

    println!("The value of x is: {x}");
}

fn plus_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre></pre>
<p>M√° ritheann t√∫ an c√≥d seo, priont√°lfar <code>The value of x is: 6</code>. Ach m√° chuirimid a
leathstad ag deireadh na l√≠ne ina bhfuil <code>x + 1</code>, ag athr√∫ √≥ an
l√©iri√∫ ar r√°iteas, gheobhaidh muid earr√°id:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let x = plus_one(5);

    println!("The value of x is: {x}");
}

fn plus_one(x: i32) -&gt; i32 {
    x + 1;
}</code></pre>
<p>Crutha√≠onn an c√≥d seo earr√°id, mar a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
error[E0308]: mismatched types
 --&gt; src/main.rs:7:24
  |
7 | fn plus_one(x: i32) -&gt; i32 {
  |    --------            ^^^ expected `i32`, found `()`
  |    |
  |    implicitly returns `()` as its body has no tail or `return` expression
8 |     x + 1;
  |          - help: remove this semicolon to return this value

For more information about this error, try `rustc --explain E0308`.
error: could not compile `functions` (bin "functions") due to 1 previous error
</code></pre>
<p>Nochtann an phr√≠omhtheachtaireacht earr√°ide, <code>mismatched types</code>, an phr√≠omhcheist leis seo
c√≥d. Deir an sainmh√≠ni√∫ ar an bhfeidhm <code>plus_one</code> go dtabharfaidh s√© ar ais an
<code>i32</code>, ach n√≠ luach√°lann r√°itis go luach, a chuirtear in i√∫l le <code>()</code>,
an cine√°l aonaid. D√° bhr√≠ sin, n√≠ chuirtear aon rud ar ais, rud a thagann salach ar an bhfeidhm
sainmh√≠ni√∫ agus d√©antar earr√°id d√° bharr. San aschur seo, cuireann Rust teachtaireacht chuig
b'fh√©idir cabhr√∫ leis an tsaincheist seo a cheart√∫: molann s√© an leathstad a bhaint, a
dheisi√∫ an earr√°id.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tuairim√≠"><a class="header" href="#tuairim√≠">Tuairim√≠</a></h2>
<p>D√©anann gach r√≠omhchl√°raitheoir a nd√≠cheall a gc√≥d a dh√©anamh √©asca le tuiscint, ach uaireanta
t√° m√≠ni√∫ breise ag teast√°il. Sna c√°sanna seo, f√°gann r√≠omhchl√°raitheoir√≠ <em>comments</em> isteach
a gc√≥d foinse nach nd√©anfaidh an tiomsaitheoir neamhaird air ach daoine ag l√©amh na foinse
d'fh√©adfadh go mbeadh c√≥d √∫s√°ideach.</p>
<p>Seo tr√°cht simpl√≠:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// hello, world
<span class="boring">}</span></code></pre></pre>
<p>I Rust, cuireann an st√≠l tr√°chtaireacht idiotach t√∫s le tr√°cht le dh√° slais, agus an
leanann tr√°cht ar aghaidh go dt√≠ deireadh na l√≠ne. Le haghaidh tuairim√≠ a th√©ann thar a
l√≠ne shingil, beidh ort <code>//</code> a chur san √°ireamh ar gach l√≠ne, mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Mar sin t√°imid ag d√©anamh rud casta anseo, fada go leor agus a theasta√≠onn uainn
// l√≠nte iolracha de thuairim√≠ chun √© a dh√©anamh! Whew! T√° s√∫il agam go nd√©anfaidh an tr√°cht seo
// m√≠nigh cad at√° ar si√∫l.
<span class="boring">}</span></code></pre></pre>
<p>Is f√©idir tuairim√≠ a chur freisin ag deireadh l√≠nte ina bhfuil c√≥d:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let lucky_number = 7; // I‚Äôm feeling lucky today
}</code></pre></pre>
<p>Ach feicfidh t√∫ n√≠os minice iad a √∫s√°id san fhorm√°id seo, leis an tr√°cht ar a
l√≠ne ar leith os cionn an ch√≥id at√° √° n√≥t√°il aige:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    // I‚Äôm feeling lucky today
    let lucky_number = 7;
}</code></pre></pre>
<p>T√° tr√°cht de chine√°l eile ag Rust freisin, tuairim√≠ doicim√©adaithe, a dh√©anfaimid
pl√©igh san <a href="ch14-02-publishing-to-crates-io.html">‚ÄúCliathbhosca a Fhoilsi√∫ go cliathbhosca√≠.io‚Äù</a><!-- ignore -->
alt de Chaibidil 14.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sreabhadh-rialaithe"><a class="header" href="#sreabhadh-rialaithe">Sreabhadh Rialaithe</a></h2>
<p>An cumas roinnt c√≥d a rith ag brath ar cib√© an bhfuil coinn√≠oll <code>true</code> agus go
re√°cht√°il roinnt c√≥d ar√≠s agus ar√≠s eile c√© go bhfuil coinn√≠oll <code>true</code> mar bhunchlocha t√≥g√°la
i bhformh√≥r na dteangacha r√≠omhchl√°r√∫ch√°in. Na constructs is coitianta a ligeann duit a rial√∫
is ionann sreabhadh forghn√≠omhaithe an ch√≥id Rust agus <code>if</code> nathanna agus l√∫ba.</p>
<h3 id="if-nathanna"><a class="header" href="#if-nathanna"><code>if</code> Nathanna</a></h3>
<p>Ligeann slonn <code>if</code> duit do ch√≥d a chraobhscaoileadh ag brath ar choinn√≠ollacha. tu
cuir coinn√≠oll ar f√°il agus ansin luaigh, ‚ÄúM√° sh√°sa√≠tear an coinn√≠oll seo, rith an bloc seo
de ch√≥d. Mura gcomhl√≠ontar an coinn√≠oll, n√° rith an bloc c√≥d seo."</p>
<p>Cruthaigh tionscadal nua darb ainm <em>branches</em> i d‚Äôeolaire <em>projects</em> le fiosr√∫
an abairt <code>if</code>. Sa chomhad <em>src/main.rs</em>, cuir an m√©id seo a leanas isteach:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let number = 3;

    if number &lt; 5 {
        println!("condition was true");
    } else {
        println!("condition was false");
    }
}</code></pre></pre>
<p>Tosa√≠onn gach nathanna <code>if</code> leis an eochairfhocal <code>if</code>, agus coinn√≠oll ina dhiaidh sin. I
sa ch√°s seo, seice√°lann an riocht cib√© an bhfuil n√≥ nach bhfuil ag an <code>number</code> athr√≥g
luach n√≠os l√∫ n√° 5. Cuirimid an bloc c√≥d a fhorghn√≠omh√∫ m√° t√° an coinn√≠oll
<code>true</code> d√≠reach tar √©is an riocht taobh istigh de l√∫ib√≠n√≠ curly. Bloic c√≥d
a bhaineann leis na coinn√≠ollacha i <code>if</code> tugtar <em>arms</em> uaireanta ar na habairt√≠,
d√≠reach cos√∫il leis na hairm sna habairt√≠ <code>match</code> a phl√©amar sa <a href="ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number">‚ÄúCompar√°id
an Buille faoi thuairim leis an Uimhir R√∫nda‚Äù</a><!--
neamhaird a dh√©anamh ar --> alt de Chaibidil 2.</p>
<p>Roghnach, is f√©idir linn slonn <code>else</code> a chur san √°ireamh freisin, rud a roghnaigh muid a dh√©anamh
anseo, chun bloc eile de ch√≥d a thabhairt don chl√°r le forghn√≠omh√∫ m√° t√° an
riocht luach√°il go <code>false</code>. Mura dtugann t√∫ slonn <code>else</code> agus
is √© an coinn√≠oll <code>false</code>, n√≠ dh√©anfaidh an cl√°r ach an bloc <code>if</code> a scipe√°il agus bogadh ar aghaidh
go dt√≠ an ch√©ad ph√≠osa eile de ch√≥d.</p>
<p>Bain triail as an gc√≥d seo a rith; ba cheart duit an t-aschur seo a leanas a fheice√°il:</p>
<pre><code class="language-console">$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/branches`
condition was true
</code></pre>
<p>D√©anaimid iarracht luach <code>number</code> a athr√∫ go luach a dh√©anann an riocht
<code>false</code> f√©achaint cad a tharla√≠onn:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main() {
</span>    let number = 7;
<span class="boring">
</span><span class="boring">    if number &lt; 5 {
</span><span class="boring">        println!("condition was true");
</span><span class="boring">    } else {
</span><span class="boring">        println!("condition was false");
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>Rith an cl√°r ar√≠s, agus f√©ach ar an aschur:</p>
<pre><code class="language-console">$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/branches`
condition was false
</code></pre>
<p>Is fi√∫ a thabhairt faoi deara freisin go gcaithfidh an coinn√≠oll sa ch√≥d seo <em>a bheith</em> ina <code>bool</code>. M√°s rud √©
n√≠ <code>bool</code> √© an coinn√≠oll, gheobhaidh muid earr√°id. Mar shampla, bain triail as ag rith an
c√≥d seo a leanas:</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let number = 3;

    if number {
        println!("number was three");
    }
}</code></pre>
<p>Measann an riocht <code>if</code> go luach <code>3</code> an uair seo, agus caitheann Rust an
earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
error[E0308]: mismatched types
 --&gt; src/main.rs:4:8
  |
4 |     if number {
  |        ^^^^^^ expected `bool`, found integer

For more information about this error, try `rustc --explain E0308`.
error: could not compile `branches` (bin "branches") due to 1 previous error
</code></pre>
<p>L√©ir√≠onn an earr√°id go raibh Rust ag s√∫il le <code>bool</code> ach go bhfuair s√© sl√°nuimhir. Murab ionann agus
teangacha ar n√≥s Ruby agus JavaScript, n√≠ dh√©anfaidh Rust iarracht go huathoibr√≠och √©
cine√°lacha neamh-Boolean a thiont√∫ go Boole. Caithfidh t√∫ a bheith follasach agus a chur ar f√°il i gc√≥na√≠
<code>if</code> le Boole mar a riocht. M√°s mian linn an bloc c√≥d <code>if</code> a rith
ach amh√°in nuair nach bhfuil uimhir cothrom le <code>0</code>, mar shampla, is f√©idir linn an <code>if</code> a athr√∫
l√©iri√∫ ar an m√©id seo a leanas:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let number = 3;

    if number != 0 {
        println!("number was something other than zero");
    }
}</code></pre></pre>
<p>M√° re√°cht√°lann t√∫ an c√≥d seo, priont√°lfar <code>number was something other than zero</code>.</p>
<h4 id="l√°imhse√°il-coinn√≠ollacha-il-le-else-if"><a class="header" href="#l√°imhse√°il-coinn√≠ollacha-il-le-else-if">L√°imhse√°il Coinn√≠ollacha Il le <code>else if</code></a></h4>
<p>Is f√©idir leat coinn√≠ollacha iolracha a √∫s√°id tr√≠ <code>if</code> agus <code>else</code> a chur le ch√©ile i <code>else if</code>
l√©iri√∫. Mar shampla:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}</code></pre></pre>
<p>T√° ceithre chos√°n f√©ideartha ag an gcl√°r seo ar f√©idir leis a ghlacadh. Tar √©is √© a rith, ba ch√≥ir duit
f√©ach an t-aschur seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/branches`
number is divisible by 3
</code></pre>
<p>Nuair a fheidhm√≠onn an cl√°r seo, seice√°lann s√© gach slonn <code>if</code> ar a seal agus ritheann s√©
an ch√©ad chorp a nd√©anann an riocht meast√≥ireacht air go <code>true</code>. Tabhair faoi deara go fi√∫
c√© go bhfuil 6 inroinnte ar 2, n√≠ fheicimid go bhfuil an  <code>number is divisible by 2</code>,
agus n√≠ fheicimid nach bhfuil an <code>number is not divisible by 4, 3, or 2</code> t√©acs as an <code>else</code>
bloc. Sin toisc nach nd√©anann Rust ach an bloc a fhorghn√≠omh√∫ don ch√©ad <code>true</code>
riocht, agus nuair a fhaigheann s√© ceann, n√≠ seice√°lann s√© fi√∫ an chuid eile.</p>
<p>Ag baint √∫s√°ide as an iomarca <code>else if</code> nathanna is f√©idir do ch√≥d tranglam, mar sin m√° t√° n√≠os m√≥ agat
seachas ceann amh√°in, b'fh√©idir gur mhaith leat do ch√≥d a athfhacht√≥iri√∫. D√©anann Caibidil 6 cur s√≠os ar chumhachtach
T√≥g√°il branching Rust ar a dtugtar <code>match</code> do na c√°sanna seo.</p>
<h4 id="ag-baint-√∫s√°ide-if-i-r√°iteas-let"><a class="header" href="#ag-baint-√∫s√°ide-if-i-r√°iteas-let">Ag baint √∫s√°ide <code>if</code> i R√°iteas <code>let</code></a></h4>
<p>Toisc gur slonn √© <code>if</code>, is f√©idir linn √© a √∫s√°id ar thaobh na l√°imhe deise de <code>let</code>
r√°iteas chun an toradh a shannadh d‚Äôathr√≥g, mar at√° i Liost√∫ 3-2.</p>
<Listing number="3-2" file-name="src/main.rs" caption="Ag sannadh toradh slonn `if` d'athr√≥g">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };

    println!("The value of number is: {number}");
}</code></pre></pre>
</Listing>
<p>Beidh an athr√≥g <code>number</code> ceangailte de r√©ir luach a bheidh bunaithe ar thoradh an <code>if</code>
l√©iri√∫. Rith an c√≥d seo chun a fheice√°il cad a tharla√≠onn:</p>
<pre><code class="language-console">$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/branches`
The value of number is: 5
</code></pre>
<p>Cuimhnigh go bhfuil bloic de ch√≥d a mheas go dt√≠ an slonn deiridh iontu, agus
is nathanna cainte iad uimhreacha leo f√©in freisin. Sa ch√°s seo, luach an
ioml√°n <code>if</code> abairt ar an bloc c√≥d a fhorghn√≠omh√∫. Cialla√≠onn s√© seo an
n√≠ m√≥r luachanna a d'fh√©adfadh a bheith ina dtortha√≠ √≥ gach g√©ag den <code>if</code>
an cine√°l c√©anna; i Liosta 3-2, t√° tortha√≠ an l√°mh <code>if</code> agus an <code>else</code> araon
l√°mh bh√≠ sl√°nuimhreacha <code>i32</code>. M√° t√° na cine√°lacha m√≠mheaitse√°la, mar at√° sa mh√©id seo a leanas
mar shampla, gheobhaidh muid earr√°id:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let condition = true;

    let number = if condition { 5 } else { "six" };

    println!("The value of number is: {number}");
}</code></pre>
<p>Nuair a dh√©anaimid iarracht an c√≥d seo a thioms√∫, gheobhaidh muid earr√°id. Na l√°mha <code>if</code> agus <code>else</code>
t√° cine√°lacha luacha neamh-chomhoiri√∫nacha acu, agus l√©ir√≠onn Rust go d√≠reach c√° h√°it le
aimsigh an fhadhb sa chl√°r:</p>
<pre><code class="language-console">$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
error[E0308]: `if` and `else` have incompatible types
 --&gt; src/main.rs:4:44
  |
4 |     let number = if condition { 5 } else { "six" };
  |                                 -          ^^^^^ expected integer, found `&amp;str`
  |                                 |
  |                                 expected because of this

For more information about this error, try `rustc --explain E0308`.
error: could not compile `branches` (bin "branches") due to 1 previous error
</code></pre>
<p>D√©anann an slonn sa bhloc <code>if</code> luach√°il go sl√°nuimhir, agus an slonn i
d√©anann an bloc <code>else</code> luach√°il go teaghr√°n. N√≠ oibreoidh s√© seo mar n√≠ m√≥r athr√≥ga
bhfuil cine√°l amh√°in, agus n√≠ m√≥r Rust a fhios ag an am le ch√©ile c√©n cine√°l an
Is √©ard at√° in athr√≥g <code>number</code>, go cinntitheach. √ìs eol an cine√°l <code>number</code> ligeann an
tiomsaitheoir a fh√≠or√∫ go bhfuil an cine√°l bail√≠ i ngach √°it a √∫s√°idimid <code>number</code>. N√≠ bheadh Rust
in ann √© sin a dh√©anamh d√° gcinnf√≠ an cine√°l <code>number</code> ag am rite amh√°in; an
bheadh tiomsaitheoir n√≠os casta agus dh√©anfadh s√© n√≠os l√∫ r√°tha√≠ochta√≠ faoin gc√≥d
d√° mbeadh air s√∫il a choinne√°il ar ilchine√°lacha hipit√©iseach d‚Äôathr√≥g ar bith.</p>
<h3 id="athr√°-le-l√∫banna"><a class="header" href="#athr√°-le-l√∫banna">Athr√° le L√∫banna</a></h3>
<p>Is minic a bh√≠onn s√© √∫s√°ideach bloc c√≥d a rith n√≠os m√≥ n√° uair amh√°in. Don tasc seo,
Sol√°thra√≠onn Rust roinnt <em>loops</em>, a rithfidh tr√≠d an gc√≥d taobh istigh den l√∫b
comhlacht go dt√≠ deireadh agus ansin tos√∫ l√°ithreach ar ais ag an t√∫s. Chun triail
le l√∫ba, d√©anaimis tionscadal nua darb ainm <em>loops</em>.</p>
<p>T√° tr√≠ chine√°l l√∫b ag Rust: <code>loop</code>, <code>while</code> agus <code>for</code>. D√©anaimis iarracht gach ceann acu.</p>
<h4 id="c√≥d-√°-athr√°-le-loop"><a class="header" href="#c√≥d-√°-athr√°-le-loop">C√≥d √° athr√° le <code>loop</code></a></h4>
<p>Ins√≠onn an eochairfhocal <code>loop</code> do Rust bloc c√≥d a fhorghn√≠omh√∫ ar√≠s agus ar√≠s eile
go deo n√≥ go dt√≠ go n-ins√≠onn t√∫ go sainr√°ite √© stopadh.</p>
<p>Mar shampla, athraigh an comhad <em>src/main.rs</em> i do eolaire <em>loops</em> chun breathn√∫
mar seo:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore">fn main() {
    loop {
        println!("again!");
    }
}</code></pre>
<p>Agus an cl√°r seo √° rith againn, feicfidh muid <code>again!</code> √° phriont√°il ar√≠s agus ar√≠s eile
go dt√≠ go stopfaimid an cl√°r de l√°imh. Taca√≠onn an chuid is m√≥ de na cr√≠ochfoirt leis an aicearra m√©archl√°ir
<kbd>ctrl</kbd> - <kbd>c</kbd> chun cur isteach ar r√≠omhchl√°r at√° i bhfost√∫ go lean√∫nach
l√∫b. Bain triail as:</p>
<!-- athghini√∫int de l√°imh
liosta√≠ cd/ch03-common-programming-concepts/gan-liost√∫-32-l√∫b
rith lasta
CTRL-C
-->
<pre><code class="language-console">$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.08s
     Running `target/debug/loops`
again!
again!
again!
again!
^Cagain!
</code></pre>
<p>L√©ir√≠onn an tsiombail <code>^C</code> an √°it ar bhr√∫igh t√∫ <kbd>ctrl</kbd> - <kbd>c</kbd>. tu
b'fh√©idir n√≥ b'fh√©idir nach bhfeicfidh s√© an focal <code>again!</code> i gcl√≥ tar √©is an <code>^C</code>, ag brath ar an √°it
bh√≠ an c√≥d sa l√∫b nuair a fuair s√© an comhartha idirbhriste.</p>
<p>Go fortunately, sol√°thra√≠onn Rust bealach freisin chun briseadh amach as l√∫b ag baint √∫s√°ide as c√≥d. tu
Is f√©idir leis an eochairfhocal <code>break</code> a chur laistigh den l√∫b chun a insint don chl√°r cathain a stopfaidh s√©
an l√∫b a fhorghn√≠omh√∫. Thabhairt chun cuimhne go ndearna muid √© seo sa chluiche buille faoi thuairim sa
<a href="ch02-00-guessing-game-tutorial.html#quitting-after-a-correct-guess">‚ÄúAg Scoir Tar √©is Buille Cheart‚Äù</a><!-- d√©an neamhaird
--> alt de Chaibidil 2 a fh√°g√°il ar an gcl√°r nuair a bhuaigh an t-√∫s√°ideoir an cluiche tr√≠
an uimhir cheart a thomhas.</p>
<p>Bhaineamar √∫s√°id freisin as <code>continue</code> sa chluiche buille faoi thuairim, rud a ins√≠onn an cl√°r i l√∫b
chun dul thar aon ch√≥d at√° f√°gtha san atriall seo den l√∫b agus t√©igh go dt√≠ an
an ch√©ad atriall eile.</p>
<h4 id="luachanna-ag-filleadh-√≥-l√∫banna"><a class="header" href="#luachanna-ag-filleadh-√≥-l√∫banna">Luachanna Ag Filleadh √≥ L√∫banna</a></h4>
<p>Ceann de na h√∫s√°id√≠ a bhaineann le <code>loop</code> is ea triail eile a bhaint as oibr√≠ocht a bhfuil a fhios agat go bhf√©adfadh go dteipfeadh uirthi, mar sin
le seice√°il an bhfuil a phost cr√≠ochnaithe ag sn√°ithe. Seans go mbeidh ort pas a fh√°il freisin
toradh na hoibr√≠ochta sin amach as an l√∫b go dt√≠ an chuid eile de do ch√≥d. A dh√©anamh
seo, is f√©idir leat an luach a theasta√≠onn uait a chur ar ais tar √©is an slonn <code>break</code> t√∫
√∫s√°id chun an l√∫b a stopadh; cuirfear an luach sin ar ais as an l√∫b ionas gur f√©idir leat
bain √∫s√°id as, mar a thaispe√°ntar anseo:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };

    println!("The result is {result}");
}</code></pre></pre>
<p>Roimh an l√∫b, dearbha√≠mid athr√≥g darb ainm <code>counter</code> agus cuirimid t√∫s leis
<code>0</code>. Ansin dearbha√≠mid athr√≥g darb ainm <code>result</code> chun an luach a tugadh ar ais uaidh a choinne√°il
an l√∫b. Ar gach atriall den l√∫b, cuirimid <code>1</code> leis an athr√≥g <code>counter</code>,
agus ansin seice√°il an bhfuil an <code>counter</code> cothrom le <code>10</code>. Nuair a bh√≠onn s√©, √∫s√°idimid an
eochairfhocal <code>break</code> leis an luach <code>counter * 2</code>. Tar √©is an l√∫b, √∫s√°idimid a
leathstad chun deireadh a chur leis an r√°iteas a sannann an luach do <code>result</code>. Ar deireadh, t√°imid
priont√°il an luach i <code>result</code>, at√° sa ch√°s seo <code>20</code>.</p>
<p>Is f√©idir leat <code>return</code> √≥n taobh istigh de l√∫b freisin. C√© nach n-im√≠onn <code>break</code> ach as an sruth
l√∫b, f√°gann <code>return</code> an fheidhm reatha i gc√≥na√≠.</p>
<h4 id="lip√©id-l√∫b-le-d√≠r√©imni√∫-idir-l√∫banna-il"><a class="header" href="#lip√©id-l√∫b-le-d√≠r√©imni√∫-idir-l√∫banna-il">Lip√©id L√∫b le D√≠r√©imni√∫ Idir l√∫banna Il</a></h4>
<p>M√° t√° l√∫ba laistigh de l√∫ba agat, beidh feidhm ag <code>break</code> agus <code>continue</code> ar aghaidh chuig an gceann is faide istigh
l√∫b ar an bpointe sin. Is f√©idir leat <em>loop label</em> a shonr√∫ go roghnach ar l√∫b a
is f√©idir leat a √∫s√°id ansin le <code>break</code> n√≥ <code>continue</code> chun a shonr√∫ go bhfuil na heochairfhocail
cuir i bhfeidhm ar an l√∫b lip√©adaithe in ionad na l√∫b is faide istigh. N√≠ m√≥r t√∫s a chur le lip√©id l√∫b
le ceangl√≥far amh√°in. Seo sampla le dh√° l√∫b neadaithe:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {count}");
        let mut remaining = 10;

        loop {
            println!("remaining = {remaining}");
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {count}");
}</code></pre></pre>
<p>T√° an lip√©ad <code>'counting_up</code>' ar an l√∫b seachtrach, agus comhairfidh s√© suas √≥ 0 go 2.
Comhaireamh an l√∫b istigh gan lip√©ad s√≠os √≥ 10 go 9. An ch√©ad <code>break</code> sin
N√≠ shonra√≠tear lip√©ad scoirfidh s√© den l√∫b inmhe√°nach amh√°in. An <code>break 'counting_up;</code> scoirfidh r√°iteas an l√∫b seachtrach. Priont√°lann an c√≥d seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.58s
     Running `target/debug/loops`
count = 0
remaining = 10
remaining = 9
count = 1
remaining = 10
remaining = 9
count = 2
remaining = 10
End count = 2
</code></pre>
<h4 id="l√∫b-choinn√≠ollach-le-while"><a class="header" href="#l√∫b-choinn√≠ollach-le-while">L√∫b Choinn√≠ollach le <code>while</code></a></h4>
<p>Is minic go gcaithfidh cl√°r riocht laistigh de l√∫b a mheas. C√© go bhfuil an
T√° an coinn√≠oll <code>true</code>, ritheann an l√∫b. Nuair a scoireann an riocht de bheith <code>true</code>, beidh an
Glaonn an cl√°r <code>break</code>, ag stopadh an l√∫b. Is f√©idir iompar a chur i bhfeidhm
mar seo ag baint √∫s√°ide as measc√°n de <code>loop</code>, <code>if</code>, <code>else</code>, agus <code>break</code>; d'fh√©adfadh t√∫
bain triail as sin anois i gcl√°r, m√°s mian leat. Mar sin f√©in, t√° an patr√∫n seo chomh coitianta
go bhfuil t√≥g√°il teanga ionsuite ag Rust d√≥, ar a dtugtar l√∫b <code>while</code>. I
Ag liost√∫ 3-3, bainimid √∫s√°id as <code>while</code> chun an cl√°r a l√∫badh tr√≠ huaire, ag comhaireamh s√≠os gach ceann acu
am, agus ansin, tar √©is an l√∫b, a phriont√°il teachtaireacht agus scoir.</p>
<Listing number="3-3" file-name="src/main.rs" caption="√ös√°id l√∫b `while` chun c√≥d a rith agus coinn√≠oll f√≥s f√≠or">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("LIFTOFF!!!");
}</code></pre></pre>
</Listing>
<p>Cuireann an t√≥g√°il seo deireadh le go leor neadaithe a bheadh riachtanach d√° mbainfe√° √∫s√°id as
<code>loop</code>, <code>if</code>, <code>else</code>, agus <code>break</code>, agus t√° s√© n√≠os soil√©ire. C√© go coinn√≠oll
meast√≥ireacht go <code>true</code>, ritheann an c√≥d; ar shl√≠ eile, scoireann s√© an l√∫b.</p>
<h4 id="ag-dul-tr√≠-bhaili√∫ch√°n-le-for"><a class="header" href="#ag-dul-tr√≠-bhaili√∫ch√°n-le-for">Ag dul tr√≠ Bhaili√∫ch√°n le <code>for</code></a></h4>
<p>Is f√©idir leat an t√≥g√°il <code>while</code> a √∫s√°id freisin chun na heilimint√≠ de a
bhaili√∫, mar shampla eagar. Mar shampla, prionta√≠ an l√∫b i Liost√∫ 3-4 an ceann
eilimint san eagar <code>a</code>.</p>
<Listing number="3-4" file-name="src/main.rs" caption="Ag dul tr√≠ gach eilimint de bhaili√∫ch√°n ag √∫s√°id l√∫b `while`">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index &lt; 5 {
        println!("the value is: {}", a[index]);

        index += 1;
    }
}</code></pre></pre>
</Listing>
<p>Anseo, d√©antar an c√≥d a chomhaireamh tr√≠ na heilimint√≠ san eagar. Tosa√≠onn s√© ag inn√©acs
<code>0</code>, agus l√∫bann s√© ansin go dt√≠ go sroicheann s√© an t-inn√©acs deiridh san eagar (is √© sin,
nuair nach bhfuil <code>index &lt; 5</code> a thuilleadh <code>true</code>). M√° ritheann t√∫ an c√≥d seo, d√©anfar gach
eilimint san eagar:</p>
<pre><code class="language-console">$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.32s
     Running `target/debug/loops`
the value is: 10
the value is: 20
the value is: 30
the value is: 40
the value is: 50
</code></pre>
<p>T√° na c√∫ig luach eagair ar fad le feice√°il sa teirmin√©al, mar a bh√≠othas ag s√∫il leis. C√© go bhfuil <code>index</code>
Beidh teacht ar luach <code>5</code> ag pointe √©igin, stopann an l√∫b forghn√≠omhaitheach roimh iarraidh
an s√©√∫ luach a fh√°il √≥n eagar.</p>
<p>Mar sin f√©in, t√° an cur chuige seo seans maith go hearr√°id√≠; d‚Äôfh√©adfaimis scaoll a chur ar an gcl√°r d√° mba rud √©
t√° an luach inn√©acs n√≥ an riocht t√°st√°la m√≠cheart. Mar shampla, m√° d'athraigh t√∫ an
sainmh√≠ni√∫ ar an eagar <code>a</code> a bheith ceithre eilimint ach dearmad a thabhairt cothrom le d√°ta an
coinn√≠oll go <code>while index &lt; 4</code>, bheadh an c√≥d scaoll. T√° s√© mall freisin, mar gheall ar
cuireann an tiomsaitheoir c√≥d ama rite leis chun an tseice√°il choinn√≠ollach a dh√©anamh an bhfuil an
t√° an t-inn√©acs laistigh de theorainneacha an eagar ar gach atriall tr√≠d an l√∫b.</p>
<p>Mar rogha eile n√≠os gonta, is f√©idir leat l√∫b <code>for</code> a √∫s√°id agus c√≥d √©igin a fhorghn√≠omh√∫
do gach earra i mbaili√∫ch√°n. Breathna√≠onn l√∫b <code>for</code> cos√∫il leis an gc√≥d i Liost√∫ 3-5.</p>
<Listing number="3-5" file-name="src/main.rs" caption="Ag l√∫badh tr√≠ gach eilimint de bhaili√∫ch√°n ag baint √∫s√°ide as l√∫b `for`">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
}</code></pre></pre>
</Listing>
<p>Agus an c√≥d seo √° rith againn, feicfidh muid an t-aschur c√©anna agus at√° i Liost√∫ 3-4. Tuilleadh
rud is t√°bhachta√≠, t√°imid tar √©is s√°bh√°ilteacht an ch√≥id a mh√©ad√∫ anois agus deireadh a chur le
seans fabhtanna a d'fh√©adfadh a bheith mar thoradh ar dhul n√≠os faide n√° deireadh na sraithe n√≥ nach bhfuil
ag dul fada go leor agus roinnt m√≠reanna ar iarraidh.</p>
<p>Ag baint √∫s√°ide as an l√∫b <code>for</code>, n√≠ bheadh ort cuimhneamh ar aon ch√≥d eile a athr√∫ m√°s rud √©
d'athraigh t√∫ l√≠on na luachanna san eagar, mar a dh√©anf√° leis an modh
a √∫s√°idtear i Liosta 3-4.</p>
<p>Mar gheall ar sh√°bh√°ilteacht agus beacht na l√∫b <code>for</code> is iad an l√∫b is coitianta a √∫s√°idtear
T√≥g√°il i Rust. Fi√∫ i gc√°sanna inar mian leat a rith roinnt c√≥d a
l√≠on √°irithe uaireanta, mar at√° sa sampla comhaireamh s√≠os a d'√∫s√°id l√∫b <code>while</code>
i Liosta 3-3, d'√∫s√°idfeadh formh√≥r na Rustaceans l√∫b <code>for</code>. An bealach chun √© sin a dh√©anamh
√∫s√°id a bhaint as <code>Range</code>, a shol√°thra√≠onn an leabharlann chaighde√°nach, a ghineann
gach uimhir in ord ag tos√∫ √≥ uimhir amh√°in agus ag cr√≠ochn√∫ roimh uimhir eile
uimhir.</p>
<p>Seo an chuma a bheadh ar an gcomhaireamh s√≠os ag baint √∫s√°ide as l√∫b <code>for</code> agus modh eile
n√≠or labhair muid faoi go f√≥ill, <code>rev</code>, chun an raon a aisiomp√∫:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}</code></pre></pre>
<p>T√° an c√≥d seo beag√°n n√≠os deise, nach ea?</p>
<h2 id="achoimre-2"><a class="header" href="#achoimre-2">Achoimre</a></h2>
<p>Rinne t√∫ √©! Ba chaibidil shuntasach √≠ seo: d‚Äôfhoghlaim t√∫ faoi athr√≥ga, sc√°lach
agus cine√°lacha sonra√≠ cumaisc, feidhmeanna, tuairim√≠, nathanna <code>if</code>, agus l√∫ba! Chuig
cleachtadh leis na coincheapa a phl√©itear sa chaibidil seo, bain triail as cl√°ir a th√≥g√°il chun
d√©an an m√©id seo a leanas:</p>
<ul>
<li>Tiontaigh teochta√≠ idir Fahrenheit agus Celsius.</li>
<li>Gin an <em>n</em>√∫ uimhir Fibonacci.</li>
<li>Priont√°il na liric√≠ don char√∫l Nollag ‚ÄúThe Twelve Day of Christmas,‚Äù
ag baint leasa as an athr√° san amhr√°n.</li>
</ul>
<p>Nuair a bheidh t√∫ r√©idh le bogadh ar aghaidh, labhr√≥imid faoi choincheap i Rust nach <em>n√≠ dh√©anann</em>
at√° ann go coitianta i dteangacha r√≠omhchl√°r√∫ch√°in eile: √∫in√©ireacht.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="√öin√©ireacht-a-thuiscint"><a class="header" href="#√öin√©ireacht-a-thuiscint">√öin√©ireacht a Thuiscint</a></h1>
<p>Is √≠ √∫in√©ireacht an ghn√© is uath√∫la de Rust agus t√° impleachta√≠ doimhne aici don chuid eile
den teanga. Cuireann s√© ar chumas Rust r√°tha√≠ochta√≠ s√°bh√°ilteachta cuimhne a dh√©anamh gan
g√° le bailitheoir truflais, mar sin t√° s√© t√°bhachtach a thuiscint conas √∫in√©ireacht
oibr√≠onn. Sa chaibidil seo, labhr√≥imid faoi √∫in√©ireacht chomh maith le roinnt gaolmhar
gn√©ithe: iasachta√≠ocht, slisn√≠, agus conas a leagann Rust sonra√≠ amach sa chuimhne.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cad-is-√öin√©ireacht-ann"><a class="header" href="#cad-is-√öin√©ireacht-ann">Cad is √öin√©ireacht ann?</a></h2>
<p>Is sraith rialacha √© <em>√öin√©ireacht</em> a riala√≠onn conas a bhainist√≠onn cl√°r Rust cuimhne.
Caithfidh gach cl√°r an bealach a √∫s√°ideann siad cuimhne r√≠omhaire a bhainisti√∫ agus iad ag rith.
T√° baili√∫ch√°n truflais ag teangacha √°irithe nach n-√∫s√°idtear a thuilleadh go minic
cuimhne de r√©ir mar a ritheann an cl√°r; i dteangacha eile, n√≠ m√≥r don r√≠omhchl√°raitheoir go sainr√°ite
an chuimhne a leithdh√°ileadh agus a shaoradh. √ös√°ideann Rust an tr√≠√∫ cur chuige: d√©antar cuimhne a bhainisti√∫
tr√≠ ch√≥ras √∫in√©ireachta le sraith rialacha a sheice√°lann an tiomsaitheoir. M√°s rud √©
s√°ra√≠tear aon cheann de na rialacha, n√≠ thioms√≥idh an cl√°r. N√≠l aon cheann de na gn√©ithe
Cuirfidh √∫in√©ireachta moill ar do chl√°r agus √© ar si√∫l.</p>
<p>Toisc gur coincheap nua √≠ √∫in√©ireacht do go leor r√≠omhchl√°raitheoir√≠, t√≥gann s√© roinnt ama
dul i dtaith√≠ ar. Is √© an dea-sc√©al n√° d√° mh√©ad taith√≠ a √©ir√≠onn t√∫ le Rust
agus rialacha an ch√≥rais √∫in√©ireachta, is amhlaidh is fusa duit go n√°d√∫rtha √©
c√≥d a fhorbairt at√° s√°bh√°ilte agus √©ifeachtach. Coinnigh ort!</p>
<p>Nuair a thuigeann t√∫ √∫in√©ireacht, beidh bun√∫s l√°idir tuisceana agat
na gn√©ithe a dh√©anann Rust uath√∫il. Sa chaibidil seo, foghlaimeoidh t√∫ √∫in√©ireacht tr√≠
ag obair tr√≠ roinnt sampla√≠ a dh√≠r√≠onn ar strucht√∫r sonra√≠ an-choitianta:
teaghr√°in.</p>
<blockquote>
<h3 id="an-cruach-agus-an-charn"><a class="header" href="#an-cruach-agus-an-charn">An Cruach agus an Charn</a></h3>
<p>N√≠ √©il√≠onn go leor teangacha r√≠omhchl√°raithe duit smaoineamh ar an gcruach agus ar an
carn go minic. Ach i dteanga r√≠omhchl√°r√∫ch√°in c√≥rais mar Rust, cib√© acu a
t√° luach ar an gcruach n√≥ b√≠onn tionchar ag an gcarn ar iompar na teanga agus c√©n f√°th
caithfidh t√∫ cinnt√≠ √°irithe a dh√©anamh. D√©anfar cur s√≠os ar chodanna √∫in√©ireachta i
maidir leis an chruach agus leis an gcarn n√≠os d√©ana√≠ sa chaibidil seo, mar sin seo achoimre
m√≠ni√∫ √° ullmh√∫.</p>
<p>Is codanna cuimhne iad an cruach agus an chairn araon at√° ar f√°il do do ch√≥d a √∫s√°id
ag am rite, ach t√° siad strucht√∫rtha ar bheala√≠ √©ags√∫la. St√≥r√°lann an cruach luachanna
san ord a fhaigheann s√© iad agus baintear na luachanna san ord eile. Tagra√≠tear d√≥ seo
mar <em>an ceann deireanach isteach, an ch√©ad cheann amach</em>. Smaoinigh ar cruach de
pl√°ta√≠: nuair a chuireann t√∫ n√≠os m√≥ pl√°ta√≠ isteach, cuireann t√∫ iad ar bharr an chairn, agus cathain
teasta√≠onn pl√°ta uait, t√≥gann t√∫ ceann den bharr. N√≠ oibreodh s√© chomh maith pl√°ta√≠
a chur leis n√≥ a bhaint den l√°r n√≥ √≥n mbun! Tugtar _pushing ar shonra√≠ a chur leis
isteach ar an cruach, agus tugtar <em>popping as an cruach</em> ar na sonra√≠ a bhaint. Gach
n√≠ m√≥r m√©id seasta aitheanta a bheith ag sonra√≠ at√° st√≥r√°ilte ar an chruach. Sonra√≠ le anaithnid
n√≠ m√≥r m√©id ag am tiomsaithe n√≥ m√©id a d'fh√©adfadh athr√∫ a st√≥r√°il ar an gcarn
ina ionad.</p>
<p>N√≠l an carn chomh eagraithe: nuair a chuireann t√∫ sonra√≠ ar an gcarn, iarrann t√∫ a
m√©id √°irithe sp√°is. Aims√≠onn an leithdh√°ileadh cuimhne spota folamh sa charn
at√° m√≥r go leor, marc√°lann s√© go bhfuil s√© in √∫s√°id, agus cuireann s√© <em>pointer</em> ar ais, a bhfuil
is √© seoladh an tsu√≠mh sin. Tugtar <em>leithdh√°ileadh ar an bpr√≥iseas seo
heap</em> agus d√©antar √© a ghiorr√∫ uaireanta mar <em>leithroinnt</em> (luachanna a bhr√∫ ar
n√≠ mheastar go leithdh√°ileann an chruach). Toisc gurb √© an pointeoir chuig an gcarn a
ar a dtugtar, m√©id seasta, is f√©idir leat an pointeoir a st√≥r√°il ar an gcruach, ach nuair is mian leat
na sonra√≠ iarbh√≠r, n√≠ m√≥r duit an pointeoir a lean√∫int. Smaoinigh ar a bheith ina su√≠ ag a
bialann. Nuair a th√©ann t√∫ isteach, luann t√∫ l√≠on na ndaoine i do ghr√∫pa, agus
aims√≠onn an t-√≥stach t√°bla folamh a oireann do gach duine agus a threora√≠onn t√∫ ann. M√°s rud √©
tagann duine √©igin i do ghr√∫pa d√©anach, f√©adfaidh siad fiafra√≠ de c√° bhfuil t√∫ i do shu√≠
fhaigheann t√∫.</p>
<p>T√° br√∫ ar an chairn n√≠os tap√∫la n√° mar a leithdh√°ileadh ar an gcarn mar gheall ar an
n√≠ g√° don leithdh√°ileoir √°it a chuardach le sonra√≠ nua a st√≥r√°il; go bhfuil an su√≠omh sin
i gc√≥na√≠ ag barr an chruach. I gcompar√°id, sp√°s a leithdh√°ileadh ar an gcarn
teasta√≠onn tuilleadh oibre mar n√≠ m√≥r don leithroinnt sp√°s m√≥r go leor a aimsi√∫ ar dt√∫s
na sonra√≠ a choinne√°il agus ansin leabharchoime√°d a dh√©anamh chun ullmh√∫ don ch√©ad cheann eile
leithdh√°ileadh.</p>
<p>T√° rochtain ar shonra√≠ sa charn n√≠os moille n√° rochtain a fh√°il ar shonra√≠ ar an gcruach toisc
caithfidh t√∫ pointeoir a lean√∫int le dul ann. T√° pr√≥ise√°laithe comhaimseartha n√≠os tap√∫la
m√° l√©imeann siad timpeall n√≠os l√∫ sa chuimhne. Ag lean√∫int leis an anala√≠, a mheas ar fhreastala√≠
ag bialann ag glacadh orduithe √≥ go leor t√°bla√≠. T√° s√© is √©ifeachta√≠ a fh√°il
na horduithe go l√©ir ag bord amh√°in sula dt√©ann t√∫ ar aghaidh go dt√≠ an ch√©ad t√°bla eile. Ag tabhairt an
ord√∫ √≥ th√°bla A, ansin ord√∫ √≥ th√°bla B, ansin ceann √≥ A ar√≠s, agus
ansin bheadh pr√≥iseas ceann as B ar√≠s i bhfad n√≠os moille. Ar an gcaoi ch√©anna, a
is f√©idir le pr√≥ise√°la√≠ a chuid oibre a dh√©anamh n√≠os fearr m√° oibr√≠onn s√© ar shonra√≠ at√° gar do shonra√≠ eile
sonra√≠ (mar at√° s√© ar an chruach) seachas n√≠os faide ar shi√∫l (mar is f√©idir √© a bheith ar an
gcarn).</p>
<p>Nuair a ghlaonn do ch√≥d feidhm, aistr√≠tear na luachanna isteach san fheidhm
(lena n-√°ir√≠tear, f√©ideartha, leideanna do shonra√≠ ar an gcarn) agus na feidhmeanna
br√∫itear athr√≥ga √°iti√∫la isteach sa chruach. Nuair a bh√≠onn an fheidhm thart, iad si√∫d
laghda√≠tear luachanna as an gcruach.</p>
<p>S√∫il a choinne√°il ar cad iad na codanna den ch√≥d a √∫s√°ideann na sonra√≠ ar an gcarn,
an m√©id sonra√≠ d√∫blacha ar an gcarn a √≠oslaghd√∫, agus glanadh suas nach bhfuil in √∫s√°id
is fadhbanna leis an √∫in√©ireacht iad sonra√≠ ar an gcarn ionas nach n-im√≠onn t√∫ as sp√°s
seolta√≠. Nuair a thuigeann t√∫ √∫in√©ireacht, n√≠ bheidh ort smaoineamh ar an
Stack agus an gcarn go minic, ach a fhios agam go bhfuil an pr√≠omhchusp√≥ir √∫in√©ireachta
Is f√©idir le sonra√≠ carn a bhainisti√∫ cuidi√∫ a mh√≠ni√∫ c√©n f√°th a n-oibr√≠onn s√© mar a oibr√≠onn s√©.</p>
</blockquote>
<h3 id="rialacha-√öin√©ireachta"><a class="header" href="#rialacha-√öin√©ireachta">Rialacha √öin√©ireachta</a></h3>
<p>Ar dt√∫s, d√©anaimis f√©achaint ar na rialacha √∫in√©ireachta. Coinnigh na rialacha seo i gcuimhne agus muid
obair tr√≠ na sampla√≠ a l√©ir√≠onn iad:</p>
<ul>
<li>T√° <em>√∫in√©ir</em> ag gach luach i Rust.</li>
<li>N√≠ f√©idir ach √∫in√©ir amh√°in a bheith ann ag an am.</li>
<li>Nuair a th√©ann an t-√∫in√©ir as raon feidhme, beidh an luach a thit.</li>
</ul>
<h3 id="sc√≥ip-athr√≥g"><a class="header" href="#sc√≥ip-athr√≥g">Sc√≥ip Athr√≥g</a></h3>
<p>Anois agus muid imithe thart ar chomhr√©ir bhun√∫sach Rust, n√≠ chuirfimid gach <code>fn main() {</code> san √°ireamh
c√≥d i sampla√≠, mar sin m√° t√° t√∫ ag lean√∫int chomh maith, d√©an cinnte a chur ar an m√©id seo a leanas
sampla√≠ taobh istigh d'fheidhm <code>main</code> de l√°imh. Mar thoradh air sin, beidh √°r sampla√≠ a
beag√°n n√≠os gonta, ag ligean d√∫inn d√≠ri√∫ ar na sonra√≠ iarbh√≠r seachas
c√≥d pl√°ta coire.</p>
<p>Mar ch√©ad shampla d‚Äô√∫in√©ireacht, f√©achfaimid ar <em>sc√≥ip</em> roinnt athr√≥g. A
raon feidhme is ea an raon laistigh de chl√°r a bhfuil m√≠r bail√≠ d√≥. T√≥g an
athr√≥g seo a leanas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = "hello";
<span class="boring">}</span></code></pre></pre>
<p>Tagra√≠onn an athr√≥g <code>s</code> do teaghr√°n litri√∫il, √°it a bhfuil luach na sreinge
hardcoded isteach i dt√©acs √°r gcl√°r. T√° an athr√≥g bail√≠ √≥n bpointe ag
at√° dearbhaithe go dt√≠ deireadh an <em>sc√≥ip</em> reatha. L√©ir√≠onn liost√∫ 4-1 a
cl√°r le n√≥ta√≠ tr√°chta ag cur in i√∫l c√° h√°it a mbeadh an athr√≥g <code>s</code> bail√≠.</p>
<Listing number="4-1" caption="A variable and the scope in which it is valid">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    {                      // s is not valid here, it‚Äôs not yet declared
        let s = "hello";   // s is valid from this point forward

        // do stuff with s
    }                      // this scope is now over, and s is no longer valid
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>I bhfocail eile, t√° dh√° phointe t√°bhachtacha ama anseo:</p>
<ul>
<li>Nuair a thagann <code>s</code> <em>isteach</em> sa raon feidhme, b√≠onn s√© bail√≠.</li>
<li>Fanann s√© bail√≠ go dt√≠ go dt√©ann s√© <em>as</em> sc√≥ip.</li>
</ul>
<p>Ag an bpointe seo, t√° an gaol idir scopes agus nuair a athr√≥ga bail√≠
cos√∫il leis sin i dteangacha r√≠omhchl√°r√∫ch√°in eile. Anois cuirfimid leis seo
a thuiscint tr√≠d an gcine√°l <code>String</code> a thabhairt isteach.</p>
<h3 id="an-cine√°l-string"><a class="header" href="#an-cine√°l-string">An Cine√°l <code>String</code></a></h3>
<p>Chun na rialacha √∫in√©ireachta a l√©iri√∫, n√≠ m√≥r d√∫inn cine√°l sonra√≠ at√° n√≠os casta
n√° iad si√∫d at√° cl√∫daithe againn sa <a href="ch03-02-data-types.html#data-types">‚ÄúCine√°lacha Sonra√≠‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt
de Chaibidil 3. T√° na cine√°lacha a cl√∫da√≠odh roimhe seo de mh√©id aitheanta, is f√©idir iad a st√≥r√°il
ar an chruach agus popped as an chairn nuair a bh√≠onn a raon feidhme thart, agus is f√©idir a bheith
a ch√≥ipe√°il go tapa agus go f√°nach chun c√°s nua neamhsple√°ch a dh√©anamh
caithfidh cuid de ch√≥d an luach c√©anna a √∫s√°id i raon feidhme difri√∫il. Ach ba mhaith linn
f√©ach ar na sonra√≠ at√° st√≥r√°ilte ar an gcarn agus fiosraigh conas a bh√≠onn a fhios ag Rust cathain
glan suas na sonra√≠ sin, agus is sampla iontach √© an cine√°l <code>String</code>.</p>
<p>D√≠reoimid ar na codanna de <code>String</code> a bhaineann le h√∫in√©ireacht. iad seo
baineann gn√©ithe freisin le cine√°lacha sonra√≠ casta eile, cib√© acu a shol√°thra√≠onn
an leabharlann chaighde√°nach n√≥ cruthaithe agat. D√©anfaimid pl√© n√≠os doimhne ar <code>String</code>
<a href="ch08-02-strings.html">Caibidil 8</a><!-- neamhaird a dh√©anamh -->.</p>
<p>T√° teaghlitreacha feicthe againn cheana f√©in, √°it a bhfuil luach teaghr√°n c√≥daithe go crua isteach in√°r
cl√°r. T√° litreacha teaghr√°in √°isi√∫il, ach n√≠l siad oiri√∫nach do gach ceann acu
staid ina mb'fh√©idir gur mhaith linn t√©acs a √∫s√°id. C√∫is amh√°in n√° go bhfuil siad
dochorraithe. Rud eile n√° nach f√©idir gach luach teaghr√°n a bheith ar eolas agus muid ag scr√≠obh
√°r gc√≥d: mar shampla, cad m√° theasta√≠onn uainn ionchur √∫s√°ideora a ghlacadh agus √© a st√≥r√°il? Le haghaidh
sna c√°sanna seo, t√° an dara cine√°l teaghr√°n ag Rust, <code>String</code>. Bainist√≠onn an cine√°l seo
sonra√≠ a leithdh√°iltear ar an gcarn agus mar sin t√° s√© in ann m√©id t√©acs a st√≥r√°il a
is eol d√∫inn ag am tiomsaithe. Is f√©idir leat <code>String</code> a chruth√∫ as teaghr√°n
litri√∫il ag baint √∫s√°ide as an bhfeidhm <code>√≥</code>, mar sin:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hello");
<span class="boring">}</span></code></pre></pre>
<p>Ceada√≠onn an t-oibreoir idirstad d√∫bailte <code>::</code> d√∫inn an <code>√≥</code> √°irithe seo a sp√°s√°il
feidhmi√∫ faoin gcine√°l <code>String</code> seachas √∫s√°id a bhaint as ainm de shaghas √©igin mar
<code>string_from</code>. D√©anfaimid an chomhr√©ir seo a phl√© n√≠os m√≥ sa <a href="ch05-03-method-syntax.html#method-syntax">‚ÄúModh
Comhr√©ir‚Äù</a><!-- ignore --> alt de Chaibidil 5, agus nuair a labhair muid
faoi ‚Äã‚Äãsp√°s√°il ainmneacha le mod√∫il i <a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html">‚ÄúCos√°in chun tagairt a dh√©anamh do mh√≠r sa
Crann an Mhod√∫il‚Äù</a><!-- ignore --> i gCaibidil 7.</p>
<p>Is f√©idir an cine√°l seo t√©ad <em>is f√©idir</em> a mutadh:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s = String::from("hello");

    s.push_str(", world!"); // push_str() appends a literal to a String

    println!("{s}"); // This will print `hello, world!`
<span class="boring">}</span></code></pre></pre>
<p>Mar sin, cad √© an difr√≠ocht anseo? C√©n f√°th gur f√©idir <code>String</code> a shaobhadh ach go litri√∫il
n√≠ f√©idir? Is √© an difr√≠ocht sa chaoi a nd√©ile√°lann an d√° chine√°l seo le cuimhne.</p>
<h3 id="cuimhne-agus-leithdh√°ileadh"><a class="header" href="#cuimhne-agus-leithdh√°ileadh">Cuimhne agus Leithdh√°ileadh</a></h3>
<p>I gc√°s teaghr√°n litri√∫il, t√° a fhios againn an t-√°bhar ag am tiomsaithe, mar sin an
t√° an t√©acs c√≥daithe go d√≠reach isteach sa inrite deiridh. Sin √© an f√°th teaghr√°n
t√° litri√∫il tapa agus √©ifeachtach. Ach n√≠ thagann na hair√≠onna seo ach √≥n sreang
neamh-inaistritheacht litri√∫il. Ar an drochuair, n√≠ f√©idir linn blob cuimhne a chur isteach sa
d√©n√°rtha do gach p√≠osa t√©acs nach bhfuil a mh√©id anaithnid ag an am tiomsaithe agus c√© leis
seans go n-athr√≥idh an m√©id agus an cl√°r √° rith.</p>
<p>Leis an gcine√°l <code>String</code>, chun taca√≠ocht a thabhairt do ph√≠osa t√©acs inaistrithe, infh√°s,
n√≠ m√≥r d√∫inn m√©id cuimhne a leithdh√°ileadh ar an gcarn, anaithnid ag am tiomsaithe,
an t-√°bhar a shealbh√∫. Cialla√≠onn s√© seo:</p>
<ul>
<li>N√≠ m√≥r an chuimhne a iarraidh ar an leithdh√°ileadh cuimhne ag am rite.</li>
<li>Teasta√≠onn bealach uainn leis an gcuimhne seo a thabhairt ar ais don leithroinnt nuair a bheidh s√© cr√≠ochnaithe againn
√°r <code>String</code>.</li>
</ul>
<p>D√©anaimid an ch√©ad chuid sin: nuair a ghlaoimid <code>String::from</code>, a chur i bhfeidhm
iarrann s√© an chuimhne at√° de dh√≠th air. T√° s√© seo go leor uil√≠och i gcl√°ir
teangacha.</p>
<p>Mar sin f√©in, t√° an dara cuid difri√∫il. I dteangacha le bailitheoir <em>truflais
(GC)</em>, coinn√≠onn an GC s√∫il agus glanann s√© cuimhne nach bhfuil in √∫s√°id
a thuilleadh, agus n√≠ g√° d√∫inn smaoineamh faoi. I bhformh√≥r na dteangacha gan GC,
t√° s√© de fhreagracht orainne a aithint nuair nach bhfuil cuimhne √° h√∫s√°id a thuilleadh agus chun
c√≥d glaonna chun √© a shaoradh go sainr√°ite, d√≠reach mar a rinneamar chun √© a iarraidh. Ag d√©anamh seo
i gceart bh√≠ fadhb r√≠omhchl√°raithe deacair go stairi√∫il. M√° dh√©anaimid dearmad,
caithfimid cuimhne. M√° dh√©anaimid √© r√≥-luath, beidh athr√≥g neamhbhail√≠ againn. M√°s rud √©
d√©anaimid faoi dh√≥ √©, sin fabht freisin. Caithfimid <code>allocate</code> amh√°in a ph√©ire√°il leis
D√≠reach ceann amh√°in <code>free</code>.</p>
<p>B√≠onn cos√°n difri√∫il ag meirge: cuirtear an chuimhne ar ais go huathoibr√≠och nuair a bh√≠onn an
t√©ann athr√≥g ar leis √© as raon feidhme. Seo leagan d√°r sampla sc√≥ip
√≥ Liost√∫ 4-1 ag baint √∫s√°ide as <code>String</code> in ionad teaghr√°n litri√∫il:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    {
        let s = String::from("hello"); // s is valid from this point forward

        // do stuff with s
    }                                  // this scope is now over, and s is no
                                       // longer valid
<span class="boring">}</span></code></pre></pre>
<p>T√° pointe n√°d√∫rtha ann inar f√©idir linn an chuimhne a theasta√≠onn √≥ √°r <code>String</code> a thabhairt ar ais
don leithroinnt: nuair a th√©ann <code>s</code> as an sc√≥ip. Nuair a th√©ann athr√≥g amach as
raon feidhme, glaonna Rust feidhm speisialta d√∫inn. Tugtar an fheidhm seo
<a href="../std/ops/trait.Drop.html#tymethod.drop"><code>drop</code></a> <!-- ignore -->, agus seo an √°it ar f√©idir le h√∫dar <code>String</code> a chur
an c√≥d chun an chuimhne a thabhairt ar ais. Glaonn Rust <code>drop</code> go huathoibr√≠och ag an d√∫nadh
l√∫ib√≠n chatach.</p>
<blockquote>
<p>N√≥ta: In C++, an patr√∫n seo chun acmhainn√≠ a aimsi√∫ ag deireadh m√≠re
uaireanta tugtar <em>Tionscnamh um Fh√°il Acmhainn√≠ (RAII)</em> ar an saolr√©.
Beidh eolas agat ar an bhfeidhm <code>drop</code> i Rust m√° d'√∫s√°id t√∫ RAII
patr√∫in.</p>
</blockquote>
<p>B√≠onn tionchar as cuimse ag an bpatr√∫n seo ar an mbealach a scr√≠obhtar c√≥d Meirge. F√©adfaidh s√© cos√∫il
simpl√≠ anois, ach is f√©idir iompar c√≥d a bheith gan choinne i n√≠os m√≥
c√°sanna casta nuair is mian linn athr√≥ga iolracha a bheith againn √∫s√°id na sonra√≠
at√° leithdh√°ilte againn ar an gcarn. D√©anaimis ini√∫chadh ar roinnt de na c√°sanna sin anois.</p>
<!-- Old heading. Do not remove or links may break. -->
<p><a id="ways-variables-and-data-interact-move"></a></p>
<h4 id="athr√≥ga-agus-sonra√≠-ag-idirghn√≠omh√∫-le-bog"><a class="header" href="#athr√≥ga-agus-sonra√≠-ag-idirghn√≠omh√∫-le-bog">Athr√≥ga agus Sonra√≠ ag Idirghn√≠omh√∫ le Bog</a></h4>
<p>Is f√©idir le hathr√≥ga iolracha idirghn√≠omh√∫ leis na sonra√≠ c√©anna ar bheala√≠ √©ags√∫la i Rust.
Breathna√≠mid ar shampla ag baint √∫s√°ide as sl√°nuimhir i Liost√∫ 4-2.</p>
<Listing number="4-2" caption="Assigning the integer value of variable `x` to `y`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 5;
    let y = x;
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is d√≥cha gur f√©idir linn buille faoi thuairim a dh√©anamh ar a bhfuil √° dh√©anamh seo: ‚Äúceannaigh an luach <code>5</code> le <code>x</code>; d√©an ansin
c√≥ip den luach in <code>x</code> agus ceangail le <code>y</code> √©." T√° dh√° athr√≥g againn anois, <code>x</code>
agus <code>y</code>, agus an d√° chomhionann <code>5</code>. T√° s√© seo go deimhin cad at√° ag tarl√∫, mar gheall ar sl√°nuimhreacha
is luachanna simpl√≠ iad le m√©id seasta aitheanta, agus d√©antar an d√° luach <code>5</code> seo a bhr√∫
isteach sa chruach.</p>
<p>Breathna√≠mis anois ar an leagan <code>String</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s1 = String::from("hello");
    let s2 = s1;
<span class="boring">}</span></code></pre></pre>
<p>Breathna√≠onn s√© seo an-chos√∫il, agus mar sin d'fh√©adfaimis glacadh leis gurb √© an bealach a oibr√≠onn s√©
c√©anna: is √© sin, dh√©anfadh an dara l√≠ne c√≥ip den luach i <code>s1</code> agus ceangail
√© go <code>s2</code>. Ach n√≠ h√© seo a tharla√≠onn go hioml√°n.</p>
<p>Breathnaigh ar F√≠or 4-1 chun a fheice√°il cad at√° ag tarl√∫ do <code>String</code> faoi na
cl√∫daigh. T√° tr√≠ chuid i <code>String</code>, l√©irithe ar chl√©: pointeoir chuig
an chuimhne a choinn√≠onn inneachar na t√©ad, fad, agus toilleadh.
St√≥r√°iltear an gr√∫pa sonra√≠ seo ar an chruach. Ar dheis t√° an chuimhne ar an
carn a shealbha√≠onn an t-√°bhar.</p>
<p><img alt="Dh√° t√°bla: sa ch√©ad t√°bla t√° l√©iri√∫ s1 ar an
stack, arb √© at√° ann a fhad (5), toilleadh (5), agus pointeoir chuig an gc√©ad cheann
luach sa dara t√°bla. Sa dara t√°bla t√° l√©iri√∫ an
sonra√≠ teaghr√°n ar an gcarn, beart le beart." src="img/trpl04-01.svg" class="center"
style="width: 50%;" /></p>
<p><span class="caption">F√≠or 4-1: L√©iri√∫ i gcuimhne ar <code>String</code>
a bhfuil an luach <code>"hello"</code> faoi cheangal go <code>s1</code></span></p>
<p>Is √© an fad n√° c√© mh√©ad cuimhne, i mbearta, at√° inneachar an <code>String</code>
ag baint √∫s√°ide as faoi l√°thair. Is √© an toilleadh an m√©id ioml√°n de chuimhne, i mbeart, go bhfuil an
T√° <code>String</code> faighte √≥n leithdh√°ilteoir. An difr√≠ocht idir fad agus
c√∫rsa√≠ acmhainne, ach n√≠ sa chomhth√©acs seo, mar sin go f√≥ill, t√° s√© ceart neamhaird a dh√©anamh
acmhainn.</p>
<p>Nuair a shannaimid <code>s1</code> do <code>s2</code>, d√©antar na sonra√≠ <code>String</code> a ch√≥ipe√°il, rud a chialla√≠onn go nd√©anaimid c√≥ip den
pointeoir, an fad, agus an toilleadh at√° ar an gcruach. N√≠ ch√≥ipe√°ilimid an
sonra√≠ ar an gcarn a dtagra√≠onn an pointeoir d√≥. I bhfocail eile, na sonra√≠
Breathna√≠onn ionada√≠ocht sa chuimhne cos√∫il le F√≠or 4-2.</p>
<p><img alt="Tr√≠ t√°bla: t√°bla√≠ s1 agus s2 a l√©ir√≠onn na teaghr√°in sin ar an
stack, faoi seach, agus an d√° phointe ag d√≠ri√∫ ar na sonra√≠ teaghr√°n c√©anna ar an gcarn."
src="img/trpl04-02.svg" class="center" style="leithead: 50%;" /></p>
<p><span class="caption">F√≠or 4-2: L√©iri√∫ i gcuimhne ar an athr√≥g <code>s2</code>
ina bhfuil c√≥ip den phointeoir, den fhad agus den toilleadh <code>s1</code></span></p>
<p>T√° cuma <em>not</em> ar an l√©iri√∫ ar Fh√≠or 4-3, agus is √© sin an rud a dh√©anfadh cuimhne
cuma an ndearna Rust na sonra√≠ carn a ch√≥ipe√°il ina ionad sin freisin. M√° rinne Rust √© seo, beidh an
d'fh√©adfadh oibr√≠ocht <code>s2 = s1</code> a bheith an-chostasach i dt√©arma√≠ feidhm√≠ochta rite m√°
bh√≠ na sonra√≠ ar an gcarn m√≥r.</p>
<p><img alt="Ceithre th√°bla: dh√° th√°bla a l√©ir√≠onn na sonra√≠ cruachta le haghaidh s1 agus s2,
agus d√≠r√≠onn gach ceann acu ar a ch√≥ip f√©in de shonra√≠ teaghr√°n ar an gcarn."
src="img/trpl04-03.svg" class="center" style="leithead: 50%;" /></p>
<p><span class="caption">F√≠or 4-3: F√©idearthacht eile maidir le cad a d‚Äôfh√©adfadh <code>s2 = s1</code>
d√©an m√° ch√≥ipe√°il Rust na sonra√≠ carn freisin</span></p>
<p>N√≠os luaithe, d√∫irt muid nuair a th√©ann athr√≥g as raon feidhme, Rust go huathoibr√≠och
glaonn s√© an fheidhm <code>drop</code> agus glanann s√© an chuimhne chairn don athr√≥g sin. Ach
L√©ir√≠onn F√≠or 4-2 an d√° phointe sonra√≠ ag d√≠ri√∫ ar an su√≠omh c√©anna. Seo a
fadhb: nuair a th√©ann <code>s2</code> agus <code>s1</code> as an raon feidhme, d√©anfaidh siad araon iarracht an
cuimhne ch√©anna. Earr√°id <em>double free</em> a thugtar air seo agus t√° s√© ar cheann de na cuimhne
fabhtanna s√°bh√°ilteachta a luaigh muid roimhe seo. Is f√©idir cuimhne a bheith mar thoradh ar chuimhne a shaoradh faoi dh√≥
√©illi√∫, a bhf√©adfadh leochaileachta√≠ sl√°nd√°la a bheith mar thoradh air.</p>
<p>Chun s√°bh√°ilteacht chuimhne a chinnti√∫, tar √©is na l√≠ne <code>let s2 = s1;</code>, measann Rust <code>s1</code> mar
bail√≠ a thuilleadh. Mar sin, n√≠ g√° do Rust rud ar bith a shaoradh nuair a th√©ann <code>s1</code>
as sc√≥ip. Seice√°il cad a tharla√≠onn nuair a dh√©anann t√∫ iarracht <code>s1</code> a √∫s√°id i ndiaidh <code>s2</code>
cruthaithe ; n√≠ oibreoidh s√©:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let s1 = String::from("hello");
    let s2 = s1;

    println!("{s1}, world!");
<span class="boring">}</span></code></pre>
<p>Gheobhaidh t√∫ earr√°id mar seo toisc go gcuireann Rust cosc ort an
tagairt neamhbhail√≠:</p>
<pre><code class="language-console">$ cargo run
   Compiling ownership v0.1.0 (file:///projects/ownership)
error[E0382]: borrow of moved value: `s1`
 --&gt; src/main.rs:5:15
  |
2 |     let s1 = String::from("hello");
  |         -- move occurs because `s1` has type `String`, which does not implement the `Copy` trait
3 |     let s2 = s1;
  |              -- value moved here
4 |
5 |     println!("{s1}, world!");
  |               ^^^^ value borrowed here after move
  |
  = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)
help: consider cloning the value if the performance cost is acceptable
  |
3 |     let s2 = s1.clone();
  |                ++++++++

For more information about this error, try `rustc --explain E0382`.
error: could not compile `ownership` (bin "ownership") due to 1 previous error
</code></pre>
<p>M√° t√° na t√©arma√≠ <em>shallow copy</em> agus <em>deep copy</em> cloiste agat agus t√∫ ag obair leo
teangacha eile, coincheap an phointeora, an fad agus an toilleadh a ch√≥ipe√°il
gan na sonra√≠ a ch√≥ipe√°il is d√≥cha gur cos√∫il le c√≥ip √©adomhain a dh√©anamh. Ach
toisc go nd√©anann Rust an ch√©ad athr√≥g neamhbhail√≠ freisin, in ionad a bheith ar a dtugtar a
c√≥ip √©adomhain, a thugtar air mar <em>move</em>. Sa sampla seo, d√©arfaimis go bhfuil <code>s1</code>
a <em>bogadh</em> go <code>s2</code>. Mar sin, taispe√°ntar cad a tharla√≠onn i nd√°ir√≠re i bhF√≠or 4-4.</p>
<p><img alt="Tr√≠ t√°bla: t√°bla√≠ s1 agus s2 a l√©ir√≠onn na teaghr√°in sin ar an
stack, faoi seach, agus an d√° phointe ag d√≠ri√∫ ar na sonra√≠ teaghr√°n c√©anna ar an gcarn.
T√° t√°bla s1 liathaithe toisc nach bhfuil s1 bail√≠ a thuilleadh; n√≠ f√©idir ach s2 a √∫s√°id chun
rochtain a fh√°il ar na sonra√≠ carn." src="img/trpl04-04.svg" class="center" style="width:
50%;" /></p>
<p><span class="caption">F√≠or 4-4: L√©iri√∫ i gcuimhne tar √©is <code>s1</code> a bheith
neamhbhail√≠</span></p>
<p>R√©it√≠onn s√© sin √°r bhfadhb! Le ach <code>s2</code> bail√≠, nuair a th√©ann s√© as raon feidhme √©
saorfaidh an chuimhne amh√°in, agus t√°imid cr√≠ochnaithe.</p>
<p>Ina theannta sin, t√° rogha dearaidh intuigthe leis seo: n√≠ dh√©anfaidh Rust cho√≠che
cruthaigh c√≥ipeanna ‚Äúdoimhne‚Äù de do shonra√≠ go huathoibr√≠och. Mar sin, aon <em>uathoibr√≠och</em>
is f√©idir glacadh leis go bhfuil an ch√≥ipe√°il neamhchostasach i dt√©arma√≠ feidhm√≠ochta am rite.</p>
<h4 id="sc√≥ip-agus-tasc"><a class="header" href="#sc√≥ip-agus-tasc">Sc√≥ip agus Tasc</a></h4>
<p>T√° a mhalairt de seo f√≠or maidir leis an ngaol idir sc√≥ip, √∫in√©ireacht, agus
cuimhne √° scaoileadh tr√≠d an bhfeidhm <code>drop</code> freisin. Nuair a shannadh t√∫ go hioml√°n
luach nua ar athr√≥g at√° ann cheana f√©in, glaofaidh Rust <code>drop</code> agus saorfaidh s√© an bunleagan
cuimhne luach l√°ithreach. Smaoinigh ar an gc√≥d seo, mar shampla:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s = String::from("hello");
    s = String::from("ahoy");

    println!("{s}, world!");
<span class="boring">}</span></code></pre></pre>
<p>Ar dt√∫s dearbha√≠mid athr√≥g <code>s</code> agus ceangla√≠mid √© de <code>String</code> leis an luach
<code>"Dia duit"</code>. Ansin crutha√≠mid l√°ithreach <code>String</code> nua leis an luach <code>"ahoy"</code> agus
a shannadh do <code>s</code>. Ag an bpointe seo, n√≠l aon rud ag tagairt don luach bunaidh ar
an gcarn ar chor ar bith.</p>
<p><img alt="T√°bla amh√°in s a l√©ir√≠onn an luach teaghr√°n ar an chruach, ag d√≠ri√∫ ar
an dara p√≠osa sonra√≠ t√©ad (ahoy) ar an gcarn, leis an teaghr√°n bunaidh
sonra√≠ (hello) liath amach toisc nach f√©idir √© a rochtain a thuilleadh."
src="img/trpl04-05.svg"
rang = "ionad"
style="width: 50%;"
/></p>
<p><span class="caption">F√≠or 4-5: L√©iri√∫ sa chuimhne i ndiaidh na tosaigh
cuireadh an luach ina ioml√°ine.</span></p>
<p>Mar sin t√©ann an teaghr√°n bunaidh as raon feidhme l√°ithreach. Rithfidh Rust an <code>drop</code>
feidhmi√∫ air agus saorfar a chuimhne ar an bpointe boise. Nuair a phriont√°ilimid an luach
ag an deireadh, beidh s√© <code>"ahoy, world!"</code>.</p>
<!-- Sean-cheannteideal. N√° bain amach n√≥ seans go mbrisfidh naisc. -->
<p><a id="ways-variables-and-data-interact-clone"></a></p>
<h4 id="athr√≥ga-agus-sonra√≠-ag-idirghn√≠omh√∫-le-cl√≥n"><a class="header" href="#athr√≥ga-agus-sonra√≠-ag-idirghn√≠omh√∫-le-cl√≥n">Athr√≥ga agus Sonra√≠ ag Idirghn√≠omh√∫ le Cl√≥n</a></h4>
<p>M√°s mian linn <em>do</em> sonra√≠ carn an <code>String</code> a ch√≥ipe√°il go domhain, n√≠ hamh√°in an
sonra√≠ cruachta, is f√©idir linn √∫s√°id a bhaint as modh coitianta ar a dtugtar <code>clone</code>. D√©anfaimid pl√© ar an modh
comhr√©ir i gCaibidil 5, ach toisc go bhfuil modhanna mar ghn√© coitianta i go leor
teangacha r√≠omhchl√°r√∫ch√°in, is d√≥cha go bhfaca t√∫ iad roimhe seo.</p>
<p>Seo sampla den mhodh ‚Äòcl√≥in‚Äô i ngn√≠omh:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s1 = String::from("hello");
    let s2 = s1.clone();

    println!("s1 = {s1}, s2 = {s2}");
<span class="boring">}</span></code></pre></pre>
<p>Oibr√≠onn s√© seo go bre√° agus crutha√≠onn s√© go sainr√°ite an iompar a l√©ir√≠tear i bhF√≠or 4-3,
√°it a nd√©antar na sonra√≠ carn <em>does</em> a ch√≥ipe√°il.</p>
<p>Nuair a fheiceann t√∫ glao chuig <code>clone</code>, t√° a fhios agat go bhfuil roinnt c√≥d treallach √°
a fhorghn√≠omh√∫ agus f√©adfaidh an c√≥d sin a bheith costasach. T√° s√© ina th√°scaire amhairc go bhfuil rud √©igin
difri√∫il ag dul ar aghaidh.</p>
<h4 id="sonra√≠-cruachta-amh√°in-c√≥ipe√°il"><a class="header" href="#sonra√≠-cruachta-amh√°in-c√≥ipe√°il">Sonra√≠ Cruachta Amh√°in: C√≥ipe√°il</a></h4>
<p>T√° roic eile n√°r labhair muid faoi go f√≥ill. An c√≥d seo ag baint √∫s√°ide as
sl√°nuimhreacha‚Äîar taispe√°nadh cuid de i Liost√∫ 4-2‚Äîoibreacha agus at√° bail√≠:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 5;
    let y = x;

    println!("x = {x}, y = {y}");
<span class="boring">}</span></code></pre></pre>
<p>Ach is cos√∫il go bhfuil an c√≥d seo ag teacht salach ar a bhfuil foghlamtha againn: n√≠l aon ghlaoch orainn
<code>clone</code>, ach t√° <code>x</code> f√≥s bail√≠ agus n√≠or aistr√≠odh go <code>y</code> √©.</p>
<p>Is √© an ch√∫is at√° leis sin n√° go bhfuil cine√°lacha cos√∫il le sl√°nuimhreacha a bhfuil m√©id aitheanta acu ag tioms√∫
st√≥r√°iltear an t-am go hioml√°n ar an gcruach, mar sin t√° c√≥ipeanna de na luachanna iarbh√≠r tapa
a dh√©anamh. Cialla√≠onn s√© sin nach bhfuil aon ch√∫is ann go mbeimis ag iarraidh <code>x</code> a chosc
bail√≠ tar √©is d√∫inn an athr√≥g <code>y</code> a chruth√∫. I bhfocail eile, n√≠l aon difr√≠ocht ann
idir ch√≥ipe√°il dhomhain agus √©adomhain anseo, mar sin n√≠ dh√©anfadh glaoch <code>clone</code> tada
difri√∫il √≥n ngn√°thch√≥ipe√°il √©adomhain, agus is f√©idir linn √© a fh√°g√°il amach.</p>
<p>T√° n√≥ta speisialta ag Rust ar a dtugtar an trait <code>Copy</code> is f√©idir linn a chur air
cine√°lacha at√° st√≥r√°ilte ar an chruach, mar at√° sl√°nuimhreacha (beidh muid ag caint n√≠os m√≥ faoi
tr√©ithe i <a href="ch10-02-traits.html">Caibidil 10</a><!-- ignore -->). M√° chuireann cine√°l an <code>Copy</code> i bhfeidhm
tr√©ithe, n√≠ ghluaiseann athr√≥ga a √∫s√°ideann √≠, ach go nd√©antar iad a ch√≥ipe√°il go f√°nach,
rud a fh√°gann go bhfuil siad f√≥s bail√≠ tar √©is sannadh d'athr√≥g eile.</p>
<p>N√≠ ligfidh Rust d√∫inn cine√°l a an√≥t√°il le <code>Copy</code> m√°s √© an cine√°l, n√≥ aon chuid d√° chuid,
t√° an trait <code>Drop</code> curtha i bhfeidhm aige. M√° theasta√≠onn rud √©igin speisialta √≥n gcine√°l le tarl√∫
nuair a th√©ann an luach as raon feidhme agus cuirimid an n√≥ta <code>Copy</code> leis an gcine√°l sin,
gheobhaidh muid earr√°id ama tiomsaithe. Chun foghlaim faoi conas an n√≥ta <code>Copy</code> a chur leis
le do chine√°l chun an tr√©ith a chur i bhfeidhm, f√©ach [‚ÄúDerivable
Traits‚Äù][d√≠orthaigh-traits]<!-- ignore --> in Aguis√≠n C.</p>
<p>Mar sin, cad iad na cine√°lacha a chuireann an trait <code>Copy</code> i bhfeidhm? Is f√©idir leat an doicim√©ad√∫ a sheice√°il le haghaidh
an cine√°l a thugtar a bheith cinnte, ach mar riail ghinear√°lta, aon ghr√∫pa de sc√°lach simpl√≠
is f√©idir le luachanna <code>Copy</code> a chur i bhfeidhm, agus n√≠ g√° aon rud a leithdh√°ileadh n√≥ a bhfuil cuid acu
foirm acmhainne is f√©idir <code>Copy</code> a chur i bhfeidhm. Seo cuid de na cine√°lacha a
cuir <code>Copy</code> i bhfeidhm:</p>
<ul>
<li>Gach cine√°l sl√°nuimhir, mar shampla <code>u32</code>.</li>
<li>An cine√°l Boole, <code>bool</code>, le luachanna <code>true</code> agus <code>false</code>.</li>
<li>Gach cine√°l sn√°mhphointe, mar shampla <code>f64</code>.</li>
<li>An cine√°l carachtar, <code>char</code>.</li>
<li>Tuples, mura bhfuil iontu ach cine√°lacha a chuireann <code>Copy</code> i bhfeidhm freisin. Mar shampla,
Cuireann <code>(i32, i32)</code> <code>Copy</code> i bhfeidhm, ach n√≠ dh√©anann <code>(i32, Teaghr√°n)</code>.</li>
</ul>
<h3 id="√öin√©ireacht-agus-feidhmeanna"><a class="header" href="#√öin√©ireacht-agus-feidhmeanna">√öin√©ireacht agus Feidhmeanna</a></h3>
<p>T√° na meicn√≠ochta√≠ a bhaineann le luach a chur ar aghaidh go dt√≠ feidhm cos√∫il leo si√∫d nuair a
luach a shannadh d'athr√≥g. M√° chuirtear athr√≥g ar aghaidh chuig feidhm, bogfar n√≥
c√≥ip, d√≠reach mar a dh√©anann sannadh. T√° sampla i liost√∫ 4-3 le roinnt n√≥ta√≠
ag l√©iri√∫ c√° h√°it a dt√©ann athr√≥ga isteach agus amach as an sc√≥ip.</p>
<Listing number="4-3" file-name="src/main.rs" caption="Feidhmeanna le h√∫in√©ireacht agus raon feidhme an√≥t√°ilte">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s = String::from("hello");  // s comes into scope

    takes_ownership(s);             // s's value moves into the function...
                                    // ... and so is no longer valid here

    let x = 5;                      // x comes into scope

    makes_copy(x);                  // because i32 implements the Copy trait,
                                    // x does NOT move into the function,
    println!("{}", x);              // so it's okay to use x afterward

} // Here, x goes out of scope, then s. But because s's value was moved, nothing
  // special happens.

fn takes_ownership(some_string: String) { // some_string comes into scope
    println!("{some_string}");
} // Here, some_string goes out of scope and `drop` is called. The backing
  // memory is freed.

fn makes_copy(some_integer: i32) { // some_integer comes into scope
    println!("{some_integer}");
} // Here, some_integer goes out of scope. Nothing special happens.</code></pre></pre>
</Listing>
<p>D√° nd√©anfaimis iarracht <code>s</code> a √∫s√°id tar √©is an ghlao go <code>takes_ownership</code>, chaithfeadh Rust a
earr√°id ama tiomsaithe. Cosna√≠onn na seice√°lacha statacha seo sinn √≥ bhot√∫in. Bain triail as cur
c√≥d go <code>main</code> a √∫s√°ideann <code>s</code> agus <code>x</code> chun a fheice√°il c√©n √°it ar f√©idir leat iad a √∫s√°id agus c√©n √°it
cuireann na rialacha √∫in√©ireachta cosc ‚Äã‚Äãort √© sin a dh√©anamh.</p>
<h3 id="luachanna-aischuir-agus-sc√≥ip"><a class="header" href="#luachanna-aischuir-agus-sc√≥ip">Luachanna Aischuir agus Sc√≥ip</a></h3>
<p>Is f√©idir le luachanna tuairisce√°in √∫in√©ireacht a aistri√∫ freisin. Taispe√°nann liosta 4-4 sampla de a
feidhm a thugann luach √©igin ar ais, le n√≥ta√≠ cos√∫il leis na cinn i Liost√∫
4-3.</p>
<Listing number="4-4" file-name="src/main.rs" caption="Transferring ownership of return values">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = gives_ownership();         // gives_ownership moves its return
                                        // value into s1

    let s2 = String::from("hello");     // s2 comes into scope

    let s3 = takes_and_gives_back(s2);  // s2 is moved into
                                        // takes_and_gives_back, which also
                                        // moves its return value into s3
} // Here, s3 goes out of scope and is dropped. s2 was moved, so nothing
  // happens. s1 goes out of scope and is dropped.

fn gives_ownership() -&gt; String {             // gives_ownership will move its
                                             // return value into the function
                                             // that calls it

    let some_string = String::from("yours"); // some_string comes into scope

    some_string                              // some_string is returned and
                                             // moves out to the calling
                                             // function
}

// This function takes a String and returns one
fn takes_and_gives_back(a_string: String) -&gt; String { // a_string comes into
                                                      // scope

    a_string  // a_string is returned and moves out to the calling function
}</code></pre></pre>
</Listing>
<p>leanann √∫in√©ireacht athr√≥ige an patr√∫n c√©anna gach uair: ag sannadh a
aistr√≠onn luach chuig athr√≥g eile √©. Nuair a athr√≥g a chuims√≠onn sonra√≠ ar an
gcarn imithe as raon feidhme, beidh an luach a ghlanadh suas le <code>drop</code> mura √∫in√©ireacht
de na sonra√≠ aistr√≠odh chuig athr√≥g eile.</p>
<p>C√© go n-oibr√≠onn s√© seo, √∫in√©ireacht a ghlacadh agus ansin √∫in√©ireacht a thabhairt ar ais le gach
T√° feidhm beag√°n tedious. Cad a tharla√≠onn m√° theasta√≠onn uainn ligean d‚Äôfheidhm luach a √∫s√°id ach
nach bhfuil √∫in√©ireacht a ghlacadh? T√° s√© an-chorraithe go bhfuil g√° le haon rud a thabharfaimid isteach freisin
a thabhairt ar ais m√°s mian linn √© a √∫s√°id ar√≠s, chomh maith le haon sonra√≠ a thagann as
√≥ chorp an fheidhm a d'fh√©adfadh muid a bheith ag iarraidh a thabhairt ar ais chomh maith.</p>
<p>Ligeann Rust d√∫inn luachanna iolracha a thabhairt ar ais tr√≠ √∫s√°id a bhaint as tuple, mar a thaispe√°ntar i Liost√∫ 4-5.</p>
<Listing number="4-5" file-name="src/main.rs" caption="√öin√©ireacht paraim√©adair √° filleadh">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("hello");

    let (s2, len) = calculate_length(s1);

    println!("The length of '{s2}' is {len}.");
}

fn calculate_length(s: String) -&gt; (String, usize) {
    let length = s.len(); // len() returns the length of a String

    (s, length)
}</code></pre></pre>
</Listing>
<p>Ach t√° s√© seo i bhfad r√≥-searmanas agus a l√°n oibre le haghaidh coincheap ba ch√≥ir a bheith
coitianta. Go fortunately d√∫inn, t√° gn√© ag Rust chun luach a √∫s√°id gan
√∫in√©ireacht a aistri√∫, ar a dtugtar <em>references</em>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="crochta-agus-tagairt√≠"><a class="header" href="#crochta-agus-tagairt√≠">Crochta agus Tagairt√≠</a></h2>
<p>Is √≠ an tsaincheist leis an gc√≥d tuple i Liosta 4-5 n√° go gcaithfimid an
<code>String</code> don fheidhm ghlao ionas gur f√©idir linn f√≥s an <code>String</code> a √∫s√°id tar √©is an
glaoigh go <code>calculate_length</code>, mar gur aistr√≠odh an <code>String</code> isteach
<code>calculate_length</code>. Ina √°it sin, is f√©idir linn tagairt a shol√°thar don luach <code>String</code>.
T√° <em>reference</em> cos√∫il le pointeoir sa mh√©id is gur seoladh √© ar f√©idir linn rochtain a fh√°il air
na sonra√≠ at√° st√≥r√°ilte ag an seoladh sin; is le hathr√≥g √©igin eile na sonra√≠ sin.
Murab ionann agus pointeoir, r√°tha√≠tear le tagairt luach bail√≠ a
cine√°l ar leith do shaolr√© na tagartha sin.</p>
<p>Seo √© an chaoi a shaineof√° agus a n-√∫s√°idfe√° feidhm <code>calculate_length</code> a bhfuil a
tagairt do r√©ad mar pharaim√©adar in ionad √∫in√©ireacht a ghlacadh ar an luach:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("hello");

    let len = calculate_length(&amp;s1);

    println!("The length of '{s1}' is {len}.");
}

fn calculate_length(s: &amp;String) -&gt; usize {
    s.len()
}</code></pre></pre>
</Listing>
<p>Gc√©ad dul s√≠os, faoi deara go l√©ir an c√≥d tuple sa dearbh√∫ athr√≥g agus an
T√° luach ar ais feidhm imithe. Ar an dara dul s√≠os, tabhair faoi deara go gcuirimid <code>&amp;s1</code> isteach
<code>calculate_length</code> agus, ina shainmh√≠ni√∫, glacaimid <code>&amp;String</code> seachas
<code>String</code>. Is ionann na hampersands seo agus <em>references</em>, agus ligeann siad duit tagairt a dh√©anamh
ar luach √©igin gan √∫in√©ireacht a ghlacadh air. L√©ir√≠onn F√≠or 4-6 an coincheap seo.</p>
<p><img alt="Tr√≠ th√°bla: n√≠l sa t√°bla le haghaidh s ach pointeoir don t√°bla
le haghaidh s1. Sa t√°bla do s1 t√° na sonra√≠ cruachta le haghaidh s1 agus point√≠ chuig an
sonra√≠ teaghr√°n ar an gcarn." src="img/trpl04-06.svg" class="center" /></p>
<p><span class="caption">F√≠or 4-6: L√©ar√°id de <code>&amp;String s</code> ag pointe√°il ar <code>String s1</code></span></p>
<blockquote>
<p>N√≥ta: Is √© <em>dereferencing</em> a mhalairt de thagairt√≠ tr√≠ √∫s√°id a bhaint as <code>&amp;</code>, is √© sin
bainte amach leis an oibreoir dereference, <code>*</code>. Feicfimid roinnt √∫s√°id√≠ as an
oibreoir dereference i gCaibidil 8 agus pl√©igh sonra√≠ na d√≠thagartha i
Caibidil 15 .</p>
</blockquote>
<p>Breathna√≠mis ar an nglao feidhme anseo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s1 = String::from("hello");

    let len = calculate_length(&amp;s1);
<span class="boring">
</span><span class="boring">    println!("The length of '{s1}' is {len}.");
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn calculate_length(s: &amp;String) -&gt; usize {
</span><span class="boring">    s.len()
</span><span class="boring">}</span></code></pre></pre>
<p>Ligeann an chomhr√©ir <code>&amp;s1</code> d√∫inn tagairt a chruth√∫ a <em>tagra√≠onn</em> do luach <code>s1</code>
ach n√≠ leis √©. Toisc nach leis an tagairt √≠, d√≠r√≠onn an luach
n√≠ scaoilfear leis nuair a stopann √∫s√°id na tagartha.</p>
<p>Mar an gc√©anna, √∫s√°ideann s√≠ni√∫ na feidhme <code>&amp;</code> chun a chur in i√∫l go bhfuil an cine√°l
is tagairt √© an paraim√©adar <code>s</code>. Cuirimis roinnt n√≥ta√≠ m√≠ni√∫ch√°in leis:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let s1 = String::from("hello");
</span><span class="boring">
</span><span class="boring">    let len = calculate_length(&amp;s1);
</span><span class="boring">
</span><span class="boring">    println!("The length of '{s1}' is {len}.");
</span><span class="boring">}
</span><span class="boring">
</span>fn calculate_length(s: &amp;String) -&gt; usize { // s is a reference to a String
    s.len()
} // Here, s goes out of scope. But because s does not have ownership of what
  // it refers to, the value is not dropped.</code></pre></pre>
<p>Is ionann an sc√≥ip ina bhfuil an athr√≥g <code>s</code> bail√≠ agus feidhm ar bith
raon feidhme an pharaim√©adar, ach n√≠ thittear an luach a luann an tagairt
nuair a stopann <code>s</code> √° √∫s√°id, mar n√≠l √∫in√©ireacht ag <code>s</code>. Nuair a feidhmeanna
tagairt√≠ a bheith agat mar pharaim√©adair in ionad na luachanna iarbh√≠r, n√≠ bheidh orainn
na luachanna a thabhairt ar ais chun √∫in√©ireacht a thabhairt ar ais, mar n√≠ raibh againn riamh
√∫in√©ireacht.</p>
<p>Glaoimid ar an ngn√≠omh chun tagairt a chruth√∫ <em>iasacht</em>. Mar at√° sa saol f√≠or, m√°s rud √© a
is leis an duine rud √©igin, is f√©idir leat √© a fh√°il ar iasacht uathu. Nuair a bheidh t√∫ cr√≠ochnaithe, t√°
√© a thabhairt ar ais. N√≠ leatsa √©.</p>
<p>Mar sin, cad a tharl√≥idh m√° dh√©anaimid iarracht rud √©igin at√° √° fh√°il ar iasacht againn a mhodhn√∫? Bain triail as an gc√≥d i
Liost√°il 4-6. Fol√°ireamh spoiler: n√≠ oibr√≠onn s√©!</p>
<Listing number="4-6" file-name="src/main.rs" caption="Attempting to modify a borrowed value">
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let s = String::from("hello");

    change(&amp;s);
}

fn change(some_string: &amp;String) {
    some_string.push_str(", world");
}</code></pre>
</Listing>
<p>Seo an earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling ownership v0.1.0 (file:///projects/ownership)
error[E0596]: cannot borrow `*some_string` as mutable, as it is behind a `&amp;` reference
 --&gt; src/main.rs:8:5
  |
8 |     some_string.push_str(", world");
  |     ^^^^^^^^^^^ `some_string` is a `&amp;` reference, so the data it refers to cannot be borrowed as mutable
  |
help: consider changing this to be a mutable reference
  |
7 | fn change(some_string: &amp;mut String) {
  |                         +++

For more information about this error, try `rustc --explain E0596`.
error: could not compile `ownership` (bin "ownership") due to 1 previous error
</code></pre>
<p>D√≠reach mar a bh√≠onn athr√≥ga do-athchurtha de r√©ir r√©amhshocraithe, is amhlaidh at√° tagairt√≠. N√≠limid
cead rud √©igin a bhfuil tagairt againn d√≥ a mhodhn√∫.</p>
<h3 id="tagairt√≠-mutable"><a class="header" href="#tagairt√≠-mutable">Tagairt√≠ Mutable</a></h3>
<p>Is f√©idir linn an c√≥d √≥ Liosta 4-6 a shocr√∫ chun ligean d√∫inn luach a fuarthas ar iasacht a mhionathr√∫
gan ach c√∫pla tweaks beaga a √∫s√°ideann, ina ionad sin, tagairt <em>mutable</em>:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut s = String::from("hello");

    change(&amp;mut s);
}

fn change(some_string: &amp;mut String) {
    some_string.push_str(", world");
}</code></pre></pre>
</Listing>
<p>Ar dt√∫s athra√≠onn muid <code>s</code> le bheith <code>mut</code>. Ansin crutha√≠mid tagairt mutable le <code>&amp;mut s</code> √°it a dtugaimid an fheidhm <code>change</code>, agus nuashonra√≠mid s√≠ni√∫ na feidhme go
glac le tagairt mutable le <code>some_string: &amp;mut String</code>. D√©anann s√© seo an-
soil√©ir go n-athr√≥idh an fheidhm <code>change</code> an luach a gheobhaidh s√© ar iasacht.</p>
<p>T√° srian m√≥r amh√°in ag tagairt√≠ mutable: m√° t√° tagairt shoghluaiste agat do
luach, n√≠ f√©idir aon tagairt√≠ eile a bheith agat don luach sin. An c√≥d seo go
theipeann ar iarrachta√≠ dh√° thagairt sho-sh√≥ite a chruth√∫ do <code>s</code>:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let mut s = String::from("hello");

    let r1 = &amp;mut s;
    let r2 = &amp;mut s;

    println!("{}, {}", r1, r2);
<span class="boring">}</span></code></pre>
</Listing>
<p>Seo an earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling ownership v0.1.0 (file:///projects/ownership)
error[E0499]: cannot borrow `s` as mutable more than once at a time
 --&gt; src/main.rs:5:14
  |
4 |     let r1 = &amp;mut s;
  |              ------ first mutable borrow occurs here
5 |     let r2 = &amp;mut s;
  |              ^^^^^^ second mutable borrow occurs here
6 |
7 |     println!("{}, {}", r1, r2);
  |                        -- first borrow later used here

For more information about this error, try `rustc --explain E0499`.
error: could not compile `ownership` (bin "ownership") due to 1 previous error
</code></pre>
<p>Deir an earr√°id seo go bhfuil an c√≥d seo neamhbhail√≠ toisc nach f√©idir linn <code>s</code> a fh√°il ar iasacht mar
mutable n√≠os m√≥ n√° uair amh√°in ag an am. T√° an ch√©ad iasacht sho-sh√≥ite i <code>r1</code> agus n√≠ m√≥r
deireanach go dt√≠ go n-√∫s√°idtear √© sa <code>println!</code>, ach idir chruth√∫ sin
tagairt mutable agus a √∫s√°id, rinneamar iarracht tagairt eile a chruth√∫ mutable
in <code>r2</code> a fhaigheann na sonra√≠ c√©anna ar iasacht le <code>r1</code>.</p>
<p>An srian a chuireann cosc ‚Äã‚Äãar thagairt√≠ mutable iolracha do na sonra√≠ c√©anna ag an
ceada√≠onn an t-am c√©anna s√≥ch√°n ach ar bhealach an-rialaithe. Is rud √©
a mb√≠onn na Rustaceans nua ag streachailt leo mar ligeann formh√≥r na dteangacha duit s√≥ch√°n a dh√©anamh
aon uair is mian leat. Is √© an bunt√°iste a bhaineann leis an srianadh seo n√° gur f√©idir le Rust
cosc a chur ar r√°sa√≠ sonra√≠ ag am tiomsaithe. T√° r√°s <em>data</em> cos√∫il le r√°s
riocht agus a tharla√≠onn nuair a tharla√≠onn na tr√≠ iompar seo:</p>
<ul>
<li>T√° rochtain ag dh√° threo n√≥ n√≠os m√≥ ar na sonra√≠ c√©anna ag an am c√©anna.</li>
<li>T√° ceann amh√°in ar a laghad de na leideanna √° n-√∫s√°id chun na sonra√≠ a scr√≠obh.</li>
<li>N√≠l aon mheicn√≠ocht √° h√∫s√°id chun rochtain ar na sonra√≠ a shioncron√∫.</li>
</ul>
<p>Is c√∫is le hiompar neamhshainithe is c√∫is le r√°sa√≠ sonra√≠ agus is f√©idir leo a bheith deacair a dhiagn√≥iseadh agus a shocr√∫
nuair at√° t√∫ ag iarraidh iad a rian√∫ s√≠os ag am rite; Coscann meirge an fhadhb seo tr√≠
ag di√∫lt√∫ c√≥d a thioms√∫ le r√°sa√≠ sonra√≠!</p>
<p>Mar is gn√°th, is f√©idir linn l√∫ib√≠n√≠ cuartha a √∫s√°id chun raon feidhme nua a chruth√∫, rud a cheada√≠onn
tagairt√≠ iolracha mutable, n√≠ hamh√°in cinn <em>comhuaineacha</em>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s = String::from("hello");

    {
        let r1 = &amp;mut s;
    } // r1 goes out of scope here, so we can make a new reference with no problems.

    let r2 = &amp;mut s;
<span class="boring">}</span></code></pre></pre>
<p>Forfheidhm√≠onn meirge riail chomhchos√∫il maidir le tagairt√≠ in-sh√≥ite agus neamh-inmheasartha a chomhcheangal.
T√° earr√°id mar thoradh ar an gc√≥d seo:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let mut s = String::from("hello");

    let r1 = &amp;s; // no problem
    let r2 = &amp;s; // no problem
    let r3 = &amp;mut s; // BIG PROBLEM

    println!("{}, {}, and {}", r1, r2, r3);
<span class="boring">}</span></code></pre>
<p>Seo an earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling ownership v0.1.0 (file:///projects/ownership)
error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable
 --&gt; src/main.rs:6:14
  |
4 |     let r1 = &amp;s; // no problem
  |              -- immutable borrow occurs here
5 |     let r2 = &amp;s; // no problem
6 |     let r3 = &amp;mut s; // BIG PROBLEM
  |              ^^^^^^ mutable borrow occurs here
7 |
8 |     println!("{}, {}, and {}", r1, r2, r3);
  |                                -- immutable borrow later used here

For more information about this error, try `rustc --explain E0502`.
error: could not compile `ownership` (bin "ownership") due to 1 previous error
</code></pre>
<p>Whew! N√≠ f√©idir tagairt chomhsh√≥ite a bheith againn <em>freisin</em>, c√© go bhfuil ceann nach f√©idir a mhalart√∫ againn
ar an luach c√©anna.</p>
<p>N√≠ bh√≠onn √∫s√°ideoir√≠ teistim√©ireachta domhalartaithe ag s√∫il go n-athr√≥idh an luach go tobann
√≥ th√≠os leo! Mar sin f√©in, ceada√≠tear tagairt√≠ iolracha domhalartaithe toisc nach bhfuil
t√° an cumas ag an t√© at√° d√≠reach ag l√©amh na sonra√≠ dul i bhfeidhm ar dhaoine eile
l√©amh na sonra√≠.</p>
<p>Tabhair faoi deara go dtosa√≠onn sc√≥ip teistim√©ireachta √≥n √°it a dtugtar isteach √© agus go leanann s√© ar aghaidh
tr√≠d an uair dheireanach a √∫s√°idtear an tagairt sin. Mar shampla, d√©anfaidh an c√≥d seo
tiomsaigh toisc go bhfuil an √∫s√°id dheireanach a bhaintear as na tagairt√≠ domhalartaithe sa <code>println!</code>,
sula dtabharfar isteach an tagairt mutable:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">fn main() {
</span>    let mut s = String::from("hello");

    let r1 = &amp;s; // no problem
    let r2 = &amp;s; // no problem
    println!("{r1} and {r2}");
    // variables r1 and r2 will not be used after this point

    let r3 = &amp;mut s; // no problem
    println!("{r3}");
<span class="boring">}</span></code></pre></pre>
<p>Cr√≠ochna√≠onn sc√≥ip na dtagairt√≠ domhalartaithe <code>r1</code> agus <code>r2</code> tar √©is an <code>println!</code>
an √°it a n-√∫s√°idtear go deireanach iad, is √© sin roimh an tagairt mutable <code>r3</code>
cruthaithe. N√≠ fhorlu√≠onn na sc√≥ip seo, mar sin ceada√≠tear an c√≥d seo: is f√©idir leis an tiomsaitheoir
abair nach bhfuil an tagairt √° h√∫s√°id a thuilleadh ag pointe roimh dheireadh na
an sc√≥ip.</p>
<p>C√© go bhf√©adfadh earr√°id√≠ iasachtaithe a bheith frustrachas uaireanta, cuimhnigh go bhfuil
an tiomsaitheoir Rust ag cur in i√∫l fabht f√©ideartha go luath (ag am tiomsaithe in √°it
n√° ag am rite) agus a thaispe√°nann go beacht duit c√° bhfuil an fhadhb. Ansin n√≠ dh√©anann t√∫
caithfidh t√∫ a lorg c√©n f√°th nach bhfuil do shonra√≠ mar a cheap t√∫ a bh√≠ ann.</p>
<h3 id="tagairt√≠-crochta"><a class="header" href="#tagairt√≠-crochta">Tagairt√≠ Crochta</a></h3>
<p>I dteangacha le leideanna, is furasta <em>crochta a chruth√∫ go hearr√°ideach
pointeoir</em>‚Äîpointeoir a dh√©anann tagairt d‚Äôionad i gcuimhne a d‚Äôfh√©adfadh a bheith
a thugtar do dhuine eile - tr√≠ chuimhne a shaoradh agus pointeoir chuige sin √° chaomhn√∫
cuimhne. I Rust, i gcodarsnacht leis sin, r√°tha√≠onn an tiomsaitheoir go mbeidh tagairt√≠
riamh a bheith crochta tagairt√≠: m√° t√° t√∫ tagairt do roinnt sonra√≠, an
√°iritheoidh tiomsaitheoir nach rachaidh na sonra√≠ as raon feidhme roimh an
d√©anann tagairt do na sonra√≠.</p>
<p>D√©anaimis iarracht tagairt dhochrach a chruth√∫ lena fheice√°il conas a chuireann Rust cosc ‚Äã‚Äãorthu le a
earr√°id ama tiomsaithe:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let reference_to_nothing = dangle();
}

fn dangle() -&gt; &amp;String {
    let s = String::from("hello");

    &amp;s
}</code></pre>
</Listing>
<p>Seo an earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling ownership v0.1.0 (file:///projects/ownership)
error[E0106]: missing lifetime specifier
 --&gt; src/main.rs:5:16
  |
5 | fn dangle() -&gt; &amp;String {
  |                ^ expected named lifetime parameter
  |
  = help: this function's return type contains a borrowed value, but there is no value for it to be borrowed from
help: consider using the `'static` lifetime, but this is uncommon unless you're returning a borrowed value from a `const` or a `static`
  |
5 | fn dangle() -&gt; &amp;'static String {
  |                 +++++++
help: instead, you are more likely to want to return an owned value
  |
5 - fn dangle() -&gt; &amp;String {
5 + fn dangle() -&gt; String {
  |

error[E0515]: cannot return reference to local variable `s`
 --&gt; src/main.rs:8:5
  |
8 |     &amp;s
  |     ^^ returns a reference to data owned by the current function

Some errors have detailed explanations: E0106, E0515.
For more information about an error, try `rustc --explain E0106`.
error: could not compile `ownership` (bin "ownership") due to 2 previous errors
</code></pre>
<p>Tagra√≠onn an teachtaireacht earr√°ide seo do ghn√© n√°r chl√∫daigh muid go f√≥ill: saolr√©anna. D√©anfaimid
pl√©igh saolr√©anna go mion i gCaibidil 10. Ach, m√° dh√©anann t√∫ neamhaird ar na codanna
maidir le saolr√©anna, t√° an eochair sa teachtaireacht maidir le c√©n f√°th gur fadhb √© an c√≥d seo:</p>
<pre><code class="language-t√©acs">t√° luach a fuarthas ar iasacht i gcine√°l aischuir na feidhme seo, ach n√≠l aon luach ann
chun √© a fh√°il ar iasacht uaidh
</code></pre>
<p>Breathna√≠mis ar cad go d√≠reach at√° ag tarl√∫ ag gach c√©im d√°r gcuid
c√≥d <code>dangle</code>:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span><span class="boring">    let reference_to_nothing = dangle();
</span><span class="boring">}
</span><span class="boring">
</span>fn dangle() -&gt; &amp;String { // dangle returns a reference to a String

    let s = String::from("hello"); // s is a new String

    &amp;s // we return a reference to the String, s
} // Here, s goes out of scope, and is dropped. Its memory goes away.
  // Danger!</code></pre>
</Listing>
<p>Toisc go gcrutha√≠tear <code>s</code> taobh istigh de <code>dangle</code>, nuair a bh√≠onn an c√≥d <code>dangle</code> cr√≠ochnaithe,
beidh <code>s</code> dealaithe. Ach rinneamar iarracht tagairt a thabhairt ar ais d√≥. Cialla√≠onn s√© sin
bheadh ‚Äã‚Äãan tagairt seo ag tagairt do <code>String</code> neamhbhail√≠. N√≠l sin go maith! Meirge
n√° lig d√∫inn √© seo a dh√©anamh.</p>
<p>Is √© an r√©iteach anseo n√° an <code>String</code> a thabhairt ar ais go d√≠reach:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let string = no_dangle();
</span><span class="boring">}
</span><span class="boring">
</span>fn no_dangle() -&gt; String {
    let s = String::from("hello");

    s
}</code></pre></pre>
<p>Oibr√≠onn s√© seo gan aon fhadhbanna. T√° √∫in√©ireacht ar athra√≠odh a ionad amach, agus t√° rud ar bith
dealraithe.</p>
<h3 id="na-rialacha-tagartha"><a class="header" href="#na-rialacha-tagartha">Na Rialacha Tagartha</a></h3>
<p>Gabhaimis siar a bhfuil pl√©ite againn faoi thagairt√≠:</p>
<ul>
<li>Ag aon am ar leith, is f√©idir leat <em>ceachtar</em> tagairt sho-sh√≥ite amh√°in a bheith agat <em>n√≥</em> ar bith
l√≠on na dtagairt√≠ dochorraithe.</li>
<li>Caithfidh teistim√©ireachta√≠ a bheith bail√≠ i gc√≥na√≠.</li>
</ul>
<p>Ansin, f√©achfaimid ar thagairt de chine√°l eile: slices.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="an-cine√°l-slice"><a class="header" href="#an-cine√°l-slice">An Cine√°l Slice</a></h2>
<p>Ligeann <em>Slices</em> duit tagairt a dh√©anamh do sheicheamh comhtheagmh√°lach d‚Äôeilimint√≠ in a
<a href="ch08-00-common-collections.html">collection</a> seachas an cnuasach ioml√°n. A
Is cine√°l tagartha √© slice, mar sin n√≠l √∫in√©ireacht aige.</p>
<p>Seo fadhb bheag r√≠omhchl√°raithe: scr√≠obh feidhm a ghlacann teaghr√°n de
focail scartha le sp√°sanna agus seolann s√© ar ais an ch√©ad fhocal a aims√≠onn s√© sa t√©ad sin.
Mura bhfaighidh an fheidhm sp√°s sa t√©ad, caithfidh an t√©ad ioml√°n a bheith
focal amh√°in, mar sin ba ch√≥ir an teaghr√°n ioml√°n a chur ar ais.</p>
<p>D√©anaimis oibri√∫ tr√≠d an gcaoi a scr√≠obhfaimid s√≠ni√∫ na feidhme seo gan √∫s√°id a bhaint as
slices, chun an fhadhb a r√©iteoidh slisn√≠ a thuiscint:</p>
<pre><code class="language-rust ignore">fn first_word(s: &amp;String) -&gt; ?</code></pre>
<p>T√° <code>&amp;String</code> mar pharaim√©adar ag an bhfeidhm <code>first_word</code>. N√≠ g√° d√∫inn
√∫in√©ireacht, mar sin t√° s√© seo go bre√°. (I Rust idiomatic, n√≠ feidhmeanna a ghlacadh √∫in√©ireacht
d√° n-arg√≥int√≠ mura g√°, agus tiocfaidh na c√∫iseanna leis sin
soil√©ir agus muid ag lean√∫int ar aghaidh!) Ach cad ba cheart d√∫inn filleadh? N√≠l bealach againn i nd√°ir√≠re
chun labhairt faoi chuid de shreang. Mar sin f√©in, d'fh√©adfaimis an t-inn√©acs de dheireadh na
an focal, l√©irithe ag sp√°s. D√©anaimis iarracht √© sin, mar a thaispe√°ntar i Liost√∫ 4-7.</p>
<Listing number="4-7" file-name="src/main.rs" caption="The `first_word` function that returns a byte index value into the `String` parameter">
<pre><pre class="playground"><code class="language-rust">fn first_word(s: &amp;String) -&gt; usize {
    let bytes = s.as_bytes();

    for (i, &amp;item) in bytes.iter().enumerate() {
        if item == b' ' {
            return i;
        }
    }

    s.len()
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Toisc go gcaithfimid dul tr√≠d an eilimint <code>String</code> de r√©ir eiliminte agus seice√°il an bhfuil
Is sp√°s √© luach, d√©anfaimid √°r <code>String</code> a thiont√∫ go sraith beart ag baint √∫s√°ide as an
modh <code>as_bytes</code>.</p>
<pre><code class="language-rust ignore"><span class="boring">fn first_word(s: &amp;String) -&gt; usize {
</span>    let bytes = s.as_bytes();
<span class="boring">
</span><span class="boring">    for (i, &amp;item) in bytes.iter().enumerate() {
</span><span class="boring">        if item == b' ' {
</span><span class="boring">            return i;
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    s.len()
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {}</span></code></pre>
<p>Ansin, crutha√≠mid iterator thar an sraith beart ag baint √∫s√°ide as an modh <code>iter</code>:</p>
<pre><code class="language-rust ignore"><span class="boring">fn first_word(s: &amp;String) -&gt; usize {
</span><span class="boring">    let bytes = s.as_bytes();
</span><span class="boring">
</span>    for (i, &amp;item) in bytes.iter().enumerate() {
<span class="boring">        if item == b' ' {
</span><span class="boring">            return i;
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    s.len()
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {}</span></code></pre>
<p>D√©anfaimid pl√© n√≠os mine ar atriallt√≥ir√≠ i <a href="ch13-02-iterators.html">Caibidil 13</a><!-- neamhaird -->.
Go dt√≠ seo, b√≠odh a fhios agat gur modh √© <code>iter</code> a thugann gach eilimint i mbaili√∫ch√°n ar ais
agus go gcumhda√≠onn <code>enumerate</code> toradh <code>iter</code> agus cuireann s√© gach eilimint ar ais mar
cuid de tuple ina ionad. D'fhill an ch√©ad eilimint den tuple √≥
Is √© <code>enumerate</code> an t-inn√©acs, agus is tagairt √≠ an dara eilimint don eilimint.
T√° s√© seo beag√°n n√≠os √°isi√∫la n√° an t-inn√©acs a r√≠omh d√∫inn f√©in.</p>
<p>Toisc go dtugann an modh <code>√°irimh</code> tuple ar ais, is f√©idir linn patr√∫in a √∫s√°id chun
scrios an tuple sin. Beidh muid ag pl√© patr√∫in n√≠os m√≥ i <a href="ch06-02-match.html#patterns-that-bind-to-values">Caibidil
6</a> <!-- neamhaird a dh√©anamh -->. Sa l√∫b <code>do</code>, sonra√≠mid patr√∫n a bhfuil <code>i</code> air
don inn√©acs sa tuple agus <code>&amp;item</code> don bheart singil sa tuple.
Toisc go bhfaighimid tagairt don eilimint √≥ <code>.iter().enurate()</code>, √∫s√°idimid
<code>&amp;</code> sa phatr√∫n.</p>
<p>Laistigh den l√∫b <code>do</code>, d√©anaimid cuardach don bheart a sheasann don sp√°s tr√≠
ag baint √∫s√°ide as an chomhr√©ir liteartha beart. M√° aims√≠mid sp√°s, cuirimid an su√≠omh ar ais.
Seachas sin, cuirimid fad na sreinge ar ais tr√≠ √∫s√°id a bhaint as <code>s.len()</code>.</p>
<pre><code class="language-rust ignore"><span class="boring">fn first_word(s: &amp;String) -&gt; usize {
</span><span class="boring">    let bytes = s.as_bytes();
</span><span class="boring">
</span><span class="boring">    for (i, &amp;item) in bytes.iter().enumerate() {
</span>        if item == b' ' {
            return i;
        }
    }

    s.len()
<span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {}</span></code></pre>
<p>T√° bealach againn anois le hinn√©acs deireadh an ch√©ad fhocail sa
teaghr√°n, ach t√° fadhb ann. T√°imid ag tabhairt 'usize' ar ais leis f√©in, ach t√°
uimhir bhr√≠och amh√°in i gcomhth√©acs an <code>&amp;String</code>. I bhfocail eile,
toisc gur luach ar leith √© √≥n <code>String</code>, n√≠l aon r√°tha√≠ocht ann go mbeidh s√©
beidh s√© f√≥s bail√≠ sa todhcha√≠. Smaoinigh ar an gcl√°r i Liosta 4-8 go
√∫s√°ideann an fheidhm <code>first_word</code> √≥ Liost√∫ 4-7.</p>
<Listing number="4-8" file-name="src/main.rs" caption="Storing the result from calling the `first_word` function and then changing the `String` contents">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn first_word(s: &amp;String) -&gt; usize {
</span><span class="boring">    let bytes = s.as_bytes();
</span><span class="boring">
</span><span class="boring">    for (i, &amp;item) in bytes.iter().enumerate() {
</span><span class="boring">        if item == b' ' {
</span><span class="boring">            return i;
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    s.len()
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let mut s = String::from("hello world");

    let word = first_word(&amp;s); // word will get the value 5

    s.clear(); // this empties the String, making it equal to ""

    // `word` still has the value `5` here, but `s` no longer has any content
    // that we could meaningfully use with the value `5`, so `word` is now
    // totally invalid!
}</code></pre></pre>
</Listing>
<p>Tiomsa√≠tear an cl√°r seo gan aon earr√°id√≠ agus dh√©anfadh s√© √© sin freisin d√° mba rud √© gur √∫s√°ideamar <code>word</code>
tar √©is glaoch ar <code>s.clear()</code>. Toisc nach bhfuil <code>word</code> ceangailte le staid <code>s</code>
ar chor ar bith, t√° an luach <code>5</code> f√≥s i <code>word</code>. D'fh√©adfaimis an luach sin <code>5</code> a √∫s√°id le
an athr√≥g <code>s</code> chun iarracht a dh√©anamh an ch√©ad fhocal a bhaint amach, ach bheadh ‚Äã‚Äã‚Äã‚Äãs√© seo ina fhabht
mar t√° √°bhar <code>s</code> athraithe √≥ sh√°bh√°il muid <code>5</code> i <code>word</code>.</p>
<p>N√≠ m√≥r a bheith buartha faoin inn√©acs i <code>word</code> ag √©ir√≠ as sioncron√∫ leis na sonra√≠ i
T√° <code>s</code> tedious agus seans maith go hearr√°id! T√° s√© n√≠os br√≠ f√≥s na hinn√©acsanna seo a bhainisti√∫ m√°s rud √©
scr√≠obhaimid feidhm <code>second_word</code>. Chaithfeadh a sh√≠ni√∫ breathn√∫ mar seo:</p>
<pre><code class="language-rust ignore">fn second_word(s: &amp;String) -&gt; (usize, usize) {</code></pre>
<p>Anois t√° <em>agus</em> inn√©acs tosaigh √° rian√∫ againn, agus t√° n√≠os m√≥ f√≥s againn
luachanna a r√≠omhadh √≥ shonra√≠ i st√°t ar leith ach nach bhfuil ceangailte leo
an st√°t sin ar chor ar bith. T√° tr√≠ athr√≥g neamhghaolmhara againn ag sn√°mh thart ar an riachtanas sin
a choinne√°il i sioncron√∫.</p>
<p>Ar √°mhara√≠ an tsaoil, t√° r√©iteach ag Rust ar an bhfadhb seo: slisn√≠ teaghr√°n.</p>
<h3 id="sliseanna-teaghr√°n"><a class="header" href="#sliseanna-teaghr√°n">Sliseanna Teaghr√°n</a></h3>
<p>Tagairt is ea <em>string slice</em> do chuid de <code>String</code>, agus t√° an chuma air seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s = String::from("hello world");

    let hello = &amp;s[0..5];
    let world = &amp;s[6..11];
<span class="boring">}</span></code></pre></pre>
<p>Seachas tagairt don <code>String</code> ioml√°n, is tagairt √© <code>hello</code> d'a
cuid den <code>String</code>, sonraithe sa ghiot√°n breise <code>[0..5]</code>. Crutha√≠mid slisn√≠
ag baint √∫s√°ide as raon laistigh de l√∫ib√≠n√≠ tr√≠ <code>[starting_index..ending_index]</code> a shonr√∫,
√°it a bhfuil <code>starting_index</code> an ch√©ad su√≠omh sa slice agus is √© <code>ending_index</code>
ceann amh√°in n√≠os m√≥ n√° an seasamh deireanach sa slice. Go hinmhe√°nach, na sonra√≠ slice
St√≥r√°lann strucht√∫r an su√≠omh tosaigh agus fad an slice, a
fhreagra√≠onn do <code>ending_index</code> l√∫ide <code>starting_index</code>. Mar sin, i gc√°s <code>let world = &amp;s[6..11];</code>, bheadh ‚Äã‚Äã<code>world</code> ina shlis ina bhfuil pointeoir don
beart ag inn√©acs 6 de <code>s</code> le luach faid <code>5</code>.</p>
<p>Taispe√°nann F√≠or 4-7 √© seo i l√©ar√°id.</p>
<p><img alt="Tr√≠ th√°bla: t√°bla a l√©ir√≠onn sonra√≠ cruachta s, a l√©ir√≠onn
chuig an mbeart ag inn√©acs 0 i dt√°bla de na sonra√≠ teaghr√°n &quot;hello world&quot; ar
an gcarn. D√©anann an tr√≠√∫ t√°bla ionada√≠ocht ar shonra√≠ cruachta an domhain slice, a
t√° luach faid 5 aige agus point√≠ go beart 6 den t√°bla sonra√≠ carn."
src="img/trpl04-07.svg" class="center" style="leithead: 50%;" /></p>
<p><span class="caption">F√≠or 4-7: Slis teaghr√°n a thagra√≠onn do chuid d‚Äôa
<code>String</code></span></p>
<p>Le comhr√©ir raon <code>..</code> Rust, m√°s mian leat tos√∫ ag inn√©acs 0, is f√©idir leat titim
an luach roimh an d√° thr√©imhse. I bhfocail eile, t√° siad seo comhionann:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hello");

let slice = &amp;s[0..2];
let slice = &amp;s[..2];
<span class="boring">}</span></code></pre></pre>
<p>Ar an gcaoi ch√©anna, m√° chuims√≠onn do shlis an beart deireanach den <code>String</code>, tusa
Is f√©idir titim ar an uimhir trailing. Cialla√≠onn s√© sin go bhfuil siad seo comhionann:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hello");

let len = s.len();

let slice = &amp;s[3..len];
let slice = &amp;s[3..];
<span class="boring">}</span></code></pre></pre>
<p>Is f√©idir leat an d√° luach a laghd√∫ freisin chun slice den teaghr√°n ioml√°n a ghlacadh. Mar sin iad seo
comhionann:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hello");

let len = s.len();

let slice = &amp;s[0..len];
let slice = &amp;s[..];
<span class="boring">}</span></code></pre></pre>
<blockquote>
<p>Tabhair faoi deara: Caithfidh inn√©acsanna raon slisne teaghr√°in a bheith ag carachtar bail√≠ UTF-8
teorainneacha. M√° dh√©anann t√∫ iarracht sreangshlis a chruth√∫ i l√°r a
carachtar multibyte, scoirfidh do chl√°r le hearr√°id. Chun cr√≠ocha
√≥ thabhairt isteach slisn√≠ teaghr√°n, t√°imid ag glacadh leis ASCII amh√°in sa chuid seo; a
t√° pl√© n√≠os cr√≠ochn√∫la ar l√°imhse√°il UTF-8 sa <a href="ch08-02-strings.html#storing-utf-8-encoded-text-with-strings">‚ÄúStoring UTF-8 Ionch√≥daithe
T√©acs le Teaghr√°in‚Äù</a><!-- neamhaird --> alt de Chaibidil 8.</p>
</blockquote>
<p>Agus an fhaisn√©is seo go l√©ir san √°ireamh, athscr√≠obhfaimid <code>first_word</code> chun a
slisne. Scr√≠obhtar <code>&amp;str</code> an cine√°l a chialla√≠onn "slis teaghr√°n":</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">fn first_word(s: &amp;String) -&gt; &amp;str {
    let bytes = s.as_bytes();

    for (i, &amp;item) in bytes.iter().enumerate() {
        if item == b' ' {
            return &amp;s[0..i];
        }
    }

    &amp;s[..]
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Faighimid an t-inn√©acs do fhoirceann an fhocail mar a rinneamar i Liosta 4-7, de r√©ir
ag lorg an ch√©ad eachtra de sp√°s. Nuair a aims√≠mid sp√°s, filleann muid a
slisne teaghr√°n ag baint √∫s√°ide as t√∫s na sreinge agus inn√©acs an sp√°is mar an
inn√©acsanna tosaigh agus deiridh.</p>
<p>Anois nuair a ghlaoimid <code>first_word</code>, faighimid ar ais luach amh√°in at√° ceangailte leis an
sonra√≠ bun√∫sacha. T√° an luach comhdh√©anta de thagairt do phointe tosaigh na
an slice agus l√≠on na n-eilimint√≠ sa slice.</p>
<p>Bheadh ‚Äã‚Äãfeidhm <code>second_word</code> ag baint le slisne a thabhairt ar ais freisin:</p>
<pre><code class="language-rust ignore">fn second_word(s: &amp;String) -&gt; &amp;str {</code></pre>
<p>T√° API simpl√≠ againn anois at√° i bhfad n√≠os deacra a praiseach a dh√©anamh mar gheall ar an
cinnteoidh tiomsaitheoir go bhfanfaidh na tagairt√≠ sa <code>String</code> bail√≠. Cuimhnigh
an fabht sa chl√°r i Liost√∫ 4-8, nuair a fuair muid an t-inn√©acs go dt√≠ deireadh an
ch√©ad fhocal ach ansin glanta an teaghr√°n mar sin bh√≠ √°r n-inn√©acs neamhbhail√≠? Bh√≠ an c√≥d sin
m√≠cheart go loighci√∫il ach n√≠or l√©irigh s√© aon earr√°id√≠ l√°ithreach. Bheadh ‚Äã‚Äãna fadhbanna
thaispe√°int suas n√≠os d√©ana√≠ m√° choinnigh muid ag iarraidh √∫s√°id a bhaint as an ch√©ad fhocal inn√©acs le fholmh√∫
teaghr√°n. D√©anann slisn√≠ an fabht seo dodh√©anta agus cuirimid in i√∫l d√∫inn go bhfuil fadhb againn leis
√°r gc√≥d i bhfad n√≠os luaithe. Ag baint √∫s√°ide as an leagan slise de <code>first_word</code> caithfear a
earr√°id ama tiomsaithe:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn first_word(s: &amp;String) -&gt; &amp;str {
</span><span class="boring">    let bytes = s.as_bytes();
</span><span class="boring">
</span><span class="boring">    for (i, &amp;item) in bytes.iter().enumerate() {
</span><span class="boring">        if item == b' ' {
</span><span class="boring">            return &amp;s[0..i];
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    &amp;s[..]
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let mut s = String::from("hello world");

    let word = first_word(&amp;s);

    s.clear(); // error!

    println!("the first word is: {word}");
}</code></pre>
</Listing>
<p>Seo √© earr√°id an tiomsaitheora:</p>
<pre><code class="language-console">$ cargo run
   Compiling ownership v0.1.0 (file:///projects/ownership)
error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable
  --&gt; src/main.rs:18:5
   |
16 |     let word = first_word(&amp;s);
   |                           -- immutable borrow occurs here
17 |
18 |     s.clear(); // error!
   |     ^^^^^^^^^ mutable borrow occurs here
19 |
20 |     println!("the first word is: {word}");
   |                                  ------ immutable borrow later used here

For more information about this error, try `rustc --explain E0502`.
error: could not compile `ownership` (bin "ownership") due to 1 previous error
</code></pre>
<p>A thabhairt chun cuimhne √≥ na rialacha iasachtaithe go m√° t√° tagairt do-inaistrithe againn do
rud √©igin, n√≠ f√©idir linn tagairt mutable a ghlacadh freisin. Toisc go bhfuil g√° le <code>clear</code>
gearr an <code>String</code>, n√≠ m√≥r d√≥ tagairt mutable a fh√°il. An <code>println!</code>
tar √©is an ghlao go <code>clear</code> √∫s√°ideann an tagairt i <code>word</code>, mar sin an do-athlasach
n√≠ m√≥r tagairt a bheith gn√≠omhach f√≥s ag an bpointe sin. D√≠cheada√≠onn meirge an mutable
tagairt in <code>clear</code> agus an tagairt do-athluaite i <code>word</code> as at√° ann cheana f√©in ag an
am c√©anna, agus teipeann ar an tioms√∫. N√≠ hamh√°in go bhfuil Rust tar √©is √°r n-API a dh√©anamh n√≠os √©asca le h√∫s√°id,
ach chuir s√© deireadh freisin le haicme ioml√°n earr√°id√≠ ag am tiomsaithe!</p>
<!-- Old heading. Do not remove or links may break. -->
<p><a id="string-literals-are-slices"></a></p>
<h4 id="teaghr√°n-liteartha-mar-slisn√≠"><a class="header" href="#teaghr√°n-liteartha-mar-slisn√≠">Teaghr√°n Liteartha mar Slisn√≠</a></h4>
<p>Thabhairt chun cuimhne gur labhair muid faoi litreacha teaghr√°n √° st√≥r√°il taobh istigh den d√©n√°rtha. Anois
go bhfuil a fhios againn faoi slisn√≠, is f√©idir linn a thuiscint i gceart litreacha teaghr√°n:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = "Hello, world!";
<span class="boring">}</span></code></pre></pre>
<p>Is √© an cine√°l <code>s</code> anseo n√° <code>&amp;str</code>: is slice √© a dh√≠r√≠onn ar an bpointe sonrach sin de
an d√©n√°rtha. Is √© seo freisin an f√°th go bhfuil sreang-litreacha do-athlasach; Is √© <code>&amp;str</code>
tagairt do- immutable.</p>
<h4 id="sliseanna-teaghr√°n-mar-pharaim√©adair"><a class="header" href="#sliseanna-teaghr√°n-mar-pharaim√©adair">Sliseanna Teaghr√°n mar Pharaim√©adair</a></h4>
<p>M√° bh√≠onn a fhios agat gur f√©idir leat slisn√≠ liteartha a ghlacadh agus luachanna <code>String</code> is f√©idir linn
feabhas amh√°in eile ar <code>first_word</code>, agus sin √© a sh√≠ni√∫:</p>
<pre><code class="language-rust ignore">fn first_word(s: &amp;String) -&gt; &amp;str {</code></pre>
<p>Scr√≠obhfadh Rustacean le n√≠os m√≥ taith√≠ an s√≠ni√∫ a thaispe√°ntar i Liost√∫ 4-9
ina ionad sin toisc go ligeann s√© d√∫inn an fheidhm ch√©anna a √∫s√°id ar an d√° luach <code>&amp;String</code>
agus luachanna <code>&amp;str</code>.</p>
<Listing number="4-9" caption="Improving the `first_word` function by using a string slice for the type of the `s` parameter">
<pre><code class="language-rust ignore">fn first_word(s: &amp;str) -&gt; &amp;str {
<span class="boring">    let bytes = s.as_bytes();
</span><span class="boring">
</span><span class="boring">    for (i, &amp;item) in bytes.iter().enumerate() {
</span><span class="boring">        if item == b' ' {
</span><span class="boring">            return &amp;s[0..i];
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    &amp;s[..]
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let my_string = String::from("hello world");
</span><span class="boring">
</span><span class="boring">    // `first_word` works on slices of `String`s, whether partial or whole
</span><span class="boring">    let word = first_word(&amp;my_string[0..6]);
</span><span class="boring">    let word = first_word(&amp;my_string[..]);
</span><span class="boring">    // `first_word` also works on references to `String`s, which are equivalent
</span><span class="boring">    // to whole slices of `String`s
</span><span class="boring">    let word = first_word(&amp;my_string);
</span><span class="boring">
</span><span class="boring">    let my_string_literal = "hello world";
</span><span class="boring">
</span><span class="boring">    // `first_word` works on slices of string literals, whether partial or whole
</span><span class="boring">    let word = first_word(&amp;my_string_literal[0..6]);
</span><span class="boring">    let word = first_word(&amp;my_string_literal[..]);
</span><span class="boring">
</span><span class="boring">    // Because string literals *are* string slices already,
</span><span class="boring">    // this works too, without the slice syntax!
</span><span class="boring">    let word = first_word(my_string_literal);
</span><span class="boring">}</span></code></pre>
</Listing>
<p>M√° t√° slisne teaghr√°n againn, is f√©idir linn √© sin a chur ar aghaidh go d√≠reach. M√° t√° <code>String</code> againn, t√°imid
is f√©idir leat slice den <code>String</code> n√≥ tagairt don <code>String</code> a chur ar aghaidh. seo
baineann sol√∫bthacht leas as <em>deref coercions</em>, gn√© a chl√∫d√≥imid sa
<a href="ch15-02-deref.html#implicit-deref-coercions-with-functions-and-methods">‚ÄúComh√©igeantais F√≥irne intuigthe le Feidhmeanna agus
Modhanna‚Äù</a><!-- neamhaird--> alt de Chaibidil 15.</p>
<p>Feidhm a shaini√∫ chun sreangshlis a ghlacadh in ionad tagairt do <code>String</code>
a dh√©anann √°r n-API n√≠os ginear√°lta agus n√≠os √∫s√°id√≠ gan aon fheidhmi√∫lacht a chailli√∫int:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn first_word(s: &amp;str) -&gt; &amp;str {
</span><span class="boring">    let bytes = s.as_bytes();
</span><span class="boring">
</span><span class="boring">    for (i, &amp;item) in bytes.iter().enumerate() {
</span><span class="boring">        if item == b' ' {
</span><span class="boring">            return &amp;s[0..i];
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    &amp;s[..]
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let my_string = String::from("hello world");

    // `first_word` works on slices of `String`s, whether partial or whole
    let word = first_word(&amp;my_string[0..6]);
    let word = first_word(&amp;my_string[..]);
    // `first_word` also works on references to `String`s, which are equivalent
    // to whole slices of `String`s
    let word = first_word(&amp;my_string);

    let my_string_literal = "hello world";

    // `first_word` works on slices of string literals, whether partial or whole
    let word = first_word(&amp;my_string_literal[0..6]);
    let word = first_word(&amp;my_string_literal[..]);

    // Because string literals *are* string slices already,
    // this works too, without the slice syntax!
    let word = first_word(my_string_literal);
}</code></pre></pre>
</Listing>
<h3 id="sliseanna-eile"><a class="header" href="#sliseanna-eile">Sliseanna Eile</a></h3>
<p>Baineann slisn√≠ teaghr√°n, mar a d'fh√©adf√° a shamhl√∫, go sonrach le teaghr√°in. Ach t√° a
cine√°l slice n√≠os ginear√°lta freisin. Smaoinigh ar an eagar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = [1, 2, 3, 4, 5];
<span class="boring">}</span></code></pre></pre>
<p>D√≠reach mar a d‚Äôfh√©adfadh gur mhaith linn tagairt a dh√©anamh do chuid de shraith, b‚Äôfh√©idir gur mhaith linn tagairt a dh√©anamh
chuid d'eagar. Dh√©anfaimis mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = [1, 2, 3, 4, 5];

let slice = &amp;a[1..3];

assert_eq!(slice, &amp;[2, 3]);
<span class="boring">}</span></code></pre></pre>
<p>T√° an cine√°l <code>&amp;[i32]</code> ar an sliseog seo. Oibr√≠onn s√© ar an mbealach c√©anna is a dh√©anann slisn√≠ teaghr√°n, tr√≠
ag st√≥r√°il tagairt don ch√©ad eilimint agus fad. Bainfidh t√∫ √∫s√°id as an gcine√°l seo
slice do gach cine√°l baili√∫ch√°in eile. D√©anfaimid pl√© ar na baili√∫ch√°in seo i
mionsonra√≠ nuair a labhra√≠mid faoi veicteoir√≠ i gCaibidil 8.</p>
<h2 id="achoimre-3"><a class="header" href="#achoimre-3">Achoimre</a></h2>
<p>Cinnt√≠onn coincheapa na h√∫in√©ireachta, na hiasachta, agus na slisn√≠ s√°bh√°ilteacht cuimhne i Rust
cl√°ir ag am tiomsaithe. Tugann an teanga Rust smacht duit ar do chuimhne
√∫s√°id ar an mbealach c√©anna le teangacha r√≠omhchl√°raithe c√≥rais eile, ach a bhfuil an
√∫in√©ir na sonra√≠ a ghlanadh suas go huathoibr√≠och na sonra√≠ sin nuair a th√©ann an t-√∫in√©ir as raon feidhme
cialla√≠onn s√© seo nach g√° duit c√≥d breise a scr√≠obh agus a dh√≠fhabht√∫ chun an rial√∫ seo a fh√°il.</p>
<p>B√≠onn tionchar ag √∫in√©ireacht ar an gcaoi a n-oibr√≠onn go leor codanna eile de Rust, mar sin labhr√≥imid faoi
na coincheapa seo n√≠os faide ar fud an chuid eile den leabhar. Bogaimis ar aghaidh go dt√≠
Caibidil 5 agus f√©ach ar ph√≠osa√≠ sonra√≠ a ghr√∫p√°il le ch√©ile i <code>struct</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="structs-a-√ös√°id-chun-sonra√≠-gaolmhara-a-strucht√∫r√∫"><a class="header" href="#structs-a-√ös√°id-chun-sonra√≠-gaolmhara-a-strucht√∫r√∫">Structs a √ös√°id chun Sonra√≠ Gaolmhara a Strucht√∫r√∫</a></h1>
<p>Is cine√°l sonra√≠ saincheaptha √© <em>struct</em>, n√≥ <em>strucht√∫r</em>, a ligeann duit pac√°iste a dh√©anamh
le ch√©ile agus ainmnigh luachanna gaolmhara iolracha a dh√©anann suas gr√∫pa br√≠och. M√°s rud √©
t√° cur amach agat ar theanga at√° d√≠rithe ar oibiachta√≠, t√° <em>struct</em> cos√∫il le
tr√©ithe sonra√≠ an r√©ad. Sa chaibidil seo, d√©anfaimid compar√°id agus codarsnacht idir na tuples
le strucht√∫ir chun cur leis an m√©id at√° ar eolas agat cheana f√©in agus a l√©iri√∫ cathain a bheidh strucht√∫ir ann
bealach n√≠os fearr chun sonra√≠ a ghr√∫p√°il.</p>
<p>Taispe√°nfaimid conas strucht√∫ir a shaini√∫ agus a chur ar an toirt. D√©anfaimid pl√© ar conas
feidhmeanna gaolmhara a shaini√∫, go h√°irithe an cine√°l feidhmeanna gaolmhara ar a dtugtar
<em>methods</em>, chun iompra√≠ocht a bhaineann le cine√°l strucht√∫ir a shonr√∫. Strucht√∫ir agus enums
(pl√©ite i gCaibidil 6) na bloic th√≥g√°la chun cine√°lacha nua a chruth√∫ i do
fearainn an chl√°ir chun leas ioml√°n a bhaint as seice√°il cine√°il ama tiomsaithe Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="strucht√∫ir-a-shainmh√≠ni√∫-agus-a-thionscnamh"><a class="header" href="#strucht√∫ir-a-shainmh√≠ni√∫-agus-a-thionscnamh">Strucht√∫ir a Shainmh√≠ni√∫ agus a Thionscnamh</a></h2>
<p>T√° strucht√∫ir cos√∫il le tuples, a phl√©itear in <a href="ch03-02-data-types.html#the-tuple-type">‚ÄúAn Cine√°l Tuple‚Äù</a><!--
neamhaird a dh√©anamh ar --> alt, sa mh√©id is go bhfuil luachanna gaolmhara iolracha ag an d√° cheann. Cos√∫il le tuples, an
is f√©idir cine√°lacha √©ags√∫la a bheith i bp√≠osa√≠ strucht√∫ir. Murab ionann agus tuples, i struct
ainmneoidh t√∫ gach p√≠osa sonra√≠ ionas go mbeidh s√© soil√©ir cad a chialla√≠onn na luachanna. Ag cur leo seo
Cialla√≠onn ainmneacha go bhfuil strucht√∫ir n√≠os sol√∫btha n√° tuples: n√≠ g√° duit a bheith ag brath
ar ord na sonra√≠ chun luachanna an tsampla a shonr√∫ n√≥ a rochtain.</p>
<p>Chun strucht√∫r a shaini√∫, cuirimid an eochairfhocal <code>struct</code> isteach agus ainmn√≠mid an strucht√∫r ioml√°n. A
ba ch√≥ir go nd√©anfadh ainm struct cur s√≠os ar th√°bhacht na bp√≠osa√≠ sonra√≠ at√° ann
gr√∫p√°ilte le ch√©ile. Ansin, taobh istigh de l√∫ib√≠n√≠ curly, sain√≠mid ainmneacha agus cine√°lacha
na p√≠osa√≠ sonra√≠, ar a dtugaimid <em>fields</em>. Mar shampla, taispe√°nann Liost√∫ 5-1 a
strucht√∫r a st√≥r√°lann faisn√©is faoi chuntas √∫s√°ideora.</p>
<Listing number="5-1" file-name="src/main.rs" caption="A `User` struct definition">
<pre><pre class="playground"><code class="language-rust">struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Chun strucht√∫r a √∫s√°id tar √©is d√∫inn √© a shaini√∫, crutha√≠mid <em>gc√°s</em> den strucht√∫r sin
tr√≠ luachanna nithi√∫la a shonr√∫ do gach ceann de na r√©ims√≠. Crutha√≠mid sampla tr√≠
ag lua ainm an strucht√∫ir agus ansin cuir l√∫ib√≠n√≠ curla√≠ ina bhfuil <em>key:
value</em> p√©ir√≠, √°it a bhfuil na heochracha ainmneacha na r√©ims√≠ agus na luachanna an
sonra√≠ ba mhaith linn a st√≥r√°il sna r√©ims√≠ sin. N√≠ g√° d√∫inn na r√©ims√≠ a shonr√∫ i
an t-ord c√©anna inar dhearbhaigh muid iad sa struct. I bhfocail eile, t√° an
T√° sainmh√≠ni√∫ strucht√∫r cos√∫il le teimpl√©ad ginear√°lta don chine√°l, agus c√°sanna a l√≠onadh
sa teimpl√©ad sin le sonra√≠ ar leith chun luachanna den chine√°l a chruth√∫. Le haghaidh
Mar shampla, is f√©idir linn √∫s√°ideoir √°irithe a dhearbh√∫ mar a thaispe√°ntar i Liost√∫ 5-2.</p>
<Listing number="5-2" file-name="src/main.rs" caption="Creating an instance of the `User` struct">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct User {
</span><span class="boring">    active: bool,
</span><span class="boring">    username: String,
</span><span class="boring">    email: String,
</span><span class="boring">    sign_in_count: u64,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let user1 = User {
        active: true,
        username: String::from("someusername123"),
        email: String::from("someone@example.com"),
        sign_in_count: 1,
    };
}</code></pre></pre>
</Listing>
<p>Chun luach sonrach a fh√°il √≥ strucht√∫r, √∫s√°idimid nodaireacht poncanna. Mar shampla, go
rochtain a fh√°il ar sheoladh r√≠omhphoist an √∫s√°ideora seo, √∫s√°idimid <code>user1.email</code>. M√°s √© an c√°s
mutable, is f√©idir linn luach a athr√∫ tr√≠d an nodaireacht ponc a √∫s√°id agus a shannadh isteach i
r√©imse ar leith. L√©ir√≠onn liost√∫ 5-3 conas an luach sa <code>email</code> a athr√∫
r√©imse shampla <code>User</code> mutable.</p>
<Listing number="5-3" file-name="src/main.rs" caption="Changing the value in the `email` field of a `User` instance">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct User {
</span><span class="boring">    active: bool,
</span><span class="boring">    username: String,
</span><span class="boring">    email: String,
</span><span class="boring">    sign_in_count: u64,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let mut user1 = User {
        active: true,
        username: String::from("someusername123"),
        email: String::from("someone@example.com"),
        sign_in_count: 1,
    };

    user1.email = String::from("anotheremail@example.com");
}</code></pre></pre>
</Listing>
<p>Tabhair faoi deara go gcaithfidh an √°sc ioml√°n a bheith mutable; N√≠ ligeann meirge d√∫inn marc√°il
ach r√©ims√≠ √°irithe mar shoghluaiste. Mar is amhlaidh le haon slonn, is f√©idir linn ceann nua a th√≥g√°il
shampla an struct mar an slonn deiridh i gcorp feidhme a
go hintuigthe cuir ar ais an c√°s nua sin.</p>
<p>Taispe√°nann liost√∫ 5-4 feidhm <code>build_user</code> a sheolann sampla <code>User</code> ar ais le
an seoladh r√≠omhphoist agus an t-ainm √∫s√°ideora a tugadh. Faigheann an r√©imse <code>active</code> luach <code>true</code>, agus
faigheann an <code>sign_in_count</code> luach <code>1</code>.</p>
<Listing number="5-4" file-name="src/main.rs" caption="A `build_user` function that takes an email and username and returns a `User` instance">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct User {
</span><span class="boring">    active: bool,
</span><span class="boring">    username: String,
</span><span class="boring">    email: String,
</span><span class="boring">    sign_in_count: u64,
</span><span class="boring">}
</span><span class="boring">
</span>fn build_user(email: String, username: String) -&gt; User {
    User {
        active: true,
        username: username,
        email: email,
        sign_in_count: 1,
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let user1 = build_user(
</span><span class="boring">        String::from("someone@example.com"),
</span><span class="boring">        String::from("someusername123"),
</span><span class="boring">    );
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>D√©anann s√© ciall paraim√©adair na feidhme a ainmni√∫ leis an ainm c√©anna leis an strucht√∫r
r√©ims√≠, ach caithfidh t√∫ na hainmneacha r√©imse <code>email</code> agus <code>username</code> a athdh√©anamh agus
athr√≥ga beag√°n tedious. D√° mbeadh n√≠os m√≥ r√©ims√≠ sa strucht√∫r, agus gach ainm √° athr√°
bheadh ‚Äã‚Äãn√≠os m√≥ f√≥s annoying. Ar √°mhara√≠ an tsaoil, t√° gearrscann√°n √°isi√∫il ann!</p>
<!-- Old heading. Do not remove or links may break. -->
<p><a id="using-the-field-init-shorthand-when-variables-and-fields-have-the-same-name"></a></p>
<h3 id="ag-baint-√∫s√°ide-as-an-r√©imse-init-gearrl√°mh"><a class="header" href="#ag-baint-√∫s√°ide-as-an-r√©imse-init-gearrl√°mh">Ag baint √∫s√°ide as an R√©imse Init Gearrl√°mh</a></h3>
<p>Toisc go bhfuil ainmneacha na bparaim√©adar agus na hainmneacha p√°irce struct d√≠reach mar a ch√©ile i
Ag liost√∫ 5-4, is f√©idir linn an chomhr√©ir <em>field init shorthand</em> a √∫s√°id chun athscr√≠obh
<code>build_user</code> mar sin iompra√≠onn s√© d√≠reach mar an gc√©anna ach n√≠ bh√≠onn an athr√° air
<code>username</code> agus <code>email</code>, mar a thaispe√°ntar i Liost√∫ 5-5.</p>
<Listing number="5-5" file-name="src/main.rs" caption="A `build_user` function that uses field init shorthand because the `username` and `email` parameters have the same name as struct fields">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct User {
</span><span class="boring">    active: bool,
</span><span class="boring">    username: String,
</span><span class="boring">    email: String,
</span><span class="boring">    sign_in_count: u64,
</span><span class="boring">}
</span><span class="boring">
</span>fn build_user(email: String, username: String) -&gt; User {
    User {
        active: true,
        username,
        email,
        sign_in_count: 1,
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let user1 = build_user(
</span><span class="boring">        String::from("someone@example.com"),
</span><span class="boring">        String::from("someusername123"),
</span><span class="boring">    );
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, t√°imid ag cruth√∫ sampla nua den strucht√∫r <code>User</code>, a bhfuil r√©imse aige
darb ainm <code>email</code>. Ba mhaith linn luach an r√©imse <code>email</code> a shocr√∫ go dt√≠ an luach sa
paraim√©adar <code>email</code> den fheidhm <code>build_user</code>. Toisc go bhfuil an r√©imse <code>email</code> agus
T√° an t-ainm c√©anna ar an bparaim√©adar <code>email</code>, n√≠ g√° d√∫inn ach <code>email</code> a scr√≠obh in √°it
n√° <code>email: email</code>.</p>
<h3 id="c√°sanna-a-chruth√∫-√≥-ch√°sanna-eile-le-comhr√©ir-nuashonraithe-strucht√∫r"><a class="header" href="#c√°sanna-a-chruth√∫-√≥-ch√°sanna-eile-le-comhr√©ir-nuashonraithe-strucht√∫r">C√°sanna a Chruth√∫ √≥ Ch√°sanna Eile le Comhr√©ir Nuashonraithe Strucht√∫r</a></h3>
<p>Is minic a bh√≠onn s√© √∫s√°ideach sampla nua de strucht√∫r a chruth√∫ a chuims√≠onn an chuid is m√≥ de
na luachanna √≥ shampla eile, ach athra√≠onn roinnt. Is f√©idir leat √© seo a dh√©anamh ag baint √∫s√°ide as
<em>struct nuashonraigh comhr√©ir</em>.</p>
<p>Ar dt√∫s, i Liost√∫ 5-6 l√©ir√≠mid conas mar shampla <code>User</code> nua a chruth√∫ in <code>user2</code>
go rialta, gan an chomhr√©ir nuashonraithe. Shocraigh muid luach nua do <code>email</code> ach
n√≥ bain √∫s√°id as na luachanna c√©anna √≥ <code>user1</code> a chruthaigh muid i Liost√∫ 5-2.</p>
<Listing number="5-6" file-name="src/main.rs" caption="Creating a new `User` instance using all but one of the values from `user1`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct User {
</span><span class="boring">    active: bool,
</span><span class="boring">    username: String,
</span><span class="boring">    email: String,
</span><span class="boring">    sign_in_count: u64,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    // --snip--
<span class="boring">
</span><span class="boring">    let user1 = User {
</span><span class="boring">        email: String::from("someone@example.com"),
</span><span class="boring">        username: String::from("someusername123"),
</span><span class="boring">        active: true,
</span><span class="boring">        sign_in_count: 1,
</span><span class="boring">    };
</span>
    let user2 = User {
        active: user1.active,
        username: user1.username,
        email: String::from("another@example.com"),
        sign_in_count: user1.sign_in_count,
    };
}</code></pre></pre>
</Listing>
<p>Ag baint √∫s√°ide as comhr√©ir nuashonraithe struct, is f√©idir linn an √©ifeacht ch√©anna a bhaint amach le n√≠os l√∫ c√≥d, mar
l√©irithe i Liosta 5-7. Sonra√≠onn an chomhr√©ir <code>..</code> nach bhfuil na r√©ims√≠ at√° f√°gtha
ba cheart go mbeadh an luach c√©anna ag na r√©ims√≠ a leagtar s√≠os go sainr√°ite agus at√° ag na r√©ims√≠ sa ch√°s ar leith.</p>
<Listing number="5-7" file-name="src/main.rs" caption="Using struct update syntax to set a new `email` value for a `User` instance but to use the rest of the values from `user1`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct User {
</span><span class="boring">    active: bool,
</span><span class="boring">    username: String,
</span><span class="boring">    email: String,
</span><span class="boring">    sign_in_count: u64,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    // --snip--
<span class="boring">
</span><span class="boring">    let user1 = User {
</span><span class="boring">        email: String::from("someone@example.com"),
</span><span class="boring">        username: String::from("someusername123"),
</span><span class="boring">        active: true,
</span><span class="boring">        sign_in_count: 1,
</span><span class="boring">    };
</span>
    let user2 = User {
        email: String::from("another@example.com"),
        ..user1
    };
}</code></pre></pre>
</Listing>
<p>Crutha√≠onn an c√≥d i Liost√∫ 5-7 sampla freisin in <code>user2</code> a bhfuil a
luach difri√∫il don <code>email</code> ach t√° na luachanna c√©anna aige don <code>username</code>,
r√©ims√≠ <code>active</code>, agus <code>sign_in_count</code> √≥ <code>user1</code>. Caithfidh an <code>..user1</code> teacht ar deireadh
a shonr√∫ gur cheart go bhfaigheadh ‚Äã‚Äãaon r√©ims√≠ at√° f√°gtha a luachanna √≥ na
r√©ims√≠ comhfhreagracha in <code>user1</code>, ach is f√©idir linn a roghn√∫ luachanna a shonr√∫ mar
go leor r√©ims√≠ mar ba mhaith linn in aon ord, beag beann ar ord na r√©ims√≠ i
sainmh√≠ni√∫ an strucht√∫ir.</p>
<p>Tabhair faoi deara go n-√∫s√°ideann an chomhr√©ir nuashonraithe struct <code>=</code> cos√∫il le tasc; t√° s√© seo mar gheall ar
bogann s√© na sonra√≠, d√≠reach mar a chonaic muid sa [‚ÄúAthr√≥ga agus Sonra√≠ Idirghn√≠omh√∫ le
Bog‚Äù][bogadh]<!-- neamhaird --> alt. Sa sampla seo, n√≠ f√©idir linn a √∫s√°id a thuilleadh
<code>user1</code> ina ioml√°ine tar √©is <code>user2</code> a chruth√∫ mar go bhfuil an <code>String</code> sa
Bogadh an r√©imse <code>username</code> de <code>user1</code> go <code>user2</code>. D√° mbeadh <code>user2</code> nua tugtha againn
Luachanna <code>String</code> le haghaidh <code>email</code> agus <code>username</code> araon, agus mar sin n√≠or √∫s√°ideadh ach an
luachanna <code>active</code> agus <code>sign_in_count</code> √≥ <code>user1</code>, ansin bheadh ‚Äã‚Äã<code>user1</code> f√≥s
bail√≠ tar √©is <code>user2</code> a chruth√∫. Is cine√°lacha iad <code>active</code> agus <code>sign_in_count</code> araon
an tr√©ith <code>Copy</code> a chur i bhfeidhm, mar sin an iompar a phl√©amar sa [‚ÄúStack-Only
Sonra√≠: C√≥ipe√°il‚Äù][c√≥ip]<!-- neamhaird --> bheadh ‚Äã‚Äãfeidhm ag an alt. Is f√©idir linn a √∫s√°id f√≥s
<code>user1.email</code> sa sampla seo, toisc gur <em>n√≠</em> bogadh amach a luach.</p>
<h3 id="ag-√ös√°id-strucht√∫ir-tuple-gan-r√©ims√≠-ainmnithe-chun-cine√°lacha-√âags√∫la-a-chruth√∫"><a class="header" href="#ag-√ös√°id-strucht√∫ir-tuple-gan-r√©ims√≠-ainmnithe-chun-cine√°lacha-√âags√∫la-a-chruth√∫">Ag √ös√°id Strucht√∫ir Tuple Gan R√©ims√≠ Ainmnithe chun Cine√°lacha √âags√∫la a Chruth√∫</a></h3>
<p>Taca√≠onn meirge freisin le strucht√∫ir at√° cos√∫il le tuples, ar a dtugtar <em>tuple structs</em>.
T√° an bhr√≠ bhreise ag strucht√∫ir tuple a shol√°thra√≠onn an t-ainm strucht√∫ir ach n√≠l an bhr√≠ eile aige
ainmneacha a bhaineann lena r√©ims√≠; in √°it, n√≠l acu ach cine√°lacha an
r√©ims√≠. T√° strucht√∫ir tuple √∫s√°ideach nuair is mian leat ainm a thabhairt don tuple ioml√°n
agus d√©an cine√°l difri√∫il den tuple √≥ thuple eile, agus nuair a ainmn√≠tear gach ceann acu
r√©imse mar at√° i strucht√∫r rialta bheadh ‚Äã‚Äãbriathra n√≥ iomarcach.</p>
<p>Chun tuple struct a shaini√∫, cuir t√∫s leis an eochairfhocal <code>struct</code> agus an t-ainm struct
ina dhiaidh sin na cine√°lacha sa tuple. Mar shampla, anseo sain√≠mid agus √∫s√°idimid dh√° cheann
tuple structs darb ainm <code>Color</code> agus <code>Point</code>:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">struct Color(i32, i32, i32);
struct Point(i32, i32, i32);

fn main() {
    let black = Color(0, 0, 0);
    let origin = Point(0, 0, 0);
}</code></pre></pre>
</Listing>
<p>Tabhair faoi deara gur cine√°lacha difri√∫la iad na luachanna <code>black</code> agus <code>origin</code> toisc go bhfuil siad
c√°sanna de strucht√∫ir tuple √©ags√∫la. Is √© a chine√°l f√©in gach strucht√∫r a shain√≠onn t√∫,
c√© go bhf√©adfadh na cine√°lacha c√©anna a bheith sna r√©ims√≠ laistigh den strucht√∫r. Le haghaidh
Mar shampla, n√≠ f√©idir le feidhm a ghlacann paraim√©adar den chine√°l <code>Color</code> a
<code>Point</code> mar arg√≥int, c√© go bhfuil an d√° chine√°l comhdh√©anta de thr√≠ <code>i32</code>
luachanna. Seachas sin, t√° c√°sanna tuple struct cos√∫il le tuples sa mh√©id is gur f√©idir leat
iad a scrios ina bp√≠osa√≠ aonair, agus is f√©idir leat √∫s√°id a bhaint as <code>.</code> dhiaidh sin
ag an inn√©acs chun rochtain a fh√°il ar luach aonair. Murab ionann agus tuples, tuple structs
iarraidh ort an cine√°l strucht√∫ir a ainmni√∫ nuair a dh√©anann t√∫ iad a mhilleadh. Le haghaidh
Mar shampla, scr√≠obhfaimis <code>Let Point(x, y, z) = point</code>.</p>
<h3 id="strucht√∫ir-at√°-cos√∫il-le-haonad-gan-r√©ims√≠-ar-bith"><a class="header" href="#strucht√∫ir-at√°-cos√∫il-le-haonad-gan-r√©ims√≠-ar-bith">Strucht√∫ir at√° cos√∫il le hAonad gan R√©ims√≠ ar bith</a></h3>
<p>Is f√©idir leat strucht√∫ir a shaini√∫ freisin nach bhfuil r√©ims√≠ ar bith acu! Tugtar iad seo
<em>unit-like structs</em> toisc go n-iompra√≠onn siad mar an gc√©anna le <code>()</code>, cine√°l an aonaid sin
luaigh muid i <a href="ch03-02-data-types.html#the-tuple-type">"An Cine√°l Tuple"</a><!-- neamhaird --> alt. Aonad-mhaith
is f√©idir le strucht√∫ir a bheith √∫s√°ideach nuair is g√° duit tr√©ith de chine√°l √©igin a chur i bhfeidhm ach nach nd√©anann
aon sonra√≠ is mian leat a st√≥r√°il sa chine√°l f√©in. Pl√©ifimid tr√©ithe
i gCaibidil 10. Seo sampla de strucht√∫r aonaid a dhearbh√∫ agus a thabhairt ar an toirt
darb ainm <code>AlwaysEqual</code>:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">struct AlwaysEqual;

fn main() {
    let subject = AlwaysEqual;
}</code></pre></pre>
</Listing>
<p>Chun <code>AlwaysEqual</code> a shaini√∫, √∫s√°idimid an eochairfhocal <code>struct</code>, an t-ainm a theasta√≠onn uainn, agus
ansin leathstad. N√≠l g√° le l√∫ib√≠n√≠ n√≥ l√∫ib√≠n√≠ chatach! Ansin is f√©idir linn a fh√°il ar
mar shampla de <code>AlwaysEqual</code> san athr√≥g <code>subject</code> ar bhealach comhchos√∫il: ag baint √∫s√°ide as an
an t-ainm at√° sainmh√≠nithe againn, gan aon l√∫ib√≠n√≠ n√≥ l√∫ib√≠n√≠ chatach. Samhlaigh sin n√≠os d√©ana√≠
cuirfimid iompar den chine√°l seo i bhfeidhm ionas go mbeidh gach c√°s de
B√≠onn <code>AlwaysEqual</code> i gc√≥na√≠ cothrom le gach c√°s d'aon chine√°l eile, b'fh√©idir
go mbeadh toradh aitheanta acu chun cr√≠ocha t√°st√°la. N√≠ bheadh ‚Äã‚Äãaon sonra√≠ ag teast√°il uainn
cuir an t-iompar sin i bhfeidhm! Feicfidh t√∫ i gCaibidil 10 conas tr√©ithe a shaini√∫ agus
iad a chur i bhfeidhm ar aon chine√°l, lena n-√°ir√≠tear strucht√∫ir aonad-mhaith.</p>
<blockquote>
<h3 id="√öin√©ireacht-sonra√≠-strucht√∫r"><a class="header" href="#√öin√©ireacht-sonra√≠-strucht√∫r">√öin√©ireacht Sonra√≠ Strucht√∫r</a></h3>
<p>Sa sainmh√≠ni√∫ ar strucht√∫r <code>User</code> i Liost√∫ 5-1, d'√∫s√°ideamar an <code>String</code> faoi √∫in√©ireacht
cine√°l seachas an cine√°l sliseog teaghr√°n <code>&amp;str</code>. Is rogha d'aon ghn√≥ √© seo
mar ba mhaith linn go mbeadh √∫in√©ireacht ag gach c√°s den strucht√∫r seo ar a chuid sonra√≠ go l√©ir agus ar a son
go mbeidh na sonra√≠ sin bail√≠ chomh fada agus a bheidh an strucht√∫r ioml√°n bail√≠.</p>
<p>Is f√©idir freisin do strucht√∫ir tagairt√≠ a st√≥r√°il do shonra√≠ ar le rud √©igin iad
eile, ach chun √© sin a dh√©anamh teasta√≠onn √∫s√°id <em>lifetimes</em>, gn√© Rust a dh√©anfaimid
pl√©igh i gCaibidil 10. Cinnt√≠onn Saolr√© go bhfuil na sonra√≠ d√° dtagra√≠tear ag struct
bail√≠ chomh fada agus at√° an strucht√∫r. Ligean le r√° go nd√©anann t√∫ iarracht tagairt a st√≥r√°il
i strucht√∫r gan saolr√©anna a shonr√∫, mar a leanas; n√≠ oibreoidh s√© seo:</p>
<Listing file-name="src/main.rs">
<!-- CAN'T EXTRACT SEE https://github.com/rust-lang/mdBook/issues/1127 -->
<pre><code class="language-rust ignore does_not_compile">struct User {
    active: bool,
    username: &amp;str,
    email: &amp;str,
    sign_in_count: u64,
}

fn main() {
    let user1 = User {
        active: true,
        username: "someusername123",
        email: "someone@example.com",
        sign_in_count: 1,
    };
}</code></pre>
</Listing>
<p>D√©anfaidh an tiomsaitheoir gear√°n go bhfuil sonra√≠ocht saoil de dh√≠th air:</p>
<pre><code class="language-console">$ cargo run
   Compiling structs v0.1.0 (file:///projects/structs)
error[E0106]: missing lifetime specifier
 --&gt; src/main.rs:3:15
  |
3 |     username: &amp;str,
  |               ^ expected named lifetime parameter
  |
help: consider introducing a named lifetime parameter
  |
1 ~ struct User&lt;'a&gt; {
2 |     active: bool,
3 ~     username: &amp;'a str,
  |

error[E0106]: missing lifetime specifier
 --&gt; src/main.rs:4:12
  |
4 |     email: &amp;str,
  |            ^ expected named lifetime parameter
  |
help: consider introducing a named lifetime parameter
  |
1 ~ struct User&lt;'a&gt; {
2 |     active: bool,
3 |     username: &amp;str,
4 ~     email: &amp;'a str,
  |

Chun tuilleadh eolais a fh√°il faoin earr√°id seo, bain triail as `rustc --explain E0106`.
error: n√≠orbh fh√©idir `structs` (bin "structs") a thioms√∫ mar gheall ar 2 earr√°id roimhe seo
</code></pre>
<p>I gCaibidil 10, pl√©ifimid conas na hearr√°id√≠ seo a cheart√∫ ionas gur f√©idir leat iad a st√≥r√°il
tagairt√≠ i strucht√∫ir, ach faoi l√°thair, socr√≥imid earr√°id√≠ mar seo ag baint √∫s√°ide as √∫in√©ireacht
cine√°lacha cos√∫il le <code>String</code> in ionad tagairt√≠ cos√∫il le <code>&amp;str</code>.</p>
</blockquote>
<!-- manual-regeneration
for the error above
after running update-rustc.sh:
pbcopy < listings/ch05-using-structs-to-structure-related-data/no-listing-02-reference-in-struct/output.txt
paste above
add `> ` before every line -->
<div style="break-before: page; page-break-before: always;"></div><h2 id="cl√°r-samplach-ag-√ös√°id-structs"><a class="header" href="#cl√°r-samplach-ag-√ös√°id-structs">Cl√°r Samplach ag √ös√°id Structs</a></h2>
<p>Chun a thuiscint cathain a d‚Äôfh√©adfadh muid a bheith ag iarraidh strucht√∫ir a √∫s√°id, scr√≠obhaimis cl√°r a
r√≠omhann s√© achar dronuilleog. Tos√≥imid tr√≠ athr√≥ga aonair a √∫s√°id, agus
ansin athmhacnaigh an cl√°r go dt√≠ go mbeimid ag √∫s√°id structs ina ionad.</p>
<p>D√©anaimis tionscadal d√©n√°rtha nua le lasta ar a dtugtar <em>rectangles</em> a ghlacfaidh
leithead agus airde dronuilleog sonraithe i bpicteil√≠n agus r√≠omh an t-achar
den dronuilleog. L√©ir√≠onn liost√∫ 5-8 cl√°r gearr le bealach amh√°in le d√©anamh
go d√≠reach √© sin i <em>src/main.rs</em> √°r dtionscadal.</p>
<Listing number="5-8" file-name="src/main.rs" caption="Calculating the area of a rectangle specified by separate width and height variables">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let width1 = 30;
    let height1 = 50;

    println!(
        "The area of the rectangle is {} square pixels.",
        area(width1, height1)
    );
}

fn area(width: u32, height: u32) -&gt; u32 {
    width * height
}</code></pre></pre>
</Listing>
<p>Now, run this program using <code>cargo run</code>:</p>
<pre><code class="language-console">$ cargo run
   Compiling rectangles v0.1.0 (file:///projects/rectangles)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.42s
     Running `target/debug/rectangles`
The area of the rectangle is 1500 square pixels.
</code></pre>
<p>√âir√≠onn leis an gc√≥d seo achar na dronuilleoige a dh√©anamh amach tr√≠ ghlaoch a chur ar an
feidhm <code>area</code> le gach gn√©, ach is f√©idir linn n√≠os m√≥ a dh√©anamh chun an c√≥d seo a dh√©anamh soil√©ir
agus inl√©ite.</p>
<p>T√° an tsaincheist leis an gc√≥d seo le feice√°il i s√≠ni√∫ <code>area</code>:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main() {
</span><span class="boring">    let width1 = 30;
</span><span class="boring">    let height1 = 50;
</span><span class="boring">
</span><span class="boring">    println!(
</span><span class="boring">        "The area of the rectangle is {} square pixels.",
</span><span class="boring">        area(width1, height1)
</span><span class="boring">    );
</span><span class="boring">}
</span><span class="boring">
</span>fn area(width: u32, height: u32) -&gt; u32 {
<span class="boring">    width * height
</span><span class="boring">}</span></code></pre>
<p>T√° an fheidhm <code>area</code> ceaptha chun achar dronuilleog amh√°in a r√≠omh, ach an
t√° dh√° pharaim√©adar ag an bhfeidhm a scr√≠obhamar, agus n√≠l s√© soil√©ir √°it ar bith in√°r
cl√°r go bhfuil baint ag na paraim√©adair. Bheadh ‚Äã‚Äã‚Äã‚Äãs√© n√≠os inl√©ite agus n√≠os m√≥
inbhainistithe leithead agus airde a ghr√∫p√°il le ch√©ile. T√° bealach amh√°in pl√©ite againn cheana f√©in
d'fh√©adfaimis √© sin a dh√©anamh sa <a href="ch03-02-data-types.html#the-tuple-type">"An Cine√°l Tuple"</a><!-- neamhaird a dh√©anamh ar --> alt
de Chaibidil 3: tr√≠ √∫s√°id a bhaint as tuples.</p>
<h3 id="athmhachnamh-le-tuples"><a class="header" href="#athmhachnamh-le-tuples">Athmhachnamh le Tuples</a></h3>
<p>L√©ir√≠onn liost√∫ 5-9 leagan eile d√°r gcl√°r a √∫s√°ideann tuples.</p>
<Listing number="5-9" file-name="src/main.rs" caption="Specifying the width and height of the rectangle with a tuple">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let rect1 = (30, 50);

    println!(
        "The area of the rectangle is {} square pixels.",
        area(rect1)
    );
}

fn area(dimensions: (u32, u32)) -&gt; u32 {
    dimensions.0 * dimensions.1
}</code></pre></pre>
</Listing>
<p>Ar bhealach amh√°in, t√° an cl√°r seo n√≠os fearr. Tuples in i√∫l d√∫inn a chur le beag√°n de strucht√∫r, agus
n√≠l ach arg√≥int amh√°in √° rith againn anois. Ach ar bhealach eile, t√° an leagan seo n√≠os l√∫
soil√©ir: n√≠ ainmn√≠onn tuples a n-eilimint√≠, mar sin n√≠ m√≥r d√∫inn a inn√©acs√∫ isteach i gcodanna
an tuple, rud a fh√°gann nach bhfuil √°r r√≠omh chomh soil√©ir.</p>
<p>N√≠ bhainfeadh an leithead agus an airde a mheascadh le r√≠omh an limist√©ir, ach d√° mbeadh
ba mhaith linn an dronuilleog a tharraingt ar an sc√°ile√°n, is cuma! Bheadh ‚Äã‚Äãorainn
coinnigh i gcuimhne gurb √© <code>width</code> an t-inn√©acs tuple <code>0</code> agus is √© <code>height</code> an tuple
inn√©acs <code>1</code>. Bheadh ‚Äã‚Äãs√© seo n√≠os deacra f√≥s do dhuine eile a dh√©anamh amach agus a choinne√°il i
aigne d√° mba rud √© go n-√∫s√°idfeadh siad √°r gc√≥d. Toisc nach bhfuil muid tar √©is an bhr√≠ a chur in i√∫l
√°r sonra√≠ in√°r gc√≥d, t√° s√© n√≠os √©asca anois earr√°id√≠ a thabhairt isteach.</p>
<h3 id="athmhacr√∫-le-strucht√∫ir-n√≠os-m√≥-br√≠-a-chur-leis"><a class="header" href="#athmhacr√∫-le-strucht√∫ir-n√≠os-m√≥-br√≠-a-chur-leis">Athmhacr√∫ le Strucht√∫ir: N√≠os M√≥ Br√≠ a Chur Leis</a></h3>
<p>Bainimid √∫s√°id as strucht√∫ir chun br√≠ a chur leis tr√≠ na sonra√≠ a lip√©ad√∫. Is f√©idir linn an tuple a athr√∫
t√°imid ag baint √∫s√°ide as strucht√∫r le ainm don ioml√°n chomh maith le hainmneacha don
p√°irteanna, mar a thaispe√°ntar i Liosta 5-10.</p>
<Listing number="5-10" file-name="src/main.rs" caption="Defining a `Rectangle` struct">
<pre><pre class="playground"><code class="language-rust">struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let rect1 = Rectangle {
        width: 30,
        height: 50,
    };

    println!(
        "The area of the rectangle is {} square pixels.",
        area(&amp;rect1)
    );
}

fn area(rectangle: &amp;Rectangle) -&gt; u32 {
    rectangle.width * rectangle.height
}</code></pre></pre>
</Listing>
<p>Anseo t√° strucht√∫r sainmh√≠nithe againn agus thugamar <code>Rectangle</code> air. Laistigh den chuach
l√∫ib√≠n√≠, shainmh√≠n√≠omar na r√©ims√≠ mar <code>width</code> agus <code>height</code>, a bhfuil an d√° cheann acu
cl√≥scr√≠obh <code>u32</code>. Ansin, i <code>main</code>, chrutha√≠omar sampla ar leith de <code>Rectangle</code>
go bhfuil leithead <code>30</code> agus airde <code>50</code>.</p>
<p>T√° √°r bhfeidhm <code>area</code> sainmh√≠nithe anois le paraim√©adar amh√°in, at√° ainmnithe againn
<code>Rectangle</code>, a bhfuil a chine√°l ar iasacht do-inaistrithe de strucht√∫r <code>Rectangle</code>
shampla. Mar a luadh i gCaibidil 4, ba mhaith linn an struct a fh√°il ar iasacht seachas
√∫in√©ireacht a ghlacadh air. Ar an mbealach seo, coime√°dann <code>main</code> a √∫in√©ireacht agus is f√©idir lean√∫int ar aghaidh
ag baint √∫s√°ide as <code>rect1</code>, agus sin √© an f√°th a n-√∫s√°idimid an <code>&amp;</code> sa s√≠ni√∫ feidhme agus
an √°it a dtugaimid an fheidhm.</p>
<p>Faigheann an fheidhm <code>area</code> rochtain ar na r√©ims√≠ <code>width</code> agus <code>height</code> sa <code>Rectangle</code>
shampla (tabhair faoi deara nach ionann rochtain a fh√°il ar r√©ims√≠ den strucht√∫r a fuarthas ar iasacht
na luachanna r√©imse a bhogadh, agus sin an f√°th a fheiceann t√∫ go minic ar iasacht de strucht√∫ir). √År
deir s√≠ni√∫ feidhme do <code>area</code> anois go d√≠reach cad at√° i gceist againn: r√≠omh an t-achar
de <code>Rectangle</code>, ag baint √∫s√°ide as a r√©ims√≠ <code>width</code> agus <code>height</code>. Tugann s√© seo le fios go bhfuil an
t√° leithead agus airde gaolmhar lena ch√©ile, agus tugann s√© ainmneacha tuairisci√∫la ar
na luachanna seachas na luachanna comhinn√©acs tuple de <code>0</code> agus <code>1</code> a √∫s√°id. Seo a
buaigh ar mhaithe le soil√©ireacht.</p>
<h3 id="feidhmi√∫lacht-√ös√°ideach-a-chur-le-tr√©ithe-d√≠orthaithe"><a class="header" href="#feidhmi√∫lacht-√ös√°ideach-a-chur-le-tr√©ithe-d√≠orthaithe">Feidhmi√∫lacht √ös√°ideach a Chur le Tr√©ithe D√≠orthaithe</a></h3>
<p>Bheadh ‚Äã‚Äãs√© √∫s√°ideach a bheith in ann sampla de <code>Rectangle</code> a phriont√°il agus muid
d√≠fhabhtaigh √°r gcl√°r agus f√©ach ar na luachanna d√° r√©ims√≠ go l√©ir. Liost√°il 5-11 iarracht
ag baint √∫s√°ide as an <a href="../std/macro.println.html"><code>println!</code> macro</a><!-- neamhaird --> mar a d'√∫s√°ideamar i
caibidl√≠ roimhe seo. N√≠ oibreoidh s√© seo, √°fach.</p>
<Listing number="5-11" file-name="src/main.rs" caption="Attempting to print a `Rectangle` instance">
<pre><code class="language-rust ignore does_not_compile">struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let rect1 = Rectangle {
        width: 30,
        height: 50,
    };

    println!("rect1 is {}", rect1);
}</code></pre>
</Listing>
<p>Nuair a thiomsaimid an c√≥d seo, faighimid earr√°id leis an bpr√≠omhtheachtaireacht seo:</p>
<pre><code class="language-text">error[E0277]: `Rectangle` doesn't implement `std::fmt::Display`
</code></pre>
<p>Is f√©idir leis an macra <code>println!</code> go leor cine√°lacha form√°idithe a dh√©anamh, agus de r√©ir r√©amhshocraithe, an chatach
ins√≠onn l√∫ib√≠n√≠ do <code>println!</code> form√°idi√∫ ar a dtugtar <code>Display</code> a √∫s√°id: an t-aschur at√° beartaithe
le haghaidh tomhaltas d√≠reach √∫s√°ideora deiridh. Na cine√°lacha primitive at√° feicthe againn go dt√≠ seo
cuir <code>Display</code> i bhfeidhm de r√©ir r√©amhshocraithe mar n√≠l ach bealach amh√°in ann ar mhaith leat a thaispe√°int
a <code>1</code> n√≥ aon chine√°l primitive eile d'√∫s√°ideoir. Ach le structs, ar an mbealach
Ba cheart go bhform√°id <code>println!</code> nach bhfuil an t-aschur chomh soil√©ir mar go bhfuil n√≠os m√≥ ann
f√©idearthachta√≠ taispe√°na: Ar mhaith leat cam√≥ga n√≥ nach bhfuil? Ar mhaith leat an
l√∫ib√≠n√≠ curly? Ar ch√≥ir na r√©ims√≠ go l√©ir a thaispe√°int? Mar gheall ar an d√©bhr√≠ocht seo, Rust
n√≠ dh√©anann s√© iarracht buille faoi thuairim a dh√©anamh ar cad at√° uainn, agus n√≠l aon sol√°thar ag strucht√∫ir
<code>Display</code> a chur i bhfeidhm le h√∫s√°id le <code>println!</code> agus an sealbh√≥ir √°ite <code>{}</code>.</p>
<p>M√° leanaimid ar aghaidh ag l√©amh na n-earr√°id√≠, gheobhaidh muid an n√≥ta cabhrach seo:</p>
<pre><code class="language-text">   = help: the trait `std::fmt::Display` is not implemented for `Rectangle`
   = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
</code></pre>
<p>D√©anaimis iarracht √©! Beidh cuma anois ar an nglao macra <code>println!</code> mar <code>println! ("rect1 is {rect1:?}");</code>. Ag cur an sonraitheora <code>:?</code> taobh istigh de na l√∫ib√≠n√≠ cuartha ins√≠onn
<code>println!</code> ba mhaith linn form√°id aschuir ar a dtugtar <code>Debug</code> a √∫s√°id. An trait <code>Debug</code>
cuireann s√© ar √°r gcumas √°r strucht√∫r a phriont√°il ar bhealach at√° √∫s√°ideach d'fhorbr√≥ir√≠ ionas gur f√©idir linn
f√©ach ar a luach agus muid ag d√≠fhabht√∫ √°r gc√≥d.</p>
<p>Tiomsaigh an c√≥d leis an athr√∫ seo. Drat! Faighimid earr√°id f√≥s:</p>
<pre><code class="language-text">error[E0277]: `Rectangle` doesn't implement `Debug`
</code></pre>
<p>Ach ar√≠s, tugann an tiomsaitheoir n√≥ta cabhrach d√∫inn:</p>
<pre><code class="language-text">   = help: the trait `Debug` is not implemented for `Rectangle`
   = note: add `#[derive(Debug)]` to `Rectangle` or manually `impl Debug for Rectangle`
</code></pre>
<p>Rust <em>does</em> san √°ireamh feidhmi√∫lacht chun faisn√©is debugging a phriont√°il amach, ach t√°imid
n√≠ m√≥r d√∫inn tarraingt isteach go sainr√°ite chun an fheidhmi√∫lacht sin a chur ar f√°il d√°r strucht√∫r.
Chun √© sin a dh√©anamh, cuirimid an tr√©ith sheachtrach <code>#[derive(Debug)]</code> d√≠reach roimh an
struct sainmh√≠ni√∫, mar a thaispe√°ntar i Liost√∫ 5-12.</p>
<Listing number="5-12" file-name="src/main.rs" caption="Adding the attribute to derive the `Debug` trait and printing the `Rectangle` instance using debug formatting">
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let rect1 = Rectangle {
        width: 30,
        height: 50,
    };

    println!("rect1 is {rect1:?}");
}</code></pre></pre>
</Listing>
<p>Anois agus an cl√°r √° rith againn, n√≠ bhfaighidh muid aon earr√°id√≠, agus feicfidh muid an
aschur seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling rectangles v0.1.0 (file:///projects/rectangles)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.48s
     Running `target/debug/rectangles`
rect1 is Rectangle { width: 30, height: 50 }
</code></pre>
<p>Go deas! N√≠ h√© an t-aschur is deise √©, ach taispe√°nann s√© luachanna na r√©ims√≠ go l√©ir
sa ch√°s seo, rud a chuideodh go cinnte le linn d√≠fhabhtaithe. Nuair at√° againn
strucht√∫ir n√≠os m√≥, t√° s√© √∫s√°ideach aschur a bheith agat at√° beag√°n n√≠os √©asca le l√©amh; isteach
sna c√°sanna sin, is f√©idir linn <code>{:#?}</code> a √∫s√°id in ionad <code>{:?}</code> sa teaghr√°n <code>println!</code>. I
an sampla seo, ag baint √∫s√°ide as an st√≠l <code>{:#?}</code> aschuirfear an m√©id seo a leanas:</p>
<pre><code class="language-cons√≥l">$ cargo run
   Compiling rectangles v0.1.0 (file:///projects/rectangles)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.48s
     Running `target/debug/rectangles`
rect1 is Rectangle {
    width: 30,
    height: 50,
}
</code></pre>
<p>Bealach eile chun luach a phriont√°il ag baint √∫s√°ide as an bhform√°id <code>Debug</code> is ea an <a href="../std/macro.dbg.html"><code>dbg!</code>
macro</a> <!-- neamhaird -->a √∫s√°id, a ghlacann √∫in√©ireacht slonn (seachas
go <code>println!</code>, a th√≥gann tagairt), prionta√≠ an comhad agus uimhir l√≠ne na
√°it a dtarla√≠onn an macraghlao <code>dbg!</code> sin i do ch√≥d mar aon leis an luach iarmhartach
den slonn sin, agus tugann s√© √∫in√©ireacht ar an luach ar ais.</p>
<blockquote>
<p>N√≥ta: Ag glaoch ar an <code>dbg!</code> prionta√≠ macra chuig an sruth caighde√°nach cons√≥l earr√°ide
(<code>stderr</code>), seachas <code>println!</code>, a phriont√°lann go dt√≠ an t-aschur caighde√°nach
sruth cons√≥l (<code>stdout</code>). Labhr√≥imid n√≠os m√≥ faoi <code>stderr</code> agus <code>stdout</code> sa
<a href="ch12-06-writing-to-stderr-instead-of-stdout.html">‚ÄúTeachtaireachta√≠ Earr√°ide √° Scr√≠obh go Earr√°id Chaighde√°nach In ionad Aschur Caighde√°nach‚Äù
alt i gCaibidil 12</a><!-- neamhaird -->.</p>
</blockquote>
<p>Seo sampla ina bhfuil suim againn sa luach a shanntar don
r√©imse <code>width</code>, chomh maith le luach an strucht√∫ir ioml√°in in <code>rect1</code>:</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let scale = 2;
    let rect1 = Rectangle {
        width: dbg!(30 * scale),
        height: 50,
    };

    dbg!(&amp;rect1);
}</code></pre></pre>
<p>Is f√©idir linn <code>dbg!</code> a chur timpeall ar an slonn <code>scale 30 *</code> agus, toisc go bhfuil <code>dbg!</code>
ar ais √∫in√©ireacht ar luach na slonn, gheobhaidh an r√©imse <code>width</code> an
an luach c√©anna mura mbeadh an glao <code>dbg!</code> againn ann. N√≠limid ag iarraidh <code>dbg!</code> a
seilbh a ghlacadh ar <code>rect1</code>, mar sin √∫s√°idimid tagairt do <code>rect1</code> sa ch√©ad ghlao eile.
Seo an chuma at√° ar aschur an tsampla seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling rectangles v0.1.0 (file:///projects/rectangles)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.61s
     Running `target/debug/rectangles`
[src/main.rs:10:16] 30 * scale = 60
[src/main.rs:14:5] &amp;rect1 = Rectangle {
    width: 60,
    height: 50,
}
</code></pre>
<p>Is f√©idir linn a fheice√°il gur th√°inig an ch√©ad ph√≠osa aschuir √≥ <em>src/main.rs</em> l√≠ne 10 √°it a bhfuilimid
ag d√≠fhabht√∫ na slonn <code>30 * scale</code>, agus is √© an luach iarmhartach n√° <code>60</code> (an
Is √©ard at√° i gceist le form√°idi√∫ <code>Debug</code> a chuirtear i bhfeidhm le haghaidh sl√°nuimhreacha a luach a phriont√°il amh√°in. T√° an
Aschuir <code>dbg!</code> glao ar l√≠ne 14 de <em>src/main.rs</em> luach <code>&amp;rect1</code>, is √© sin
an strucht√∫r <code>Rectangle</code>. √ös√°ideann an t-aschur seo form√°idi√∫ deas <code>Debug</code> an
Cine√°l <code>Rectangle</code>. Is f√©idir leis an macra <code>dbg!</code> a bheith an-chabhrach agus t√∫ ag iarraidh √© a dh√©anamh
d√©an amach cad at√° √° dh√©anamh ag do ch√≥d!</p>
<p>Chomh maith leis an trait <code>Debug</code>, t√° Rust tar √©is roinnt tr√©ithe a shol√°thar d√∫inn
a √∫s√°id leis an tr√©ith <code>derive</code> ar f√©idir a iompar √∫s√°ideach a chur len√°r saincheaptha
cine√°lacha. T√° na tr√©ithe sin agus a n-iompra√≠ocht liostaithe in <a href="appendix-03-derivable-traits.html">Aguis√≠n C</a><!--
neamhaird a dh√©anamh -->. Cl√∫d√≥imid conas na tr√©ithe seo a chur i bhfeidhm le hiompar saincheaptha mar
chomh maith le conas do chuid tr√©ithe f√©in a chruth√∫ i gCaibidil 10. T√° go leor ann freisin
tr√©ithe seachas <code>derive</code>; le haghaidh tuilleadh eolais, f√©ach <a href="../reference/attributes.html">na ‚ÄúTr√©ithe‚Äù
chuid den Tagairt Rust</a>.</p>
<p>T√° √°r bhfeidhm <code>area</code> an-sonrach: n√≠ r√≠omhann s√© ach achar na dronuilleogach.
Bheadh ‚Äã‚Äãs√© ina chuidi√∫ an t-iompar seo a cheangal n√≠os dl√∫ithe len√°r strucht√∫r <code>Rectangle</code>
mar n√≠ oibreoidh s√© le haon chine√°l eile. Breathna√≠mid ar conas is f√©idir linn lean√∫int ar aghaidh
athmhonaraigh an c√≥d seo tr√≠d an bhfeidhm <code>area</code> a iomp√∫ ina <code>area</code> <em>method</em>
sainithe ar √°r gcine√°l <code>Rectangle</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="comhr√©ir-modh"><a class="header" href="#comhr√©ir-modh">Comhr√©ir Modh</a></h2>
<p>T√° <em>modhanna</em> cos√∫il le feidhmeanna: dearbha√≠mid iad leis an eochairfhocal <code>fn</code> agus a
ainm, is f√©idir paraim√©adair agus luach tuairisce√°in a bheith acu, agus t√° roinnt c√≥d iontu
sin a rith nuair a ghlaoitear an modh √≥ √°it √©igin eile. Murab ionann agus feidhmeanna,
sainmh√≠n√≠tear modhanna i gcomhth√©acs strucht√∫ir (n√≥ enum n√≥ trait
r√©ad, a chl√∫da√≠mid i <a href="ch06-00-enums.html">Caibidil 6</a> <!-- neamhaird --> agus <a href="ch18-02-trait-objects.html">Caibidil
17</a><!-- d√©an neamhaird de -->, faoi seach), agus is √© a gc√©ad pharaim√©adar
i gc√≥na√≠ <code>self</code>, a l√©ir√≠onn an √°sc ar an strucht√∫r an modh √°
ar a dtugtar ar.</p>
<h3 id="modhanna-a-shainmh√≠ni√∫"><a class="header" href="#modhanna-a-shainmh√≠ni√∫">Modhanna a Shainmh√≠ni√∫</a></h3>
<p>Athra√≠mis an fheidhm <code>area</code> a bhfuil sampla <code>Rectangle</code> aici mar pharaim√©adar
agus ina ionad sin d√©an modh <code>area</code> at√° sainmh√≠nithe ar an strucht√∫r <code>Rectangle</code>, mar a thaispe√°ntar
i Liosta 5-13.</p>
<Listing number="5-13" file-name="src/main.rs" caption="Defining an `area` method on the `Rectangle` struct">
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }
}

fn main() {
    let rect1 = Rectangle {
        width: 30,
        height: 50,
    };

    println!(
        "The area of the rectangle is {} square pixels.",
        rect1.area()
    );
}</code></pre></pre>
</Listing>
<p>Chun an fheidhm a shaini√∫ laistigh de chomhth√©acs <code>Rectangle</code>, cuirimid t√∫s le <code>impl</code>
(cur i bhfeidhm) bloc le haghaidh <code>Rectangle</code>. Gach rud laistigh den bhloc <code>impl</code> seo
a bhaineann leis an gcine√°l <code>Rectangle</code>. Ansin bogaimid an fheidhm <code>area</code>
laistigh de na l√∫ib√≠n√≠ chatach <code>impl</code> agus athraigh an ch√©ad cheann (agus sa ch√°s seo, amh√°in)
paraim√©adar a bheith <code>self</code> sa s√≠ni√∫ agus i ngach √°it laistigh den chorp. I
<code>main</code>, √°it ar thugamar an fheidhm <code>area</code> agus gur ritheamar <code>rect1</code> mar arg√≥int,
ina ionad sin is f√©idir linn <em>method syntax</em> a √∫s√°id chun an modh <code>area</code> a ghlaoch ar √°r <code>Rectangle</code>
shampla. T√©ann an modh comhr√©ire tar √©is sampla: cuirimid ponc leis ina dhiaidh sin
ainm an mhodha, l√∫ib√≠n√≠, agus aon arg√≥int√≠.</p>
<p>Sa s√≠ni√∫ le haghaidh <code>area</code>, √∫s√°idimid <code>&amp;self</code> in ionad <code>rectangle: &amp;Rectangle</code>.
T√° an <code>&amp;self</code> gearr i nd√°ir√≠re do <code>self: &amp;Self</code>. Laistigh de bhloc <code>impl</code>, t√° an
cine√°l Is ailias √© <code>self</code> don chine√°l ar a bhfuil an bloc <code>impl</code>. N√≠ m√≥r modhanna
b√≠odh paraim√©adar darb ainm <code>self</code> den chine√°l <code>self</code> acu d√° gc√©ad pharaim√©adar, mar sin Meirge
ligeann s√© duit √© seo a ghiorr√∫ gan ach an t-ainm <code>self</code> sa ch√©ad l√°thair paraim√©adar.
Tabhair faoi deara go gcaithfimid f√≥s an <code>&amp;</code> a √∫s√°id os comhair na gearrscaireachta <code>self</code> chun
cuir in i√∫l go bhfaigheann an modh seo an sampla <code>self</code> ar iasacht, d√≠reach mar a rinneamar i
<code>rectangle: &amp;Rectangle</code>. Is f√©idir le modhanna √∫in√©ireacht a ghlacadh ar <code>self</code>, <code>self</code> a fh√°il ar iasacht
go do-athraithe, mar at√° d√©anta againn anseo, n√≥ 'self` a fh√°il ar iasacht go frithph√°irteach, d√≠reach mar is f√©idir leo
paraim√©adar eile.</p>
<p>Roghnaigh muid <code>&amp;self</code> anseo ar an gc√∫is ch√©anna a d'√∫s√°id muid <code>&amp;Rectangle</code> san fheidhm
leagan: n√≠limid ag iarraidh √∫in√©ireacht a ghlacadh, agus n√≠l uainn ach na sonra√≠ a l√©amh isteach
an struct, n√≠ scr√≠obh air. D√° mba mhian linn an c√°s at√° againn a athr√∫
ar a dtugtar an modh ar mar chuid de cad a dh√©anann an modh, d'√∫s√°idfimid <code>&amp;mut self</code> mar
an ch√©ad pharaim√©adar. Ag modh a ghlacann √∫in√©ireacht ar an gc√°s tr√≠
ag baint √∫s√°ide as ach <code>self</code> mar go bhfuil an ch√©ad paraim√©adar annamh; t√° an teicn√≠c seo de ghn√°th
a √∫s√°idtear nuair a athra√≠onn an modh <code>self</code> isteach i rud √©igin eile agus is mian leat a
cosc a chur ar an nglaoiteoir an t-√°bhar bunaidh a √∫s√°id tar √©is an chlaochlaithe.</p>
<p>An phr√≠omhch√∫is le modhanna a √∫s√°id in ionad feidhmeanna, sa bhreis ar
ag sol√°thar comhr√©ire modhanna agus gan a bheith athr√° ar an gcine√°l <code>self</code> i ngach
s√≠ni√∫ an mhodha, is don eagra√≠ocht √©. Chuireamar gach rud is f√©idir linn a dh√©anamh
le sampla de chine√°l i mbloc <code>impl</code> amh√°in seachas √∫s√°ideoir√≠ a dh√©anamh amach anseo
d√°r gcuardach c√≥d le haghaidh cumais <code>Rectangle</code> in √°iteanna √©ags√∫la sa
leabharlann a chuirimid ar f√°il.</p>
<p>Tabhair faoi deara gur f√©idir linn a roghn√∫ modh a thabhairt ar an ainm c√©anna le ceann de na strucht√∫ir
r√©ims√≠. Mar shampla, is f√©idir linn modh a shaini√∫ ar <code>Rectangle</code> at√° ainmnithe freisin
<code>width</code>:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span>impl Rectangle {
    fn width(&amp;self) -&gt; bool {
        self.width &gt; 0
    }
}

fn main() {
    let rect1 = Rectangle {
        width: 30,
        height: 50,
    };

    if rect1.width() {
        println!("The rectangle has a nonzero width; it is {}", rect1.width);
    }
}</code></pre></pre>
</Listing>
<p>Anseo, t√°imid ag roghn√∫ an modh <code>width</code> a thabhairt ar ais <code>true</code> m√° t√° an luach isteach
t√° r√©imse <code>width</code> an √°sc n√≠os m√≥ n√° <code>0</code> agus <code>false</code> m√°s luach √©
<code>0</code>: is f√©idir linn r√©imse a √∫s√°id laistigh de mhodh den ainm c√©anna chun cr√≠che ar bith. I
<code>main</code>, nuair a leanaimid <code>rect1.width</code> le l√∫ib√≠n√≠, t√° a fhios ag Rust gurb √©ard at√° i gceist againn
modh <code>width</code>. Nuair nach n-√∫s√°idimid l√∫ib√≠n√≠, t√° a fhios ag Rust go bhfuil an r√©imse i gceist againn
<code>width</code>.</p>
<p>Go minic, ach n√≠ i gc√≥na√≠, nuair a thugaimid modh an t-ainm c√©anna le r√©imse ba mhaith linn
√© a thabhairt ar ais ach an luach sa r√©imse agus rud ar bith eile a dh√©anamh. Modhanna mar seo
Tugtar <em>getters</em> orthu, agus n√≠ chuireann Rust i bhfeidhm iad go huathoibr√≠och le haghaidh strucht√∫r
r√©ims√≠ mar a dh√©anann roinnt teangacha eile. T√° getters √∫s√°ideach mar is f√©idir leat an
r√©imse pr√≠obh√°ideach ach an modh poibl√≠, agus d√° bhr√≠ sin cumasaigh rochtain inl√©ite amh√°in air sin
r√©imse mar chuid den chine√°l API poibl√≠. D√©anfaimid pl√© ar cad poibl√≠ agus pr√≠obh√°ideach
at√° agus conas r√©imse n√≥ modh a ainmni√∫ mar phoibl√≠ n√≥ pr√≠obh√°ideach i <a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html#exposing-paths-with-the-pub-keyword">Caibidil
7</a> <!-- neamhaird a dh√©anamh -->.</p>
<blockquote>
<h3 id="c√°-bhfuil-an-t-oibreoir--"><a class="header" href="#c√°-bhfuil-an-t-oibreoir--">C√° bhfuil an t-oibreoir <code>-&gt;</code>?</a></h3>
<p>In C agus C++, √∫s√°idtear dh√° oibreoir √©ags√∫la chun modhanna glaonna a √∫s√°id: √∫s√°ideann t√∫
<code>.</code> m√° t√° t√∫ ag glaoch modh ar an r√©ad go d√≠reach agus <code>-&gt;</code> m√° t√° t√∫
an modh a ghlaoch ar phointeoir don r√©ad agus is g√° d√≠thagairt a dh√©anamh don
pointeoir ar dt√∫s. I bhfocail eile, m√°s pointeoir √© <code>object</code>,
T√° <code>object-&gt;something()</code> cos√∫il le <code>(*object).something()</code>.</p>
<p>N√≠l coibh√©is ag meirge leis an oibreoir <code>-&gt;</code>; ina ionad sin, t√° Rust a
gn√© ar a dtugtar <em>tagairt√≠ uathoibr√≠ocha agus dereferencing</em>. T√° modhanna glaonna
ceann de na c√∫pla √°it i Rust leis an iompar seo.</p>
<p>Seo mar a oibr√≠onn s√©: nuair a ghlaonn t√∫ ar mhodh le <code>object.something()</code>, Rust
cuireann s√© isteach <code>&amp;</code>, <code>&amp;mut</code>, n√≥ <code>*</code> go huathoibr√≠och ionas go meaitse√°lann <code>object</code> s√≠ni√∫
an modh. I bhfocail eile, t√° na ruda√≠ seo a leanas mar an gc√©anna:</p>
<!-- CAN'T EXTRACT SEE BUG https://github.com/rust-lang/mdBook/issues/1127 -->
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">#[derive(Debug,Copy,Clone)]
</span><span class="boring">struct Point {
</span><span class="boring">    x: f64,
</span><span class="boring">    y: f64,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Point {
</span><span class="boring">   fn distance(&amp;self, other: &amp;Point) -&gt; f64 {
</span><span class="boring">       let x_squared = f64::powi(other.x - self.x, 2);
</span><span class="boring">       let y_squared = f64::powi(other.y - self.y, 2);
</span><span class="boring">
</span><span class="boring">       f64::sqrt(x_squared + y_squared)
</span><span class="boring">   }
</span><span class="boring">}
</span><span class="boring">let p1 = Point { x: 0.0, y: 0.0 };
</span><span class="boring">let p2 = Point { x: 5.0, y: 6.5 };
</span>p1.distance(&amp;p2);
(&amp;p1).distance(&amp;p2);
<span class="boring">}</span></code></pre></pre>
<p>Breathna√≠onn an ch√©ad cheann i bhfad n√≠os glaine. Oibr√≠onn an t-iompar tagartha uathoibr√≠och seo
toisc go bhfuil glacad√≥ir soil√©ir ag modhanna - an cine√°l <code>self</code>. I bhfianaise an ghlacad√≥ra
agus ainm an mhodha, is f√©idir le Rust a dh√©anamh amach go cinntitheach an bhfuil an modh
ag l√©amh (<code>&amp;self</code>), ag mutating (<code>&amp;mut self</code>), n√≥ ag ithe (<code>self</code>). An bhf√≠ric
go dtugann Rust iasachta√≠ocht intuigthe do ghlacad√≥ir√≠ modhanna is cuid mh√≥r de
√∫in√©ireacht a dh√©anamh eirgeanama√≠ochta go praitici√∫il.</p>
</blockquote>
<h3 id="modhanna-le-tuilleadh-paraim√©adair"><a class="header" href="#modhanna-le-tuilleadh-paraim√©adair">Modhanna le Tuilleadh Paraim√©adair</a></h3>
<p>D√©anaimis modhanna a chleachtadh tr√≠ mhodh eile a chur i bhfeidhm ar an <code>Rectangle</code>
strucht√∫r. An uair seo ba mhaith linn sampla de <code>Rectangle</code> a ghlacadh mar shampla eile
de <code>Rectangle</code> agus seol ar ais <code>true</code> m√°s f√©idir leis an dara <code>Rectangle</code> oiri√∫nach go hioml√°n
laistigh de <code>self</code> (an ch√©ad <code>Rectangle</code>); ar shl√≠ eile, ba cheart go dtabharfadh s√© <code>false</code> ar ais.
Is √© sin, nuair a bheidh an modh <code>can_hold</code> sainmh√≠nithe againn, ba mhaith linn a bheith in ann scr√≠obh
an cl√°r a thaispe√°ntar i Liosta 5-14.</p>
<Listing number="5-14" file-name="src/main.rs" caption="Using the as-yet-unwritten `can_hold` method">
<pre><code class="language-rust ignore">fn main() {
    let rect1 = Rectangle {
        width: 30,
        height: 50,
    };
    let rect2 = Rectangle {
        width: 10,
        height: 40,
    };
    let rect3 = Rectangle {
        width: 60,
        height: 45,
    };

    println!("Can rect1 hold rect2? {}", rect1.can_hold(&amp;rect2));
    println!("Can rect1 hold rect3? {}", rect1.can_hold(&amp;rect3));
}</code></pre>
</Listing>
<p>Bheadh ‚Äã‚Äãcuma mar seo a leanas ar an aschur a bhfuiltear ag s√∫il leis toisc go bhfuil an d√° thoise de
t√° <code>rect2</code> n√≠os l√∫ n√° tois√≠ <code>rect1</code>, ach t√° <code>rect3</code> n√≠os leithne n√°
<code>rect1</code>:</p>
<pre><code class="language-text">Can rect1 hold rect2? true
Can rect1 hold rect3? false
</code></pre>
<p>T√° a fhios againn gur mhaith linn modh a shaini√∫, mar sin beidh s√© laistigh den <code>impl Rectangle</code>
bloc. Is √© an t-ainm modha <code>can_hold</code>, agus t√≥gfaidh s√© iasacht neamh-inmhalartaithe
de <code>Rectangle</code> eile mar pharaim√©adar. Is f√©idir linn a insint cad √© an cine√°l an
D√©anfar paraim√©adar tr√≠ bhreathn√∫ ar an gc√≥d a ghlaonn an modh:
Gabhann <code>rect1.can_hold(&amp;rect2)</code> isteach in <code>&amp;rect2</code>, ar iasacht do-inmheas√∫naithe √©
<code>rect2</code>, sampla de <code>Rectangle</code>. D√©anann s√© seo ciall mar n√≠ g√° d√∫inn ach
l√©igh <code>rect2</code> (seachas scr√≠obh, rud a chiall√≥dh go mbeadh iasacht sho-sh√≥ite de dh√≠th orainn),
agus ba mhaith linn go gcoime√°dfadh <code>main</code> √∫in√©ireacht ar <code>rect2</code> ionas gur f√©idir linn √© a √∫s√°id ar√≠s ina dhiaidh sin
ag glaoch ar an modh <code>can_hold</code>. Is √© luach aischuir <code>can_hold</code> n√° a
Beidh Boole, agus an cur i bhfeidhm a sheice√°il cib√© an leithead agus airde
t√° <code>self</code> n√≠os m√≥ n√° leithead agus airde an <code>Rectangle</code> eile,
faoi ‚Äã‚Äãseach. Cuirimis an modh nua <code>can_hold</code> leis an mbloc <code>impl</code> √≥
Liost√∫ 5-13, l√©irithe i Liost√∫ 5-15.</p>
<Listing number="5-15" file-name="src/main.rs" caption="Implementing the `can_hold` method on `Rectangle` that takes another `Rectangle` instance as a parameter">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span>impl Rectangle {
    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }

    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
        self.width &gt; other.width &amp;&amp; self.height &gt; other.height
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let rect1 = Rectangle {
</span><span class="boring">        width: 30,
</span><span class="boring">        height: 50,
</span><span class="boring">    };
</span><span class="boring">    let rect2 = Rectangle {
</span><span class="boring">        width: 10,
</span><span class="boring">        height: 40,
</span><span class="boring">    };
</span><span class="boring">    let rect3 = Rectangle {
</span><span class="boring">        width: 60,
</span><span class="boring">        height: 45,
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    println!("Can rect1 hold rect2? {}", rect1.can_hold(&amp;rect2));
</span><span class="boring">    println!("Can rect1 hold rect3? {}", rect1.can_hold(&amp;rect3));
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Nuair a rithimid an c√≥d seo leis an <code>main</code> i Liost√∫ 5-14, gheobhaidh muid √°r
aschur inmhianaithe. Is f√©idir le modhanna a ghlacadh paraim√©adair iolracha a chuirimid leis an
s√≠ni√∫ tar √©is an pharaim√©adar <code>self</code>, agus oibr√≠onn na paraim√©adair sin d√≠reach mar a ch√©ile
paraim√©adair i bhfeidhmeanna.</p>
<h3 id="feidhmeanna-gaolmhara"><a class="header" href="#feidhmeanna-gaolmhara">Feidhmeanna Gaolmhara</a></h3>
<p>Tugtar <em>feidhmeanna gaolmhara</em> ar gach feidhm a shain√≠tear laistigh de bhloc <code>impl</code>
toisc go bhfuil baint acu leis an gcine√°l at√° ainmnithe i ndiaidh an <code>impl</code>. Is f√©idir linn a shaini√∫
feidhmeanna gaolmhara nach bhfuil <code>self</code> mar a gc√©ad pharaim√©adar acu (agus mar sin
nach modhanna iad) toisc nach bhfuil sampla den chine√°l ag teast√°il uathu le bheith ag obair leo.
T√° feidhm amh√°in mar seo √∫s√°idte againn cheana f√©in: an fheidhm <code>String::from</code> .T√° feidhm amh√°in
mar seo √∫s√°idte againn cheana f√©in: an fheidhm <code>String::from</code> a shainmh√≠n√≠tear ar an gcine√°l <code>String</code>.</p>
<p>Is minic a √∫s√°idtear feidhmeanna gaolmhara nach modhanna iad le haghaidh t√≥g√°laithe a
tabharfaidh s√© sampla nua den strucht√∫r ar ais. Is minic a dtugtar <code>new</code> orthu seo, ach
N√≠ ainm speisialta √© ‚Äònua‚Äô agus n√≠l s√© fite fuaite sa teanga. Mar shampla, t√°imid
d'fh√©adfadh s√© a roghn√∫ feidhm ghaolmhar darb ainm <code>square</code> a shol√°thar a bheadh ‚Äã‚Äãaici
paraim√©adar toise amh√°in agus √© sin a √∫s√°id mar leithead agus airde araon, rud a fh√°gann go bhfuil s√©
n√≠os √©asca <code>Rectangle</code> cearnach a chruth√∫ seachas a bheith ag sonr√∫ an rud c√©anna
luach faoi dh√≥:</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span>impl Rectangle {
    fn square(size: u32) -&gt; Self {
        Self {
            width: size,
            height: size,
        }
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let sq = Rectangle::square(3);
</span><span class="boring">}</span></code></pre></pre>
<p>Is iad na heochairfhocail <code>self</code> sa chine√°l tuairisce√°in agus i gcorp na feidhme
ailiasanna don chine√°l a thagann i ndiaidh an eochairfhocail <code>impl</code>, at√° sa ch√°s seo
is <code>Rectangle</code>.</p>
<p>Chun an fheidhm ghaolmhar seo a ghlaoch, √∫s√°idimid an chomhr√©ir <code>::</code> leis an ainm struct;
Is sampla √© <code>let sq = Rectangle::square(3);</code>. T√° an fheidhm seo sp√°s√°ilte le
an struct: √∫s√°idtear an chomhr√©ir <code>::</code> don d√° fheidhm chomhcheangailte agus
sp√°sanna ainmneacha cruthaithe ag mod√∫il. D√©anfaimid mod√∫il a phl√© i <a href="ch07-02-defining-modules-to-control-scope-and-privacy.html">Caibidil
7</a> <!-- neamhaird a dh√©anamh -->.</p>
<h3 id="bloic-impl-iolracha"><a class="header" href="#bloic-impl-iolracha">Bloic <code>impl</code> iolracha</a></h3>
<p>Ceada√≠tear bloic iolracha <code>impl</code> a bheith ag gach strucht√∫r. Mar shampla, Liost√∫
T√° 5-15 comhionann leis an gc√≥d a thaispe√°ntar i Liosta 5-16, a bhfuil gach modh ann
a bhloc <code>impl</code> f√©in.</p>
<Listing number="5-16" caption="Rewriting Listing 5-15 using multiple `impl` blocks">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span>impl Rectangle {
    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }
}

impl Rectangle {
    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
        self.width &gt; other.width &amp;&amp; self.height &gt; other.height
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let rect1 = Rectangle {
</span><span class="boring">        width: 30,
</span><span class="boring">        height: 50,
</span><span class="boring">    };
</span><span class="boring">    let rect2 = Rectangle {
</span><span class="boring">        width: 10,
</span><span class="boring">        height: 40,
</span><span class="boring">    };
</span><span class="boring">    let rect3 = Rectangle {
</span><span class="boring">        width: 60,
</span><span class="boring">        height: 45,
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    println!("Can rect1 hold rect2? {}", rect1.can_hold(&amp;rect2));
</span><span class="boring">    println!("Can rect1 hold rect3? {}", rect1.can_hold(&amp;rect3));
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>N√≠l aon ch√∫is leis na modhanna seo a dheighilt ina mbloic <code>impl</code> iolracha anseo,
ach is comhr√©ir bail√≠ √© seo. Feicfimid c√°s ina bhfuil bloic <code>impl</code> iolracha
√∫s√°ideach i gCaibidil 10, ina bpl√©imid cine√°lacha agus tr√©ithe cine√°lacha.</p>
<h2 id="achoimre-4"><a class="header" href="#achoimre-4">Achoimre</a></h2>
<p>Ligeann strucht√∫ir duit cine√°lacha saincheaptha a chruth√∫ a bhfuil br√≠ leo do d'fhearann. Le
ag baint √∫s√°ide as strucht√∫ir, is f√©idir leat p√≠osa√≠ sonra√≠ gaolmhara a choinne√°il ceangailte lena ch√©ile
agus ainmnigh gach p√≠osa chun do ch√≥d a dh√©anamh soil√©ir. I mbloic <code>impl</code>, is f√©idir leat a shaini√∫
feidhmeanna a bhaineann le do chine√°l, agus modhanna at√° ar chine√°l an
fheidhm ghaolmhar a ligeann duit a shonr√∫ ar an iompar go c√°sanna de do
t√° strucht√∫ir.</p>
<p>Ach n√≠ hiad strucht√∫ir an t-aon bhealach ar f√©idir leat cine√°lacha saincheaptha a chruth√∫: d√©anaimis iomp√∫ orthu
Gn√© Rust's enum chun uirlis eile a chur le do bhosca uirlis√≠.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ainmneacha-agus-meaitse√°il-patr√∫n"><a class="header" href="#ainmneacha-agus-meaitse√°il-patr√∫n">Ainmneacha agus Meaitse√°il Patr√∫n</a></h1>
<p>Sa chaibidil seo, f√©achfaimid ar <em>enumerations</em>, ar a dtugtar <em>enums</em> freisin.
Ligeann Enums duit cine√°l a shaini√∫ tr√≠ na <em>variant</em> f√©ideartha a √°ireamh. Ar dt√∫s
saineoimid agus √∫s√°idfimid enum chun a thaispe√°int conas is f√©idir le enum br√≠ a ionch√≥d√∫ mar aon le
sonra√≠. Ansin, d√©anfaimid ini√∫chadh ar enum an-√∫s√°ideach, ar a dtugtar <code>Option</code>, a
cuireann s√© in i√∫l gur f√©idir le luach a bheith mar rud n√≥ rud ar bith. Ansin f√©achfaimid ar
mar a dh√©anann meaitse√°il patr√∫n sa slonn <code>match</code> go bhfuil s√© √©asca rith difri√∫il
c√≥d le haghaidh luachanna √©ags√∫la enum. Ar deireadh, cl√∫d√≥imid conas an <code>if let</code>
Is idiom √°isi√∫il agus gonta eile √© construct at√° ar f√°il le l√°imhse√°il na n-√©inim
do ch√≥d.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="√Åirimh-a-shaini√∫"><a class="header" href="#√Åirimh-a-shaini√∫">√Åirimh a shaini√∫</a></h2>
<p>Nuair a thugann strucht√∫ir bealach duit r√©ims√≠ agus sonra√≠ gaolmhara a ghr√∫p√°il le ch√©ile, mar shampla
<code>Rectangle</code> lena <code>width</code> agus <code>height</code>, tugann enums bealach duit le r√° a
t√° luach ar cheann de shraith luachanna f√©ideartha. Mar shampla, b‚Äôfh√©idir gur mhaith linn √© sin a r√°
T√° <code>Rectangle</code> ar cheann de shraith cruthanna f√©ideartha a chuims√≠onn <code>Circle</code> agus
<code>Triangle</code>. Chun seo a dh√©anamh, ligeann Rust d√∫inn na f√©idearthachta√≠ seo a ionch√≥d√∫ mar enum.</p>
<p>Breathna√≠mis ar ch√°s b‚Äôfh√©idir gur mhaith linn a chur in i√∫l i gc√≥d agus f√©achaimis c√©n f√°th a bhfuiltear ag s√∫il leis
√∫s√°ideach agus n√≠os oiri√∫na√≠ n√° na strucht√∫ir sa ch√°s seo. Abair go gcaithfimid oibri√∫
le seolta√≠ IP. Faoi l√°thair, √∫s√°idtear dh√° mh√≥rchaighde√°n le haghaidh seolta√≠ IP:
leagan a ceathair agus leagan a s√©. Toisc gurb iad seo na f√©idearthachta√≠ amh√°in le haghaidh an
Seoladh IP a dtiocfaidh √°r gcl√°r trasna air, is f√©idir linn <em>enurate</em> gach is f√©idir
leagan, agus is √© sin an √°it a fhaigheann an √°irimh a ainm.</p>
<p>F√©adfaidh seoladh IP a bheith ina sheoladh a ceathair n√≥ ina sheoladh leagan a s√©, ach n√≠ f√©idir
araon ag an am c√©anna. D√©anann an mhaoin sin de sheolta√≠ IP na sonra√≠ enum
strucht√∫r oiri√∫nach toisc nach f√©idir le luach enum ach a bheith mar cheann d√° leagan.
T√° seolta√≠ leagan a ceathair agus leagan a s√© f√≥s go bun√∫sach IP
seolta√≠, mar sin ba ch√≥ir iad a l√°imhse√°il mar an cine√°l c√©anna nuair a bh√≠onn an c√≥d √° l√°imhse√°il
c√°sanna a bhaineann le seoladh IP de chine√°l ar bith.</p>
<p>Is f√©idir linn an coincheap seo a chur in i√∫l i gc√≥d tr√≠ √°ireamh <code>IpAddrKind</code> agus
ag liost√∫ na cine√°lacha f√©ideartha is f√©idir le seoladh IP a bheith, <code>V4</code> agus <code>V6</code>. Seo iad na
leaganacha den enum:</p>
<pre><pre class="playground"><code class="language-rust">enum IpAddrKind {
    V4,
    V6,
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let four = IpAddrKind::V4;
</span><span class="boring">    let six = IpAddrKind::V6;
</span><span class="boring">
</span><span class="boring">    route(IpAddrKind::V4);
</span><span class="boring">    route(IpAddrKind::V6);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn route(ip_kind: IpAddrKind) {}</span></code></pre></pre>
<p>Is cine√°l sonra√≠ saincheaptha √© <code>IpAddrKind</code> anois is f√©idir linn a √∫s√°id in √°it eile d√°r gc√≥d.</p>
<h3 id="luachanna-enum"><a class="header" href="#luachanna-enum">Luachanna Enum</a></h3>
<p>Is f√©idir linn c√°sanna a chruth√∫ de gach ceann den d√° leagan de <code>IpAddrKind</code> mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">enum IpAddrKind {
</span><span class="boring">    V4,
</span><span class="boring">    V6,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span>    let four = IpAddrKind::V4;
    let six = IpAddrKind::V6;
<span class="boring">
</span><span class="boring">    route(IpAddrKind::V4);
</span><span class="boring">    route(IpAddrKind::V6);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn route(ip_kind: IpAddrKind) {}</span></code></pre></pre>
<p>Tabhair faoi deara go bhfuil leaganacha an enum sp√°s√°ilte faoina aitheant√≥ir, agus t√°imid
√∫s√°id a bhaint as idirstad d√∫bailte chun an d√° cheann a scaradh. T√° s√© seo √∫s√°ideach mar anois an d√° luachanna
T√° <code>IpAddrKind::V4</code> agus <code>IpAddrKind::V6</code> den chine√°l c√©anna: <code>IpAddrKind</code>. muid
is f√©idir ansin, mar shampla, feidhm a shaini√∫ a ghlacann aon <code>IpAddrKind</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">enum IpAddrKind {
</span><span class="boring">    V4,
</span><span class="boring">    V6,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let four = IpAddrKind::V4;
</span><span class="boring">    let six = IpAddrKind::V6;
</span><span class="boring">
</span><span class="boring">    route(IpAddrKind::V4);
</span><span class="boring">    route(IpAddrKind::V6);
</span><span class="boring">}
</span><span class="boring">
</span>fn route(ip_kind: IpAddrKind) {}</code></pre></pre>
<p>Agus is f√©idir linn an fheidhm seo a thabhairt le ceachtar den d√° leagan:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">enum IpAddrKind {
</span><span class="boring">    V4,
</span><span class="boring">    V6,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let four = IpAddrKind::V4;
</span><span class="boring">    let six = IpAddrKind::V6;
</span><span class="boring">
</span>    route(IpAddrKind::V4);
    route(IpAddrKind::V6);
<span class="boring">}
</span><span class="boring">
</span><span class="boring">fn route(ip_kind: IpAddrKind) {}</span></code></pre></pre>
<p>T√° bunt√°ist√≠ n√≠os m√≥ f√≥s ag baint le h√∫s√°id enums. Ag smaoineamh n√≠os m√≥ ar √°r gcine√°l seoladh IP,
faoi ‚Äã‚Äãl√°thair n√≠l bealach againn chun an seoladh IP iarbh√≠r <em>data</em> a st√≥r√°il; againn
n√≠l a fhios ach c√©n <em>chine√°l</em> at√° ann. √ìs rud √© gur fhoghlaim t√∫ d√≠reach faoi structs i
Caibidil 5, seans go mbeidh cath√∫ ort dul i ngleic leis an bhfadhb seo le strucht√∫ir mar a l√©ir√≠tear i
Liost√°il 6-1.</p>
<Listing number="6-1" caption="Storing the data and `IpAddrKind` variant of an IP address using a `struct`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    enum IpAddrKind {
        V4,
        V6,
    }

    struct IpAddr {
        kind: IpAddrKind,
        address: String,
    }

    let home = IpAddr {
        kind: IpAddrKind::V4,
        address: String::from("127.0.0.1"),
    };

    let loopback = IpAddr {
        kind: IpAddrKind::V6,
        address: String::from("::1"),
    };
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, t√° strucht√∫r <code>IpAddr</code> sainmh√≠nithe againn a bhfuil dh√° r√©imse ann: r√©imse <code>kind</code> a
is den chine√°l <code>IpAddrKind</code> (an enum a shainmh√≠nigh muid roimhe seo) agus r√©imse <code>address</code>
den chine√°l <code>String</code>. T√° dh√° ch√°s den strucht√∫r seo againn. Is √© an ch√©ad cheann n√° <code>home</code>,
agus t√° an luach <code>IpAddrKind::V4</code> mar a <code>kind</code> agus seoladh gaolmhar aige
sonra√≠ de <code>127.0.0.1</code>. Is √© an dara c√°s n√° <code>loopback</code>. T√° an ceann eile aige
leagan de <code>IpAddrKind</code> mar a luach <code>kind</code>, <code>V6</code>, agus t√° seoladh <code>::1</code> aige
bhaineann leis. Bhaineamar √∫s√°id as strucht√∫r chun an <code>kind</code> agus an <code>address</code> a chumhdach
luachanna le ch√©ile, mar sin anois t√° baint ag an malairt leis an luach.</p>
<p>Mar sin f√©in, t√° s√© n√≠os gonta an coincheap c√©anna a l√©iri√∫ ag baint √∫s√°ide as enum amh√°in:
seachas enum taobh istigh de strucht√∫r, is f√©idir linn sonra√≠ a chur go d√≠reach i ngach enum
athraitheach. Deir an sainmh√≠ni√∫ nua seo ar an <code>IpAddr</code> enum go bhfuil <code>V4</code> agus <code>V6</code> araon
beidh luachanna <code>String</code> gaolmhar ag leagan:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    enum IpAddr {
        V4(String),
        V6(String),
    }

    let home = IpAddr::V4(String::from("127.0.0.1"));

    let loopback = IpAddr::V6(String::from("::1"));
<span class="boring">}</span></code></pre></pre>
<p>Ceangaimid sonra√≠ go d√≠reach le gach leagan den enum, mar sin n√≠l aon gh√° le
strucht√∫r breise. Anseo, t√° s√© n√≠os √©asca sonra√≠ eile a fheice√°il faoin gcaoi a n-oibr√≠onn enums:
d√©antar feidhm freisin d'ainm gach athraitheach enum a shain√≠mid
T√≥gann sampla den enum. Is √© sin, is glao feidhme √© <code>IpAddr::V4()</code>
a th√≥gann arg√≥int <code>String</code> agus a thugann sampla den chine√°l <code>IpAddr</code> ar ais. muid
a fh√°il go huathoibr√≠och an fheidhm cruthaitheoir sainithe mar thoradh ar shaini√∫ an
√°im.</p>
<p>T√° bunt√°iste eile ag baint le enum seachas strucht√∫r a √∫s√°id: gach leagan
is f√©idir cine√°lacha agus m√©ideanna √©ags√∫la sonra√≠ gaolmhara a bheith ann. Leagan a ceathair IP
beidh ceithre chomhph√°irt uimhri√∫la ag seolta√≠ a mbeidh luachanna acu i gc√≥na√≠
idir 0 agus 255. D√° dteast√≥dh uainn seolta√≠ <code>V4</code> a st√≥r√°il mar cheithre luach <code>u8</code> ach
f√≥s seolta√≠ <code>V6</code> a chur in i√∫l mar luach <code>String</code> amh√°in, n√≠ bheimis in ann √© a dh√©anamh
a strucht√∫r. L√°imhse√°lann Enums an c√°s seo gan str√≥:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    enum IpAddr {
        V4(u8, u8, u8, u8),
        V6(String),
    }

    let home = IpAddr::V4(127, 0, 0, 1);

    let loopback = IpAddr::V6(String::from("::1"));
<span class="boring">}</span></code></pre></pre>
<p>T√° roinnt beala√≠ √©ags√∫la l√©irithe againn chun strucht√∫ir sonra√≠ a shaini√∫ chun an leagan a st√≥r√°il
ceithre agus leagan s√© seolta√≠ IP. Mar sin f√©in, mar a casadh s√© amach, ar mian leo a st√≥r√°il
Seolta√≠ IP agus ionch√≥daigh c√©n cine√°l iad at√° chomh coitianta go bhfuil sainmh√≠ni√∫ ar <a href="../std/net/enum.IpAddr.html">an leabharlann
chaighde√°nach is f√©idir linn a √∫s√°id!</a><!-- neamhaird a dh√©anamh --> Breathna√≠mid ar conas
sainmh√≠n√≠onn an leabharlann chaighde√°nach <code>IpAddr</code>: t√° an enum agus na leaganacha beacht aige sin
at√° sainmh√≠nithe agus √∫s√°idte againn, ach neada√≠onn s√© na sonra√≠ seolta laistigh de na leaganacha isteach
i bhfoirm dh√° strucht√∫r √©ags√∫la, at√° sainmh√≠nithe go difri√∫il do gach ceann acu
leagan:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Ipv4Addr {
    // --snip--
}

struct Ipv6Addr {
    // --snip--
}

enum IpAddr {
    V4(Ipv4Addr),
    V6(Ipv6Addr),
}
<span class="boring">}</span></code></pre></pre>
<p>L√©ir√≠onn an c√≥d seo gur f√©idir leat sonra√≠ de chine√°l ar bith a chur taobh istigh de mhalairt enum:
teaghr√°in, cine√°lacha uimhri√∫la, n√≥ strucht√∫ir, mar shampla. Is f√©idir leat fi√∫ ceann eile a √°ireamh
uaim! Chomh maith leis sin, is minic nach mb√≠onn cine√°lacha caighde√°nacha leabharlainne i bhfad n√≠os casta n√°
cad a d'fh√©adf√° teacht suas leis.</p>
<p>Tabhair faoi deara, c√© go bhfuil sainmh√≠ni√∫ ar <code>IpAddr</code> sa ghn√°thleabharlann,
is f√©idir linn √°r sainmh√≠ni√∫ f√©in a chruth√∫ agus a √∫s√°id go f√≥ill gan coinbhleacht mar gheall orainn
n√°r thug muid sainmh√≠ni√∫ caighde√°nach na leabharlainne isteach in√°r raon feidhme. Labhr√≥imid
tuilleadh faoi chine√°lacha a thabhairt isteach sa raon feidhme i gCaibidil 7 .</p>
<p>Breathna√≠mid ar shampla eile d‚Äôenum i Liost√∫ 6-2: t√° r√©imse leathan ag an gceann seo
√©ags√∫lacht na gcine√°lacha at√° leabaithe ina leagan.</p>
<Listing number="6-2" caption="A `Message` enum whose variants each store different amounts and types of values">
<pre><pre class="playground"><code class="language-rust">enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>T√° ceithre leagan ag an enum seo le cine√°lacha √©ags√∫la:</p>
<ul>
<li>N√≠l aon sonra√≠ ag <code>Quit</code> a bhaineann leis ar chor ar bith.</li>
<li>T√° r√©ims√≠ ainmnithe ag <code>Move</code>, mar a dh√©anann strucht√∫r.</li>
<li>Cuims√≠onn <code>Write</code> <code>String</code> singil.</li>
<li>√Åir√≠tear le <code>ChangeColor</code> tr√≠ luach <code>i32</code>.</li>
</ul>
<p>T√° s√© cos√∫il le saini√∫ ainim le malairt√≠ ar n√≥s na cinn i Liosta 6-2
cine√°lacha √©ags√∫la sainmh√≠nithe strucht√∫ir a shainmh√≠ni√∫, ach amh√°in n√≠ √∫s√°ideann an enum an
eochairfhocal <code>struct</code> agus d√©antar na leaganacha go l√©ir a ghr√∫p√°il le ch√©ile faoin <code>Message</code>
cine√°l. D'fh√©adfadh na sonra√≠ c√©anna a bheith sna strucht√∫ir seo a leanas agus a bh√≠ sa enum roimhe seo
sealbha√≠onn leagan:</p>
<pre><pre class="playground"><code class="language-rust">struct QuitMessage; // unit struct
struct MoveMessage {
    x: i32,
    y: i32,
}
struct WriteMessage(String); // tuple struct
struct ChangeColorMessage(i32, i32, i32); // tuple struct
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
<p>Ach m√° √∫s√°idimid na strucht√∫ir √©ags√∫la, a bhfuil a chine√°l f√©in ag gach ceann acu, n√≠ m√≥r d√∫inn
N√≠orbh fh√©idir feidhm a shaini√∫ chomh h√©asca chun aon cheann de na cine√°lacha teachtaireachta√≠ seo a ghlacadh agus
d'fh√©adfaimis leis an <code>Message</code> enum a shainmh√≠n√≠tear i Liost√∫ 6-2, ar cine√°l amh√°in √©.</p>
<p>T√° cos√∫lacht amh√°in eile idir enums agus strucht√∫ir: d√≠reach mar is f√©idir linn
modhanna a shaini√∫ ar strucht√∫ir ag baint √∫s√°ide as <code>impl</code>, t√°imid in ann modhanna a shaini√∫ ar
√©inim. Seo modh darb ainm ‚Äòglaoch‚Äô a d‚Äôfh√©adfaimis a shaini√∫ ar √°r ‚ÄòTeachtaireacht‚Äô enum:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    enum Message {
</span><span class="boring">        Quit,
</span><span class="boring">        Move { x: i32, y: i32 },
</span><span class="boring">        Write(String),
</span><span class="boring">        ChangeColor(i32, i32, i32),
</span><span class="boring">    }
</span><span class="boring">
</span>    impl Message {
        fn call(&amp;self) {
            // method body would be defined here
        }
    }

    let m = Message::Write(String::from("hello"));
    m.call();
<span class="boring">}</span></code></pre></pre>
<p>D'√∫s√°idfeadh corp an mhodha <code>self</code> chun an luach a thugamar ar an
modh ar. Sa sampla seo, chrutha√≠omar athr√≥g <code>m</code> a bhfuil an luach aige
<code>Message::Write(String::from("hello"))</code>, agus sin an rud a bheidh <code>self</code> sa
corp an mhodha <code>call</code> nuair a ritheann <code>m.call()</code>.</p>
<p>Breathna√≠mid ar enum eile sa leabharlann chaighde√°nach at√° an-choitianta agus
√∫s√°ideach: <code>Option</code>.</p>
<h3 id="an-option-enum-agus-a-bunt√°ist√≠-thar-luachanna-neamhnithe"><a class="header" href="#an-option-enum-agus-a-bunt√°ist√≠-thar-luachanna-neamhnithe">An <code>Option</code> Enum agus a Bunt√°ist√≠ thar Luachanna Neamhnithe</a></h3>
<p>Scr√∫da√≠onn an chuid seo c√°s-staid√©ar ar <code>Option</code>, a bhfuil sainmh√≠ni√∫ eile air
ag an leabharlann chaighde√°nach. Ionch√≥da√≠onn an cine√°l <code>Option</code> an c√°s an-choitianta i
a d'fh√©adfadh a bheith ina luach rud √©igin n√≥ d'fh√©adfadh s√© a bheith rud ar bith.</p>
<p>Mar shampla, m√° iarrann t√∫ an ch√©ad mh√≠r ar liosta neamhfholamh, gheobhaidh t√∫
luach. M√° iarrann t√∫ an ch√©ad mh√≠r ar liosta folamh, n√≠ bhfaighfe√° rud ar bith.
Is f√©idir leis an tiomsaitheoir an coincheap seo a chur in i√∫l i dt√©arma√≠ an ch√≥rais chine√°il
seice√°il an bhfuil gach c√°s ba cheart duit a l√°imhse√°il l√°imhse√°ilte agat; seo
is f√©idir le feidhmi√∫lacht cosc ‚Äã‚Äãa chur ar fhabhtanna at√° thar a bheith coitianta i gcl√°ir eile
teangacha.</p>
<p>Is minic a smaoin√≠tear ar dhearadh teanga r√≠omhchl√°raithe i dt√©arma√≠ na ngn√©ithe at√° agat
san √°ireamh, ach t√° na gn√©ithe a eisiamh t√∫ t√°bhachtach freisin. N√≠l an meirge ag meirge
null gn√© at√° ag go leor teangacha eile. Is luach √© <em>Null</em> a chialla√≠onn ann
n√≠l aon luach ann. I dteangacha le null, is f√©idir athr√≥ga a bheith i gceann de na hathr√≥ga i gc√≥na√≠
dh√° st√°t: neamhn√≠ n√≥ neamh-null.</p>
<p>Ina chur i l√°thair in 2009 ‚ÄúNull References: The Billion Dollar Mistake,‚Äù Tony
T√° s√© seo le r√° ag Hoare, aireag√≥ir null:</p>
<blockquote>
<p>Tugaim mo bhot√∫n billi√∫n dollar air. Ag an am sin, bh√≠ m√© ag dearadh an ch√©ad cheann
cine√°l c√≥ras cuimsitheach le haghaidh tagairt√≠ i dteanga at√° d√≠rithe ar oibiachta√≠. Mo
Ba √© an sprioc n√° a chinnti√∫ gur ch√≥ir go mbeadh gach √∫s√°id a bhaintear as teistim√©ireachta√≠ go hioml√°n s√°bh√°ilte, le
seice√°il a dh√©anann an tiomsaitheoir go huathoibr√≠och. Ach n√≠ raibh m√© in ann cur i gcoinne
temptation tagairt ar neamhn√≠ a chur isteach, go simpl√≠ toisc go raibh s√© chomh h√©asca sin
chur i bhfeidhm. Mar thoradh air seo t√° l√≠on m√≥r earr√°id√≠, leochaileachta√≠ agus c√≥rais
tuairteanna, a ba ch√∫is d√≥cha billi√∫n dollar de pian agus dam√°iste i
daichead bliain anuas.</p>
</blockquote>
<p>Is √≠ an fhadhb le luachanna nialasach n√° m√° dh√©anann t√∫ iarracht luach nialasach a √∫s√°id mar
luach neamh-null, gheobhaidh t√∫ earr√°id de chine√°l √©igin. Mar gheall ar seo ar neamhn√≠ n√≥-null
t√° an mhaoin forleatach, t√° s√© thar a bheith √©asca earr√°id den chine√°l seo a dh√©anamh.</p>
<p>Mar sin f√©in, t√° an coincheap at√° null ag iarraidh a chur in i√∫l f√≥s √∫s√°ideach: a
Is luach √© null at√° neamhbhail√≠ faoi l√°thair n√≥ at√° as l√°thair ar ch√∫is √©igin.</p>
<p>N√≠ bhaineann an fhadhb leis an gcoincheap i nd√°ir√≠re ach leis an √°bhar ar leith
cur i bhfeidhm. Mar sin, n√≠l nulls ag Rust, ach t√° enum aige
ar f√©idir leis an gcoincheap luach a bheith i l√°thair n√≥ as l√°thair a ionch√≥d√∫. T√° an enum seo
<code>Rogha&lt;T&gt;</code>, agus <a href="../std/option/enum.Option.html">sainmh√≠n√≠tear √© sa ghn√°thleabharlann</a><!-- neamhaird a dh√©anamh ar -->
mar seo a leanas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Option&lt;T&gt; {
    None,
    Some(T),
}
<span class="boring">}</span></code></pre></pre>
<p>T√° an <code>Option&lt;T&gt;</code> enum chomh h√∫s√°ideach sin go bhfuil s√© san √°ireamh fi√∫ sa r√©amhr√°; leat
n√≠ g√° √© a thabhairt isteach sa raon feidhme go sainr√°ite. T√° a leagan san √°ireamh freisin i
an r√©amhr√°: is f√©idir leat <code>Some</code> agus <code>None</code> a √∫s√°id go d√≠reach gan an <code>Option::</code>
r√©im√≠r. N√≠l sa <code>Option&lt;T&gt;</code> enum f√≥s ach √°ithne rialta, agus <code>Some(T)</code> agus
Is leaganacha den chine√°l <code>Option&lt;T&gt;</code> iad <code>none</code> f√≥s.</p>
<p>Is gn√© de Rust √© an chomhr√©ir <code>&lt;T&gt;</code> n√°r labhair muid faoi go f√≥ill. T√° s√© a
paraim√©adar cine√°lach, agus cl√∫d√≥imid cine√°lacha n√≠os mionsonraithe i gCaibidil 10.
Faoi l√°thair, n√≠l a fhios agat ach go gcialla√≠onn <code>&lt;T&gt;</code> gurb √© an leagan <code>Some</code> de
is f√©idir leis an enum <code>Option</code> p√≠osa amh√°in sonra√≠ a choinne√°il d'aon chine√°l, agus go bhfuil gach ceann acu
de chine√°l coincr√©ite a √∫s√°idtear in ionad <code>T</code> a dh√©anann an cine√°l forioml√°n <code>Option&lt;T&gt;</code>
cine√°l difri√∫il. Seo roinnt sampla√≠ de luachanna <code>Option</code> a √∫s√°id le coinne√°il
cine√°lacha uimhreacha agus cine√°lacha ruaille:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let some_number = Some(5);
    let some_char = Some('e');

    let absent_number: Option&lt;i32&gt; = None;
<span class="boring">}</span></code></pre></pre>
<p>Is √© <code>Option&lt;i32&gt;</code> an ‚Äã‚Äãcine√°l <code>some_number</code>. Is √© an cine√°l <code>some_char</code>
<code>Option&lt;char&gt;</code>, ar cine√°l difri√∫il √©. Is f√©idir le meirge t√°tal a bhaint as na cine√°lacha seo toisc
t√° luach sonraithe againn laistigh den leagan <code>Some</code>. Le haghaidh <code>absent_number</code>, Rust
√©il√≠onn orainn an cine√°l forioml√°n <code>Option</code> a an√≥: n√≠ f√©idir leis an tiomsaitheoir an t√°tal a bhaint as
cl√≥scr√≠obh go gcoime√°dfaidh an leagan comhfhreagrach <code>Some</code> tr√≠ bhreathn√∫ ar a
luach <code>none</code>. Anseo, ins√≠onn muid do Rust go bhfuil i gceist againn go mbeadh <code>absent_number</code> de chine√°l
<code>Option&lt;i32&gt;</code>.</p>
<p>Nuair a bh√≠onn luach <code>Some</code> againn, t√° a fhios againn go bhfuil luach i l√°thair agus go bhfuil an luach ann
ar si√∫l laistigh den <code>Some</code>. Nuair a bh√≠onn luach <code>None</code> againn, i gciall √©igin cialla√≠onn s√© an
rud c√©anna le null: n√≠l luach bail√≠ againn. Mar sin c√©n f√°th a bhfuil <code>Option&lt;T&gt;</code> agat
ar bith n√≠os fearr n√° null a bheith agat?</p>
<p>I mbeag√°n focal, toisc go bhfuil <code>Option&lt;T&gt;</code> agus <code>T</code> (√°it ar f√©idir <code>T</code> a bheith de chine√°l ar bith) difri√∫il
cine√°lacha, n√≠ ligfidh an tiomsaitheoir d√∫inn luach <code>Option&lt;T&gt;</code> a √∫s√°id amhail is d√° mba √©
cinnte luach bail√≠. Mar shampla, n√≠ thioms√≥idh an c√≥d seo, toisc go bhfuil
ag iarraidh <code>i8</code> a chur le <code>Option&lt;i8&gt;</code>:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let x: i8 = 5;
    let y: Option&lt;i8&gt; = Some(5);

    let sum = x + y;
<span class="boring">}</span></code></pre>
<p>M√° rithimid an c√≥d seo, faighimid teachtaireacht earr√°ide mar an gceann seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling enums v0.1.0 (file:///projects/enums)
error[E0277]: cannot add `Option&lt;i8&gt;` to `i8`
 --&gt; src/main.rs:5:17
  |
5 |     let sum = x + y;
  |                 ^ no implementation for `i8 + Option&lt;i8&gt;`
  |
  = help: the trait `Add&lt;Option&lt;i8&gt;&gt;` is not implemented for `i8`
  = help: the following other types implement trait `Add&lt;Rhs&gt;`:
            `&amp;'a i8` implements `Add&lt;i8&gt;`
            `&amp;i8` implements `Add&lt;&amp;i8&gt;`
            `i8` implements `Add&lt;&amp;i8&gt;`
            `i8` implements `Add`

For more information about this error, try `rustc --explain E0277`.
error: could not compile `enums` (bin "enums") due to 1 previous error
</code></pre>
<p>Go dian! Go bun√∫sach, cialla√≠onn an teachtaireacht earr√°ide seo nach dtuigeann Rust conas
chun <code>i8</code> agus <code>Option&lt;i8&gt;</code> a chur leis, toisc gur cine√°lacha √©ags√∫la iad. Nuair a bheidh muid
a bhfuil luach de chine√°l cos√∫il le <code>i8</code> i Rust, cinnteoidh an tiomsaitheoir go mbeidh muid
luach bail√≠ i gc√≥na√≠. Is f√©idir linn dul ar aghaidh go muin√≠neach gan seice√°il a dh√©anamh
le haghaidh null roimh an luach sin a √∫s√°id. Go dt√≠ go bhfuil <code>Option&lt;i8&gt;</code> againn (n√≥
cib√© cine√°l luacha a bhfuilimid ag obair leis) an gcaithfidh muid a bheith buartha faoi b'fh√©idir
gan luach, agus cinnteoidh an tiomsaitheoir go nd√©ile√°lfaimid leis an gc√°s sin roimhe seo
ag baint √∫s√°ide as an luach.</p>
<p>I bhfocail eile, caithfidh t√∫ <code>Option&lt;T&gt;</code> a thiont√∫ go <code>T</code> sular f√©idir leat
oibr√≠ochta√≠ <code>T</code> a dh√©anamh leis. Go ginear√°lta, cuid√≠onn s√© seo le breith ar cheann de na cinn is m√≥
ceisteanna coitianta le null: ag glacadh leis nach bhfuil rud √©igin ar neamhn√≠ nuair at√° s√© i nd√°ir√≠re.</p>
<p>M√° dh√©antar an baol a bhaineann le luach neamhneal a ghlacadh go m√≠cheart, cabhra√≠onn s√© leat a bheith
n√≠os m√≥ muin√≠ne i do ch√≥d. D'fhonn go mbeadh luach is f√©idir a bheith b'fh√©idir
null, n√≠ m√≥r duit liost√°il go sainr√°ite tr√≠d an gcine√°l luacha sin a dh√©anamh <code>Option&lt;T&gt;</code>.
Ansin, nuair a √∫s√°ideann t√∫ an luach sin, ceangla√≠tear ort an c√°s a l√°imhse√°il go sainr√°ite
nuair a bh√≠onn an luach nialasach. I ngach √°it go bhfuil luach ag cine√°l nach bhfuil
<code>Option&lt;T&gt;</code>, glacann t√∫ leis go s√°bh√°ilte nach bhfuil an luach ar neamhn√≠. Bh√≠ s√© seo a
cinneadh dearaidh d‚Äôaon ghn√≥ do Rust teorainn a chur le forleatach agus m√©ad√∫ null
s√°bh√°ilteacht an ch√≥id meirge.</p>
<p>Mar sin, conas a fhaigheann t√∫ an luach <code>T</code> as leagan <code>Some</code> nuair a bh√≠onn luach agat
den chine√°l <code>Option&lt;T&gt;</code> ionas gur f√©idir leat an luach sin a √∫s√°id? T√° a
l√≠on m√≥r modhanna at√° √∫s√°ideach i gc√°sanna √©ags√∫la; is f√©idir leat
seice√°il iad ina <a href="../std/option/enum.Option.html">a ch√°ip√©is√≠ocht</a> <!-- neamhaird -->. Ag √©ir√≠ eolach
leis na modhanna ar <code>Option&lt;T&gt;</code> beidh siad thar a bheith √∫s√°ideach i do thuras le
Meirge.</p>
<p>Go ginear√°lta, chun luach <code>Option&lt;T&gt;</code> a √∫s√°id, ba mhaith leat c√≥d a bheith agat
l√°imhse√°lfaidh gach leagan. Ba mhaith leat roinnt c√≥d a bheidh ar si√∫l ach amh√°in nuair a bheidh agat
Luach <code>Some(T)</code>, agus ceada√≠tear don ch√≥d seo an <code>T</code> istigh a √∫s√°id. Ba mhaith leat roinnt
c√≥d eile le rith mura bhfuil luach <code>None</code> agat, agus mura bhfuil a
luach <code>T</code> ar f√°il. Is √©ard at√° sa slonn <code>match</code> n√° t√≥g√°il ar shreabhadh rialaithe a dh√©anann
d√©anann s√© seo go d√≠reach nuair a √∫s√°idtear √© le enums: beidh s√© ag rith c√≥d difri√∫il ag brath ar
c√©n leagan den enum at√° aige, agus is f√©idir leis an gc√≥d sin √∫s√°id a bhaint as na sonra√≠ taobh istigh den
luach meaitse√°la.</p>
<div style="break-before: page; page-break-before: always;"></div><!-- Sean-cheannteideal. N√° bain amach n√≥ seans go mbrisfidh naisc. -->
<p><a id="the-match-control-flow-operator"></a></p>
<h2 id="an-match-t√≥g√°il-sreabhadh-rialaithe"><a class="header" href="#an-match-t√≥g√°il-sreabhadh-rialaithe">An "match" T√≥g√°il Sreabhadh Rialaithe</a></h2>
<p>T√° strucht√∫r sreafa rialaithe thar a bheith cumhachtach ag Rust ar a dtugtar <code>match</code> sin
ligeann duit luach a chur i gcompar√°id le sraith patr√∫n agus ansin a fhorghn√≠omh√∫
c√≥d bunaithe ar an patr√∫n a oireann. Is f√©idir le patr√∫in a bheith comhdh√©anta de luachanna litri√∫la,
ainmneacha athraitheacha, saor√≥ga, agus go leor ruda√≠ eile; <a href="ch19-00-patterns.html">Caibidil
19</a><!-- neamhaird --> cl√∫da√≠onn s√© na cine√°lacha √©ags√∫la patr√∫n go l√©ir
agus cad a dh√©anann siad. Tagann cumhacht <code>match</code> as saini√∫lacht an
patr√∫in agus ar an bhf√≠ric go ndeimhn√≠onn an tiomsaitheoir go bhfuil gach c√°s f√©ideartha
l√°imhsithe.</p>
<p>Smaoinigh ar shloinneadh <code>match</code> a bheith cos√∫il le meais√≠n s√≥rt√°la boinn: sleamhna√≠onn boinn
s√≠os rian le poill de mh√©ideanna √©ags√∫la ar a feadh, agus titeann gach bonn tr√≠d
an ch√©ad pholl a bhuaileann s√© a lu√≠onn s√© isteach. Ar an mbealach c√©anna, t√©ann luachanna
tr√≠ gach patr√∫n i <code>match</code>, agus ag an gc√©ad phatr√∫n "oireann,"
titeann an luach isteach sa bhloc c√≥d gaolmhar at√° le h√∫s√°id le linn forghn√≠omhaithe.</p>
<p>Ag labhairt di ar bhoinn, d√©anaimis iad a √∫s√°id mar shampla ag baint √∫s√°ide as <code>match</code>! Is f√©idir linn scr√≠obh a
feidhm a ghlacann bonn SAM anaithnid agus, ar bhealach cos√∫il leis an gcomhaireamh
meais√≠n, socra√≠onn s√© c√©n bonn at√° ann agus cuireann s√© a luach ar ais ina cent, mar a thaispe√°ntar
i Liosta 6-3.</p>
<Listing number="6-3" caption="An enum and a `match` expression that has the variants of the enum as its patterns">
<pre><pre class="playground"><code class="language-rust">enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter,
}

fn value_in_cents(coin: Coin) -&gt; u8 {
    match coin {
        Coin::Penny =&gt; 1,
        Coin::Nickel =&gt; 5,
        Coin::Dime =&gt; 10,
        Coin::Quarter =&gt; 25,
    }
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>D√©anaimis miondeal√∫ ar an <code>match</code> san fheidhm <code>value_in_cents</code>. Ar dt√∫s d√©anaimid liosta
an eochairfhocal <code>match</code> agus slonn ina dhiaidh sin, arb √© an luach √© sa ch√°s seo
<code>coin</code>. Dealra√≠onn s√© seo an-chos√∫il le slonn coinn√≠ollach a √∫s√°idtear le <code>if</code>, ach
t√° difr√≠ocht mh√≥r ann: le <code>if</code>, is g√° an riocht a mheas go dt√≠ a
Luach Boole, ach anseo is f√©idir √© a bheith de chine√°l ar bith. An cine√°l <code>coin</code> sa sampla seo
is √© an <code>Coin</code> enum a shainmh√≠n√≠omar ar an gc√©ad l√≠ne.</p>
<p>Ina dhiaidh sin t√° na hairm <code>match</code>. T√° dh√° chuid ag l√°mh: patr√∫n agus roinnt c√≥d. T√° an
t√° patr√∫n sa ch√©ad l√°mh anseo arb √© an luach <code>Coin::Penny</code> agus ansin an <code>=&gt;</code>
oibreoir a scarann ‚Äã‚Äãan patr√∫n agus an c√≥d a rith. An c√≥d sa ch√°s seo
n√≠l ann ach an luach <code>1</code>. T√° gach l√°mh scartha √≥n gc√©ad cheann eile le cam√≥g.</p>
<p>Nuair a fheidhm√≠onn an slonn <code>match</code>, d√©anann s√© an luach iarmhartach a chur i gcompar√°id le
patr√∫n gach l√°mh, in ord. M√° mheaitse√°lann patr√∫n leis an luach, an c√≥d
a bhaineann leis an bpatr√∫n sin a fhorghn√≠omh√∫. Mura n-oireann an patr√∫n sin leis an
luach, leanann an forghn√≠omh√∫ ar aghaidh go dt√≠ an ch√©ad l√°mh eile, an oiread agus is i meais√≠n s√≥rt√°la mona.
Is f√©idir linn an oiread arm agus is g√° a bheith againn: i Liosta 6-3, t√° ceithre l√°mh ag √°r <code>match</code>.</p>
<p>Is slonn √© an c√≥d a bhaineann le gach l√°mh, agus an luach iarmhartach de
is √© an slonn sa l√°mh meaitse√°la an luach a fhaightear ar ais don
abairt <code>match</code> ar fad.</p>
<p>De ghn√°th n√≠ √∫s√°idimid l√∫ib√≠n√≠ curacha m√° t√° c√≥d l√°mh an chluiche gearr, mar at√° s√©
i Liosta 6-3 √°it nach dtugann gach l√°mh ach luach ar ais. M√°s mian leat a re√°cht√°il iolrach
l√≠nte c√≥d i l√°mh cluiche, n√≠ m√≥r duit √∫s√°id a bhaint as l√∫ib√≠n√≠ chatach, agus an cam√≥g
T√° lean√∫int na l√°imhe roghnach ansin. Mar shampla, prionta√≠ an c√≥d seo a leanas
"Pingin an t-√°dh!" gach uair a thugtar an modh le <code>Coin::Penny</code>, ach f√≥s
seo ar ais luach deiridh an bhloic, <code>1</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter,
</span><span class="boring">}
</span><span class="boring">
</span>fn value_in_cents(coin: Coin) -&gt; u8 {
    match coin {
        Coin::Penny =&gt; {
            println!("Lucky penny!");
            1
        }
        Coin::Nickel =&gt; 5,
        Coin::Dime =&gt; 10,
        Coin::Quarter =&gt; 25,
    }
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
<h3 id="patr√∫in-a-cheangla√≠onn-luachanna"><a class="header" href="#patr√∫in-a-cheangla√≠onn-luachanna">Patr√∫in a Cheangla√≠onn Luachanna</a></h3>
<p>Gn√© √∫s√°ideach eile a bhaineann le hairm mheaitse√°la n√° gur f√©idir leo ceangal a dh√©anamh le codanna an
luachanna a mheaitse√°lann an patr√∫n. Seo mar is f√©idir linn luachanna a bhaint as enum
athraithigh.</p>
<p>Mar shampla, d√©anaimis ceann d√°r n-athraithigh enum a athr√∫ chun sonra√≠ a choinne√°il istigh ann.
√ì 1999 go dt√≠ 2008, bhuail na St√°it Aontaithe cheathr√∫ le √©ags√∫la
deara√≠ do gach ceann de na 50 st√°t ar thaobh amh√°in. N√≠ bhfuair aon bhoinn eile an st√°t
deara√≠, mar sin n√≠l ach an luach breise seo ag ceathr√∫na. Is f√©idir linn an fhaisn√©is seo a chur le
√°r <code>enum</code> tr√≠d an leagan <code>Quarter</code> a athr√∫ chun luach <code>UsState</code> a chur san √°ireamh
st√≥r√°ilte istigh ann, rud at√° d√©anta againn i Liost√∫ 6-4.</p>
<Listing number="6-4" caption="A `Coin` enum in which the `Quarter` variant also holds a `UsState` value">
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)] // so we can inspect the state in a minute
enum UsState {
    Alabama,
    Alaska,
    // --snip--
}

enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter(UsState),
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Samhl√≥imis go bhfuil cara ag iarraidh na 50 ceathr√∫ st√°it ar fad a bhaili√∫. C√© go
D√©anaimid √°r n-athr√∫ scaoilte a sh√≥rt√°il de r√©ir cine√°il boinn, glaofaimid amach freisin ainm an
luaigh baint aige le gach r√°ithe ionas m√°s ceann √© nach bhfuil ag √°r gcara,
is f√©idir leo √© a chur lena mbaili√∫ch√°n.</p>
<p>Sa slonn meaitse√°la don ch√≥d seo, cuirimid athr√≥g darb ainm <code>state</code> leis an
patr√∫n a mheaitse√°lann luachanna an leagain <code>Coin::Quarter</code>. Nuair a
Meaitse√°lann <code>Coin::Quarter</code>, beidh an athr√≥g <code>state</code> ina gceangal leis an luach sin
st√°t ceathr√∫. Ansin is f√©idir linn <code>state</code> a √∫s√°id sa ch√≥d don l√°mh sin, mar sin:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span>fn value_in_cents(coin: Coin) -&gt; u8 {
    match coin {
        Coin::Penny =&gt; 1,
        Coin::Nickel =&gt; 5,
        Coin::Dime =&gt; 10,
        Coin::Quarter(state) =&gt; {
            println!("State quarter from {state:?}!");
            25
        }
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    value_in_cents(Coin::Quarter(UsState::Alaska));
</span><span class="boring">}</span></code></pre></pre>
<p>D√° gcuirfimid <code>value_in_cents(Coin::Quarter(UsState::Alaska))</code>, <code>coin</code>
bheadh ‚Äã‚Äã<code>Coin::Quarter(UsState::Alaska)</code>. Nuair a dh√©anaimid an luach sin i gcompar√°id le gach ceann acu
de na hairm chluiche, n√≠ mheaitse√°lann aon cheann acu go dt√≠ go sroicheann muid <code>Coin::Quarter(state)</code>. Ag
an pointe sin, is √© an luach <code>UsState::Alaska</code> a bheidh mar cheangal ar <code>state</code>. Is f√©idir linn
ansin bain √∫s√°id as an gceangal sin sa slonn <code>println!</code>, mar sin faigh an taobh istigh
luaigh luach amach as an malairt <code>coin</code> enum le haghaidh <code>Quarter</code>.</p>
<h3 id="ag-meaitse√°il-le-optiont"><a class="header" href="#ag-meaitse√°il-le-optiont">Ag meaitse√°il le <code>Option&lt;T&gt;</code></a></h3>
<p>San alt roimhe seo, bh√≠omar ag iarraidh an luach <code>T</code> istigh a bhaint as an <code>Some</code>
c√°s agus <code>Option&lt;T&gt;</code> in √∫s√°id; is f√©idir linn <code>Option&lt;T&gt;</code> a l√°imhse√°il freisin ag baint √∫s√°ide as <code>match</code>, mar
rinne muid leis an <code>Coin</code> enum! In ionad boinn a chur i gcompar√°id, d√©anfaimid compar√°id idir na
leaganacha de <code>Option&lt;T&gt;</code>, ach fanann an bealach a oibr√≠onn an slonn <code>match</code> mar an gc√©anna
c√©anna.</p>
<p>Ligean le r√° gur mhaith linn feidhm a scr√≠obh a ghlacann <code>Option&lt;i32&gt;</code> agus, m√°s rud √©
t√° luach istigh, cuireann s√© 1 leis an luach sin. Mura bhfuil luach istigh ann,
ba ch√≥ir don fheidhm an luach <code>None</code> a thabhairt ar ais agus gan iarracht a dh√©anamh aon cheann a dh√©anamh
oibr√≠ochta√≠.</p>
<p>T√° an fheidhm seo an-√©asca a scr√≠obh, a bhu√≠ochas sin do <code>match</code>, agus beidh cuma mhaith
Liost√°il 6-5.</p>
<Listing number="6-5" caption="A function that uses a `match` expression on an `Option<i32>`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
        match x {
            None =&gt; None,
            Some(i) =&gt; Some(i + 1),
        }
    }

    let five = Some(5);
    let six = plus_one(five);
    let none = plus_one(None);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>D√©anaimis scr√∫d√∫ n√≠os mine ar an gc√©ad fhorghn√≠omh√∫ de <code>plus_one</code>. Nuair a ghlaoimid
<code>plus_one(five)</code>, beidh an athr√≥g <code>x</code> i gcorp <code>plus_one</code>
luach <code>Some(5)</code>. D√©anaimid √© sin a chur i gcompar√°id le gach l√°mh cluiche:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main() {
</span><span class="boring">    fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
</span><span class="boring">        match x {
</span>            None =&gt; None,
<span class="boring">            Some(i) =&gt; Some(i + 1),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let five = Some(5);
</span><span class="boring">    let six = plus_one(five);
</span><span class="boring">    let none = plus_one(None);
</span><span class="boring">}</span></code></pre>
<p>N√≠ mheaitse√°lann an luach <code>Some(5)</code> an patr√∫n <code>None</code>, mar sin leanaimid ar aghaidh chuig an
l√°mh eile:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main() {
</span><span class="boring">    fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
</span><span class="boring">        match x {
</span><span class="boring">            None =&gt; None,
</span>            Some(i) =&gt; Some(i + 1),
<span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let five = Some(5);
</span><span class="boring">    let six = plus_one(five);
</span><span class="boring">    let none = plus_one(None);
</span><span class="boring">}</span></code></pre>
<p>An meaitse√°lann <code>Some(5)``Some(i)</code>? D√©anann s√©! T√° an leagan c√©anna againn. T√° an <code>i</code>
ceangla√≠onn s√© leis an luach at√° i <code>Some</code>, mar sin glacann <code>i</code> an luach <code>5</code>. An c√≥d i
d√©antar l√°mh an chluiche ansin, mar sin cuirimid 1 le luach <code>i</code> agus crutha√≠mid a
luach <code>Some</code> nua len√°r <code>6</code> ioml√°n istigh.</p>
<p>Anois d√©anaimis machnamh ar an dara glao ar <code>plus_one</code> i Liost√∫ 6-5, √°it a bhfuil <code>x</code>
<code>None</code>. Cuirimid isteach sa <code>match</code> agus cuirimid i gcompar√°id leis an gc√©ad l√°mh:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main() {
</span><span class="boring">    fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
</span><span class="boring">        match x {
</span>            None =&gt; None,
<span class="boring">            Some(i) =&gt; Some(i + 1),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let five = Some(5);
</span><span class="boring">    let six = plus_one(five);
</span><span class="boring">    let none = plus_one(None);
</span><span class="boring">}</span></code></pre>
<p>Meaitse√°lann s√©! N√≠l aon luach le cur leis, mar sin stopann an cl√°r agus seolann s√© an
luach <code>none</code> ar thaobh na l√°imhe deise de <code>=&gt;</code>. Mar gheall ar mheaitse√°il an ch√©ad l√°mh, n√≠ eile
d√©antar compar√°id idir airm.</p>
<p>T√° s√© √∫s√°ideach 'meaitse√°il' agus enums a chomhcheangal i go leor c√°sanna. Feicfidh t√∫ √© seo
patr√∫n go leor sa ch√≥d meirge: <code>match</code> i gcoinne enum, ceangail athr√≥g leis an
sonra√≠ taobh istigh, agus ansin a fhorghn√≠omh√∫ c√≥d bunaithe ar s√©. T√° s√© beag√°n tricky ar dt√∫s, ach
a luaithe a rachaidh t√∫ i dtaith√≠ air, ba mhaith leat go mbeadh s√© agat i ngach teanga. T√° s√©
go seasta is fearr leat √∫s√°ideoir.</p>
<h3 id="t√°-meaitse√°lacha-uileghabh√°lach"><a class="header" href="#t√°-meaitse√°lacha-uileghabh√°lach">T√° Meaitse√°lacha Uileghabh√°lach</a></h3>
<p>T√° gn√© amh√°in eile den ‚Äòmheaitse√°il‚Äô ar g√° d√∫inn a phl√©: n√≠ m√≥r patr√∫in na n-arm
gach f√©idearthacht a chl√∫dach. Smaoinigh ar an leagan seo d√°r bhfeidhm <code>plus_one</code>,
a bhfuil fabht aige agus nach dtioms√≥idh:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
        match x {
            Some(i) =&gt; Some(i + 1),
        }
    }
<span class="boring">
</span><span class="boring">    let five = Some(5);
</span><span class="boring">    let six = plus_one(five);
</span><span class="boring">    let none = plus_one(None);
</span><span class="boring">}</span></code></pre>
<p>N√≠or l√°imhse√°il muid an c√°s <code>None</code>, mar sin cruth√≥idh an c√≥d seo fabht. Ar √°mhara√≠ an tsaoil, t√°
fabht T√° a fhios ag Rust conas a ghabh√°il. M√° dh√©anaimid iarracht an c√≥d seo a thioms√∫, gheobhaidh muid √©
earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling enums v0.1.0 (file:///projects/enums)
error[E0004]: non-exhaustive patterns: `None` not covered
   --&gt; src/main.rs:3:15
    |
3   |         match x {
    |               ^ pattern `None` not covered
    |
note: `Option&lt;i32&gt;` defined here
   --&gt; file:///home/.rustup/toolchains/1.82/lib/rustlib/src/rust/library/core/src/option.rs:571:1
    |
571 | pub enum Option&lt;T&gt; {
    | ^^^^^^^^^^^^^^^^^^
...
575 |     None,
    |     ---- not covered
    = note: the matched value is of type `Option&lt;i32&gt;`
help: ensure that all possible cases are being handled by adding a match arm with a wildcard pattern or an explicit pattern as shown
    |
4   ~             Some(i) =&gt; Some(i + 1),
5   ~             None =&gt; todo!(),
    |

For more information about this error, try `rustc --explain E0004`.
error: could not compile `enums` (bin "enums") due to 1 previous error
</code></pre>
<p>T√° a fhios ag Rust n√°r chl√∫daigh muid gach c√°s f√©ideartha, agus t√° a fhios aige fi√∫ c√© acu
patr√∫n dearmadta againn! T√° meaitseanna meirge <em>uileghabh√°lach</em>: n√≠ m√≥r d√∫inn gach ceann deireanach a sceite
f√©idearthacht ionas go mbeidh an c√≥d bail√≠. Go h√°irithe i gc√°s
<code>Option&lt;T&gt;</code>, nuair a chuireann Rust cosc ‚Äã‚Äãorainn dearmad a dh√©anamh ar an
‚ÄòGan c√°s‚Äô, cosna√≠onn s√© sinn √≥ bheith ag glacadh leis go bhfuil luach againn nuair a d‚Äôfh√©adfaimis
bheith ar neamhn√≠, rud a fh√°gann go bhfuil an bot√∫n billi√∫n dollar a pl√©adh n√≠os luaithe dodh√©anta.</p>
<h3 id="patr√∫in-catch-all-agus-an-sealbh√≥ir-√Åite-_"><a class="header" href="#patr√∫in-catch-all-agus-an-sealbh√≥ir-√Åite-_">Patr√∫in Catch-All agus an Sealbh√≥ir √Åite <code>_</code></a></h3>
<p>Ag baint √∫s√°ide as enums, is f√©idir linn a ghlacadh freisin gn√≠omhartha speisialta le haghaidh c√∫pla luachanna ar leith, ach
do gach luach eile d√©an beart r√©amhshocraithe amh√°in. Samhlaigh go bhfuil cluiche √° chur i bhfeidhm againn
m√°s rud √©, m√° rolla√≠onn t√∫ 3 ar rolla d√≠sle, n√≠ bhogann d'imreoir, ach ina ionad sin
Faigheann hata mhaisi√∫il nua. M√° rolla√≠onn t√∫ 7, cailleann d'imreoir hata mhaisi√∫il. Do ch√°ch
luachanna eile, bogann d'imreoir an l√≠on sin sp√°sanna ar an gcl√°r cluiche. Seo chugaibh
<code>match</code> a chuireann an loighic sin i bhfeidhm, le toradh an rolla d√≠sle
hardcoded seachas luach randamach, agus gach loighic eile ionada√≠ocht ag
feidhmeanna gan chomhlachta√≠ toisc go bhfuil cur chun feidhme iarbh√≠r na bhfeidhmeanna sin lasmuigh den sc√≥ip le haghaidh
an sampla seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let dice_roll = 9;
    match dice_roll {
        3 =&gt; add_fancy_hat(),
        7 =&gt; remove_fancy_hat(),
        other =&gt; move_player(other),
    }

    fn add_fancy_hat() {}
    fn remove_fancy_hat() {}
    fn move_player(num_spaces: u8) {}
<span class="boring">}</span></code></pre></pre>
<p>Don ch√©ad d√° l√°mh, is iad na patr√∫in na luachanna litri√∫la <code>3</code> agus <code>7</code>. Le haghaidh
an l√°mh deiridh a chl√∫da√≠onn gach luach f√©ideartha eile, is √© an patr√∫n an
athr√≥g at√° roghnaithe againn chun <code>other</code> a ainmni√∫. An c√≥d a ritheann don l√°mh <code>other</code>
√ös√°ideann s√© an athr√≥g tr√≠na chur ar aghaidh chuig an bhfeidhm <code>move_player</code>.</p>
<p>Tiomsa√≠tear an c√≥d seo, c√© nach bhfuil na luachanna f√©ideartha go l√©ir liostaithe againn a
Is f√©idir le <code>u8</code> a bheith agat, mar beidh an patr√∫n deireanach ag teacht le gach luach nach bhfuil go sonrach
liostaithe. Comhl√≠onann an patr√∫n uileghabh√°lach seo an riachtanas nach m√≥r <code>match</code> a bheith ann
uileghabh√°lach. Tabhair faoi deara go gcaithfimid an l√°mh ioml√°n a chur suas go deireanach mar go bhfuil an
d√©antar patr√∫in a mheas in ord. M√° chuir muid an l√°mh ghabh√°il-uile n√≠os luaithe, an ceann eile
n√≠ rithfeadh airm cho√≠che, mar sin tabharfaidh Rust fol√°ireamh d√∫inn m√° chuirimid airm leis tar √©is gach rud!</p>
<p>T√° patr√∫n ag meirge freisin ar f√©idir linn a √∫s√°id nuair a theasta√≠onn uainn go mbeidh gach rud againn ach nach dteasta√≠onn uainn
<em>use</em> an luach sa phatr√∫n uileghabh√°lach: Is patr√∫n speisialta √© <code>_</code> a mheaitse√°lann
luach ar bith agus n√≠ cheangla√≠onn s√© leis an luach sin. Ins√≠onn s√© seo do Rust nach bhfuilimid chun
bain √∫s√°id as an luach, mar sin n√≠ thabharfaidh Rust rabhadh d√∫inn faoi athr√≥g n√°r √∫s√°ideadh.</p>
<p>Athr√≥imid rialacha an chluiche: anois, m√° rolla√≠onn t√∫ rud ar bith seachas 3 n√≥
a 7, n√≠ m√≥r duit rolladh ar√≠s. N√≠ g√° d√∫inn an luach uileghabh√°lach a √∫s√°id a thuilleadh, mar sin n√≠ m√≥r d√∫inn
Is f√©idir √°r gc√≥d a athr√∫ chun <code>_</code> a √∫s√°id in ionad na hathr√≥ige darb ainm <code>other</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let dice_roll = 9;
    match dice_roll {
        3 =&gt; add_fancy_hat(),
        7 =&gt; remove_fancy_hat(),
        _ =&gt; reroll(),
    }

    fn add_fancy_hat() {}
    fn remove_fancy_hat() {}
    fn reroll() {}
<span class="boring">}</span></code></pre></pre>
<p>Comhl√≠onann an sampla seo an riachtanas uileghabh√°lachta freisin toisc go bhfuilimid go sainr√°ite
neamhaird a dh√©anamh ar gach luach eile sa l√°mh dheireanach; n√≠l dearmad d√©anta againn ar rud ar bith.</p>
<p>Ar deireadh, athr√≥imid rialacha an chluiche ar√≠s eile ionas nach mbeidh aon rud eile ann
a tharla√≠onn ar do sheal m√° rolla√≠onn t√∫ rud ar bith seachas 3 n√≥ 7. Is f√©idir linn a chur in i√∫l
sin tr√≠ √∫s√°id a bhaint as an luach aonaid (an cine√°l tuple folamh a luaigh muid in <a href="ch03-02-data-types.html#the-tuple-type">‚ÄúThe Tuple
Cine√°l‚Äù</a> <!-- neamhaird a dh√©anamh --> alt) mar an c√≥d a th√©ann leis an l√°mh <code>_</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let dice_roll = 9;
    match dice_roll {
        3 =&gt; add_fancy_hat(),
        7 =&gt; remove_fancy_hat(),
        _ =&gt; (),
    }

    fn add_fancy_hat() {}
    fn remove_fancy_hat() {}
<span class="boring">}</span></code></pre></pre>
<p>Anseo, t√°imid ag insint do Rust go sainr√°ite nach bhfuilimid chun aon luach eile a √∫s√°id
nach bhfuil ag teacht le patr√∫n i l√°mh n√≠os luaithe, agus n√≠limid ag iarraidh aon cheann a rith
c√≥d sa ch√°s seo.</p>
<p>T√° n√≠os m√≥ faoi phatr√∫in agus faoi mheaitse√°il a chl√∫d√≥imid i <a href="ch19-00-patterns.html">Caibidil
19</a><!-- neamhaird a dh√©anamh -->. Faoi l√°thair, t√°imid ag dul ar aghaidh go dt√≠ an
comhr√©ir <code>if let</code>, is f√©idir a bheith √∫s√°ideach i gc√°sanna ina bhfuil an slonn <code>match</code>
rud beag focal.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sreabhadh-rialaithe-gonta-le-if-let-agus-let-else"><a class="header" href="#sreabhadh-rialaithe-gonta-le-if-let-agus-let-else">Sreabhadh Rialaithe Gonta le <code>if let</code> agus <code>let else</code></a></h2>
<p>Ligeann an chomhr√©ir <code>if let</code> duit <code>if</code> agus <code>let</code> a chur le ch√©ile ar bhealach nach bhfuil chomh briathartha
l√°imhse√°il luachanna a mheaitse√°lann patr√∫n amh√°in agus neamhaird √° d√©anamh ar an gcuid eile. Smaoinigh ar an
cl√°r i Liost√∫ 6-6 a mheaitse√°lann ar luach <code>Option&lt;u8&gt;</code> sa
athr√≥g <code>config_max</code> ach n√≠ theasta√≠onn uaidh c√≥d a rith ach amh√°in m√°s √© an luach an <code>Some</code>
athraitheach.</p>
<Listing number="6-6" caption="A `match` that only cares about executing code when the value is `Some`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let config_max = Some(3u8);
    match config_max {
        Some(max) =&gt; println!("The maximum is configured to be {max}"),
        _ =&gt; (),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>M√°s <code>Some</code> an luach, priont√°laimid an luach sa leagan <code>Some</code> tr√≠ cheangal
an luach don athr√≥g <code>max</code> sa phatr√∫n. N√≠limid ag iarraidh aon rud a dh√©anamh
leis an luach <code>None</code>. Chun an slonn <code>match</code> a sh√°samh, caithfimid <code>_ =&gt;  ()</code> a chur leis tar √©is, a phr√≥ise√°il ach malairt amh√°in, a bhfuil c√≥d boilerplate annoying go
cuir.</p>
<p>Ina √°it sin, d'fh√©adfaimis √© seo a scr√≠obh ar bhealach n√≠os giorra ag baint √∫s√°ide as <code>if let</code>. Seo a leanas
Iompra√≠onn an c√≥d mar an gc√©anna leis an `match`` i Liost√∫ 6-6:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let config_max = Some(3u8);
    if let Some(max) = config_max {
        println!("The maximum is configured to be {max}");
    }
<span class="boring">}</span></code></pre></pre>
<p>Glacann an chomhr√©ir <code>if let</code> patr√∫n agus slonn scartha le cothrom
comhartha. Oibr√≠onn s√© ar an mbealach c√©anna le <code>match</code>, √°it a dtugtar an abairt do na
<code>match</code> agus is √© an patr√∫n a ch√©ad l√°mh. Sa ch√°s seo, t√° an patr√∫n
<code>Some(max)</code>, agus ceangla√≠onn an <code>max</code> leis an luach taobh istigh den <code>Some</code>. Is f√©idir linn ansin
√∫s√°id <code>max</code> i gcorp an bhloic <code>if let</code> ar an mbealach c√©anna a d'√∫s√°id muid <code>max</code> in
an l√°mh <code>match</code> comhfhreagrach. N√≠ ritheann an c√≥d sa bhloc <code>if let</code> ach amh√°in m√° t√° an
meaitse√°lann luach an patr√∫n.</p>
<p>Cialla√≠onn √∫s√°id <code>if let</code> n√≠os l√∫ cl√≥scr√≠obh, n√≠os l√∫ eang√∫, agus n√≠os l√∫ c√≥d pl√°ta coire.
Mar sin f√©in, caillfidh t√∫ an seice√°il uileghabh√°lach a fhorfheidhm√≠onn <code>match</code>. Ag roghn√∫
idir <code>match</code> agus <code>if let</code> ag brath ar a bhfuil ar si√∫l agat i do chuid f√©in
an staid agus an bhfuil comhbhr√≥n oiri√∫nach d√≥ n√≥ nach bhfuil
seice√°il uileghabh√°lach a chailleadh.</p>
<p>I bhfocail eile, is f√©idir leat smaoineamh ar <code>if let</code> mar shi√∫cra comhr√©ire le haghaidh <code>match</code> sin
ritheann c√≥d nuair a mheaitse√°lann an luach patr√∫n amh√°in agus ansin neamhaird ar gach luach eile.</p>
<p>Is f√©idir linn <code>else</code> a chur san √°ireamh le <code>if let</code>. An bloc c√≥d a th√©ann leis an
is ionann <code>else</code> agus an bloc c√≥d a rachadh leis an tuiseal <code>_</code> sa
<code>match</code> at√° comhionann leis an abairt <code>if let</code> agus <code>else</code>. Athghairm an
Sainmh√≠ni√∫ <code>Coin</code> enum i Liosta 6-4, √°it a raibh an leagan <code>Quarter</code>
luach <code>UsState</code>. D√° dteast√≥dh uainn gach bonn neamhcheathr√∫n a chomhaireamh feicimid agus sinn freisin
ag f√≥gairt staid na ceathr√∫n, d‚Äôfh√©adfaimis √© sin a dh√©anamh le <code>match</code>
abairt, mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let coin = Coin::Penny;
</span>    let mut count = 0;
    match coin {
        Coin::Quarter(state) =&gt; println!("State quarter from {state:?}!"),
        _ =&gt; count += 1,
    }
<span class="boring">}</span></code></pre></pre>
<p>N√≥ d‚Äôfh√©adfaimis nath <code>if let</code> agus <code>else</code> a √∫s√°id, mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)]
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let coin = Coin::Penny;
</span>    let mut count = 0;
    if let Coin::Quarter(state) = coin {
        println!("State quarter from {state:?}!");
    } else {
        count += 1;
    }
<span class="boring">}</span></code></pre></pre>
<h2 id="ag-fanacht-ar-an-cos√°n-s√°sta-le-let-else"><a class="header" href="#ag-fanacht-ar-an-cos√°n-s√°sta-le-let-else">Ag fanacht ar an ‚Äúcos√°n s√°sta‚Äù le <code>let else</code></a></h2>
<p>Patr√∫n coitianta amh√°in is ea roinnt r√≠omh a dh√©anamh nuair a bh√≠onn luach i l√°thair agus
cuir luach r√©amhshocraithe ar ais ar shl√≠ eile. Ag lean√∫int ar aghaidh len√°r sampla de bhoinn le a
luach <code>UsState</code>, d√° mbeimis ag iarraidh rud √©igin greannmhar a r√° ag brath ar c√©n aois an
st√°it ar an r√°ithe a bh√≠, d'fh√©adfadh muid a thabhairt isteach modh ar <code>UsState</code> a sheice√°il leis an
aois st√°it, mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)] // so we can inspect the state in a minute
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span>impl UsState {
    fn existed_in(&amp;self, year: u16) -&gt; bool {
        match self {
            UsState::Alabama =&gt; year &gt;= 1819,
            UsState::Alaska =&gt; year &gt;= 1959,
            // -- snip --
        }
    }
}
<span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn describe_state_quarter(coin: Coin) -&gt; Option&lt;String&gt; {
</span><span class="boring">    if let Coin::Quarter(state) = coin {
</span><span class="boring">        if state.existed_in(1900) {
</span><span class="boring">            Some(format!("{state:?} is pretty old, for America!"))
</span><span class="boring">        } else {
</span><span class="boring">            Some(format!("{state:?} is relatively new."))
</span><span class="boring">        }
</span><span class="boring">    } else {
</span><span class="boring">        None
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    if let Some(desc) = describe_state_quarter(Coin::Quarter(UsState::Alaska)) {
</span><span class="boring">        println!("{desc}");
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre></pre>
<p>Ansin d'fh√©adfaimis <code>if let</code> a √∫s√°id chun an cine√°l bonn a mheaitse√°il, agus <code>state</code> √° thabhairt isteach
athraitheach laistigh de chorp an choinn√≠ll, mar at√° i Liosta 6-7.</p>
<Listing number="6-7" caption="Using" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)] // so we can inspect the state in a minute
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl UsState {
</span><span class="boring">    fn existed_in(&amp;self, year: u16) -&gt; bool {
</span><span class="boring">        match self {
</span><span class="boring">            UsState::Alabama =&gt; year &gt;= 1819,
</span><span class="boring">            UsState::Alaska =&gt; year &gt;= 1959,
</span><span class="boring">            // -- snip --
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span>fn describe_state_quarter(coin: Coin) -&gt; Option&lt;String&gt; {
    if let Coin::Quarter(state) = coin {
        if state.existed_in(1900) {
            Some(format!("{state:?} is pretty old, for America!"))
        } else {
            Some(format!("{state:?} is relatively new."))
        }
    } else {
        None
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    if let Some(desc) = describe_state_quarter(Coin::Quarter(UsState::Alaska)) {
</span><span class="boring">        println!("{desc}");
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>D√©anann s√© sin an jab, ach t√° s√© tar √©is an obair a bhr√∫ isteach i gcorp an <code>if let</code>
r√°iteas, agus m√° t√° an obair at√° le d√©anamh n√≠os casta, b'fh√©idir go mbeadh s√© deacair
lean go beacht mar a bhaineann na craobhacha barrleibh√©il. D‚Äôfh√©adfaimis leas a bhaint as freisin
den fh√≠ric go mb√≠onn luach ag na habairt√≠ chun an <code>state</code> a th√°irgeadh √≥
an <code>if let</code> n√≥ le filleadh go luath, mar at√° i Liosta 6-8. (D'fh√©adf√° a leith√©id a dh√©anamh le a
<code>match</code>, ar nd√≥igh!)</p>
<Listing number="6-8" caption="Using `if let` to produce a value or return early." file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)] // so we can inspect the state in a minute
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl UsState {
</span><span class="boring">    fn existed_in(&amp;self, year: u16) -&gt; bool {
</span><span class="boring">        match self {
</span><span class="boring">            UsState::Alabama =&gt; year &gt;= 1819,
</span><span class="boring">            UsState::Alaska =&gt; year &gt;= 1959,
</span><span class="boring">            // -- snip --
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span>fn describe_state_quarter(coin: Coin) -&gt; Option&lt;String&gt; {
    let state = if let Coin::Quarter(state) = coin {
        state
    } else {
        return None;
    };

    if state.existed_in(1900) {
        Some(format!("{state:?} is pretty old, for America!"))
    } else {
        Some(format!("{state:?} is relatively new."))
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    if let Some(desc) = describe_state_quarter(Coin::Quarter(UsState::Alaska)) {
</span><span class="boring">        println!("{desc}");
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>T√° s√© seo beag√°n annoying a lean√∫int ina bhealach f√©in, √°fach! T√°irgeann brainse
amh√°in den <code>if let</code> luach, agus filleann an ceann eile √≥n bhfeidhm go hioml√°n.</p>
<p>Chun an patr√∫n coitianta seo a dh√©anamh n√≠os deise a chur in i√∫l, t√° <code>let</code>-<code>else</code> ag Rust. T√° an
glacann comhr√©ir <code>let</code>-<code>else</code> patr√∫n ar an taobh cl√© agus slonn ar an
ceart, an-chos√∫il le <code>if let</code>, ach n√≠l brainse <code>if</code> aige, ach an
brainse <code>else</code>. M√° mheaitse√°lann an patr√∫n, ceangailfidh s√© an luach √≥n bpatr√∫n
sa raon feidhme lasmuigh. M√° mheaitse√°lann an patr√∫n <em>not</em>, sruth√≥idh an cl√°r isteach
an l√°mh <code>else</code>, a chaithfidh filleadh √≥n bhfeidhm.</p>
<p>I Liost√∫ 6-9, is f√©idir leat a fheice√°il conas a bhreathna√≠onn Liost√∫ 6-8 agus <code>let</code> -<code>else</code> in √∫s√°id agat
√°it <code>if let</code>. Tabhair faoi deara go bhfanann s√© ‚Äúar an gcos√°n sona‚Äù i bpr√≠omhchorp na
an fheidhm ar an mbealach seo, gan sreabhadh rialaithe go suntasach difri√∫il le haghaidh
dh√° chraobh ar an mbealach a rinne an <code>if let</code>.</p>
<Listing number="6-9" caption="Using `let`-`else` to clarify the flow through the function." file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#[derive(Debug)] // so we can inspect the state in a minute
</span><span class="boring">enum UsState {
</span><span class="boring">    Alabama,
</span><span class="boring">    Alaska,
</span><span class="boring">    // --snip--
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl UsState {
</span><span class="boring">    fn existed_in(&amp;self, year: u16) -&gt; bool {
</span><span class="boring">        match self {
</span><span class="boring">            UsState::Alabama =&gt; year &gt;= 1819,
</span><span class="boring">            UsState::Alaska =&gt; year &gt;= 1959,
</span><span class="boring">            // -- snip --
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">enum Coin {
</span><span class="boring">    Penny,
</span><span class="boring">    Nickel,
</span><span class="boring">    Dime,
</span><span class="boring">    Quarter(UsState),
</span><span class="boring">}
</span><span class="boring">
</span>fn describe_state_quarter(coin: Coin) -&gt; Option&lt;String&gt; {
    let Coin::Quarter(state) = coin else {
        return None;
    };

    if state.existed_in(1900) {
        Some(format!("{state:?} is pretty old, for America!"))
    } else {
        Some(format!("{state:?} is relatively new."))
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    if let Some(desc) = describe_state_quarter(Coin::Quarter(UsState::Alaska)) {
</span><span class="boring">        println!("{desc}");
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>M√° t√° c√°s agat ina bhfuil loighic ag do chl√°r at√° r√≥-bhriathartha le
cuir in i√∫l ag baint √∫s√°ide as <code>match</code>, cuimhnigh go bhfuil <code>if let</code> agus <code>let else</code> i do Rust
bosca uirlis√≠ chomh maith.</p>
<h2 id="achoimre-5"><a class="header" href="#achoimre-5">Achoimre</a></h2>
<p>T√°imid cl√∫daithe anois conas enums a √∫s√°id chun cine√°lacha saincheaptha a chruth√∫ a d‚Äôfh√©adfadh a bheith mar cheann de a
sraith de luachanna √°irimh. Thaispe√°namar conas <code>Option&lt;T&gt;</code> na leabharlainne caighde√°nach
cabhra√≠onn cine√°l leat an c√≥ras cine√°il a √∫s√°id chun earr√°id√≠ a chosc. Nuair a bh√≠onn luachanna enum
sonra√≠ taobh istigh d√≠obh, is f√©idir leat <code>match</code> n√≥ <code>if let</code> a √∫s√°id chun iad sin a bhaint agus a √∫s√°id
luachanna, ag brath ar c√© mh√©ad c√°s is g√° duit a l√°imhse√°il.</p>
<p>Is f√©idir le do chl√°ir Rust coincheapa a chur in i√∫l i d'fhearann ‚Äã‚Äãanois ag baint √∫s√°ide as strucht√∫ir agus
√©inim. Cinnt√≠onn cruth√∫ cine√°lacha saincheaptha le h√∫s√°id i do API s√°bh√°ilteacht cine√°il: an
Beidh tiomsaitheoir a dh√©anamh cinnte do fheidhmeanna a fh√°il ach amh√°in luachanna den chine√°l gach
feidhm ag s√∫il.</p>
<p>D'fhonn API dea-eagraithe a shol√°thar do d'√∫s√°ideoir√≠ at√° simpl√≠
a √∫s√°id agus n√≠ nochtar ach an m√©id go d√≠reach a bheidh de dh√≠th ar d‚Äô√∫s√°ideoir√≠, d√©anaimis casadh anois air
Mod√∫il meirge.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tionscadail-at√°-ag-f√°s-a-bhainisti√∫-le-pac√°ist√≠-cliathbhosca√≠-agus-mod√∫il"><a class="header" href="#tionscadail-at√°-ag-f√°s-a-bhainisti√∫-le-pac√°ist√≠-cliathbhosca√≠-agus-mod√∫il">Tionscadail at√° ag F√°s a Bhainisti√∫ le Pac√°ist√≠, cliathbhosca√≠ agus Mod√∫il</a></h1>
<p>De r√©ir mar a scr√≠obhann t√∫ cl√°ir mh√≥ra, tiocfaidh eagr√∫ do ch√≥d n√≠os m√≥ agus n√≠os m√≥
t√°bhachtach. Tr√≠ fheidhmi√∫lacht ghaolmhar a ghr√∫p√°il agus c√≥d a scaradh le ch√©ile
gn√©ithe, soil√©ireoidh t√∫ c√° h√°it a bhfaighidh t√∫ c√≥d a chuireann ceann ar leith i bhfeidhm
gn√© agus c√° h√°it le dul chun an chaoi a n-oibr√≠onn gn√© a athr√∫.</p>
<p>T√° na cl√°ir at√° scr√≠ofa againn go dt√≠ seo in aon mhod√∫l amh√°in i gcomhad amh√°in. Mar a
F√°sann an tionscadal, ba cheart duit c√≥d a eagr√∫ tr√≠na roinnt ina il-mhod√∫il
agus ansin comhaid iolracha. Is f√©idir le cliathbhosca√≠ d√©n√°rtha iolracha agus
go roghnach cliathbhosca leabharlainne amh√°in. De r√©ir mar a fh√°sann pac√°iste, is f√©idir leat p√°irteanna a bhaint astu
cliathbhosca√≠ ar leith a thagann chun bheith ina sple√°chais sheachtracha. Cl√∫da√≠onn an chaibidil seo gach
na teicn√≠ochta√≠ seo. I gc√°s tionscadal an-mh√≥r a chuims√≠onn sraith de idirghaolmhar
pac√°ist√≠ a fhorbra√≠onn le ch√©ile, sol√°thra√≠onn lasta <em>sp√°sanna oibre</em>, a chl√∫d√≥imid
sa <a href="ch14-03-cargo-workspaces.html">‚ÄúCargo Workspaces‚Äù</a><!-- neamhaird --> i gCaibidil 14.</p>
<p>D√©anfaimid pl√© freisin ar shonra√≠ cur chun feidhme a chuimsi√∫, a ligeann duit ath√∫s√°id
c√≥d ag leibh√©al n√≠os airde: nuair a bheidh oibr√≠ocht curtha i bhfeidhm agat, is f√©idir le c√≥d eile
glaoch ar do ch√≥d tr√≠na chomh√©adan poibl√≠ gan a bheith ar an eolas conas an
oibreacha forfheidhmithe. Sainmh√≠n√≠onn an bealach a scr√≠obhann t√∫ c√≥d c√© na codanna at√° poibl√≠
c√≥d eile at√° le h√∫s√°id agus c√© na codanna at√° ina sonra√≠ forfheidhmithe pr√≠obh√°ideacha at√° agat
an ceart chun athr√∫ a choime√°d. Is bealach eile √© seo chun teorainn a chur leis an m√©id sonra√≠
caithfidh t√∫ a choinne√°il i do cheann.</p>
<p>T√° raon feidhme ag coincheap gaolmhar: t√° a
sraith ainmneacha a shainmh√≠n√≠tear mar ‚Äúi raon feidhme.‚Äù Nuair a bh√≠onn l√©amh, scr√≠obh, agus
c√≥d a thioms√∫, r√≠omhchl√°raitheoir√≠ agus tiomsaitheoir√≠ g√° go mbeadh a fhios c√© acu ar leith
tagra√≠onn ainm ag spota ar leith d'athr√≥g, d'fheidhm, do strucht√∫r, d'enum, do mhod√∫l,
tairiseach, n√≥ m√≠r eile agus cad a chialla√≠onn an mh√≠r sin. Is f√©idir leat scopes a chruth√∫ agus
athr√∫ ar na hainmneacha at√° laistigh n√≥ lasmuigh den sc√≥ip. N√≠ f√©idir dh√° mh√≠r a bheith agat leis an
ainm c√©anna sa raon feidhme c√©anna; t√° uirlis√≠ ar f√°il chun coinbhleachta√≠ ainmneacha a r√©iteach.</p>
<p>T√° roinnt gn√©ithe ag Rust a ligeann duit do ch√≥id a bhainisti√∫
eagra√≠ocht, lena n-√°ir√≠tear na sonra√≠ at√° nochtaithe, c√© na sonra√≠ at√° pr√≠obh√°ideach,
agus cad iad na hainmneacha at√° i ngach raon feidhme i do chl√°ir. Na gn√©ithe seo, uaireanta
le ch√©ile d√° ngairtear an <em>module system</em>, √°ir√≠tear:</p>
<ul>
<li><strong>Pac√°ist√≠:</strong> Gn√© lasta a ligeann duit cliathbhosca√≠ a th√≥g√°il, a th√°st√°il agus a roinnt</li>
<li><strong>Cliathbhosca:</strong> Crann mod√∫l a th√°irgeann leabharlann n√≥ inrite</li>
<li><strong>Mod√∫il</strong> agus <strong>√∫s√°id:</strong> Ligeann t√∫ smacht ar an eagra√≠ocht, ar an raon feidhme agus ar an
pr√≠obh√°ideacht cos√°in</li>
<li><strong>Cos√°in:</strong> Bealach chun m√≠r a ainmni√∫, mar strucht√∫r, feidhm n√≥ mod√∫l</li>
</ul>
<p>Sa chaibidil seo, cl√∫d√≥idh muid na gn√©ithe seo go l√©ir, pl√©ifimid conas a idirghn√≠omha√≠onn siad, agus
m√≠nigh conas iad a √∫s√°id chun sc√≥ip a bhainisti√∫. Faoi dheireadh, ba ch√≥ir go mbeadh soladach agat
tuiscint ar ch√≥ras na mod√∫l agus a bheith in ann oibri√∫ le scopes cos√∫il le pro!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="pac√°ist√≠-agus-cliathbhosca√≠"><a class="header" href="#pac√°ist√≠-agus-cliathbhosca√≠">Pac√°ist√≠ agus cliathbhosca√≠</a></h2>
<p>Is iad na ch√©ad chodanna den ch√≥ras mod√∫il a chl√∫d√≥idh muid n√° pac√°ist√≠ agus cliathbhosca√≠.</p>
<p>Is √© <em>crate</em> an m√©id c√≥d is l√∫ a mheasann an tiomsaitheoir Rust ag a
am. Fi√∫ m√° ritheann t√∫ <code>rustc</code> seachas <code>rust</code> agus m√° √©ir√≠onn leat c√≥d foinse amh√°in
comhad (mar a rinne muid an bealach ar fad ar ais sa "Scr√≠obh agus Rith Cl√°r Meirge"
alt de Chaibidil 1), measann an tiomsaitheoir gur cliathbhosca an comhad sin. cliathbhosca√≠
Is f√©idir mod√∫il a bheith iontu, agus f√©adfar na mod√∫il a shaini√∫ i gcomhaid eile a fhaigheann
curtha le ch√©ile leis an gcliathbhosca, mar a fheicfimid sna hailt at√° le teacht.</p>
<p>Is f√©idir le cliathbhosca teacht i gceann de dh√° fhoirm: cliathbhosca d√©n√°rtha n√≥ cliathbhosca leabharlainne.
Is cl√°ir iad <em>d√©n√°rtha cliathbhosca√≠</em> is f√©idir leat a thioms√∫ d'inrite is f√©idir leat a rith,
cos√∫il le cl√°r ord√∫-l√≠ne n√≥ freastala√≠. Caithfidh feidhm a bheith ag gach ceann acu ar a dtugtar
<code>main</code> a shainmh√≠n√≠onn cad a tharla√≠onn nuair a ritheann an inrite. Na cliathbhosca√≠ go l√©ir at√° againn
Crutha√≠odh go dt√≠ seo cliathbhosca√≠ d√©n√°rtha.</p>
<p>N√≠l <code>main</code> ag cliathbhosca√≠ na leabharlainne_, agus n√≠ thiomsa√≠onn siad chuig an
inrite. Ina √°it sin, sain√≠onn siad feidhmi√∫lacht a bhearta√≠tear a roinnt leo
tionscadail iolracha. Mar shampla, an gcliathbhosca <code>rand</code> a d'√∫s√°ideamar i <a href="ch02-00-guessing-game-tutorial.html#generating-a-random-number">Caibidil
2</a> Sol√°thra√≠onn <!-- neamhaird --> feidhmi√∫lacht a ghineann uimhreacha randamacha.
An chuid is m√≥ den am nuair a deir Rustaceans ‚Äúcliathbhosca‚Äù, cialla√≠onn siad cliathbhosca leabharlainne, agus siad
‚ÄúCliathbhosca‚Äù a √∫s√°id go hidirmhalartaithe le coincheap ginear√°lta r√≠omhchl√°raithe na ‚Äúleabharlainne‚Äù.</p>
<p>Is comhad foinse √© an <em>crate root</em> a thosa√≠onn agus a dh√©anann an tiomsaitheoir Rust
suas bunmhod√∫l do chliathbhosca (m√≠neoimid mod√∫il go domhain sa
<a href="ch07-02-defining-modules-to-control-scope-and-privacy.html">‚ÄúMod√∫il a Shainmh√≠ni√∫ chun Sc√≥ip agus Pr√≠obh√°ideacht a Rial√∫‚Äù</a><!-- neamhaird a dh√©anamh ar -->
alt).</p>
<p>Is √©ard at√° i <em>pac√°iste</em> n√° beart cliathbhosca√≠ amh√°in n√≥ n√≠os m√≥ a shol√°thra√≠onn sraith de
feidhmi√∫lacht. T√° comhad <em>Cargo.toml</em> i bpac√°iste a chuireann s√≠os ar conas
na cliathbhosca√≠ sin a th√≥g√°il. Is pac√°iste √© lasta i nd√°ir√≠re ina bhfuil an cliathbhosca d√©n√°rtha
don uirlis ord√∫-l√≠ne a bh√≠ in √∫s√°id agat chun do ch√≥d a th√≥g√°il. An Lasta
pac√°iste freisin t√° cliathbhosca leabharlainne ar a mbraitheann an gcliathbhosca d√©n√°rtha. Eile
is f√©idir le tionscadail a bheith ag brath ar an gcliathbhosca leabharlainne lasta chun an loighic ch√©anna a √∫s√°id leis an Lasta
√∫s√°id√≠ uirlis ord√∫-l√≠ne. Is f√©idir an oiread cliathbhosca√≠ d√©n√°rtha is t√∫ f√©in a bheith i bpac√°iste
cos√∫il le, ach ar a mh√©ad ach cliathbhosca leabharlainne amh√°in. Caithfidh pac√°iste amh√°in ar a laghad a bheith ann
cliathbhosca, cib√© an leabharlann n√≥ cliathbhosca d√©n√°rtha √©.</p>
<p>Si√∫lfaimid cad a tharla√≠onn nuair a chrutha√≠mid pac√°iste. Ar dt√∫s cuirimid isteach an
ord√∫ <code>cargo new my-project</code>:</p>
<pre><code class="language-console">$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
</code></pre>
<p>Tar √©is d√∫inn <code>cargo new my-project</code> a rith, √∫s√°idimid <code>ls</code> chun a fheice√°il cad a chrutha√≠onn Cargo. I
eolaire an tionscadail, t√° comhad <em>Cargo.toml</em> ann, rud a thugann pac√°iste d√∫inn.
T√° eolaire <em>src</em> ann freisin ina bhfuil <em>main.rs</em>. Oscail <em>Cargo.toml</em> isteach
d‚Äôeagarth√≥ir t√©acs, agus tabhair faoi deara nach bhfuil aon tagairt do <em>src/main.rs</em>. Leanann lasta a
coinbhinsi√∫n gurb √© <em>src/main.rs</em> an fhr√©amh cliathbhosca de chliathbhosca dh√©n√°rtha leis an gc√©anna
ainm mar an bpac√°iste. Mar an gc√©anna, t√° a fhios ag lasta go bhfuil an t-eolaire pac√°iste
ina bhfuil <em>src/lib.rs</em>, t√° cliathbhosca leabharlainne leis an ainm c√©anna sa phac√°iste
mar an bpac√°iste, agus is √© <em>src/lib.rs</em> a fhr√©amh gcliathbhosca. Gabhann lasta fr√©amh an chliathbhosca
comhaid chuig <code>rustc</code> chun an leabharlann n√≥ an d√©n√°rtha a th√≥g√°il.</p>
<p>Anseo, t√° pac√°iste againn nach bhfuil ach <em>src/main.rs</em>, rud a chialla√≠onn s√© amh√°in
t√° cliathbhosca d√©n√°rtha darb ainm <code>my-project</code>. M√° t√° <em>src/main.rs</em> i bpac√°iste
agus <em>src/lib.rs</em>, t√° dh√° chliathbhosca aige: d√©n√°rtha agus leabharlann, an d√° cheann acu mar an gc√©anna
ainm mar an bpac√°iste. Is f√©idir le cliathbhosca√≠ d√©n√°rtha iolracha a bheith ag pac√°iste tr√≠ chomhaid a chur
san eolaire <em>src/bin</em>: beidh gach comhad ina chliathbhosca dh√©n√°rtha ar leith.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="mod√∫il-a-shainmh√≠ni√∫-chun-sc√≥ip-agus-pr√≠obh√°ideacht-a-rial√∫"><a class="header" href="#mod√∫il-a-shainmh√≠ni√∫-chun-sc√≥ip-agus-pr√≠obh√°ideacht-a-rial√∫">Mod√∫il a Shainmh√≠ni√∫ chun Sc√≥ip agus Pr√≠obh√°ideacht a Rial√∫</a></h2>
<p>Sa chuid seo, labhr√≥imid faoi mhod√∫il agus faoi chodanna eile den ch√≥ras mod√∫l,
is √© sin <em>paths</em>, a ligeann duit m√≠reanna a ainmni√∫; an eochairfhocal <code>use</code> a thugann a
cos√°n isteach sa raon feidhme; agus an eochairfhocal <code>pub</code> chun m√≠reanna a dh√©anamh poibl√≠. D√©anfaimid pl√© freisin
an eochairfhocal <code>as</code>, pac√°ist√≠ seachtracha, agus an t-oibreoir glob.</p>
<h3 id="mod√∫il-bileog-cheat"><a class="header" href="#mod√∫il-bileog-cheat">Mod√∫il Bileog Cheat</a></h3>
<p>Sula n-aims√≠mid sonra√≠ na mod√∫l agus na gcos√°n, cuirimid sc√©al tapa ar f√°il anseo
tagairt don chaoi a n-oibr√≠onn mod√∫il, cos√°in, an eochairfhocal <code>use</code>, agus an eochairfhocal <code>pub</code>
sa tiomsaitheoir, agus conas a eagra√≠onn formh√≥r na bhforbr√≥ir√≠ a gc√≥d. Beimid ag dul
tr√≠ shampla√≠ de gach ceann de na rialacha seo ar fud na caibidle seo, ach t√° s√© seo a
√°it iontach chun tagairt a dh√©anamh d√≥ mar mheabhr√∫ch√°n ar an gcaoi a n-oibr√≠onn mod√∫il.</p>
<ul>
<li><strong>Tosaigh √≥ fhr√©amh an gcliathbhosca</strong>: Agus cliathbhosca √° thioms√∫, an tiomsaitheoir ar dt√∫s
Breathna√≠onn i bhfr√©amhchomhad an chliathbhosca (de ghn√°th <em>src/lib.rs</em> le haghaidh cliathbhosca leabharlainne n√≥
<em>src/main.rs</em> le haghaidh cliathbhosca d√©n√°rtha) le c√≥d a thioms√∫.</li>
<li><strong>Mod√∫il √° ndearbh√∫</strong>: Sa fhr√©amhchomhad cliathbhosca, is f√©idir leat mod√∫il nua a dhearbh√∫;
a r√° go ndearbha√≠onn t√∫ mod√∫l ‚Äúgaird√≠n‚Äù le <code>mod garden;</code>. Breathn√≥idh an tiomsaitheoir
do ch√≥d an mhod√∫il sna h√°iteanna seo:</li>
<li>Inl√≠ne, laistigh de l√∫ib√≠n√≠ curly a thagann in ionad an leathstad tar √©is <code>mod  garden</code></li>
<li>Sa chomhad <em>src/garden.rs</em></li>
<li>Sa chomhad <em>src/garden/mod.rs</em></li>
<li><strong>Fomod√∫il √° ndearbh√∫</strong>: In aon chomhad seachas fr√©amh an chliabh√°in, is f√©idir leat
fomhod√∫il a dhearbh√∫. Mar shampla, b'fh√©idir go ndearbh√≥idh t√∫ <code>mod vegetables;</code> i
<em>src/gaird√≠n.rs</em>. Lorg√≥idh an tiomsaitheoir c√≥d an fhomhod√∫il laistigh de na
eolaire ainmnithe don mhod√∫l tuismitheora sna h√°iteanna seo:</li>
<li>Inl√≠ne, d√≠reach ag lean√∫int <code>mod vegetables</code>, laistigh de l√∫ib√≠n√≠ curly ina ionad
den leathstad</li>
<li>Sa chomhad <em>src/garden/vegetables.rs</em></li>
<li>Sa chomhad <em>src/garden/vegetables/mod.rs</em></li>
<li><strong>Cos√°in chun c√≥d a chur i mod√∫il</strong>: Nuair a bheidh mod√∫l mar chuid de do chliabh√°n, is f√©idir leat
d√©an tagairt don ch√≥d sa mhod√∫l sin √≥ √°it ar bith eile sa chliabh√°n c√©anna sin, chomh fada
mar a cheada√≠onn na rialacha pr√≠obh√°ideachta, ag baint √∫s√°ide as an cos√°n go dt√≠ an c√≥d. Mar shampla, an
Gheofar cine√°l <code>Asparagus</code> sa mhod√∫l glasra√≠ gaird√≠n ag
<code>crate::garden::vegetables::Asparagus</code>.</li>
<li><strong>Pr√≠obh√°ideach vs. poibl√≠</strong>: T√° c√≥d laistigh de mhod√∫l pr√≠obh√°ideach √≥na thuismitheoir
mod√∫il de r√©ir r√©amhshocraithe. Chun mod√∫l a phoibli√∫, dearbhaigh √© le <code>pub mod</code>
in ionad <code>mod</code>. Chun m√≠reanna laistigh de mhod√∫l poibl√≠ a dh√©anamh poibl√≠ freisin, bain √∫s√°id as
<code>pub</code> roimh a ndearbhuithe.</li>
<li><strong>An eochairfhocal <code>use</code></strong>: Laistigh de raon feidhme, crutha√≠onn an eochairfhocal <code>use</code> aicearra√≠ chuig
m√≠reanna chun athr√° cos√°in fhada a laghd√∫. In aon sc√≥ip is f√©idir tagairt a dh√©anamh do
<code>crate::garden::vegetables::Asparagus</code>, is f√©idir leat aicearra a chruth√∫ le <code>use  crate::garden::vegetables::Asparagus;</code>  agus as sin amach n√≠ g√° duit ach
scr√≠obh <code>Asparagus</code> chun √∫s√°id a bhaint as an gcine√°l sin sa sc√≥ip.</li>
</ul>
<p>Anseo, crutha√≠mid cliathbhosca d√©n√°rtha darb ainm <code>backyard</code> a l√©ir√≠onn na rialacha seo.
T√° na comhaid agus na heolair√≠ seo i gcomhadlann an chliabh√°in, ar a dtugtar <code>backyard</code> freisin:</p>
<pre><code class="language-text">backyard
‚îú‚îÄ‚îÄ Cargo.lock
‚îú‚îÄ‚îÄ Cargo.toml
‚îî‚îÄ‚îÄ src
    ‚îú‚îÄ‚îÄ garden
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ vegetables.rs
    ‚îú‚îÄ‚îÄ garden.rs
    ‚îî‚îÄ‚îÄ main.rs
</code></pre>
<p>Is √© an comhad fr√©imhe cliathbhosca sa ch√°s seo n√° <em>src/main.rs</em>, agus t√°:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust noplayground ignore">use crate::garden::vegetables::Asparagus;

pub mod garden;

fn main() {
    let plant = Asparagus {};
    println!("I'm growing {plant:?}!");
}</code></pre>
</Listing>
<p>Ins√≠onn an l√≠ne <code>pub mod garden;</code> don tiomsaitheoir an c√≥d a aims√≠onn s√© a chur san √°ireamh
<em>src/garden.rs</em>, mar at√°:</p>
<Listing file-name="src/garden.rs">
<pre><code class="language-rust noplayground ignore">pub mod vegetables;</code></pre>
</Listing>
<p>Anseo, cialla√≠onn <code>pub mod vegetables;</code> an c√≥d i <em>src/garden/vegetables.rs</em> is
san √°ireamh freisin. Is √© an c√≥d sin:</p>
<pre><code class="language-rust noplayground ignore">#[derive(Debug)]
pub struct Asparagus {}</code></pre>
<p>Anois d√©anaimis sonra√≠ na rialacha seo a fh√°il agus iad a l√©iri√∫ i ngn√≠omh!</p>
<h3 id="c√≥d-gaolmhar-a-ghr√∫p√°il-i-mod√∫il"><a class="header" href="#c√≥d-gaolmhar-a-ghr√∫p√°il-i-mod√∫il">C√≥d Gaolmhar a Ghr√∫p√°il i Mod√∫il</a></h3>
<p><em>Modules</em> lig d√∫inn c√≥d a eagr√∫ laistigh de chliathbhosca ar mhaithe le hinl√©iteacht agus le hath√∫s√°id √©asca.
Ligeann mod√∫il d√∫inn freisin <em>pr√≠obh√°ideacht</em> m√≠reanna a rial√∫ toisc go bhfuil c√≥d laistigh de a
mod√∫l pr√≠obh√°ideach de r√©ir r√©amhshocraithe. Is sonra√≠ inmhe√°nacha cur chun feidhme iad m√≠reanna pr√≠obh√°ideacha
nach bhfuil ar f√°il le h√∫s√°id lasmuigh. Is f√©idir linn a roghn√∫ mod√∫il agus na m√≠reanna a dh√©anamh
laistigh d√≠obh poibl√≠, a nochtar iad chun ligean do ch√≥d seachtrach a √∫s√°id agus a bheith ag brath
orthu.</p>
<p>Mar shampla, scr√≠obhaimis cliathbhosca leabharlainne a shol√°thra√≠onn feidhmi√∫lacht a
bialann. D√©anfaimid s√≠nithe na bhfeidhmeanna a shaini√∫ ach f√°gfaimid a gcorp
folamh chun d√≠ri√∫ ar eagr√∫ an ch√≥id seachas ar an
bialann a chur i bhfeidhm.</p>
<p>I dtionscal na mbialann, d√©antar tagairt do roinnt codanna de bhialann
<em>aghaidh an t√≠</em> agus cinn eile mar <em>ch√∫l an t√≠</em>. T√° √°it os comhair an t√≠
t√° custaim√©ir√≠; cuims√≠onn s√© seo an √°it ina su√≠onn an t-√≥stach do chustaim√©ir√≠, a th√≥gann na freastalaithe
orduithe agus √≠oca√≠ocht, agus d√©anann t√°bhairne deochanna. Ar ch√∫l an t√≠ t√° an √°it a bhfuil an
oibr√≠onn pr√≠omhch√≥caire agus c√≥cair√≠ sa chistin, glantar miasniteoir√≠, agus d√©anann bainisteoir√≠
obair riarach√°in.</p>
<p>Chun √°r gcliathbhosca a strucht√∫r√∫ ar an mbealach seo, is f√©idir linn a feidhmeanna a eagr√∫ ina neadacha
mod√∫il. Cruthaigh leabharlann nua darb ainm <code>restaurant</code> tr√≠ <code>cargo new restaurant --lib</code>. Ansin cuir isteach an c√≥d i Liost√∫ 7-1 isteach <em>src/lib.rs</em> go
roinnt mod√∫il agus s√≠nithe feidhm a shaini√∫; is √© an c√≥d seo tosaigh an t√≠
alt.</p>
<Listing number="7-1" file-name="src/lib.rs" caption="A `front_of_house` module containing other modules that then contain functions">
<pre><code class="language-rust noplayground">mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}

        fn seat_at_table() {}
    }

    mod serving {
        fn take_order() {}

        fn serve_order() {}

        fn take_payment() {}
    }
}</code></pre>
</Listing>
<p>Sainmh√≠n√≠mid mod√∫l leis an eochairfhocal <code>mod</code> agus ainm an mhod√∫il ina dhiaidh
(sa ch√°s seo, <code>front_of_house</code>). T√©ann corp an mhod√∫il ansin taobh istigh de chatach
l√∫ib√≠n√≠. Taobh istigh mod√∫il, is f√©idir linn a chur mod√∫il eile, mar at√° sa ch√°s seo leis an
mod√∫il <code>hosting</code> agus <code>serving</code>. Is f√©idir le mod√∫il sainmh√≠nithe a bheith acu ar mhod√∫il eile freisin
m√≠reanna, mar strucht√∫ir, √©inim, tairisigh, tr√©ithe, agus ‚Äî mar at√° i Liost√∫
7-1 - feidhmeanna.</p>
<p>Tr√≠ mod√∫il a √∫s√°id, is f√©idir linn sainmh√≠nithe gaolmhara a ghr√∫p√°il le ch√©ile agus an f√°th a ainmni√∫
t√° gaol acu leis. Is f√©idir le r√≠omhchl√°raitheoir√≠ a √∫s√°ideann an c√≥d seo an c√≥d a nasclean√∫int bunaithe ar an
gr√∫pa√≠ seachas a bheith ag l√©amh tr√≠d na sainmh√≠nithe go l√©ir, √© a dh√©anamh n√≠os √©asca
chun na sainmh√≠nithe a bhaineann leo a fh√°il. R√≠omhchl√°raitheoir√≠ ag cur feidhmi√∫lacht nua leis
Bheadh ‚Äã‚Äãa fhios ag an gc√≥d seo c√° h√°it a gcuirf√≠ an c√≥d chun an cl√°r a choinne√°il eagraithe.</p>
<p>N√≠os luaithe, luaigh muid go dtugtar cliathbhosca ar <em>src/main.rs</em> agus <em>src/lib.rs</em>
fr√©amhacha. Is √© an ch√∫is at√° lena n-ainm n√° go bhfuil √°bhar ceachtar den d√° cheann seo
crutha√≠onn comhaid mod√∫l darb ainm <code>crate</code> ag bun strucht√∫r mod√∫il an chliabh√°in,
ar a dtugtar an crann <em>module tree</em>.</p>
<p>L√©ir√≠onn Liost√∫ 7-2 an crann mod√∫l don strucht√∫r i Liost√∫ 7-1.</p>
<Listing number="7-2" caption="The module tree for the code in Listing 7-1">
<pre><code class="language-text">crate
 ‚îî‚îÄ‚îÄ front_of_house
     ‚îú‚îÄ‚îÄ hosting
     ‚îÇ   ‚îú‚îÄ‚îÄ add_to_waitlist
     ‚îÇ   ‚îî‚îÄ‚îÄ seat_at_table
     ‚îî‚îÄ‚îÄ serving
         ‚îú‚îÄ‚îÄ take_order
         ‚îú‚îÄ‚îÄ serve_order
         ‚îî‚îÄ‚îÄ take_payment
</code></pre>
</Listing>
<p>L√©ir√≠onn an crann seo conas a neada√≠onn cuid de na mod√∫il taobh istigh de mhod√∫il eile; mar shampla,
<code>hosting</code> a √≥st√°il taobh istigh de <code>front_of_house</code>. L√©ir√≠onn an crann freisin go bhfuil roinnt mod√∫il
is <em>sibl√≠n√≠</em> iad, rud a chialla√≠onn go bhfuil siad sainmh√≠nithe sa mhod√∫l c√©anna; <code>hosting</code> agus
is sibl√≠n√≠ iad <code>serving</code> laistigh de <code>front_of_house</code>. M√°s mod√∫l A √©
at√° taobh istigh mod√∫l B, deirimid go bhfuil mod√∫l A an <em>child</em> de mhod√∫l B agus
gurb √© mod√∫l B an <em>tuismitheoir</em> de mhod√∫l A. Tabhair faoi deara go bhfuil an crann mod√∫l ar fad
at√° fr√©amhaithe faoin mod√∫l intuigthe darb ainm <code>crate</code>.</p>
<p>Seans go gcuirfidh crann na mod√∫l i gcuimhne duit crann eolaire an ch√≥rais comhad ar do
r√≠omhaire; is compar√°id an-oiri√∫nach √© seo! Cos√∫il le heolair√≠ i gc√≥ras comhaid,
√∫s√°ideann t√∫ mod√∫il chun do ch√≥d a eagr√∫. Agus d√≠reach cos√∫il le comhaid i eolaire, t√°imid
g√° bealach chun √°r mod√∫il a aimsi√∫.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cos√°in-chun-tagairt-a-dh√©anamh-do-mh√≠r-i-gcrann-an-mhod√∫il"><a class="header" href="#cos√°in-chun-tagairt-a-dh√©anamh-do-mh√≠r-i-gcrann-an-mhod√∫il">Cos√°in chun Tagairt a Dh√©anamh do Mh√≠r i gCrann an Mhod√∫il</a></h2>
<p>Chun Rust a thaispe√°int nuair is f√©idir m√≠r a aimsi√∫ i gcrann mod√∫l, √∫s√°idimid cos√°n mar an gc√©anna
ar an mbealach a n-√∫s√°idimid cos√°n agus c√≥ras comhaid √° nasclean√∫int. Chun feidhm a ghlaoch, n√≠ m√≥r d√∫inn
fios a chos√°in.</p>
<p>Is f√©idir le cos√°n a bheith i dh√° fhoirm:</p>
<ul>
<li>Is √© <em>absolute path</em> an cos√°n ioml√°n a thosa√≠onn √≥ fhr√©amh gcliathbhosca; le haghaidh c√≥d
√≥ chliathbhosca seachtrach, tosa√≠onn an cos√°n ioml√°n le hainm an chliabh√°in, agus le haghaidh
c√≥d √≥n gcliathbhosca reatha, tosa√≠onn s√© leis an <code>crate</code> litri√∫il.</li>
<li>Tosa√≠onn cos√°n <em>relative</em> √≥n mod√∫l reatha agus √∫s√°idtear <code>self</code>, <code>super</code>, n√≥
aitheant√≥ir sa mhod√∫l reatha.</li>
</ul>
<p>Leanann aitheant√≥ir amh√°in n√≥ n√≠os m√≥ cos√°in ioml√°na agus choibhneasta araon
scartha le coil√≠neachta√≠ d√∫bailte (<code>::</code>).</p>
<p>Ag filleadh ar Liost√∫ 7-1, abair gur mhaith linn an fheidhm <code>add_to_waitlist</code> a ghlaoch.
Is ionann √© seo agus fiafra√≠: cad √© cos√°n na feidhme <code>add_to_waitlist</code>?
I Liost√°il 7-3 t√° Liosta 7-1 le roinnt de na mod√∫il agus feidhmeanna
bhaintear.</p>
<p>Taispe√°nfaimid dh√° bhealach chun an fheidhm <code>add_to_waitlist</code> a ghlaoch √≥ fheidhm nua,
<code>eat_at_restaurant</code>, sainmh√≠nithe i bhfr√©amh an chliathbhosca. T√° na cos√°in seo ceart, ach
t√° fadhb eile f√°gtha a chuirfidh cosc ‚Äã‚Äãar an sampla seo a chur le ch√©ile
mar at√°. M√≠neoimid c√©n f√°th i mbeag√°n focal.</p>
<p>T√° an fheidhm <code>eat_at_restaurant</code> mar chuid d'API poibl√≠ √°r gcliathbhosca leabharlainne, mar sin
marc√°lann muid √© leis an eochairfhocal <code>pub</code>. Sa <a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html#exposing-paths-with-the-pub-keyword">‚ÄúCos√°in Nochtadh leis an <code>pub</code>
Eochairfhocal‚Äù</a> <!-- neamhaird a dh√©anamh ar --> alt, d√©anfaimid n√≠os m√≥ sonra√≠ faoi <code>pub</code>.</p>
<Listing number="7-3" file-name="src/lib.rs" caption="Calling the `add_to_waitlist` function using absolute and relative paths">
<pre><code class="language-rust ignore does_not_compile">mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // Absolute path
    crate::front_of_house::hosting::add_to_waitlist();

    // Relative path
    front_of_house::hosting::add_to_waitlist();
}</code></pre>
</Listing>
<p>An ch√©ad uair a ghlaoimid an fheidhm <code>add_to_waitlist</code> i <code>eat_at_restaurant</code>,
√∫s√°idimid cos√°n ioml√°n. Sainmh√≠n√≠tear an fheidhm <code>add_to_waitlist</code> mar an gc√©anna
cliathbhosca mar <code>eat_at_restaurant</code>, rud a chialla√≠onn gur f√©idir linn an eochairfhocal <code>crate</code> a √∫s√°id chun
t√∫s a chur le cos√°n ioml√°n. √Åir√≠mid ansin gach ceann de na mod√∫il as a ch√©ile go dt√≠ go nd√©anaimid
d√©an √°r mbealach chuig <code>add_to_waitlist</code>. Is f√©idir leat c√≥ras comhaid a shamhl√∫ leis an gc√©anna
strucht√∫r: shonraigh muid an cos√°n <code>/front_of_house/hosting/add_to_waitlist</code> go dt√≠
re√°cht√°il an cl√°r <code>add_to_waitlist</code>; ag baint √∫s√°ide as an ainm <code>crate</code> chun tos√∫ as an
Is cos√∫il le fr√©amh an chliabh√°in √∫s√°id a bhaint as <code>/</code> chun tos√∫ √≥ fhr√©amh an ch√≥rais comhad i do bhlaosc.</p>
<p>An dara huair a ghlaoimid <code>add_to_waitlist</code> i <code>eat_at_restaurant</code>, √∫s√°idimid
cos√°n coibhneasta. Tosa√≠onn an cos√°n le <code>front_of_house</code>, ainm an mhod√∫il
sainmh√≠nithe ag an leibh√©al c√©anna de chrann an mhod√∫il le <code>eat_at_restaurant</code>. Seo an
bheadh ‚Äã‚Äã‚Äã‚Äãcoibh√©is c√≥ras comhaid ag baint √∫s√°ide as an gcos√°n
<code>front_of_house/hosting/add_to_waitlist</code>. Ag tos√∫ le hainm mod√∫l cialla√≠onn
go bhfuil an cos√°n coibhneasta.</p>
<p>Is √© an cinneadh a dh√©anfaidh t√∫ maidir le conair ghaolmhar n√≥ cos√°n ioml√°n a roghn√∫
bunaithe ar do thionscadal, agus braitheann s√© ar cib√© an bhfuil seans n√≠os m√≥ agat bogadh
c√≥d sainmh√≠nithe m√≠re ar leithligh √≥ n√≥ in √©ineacht leis an gc√≥d a √∫s√°ideann an
m√≠r. Mar shampla, m√° bhog muid an mod√∫l <code>front_of_house</code> agus an
feidhm√≠onn <code>eat_at_restaurant</code> isteach i mod√∫l darb ainm <code>customer_experience</code>, bheimis
g√° an cos√°n ioml√°n chuig <code>add_to_waitlist</code> a nuashonr√∫, ach an cos√°n coibhneasta
bheadh ‚Äã‚Äãbail√≠ f√≥s. Mar sin f√©in, m√° bhog muid an fheidhm <code>eat_at_restaurant</code>
ar leithligh isteach i mod√∫l darb ainm <code>dining</code>, an cos√°n ioml√°n chuig an
D'fhanfadh an glao <code>add_to_waitlist</code> mar a ch√©ile, ach bheadh ‚Äã‚Äãg√° leis an gcos√°n coibhneasta
a nuashonr√∫. Is √© an rogha at√° againn i gcoitinne n√° cos√°in ioml√°na a shonr√∫ toisc go bhfuil
is d√≥ich√≠ go mbeidh muid ag iarraidh sainmh√≠nithe c√≥d agus glaonna m√≠reanna a bhogadh go neamhsple√°ch orthu
ch√©ile.</p>
<p>D√©anaimis iarracht Liost√∫ 7-3 a thioms√∫ agus faigh amach c√©n f√°th nach dtioms√≥idh s√© f√≥s! T√° an
taispe√°ntar na hearr√°id√≠ a fhaighimid i Liost√∫ 7-4.</p>
<Listing number="7-4" caption="Compiler errors from building the code in Listing 7-3">
<pre><code class="language-console">$ cargo build
   Compiling restaurant v0.1.0 (file:///projects/restaurant)
error[E0603]: module `hosting` is private
 --&gt; src/lib.rs:9:28
  |
9 |     crate::front_of_house::hosting::add_to_waitlist();
  |                            ^^^^^^^  --------------- function `add_to_waitlist` is not publicly re-exported
  |                            |
  |                            private module
  |
note: the module `hosting` is defined here
 --&gt; src/lib.rs:2:5
  |
2 |     mod hosting {
  |     ^^^^^^^^^^^

error[E0603]: module `hosting` is private
  --&gt; src/lib.rs:12:21
   |
12 |     front_of_house::hosting::add_to_waitlist();
   |                     ^^^^^^^  --------------- function `add_to_waitlist` is not publicly re-exported
   |                     |
   |                     private module
   |
note: the module `hosting` is defined here
  --&gt; src/lib.rs:2:5
   |
2  |     mod hosting {
   |     ^^^^^^^^^^^

For more information about this error, try `rustc --explain E0603`.
error: could not compile `restaurant` (lib) due to 2 previous errors
</code></pre>
</Listing>
<p>Deir na teachtaireachta√≠ earr√°ide go bhfuil mod√∫l <code>hosting</code> pr√≠obh√°ideach. I bhfocail eile, t√°imid
b√≠odh na cos√°in chearta agat don mhod√∫l <code>hosting</code> agus don <code>add_to_waitlist</code>
feidhm, ach n√≠ ligfidh Rust d√∫inn iad a √∫s√°id toisc nach bhfuil rochtain aige ar an
rann√≥ga pr√≠obh√°ideacha. I Rust, t√° gach m√≠r (feidhmeanna, modhanna, strucht√∫ir, enums,
mod√∫il, agus tairisigh) pr√≠obh√°ideach do mhod√∫il tuismitheora de r√©ir r√©amhshocraithe. M√°s mian leat
chun m√≠r mar fheidhm n√≥ strucht√∫r a dh√©anamh pr√≠obh√°ideach, cuireann t√∫ i mod√∫l √©.</p>
<p>N√≠ f√©idir le m√≠reanna i mod√∫l tuismitheora na m√≠reanna pr√≠obh√°ideacha taobh istigh de mhod√∫il leana√≠ a √∫s√°id, ach
is f√©idir le m√≠reanna i mod√∫il leana√≠ na m√≠reanna i mod√∫il a sinsear a √∫s√°id. T√° s√© seo
mar gheall ar mhod√∫il leanbh wrap agus a cheilt a gcuid sonra√≠ cur chun feidhme, ach an leanbh
is f√©idir le mod√∫il an comhth√©acs ina bhfuil siad sainithe a fheice√°il. Chun lean√∫int ar aghaidh len√°r
meafar, smaoinigh ar na rialacha pr√≠obh√°ideachais mar ch√∫loifig a
bialann: is pr√≠obh√°ideach do chustaim√©ir√≠ bialainne an rud a th√©ann ar aghaidh ann, ach
is f√©idir le bainisteoir√≠ oifige gach rud a fheice√°il agus a dh√©anamh sa bhialann a oibr√≠onn siad.</p>
<p>Roghnaigh Rust go mbeadh an c√≥ras mod√∫il ag feidhmi√∫ ar an mbealach seo ionas go gcuirf√≠ i bhfolach taobh istigh
is √© sonra√≠ cur chun feidhme an r√©amhshocr√∫. Ar an mbealach sin, t√° a fhios agat c√© na codanna den
c√≥d istigh is f√©idir leat a athr√∫ gan an c√≥d seachtrach a bhriseadh. Mar sin f√©in, tugann Rust
t√° an rogha agat codanna istigh de ch√≥d na mod√∫il leana√≠ a nochtadh don tsinsir sheachtrach
mod√∫il tr√≠d an eochairfhocal <code>pub</code> a √∫s√°id chun m√≠r a phoibli√∫.</p>
<h3 id="conair√≠-√°-nochtadh-leis-an-eochairfhocal-pub"><a class="header" href="#conair√≠-√°-nochtadh-leis-an-eochairfhocal-pub">Conair√≠ √° Nochtadh leis an Eochairfhocal <code>pub</code></a></h3>
<p>Fillfimid ar an earr√°id i Liost√∫ 7-4 a chuir in i√∫l d√∫inn gurb √© an mod√∫l <code>hosting</code>
pr√≠obh√°ideach. Ba mhaith linn go mbeadh an fheidhm <code>eat_at_restaurant</code> sa mhod√∫l tuismitheora
rochtain ar an bhfeidhm <code>add_to_waitlist</code> sa mhod√∫l linbh, mar sin marc√°lann muid an
mod√∫l <code>hosting</code> leis an eochairfhocal <code>pub</code>, mar a thaispe√°ntar i Liosta 7-5.</p>
<Listing number="7-5" file-name="src/lib.rs" caption="Declaring the `hosting` module as `pub` to use it from `eat_at_restaurant`">
<pre><code class="language-rust ignore does_not_compile">mod front_of_house {
    pub mod hosting {
        fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // Absolute path
    crate::front_of_house::hosting::add_to_waitlist();

    // Relative path
    front_of_house::hosting::add_to_waitlist();
}</code></pre>
</Listing>
<p>Ar an drochuair, t√° earr√°id√≠ tiomsaitheora f√≥s mar thoradh ar an gc√≥d i Liost√∫ 7-5, mar
l√©irithe i Liosta 7-6.</p>
<Listing number="7-6" caption="Compiler errors from building the code in Listing 7-5">
<pre><code class="language-console">$ cargo build
   Compiling restaurant v0.1.0 (file:///projects/restaurant)
error[E0603]: function `add_to_waitlist` is private
 --&gt; src/lib.rs:9:37
  |
9 |     crate::front_of_house::hosting::add_to_waitlist();
  |                                     ^^^^^^^^^^^^^^^ private function
  |
note: the function `add_to_waitlist` is defined here
 --&gt; src/lib.rs:3:9
  |
3 |         fn add_to_waitlist() {}
  |         ^^^^^^^^^^^^^^^^^^^^

error[E0603]: function `add_to_waitlist` is private
  --&gt; src/lib.rs:12:30
   |
12 |     front_of_house::hosting::add_to_waitlist();
   |                              ^^^^^^^^^^^^^^^ private function
   |
note: the function `add_to_waitlist` is defined here
  --&gt; src/lib.rs:3:9
   |
3  |         fn add_to_waitlist() {}
   |         ^^^^^^^^^^^^^^^^^^^^

For more information about this error, try `rustc --explain E0603`.
error: could not compile `restaurant` (lib) due to 2 previous errors
</code></pre>
</Listing>
<p>Cad a tharla? Nuair a chuirtear an eochairfhocal <code>pub</code> os comhair <code>mod hosting</code> d√©anann an
mod√∫l poibl√≠. Leis an athr√∫ seo, m√°s f√©idir linn rochtain a fh√°il ar <code>front_of_house</code>, is f√©idir linn
rochtain a fh√°il ar <code>hosting</code>. Ach t√° na <em>contents</em> de <code>hosting</code> f√≥s pr√≠obh√°ideach; ag d√©anamh an
n√≠ dh√©anann an mod√∫l poibl√≠ a bhfuil ann. An eochairfhocal <code>pub</code> ar mhod√∫l
n√≠ ligeann s√© ach tagairt a dh√©anamh do ch√≥d ina mhod√∫il sinsear, n√≠ rochtain a fh√°il ar a ch√≥d istigh.
Toisc gur coime√°d√°in iad mod√∫il, n√≠l m√≥r√°n ar f√©idir linn a dh√©anamh ach an
mod√∫l poibl√≠; caithfimid dul n√≠os faide agus rogha a dh√©anamh ceann amh√°in n√≥ n√≠os m√≥ de na
m√≠reanna laistigh den mhod√∫l poibl√≠ chomh maith.</p>
<p>Deir na hearr√°id√≠ i Liost√∫ 7-6 go bhfuil an fheidhm <code>add_to_waitlist</code> pr√≠obh√°ideach.
Baineann na rialacha pr√≠obh√°ideachais le strucht√∫ir, ainmneacha, feidhmeanna agus modhanna chomh maith
mod√∫il.</p>
<p>D√©anaimis an fheidhm <code>add_to_waitlist</code> a phoibli√∫ freisin tr√≠d an <code>pub</code> a chur leis
eochairfhocal roimh a shainmh√≠ni√∫, mar at√° i Liost√∫ 7-7.</p>
<Listing number="7-7" file-name="src/lib.rs" caption="Adding the `pub` keyword to `mod hosting` and `fn add_to_waitlist` lets us call the function from `eat_at_restaurant`">
<pre><code class="language-rust noplayground test_harness">mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // Absolute path
    crate::front_of_house::hosting::add_to_waitlist();

    // Relative path
    front_of_house::hosting::add_to_waitlist();
}</code></pre>
</Listing>
<p>Anois beidh an c√≥d le ch√©ile! Chun a fh√°il amach c√©n f√°th a ligeann d√∫inn √∫s√°id a bhaint as an eochairfhocal <code>pub</code>
na cos√°in seo i <code>eat_at_restaurant</code> maidir leis na rialacha pr√≠obh√°ideachais, breathaimis
ag na cos√°in ioml√°na agus coibhneasta.</p>
<p>Ar an mbealach ioml√°n, cuirimid t√∫s le <code>crate</code>, fr√©amh mod√∫l √°r gcliathbhosca
crann. Sainmh√≠n√≠tear an mod√∫l <code>front_of_house</code> i bhfr√©amh an chliathbhosca. C√© go
N√≠l <code>front_of_house</code> poibl√≠, toisc go bhfuil an fheidhm <code>eat_at_restaurant</code> ann
sainithe sa mhod√∫l c√©anna le <code>front_of_house</code> (is √© sin, <code>eat_at_restaurant</code>
agus is sibl√≠n√≠ iad <code>front_of_house</code>), is f√©idir linn tagairt a dh√©anamh do <code>front_of_house</code> √≥
<code>eat_at_restaurant</code>. Ar aghaidh t√° an mod√∫l <code>hosting</code> marc√°ilte le <code>pub</code>. Is f√©idir linn
rochtain a fh√°il ar an mod√∫l tuismitheora de <code>hosting</code>, ionas gur f√©idir linn rochtain a fh√°il ar <code>hosting</code>. Ar deireadh, an
marc√°iltear an fheidhm <code>add_to_waitlist</code> le <code>pub</code> agus is f√©idir linn rochtain a fh√°il ar a thuismitheoir
mod√∫l, mar sin oibr√≠onn an glao feidhm seo!</p>
<p>Sa chonair choibhneasta, t√° an loighic mar an gc√©anna leis an gcos√°n ioml√°n ach amh√°in i gc√°s an
ch√©ad ch√©im: seachas tos√∫ √≥ fhr√©amh an gcliathbhosca, tosa√≠onn an cos√°n √≥
<code>front_of_house</code>. Sainmh√≠n√≠tear an mod√∫l <code>front_of_house</code> laistigh den mhod√∫l c√©anna
mar <code>eat_at_restaurant</code>, mar sin an cos√°n coibhneasta ag tos√∫ √≥n mod√∫l ina bhfuil
Is saothair shainithe √© <code>eat_at_restaurant</code>. Ansin, mar gheall ar <code>hosting</code> agus
marc√°iltear <code>add_to_waitlist</code> le <code>pub</code>, oibr√≠onn an chuid eile den chos√°n, agus seo
T√° glao feidhm bail√≠!</p>
<p>M√° t√° s√© ar intinn agat do chliabh√°n leabharlainne a chomhroinnt ionas gur f√©idir le tionscadail eile do ch√≥d a √∫s√°id,
is √© do API poibl√≠ do chonradh le h√∫s√°ideoir√≠ do chliabh√°n a chinneann conas
is f√©idir leo idirghn√≠omh√∫ le do ch√≥d. T√° go leor c√∫ins√≠ maidir le bainisti√∫
athruithe ar do API poibl√≠ chun √© a dh√©anamh n√≠os √©asca do dhaoine brath ar do
cliathbhosca. T√° na breithnithe seo lasmuigh de sc√≥ip an leabhair seo; m√° t√° t√∫
suim agat san √°bhar seo, f√©ach <a href="https://rust-lang.github.io/api-guidelines/">Treoirl√≠nte Rust API</a>.</p>
<blockquote>
<h4 id="dea-chleachtais-maidir-le-pac√°ist√≠-le-d√©n√°rtha-agus-leabharlann"><a class="header" href="#dea-chleachtais-maidir-le-pac√°ist√≠-le-d√©n√°rtha-agus-leabharlann">Dea-Chleachtais maidir le Pac√°ist√≠ le D√©n√°rtha agus Leabharlann</a></h4>
<p>Luaigh muid gur f√©idir le cliathbhosca d√©n√°rtha <em>src/main.rs</em> a bheith i bpac√°iste
fr√©amh chomh maith le fr√©amh gcliathbhosca leabharlainne <em>src/lib.rs</em>, agus beidh an d√° chliathbhosca
ainm an phac√°iste de r√©ir r√©amhshocraithe. De ghn√°th, pac√°ist√≠ leis an bpatr√∫n seo de
ina mbeidh leabharlann agus cliathbhosca d√©n√°rtha araon, beidh go leor c√≥d sa
cliathbhosca d√©n√°rtha chun inrite a thos√∫ a ghlaonn c√≥d laistigh de chliath√°n na leabharlainne.
Ligeann s√© seo do thionscadail eile leas a bhaint as an gcuid is m√≥ den fheidhmi√∫lacht a chuireann an
sol√°thra√≠onn pac√°iste toisc gur f√©idir c√≥d an chliabh√°in leabharlainne a roinnt.</p>
<p>Ba cheart crann an mhod√∫il a shaini√∫ in <em>src/lib.rs</em>. Ansin, is f√©idir aon nithe poibl√≠
a √∫s√°id sa chliabh√°n d√©n√°rtha tr√≠ chos√°in a thos√∫ le hainm an phac√°iste.
B√≠onn an cliathbhosca d√©n√°rtha ina √∫s√°ideoir ar an gcliathbhosca leabharlainne d√≠reach mar a bheadh ‚Äã‚Äãgo hioml√°n
d‚Äô√∫s√°idfeadh cliathbhosca seachtrach cliathbhosca na leabharlainne: n√≠ f√©idir leis ach an API poibl√≠ a √∫s√°id.
Cuid√≠onn s√© seo leat API maith a dhearadh; n√≠ hamh√°in gur tusa an t-√∫dar, is tusa freisin
cliant!</p>
<p>I <a href="ch12-00-an-io-project.html">Caibidil 12</a><!-- neamhaird a dh√©anamh -->, l√©ireoimid an eagra√≠ocht seo
cleachtadh le cl√°r ordaithe ina mbeidh cliathbhosca d√©n√°rtha araon
agus cliathbhosca leabharlainne.</p>
</blockquote>
<h3 id="ag-tos√∫-cos√°in-choibhneasta-le-super"><a class="header" href="#ag-tos√∫-cos√°in-choibhneasta-le-super">Ag tos√∫ Cos√°in Choibhneasta le <code>super</code></a></h3>
<p>Is f√©idir linn cos√°in choibhneasta a th√≥g√°il a thosa√≠onn sa mhod√∫l tuismitheora, seachas
an mod√∫l reatha n√≥ an fhr√©amh cliathbhosca, tr√≠ √∫s√°id a bhaint as <code>super</code> ag t√∫s an
cos√°n. T√° s√© seo cos√∫il le cos√°n c√≥rais comhad a thos√∫ leis an gcomhr√©ir <code>..</code>. Ag baint √∫s√°ide as
ligeann <code>super</code> d√∫inn tagairt a dh√©anamh do mh√≠r a bhfuil a fhios againn at√° sa mhod√∫l tuismitheora,
rud a d'fh√©adfadh an crann mod√∫l a atheagr√∫ n√≠os √©asca nuair a bh√≠onn an mod√∫l go dl√∫th
a bhaineann leis an tuismitheoir ach d‚Äôfh√©adfa√≠ an tuismitheoir a aistri√∫ chuig √°it eile sa mhod√∫l
crann l√° √©igin.</p>
<p>Smaoinigh ar an gc√≥d i Liosta 7-8 a mh√∫nla√≠onn an c√°s ina bhfuil c√≥caire
socra√≠onn s√© ord√∫ m√≠cheart agus tugann s√© amach go pearsanta don chustaim√©ir √©. T√° an
feidhm <code>fix_incorrect_order</code> a shainmh√≠n√≠tear sa mhod√∫l <code>back_of_house</code> ar a dtugtar an
feidhm <code>deliver_order</code> arna shaini√∫ sa mhod√∫l tuismitheora tr√≠d an gcos√°n chuig a shonr√∫
<code>deliver_order</code>, ag tos√∫ le <code>super</code>.</p>
<Listing number="7-8" file-name="src/lib.rs" caption="Calling a function using a relative path starting with `super`">
<pre><code class="language-rust noplayground test_harness">fn deliver_order() {}

mod back_of_house {
    fn fix_incorrect_order() {
        cook_order();
        super::deliver_order();
    }

    fn cook_order() {}
}</code></pre>
</Listing>
<p>T√° an fheidhm <code>fix_incorrect_order</code> sa mhod√∫l <code>back_of_house</code>, ionas gur f√©idir linn
√∫s√°id <code>super</code> chun dul go dt√≠ an mod√∫l tuismitheora de <code>back_of_house</code>, at√° sa ch√°s seo
is <code>crate</code>, an fhr√©amh. √ìn √°it sin, lorga√≠mid <code>deliver_order</code> agus faighimid √©.
Rath! Is d√≥igh linn go bhfuil an mod√∫l <code>back_of_house</code> agus an fheidhm <code>deliver_order</code>
is d√≥cha go bhfanfaidh siad sa chaidreamh c√©anna lena ch√©ile agus go n-aistreofar iad
le ch√©ile ar cheart d√∫inn cinneadh a dh√©anamh crann mod√∫l an chliathbhosca a atheagr√∫. D√° bhr√≠ sin, t√°imid
√∫s√°id as <code>super</code> mar sin beidh n√≠os l√∫ √°iteanna againn chun c√≥d a nuashonr√∫ amach anseo m√°s amhlaidh
bogtar an c√≥d go mod√∫l eile.</p>
<h3 id="strucht√∫ir-agus-enums-a-dh√©anamh-go-poibl√≠"><a class="header" href="#strucht√∫ir-agus-enums-a-dh√©anamh-go-poibl√≠">Strucht√∫ir agus Enums a Dh√©anamh go Poibl√≠</a></h3>
<p>Is f√©idir linn <code>pub</code> a √∫s√°id freisin chun strucht√∫ir agus enums a ainmni√∫ go poibl√≠, ach t√° a
roinnt sonra√≠ breise maidir le h√∫s√°id <code>pub</code> le strucht√∫ir agus enums. M√° √∫s√°idimid <code>pub</code>
roimh shainmh√≠ni√∫ strucht√∫r, d√©anaimid an strucht√∫r poibl√≠, ach r√©ims√≠ an strucht√∫ir
beidh s√© f√≥s pr√≠obh√°ideach. Is f√©idir linn gach r√©imse a dh√©anamh poibl√≠ n√≥ gan a bheith bunaithe ar ch√°s
bonn. I Liost√∫ 7-9, shainmh√≠omar strucht√∫r poibl√≠ <code>back_of_house::Breakfast</code>
le r√©imse poibl√≠ <code>toast</code> ach r√©imse pr√≠obh√°ideach <code>seasonal_fruit</code>. Samhlacha seo
an c√°s i mbialann inar f√©idir leis an gcustaim√©ir an cine√°l ar√°in sin a phiocadh
Tagann b√©ile le b√©ile, ach socra√≠onn an c√≥caire c√© na tortha√≠ a th√©ann leis an mb√©ile at√° bunaithe
ar cad at√° i s√©as√∫r agus i stoc. Athra√≠onn na tortha√≠ at√° ar f√°il go tapa, mar sin
n√≠ f√©idir le custaim√©ir√≠ na tortha√≠ a roghn√∫ n√≥ fi√∫ na tortha√≠ a gheobhaidh siad a fheice√°il.</p>
<Listing number="7-9" file-name="src/lib.rs" caption="A struct with some public fields and some private fields">
<pre><code class="language-rust noplayground">mod back_of_house {
    pub struct Breakfast {
        pub toast: String,
        seasonal_fruit: String,
    }

    impl Breakfast {
        pub fn summer(toast: &amp;str) -&gt; Breakfast {
            Breakfast {
                toast: String::from(toast),
                seasonal_fruit: String::from("peaches"),
            }
        }
    }
}

pub fn eat_at_restaurant() {
    // Order a breakfast in the summer with Rye toast
    let mut meal = back_of_house::Breakfast::summer("Rye");
    // Change our mind about what bread we'd like
    meal.toast = String::from("Wheat");
    println!("I'd like {} toast please", meal.toast);

    // The next line won't compile if we uncomment it; we're not allowed
    // to see or modify the seasonal fruit that comes with the meal
    // meal.seasonal_fruit = String::from("blueberries");
}</code></pre>
</Listing>
<p>Toisc go bhfuil an r√©imse <code>toast</code> sa strucht√∫r <code>back_of_house::Breakfast</code> poibl√≠,
i <code>eat_at_restaurant</code> is f√©idir linn scr√≠obh agus l√©amh chuig an r√©imse <code>toast</code> ag baint √∫s√°ide as ponc
nodaireacht. Tabhair faoi deara nach f√©idir linn an r√©imse <code>seasonal_fruit</code> a √∫s√°id i
<code>eat_at_restaurant</code>, toisc go bhfuil <code>seasonal_fruit</code> pr√≠obh√°ideach. Bain triail as uncommenting an
l√≠ne ag modhn√∫ an luach r√©imse <code>seasonal_fruit</code> f√©achaint c√©n earr√°id a gheobhaidh t√∫!</p>
<p>Chomh maith leis sin, tabhair faoi deara toisc go bhfuil r√©imse pr√≠obh√°ideach ag <code>back_of_house::Breakfast</code>, n√≠ m√≥r an
N√≠ m√≥r do strucht√∫r feidhm a bhaineann leis an bpobal a shol√°thar a fhoirgn√≠onn an
mar shampla <code>Bricfeasta</code> (t√° <code>summer</code> tugtha againn anseo). Mura raibh <code>Breakfast</code>
a leith√©id d‚Äôfheidhm a bheith againn, n√≠orbh fh√©idir linn sampla de <code>Breakfast</code> a chruth√∫ i
<code>eat_at_restaurant</code> mar n√≠orbh fh√©idir linn luach an phr√≠obh√°idigh a shocr√∫
r√©imse <code>seasonal_fruit</code> i <code>eat_at_restaurant</code>.</p>
<p>I gcodarsnacht leis sin, m√° dh√©anaimid enum poibl√≠, t√° gach leagan d√° chuid poibl√≠ ansin. muid
n√≠l de dh√≠th ach an <code>pub</code> roimh an eochairfhocal <code>enum</code>, mar a thaispe√°ntar i Liosta 7-10.</p>
<Listing number="7-10" file-name="src/lib.rs" caption="Designating an enum as public makes all its variants public">
<pre><code class="language-rust noplayground">mod back_of_house {
    pub enum Appetizer {
        Soup,
        Salad,
    }
}

pub fn eat_at_restaurant() {
    let order1 = back_of_house::Appetizer::Soup;
    let order2 = back_of_house::Appetizer::Salad;
}</code></pre>
</Listing>
<p>Toisc go ndearnamar an <code>Appetizer</code> enum poibl√≠, is f√©idir linn an <code>Soup</code> agus <code>Salad</code> a √∫s√°id
leaganacha i <code>eat_at_restaurant</code>.</p>
<p>N√≠ bh√≠onn enums an-√∫s√°ideach mura bhfuil a gcuid leaganacha poibl√≠; bheadh ‚Äã‚Äãs√© annoying
n√≠ m√≥r gach leagan enum a an√≥t√°il le <code>pub</code> i ngach c√°s, mar sin an r√©amhshocr√∫
le haghaidh leagan enum le bheith poibl√≠. Is minic a bh√≠onn strucht√∫ir √∫s√°ideach gan a gcuid
r√©ims√≠ a bheith poibl√≠, mar sin r√©ims√≠ struct lean√∫int riail ghinear√°lta gach rud
a bheith pr√≠obh√°ideach de r√©ir r√©amhshocraithe ach amh√°in m√° t√° <code>pub</code> an√≥t√°ilte air.</p>
<p>T√° c√°s amh√°in eile a bhaineann le ‚Äòteach t√°bhairne‚Äô n√°r chl√∫daigh muid, agus is √© sin
an ghn√© dheireanach den ch√≥ras mod√∫il at√° againn: an eochairfhocal <code>use</code>. Cl√∫d√≥idh muid <code>use</code> leis f√©in
ar dt√∫s, agus ansin taispe√°nfaimid conas <code>pub</code> agus <code>use</code> a chur le ch√©ile.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cos√°in-a-thabhairt-isteach-sa-sc√≥ip-leis-an-eochairfhocal-use"><a class="header" href="#cos√°in-a-thabhairt-isteach-sa-sc√≥ip-leis-an-eochairfhocal-use">Cos√°in a Thabhairt isteach sa Sc√≥ip leis an Eochairfhocal <code>use</code></a></h2>
<p>M√° bh√≠onn ort na cos√°in chun feidhmeanna a ghlaoch a scr√≠obh, d'fh√©adfadh s√© a bheith deacair agus
athchleachtach. I Liosta 7-7, cib√© acu a roghnaigh muid an cos√°n ioml√°n n√≥ an cos√°n coibhneasta d√≥
an fheidhm <code>add_to_waitlist</code>, gach uair a theastaigh uainn <code>add_to_waitlist</code> a ghlaoch
bh√≠ orainn <code>front_of_house</code> agus <code>hosting</code> a shonr√∫ freisin. Ar √°mhara√≠ an tsaoil, t√° a
bealach leis an bpr√≥iseas seo a shimpli√∫: is f√©idir linn aicearra chuig cos√°n a chruth√∫ leis an <code>use</code>
eochairfhocal uair amh√°in, agus ansin bain √∫s√°id as an t-ainm n√≠os giorra i ngach √°it eile sa raon feidhme.</p>
<p>I Liost√∫ 7-11, tugaimid an mod√∫l <code>crate::front_of_house::hosting</code> isteach sa
sc√≥ip na feidhme <code>eat_at_restaurant</code> mar sin n√≠l le d√©anamh againn ach a shonr√∫
<code>hosting::add_to_waitlist</code> chun an fheidhm <code>add_to_waitlist</code> a ghlaoch isteach i
<code>eat_at_restaurant</code>.</p>
<Listing number="7-11" file-name="src/lib.rs" caption="Bringing a module into scope with `use`">
<pre><code class="language-rust noplayground test_harness">mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}</code></pre>
</Listing>
<p>Nuair a chuirtear <code>use</code> agus cos√°n isteach i sc√≥ip t√° s√© cos√∫il le nasc siombalach a chruth√∫ i
an c√≥ras comhaid. Tr√≠ <code>use crate::front_of_house::hosting</code> a chur leis an gcliathbhosca
root, is ainm bail√≠ √© <code>hosting</code> anois sa raon feidhme sin, d√≠reach mar a bheadh ‚Äã‚Äãan <code>hosting</code>
Bh√≠ mod√∫l sainithe sa fhr√©amh gcliathbhosca. Cos√°in tugtha isteach sa sc√≥ip le <code>use</code>
seice√°il freisin pr√≠obh√°ideacht, mar aon cos√°in eile.</p>
<p>Tabhair faoi deara nach gcrutha√≠onn <code>use</code> ach an aicearra don raon feidhme ar leith ina bhfuil an
tarla√≠onn <code>use</code>. M√° dh√©antar liost√∫ 7-12, bogtar an fheidhm <code>eat_at_restaurant</code> isteach i gceann nua
mod√∫l leanbh darb ainm <code>customer</code>, a bhfuil raon feidhme difri√∫il aige ansin n√° an <code>use</code>
r√°iteas, mar sin n√≠ thioms√≥idh an comhlacht feidhme.</p>
<Listing number="7-12" file-name="src/lib.rs" caption="A `use` statement only applies in the scope it‚Äôs in">
<pre><code class="language-rust noplayground test_harness does_not_compile ignore">mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use crate::front_of_house::hosting;

mod customer {
    pub fn eat_at_restaurant() {
        hosting::add_to_waitlist();
    }
}</code></pre>
</Listing>
<p>L√©ir√≠onn earr√°id an tiomsaitheora nach bhfuil feidhm ag an aicearra a thuilleadh laistigh de na
mod√∫l <code>customer</code>:</p>
<pre><code class="language-console">$ cargo build
   Compiling restaurant v0.1.0 (file:///projects/restaurant)
error[E0433]: failed to resolve: use of undeclared crate or module `hosting`
  --&gt; src/lib.rs:11:9
   |
11 |         hosting::add_to_waitlist();
   |         ^^^^^^^ use of undeclared crate or module `hosting`
   |
help: consider importing this module through its public re-export
   |
10 +     use crate::hosting;
   |

warning: unused import: `crate::front_of_house::hosting`
 --&gt; src/lib.rs:7:5
  |
7 | use crate::front_of_house::hosting;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

For more information about this error, try `rustc --explain E0433`.
warning: `restaurant` (lib) generated 1 warning
error: could not compile `restaurant` (lib) due to 1 previous error; 1 warning emitted
</code></pre>
<p>Tabhair faoi deara freisin go bhfuil rabhadh ann nach n-√∫s√°idtear an <code>use</code> ina raon feidhme a thuilleadh! Chuig
deisigh an fhadhb seo, bog an <code>use</code> laistigh den mhod√∫l <code>customer</code> freisin, n√≥ sa tagairt
an t-aicearra sa mhod√∫l tuismitheora le <code>super::hosting</code> laistigh den leanbh
mod√∫l <code>customer</code>.</p>
<h3 id="cos√°in-√ös√°ide-id√©anacha-√°-gcruth√∫"><a class="header" href="#cos√°in-√ös√°ide-id√©anacha-√°-gcruth√∫">Cos√°in `√ös√°ide' Id√©anacha √° gcruth√∫</a></h3>
<p>I Liost√∫ 7-11, b'fh√©idir gur sh√≠l t√∫ c√©n f√°th ar shonraigh muid <code>use crate::front_of_house::hosting</code> agus ansin ar a dtugtar <code>hosting::add_to_waitlist</code> isteach
<code>eat_at_restaurant</code>, seachas an cos√°n <code>use</code> a shonr√∫ an bealach ar fad amach chuige
an fheidhm <code>add_to_waitlist</code> chun an toradh c√©anna a bhaint amach, mar at√° i Liost√∫ 7-13.</p>
<Listing number="7-13" file-name="src/lib.rs" caption="Bringing the `add_to_waitlist` function into scope with `use`, which is unidiomatic">
<pre><code class="language-rust noplayground test_harness">mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use crate::front_of_house::hosting::add_to_waitlist;

pub fn eat_at_restaurant() {
    add_to_waitlist();
}</code></pre>
</Listing>
<p>C√© go nd√©anann Liost√∫ 7-11 agus Liost√∫ 7-13 an tasc c√©anna, Liost√°il
Is √© 7-11 an gn√°thbhealach chun feidhm a thabhairt isteach sa sc√≥ip le <code>use</code>. Ag tabhairt
mod√∫l tuismitheora na feidhme isteach sa sc√≥ip le cialla√≠onn <code>use</code> go gcaithfimid an
mod√∫l tuismitheora nuair a ghlaonn t√∫ an fheidhm. Ag sonr√∫ an mhod√∫il tuismitheora cathain
M√° ghlaonn t√∫ ar an bhfeidhm, is l√©ir nach bhfuil an fheidhm sainithe go h√°iti√∫il
agus athr√° ar an gcos√°n ioml√°n √° √≠oslaghd√∫ f√≥s. Is √© an c√≥d i Liosta 7-13
n√≠ l√©ir c√° bhfuil <code>add_to_waitlist</code> sainmh√≠nithe.</p>
<p>Ar an l√°imh eile, agus t√∫ ag tabhairt isteach structs, enums, agus m√≠reanna eile le <code>use</code>,
t√° s√© idiomatic an cos√°n ioml√°n a shonr√∫. L√©ir√≠onn liost√∫ 7-14 an gn√°thbhealach
chun strucht√∫r <code>HashMap</code> na leabharlainne caighde√°nach a thabhairt isteach i sc√≥ip dh√©n√°rtha
cliathbhosca.</p>
<Listing number="7-14" file-name="src/main.rs" caption="Bringing `HashMap` into scope in an idiomatic way">
<pre><pre class="playground"><code class="language-rust">use std::collections::HashMap;

fn main() {
    let mut map = HashMap::new();
    map.insert(1, 2);
}</code></pre></pre>
</Listing>
<p>N√≠l aon ch√∫is l√°idir taobh thiar den idiom seo: n√≠l ann ach an coinbhinsi√∫n a bhfuil
th√°inig s√© chun cinn, agus t√° taith√≠ ag daoine ar ch√≥d Rust a l√©amh agus a scr√≠obh ar an mbealach seo.</p>
<p>Is √≠ an eisceacht don idiom seo n√° m√° t√°imid ag tabhairt dh√° mh√≠r leis an ainm c√©anna
isteach sa sc√≥ip le r√°itis <code>use</code>, mar n√≠ cheada√≠onn Rust √© sin. Liost√°il 7-15
l√©ir√≠onn s√© conas dh√° chine√°l <code>Result</code> a thabhairt isteach sa sc√≥ip a bhfuil an t-ainm c√©anna orthu ach
mod√∫il tuismitheoir√≠ √©ags√∫la, agus conas tagairt a dh√©anamh d√≥ibh.</p>
<Listing number="7-15" file-name="src/lib.rs" caption="Bringing two types with the same name into the same scope requires using their parent modules.">
<pre><code class="language-rust noplayground">use std::fmt;
use std::io;

fn function1() -&gt; fmt::Result {
    // --snip--
<span class="boring">    Ok(())
</span>}

fn function2() -&gt; io::Result&lt;()&gt; {
    // --snip--
<span class="boring">    Ok(())
</span>}</code></pre>
</Listing>
<p>Mar a fheiceann t√∫, tr√≠ na mod√∫il tuismitheora a √∫s√°id d√©antar idirdheal√∫ idir an d√° chine√°l <code>Result</code>.
M√°s rud √© ina ionad sin shonraigh muid <code>use std::fmt::Result</code> agus <code>use std::io::Result</code>, dh√©anfaimis
t√° dh√° chine√°l <code>Result</code> sa sc√≥ip ch√©anna, agus n√≠ bheadh ‚Äã‚Äãa fhios ag Rust c√©n ceann at√° againn
i gceist nuair a d'√∫s√°ideamar <code>Result</code>.</p>
<h3 id="ainmneacha-nua-a-shol√°thar-leis-an-eochairfhocal-as"><a class="header" href="#ainmneacha-nua-a-shol√°thar-leis-an-eochairfhocal-as">Ainmneacha Nua a Shol√°thar leis an Eochairfhocal <code>as</code></a></h3>
<p>T√° r√©iteach eile ar an bhfadhb a bhaineann le dh√° chine√°l den ainm c√©anna a thabhairt
isteach sa raon feidhme c√©anna le <code>use</code>: tar √©is an chos√°in, is f√©idir linn a shonr√∫ <code>as</code> agus nua
ainm √°iti√∫il, n√≥ <em>alias</em>, don chine√°l. L√©ir√≠onn liost√∫ 7-16 bealach eile le scr√≠obh
an c√≥d i Liost√∫ 7-15 tr√≠ cheann amh√°in den d√° chine√°l <code>Result</code> a athainmni√∫ ag baint √∫s√°ide as <code>as</code>.</p>
<Listing number="7-16" file-name="src/lib.rs" caption="Renaming a type when it‚Äôs brought into scope with the `as` keyword">
<pre><code class="language-rust noplayground">use std::fmt::Result;
use std::io::Result as IoResult;

fn function1() -&gt; Result {
    // --snip--
<span class="boring">    Ok(())
</span>}

fn function2() -&gt; IoResult&lt;()&gt; {
    // --snip--
<span class="boring">    Ok(())
</span>}</code></pre>
</Listing>
<p>Sa dara r√°iteas <code>use</code>, roghnaigh muid an t-ainm nua <code>IoResult</code> le haghaidh an
cine√°l <code>std::io::Result</code>, nach mbeidh ag teacht salach ar an <code>Result</code> √≥ <code>std::fmt</code>
a thugamar isteach sa sc√≥ip freisin. T√° Liost√°il 7-15 agus Liost√∫ 7-16
a mheastar a bheith ina ngn√°thn√≥s, mar sin t√° an rogha suas duitse!</p>
<h3 id="ainmneacha-√°-ath-onnmhairi√∫-le-pub-use"><a class="header" href="#ainmneacha-√°-ath-onnmhairi√∫-le-pub-use">Ainmneacha √° ath-onnmhairi√∫ le <code>pub use</code></a></h3>
<p>Nuair a thugaimid ainm isteach sa sc√≥ip leis an eochairfhocal <code>use</code>, an t-ainm at√° ar f√°il i
t√° an raon feidhme nua pr√≠obh√°ideach. Chun an c√≥d a ghlaonn √°r gc√≥d a chumas√∫ chun tagairt a dh√©anamh
an t-ainm sin amhail is d√° mbeadh s√© sainmh√≠nithe i raon feidhme an ch√≥id sin, is f√©idir linn <code>pub</code> a chur le ch√©ile
agus <code>use</code>. Tugtar <em>re-exporting</em> ar an teicn√≠ocht seo toisc go bhfuil
m√≠r isteach sa raon ach freisin an mh√≠r sin a chur ar f√°il do dhaoine eile le tabhairt isteach
a raon feidhme.</p>
<p>Taispe√°nann Liost√∫ 7-17 an c√≥d i Liost√∫ 7-11 le <code>use</code> sa mhod√∫l fr√©imhe
athraigh go <code>pub use</code>.</p>
<Listing number="7-17" file-name="src/lib.rs" caption="Making a name available for any code to use from a new scope with `pub use`">
<pre><code class="language-rust noplayground test_harness">mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}</code></pre>
</Listing>
<p>Roimh an athr√∫ seo, bheadh ar ch√≥d seachtrach glaoch ar an <code>add_to_waitlist</code>
feidhm ag baint √∫s√°ide as an cos√°n
<code>restaurant::front_of_house::hosting::add_to_waitlist()</code>, a mbeadh
D'√©iligh s√© go nd√©anfa√≠ an mod√∫l <code>front_of_house</code>  a mharc√°il mar <code>pub</code>. Anois go bhfuil an <code>pub use</code>
seo tar √©is an mod√∫l <code>hosting</code> ath-onnmhairithe a√≥n mod√∫l fr√©imhe, c√≥d seachtrach
in ann an cos√°n <code>restaurant::hosting::add_to_waitlist()</code> a √∫s√°id ina ionad sin.</p>
<p>T√° s√© √∫s√°ideach ath-onnmhairi√∫ nuair a bh√≠onn strucht√∫r inmhe√°nach do ch√≥d difri√∫il
√≥n gcaoi a smaoineodh r√≠omhchl√°raitheoir√≠ a ghlaonn do ch√≥d ar an bhfearann. Le haghaidh
Mar shampla, sa mheafar bialann seo, a cheapann na daoine at√° ag rith na bialainne
faoi ‚Äã‚Äã‚Äúaghaidh an t√≠‚Äù agus ‚Äúc√∫l an t√≠.‚Äù Ach custaim√©ir√≠ ag tabhairt cuairte ar bhialann
is d√≥cha nach smaoineoidh siad ar na codanna den bhialann sna t√©arma√≠ sin. Le
<code>pub use</code>, is f√©idir linn √°r gc√≥d a scr√≠obh le strucht√∫r amh√°in ach rud eile a nochtadh
strucht√∫r. Mar gheall air seo d√©anann √°r leabharlann dea-eagraithe do r√≠omhchl√°raitheoir√≠ a oibr√≠onn uirthi
an leabharlann agus r√≠omhchl√°raitheoir√≠ ag glaoch ar an leabharlann. Breathn√≥imid ar shampla eile
de <code>pub use</code> agus conas a th√©ann s√© i bhfeidhm ar dhoicim√©ad√∫ do chliabh√°n sa <a href="ch14-02-publishing-to-crates-io.html#exporting-a-convenient-public-api-with-pub-use">‚ÄúEasp√≥rt√°il a
API Poibl√≠ √°isi√∫il le <code>pub use</code>‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt de
Caibidil 14 .</p>
<h3 id="pac√°ist√≠-seachtracha-√°-√ös√°id"><a class="header" href="#pac√°ist√≠-seachtracha-√°-√ös√°id">Pac√°ist√≠ Seachtracha √° √ös√°id</a></h3>
<p>I gCaibidil 2, rinneamar tionscadal cluiche tomhais a r√≠omhchl√°r√∫ a bhain √∫s√°id as seachtrach
pac√°iste ar a dtugtar <code>rand</code> chun uimhreacha randamacha a fh√°il. Chun <code>rand</code> a √∫s√°id in√°r dtionscadal, d√©anaimid
cuireadh an l√≠ne seo le <em>Cargo.toml</em>:</p>
<p>!-- When updating the version of <code>rand</code> used, also update the version of
<code>rand</code> used in these files so they all match:</p>
<ul>
<li>ch02-00-guessing-game-tutorial.md</li>
<li>ch14-03-cargo-workspaces.md
--&gt;</li>
</ul>
<Listing file-name="Cargo.toml">
<pre><code class="language-toml">rand = "0.8.5"
</code></pre>
</Listing>
<p>Nuair a chuirtear <code>rand</code> isteach mar sple√°chas i <em>Cargo.toml</em> ins√≠onn do Cargo an
pac√°iste <code>rand</code> agus aon sple√°chais √≥ <a href="https://crates.io/"> crates.io</a> agus
cuir <code>rand</code> ar f√°il d√°r dtionscadal.</p>
<p>Ansin, chun sainmh√≠nithe <code>rand</code> a thabhairt isteach i raon feidhme √°r bpac√°iste, chuireamar a
l√≠ne <code>use</code> ag tos√∫ le hainm an chliabh√°in, <code>rand</code>, agus liostaigh na m√≠reanna
bh√≠omar ag iarraidh a thabhairt isteach sa sc√≥ip. Thabhairt chun cuimhne go bhfuil sa <a href="ch02-00-guessing-game-tutorial.html#generating-a-random-number">‚ÄúGini√∫int Randamach
Uimhir‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt i gCaibidil 2, thugamar an trait <code>Rng</code>
isteach sa raon feidhme agus tugadh an fheidhm <code>rand:: thread_rng</code> air:</p>
<pre><code class="language-meirge  neamhaird"># use std::io;
use rand::Rng;

fn main() {
#     println!("Guess the number!");
# 
    let secret_number = rand::thread_rng().gen_range(1..=100);
# 
#     println!("The secret number is: {secret_number}");
# 
#     println!("Please input your guess.");
# 
#     let mut guess = String::new();
# 
#     io::stdin()
#         .read_line(&amp;mut guess)
#         .expect("Failed to read line");
# 
#     println!("You guessed: {guess}");
}
</code></pre>
<p>T√° go leor pac√°ist√≠ curtha ar f√°il ag baill de phobal Rust ag
<a href="https://crates.io/">crates.io</a>, agus aon cheann acu a tharraingt isteach i do phac√°iste
T√° na c√©imeanna c√©anna i gceist: iad a liost√∫ i gcomhad <em>Cargo.toml</em> do phac√°iste agus
ag baint √∫s√°ide as <code>use</code> chun m√≠reanna √≥na cliathbhosca√≠ a thabhairt isteach sa sc√≥ip.</p>
<p>Tabhair faoi deara gur cliathbhosca √© an leabharlann chaighde√°nach <code>std</code> at√° lasmuigh d√°r gcuid
pac√°iste. Toisc go bhfuil an leabharlann caighde√°nach seolta leis an teanga Rust, t√°imid
n√≠ g√° <em>Cargo.toml</em> a athr√∫ chun <code>std</code> a chur san √°ireamh. Ach n√≠ m√≥r d√∫inn tagairt a dh√©anamh
s√© le <code>use</code> chun m√≠reanna a thabhairt as sin isteach i raon feidhme √°r bpac√°iste. Mar shampla,
le <code>HashMap</code> d'√∫s√°idfimid an l√≠ne seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashMap;
<span class="boring">}</span></code></pre></pre>
<p>Is cos√°n ioml√°n √© seo ag tos√∫ le <code>std</code>, ainm na leabharlainne caighde√°nach
cliathbhosca.</p>
<h3 id="conair√≠-neadaithe-a-√ös√°id-chun-liosta√≠-m√≥ra-use-a-ghlanadh"><a class="header" href="#conair√≠-neadaithe-a-√ös√°id-chun-liosta√≠-m√≥ra-use-a-ghlanadh">Conair√≠ Neadaithe a √ös√°id chun Liosta√≠ M√≥ra <code>use</code> a ghlanadh</a></h3>
<p>M√° t√°imid ag baint √∫s√°ide as m√≠reanna iolracha at√° sainithe sa chliabh√°n c√©anna n√≥ sa mhod√∫l c√©anna, liost√°il
is f√©idir le gach m√≠r ar a l√≠ne f√©in go leor sp√°is ingearach a ghlacadh in√°r gcomhaid. Le haghaidh
Mar shampla, an d√° r√°iteas <code>use</code> seo a bh√≠ againn sa chluiche buille faoi thuairim i Liosta 2-4
tabhair m√≠reanna √≥ <code>std</code> isteach sa sc√≥ip:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span>// --snip--
use std::cmp::Ordering;
use std::io;
// --snip--
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {guess}");
</span><span class="boring">
</span><span class="boring">    match guess.cmp(&amp;secret_number) {
</span><span class="boring">        Ordering::Less =&gt; println!("Too small!"),
</span><span class="boring">        Ordering::Greater =&gt; println!("Too big!"),
</span><span class="boring">        Ordering::Equal =&gt; println!("You win!"),
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ina √°it sin, is f√©idir linn cos√°in neadaithe a √∫s√°id chun na m√≠reanna c√©anna a thabhairt isteach i raon feidhme amh√°in
l√≠ne. D√©anaimid √© seo tr√≠ chomhchuid an chos√°in a shonr√∫, agus dh√° cheann ina dhiaidh
colons, agus ansin l√∫ib√≠n√≠ chatach thart ar liosta de na codanna de na cos√°in a
difri√∫il, mar a thaispe√°ntar i Liosta 7-18.</p>
<Listing number="7-18" file-name="src/main.rs" caption="Specifying a nested path to bring multiple items with the same prefix into scope">
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span>// --snip--
use std::{cmp::Ordering, io};
// --snip--
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">    let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">    io::stdin()
</span><span class="boring">        .read_line(&amp;mut guess)
</span><span class="boring">        .expect("Failed to read line");
</span><span class="boring">
</span><span class="boring">    let guess: u32 = guess.trim().parse().expect("Please type a number!");
</span><span class="boring">
</span><span class="boring">    println!("You guessed: {guess}");
</span><span class="boring">
</span><span class="boring">    match guess.cmp(&amp;secret_number) {
</span><span class="boring">        Ordering::Less =&gt; println!("Too small!"),
</span><span class="boring">        Ordering::Greater =&gt; println!("Too big!"),
</span><span class="boring">        Ordering::Equal =&gt; println!("You win!"),
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>I gcl√°ir n√≠os m√≥, a thabhairt go leor m√≠reanna i raon feidhme as an gcliathbhosca c√©anna n√≥
Is f√©idir le mod√∫l ag baint √∫s√°ide as cos√°in neadaithe l√≠on na r√°iteas <code>use</code> ar leith a laghd√∫
ag teast√°il go leor!</p>
<p>Is f√©idir linn cos√°n neadaithe a √∫s√°id ar aon leibh√©al i gcos√°n, rud at√° √∫s√°ideach nuair a chuirtear le ch√©ile
dh√° r√°iteas <code>use</code> a roinneann fobhealach. Mar shampla, taispe√°nann Liost√∫ 7-19 dh√° cheann
r√°itis <code>use</code>: ceann a thugann <code>std::io</code> isteach sa sc√≥ip agus ceann a thugann
<code>std::io::Write</code> isteach sa sc√≥ip.</p>
<Listing number="7-19" file-name="src/lib.rs" caption="Two `use` statements where one is a subpath of the other">
<pre><code class="language-rust noplayground">use std::io;
use std::io::Write;</code></pre>
</Listing>
<p>Is √© an chuid choitianta den d√° chonair seo n√° <code>std::io</code>, agus sin an ch√©ad cheann ioml√°n
cos√°n. Chun an d√° chonair seo a chumasc i r√°iteas amh√°in <code>use</code>, is f√©idir linn <code>self</code> a √∫s√°id isteach
an cos√°n neadaithe, mar a thaispe√°ntar i Liosta 7-20.</p>
<Listing number="7-20" file-name="src/lib.rs" caption="Combining the paths in Listing 7-19 into one `use` statement">
<pre><code class="language-rust noplayground">use std::io::{self, Write};</code></pre>
</Listing>
<p>Tugann an l√≠ne seo <code>std::io</code> agus <code>std::io::Write</code> isteach sa sc√≥ip.</p>
<h3 id="an-toibreoir-glob"><a class="header" href="#an-toibreoir-glob">An tOibreoir Glob</a></h3>
<p>M√°s mian linn <em>all</em> m√≠reanna poibl√≠ at√° sainithe i gcos√°n isteach sa raon feidhme a thabhairt, is f√©idir linn
sonraigh an cos√°n sin a leanann an t-oibreoir <code>*</code> glob:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::*;
<span class="boring">}</span></code></pre></pre>
<p>Tugann an r√°iteas <code>use</code> seo na m√≠reanna poibl√≠ go l√©ir at√° sainmh√≠nithe in <code>std::collections</code> isteach
an raon feidhme reatha. B√≠ c√∫ramach agus an t-oibreoir glob √° √∫s√°id agat! Is f√©idir le Glob √© a dh√©anamh
n√≠os deacra a insint cad iad na hainmneacha at√° sa raon feidhme agus c√©n √°it a √∫s√°idtear ainm i do chl√°r
shainmh√≠n√≠odh.</p>
<p>Is minic a √∫s√°idtear an t-oibreoir glob agus √© ag t√°st√°il chun gach rud a thabhairt faoi th√°st√°il
isteach sa mhod√∫l <code>tests</code>; Labhr√≥imid faoi sin sa <a href="ch11-01-writing-tests.html#how-to-write-tests">‚ÄúConas Scr√≠obh
T√°st√°lacha‚Äù</a><!-- neamhaird --> alt i gCaibidil 11. An t-oibreoir glob
√∫s√°idtear uaireanta freisin mar chuid den phatr√∫n r√©amhlu√≠: f√©ach <a href="../std/prelude/index.html#other-preludes">na doicim√©id chaighde√°nacha leabharlainne</a> <!-- neamhaird -->
chun tuilleadh eolais a fh√°il ar an bpatr√∫n sin.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="mod√∫il-a-scaradh-ina-gcomhaid-√âags√∫la"><a class="header" href="#mod√∫il-a-scaradh-ina-gcomhaid-√âags√∫la">Mod√∫il a Scaradh ina gComhaid √âags√∫la</a></h2>
<p>Go dt√≠ seo, shainmh√≠nigh na sampla√≠ go l√©ir sa chaibidil seo mod√∫il iolracha in aon chomhad amh√°in.
Nuair a thagann m√©ad√∫ m√≥r ar mhod√∫il, b'fh√©idir gur mhaith leat a sainmh√≠nithe a aistri√∫ go dt√≠ ceann eile
comhad chun an c√≥d a dh√©anamh n√≠os √©asca le nasclean√∫int a dh√©anamh.</p>
<p>Mar shampla, cuirimis t√∫s leis an gc√≥d i Liost√∫ 7-17 a raibh iolra√≠ ann
mod√∫il bialann. Bainfimid mod√∫il isteach i gcomhaid in ionad na mod√∫il go l√©ir a bheith againn
mod√∫il at√° sainithe i bhfr√©amhchomhad an chliabh√°in. Sa ch√°s seo, t√° an comhad fr√©imhe gcliathbhosca
<em>src/lib.rs</em>, ach oibr√≠onn an n√≥s imeachta seo freisin le cliathbhosca√≠ d√©n√°rtha a bhfuil a fhr√©amh gcliathbhosca
T√° an comhad <em>src/main.rs</em>.</p>
<p>Ar dt√∫s bainfimid an mod√∫l <code>front_of_house</code> as a chomhad f√©in. Bain an
c√≥d taobh istigh de na l√∫ib√≠n√≠ chatach don mhod√∫l <code>front_of_house</code>, ag f√°g√°il amh√°in
an <code>mod front_of_house;</code> dearbh√∫, ionas go mbeidh an c√≥d ag <em>src/lib.rs</em>
l√©irithe i Liosta 7-21. Tabhair faoi deara nach dtioms√≥idh s√© seo go dt√≠ go gcruth√≥imid an
<em>src/front_of_house.rs</em> comhad i Liost√∫ 7-22.</p>
<Listing number="7-21" file-name="src/lib.rs" caption="Declaring the `front_of_house` module whose body will be in *src/front_of_house.rs*">
<pre><code class="language-rust ignore does_not_compile">mod front_of_house;

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}</code></pre>
</Listing>
<p>Ansin, cuir an c√≥d a bh√≠ sna l√∫ib√≠n√≠ cuartha isteach i gcomhad nua darb ainm
<em>src/front_of_house.rs</em>, mar a thaispe√°ntar i Liost√∫ 7-22. T√° a fhios ag an tiomsaitheoir breathn√∫
sa chomhad seo toisc gur th√°inig s√© trasna ar dhearbh√∫ an mhod√∫il sa fhr√©amh gcliathbhosca
leis an ainm <code>front_of_house</code>.</p>
<Listing number="7-22" file-name="src/front_of_house.rs" caption="Definitions inside the `front_of_house` module in *src/front_of_house.rs*">
<pre><code class="language-rust ignore">pub mod hosting {
    pub fn add_to_waitlist() {}
}</code></pre>
</Listing>
<p>Tabhair faoi deara nach g√° duit ach comhad a lucht√∫ ag baint √∫s√°ide as dearbh√∫ <code>mod</code> <em>aon uair</em> i do
crann mod√∫l. Nuair a bh√≠onn a fhios ag an tiomsaitheoir t√° an comhad mar chuid den tionscadal (agus t√° a fhios aige
√°it sa chrann mod√∫l ina bhfuil c√≥na√≠ ar an gc√≥d mar gheall ar an √°it ar chuir t√∫ an <code>mod</code>
r√°iteas), ba cheart go dtagra√≠onn comhaid eile i do thionscadal do ch√≥d an chomhaid luchtaithe
ag baint √∫s√°ide as cos√°n go dt√≠ an √°it a dearbha√≠odh √©, mar at√° cl√∫daithe sa <a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html">‚ÄúCos√°in le haghaidh Tagartha
chuig M√≠r i gCrann an Mhod√∫il‚Äù</a><!-- d√©an neamhaird de -->. I bhfocail eile,
Is <em>not</em> √© <code>mod</code> n√° oibr√≠ocht "cuir san √°ireamh" a d'fh√©adfadh a bheith feicthe agat i gceann eile
teangacha r√≠omhchl√°r√∫ch√°in.</p>
<p>Ansin, bainfimid an mod√∫l <code>hosting</code> as a chomhad f√©in. T√° an pr√≥iseas beag√°n
difri√∫il toisc go bhfuil <code>hosting</code> ina mhod√∫l linbh de <code>front_of_house</code>, n√≠ de na
mod√∫l fr√©imhe. Cuirfimid an comhad le haghaidh <code>hosting</code> in eolaire nua a bheidh
ainmnithe as a sinsir sa chrann mod√∫l, sa ch√°s seo <em>src/front_of_house</em>.</p>
<p>Chun t√∫s a chur le <code>hosting</code> a bhogadh, athra√≠onn muid <em>src/front_of_house.rs</em> go bhfuil iontu amh√°in
dearbh√∫ an mhod√∫il <code>hosting</code>:</p>
<Listing file-name="src/front_of_house.rs">
<pre><code class="language-rust ignore">pub mod hosting;</code></pre>
</Listing>
<p>Ansin crutha√≠mid eolaire <em>src/front_of_house</em> agus comhad <em>hosting.rs</em> chun
go bhfuil na sainmh√≠nithe a rinneadh sa mhod√∫l <code>hosting</code>:</p>
<Listing file-name="src/front_of_house/hosting.rs">
<pre><code class="language-rust ignore">pub fn add_to_waitlist() {}</code></pre>
</Listing>
<p>D√° gcuirfimid <em>hosting.rs</em> san eolaire <em>src</em> ina ionad sin, dh√©anfadh an tiomsaitheoir
b√≠ ag s√∫il go mbeidh an c√≥d <em>hosting.rs</em> i mod√∫l <code>hosting</code> dearbhaithe sa chliathbhosca
fr√©amh, agus nach ndearbha√≠tear √© mar leanbh den mhod√∫l `tosaigh_an t√≠. T√° an
rialacha tiomsaitheora maidir leis na comhaid le seice√°il c√© na mod√∫il a chialla√≠onn c√≥d an
meaitse√°lann eolair√≠ agus comhaid n√≠os dl√∫ithe le crann an mhod√∫il.</p>
<blockquote>
<h3 id="conair√≠-comhad-malartacha"><a class="header" href="#conair√≠-comhad-malartacha">Conair√≠ Comhad Malartacha</a></h3>
<p>Go dt√≠ seo t√° na conair√≠ comhaid is gn√°s√∫la a √∫s√°ideann an tiomsaitheoir Rust cl√∫daithe againn,
ach taca√≠onn Rust le cos√°n comhaid st√≠l n√≠os sine freisin. Le haghaidh mod√∫l ainmnithe
<code>front_of_house</code> dearbhaithe i bhfr√©amh an gcliathbhosca, lorg√≥idh an tiomsaitheoir an
c√≥d an mhod√∫il i:</p>
<ul>
<li><em>src/front_of_house.rs</em> (cad a chl√∫daigh muid)</li>
<li><em>src/front_of_house/mod.rs</em> (st√≠l n√≠os sine, cos√°n tacaithe f√≥s)</li>
</ul>
<p>I gc√°s mod√∫l darb ainm <code>hosting</code> is fomhod√∫l de <code>front_of_house</code> √©, an
lorg√≥idh tiomsaitheoir c√≥d an mhod√∫il i:</p>
<ul>
<li><em>src/front_of_house/hosting.rs</em> (cad a chl√∫daigh muid)</li>
<li><em>src/front_of_house/hosting/mod.rs</em> (st√≠l n√≠os sine, cos√°n tacaithe f√≥s)</li>
</ul>
<p>M√° √∫s√°ideann t√∫ an d√° st√≠l don mhod√∫l c√©anna, gheobhaidh t√∫ earr√°id tiomsaithe.
Is √©ard at√° i gceist le measc√°n den d√° st√≠l a √∫s√°id le haghaidh mod√∫il √©ags√∫la sa tionscadal c√©anna
ceadaithe, ach d'fh√©adfadh s√© a bheith mearbhall do dhaoine at√° ag seoladh do thionscadal.</p>
<p>Is √© an pr√≠omhbhunt√°iste a bhaineann leis an st√≠l a √∫s√°ideann comhaid darb ainm <em>mod.rs</em> n√° go bhfuil do
Is f√©idir go leor comhad darb ainm <em>mod.rs</em> a bheith ag an tionscadal, rud a chuireann mearbhall ort
nuair a bh√≠onn siad oscailte agat i d'eagarth√≥ir ag an am c√©anna.</p>
</blockquote>
<p>T√°imid tar √©is c√≥d gach mod√∫l a aistri√∫ go comhad ar leith, agus t√° crann an mhod√∫il f√≥s ann
mar an gc√©anna. Oibreoidh an fheidhm glaonna i <code>eat_at_restaurant</code> gan aon cheann
modhn√∫, c√© go bhfuil na sainmh√≠nithe ina gc√≥na√≠ i gcomhaid √©ags√∫la. seo
ligeann teicn√≠ocht duit mod√∫il a aistri√∫ go comhaid nua de r√©ir mar a fh√°sann siad i m√©id.</p>
<p>Tabhair faoi deara go bhfuil an <code>pub use crate::front_of_house::hosting</code> r√°iteas i
N√≠or athraigh <em>src/lib.rs</em> freisin, agus n√≠ bh√≠onn tionchar ar bith ag <code>use</code> ar na comhaid
a thiomsa√≠tear mar chuid den chliabh√°n. Dearbha√≠onn an eochairfhocal <code>mod</code> mod√∫il, agus Rust
Breathna√≠onn i gcomhad leis an ainm c√©anna leis an mod√∫l don ch√≥d a th√©ann isteach
an mod√∫l sin.</p>
<h2 id="achoimre-6"><a class="header" href="#achoimre-6">Achoimre</a></h2>
<p>Ligeann Rust duit pac√°iste a roinnt ina cliathbhosca√≠ iolracha agus cliathbhosca√≠ ina mod√∫il
is f√©idir leat tagairt a dh√©anamh d'earra√≠ at√° sainithe i mod√∫l amh√°in √≥ mhod√∫l eile. Is f√©idir leat a dh√©anamh
seo tr√≠ chos√°in ioml√°na n√≥ choibhneasta a shonr√∫. Is f√©idir na cos√°in seo a thabhairt isteach
raon feidhme le r√°iteas <code>use</code> ionas gur f√©idir leat cos√°n n√≠os giorra a √∫s√°id le haghaidh √∫s√°id√≠ iolracha
an mh√≠r sa raon feidhme sin. T√° c√≥d an mhod√∫il pr√≠obh√°ideach de r√©ir r√©amhshocraithe, ach is f√©idir leat a dh√©anamh
sainmh√≠nithe go poibl√≠ tr√≠d an eochairfhocal <code>pub</code> a chur leis.</p>
<p>Sa ch√©ad chaibidil eile, f√©achfaimid ar roinnt strucht√∫r sonra√≠ baili√∫ch√°in sa
leabharlann caighde√°nach ar f√©idir leat a √∫s√°id i do ch√≥d eagraithe go n√©ata.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baili√∫ch√°in-choitianta"><a class="header" href="#baili√∫ch√°in-choitianta">Baili√∫ch√°in Choitianta</a></h1>
<p>√Åir√≠tear i leabharlann chaighde√°nach Rust roinnt strucht√∫ir sonra√≠ an-√∫s√°ideacha ar a dtugtar
<em>baili√∫ch√°in</em>. Is ionann formh√≥r na gcine√°lacha sonra√≠ eile agus luach sonrach amh√°in, ach
is f√©idir luachanna iolracha a bheith sna baili√∫ch√°in. Murab ionann agus an eagar-t√≥gtha i agus tuple
cine√°lacha, na sonra√≠ a d√≠r√≠onn na baili√∫ch√°in seo orthu a st√≥r√°il ar an gcarn, rud a chialla√≠onn
n√≠ g√° m√©id na sonra√≠ a bheith ar eolas ag am tiomsaithe agus is f√©idir leis f√°s n√≥
Laghdaigh de r√©ir mar a ritheann an cl√°r. T√° cumais √©ags√∫la ag gach cine√°l baili√∫ch√°in
agus costais, agus roghnaigh ceann oiri√∫nach do do ch√°s reatha a
scil a fhorbr√≥idh t√∫ thar am. Sa chaibidil seo, pl√©ifimid tr√≠ cinn
baili√∫ch√°in a √∫s√°idtear go minic i gcl√°ir Rust:</p>
<ul>
<li>Ligeann <em>vector</em> duit l√≠on athraitheach luachanna a st√≥r√°il in aice lena ch√©ile.</li>
<li>Is baili√∫ch√°n carachtar √© <em>string</em>. T√° an cine√°l <code>String</code> luaite againn
roimhe seo, ach sa chaibidil seo beidh muid ag caint faoi go domhain.</li>
<li>Ligeann <em>hash map</em> duit luach a cheangal le heochair ar leith. T√° s√© a
cur i bhfeidhm ar leith an strucht√∫ir sonra√≠ n√≠os ginear√°lta ar a dtugtar <em>map</em>.</li>
</ul>
<p>Chun foghlaim faoi na cine√°lacha baili√∫ch√°in eile a chuireann an leabharlann chaighde√°nach ar f√°il,
f√©ach <a href="../std/collections/index.html">na doicim√©id</a>.</p>
<p>Pl√©ifimid conas veicteoir√≠, teaghr√°in agus l√©arsc√°ileanna hash a chruth√∫ agus a nuashonr√∫ freisin
mar a dh√©anann gach speisialta.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="liosta√≠-luachanna-a-st√≥r√°il-le-veicteoir√≠"><a class="header" href="#liosta√≠-luachanna-a-st√≥r√°il-le-veicteoir√≠">Liosta√≠ Luachanna a St√≥r√°il le Veicteoir√≠</a></h2>
<p>Is √© an ch√©ad chine√°l baili√∫ch√°in a bhreathn√≥imid air n√° <code>Vec&lt;T&gt;</code>, ar a dtugtar <em>veicteoir</em> freisin.
Ceada√≠onn veicteoir√≠ duit n√≠os m√≥ n√° luach amh√°in a st√≥r√°il i strucht√∫r sonra√≠ amh√°in a
cuireann s√© na luachanna go l√©ir in aice lena ch√©ile i gcuimhne. N√≠ f√©idir le veicteoir√≠ ach luachanna a st√≥r√°il
den chine√°l c√©anna. T√° siad √∫s√°ideach nuair a bh√≠onn liosta m√≠reanna agat, mar shampla an
l√≠nte t√©acs i gcomhad n√≥ praghsanna na n-earra√≠ i trala√≠ siopad√≥ireachta.</p>
<h3 id="veicteoir-nua-√°-chruth√∫"><a class="header" href="#veicteoir-nua-√°-chruth√∫">Veicteoir Nua √° Chruth√∫</a></h3>
<p>Chun veicteoir folamh nua a chruth√∫, tugaimid an fheidhm <code>Vec::new</code>, mar a thaispe√°ntar i
Liost√°il 8-1.</p>
<p><Listing number="8-1" caption="Ag cruth√∫ veicteoir nua, folamh chun luachanna den chine√°l `i32`"> a choinne√°il</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v: Vec&lt;i32&gt; = Vec::new();
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Tabhair faoi deara gur chuireamar n√≥ta cine√°il leis anseo. Toisc nach bhfuil muid ag cur isteach ar bith
luachanna isteach sa veicteoir seo, n√≠l a fhios ag Rust c√©n cine√°l eilimint√≠ at√° beartaithe againn
st√≥r. Is pointe t√°bhachtach √© seo. Cuirtear veicteoir√≠ i bhfeidhm ag baint √∫s√°ide as generics;
cl√∫d√≥imid conas generics a √∫s√°id le do chine√°lacha f√©in i gCaibidil 10. Go dt√≠ seo,
B√≠odh a fhios agat gur f√©idir cine√°l ar bith a choinne√°il sa chine√°l <code>Vec&lt;T&gt;</code> a shol√°thra√≠onn an ghn√°thleabharlann.
Nuair a chrutha√≠mid veicteoir chun cine√°l sonrach a shealbh√∫, is f√©idir linn an cine√°l laistigh a shonr√∫
l√∫ib√≠n√≠ uillinn. I Liost√∫ 8-1, t√° s√© r√°ite againn le Rust go bhfuil an <code>Vec&lt;T&gt;</code> in <code>v</code>
coinnigh gn√©ithe den chine√°l <code>i32</code>.</p>
<p>N√≠os minice, cruth√≥idh t√∫ <code>Vec&lt;T&gt;</code> le luachanna tosaigh agus d√©anfaidh Rust t√°tal
an cine√°l luach is mian leat a st√≥r√°il, mar sin is annamh a theasta√≠onn uait an cine√°l seo a dh√©anamh
n√≥ta. Sol√°thra√≠onn Rust an macra <code>vec!</code> go caoth√∫il, a chruth√≥idh a
veicteoir nua a shealbha√≠onn na luachanna a thugann t√∫ d√≥. Crutha√≠onn liost√∫ 8-2 ceann nua
<code>Vec&lt;i32&gt;</code> a shealbha√≠onn na luachanna <code>1</code>, <code>2</code>, agus <code>3</code>. Is √© an cine√°l sl√°nuimhir <code>i32</code>
mar sin √© an cine√°l sl√°nuimhir r√©amhshocraithe, mar a phl√©amar sa <a href="ch03-02-data-types.html#data-types">‚ÄúSonra√≠
Cine√°lacha‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt de Chaibidil 3.</p>
<Listing number="8-2" caption="Ag cruth√∫ veicteoir nua ina bhfuil luachanna">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v = vec![1, 2, 3];
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Toisc go bhfuil luachanna tosaigh <code>i32</code> tugtha againn, is f√©idir le Rust t√°tal a bhaint as an gcine√°l <code>v</code>
is <code>Vec&lt;i32&gt;</code>, agus n√≠ g√° an n√≥ta cine√°il. Ansin, f√©achfaimid conas
chun veicteoir a mhodhn√∫.</p>
<h3 id="veicteoir-√°-nuashonr√∫"><a class="header" href="#veicteoir-√°-nuashonr√∫">Veicteoir √° nuashonr√∫</a></h3>
<p>Chun veicteoir a chruth√∫ agus ansin eilimint√≠ a chur leis, is f√©idir linn an modh <code>push</code> a √∫s√°id,
mar a thaispe√°ntar i Liosta 8-3.</p>
<Listing number="8-3" caption="Ag baint √∫s√°ide as an modh `push` chun luachanna a chur le veicteoir">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut v = Vec::new();

    v.push(5);
    v.push(6);
    v.push(7);
    v.push(8);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Mar aon le haon athr√≥g, m√°s mian linn a bheith in ann a luach a athr√∫, n√≠ m√≥r d√∫inn
√© a dh√©anamh mutable ag baint √∫s√°ide as an eochairfhocal <code>mut</code>, mar a pl√©adh i gCaibidil 3. Na huimhreacha
a chuirimid taobh istigh go bhfuil gach cine√°l <code>i32</code>, agus Rust t√°tal a bhaint as seo √≥ na sonra√≠, mar sin
n√≠l an n√≥ta <code>Vec&lt;i32&gt;</code> ag teast√°il uainn.</p>
<h3 id="l√©amh-eilimint√≠-veicteoir√≠"><a class="header" href="#l√©amh-eilimint√≠-veicteoir√≠">L√©amh Eilimint√≠ Veicteoir√≠</a></h3>
<p>T√° dh√° bhealach ann chun tagairt a dh√©anamh do luach at√° st√≥r√°ilte i veicteoir: tr√≠ inn√©acs√∫ n√≥ tr√≠
ag baint √∫s√°ide as an modh <code>get</code>. Sna sampla√≠ seo a leanas, t√°imid tar √©is an√≥t√°il a dh√©anamh ar na cine√°lacha
na luachanna a thugtar ar ais √≥ na feidhmeanna seo ar mhaithe le soil√©ireacht bhreise.</p>
<p>Taispe√°nann liosta 8-4 an d√° mhodh chun luach a rochtain i veicteoir, le hinn√©acs√∫
comhr√©ir agus an modh <code>get</code>.</p>
<Listing number="8-4" caption="Ag √∫s√°id comhr√©ir inn√©acsaithe agus ag baint √∫s√°ide as an modh `get` chun rochtain a fh√°il ar mh√≠r i veicteoir">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v = vec![1, 2, 3, 4, 5];

    let third: &amp;i32 = &amp;v[2];
    println!("The third element is {third}");

    let third: Option&lt;&amp;i32&gt; = v.get(2);
    match third {
        Some(third) =&gt; println!("The third element is {third}"),
        None =&gt; println!("There is no third element."),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Tabhair faoi deara roinnt sonra√≠ anseo. Bainimid √∫s√°id as an luach inn√©acs de <code>2</code> chun an tr√≠√∫ eilimint a fh√°il
toisc go bhfuil veicteoir√≠ inn√©acsaithe de r√©ir uimhreacha, ag tos√∫ ag nialas. Ag baint √∫s√°ide as <code>&amp;</code> agus <code>[]</code>
tugann s√© tagairt d√∫inn don eilimint ag an luach inn√©acs. Nuair a √∫s√°idimid an <code>get</code>
modh agus an t-inn√©acs a rith mar arg√≥int, a fh√°il againn <code>Option&lt;&amp;T&gt;</code> gur f√©idir linn
√∫s√°id le <code>match</code>.</p>
<p>Sol√°thra√≠onn Rust an d√° bhealach seo chun tagairt a dh√©anamh d'eilimint ionas gur f√©idir leat a roghn√∫ conas a dh√©antar an
iompra√≠onn an cl√°r nuair a dh√©anann t√∫ iarracht luach inn√©acs a √∫s√°id lasmuigh de raon na
eilimint√≠ at√° ann cheana f√©in. Mar shampla, feicimis cad a tharla√≠onn nuair a bh√≠onn veicteoir againn
c√∫ig eilimint agus ansin d√©anaimid iarracht teacht ar eilimint ag inn√©acs 100 le gach ceann d√≠obh
teicn√≠c, mar a thaispe√°ntar i Liosta 8-5.</p>
<Listing number="8-5" caption="Ag iarraidh an eilimint ag inn√©acs 100 a rochtain i veicteoir ina bhfuil c√∫ig eilimint">
<pre><pre class="playground"><code class="language-rust should_panic panics"><span class="boring">fn main() {
</span>    let v = vec![1, 2, 3, 4, 5];

    let does_not_exist = &amp;v[100];
    let does_not_exist = v.get(100);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Nuair a rithfimid an c√≥d seo, beidh an cl√°r i scaoll mar gheall ar an gc√©ad mhodh <code>[]</code>
toisc go nd√©anann s√© tagairt d'eilimint nach bhfuil ann. T√° an modh seo a √∫s√°idtear is fearr nuair a
ag iarraidh do r√≠omhchl√°r tuairte√°la m√° t√° iarracht rochtain a fh√°il ar eilimint thar an
deireadh an veicteora.</p>
<p>Nuair a th√©ann an modh <code>get</code> thar inn√©acs at√° lasmuigh den veicteoir, filleann s√©
<code>None</code> gan scaoll. D‚Äô√∫s√°idfe√° an modh seo m√° t√° rochtain agat ar eilimint
thar raon an veicteora d'fh√©adfadh tarl√∫ uaireanta faoin ngn√°th
imthosca. Beidh loighic ag do ch√≥d ansin chun ceachtar acu a l√°imhse√°il
<code>Some(&amp;element)</code> n√≥ <code>None</code>, mar a pl√©adh i gCaibidil 6. Mar shampla, an t-inn√©acs
d'fh√©adfadh a bheith ag teacht √≥ dhuine ag dul isteach uimhir. M√° t√° siad isteach de thaisme a
uimhir at√° r√≥-mh√≥r agus faigheann an cl√°r luach <code>None</code>, d'fh√©adf√° a r√° leis an
√∫s√°ideoir c√© mh√©ad m√≠reanna at√° sa veicteoir reatha agus tabhair seans eile d√≥ibh
cuir isteach luach bail√≠. Bheadh ‚Äã‚Äãs√© sin n√≠os √©asca le h√∫s√°id n√° an cl√°r a thuar
mar gheall ar typo!</p>
<p>Nuair a bh√≠onn tagairt bhail√≠ ag an gcl√°r, forfheidhm√≠onn an seice√°la√≠ iasachta√≠ an
rialacha √∫in√©ireachta agus iasachta√≠ochta (cl√∫daithe i gCaibidil 4) chun an tagairt seo a √°irithi√∫
agus aon tagairt√≠ eile d'inneachar an veicteora f√≥s bail√≠. Athghairm an
riail a shonra√≠onn nach f√©idir leat tagairt√≠ in-sh√≥-sh√≥-aistrithe a bheith agat sa ch√©anna
sc√≥ip. T√° feidhm ag an riail sin i Liost√∫ 8-6, √°it a bhfuil tagairt do-luaineach againn
leis an gc√©ad eilimint i veicteoir agus d√©an iarracht eilimint a chur leis an deireadh. seo
N√≠ oibreoidh an cl√°r m√° dh√©anaimid iarracht tagairt a dh√©anamh don eilimint sin n√≠os d√©ana√≠ sa
feidhm.</p>
<Listing number="8-6" caption="Attempting to add an element to a vector while holding a reference to an item">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let mut v = vec![1, 2, 3, 4, 5];

    let first = &amp;v[0];

    v.push(6);

    println!("The first element is: {first}");
<span class="boring">}</span></code></pre>
</Listing>
<p>Beidh an earr√°id seo mar thoradh ar an gc√≥d seo a thioms√∫:</p>
<pre><code class="language-console">$ cargo run
   Compiling collections v0.1.0 (file:///projects/collections)
error[E0502]: cannot borrow `v` as mutable because it is also borrowed as immutable
 --&gt; src/main.rs:6:5
  |
4 |     let first = &amp;v[0];
  |                  - immutable borrow occurs here
5 |
6 |     v.push(6);
  |     ^^^^^^^^^ mutable borrow occurs here
7 |
8 |     println!("The first element is: {first}");
  |                                     ------- immutable borrow later used here

For more information about this error, try `rustc --explain E0502`.
error: could not compile `collections` (bin "collections") due to 1 previous error
</code></pre>
<p>Seans go n-oibreodh an c√≥d i Liost√∫ 8-6: c√©n f√°th ar cheart tagairt a dh√©anamh
don ch√©ad eilimint c√∫ram faoi athruithe ag deireadh an veicteora? T√° an earr√°id seo
mar gheall ar an gcaoi a n-oibr√≠onn veicteoir√≠: toisc go gcuireann veicteoir√≠ na luachanna in aice lena ch√©ile
mar chuimhne, d'fh√©adfadh go mbeadh g√° le heilimint nua a chur le deireadh an veicteora
cuimhne nua a leithdh√°ileadh agus na gn√©ithe d'aois a ch√≥ipe√°il chuig an sp√°s nua, m√°s ann
n√≠l d√≥thain sp√°is ann chun na heilimint√≠ go l√©ir a chur in aice lena ch√©ile san √°it a bhfuil an veicteoir
at√° st√≥r√°ilte faoi l√°thair. Sa ch√°s sin, bheadh ‚Äã‚Äãan tagairt don ch√©ad eilimint
ag tagairt do chuimhne dealraithe. Cuireann na rialacha iasachta√≠ochta cosc ‚Äã‚Äãar chl√°ir √≥
ag cr√≠ochn√∫ sa ch√°s sin.</p>
<blockquote>
<p>N√≥ta: Le haghaidh tuilleadh eolais ar shonra√≠ cur chun feidhme an chine√°il <code>Vec&lt;T&gt;</code>, f√©ach <a href="../nomicon/vec/vec.html">‚ÄúThe
Rustonomicon‚Äù</a>.</p>
</blockquote>
<h3 id="ag-atriall-thar-na-luachanna-i-veicteoir"><a class="header" href="#ag-atriall-thar-na-luachanna-i-veicteoir">Ag Atriall Thar na Luachanna i Veicteoir</a></h3>
<p>Chun rochtain a fh√°il ar gach eilimint i veicteoir ar a seal, dh√©anfaimis athr√° tr√≠ gach ceann de na
eilimint√≠ seachas inn√©acsanna a √∫s√°id chun rochtain a fh√°il ar cheann amh√°in ag an am. L√©ir√≠onn liost√∫ 8-7 conas
l√∫b <code>for</code> a √∫s√°id chun tagairt√≠ do-athlasta a fh√°il do gach eilimint i veicteoir de
luachanna <code>i32</code> agus priont√°il iad.</p>
<Listing number="8-7" caption="Gach eilimint a phriont√°il i veicteoir tr√≠ na heilimint√≠ a atriall ag baint √∫s√°ide as l√∫b `for`">
<pre><code class="language-meirge"># fn main() {
    let v = vec![100, 32, 57];
    for i in &amp;v {
        println!("{i}");
    }
# }
</code></pre>
</Listing>
<p>Is f√©idir linn athr√° a dh√©anamh freisin ar thagairt√≠ mutable do gach eilimint i veicteoir mutable
chun athruithe a dh√©anamh ar na heilimint√≠ go l√©ir. An l√∫b <code>for</code> i Liost√∫ 8-8
cuirfidh s√© <code>50</code> le gach eilimint.</p>
<Listing number="8-8" caption="Iterating over mutable references to elements in a vector">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut v = vec![100, 32, 57];
    for i in &amp;mut v {
        *i += 50;
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Chun an luach a thagra√≠onn an tagairt mutable a athr√∫, n√≠ m√≥r d√∫inn √∫s√°id a bhaint as an
<code>*</code> oibreoir d√≠reference chun an luach in <code>i</code> a bhaint amach sular f√©idir linn an <code>+=</code> a √∫s√°id
oibreoir. Labhr√≥imid n√≠os m√≥ faoin oibreoir d√≠reagartha san <a href="ch15-02-deref.html#following-the-pointer-to-the-value-with-the-dereference-operator">‚ÄúTar √©is an
Pointeoir don Luach leis an Oibritheoir Dereference‚Äù</a><!-- neamhaird -->
alt de Chaibidil 15 .</p>
<p>T√° s√© s√°bh√°ilte atriallta thar veicteoir, b√≠odh s√© neamh-inchurtha n√≥ comh-athshol√°thair, mar gheall ar an
rialacha seice√°laithe iasachta√≠. M√° rinneamar iarracht m√≠reanna a chur isteach n√≥ a bhaint sa <code>for</code>
comhlachta√≠ l√∫b i Liost√∫ 8-7 agus Liost√∫ 8-8, gheobhaimid earr√°id tiomsaithe
cos√∫il leis an gceann a fuair muid leis an gc√≥d i Liosta 8-6. An tagairt do na
veicteoir a choinn√≠onn an l√∫b <code>for</code> cosc ‚Äã‚Äãar mhodhn√∫ comhuaineach ar an
veicteoir ioml√°n.</p>
<h3 id="enum-a-√∫s√°id-chun-ilchine√°lacha-a-st√≥r√°il"><a class="header" href="#enum-a-√∫s√°id-chun-ilchine√°lacha-a-st√≥r√°il">Enum a √∫s√°id chun Ilchine√°lacha a St√≥r√°il</a></h3>
<p>N√≠ f√©idir le veicteoir√≠ ach luachanna den chine√°l c√©anna a st√≥r√°il. Is f√©idir √© seo a
deacair ; t√° c√°sanna √∫s√°ide cinnte le haghaidh g√° a st√≥r√°il liosta de
m√≠reanna de chine√°lacha √©ags√∫la. Ar √°mhara√≠ an tsaoil, sainmh√≠n√≠tear na leaganacha de enum
faoin gcine√°l enum c√©anna, mar sin nuair a theasta√≠onn cine√°l amh√°in uainn chun gn√©ithe de
cine√°lacha √©ags√∫la, is f√©idir linn enum a shaini√∫ agus a √∫s√°id!</p>
<p>Mar shampla, abair go dteasta√≠onn uainn luachanna a fh√°il as a ch√©ile i scarbhileog ina bhfuil
t√° sl√°nuimhreacha i gcuid de na col√∫in sa r√≥, roinnt uimhreacha sn√°mhphointe,
agus roinnt teaghr√°in. Is f√©idir linn enum a shaini√∫ a mbeidh na leaganacha √©ags√∫la acu
cine√°lacha luacha, agus measfar an cine√°l c√©anna a bheith ar na leaganacha uile enum: sin
den enum. Ansin is f√©idir linn veicteoir a chruth√∫ chun an enum sin a shealbh√∫ agus mar sin, ar deireadh thiar,
shealbh√∫ cine√°lacha √©ags√∫la. T√° s√© seo l√©irithe againn i Liost√∫ 8-9.</p>
<Listing number="8-9" caption="Defining an `enum` to store values of different types in one vector">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    enum SpreadsheetCell {
        Int(i32),
        Float(f64),
        Text(String),
    }

    let row = vec![
        SpreadsheetCell::Int(3),
        SpreadsheetCell::Text(String::from("blue")),
        SpreadsheetCell::Float(10.12),
    ];
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Caithfidh Rust a fhios cad iad na cine√°lacha a bheidh sa veicteoir ag am tiomsaithe ionas go mbeidh a fhios aige
go d√≠reach c√© mh√©ad cuimhne ar an gcarn a bheidh ag teast√°il chun gach eilimint a st√≥r√°il. muid
N√≠ m√≥r a bheith soil√©ir freisin faoi na cine√°lacha a cheada√≠tear sa veicteoir seo. M√° meirge
ceada√≠tear veicteoir a shealbh√∫ de chine√°l ar bith, bheadh ‚Äã‚Äãseans ann go mbeadh ceann amh√°in n√≥ n√≠os m√≥ de
dh√©anfadh na cine√°lacha earr√°id√≠ leis na hoibr√≠ochta√≠ a dh√©antar ar ghn√©ithe de
an veicteoir. Ag baint √∫s√°ide as enum m√≥ide slonn <code>match</code> cialla√≠onn s√© sin go gcinnteoidh Rust
ag an am tiomsaithe a l√°imhse√°iltear gach c√°s f√©ideartha, mar a pl√©adh i gCaibidil 6.</p>
<p>Mura bhfuil a fhios agat an tsraith uileghabh√°lach cine√°lacha a gheobhaidh cl√°r ag am rite
st√≥r√°il i veicteoir, n√≠ oibreoidh an teicn√≠c enum. Ina √°it sin, is f√©idir leat √∫s√°id a bhaint as trait
r√©ad, a chl√∫d√≥imid i gCaibidil 18.</p>
<p>Anois go bhfuil roinnt de na beala√≠ is coitianta chun veicteoir√≠ a √∫s√°id pl√©ite againn, b√≠ cinnte
athbhreithni√∫ a dh√©anamh ar <a href="../std/vec/struct.Vec.html">an doicim√©ad√∫ API</a><!-- neamhaird --> do gach ceann de na go leor
modhanna √∫s√°ideacha arna saini√∫ ar <code>Vec&lt;T&gt;</code> ag an leabharlann chaighde√°nach. Mar shampla, i
Chomh maith le <code>push</code>, baintear agus cuireann modh <code>pop</code> an eilimint dheireanach ar ais.</p>
<h3 id="m√°-thiteann-veicteoir-titeann-a-eilimint√≠"><a class="header" href="#m√°-thiteann-veicteoir-titeann-a-eilimint√≠">M√° thiteann Veicteoir Titeann a Eilimint√≠</a></h3>
<p>Cos√∫il le haon <code>struct</code> eile, saortar veicteoir nuair a th√©ann s√© as raon feidhme, mar
at√° an√≥t√°ilte i Liost√∫ 8-10.</p>
<Listing number="8-10" caption="Showing where the vector and its elements are dropped">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    {
        let v = vec![1, 2, 3, 4];

        // do stuff with v
    } // &lt;- v goes out of scope and is freed here
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Nuair a thiteann an veicteoir, scaoiltear a bhfuil ann go l√©ir freisin, rud a chialla√≠onn an
d√©anfar sl√°nuimhreacha at√° aige a ghlanadh suas. Cinnt√≠onn an seice√°la√≠ iasachta√≠ go bhfuil aon
n√≠ √∫s√°idtear tagairt√≠ d'inneachar veicteora ach amh√°in nuair a bh√≠onn an veicteoir f√©in
bail√≠.</p>
<p>Bogfaimid ar aghaidh go dt√≠ an ch√©ad chine√°l baili√∫ch√°in eile: <code>String</code>!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="t√©acs-ionch√≥daithe-utf-8-a-st√≥r√°il-le-teaghr√°in"><a class="header" href="#t√©acs-ionch√≥daithe-utf-8-a-st√≥r√°il-le-teaghr√°in">T√©acs Ionch√≥daithe UTF-8 a St√≥r√°il le Teaghr√°in</a></h2>
<p>Labhair muid faoi teaghr√°in i gCaibidil 4, ach f√©achfaimid orthu n√≠os doimhne anois.
Is minic a th√©ann Rustaceans nua i bhfost√∫ ar theaghr√°in le haghaidh measc√°n de thr√≠
c√∫iseanna: claonadh Rust chun earr√°id√≠ f√©ideartha a nochtadh, agus teaghr√°in n√≠os m√≥
strucht√∫r sonra√≠ casta n√° go dtugann go leor r√≠omhchl√°raitheoir√≠ creidi√∫int d√≥ibh as, agus
UTF-8. Tagann na facht√≥ir√≠ seo le ch√©ile ar bhealach a d‚Äôfh√©adfadh a bheith deacair nuair a bh√≠onn t√∫
ag teacht √≥ theangacha r√≠omhchl√°r√∫ch√°in eile.</p>
<p>Pl√©imid teaghr√°in i gcomhth√©acs baili√∫ch√°in toisc go bhfuil teaghr√°in
curtha i bhfeidhm mar bhaili√∫ch√°n beart, chomh maith le roinnt modhanna √∫s√°ideacha a shol√°thar
feidhmi√∫lacht nuair a l√©irmh√≠n√≠tear na bearta sin mar th√©acs. Sa chuid seo, d√©anfaimid
labhairt faoi na hoibr√≠ochta√≠ ar <code>String</code> at√° ag gach cine√°l baili√∫ch√°in, mar shampla
ag cruth√∫, ag nuashonr√∫, agus ag l√©amh. D√©anfaimid pl√© freisin ar na beala√≠ ina bhfuil <code>String</code>
difri√∫il √≥ na baili√∫ch√°in eile, is √© sin an chaoi a nd√©antar inn√©acs√∫ i <code>String</code>
casta ag na difr√≠ochta√≠ idir conas a dh√©anann daoine agus r√≠omhair√≠ l√©irmh√≠ni√∫
Sonra√≠ <code>String</code>.</p>
<h3 id="cad-is-teaghr√°n-ann"><a class="header" href="#cad-is-teaghr√°n-ann">Cad is Teaghr√°n ann?</a></h3>
<p>D√©anfaimid sainmh√≠ni√∫ ar dt√∫s cad at√° i gceist againn leis an t√©arma <em>string</em>. N√≠l ach sreang amh√°in ag meirge
cl√≥scr√≠obh sa chro√≠theanga, is √© sin an sreangshlis <code>str</code> a fheictear go hiond√∫il
san fhoirm a fuarthas ar iasacht <code>&amp;str</code>. I gCaibidil 4, labhair muid faoi <em>string slices</em>,
at√° ina thagairt√≠ do roinnt sonra√≠ teaghr√°n ionch√≥daithe UTF-8 at√° st√≥r√°ilte in √°it eile. Teaghr√°n
St√≥r√°iltear litreacha, mar shampla, i nd√©n√°rtha an chl√°ir agus mar sin de
slisn√≠ teaghr√°n.</p>
<p>An cine√°l <code>String</code>, a shol√°thra√≠onn leabharlann caighde√°nach Rust seachas
c√≥daithe sa teanga l√°rnach, is growable, mutable, √∫in√©ireacht, UTF-8 ionch√≥daithe
cine√°l teaghr√°n. Nuair a thagra√≠onn Rustaceans do "teaghr√°in" i Rust, d'fh√©adfadh siad a bheith
ag tagairt do na cine√°lacha <code>String</code> n√≥ do na cine√°lacha sreang√°n <code>&amp;str</code>, n√≠ hamh√°in ceann amh√°in
de na cine√°lacha sin. C√© go mbaineann an chuid seo den chuid is m√≥ le <code>String</code>, t√° an d√° chine√°l
a √∫s√°idtear go m√≥r i leabharlann caighde√°nach Rust, agus 'Teaghr√°n` agus slisn√≠ sreang araon
at√° ionch√≥daithe UTF-8.</p>
<h3 id="teaghr√°n-nua-√°-chruth√∫"><a class="header" href="#teaghr√°n-nua-√°-chruth√∫">Teaghr√°n Nua √° Chruth√∫</a></h3>
<p>T√° go leor de na hoibr√≠ochta√≠ c√©anna at√° ar f√°il le <code>Vec&lt;T&gt;</code> ar f√°il le <code>String</code>
chomh maith toisc go gcuirtear <code>String</code> i bhfeidhm i nd√°ir√≠re mar chumhdach timpeall veicteoir
bearta le roinnt r√°tha√≠ochta√≠ breise, srianta, agus cumais. Sampla
d'fheidhm a oibr√≠onn ar an mbealach c√©anna le <code>Vec&lt;T&gt;</code> agus is √© <code>String</code> an <code>new</code>
feidhm chun sampla a chruth√∫, a thaispe√°ntar i Liost√∫ 8-11.</p>
<Listing number="8-11" caption="Creating a new, empty `String`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s = String::new();
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Crutha√≠onn an l√≠ne seo teaghr√°n nua, folamh ar a dtugtar <code>s</code>, ar f√©idir linn a lucht√∫ isteach ansin
sonra√≠. Go minic, beidh roinnt sonra√≠ tosaigh againn agus ba mhaith linn t√∫s a chur leo
teaghr√°n. Chuige sin, √∫s√°idimid an modh <code>to_string</code>, at√° ar f√°il ar aon chine√°l
a chuireann an trait <code>Display</code> i bhfeidhm, mar a dh√©anann literals teaghr√°n. Liost√°il 8-12 se√≥nna
dh√° shampla.</p>
<Listing number="8-12" caption="Using the `to_string` method to create a `String` from a string literal">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let data = "initial contents";

    let s = data.to_string();

    // the method also works on a literal directly:
    let s = "initial contents".to_string();
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Crutha√≠onn an c√≥d seo teaghr√°n ina bhfuil <code>initial contents</code>.</p>
<p>Is f√©idir linn an fheidhm <code>String::from</code> a √∫s√°id freisin chun <code>String</code> a chruth√∫ as t√©ad
litri√∫il. T√° an c√≥d i Liost√∫ 8-13 comhionann leis an gc√≥d i Liost√∫ 8-12
a √∫s√°ideann <code>to_string</code>.</p>
<Listing number="8-13" caption="Ag baint √∫s√°ide as an bhfeidhm `String::from` chun `String` a chruth√∫ as teaghr√°n litri√∫il">
<pre><code class="language-meirge"># fn main() {
    let s = String::from("initial contents");
# }
</code></pre>
</Listing>
<p>Toisc go n-√∫s√°idtear teaghr√°in le haghaidh an oiread sin ruda√≠, is f√©idir linn go leor cine√°lacha √©ags√∫la a √∫s√°id
APIs le haghaidh teaghr√°in, ag sol√°thar d√∫inn go leor roghanna. Is f√©idir le cuid acu cos√∫il
iomarcach, ach t√° a n-√°it acu go l√©ir! Sa ch√°s seo, <code>String::from</code> agus
<code>to_string</code> d√©an an rud c√©anna, mar sin c√©n ceann a roghna√≠onn t√∫ is √°bhar do st√≠l agus
inl√©iteacht.</p>
<p>Cuimhnigh go bhfuil teaghr√°in ionch√≥daithe UTF-8, ionas gur f√©idir linn a chur san √°ireamh aon ionch√≥daithe i gceart
sonra√≠ iontu, mar a thaispe√°ntar i Liosta 8-14.</p>
<Listing number="8-14" caption="Storing greetings in different languages in strings">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let hello = String::from("ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑŸäŸÉŸÖ");
    let hello = String::from("Dobr√Ω den");
    let hello = String::from("Hello");
    let hello = String::from("◊©◊ú◊ï◊ù");
    let hello = String::from("‡§®‡§Æ‡§∏‡•ç‡§§‡•á");
    let hello = String::from("„Åì„Çì„Å´„Å°„ÅØ");
    let hello = String::from("ÏïàÎÖïÌïòÏÑ∏Ïöî");
    let hello = String::from("‰Ω†Â•Ω");
    let hello = String::from("Ol√°");
    let hello = String::from("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ");
    let hello = String::from("Hola");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is luachanna <code>String</code> bail√≠ iad seo go l√©ir.</p>
<h3 id="teaghr√°n-√°-nuashonr√∫"><a class="header" href="#teaghr√°n-√°-nuashonr√∫">Teaghr√°n √° nuashonr√∫</a></h3>
<p>Is f√©idir le <code>String</code> f√°s i m√©id agus f√©adann a bhfuil ann athr√∫, d√≠reach mar a bh√≠onn san √°bhar
de <code>Vec&lt;T&gt;</code>, m√° bhr√∫nn t√∫ tuilleadh sonra√≠ isteach ann. Ina theannta sin, is f√©idir leat go caoth√∫il
√∫s√°id an t-oibreoir <code>+</code> n√≥ an macra <code>format!</code> chun luachanna <code>String</code> a chomhcheangal.</p>
<h4 id="ag-gabh√°il-le-teaghr√°n-le-push_str-agus-push"><a class="header" href="#ag-gabh√°il-le-teaghr√°n-le-push_str-agus-push">Ag gabh√°il le Teaghr√°n le <code>push_str</code> agus <code>push</code></a></h4>
<p>Is f√©idir linn <code>String</code> a fh√°s tr√≠d an modh <code>push_str</code> a √∫s√°id chun sreang√°n a cheangal,
mar a l√©ir√≠tear i Liosta 8-15.</p>
<Listing number="8-15" caption="Appending a string slice to a `String` using the `push_str` method">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s = String::from("foo");
    s.push_str("bar");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Tar √©is an d√° l√≠ne seo, beidh <code>foobar</code> i <code>s</code>. Glacann an modh <code>push_str</code> a
slisne teaghr√°n mar n√≠ g√° go dteasta√≠onn uainn √∫in√©ireacht a ghlacadh ar an
paraim√©adar. Mar shampla, sa ch√≥d i Liost√∫ 8-16, ba mhaith linn a bheith in ann √∫s√°id a bhaint as
<code>s2</code> tar √©is a bhfuil ann a chur i gceangal le <code>s1</code>.</p>
<Listing number="8-16" caption="Using a string slice after appending its contents to a `String`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s1 = String::from("foo");
    let s2 = "bar";
    s1.push_str(s2);
    println!("s2 is {s2}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>D√° nglacfadh an modh <code>push_str</code> √∫in√©ireacht ar <code>s2</code>, n√≠ bheimis in ann priont√°il
a luach ar an l√≠ne dheireanach. Mar sin f√©in, oibr√≠onn an c√≥d seo mar a mbeimis ag s√∫il!</p>
<p>Glacann an modh <code>push</code> carachtar amh√°in mar pharaim√©adar agus cuireann s√© leis an
<code>String</code>. Cuireann liost√∫ 8-17 an litir <em>l</em> le <code>String</code> ag baint √∫s√°ide as an <code>push</code>
modh.</p>
<Listing number="8-17" caption="Adding one character to a `String` value using `push`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut s = String::from("lo");
    s.push('l');
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Mar thoradh air sin, beidh <code>lol</code> i <code>s</code>.</p>
<h4 id="comhghaol√∫-leis-an-oibreoir--n√≥-an-format-macra"><a class="header" href="#comhghaol√∫-leis-an-oibreoir--n√≥-an-format-macra">Comhghaol√∫ leis an Oibreoir <code>+</code> n√≥ an <code>format!</code> Macra</a></h4>
<p>Go minic, beidh t√∫ ag iarraidh dh√° theaghr√°n at√° ann cheana f√©in a chur le ch√©ile. Bealach amh√°in chun √© sin a dh√©anamh n√° √∫s√°id a bhaint as
an t-oibreoir <code>+</code>, mar a thaispe√°ntar i Liost√∫ 8-18.</p>
<Listing number="8-18" caption="Using the `+` operator to combine two `String` values into a new `String` value">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s1 = String::from("Hello, ");
    let s2 = String::from("world!");
    let s3 = s1 + &amp;s2; // note s1 has been moved here and can no longer be used
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Beidh <code>Hello, world!</code> sa teaghr√°n <code>s3</code>. Is √© an ch√∫is <code>s1</code> a thuilleadh
bail√≠ tar √©is an Chomh maith, agus an ch√∫is a √∫s√°id againn tagairt do <code>s2</code>, t√° a dh√©anamh
le s√≠ni√∫ an mhodha a thugtar air nuair a √∫s√°idimid an t-oibreoir <code>+</code>.
√ös√°ideann an t-oibreoir <code>+</code> an modh <code>add</code>, a bhfuil cuma rud √©igin ar a sh√≠ni√∫
seo:</p>
<pre><code class="language-rust ignore">fn add(self, s: &amp;str) -&gt; String {</code></pre>
<p>Sa leabharlann chaighde√°nach, feicfidh t√∫ 'cuir' sainithe ag baint √∫s√°ide as cine√°lacha agus gaolmhara
cine√°lacha. Anseo, t√° cine√°lacha nithi√∫la curtha ina n-ionad againn, agus is √© sin a tharla√≠onn nuair a dh√©anaimid
glaoigh ar an modh seo le luachanna <code>String</code>. Pl√©ifimid c√∫rsa√≠ cine√°lacha i gCaibidil 10.
Tugann an s√≠ni√∫ seo na leideanna a theasta√≠onn uainn chun tuiscint a fh√°il ar na ruda√≠ casta
p√≠osa√≠ den oibreoir <code>+</code>.</p>
<p>Ar dt√∫s, t√° <code>&amp;</code> ag <code>s2</code>, rud a chialla√≠onn go bhfuil muid ag cur <em>reference</em> den dara ceann
teaghr√°n go dt√≠ an ch√©ad teaghr√°n. T√° s√© seo mar gheall ar an bparaim√©adar <code>s</code> sa <code>add</code>
feidhm: n√≠ f√©idir linn ach <code>&amp;str</code> a chur le <code>String</code>; n√≠ f√©idir linn dh√° <code>String</code> a chur leis
luachanna le ch√©ile. Ach fan - is √© an cine√°l <code>&amp;s2</code> n√° <code>&amp;String</code>, n√≠ <code>&amp;str</code>, mar
sonraithe sa dara paraim√©adar le <code>add</code> leis. Mar sin c√©n f√°th a gcuirtear Liost√∫ 8-18 le ch√©ile?</p>
<p>Is √© an f√°th go bhfuilimid in ann <code>&amp;s2</code> a √∫s√°id sa ghlao chun <code>add</code> n√° go bhfuil an tiomsaitheoir
an f√©idir an arg√≥int <code>&amp;String</code> a <em>chomh√©igean</em> go <code>&amp;str</code>. Nuair a thugaimid an <code>add</code>
modh, √∫s√°ideann Rust comh√©igean <em>deref</em>, a thionta√≠onn anseo <code>&amp;s2</code> go <code>&amp;s2[..]</code>.
D√©anfaimid pl√© n√≠os doimhne ar chomh√©igean deref i gCaibidil 15. Toisc go nd√©anann <code>add</code>
gan √∫in√©ireacht a ghlacadh ar an bparaim√©adar <code>s</code>, beidh <code>s2</code> f√≥s ina <code>String</code> bail√≠
tar √©is na hoibr√≠ochta seo.</p>
<p>Ar an dara dul s√≠os, is f√©idir linn a fheice√°il sa s√≠ni√∫ go nglacann <code>add</code> √∫in√©ireacht ar <code>self</code>
toisc go bhfuil <code>&amp;</code> ag <code>self</code>. Cialla√≠onn s√© seo go mbeidh <code>s1</code> i Liosta 8-18
bhog s√© isteach sa ghlao <code>add</code> agus n√≠ bheidh s√© bail√≠ ina dhiaidh sin. Mar sin, c√© go
Breathna√≠onn <code>let s3 = s1 + &amp;s2;</code> go nd√©anfaidh s√© an d√° theaghr√°n a ch√≥ipe√°il agus ceann nua a chruth√∫,
glacann an r√°iteas seo √∫in√©ireacht ar <code>s1</code>, cuireann c√≥ip den √°bhar leis
de <code>s2</code>, agus ansin filleann √∫in√©ireacht an toraidh. I bhfocail eile, t√° s√©
cos√∫il go bhfuil s√© ag d√©anamh go leor c√≥ipeanna, ach n√≠l; t√° an cur i bhfeidhm n√≠os m√≥
√©ifeachtach n√° c√≥ipe√°il.</p>
<p>M√°s g√° d√∫inn a concatenate teaghr√°in iolrach, iompar an oibreora <code>+</code>
√©ir√≠onn anacair:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s1 = String::from("tic");
    let s2 = String::from("tac");
    let s3 = String::from("toe");

    let s = s1 + "-" + &amp;s2 + "-" + &amp;s3;
<span class="boring">}</span></code></pre></pre>
<p>Ag an bpointe seo, beidh <code>s</code> <code>tic-tac-toe</code>. Le gach ceann de na <code>+</code> agus <code>"</code>
carachtair, t√° s√© deacair a fheice√°il cad at√° ar si√∫l. Chun teaghr√°in a chomhcheangal i
beala√≠ n√≠os casta, is f√©idir linn an macra <code>format!</code> a √∫s√°id ina ionad sin:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s1 = String::from("tic");
    let s2 = String::from("tac");
    let s3 = String::from("toe");

    let s = format!("{s1}-{s2}-{s3}");
<span class="boring">}</span></code></pre></pre>
<p>Socra√≠onn an c√≥d seo <code>s</code> go <code>tic-tac-toe</code> freisin. Oibr√≠onn an macra <code>format!</code> mar
<code>println!</code>, ach in ionad an t-aschur a phriont√°il go dt√≠ an sc√°ile√°n, filleann s√© a
<code>String</code> leis an √°bhar. Is m√≥r an leagan den ch√≥d a √∫s√°ideann <code>format!</code>
n√≠os √©asca le l√©amh, agus √∫s√°ideann an c√≥d ginte ag an macra <code>format!</code> tagairt√≠
ionas nach mbeidh √∫in√©ireacht ag an nglao seo ar aon cheann d√° pharaim√©adair.</p>
<h3 id="inn√©acs√∫-i-teaghr√°in"><a class="header" href="#inn√©acs√∫-i-teaghr√°in">Inn√©acs√∫ i Teaghr√°in</a></h3>
<p>I go leor teangacha r√≠omhchl√°r√∫ch√°in eile, is f√©idir rochtain a fh√°il ar charachtair aonair in a
Is oibr√≠ocht bhail√≠ agus choiteann √© sreang tr√≠ thagairt a dh√©anamh d√≥ibh de r√©ir inn√©acs. Mar sin f√©in,
m√° dh√©anann t√∫ iarracht codanna de <code>String</code> a rochtain ag baint √∫s√°ide as comhr√©ir inn√©acsaithe i Rust, d√©anfaidh t√∫
earr√°id a fh√°il. Smaoinigh ar an gc√≥d neamhbhail√≠ i Liost√∫ 8-19.</p>
<Listing number="8-19" caption="Attempting to use indexing syntax with a String">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let s1 = String::from("hello");
    let h = s1[0];
<span class="boring">}</span></code></pre>
</Listing>
<p>Beidh an earr√°id seo a leanas mar thoradh ar an gc√≥d seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling collections v0.1.0 (file:///projects/collections)
error[E0277]: the type `str` cannot be indexed by `{integer}`
 --&gt; src/main.rs:3:16
  |
3 |     let h = s1[0];
  |                ^ string indices are ranges of `usize`
  |
  = help: the trait `SliceIndex&lt;str&gt;` is not implemented for `{integer}`, which is required by `String: Index&lt;_&gt;`
  = note: you can use `.chars().nth()` or `.bytes().nth()`
          for more information, see chapter 8 in The Book: &lt;https://doc.rust-lang.org/book/ch08-02-strings.html#indexing-into-strings&gt;
  = help: the trait `SliceIndex&lt;[_]&gt;` is implemented for `usize`
  = help: for that trait implementation, expected `[_]`, found `str`
  = note: required for `String` to implement `Index&lt;{integer}&gt;`

For more information about this error, try `rustc --explain E0277`.
error: could not compile `collections` (bin "collections") due to 1 previous error
</code></pre>
<p>Ins√≠onn an earr√°id agus an n√≥ta an sc√©al: N√≠ thaca√≠onn teaghr√°in meirge le hinn√©acs√∫. Ach
c√©n f√°th nach bhfuil? Chun an cheist sin a fhreagairt, n√≠ m√≥r d√∫inn pl√© a dh√©anamh ar an gcaoi a st√≥r√°lann Rust teaghr√°in isteach
cuimhne.</p>
<h4 id="ionada√≠ocht-inmhe√°nach"><a class="header" href="#ionada√≠ocht-inmhe√°nach">Ionada√≠ocht Inmhe√°nach</a></h4>
<p>Is √©ard is <code>String</code> ann n√° cumhdach thar <code>Vec&lt;u8&gt;</code>. Breathna√≠mis ar chuid d√°r gcuid i gceart
teaghr√°in shamplacha UTF-8 ionch√≥daithe √≥ Liost√∫ 8-14. Ar dt√∫s, an ceann seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let hello = String::from("ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑŸäŸÉŸÖ");
</span><span class="boring">    let hello = String::from("Dobr√Ω den");
</span><span class="boring">    let hello = String::from("Hello");
</span><span class="boring">    let hello = String::from("◊©◊ú◊ï◊ù");
</span><span class="boring">    let hello = String::from("‡§®‡§Æ‡§∏‡•ç‡§§‡•á");
</span><span class="boring">    let hello = String::from("„Åì„Çì„Å´„Å°„ÅØ");
</span><span class="boring">    let hello = String::from("ÏïàÎÖïÌïòÏÑ∏Ïöî");
</span><span class="boring">    let hello = String::from("‰Ω†Â•Ω");
</span><span class="boring">    let hello = String::from("Ol√°");
</span><span class="boring">    let hello = String::from("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ");
</span>    let hello = String::from("Hola");
<span class="boring">}</span></code></pre></pre>
<p>Sa ch√°s seo, beidh <code>len</code> <code>4</code>, rud a chialla√≠onn an veicteoir a st√≥r√°lann an teaghr√°n
T√° <code>"Hola"</code> 4 byte ar fad. T√≥gann gach ceann de na litreacha seo beart amh√°in nuair a ionch√≥da√≠tear iad
UTF-8. F√©adfaidh an l√≠ne seo a leanas, √°fach, iontas ort (tabhair faoi deara go bhfuil an teaghr√°n seo
Tosa√≠onn leis an bpr√≠omhlitir Choireallach <em>Ze</em>, n√≠ uimhir 3):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let hello = String::from("ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑŸäŸÉŸÖ");
</span><span class="boring">    let hello = String::from("Dobr√Ω den");
</span><span class="boring">    let hello = String::from("Hello");
</span><span class="boring">    let hello = String::from("◊©◊ú◊ï◊ù");
</span><span class="boring">    let hello = String::from("‡§®‡§Æ‡§∏‡•ç‡§§‡•á");
</span><span class="boring">    let hello = String::from("„Åì„Çì„Å´„Å°„ÅØ");
</span><span class="boring">    let hello = String::from("ÏïàÎÖïÌïòÏÑ∏Ïöî");
</span><span class="boring">    let hello = String::from("‰Ω†Â•Ω");
</span><span class="boring">    let hello = String::from("Ol√°");
</span>    let hello = String::from("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ");
<span class="boring">    let hello = String::from("Hola");
</span><span class="boring">}</span></code></pre></pre>
<p>D√° gcuirf√≠ ceist ort c√© chomh fada is at√° an t√©ad, b‚Äôfh√©idir go nd√©arf√° 12. Go deimhin, Rust‚Äôs
Is √© 24 an freagra: sin l√≠on na mbeart a th√≥gann s√© chun ‚Äú–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ‚Äù a ionch√≥d√∫ i
UTF-8, toisc go dt√≥gann gach luach sc√°lach Unicode sa t√©ad sin 2 byte de
st√≥r√°la. Mar sin, n√≠ bheidh comhghaol√∫ i gc√≥na√≠ ag inn√©acs isteach i mbeart na sreinge
chuig luach sc√°lach Unicode bail√≠. Chun a l√©iri√∫, smaoinigh ar an meirge neamhbhail√≠ seo
c√≥d:</p>
<pre><code class="language-rust ignore does_not_compile">let hello = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ";
let answer = &amp;hello[0];</code></pre>
<p>T√° a fhios agat cheana f√©in nach <code>–ó</code> a bheidh i <code>answer</code>, an ch√©ad litir. Nuair a ionch√≥daithe
in UTF-8, is √© <code>208</code> an ch√©ad bheart de <code>–ó</code> agus<code>151</code> an dara beart, mar sin bheadh
is cos√∫il gur cheart go mbeadh <code>208</code> mar <code>answer</code>, ach n√≠ carachtar bail√≠ √© <code>208</code>
ar a shon f√©in. Is d√≥cha nach mbeadh an t-√∫s√°ideoir ag iarraidh d√° n-iarrfadh siad <code>208</code> a thabhairt ar ais
don ch√©ad litir den t√©ad seo; √°fach, sin iad na sonra√≠ amh√°in go Rust
t√° ag inn√©acs beart 0. Go ginear√°lta n√≠ bh√≠onn √∫s√°ideoir√≠ ag iarraidh an luach beart a thabhairt ar ais, fi√∫
mura bhfuil sa teaghr√°n ach litreacha Laidine: d√° mba ch√≥d bail√≠ √© <code>&amp;"hi"[0]</code> sin
ar ais an luach beart, thabharfadh s√© ar ais <code>104</code>, n√≠ <code>h</code>.</p>
<p>Is √© an freagra, mar sin, n√° chun luach agus c√∫is gan choinne a sheachaint
fabhtanna nach bhfaighfear amach l√°ithreach, n√≠ thiomsa√≠onn Rust an c√≥d seo
ar chor ar bith agus seachna√≠onn s√© m√≠thuiscint√≠ go luath sa phr√≥iseas forbartha.</p>
<h4 id="beart-agus-luachanna-scalaracha-agus-cnuasaigh-ghraifim-√ì-mo"><a class="header" href="#beart-agus-luachanna-scalaracha-agus-cnuasaigh-ghraifim-√ì-mo">Beart agus Luachanna Scalaracha agus Cnuasaigh Ghraifim! √ì Mo!</a></h4>
<p>Pointe eile faoi UTF-8 n√° go bhfuil tr√≠ bhealach √°bhartha ann i nd√°ir√≠re
breathn√∫ ar teaghr√°in √≥ thaobh Rust: mar bhearta, luachanna sc√°lach, agus grapheme
cnuasaigh (an rud is gaire don rud a thabharfaimis <em>letters</em>).</p>
<p>M√° bhreathna√≠onn muid ar an bhfocal Hiond√∫is ‚Äú‡§®‡§Æ‡§∏‡•ç‡§§‡•á‚Äù scr√≠ofa sa script Devanagari, is √©
st√≥r√°ilte mar veicteoir de luachanna <code>u8</code> a bhreathna√≠onn mar seo:</p>
<pre><code class="language-text">[224, 164, 168, 224, 164, 174, 224, 164, 184, 224, 165, 141, 224, 164, 164,
224, 165, 135]
</code></pre>
<p>Sin 18 beart agus sin √© an chaoi a st√≥r√°lann r√≠omhair√≠ na sonra√≠ seo ar deireadh. M√° t√°imid ar
iad mar luachanna sc√°lacha Unicode, agus is iad sin an cine√°l <code>char</code> at√° ag Rust, iad sin
Breathna√≠onn bytes mar seo:</p>
<pre><code class="language-text">['‡§®', '‡§Æ', '‡§∏', '‡•ç', '‡§§', '‡•á']
</code></pre>
<p>T√° s√© luach <code>char</code> anseo, ach n√≠ litreacha iad an ceathr√∫ agus an s√©√∫ ceann:
is diacritics iad nach bhfuil ciall acu leo ‚Äã‚Äãf√©in. Ar deireadh, m√° t√°imid ar
iad mar bhraisl√≠ grapheme, gheobhaimid an rud a thabharfadh duine ar na ceithre litir
a dh√©anann suas an focal Hiond√∫is:</p>
<pre><code class="language-text">["‡§®", "‡§Æ", "‡§∏‡•ç", "‡§§‡•á"]
</code></pre>
<p>Sol√°thra√≠onn meirge beala√≠ √©ags√∫la chun na sonra√≠ teaghr√°n amh a dh√©anann r√≠omhair√≠ a l√©irmh√≠ni√∫
st√≥r√°il ionas gur f√©idir le gach cl√°r an l√©iri√∫ a theasta√≠onn uaidh a roghn√∫, is cuma
c√©n teanga dhaonna ina bhfuil na sonra√≠.</p>
<p>C√∫is dheiridh nach ligeann Rust d√∫inn inn√©acs√∫ a dh√©anamh i <code>String</code> chun a
Is √© an carachtar n√° go bhfuiltear ag s√∫il go dt√≥gfaidh oibr√≠ochta√≠ inn√©acsaithe am seasta i gc√≥na√≠
(O(1)). Ach n√≠ f√©idir a r√°th√∫ go bhfuil feidhm√≠ocht le <code>String</code>,
toisc go mbeadh ar Rust si√∫l tr√≠d an √°bhar √≥n t√∫s go dt√≠ an
inn√©acs lena fh√°il amach c√© mh√©ad carachtar bail√≠ a bh√≠ ann.</p>
<h3 id="teaghr√°in-slicing"><a class="header" href="#teaghr√°in-slicing">Teaghr√°in slicing</a></h3>
<p>Is minic gur droch-smaoineamh √© inn√©acs√∫ i sreang mar n√≠ l√©ir cad √© an
ba cheart go mbeadh cine√°l aischuir na hoibr√≠ochta inn√©acsaithe teaghr√°n mar seo a leanas: luach beart, a
carachtar, braisle grapheme, n√≥ slisne teaghr√°n. M√°s g√° duit a √∫s√°id i nd√°ir√≠re
inn√©acsanna chun slisn√≠ teaghr√°n a chruth√∫, mar sin, iarrann Rust ort a bheith n√≠os saini√∫la.</p>
<p>Seachas <code>[]</code> a √∫s√°id le huimhir shingil, is f√©idir leat <code>[]</code> a √∫s√°id le a
raon chun sliseog teaghr√°n a chruth√∫ ina mbeidh bearta ar leith:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let hello = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ";

let s = &amp;hello[0..4];
<span class="boring">}</span></code></pre></pre>
<p>Anseo, beidh <code>s</code> ina <code>&amp;str</code> ina mbeidh na ch√©ad cheithre beart den t√©ad.
N√≠os luaithe, luaigh muid go raibh gach ceann de na carachtair dh√° bytes, rud a chialla√≠onn
beidh <code>s</code> <code>–ó–¥</code>.</p>
<p>D√° nd√©anfaimis iarracht gan ach cuid de bhearta carachtar a ghearradh le rud √©igin mar
<code>&amp;hello[0..1]</code>, bheadh ‚Äã‚Äãscaoll ar Rust faoin am rite ar an mbealach c√©anna agus d√° mbeadh s√© neamhbhail√≠
Rinneadh rochtain ar inn√©acs i veicteoir:</p>
<pre><code class="language-console">$ cargo run
   Compiling collections v0.1.0 (file:///projects/collections)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.43s
     Running `target/debug/collections`
thread 'main' panicked at src/main.rs:4:19:
byte index 1 is not a char boundary; it is inside '–ó' (bytes 0..2) of `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ`
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>Ba ch√≥ir duit a bheith c√∫ramach nuair a chruth√∫ slices teaghr√°n le raonta, mar gheall ar a dh√©anamh
mar sin is f√©idir tuairte√°la do chl√°r.</p>
<h3 id="modhanna-chun-atriall-thar-teaghr√°in"><a class="header" href="#modhanna-chun-atriall-thar-teaghr√°in">Modhanna chun atriall thar Teaghr√°in</a></h3>
<p>Is √© an bealach is fearr chun oibri√∫ ar ph√≠osa√≠ teaghr√°in n√° a bheith soil√©ir faoi c√© acu an bhfuil n√≥ nach bhfuil
t√° carachtair n√≥ beart uait. Le haghaidh luachanna sc√°lacha Unicode aonair, bain √∫s√°id as an
modh <code>chars</code>. M√° ghlaoitear <code>chars</code> ar ‚Äú–ó–¥‚Äù scartar amach agus cuireann s√© ar ais dh√° luach de
cl√≥scr√≠obh <code>char</code>, agus is f√©idir leat an toradh a athr√° chun rochtain a fh√°il ar gach eilimint:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for c in "–ó–¥".chars() {
    println!("{c}");
}
<span class="boring">}</span></code></pre></pre>
<p>D√©anfaidh an c√≥d seo na ruda√≠ seo a leanas a phriont√°il:</p>
<pre><code class="language-text">–ó
–¥
</code></pre>
<p>De rogha air sin, cuireann an modh <code>bytes</code> gach beart amh ar ais, agus b'fh√©idir gurb √© sin
oiri√∫nach do d'fhearann:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for b in "–ó–¥".bytes() {
    println!("{b}");
}
<span class="boring">}</span></code></pre></pre>
<p>D√©anfaidh an c√≥d seo na ceithre bheart a chuims√≠onn an teaghr√°n seo a phriont√°il:</p>
<pre><code class="language-text">208
151
208
180
</code></pre>
<p>Ach a bheith cinnte a mheabhr√∫ go bhf√©adfadh luachanna sc√°lach Unicode bail√≠ a bheith comhdh√©anta de n√≠os m√≥
n√° beart amh√°in.</p>
<p>Is √©ard at√° i gceist le braisl√≠ grapheme a fh√°il √≥ theaghr√°in, mar at√° le script Devanagari
casta, mar sin n√≠ shol√°thra√≠onn an leabharlann chaighde√°nach an fheidhmi√∫lacht seo. cliathbhosca√≠
ar f√°il ar <a href="https://crates.io/">crates.io</a> <!-- neamhaird --> m√°s √© seo an
feidhmi√∫lacht at√° uait.</p>
<h3 id="n√≠l-teaghr√°in-chomh-simpl√≠-sin"><a class="header" href="#n√≠l-teaghr√°in-chomh-simpl√≠-sin">N√≠l Teaghr√°in Chomh Simpl√≠ sin</a></h3>
<p>Mar achoimre, t√° teaghr√°in casta. D√©anann teangacha cl√°ir √©ags√∫la
roghanna √©ags√∫la maidir le conas an chastacht seo a chur i l√°thair don r√≠omhchl√°raitheoir. Meirge
roghnaigh l√°imhse√°il cheart sonra√≠ <code>String</code> an t-iompar r√©amhshocraithe
do gach cl√°r Rust, rud a chialla√≠onn go gcaithfidh r√≠omhchl√°raitheoir√≠ n√≠os m√≥ machnaimh a dh√©anamh
l√°imhse√°il sonra√≠ UTF-8 roimh r√©. L√©ir√≠onn an chomhbhabht√°il seo n√≠os m√≥ de chastacht na
teaghr√°in n√° mar is l√©ir i dteangacha r√≠omhchl√°r√∫ch√°in eile, ach cuireann s√© cosc ‚Äã‚Äãort
√≥ bheith ort earr√°id√≠ a bhaineann le carachtair neamh-ASCII a l√°imhse√°il n√≠os d√©ana√≠ i do
saolr√© forbartha.</p>
<p>Is √© an dea-sc√©al n√° go dtugann an leabharlann chaighde√°nach go leor feidhmi√∫lacht t√≥gtha
as na cine√°lacha <code>String</code> agus <code>&amp;str</code> chun cabhr√∫ leis na c√°sanna casta seo a l√°imhse√°il
i gceart. B√≠ cinnte a sheice√°il amach an doicim√©ad√∫ le haghaidh modhanna √∫s√°ideacha mar
<code>contains</code> le haghaidh cuardach i teaghr√°n agus <code>replace</code> chun codanna de a
t√©ad le teaghr√°n eile.</p>
<p>Aistr√≠mid chuig rud √©igin nach bhfuil chomh casta: l√©arsc√°ileanna hash!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="eochracha-le-luachanna-gaolmhara-a-st√≥r√°il-i-l√©arsc√°ileanna-hash"><a class="header" href="#eochracha-le-luachanna-gaolmhara-a-st√≥r√°il-i-l√©arsc√°ileanna-hash">Eochracha le Luachanna Gaolmhara a St√≥r√°il i L√©arsc√°ileanna Hash</a></h2>
<p>Is √© an <em>hash map</em> an ceann deireanach d√°r mbaili√∫ch√°in choiteanna. An cine√°l <code>HashMap&lt;K, V&gt;</code>
st√≥r√°lann s√© map√°il d'eochracha den chine√°l <code>K</code> le luachanna de chine√°l <code>V</code> ag baint √∫s√°ide as <em>hashing
function</em>, a chinneann conas a chuireann s√© na heochracha agus na luachanna seo i gcuimhne.
Taca√≠onn go leor teangacha r√≠omhchl√°raithe leis an gcine√°l seo strucht√∫r sonra√≠, ach is minic a bh√≠onn siad
√∫s√°id ainm eile, mar shampla <em>hash</em>, <em>map</em>, <em>object</em>, <em>hash table</em>,
<em>dictionary</em>, n√≥ <em>associative array</em>, gan ach roinnt a ainmni√∫.</p>
<p>T√° l√©arsc√°ileanna hash √∫s√°ideach nuair is mian leat sonra√≠ a chuardach n√≠ tr√≠ inn√©acs a √∫s√°id, mar
is f√©idir leat le veicteoir√≠, ach ag baint √∫s√°ide as eochair is f√©idir a bheith de chine√°l ar bith. Mar shampla,
i gcluiche, d‚Äôfh√©adf√° s√∫il a choinne√°il ar sc√≥r gach foirne ar l√©arsc√°il hash ina bhfuil
is ainm foirne √© gach eochair agus is ionann na luachanna agus sc√≥r gach foirne. Tugtar foireann
ainm, is f√©idir leat a sc√≥r a fh√°il ar ais.</p>
<p>Rachaimid thar an API bun√∫sach de l√©arsc√°ileanna hash sa chuid seo, ach go leor ruda√≠ eile
folaithe sna feidhmeanna at√° sainmh√≠nithe ar <code>HashMap&lt;K, V&gt;</code> ag an leabharlann chaighde√°nach.
Mar is gn√°th, seice√°il na doicim√©id chaighde√°nacha leabharlainne le haghaidh tuilleadh eolais.</p>
<h3 id="hash-l√©arsc√°il-nua-a-chruth√∫"><a class="header" href="#hash-l√©arsc√°il-nua-a-chruth√∫">Hash L√©arsc√°il Nua a Chruth√∫</a></h3>
<p>Bealach amh√°in le l√©arsc√°il hash folamh a chruth√∫ n√° <code>new</code> a √∫s√°id agus gn√©ithe a chur leis
<code>insert</code>. I Liost√°il 8-20, t√°imid ag coinne√°il s√∫il ar sc√≥ir dh√° fhoireann a bhfuil
is iad na hainmneacha <em>Gorm</em> agus <em>Bu√≠</em>. Tosa√≠onn an fhoireann Gorm le 10 bpointe, agus an
Tosa√≠onn foireann bu√≠ le 50.</p>
<Listing number="8-20" caption="Creating a new hash map and inserting some keys and values">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from("Blue"), 10);
    scores.insert(String::from("Yellow"), 50);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Tabhair faoi deara go gcaithfimid an <code>HashMap</code> a √∫s√°id ar dt√∫s √≥n gcuid baili√∫ch√°in de
an leabharlann caighde√°nach. As √°r dtr√≠ bhaili√∫ch√°n coitianta, is √© an ceann seo an ceann is l√∫
a √∫s√°idtear go minic, mar sin n√≠l s√© san √°ireamh sna gn√©ithe a thugtar isteach sa raon feidhme
go huathoibr√≠och sa r√©amhr√°. T√° n√≠os l√∫ taca√≠ochta ag l√©arsc√°ileanna hash freisin √≥ na
leabharlann caighde√°nach; n√≠l aon mhacra ionsuite ann chun iad a th√≥g√°il, mar shampla.</p>
<p>D√≠reach cos√∫il le veicteoir√≠, st√≥r√°lann l√©arsc√°ileanna hash a gcuid sonra√≠ ar an gcarn. T√° an <code>HashMap</code> seo
eochracha den chine√°l <code>String</code> agus luachanna an chine√°il <code>i32</code>. Cos√∫il le veicteoir√≠, t√° l√©arsc√°ileanna hash
aonchine√°lach: caithfidh an cine√°l c√©anna a bheith ag gach ceann de na heochracha, agus na luachanna go l√©ir
N√≠ m√≥r go mbeadh an cine√°l c√©anna.</p>
<h3 id="ag-f√°il-rochtana-ar-luachanna-i-hash-l√©arsc√°il"><a class="header" href="#ag-f√°il-rochtana-ar-luachanna-i-hash-l√©arsc√°il">Ag f√°il rochtana ar Luachanna i Hash L√©arsc√°il</a></h3>
<p>Is f√©idir linn luach a fh√°il √≥n l√©arsc√°il hash tr√≠na eochair don <code>get</code>
modh, mar a thaispe√°ntar i Liosta 8-21.</p>
<Listing number="8-21" caption="Accessing the score for the Blue team stored in the hash map">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from("Blue"), 10);
    scores.insert(String::from("Yellow"), 50);

    let team_name = String::from("Blue");
    let score = scores.get(&amp;team_name).copied().unwrap_or(0);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, beidh an luach a bhaineann leis an bhfoireann Gorm ag <code>score</code>, agus an
Beidh an toradh <code>10</code>. Filleann an modh <code>get</code> <code>Option&lt;&amp;V&gt;</code>; mura bhfuil
luach na heochair sin sa l√©arsc√°il hash, tabharfaidh <code>get</code> ar ais <code>None</code>. An cl√°r seo
l√°imhse√°lann s√© an <code>Option</code> tr√≠ ghlaoch ar <code>copied</code> chun <code>Option&lt;i32&gt;</code> a fh√°il seachas
<code>Option&lt;&amp;i32&gt;</code>, ansin <code>unwrap_or</code> chun <code>score</code> a shocr√∫ go nialas mura bhfuil <code>scores</code>
b√≠odh iontr√°il agat don eochair.</p>
<p>Is f√©idir linn athr√° a dh√©anamh ar gach p√©ire eochairluacha ar l√©arsc√°il hash ar an mbealach c√©anna is a dh√©anaimid
D√©an le veicteoir√≠, ag baint √∫s√°ide as l√∫b <code>for</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from("Blue"), 10);
    scores.insert(String::from("Yellow"), 50);

    for (key, value) in &amp;scores {
        println!("{key}: {value}");
    }
<span class="boring">}</span></code></pre></pre>
<p>D√©anfaidh an c√≥d seo gach p√©ire a phriont√°il in ord treallach:</p>
<pre><code class="language-text">Yellow: 50
Blue: 10
</code></pre>
<h3 id="l√©arsc√°ileanna-hash-agus-√öin√©ireacht"><a class="header" href="#l√©arsc√°ileanna-hash-agus-√öin√©ireacht">L√©arsc√°ileanna Hash agus √öin√©ireacht</a></h3>
<p>I gc√°s cine√°lacha a chuireann an trait <code>Copy</code> i bhfeidhm, mar <code>i32</code>, d√©antar na luachanna a ch√≥ipe√°il
isteach sa l√©arsc√°il hash. I gc√°s luachanna faoi √∫in√©ireacht mar <code>String</code>, bogfar na luachanna agus
beidh an l√©arsc√°il hash ina √∫in√©ir ar na luachanna sin, mar a l√©ir√≠tear i Liosta 8-22.</p>
<Listing number="8-22" caption="Showing that keys and values are owned by the hash map once they‚Äôre inserted">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let field_name = String::from("Favorite color");
    let field_value = String::from("Blue");

    let mut map = HashMap::new();
    map.insert(field_name, field_value);
    // field_name and field_value are invalid at this point, try using them and
    // see what compiler error you get!
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>N√≠limid in ann na hathr√≥ga <code>field_name</code> agus <code>field_value</code> a √∫s√°id ina dhiaidh
t√° siad bogtha isteach sa l√©arsc√°il hash leis an nglao <code>insert</code>.</p>
<p>M√° chuirimid tagairt√≠ do luachanna isteach sa l√©arsc√°il hash, n√≠ bhogfar na luachanna
isteach sa l√©arsc√°il hash. N√≠ m√≥r na luachanna a d√≠r√≠onn na tagairt√≠ d√≥ibh a bheith bail√≠ ag
ar a laghad chomh fada agus at√° an l√©arsc√°il hash bail√≠. Labhr√≥imid n√≠os m√≥ faoi na ceisteanna seo i
an [‚ÄúTagairt√≠ a Bhail√≠ocht√∫ le
Saoil‚Äù][bail√≠ocht√∫-tagairt√≠-le-saoil]<!-- neamhaird a dh√©anamh ar --> alt i
Caibidil 10 .</p>
<h3 id="l√©arsc√°il-hash-√°-nuashonr√∫"><a class="header" href="#l√©arsc√°il-hash-√°-nuashonr√∫">L√©arsc√°il Hash √° nuashonr√∫</a></h3>
<p>C√© gur f√©idir f√°s ar l√≠on na bp√©ir√≠ eochair agus luacha, is f√©idir le gach eochair uath√∫il
gan ach luach amh√°in a bheith bainteach leis ag an am (ach n√≠ vice versa: do
Mar shampla, d'fh√©adfadh an luach <code>10</code> a bheith ag an bhfoireann Gorm agus ag an bhfoireann Bhu√≠ araon
st√≥r√°ilte sa l√©arsc√°il hash <code>scores</code>).</p>
<p>Nuair is mian leat na sonra√≠ a athr√∫ i l√©arsc√°il hash, caithfidh t√∫ cinneadh a dh√©anamh conas
l√°imhse√°il an c√°s nuair a bh√≠onn luach sannta ag eochair cheana f√©in. D'fh√©adf√° ionad an
luach d'aois leis an luach nua, go hioml√°n neamhaird a dh√©anamh ar an luach d'aois. D'fh√©adf√°
choinne√°il ar an luach d'aois agus neamhaird a dh√©anamh ar an luach nua, ach amh√°in ag cur an luach nua m√° t√° an
eochair <em>n√≠l</em> luach aici cheana f√©in. N√≥ d‚Äôfh√©adf√° an seanluach agus an
luach nua. Breathna√≠mid ar conas gach ceann d√≠obh seo a dh√©anamh!</p>
<h4 id="luach-a-fhorscr√≠obh"><a class="header" href="#luach-a-fhorscr√≠obh">Luach a Fhorscr√≠obh</a></h4>
<p>M√° chuirimid eochair agus luach isteach i l√©arsc√°il hash agus ansin cuir isteach an eochair ch√©anna
le luach difri√∫il, cuirfear an luach a bhaineann leis an eochair sin in ionad.
C√© go nglaonn an c√≥d i Liost√∫ 8-23 <code>insert</code> faoi dh√≥, beidh an l√©arsc√°il hash
n√≠l ach p√©ire eochairluacha amh√°in ann toisc go bhfuil luach an Ghorm √° chur isteach againn
eochair na foirne an d√° uair.</p>
<Listing number="8-23" caption="Replacing a value stored with a particular key">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from("Blue"), 10);
    scores.insert(String::from("Blue"), 25);

    println!("{scores:?}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d seo <code>{"Blue": 25}</code>. T√° luach bunaidh <code>10</code> curtha
forscr√≠ofa.</p>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="only-inserting-a-value-if-the-key-has-no-value"></a></p>
<h4 id="ag-cur-eochair-agus-luach-leis-mura-bhfuil-eochair-i-l√°thair"><a class="header" href="#ag-cur-eochair-agus-luach-leis-mura-bhfuil-eochair-i-l√°thair">Ag Cur Eochair agus Luach Leis Mura bhfuil Eochair i L√°thair</a></h4>
<p>Is gn√°ch seice√°il an bhfuil eochair ar leith sa l√©arsc√°il hash cheana f√©in
le luach agus ansin na gn√≠omhartha seo a leanas a dh√©anamh: m√° t√° an eochair ann i
an l√©arsc√°il hash, ba cheart go bhfanfadh an luach reatha mar at√° s√©; m√° t√° an eochair
nach bhfuil ann, cuir isteach √© agus luach air.</p>
<p>T√° API speisialta ag l√©arsc√°ileanna hash don <code>entry</code> seo a th√≥gann an eochair duit
ag iarraidh a sheice√°il mar pharaim√©adar. Is √©num luach aischuir an mhodha <code>entry</code>
ar a dtugtar <code>Entry</code> a l√©ir√≠onn luach a d'fh√©adfadh a bheith ann n√≥ nach bhf√©adfadh. D√©arfainn
ba mhaith linn a sheice√°il an bhfuil luach ag baint leis an eochair don fhoireann Bhu√≠
leis. Mura nd√©anann s√©, ba mhaith linn an luach <code>50</code> a chur isteach, agus mar an gc√©anna le haghaidh an
Foireann gorm. Ag baint √∫s√°ide as an <code>entry</code> API, t√° an chuma ar an gc√≥d Liost√∫ 8-24.</p>
<Listing number="8-24" caption="Using the `entry` method to only insert if the key does not already have a value">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let mut scores = HashMap::new();
    scores.insert(String::from("Blue"), 10);

    scores.entry(String::from("Yellow")).or_insert(50);
    scores.entry(String::from("Blue")).or_insert(50);

    println!("{scores:?}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Sainmh√≠n√≠tear an modh <code>or_insert</code> ar <code>Entry</code> chun tagairt shochorraithe a thabhairt ar ais d√≥
an luach don eochair 'Iontr√°il' chomhfhreagrach m√° t√° an eochair sin ann, agus mura bhfuil, √©
cuireann s√© an paraim√©adar isteach mar an luach nua don eochair seo agus cuireann s√© mutable ar ais
tagairt don luach nua. T√° an teicn√≠c seo i bhfad n√≠os glaine n√° mar a scr√≠obh an
loighic f√©in agus, ina theannta sin, imr√≠onn n√≠os nicely leis an seice√°la√≠ iasachta√≠.</p>
<p>M√° ritheann t√∫ an c√≥d i Liost√∫ 8-24, priont√°lfar <code>{"Yellow": 50, "Blue": 10}</code>. T√° an
cuirfidh an ch√©ad ghlao ar <code>entry</code> isteach an eochair don fhoireann Bhu√≠ leis an luach
<code>50</code> toisc nach bhfuil luach ag an bhfoireann Bu√≠ cheana f√©in. An dara glaoch chuig
N√≠ athr√≥idh <code>entry</code> an l√©arsc√°il hash mar t√° an t-ainm ag an bhfoireann Gorm cheana f√©in
luach <code>10</code>.</p>
<h4 id="luach-bunaithe-ar-an-seanluach-a-nuashonr√∫"><a class="header" href="#luach-bunaithe-ar-an-seanluach-a-nuashonr√∫">Luach Bunaithe ar an Seanluach a Nuashonr√∫</a></h4>
<p>C√°s √∫s√°ide coitianta eile le haghaidh l√©arsc√°ileanna hash n√° luach eochair a chuardach agus ansin
√© a nuashonr√∫ bunaithe ar an seanluach. Mar shampla, taispe√°nann Liost√∫ 8-25 c√≥d sin
comhaireamh c√© mh√©ad uair gach focal le feice√°il i roinnt t√©acs. Bainimid √∫s√°id as l√©arsc√°il hash le
na focail mar eochracha agus incrimint an luach s√∫il a choinne√°il ar c√© mh√©ad uair at√° againn
chonaic an focal sin. M√°s √© seo an ch√©ad uair a bhfuil focal feicthe againn, cuirfimid isteach ar dt√∫s
an luach <code>0</code>.</p>
<Listing number="8-25" caption="Counting occurrences of words using a hash map that stores words and counts">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::collections::HashMap;

    let text = "hello world wonderful world";

    let mut map = HashMap::new();

    for word in text.split_whitespace() {
        let count = map.entry(word).or_insert(0);
        *count += 1;
    }

    println!("{map:?}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d seo <code>{"world": 2, "hello": 1, "wonderful": 1}</code>. Seans go bhfeicfe√°
na p√©ir√≠ eochairluacha c√©anna priont√°ilte in ord difri√∫il: aisghairm √≥n
<a href="ch08-03-hash-maps.html#accessing-values-in-a-hash-map">‚ÄúLuachanna a Rochtana i Hash Map‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt sin
tarla√≠onn atriall thar l√©arsc√°il hash in ord treallach.</p>
<p>Filleann an modh <code>split_whitespace</code> atriator thar fhomh√≠reanna, scartha le
sp√°s b√°n, den luach i <code>text</code>. Filleann an modh <code>or_insert</code> comhsh√≥
tagairt (<code>&amp;mut V</code>) don luach don eochair shonraithe. Anseo, d√©anaimid √© sin a st√≥r√°il
tagairt chomhsh√≥ite san athr√≥g <code>count</code>, mar sin chun an luach sin a shannadh,
n√≠ m√≥r d√∫inn ar dt√∫s tagairt a dh√©anamh do <code>count</code> ag baint √∫s√°ide as an r√©ilt√≠n (<code>*</code>). An mutable
t√©ann an tagairt as an sc√≥ip ag deireadh na l√∫b <code>for</code>, mar sin seo go l√©ir
t√° athruithe s√°bh√°ilte agus ceadaithe ag na rialacha iasachtaithe.</p>
<h3 id="feidhmeanna-hashing"><a class="header" href="#feidhmeanna-hashing">Feidhmeanna Hashing</a></h3>
<p>De r√©ir r√©amhshocraithe, √∫s√°ideann <code>HashMap</code> feidhm hashing ar a dtugtar <em>SipHash</em> is f√©idir a shol√°thar
frithsheasmhacht in aghaidh ionsaithe di√∫ltaithe seirbh√≠se (DoS) a bhaineann le hash
t√°bla√≠<sup class="footnote-reference" id="fr-siphash-1"><a href="#footnote-siphash">1</a></sup> <!-- neamhaird a dh√©anamh -->. N√≠ h√© seo an algartam hashing is tap√∫la
ar f√°il, ach an tr√°d√°il-uaire le haghaidh sl√°nd√°la n√≠os fearr a thagann leis an titim isteach
feidhm√≠ocht is fi√∫ √©. M√° t√° t√∫ pr√≥if√≠l do ch√≥d agus a fh√°il go bhfuil an r√©amhshocraithe
t√° feidhm hash r√≥-mhall chun do chusp√≥ir√≠, is f√©idir leat aistri√∫ go feidhm eile
tr√≠ hasher difri√∫il a shonr√∫. Is cine√°l √© <em>hasher</em> a chuireann an
Tr√©ith <code>BuildHasher</code>. Labhr√≥imid faoi thr√©ithe agus conas iad a chur i bhfeidhm
<a href="ch10-02-traits.html">Caibidil 10</a><!-- d√©an neamhaird de -->. N√≠ g√° duit a chur i bhfeidhm
do hasher f√©in √≥n t√∫s; <a href="https://crates.io/">crates.io</a> <!-- neamhaird -->
t√° leabharlanna roinnte ag √∫s√°ideoir√≠ Rust eile a shol√°thra√≠onn hashers a chuireann go leor i bhfeidhm
halgartaim hashing coitianta.</p>
<h2 id="achoimre-7"><a class="header" href="#achoimre-7">Achoimre</a></h2>
<p>Sol√°thr√≥idh veicteoir√≠, teaghr√°in, agus l√©arsc√°ileanna hash cuid mh√≥r feidhmi√∫lachta
riachtanach i gcl√°ir nuair is g√° duit sonra√≠ a st√≥r√°il, a rochtain agus a mhodhn√∫. Seo iad
roinnt cleachta√≠ ba ch√≥ir duit a bheith feistithe anois le r√©iteach:</p>
<ol>
<li>Nuair a thugtar liosta sl√°nuimhreacha, √∫s√°id veicteoir agus cuir ar ais an t-airmhe√°n (agus √© s√≥rt√°ilte,
an luach sa su√≠omh l√°r) agus m√≥d (an luach is m√≥ a tharla√≠onn
go minic ; beidh l√©arsc√°il hash ina chuidi√∫ anseo) den liosta.</li>
<li>Teaghr√°in a thiont√∫ go Laidin muc. Bogtar an ch√©ad chonsan de gach focal go dt√≠
cuirtear deireadh an fhocail agus <em>ay</em> leis, mar sin d√©antar <em>irst-fay</em>. Focail
a thosa√≠onn le guta tar √©is <em>hay</em> a chur leis an deireadh ina ionad sin (√©ir√≠onn <em>apple</em>
<em>apple-hay</em>). Coinnigh i gcuimhne na sonra√≠ faoi ionch√≥d√∫ UTF-8!</li>
<li>Ag baint √∫s√°ide as l√©arsc√°il hash agus veicteoir√≠, cruthaigh comh√©adan t√©acs chun ligean d'√∫s√°ideoir cur leis
ainmneacha fostaithe do roinn i gcuideachta; mar shampla, ‚ÄúCuir Sally le
Innealt√≥ireacht" n√≥ "Cuir Amir le D√≠olach√°in." Ansin lig an t-√∫s√°ideoir a fh√°il ar liosta de na
daoine i roinn n√≥ gach duine sa chuideachta de r√©ir roinne, curtha in eagar
in ord aib√≠tre.</li>
</ol>
<p>D√©anann doicim√©ad√∫ caighde√°nach API na leabharlainne cur s√≠os ar mhodhanna a veicte√°lann, teaghr√°in,
agus t√° l√©arsc√°ileanna hash a bheidh ina gcuidi√∫ do na cleachta√≠ seo!</p>
<p>T√°imid ag dul isteach i gcl√°ir n√≠os casta ina dteipfidh ar oibr√≠ochta√≠, mar sin de
am iontach chun l√°imhse√°il earr√°id√≠ a phl√©. D√©anfaimid √© sin chugainn!</p>
<hr>
<ol class="footnote-definition"><li id="footnote-siphash">
<p><a href="https://en.wikipedia.org/wiki/SipHash"> https://en.wikipedia.org/wiki/SipHash</a> <a href="#fr-siphash-1">‚Ü©</a></p>
</li>
</ol><div style="break-before: page; page-break-before: always;"></div><h1 id="l√°imhse√°il-earr√°ide"><a class="header" href="#l√°imhse√°il-earr√°ide">L√°imhse√°il Earr√°ide</a></h1>
<p>Is f√≠oras saoil iad earr√°id√≠ i mbogearra√≠, mar sin t√° roinnt gn√©ithe ag Rust le haghaidh
l√°imhse√°il c√°sanna ina dt√©ann rud √©igin m√≠cheart. I go leor c√°sanna, √©il√≠onn Rust
t√∫ a admh√°il go bhf√©adfadh earr√°id a bheith ann agus gn√≠omh √©igin a dh√©anamh roimh do
tioms√≥idh c√≥d. D√©anann an riachtanas seo do chl√°r n√≠os l√°idre tr√≠na chinnti√∫
go bhfaighidh t√∫ amach earr√°id√≠ agus go l√°imhse√°lfaidh t√∫ iad go cu√≠ sula mb√≠onn
do ch√≥d imscartha chuig t√°irgeadh!</p>
<p>D√©anann Rust earr√°id√≠ a ghr√∫p√°il i dh√° mh√≥rchatag√≥ir: <em>aisghabh√°la</em> agus <em>do-aisghabh√°la</em>
earr√°id√≠. I gc√°s earr√°ide inghn√≥thaithe, mar earr√°id <em>file not found</em>, is m√≥ a dh√©anaimid
d√≥cha gur mhaith leat ach an fhadhb a thuairisci√∫ don √∫s√°ideoir agus an oibr√≠ocht a dh√©anamh ar√≠s.
Is comhartha√≠ de fhabhtanna iad earr√°id√≠ do-aisghabh√°la i gc√≥na√≠, mar shampla ag iarraidh rochtain a
su√≠omh n√≠os faide n√° deireadh sraithe, agus mar sin ba mhaith linn stop a chur l√°ithreach ar an
cl√°r.</p>
<p>N√≠ dh√©anann formh√≥r na dteangacha idirdheal√∫ idir an d√° chine√°l seo earr√°id√≠ agus l√°imhse√°lann siad
araon ar an mbealach c√©anna, ag baint √∫s√°ide as meicn√≠ochta√≠ mar eisceachta√≠. N√≠l Rust ag
eisceachta√≠. Ina √°it sin, t√° an cine√°l <code>Result &lt;T, E&gt;</code> aige le haghaidh earr√°id√≠ inghn√≥thaithe agus
an macra <code>panic!</code> a stopann cur i gcr√≠ch nuair a thagann an cl√°r trasna ar
earr√°id do-aisghabh√°la. Cl√∫da√≠onn an chaibidil seo glaoch ar <code>panic!</code> ar dt√∫s agus ansin cainteanna
faoi ‚Äã‚Äãluachanna <code>Result&lt;T, E&gt;</code> a thabhairt ar ais. Ina theannta sin, d√©anfaimid ini√∫chadh
breithnithe agus cinneadh √° dh√©anamh ar cheart iarracht a dh√©anamh teacht ar ais √≥ earr√°id n√≥ stopadh
forghn√≠omh√∫.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="earr√°id√≠-do-aisghabh√°la-le-panic"><a class="header" href="#earr√°id√≠-do-aisghabh√°la-le-panic">Earr√°id√≠ do-aisghabh√°la le <code>panic!</code></a></h2>
<p>Uaireanta tarla√≠onn ruda√≠ dona i do ch√≥d, agus n√≠l aon rud ar f√©idir leat a dh√©anamh faoi
√©. Sna c√°sanna seo, t√° an macra <code>panic!</code> ag Rust. T√° dh√° bhealach a chur faoi deara a
scaoll i gcleachtas: tr√≠ ghn√≠omh a dh√©anamh a chuireann scaoll ar √°r gc√≥d (amhail
rochtain a fh√°il ar eagar thar an deireadh) n√≥ tr√≠ ghlaoch go sainr√°ite ar an macra <code>panic!</code>.
Sa d√° ch√°s, is c√∫is le scaoll in√°r gcl√°r. De r√©ir r√©amhshocraithe, d√©anfaidh na scaoll seo
cl√≥ teachtaireacht teip, unwind, glan suas an chairn, agus scor. Tr√≠d an
athr√≥g timpeallacht, is f√©idir leat freisin Rust taispe√°int an chairn glaoch nuair a
tarla√≠onn scaoll chun √© a dh√©anamh n√≠os √©asca foinse an scaoll a rian√∫.</p>
<blockquote>
<h3 id="an-cruach-a-dh√≠scaoileadh-n√≥-tobscoir-mar-fhreagairt-ar-scaoill"><a class="header" href="#an-cruach-a-dh√≠scaoileadh-n√≥-tobscoir-mar-fhreagairt-ar-scaoill">An Cruach a Dh√≠scaoileadh n√≥ Tobscoir mar Fhreagairt ar Scaoill</a></h3>
<p>De r√©ir r√©amhshocraithe, nuair a tharla√≠onn scaoll tosa√≠onn an cl√°r <em>unwinding</em>, rud a chialla√≠onn
Si√∫lann Rust c√∫ltaca an chairn agus glanann s√© suas na sonra√≠ √≥ gach feidhm √©
cruinnithe. Mar sin f√©in, t√° go leor oibre ag si√∫l siar agus ag glanadh suas. Rust,
mar sin, is f√©idir leat rogha eile a roghn√∫ l√°ithreach <em>aborting</em>,
a chr√≠ochna√≠onn an cl√°r gan glanadh suas.</p>
<p>Beidh g√° ansin an chuimhne a bh√≠ in √∫s√°id ag an gcl√°r a ghlanadh suas ag an
c√≥ras oibri√∫ch√°in. M√°s rud √© i do thionscadal n√≠ m√≥r duit an d√©n√°rtha iarmhartach a dh√©anamh mar
beag agus is f√©idir, is f√©idir leat athr√∫ √≥ scaoileadh go dt√≠ deireadh a chur le scaoll ag
ag cur <code>panic = 'abort'</code> leis na rann√°in <code>[profile]</code> cu√≠ i do
<em>Cargo.toml</em> comhad. Mar shampla, m√°s mian leat deireadh a chur le scaoll i m√≥d scaoileadh,
cuir √© seo leis:</p>
<pre><code class="language-toml">[profile.release]
scaoll = 'abort'

</code></pre>
</blockquote>
<p>D√©anaimis iarracht <code>panic!</code> a ghlaoch i gcl√°r simpl√≠:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust should_panic panics">fn main() {
    panic!("crash and burn");
}</code></pre></pre>
</Listing>
<p>Nuair a bheidh an cl√°r √° rith agat, feicfidh t√∫ rud √©igin mar seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling panic v0.1.0 (file:///projects/panic)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.25s
     Running `target/debug/panic`
thread 'main' panicked at src/main.rs:2:5:
crash and burn
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>Is c√∫is leis an nglao go <code>panic!</code> an teachtaireacht earr√°ide at√° sa d√° l√≠ne dheireanacha.
Taispe√°nann an ch√©ad l√≠ne √°r dteachtaireacht scaoll agus an √°it in√°r gc√≥d foinse
tharla an scaoll: l√©ir√≠onn <em>src/main.rs:2:5</em> gurb √≠ an dara l√≠ne √≠,
an c√∫igi√∫ carachtar d√°r gcomhad <em>src/main.rs</em>.</p>
<p>Sa ch√°s seo, t√° an l√≠ne a luaitear mar chuid d√°r gc√≥d, agus m√° th√©ann muid chuige sin
l√≠ne, feicimid an glao macra <code>panic!</code>. I gc√°sanna eile, d'fh√©adfadh an glaoch <code>panic!</code>
bheith sa ch√≥d a ghlaonn √°r gc√≥d air, agus ainm an chomhaid agus uimhir na l√≠ne arna dtuairisci√∫ ag
c√≥d duine √©igin eile a bheidh sa teachtaireacht earr√°ide ina bhfuil an macra <code>panic!</code>
ar a dtugtar, n√≠ l√≠ne √°r gc√≥d ba ch√∫is leis an nglao scaoll ar deireadh thiar.</p>
<!-- Old heading. Do not remove or links may break. -->
<p><a id="using-a-panic-backtrace"></a></p>
<p>Is f√©idir linn √∫s√°id a bhaint as aisrian na bhfeidhmeanna a th√°inig an glaoch <code>panic!</code> uathu go figi√∫r
amach an chuid d√°r gc√≥d at√° ag cruth√∫ na faidhbe. Chun tuiscint a fh√°il ar conas √© a √∫s√°id
c√∫l-lorg <code>panic!</code>, breathna√≠mis ar shampla eile agus f√©achaimis c√©n chaoi a bhfuil s√©
tagann glao <code>panic!</code> √≥ leabharlann mar gheall ar fhabht in√°r gc√≥d seachas
√≥n√°r gc√≥d ag glaoch ar an macra go d√≠reach. T√° c√≥d √©igin ag baint le liost√∫ 9-1
iarrachta√≠ rochtain a fh√°il ar inn√©acs i veicteoir at√° thar raon na n-inn√©acsanna bail√≠.</p>
<Listing number="9-1" file-name="src/main.rs" caption="Attempting to access an element beyond the end of a vector, which will cause a call to `panic!`">
<pre><pre class="playground"><code class="language-rust should_panic panics">fn main() {
    let v = vec![1, 2, 3];

    v[99];
}</code></pre></pre>
</Listing>
<p>Anseo, t√°imid ag iarraidh rochtain a fh√°il ar an 100√∫ eilimint d√°r veicteoir (at√° ag
inn√©acs 99 toisc go dtosa√≠onn an t-inn√©acs√∫ ag nialas), ach n√≠l ach tr√≠ cinn ag an veicteoir
eilimint√≠. Sa ch√°s seo, beidh Rust scaoll. Ag baint √∫s√°ide as <code>[]</code> at√° ceaptha a thabhairt ar ais
eilimint, ach m√° √©ir√≠onn leat inn√©acs neamhbhail√≠, n√≠l aon eilimint a chuireann Rust
d'fh√©adfadh filleadh anseo a bheadh ‚Äã‚Äãceart.</p>
<p>In C, n√≠l aon sainmh√≠ni√∫ ar iarracht l√©amh thar dheireadh strucht√∫ir sonra√≠
iompar. D'fh√©adf√° a fh√°il cib√© rud at√° ag an su√≠omh i gcuimhne a bheadh
fhreagra√≠onn don eilimint sin sa strucht√∫r sonra√≠, c√© go bhfuil an chuimhne
nach mbaineann leis an strucht√∫r sin. Tugtar <em>buffer overread</em> air seo agus is f√©idir
leochaileachta√≠ sl√°nd√°la a bheith mar thoradh air m√° t√° ionsaitheoir in ann an t-inn√©acs a ionramh√°il
sa chaoi is gur f√©idir sonra√≠ a l√©amh n√≠or cheart ligean d√≥ibh a st√≥r√°iltear ina dhiaidh sin
an strucht√∫r sonra√≠.</p>
<p>Chun do chl√°r a chosaint ar an gcine√°l seo leochaileachta, m√° dh√©anann t√∫ iarracht an
eilimint ag inn√©acs nach bhfuil ann, stopfaidh Rust a fhorghn√≠omh√∫ agus di√∫lt√≥idh s√©
ar aghaidh. D√©anaimis iarracht √© agus f√©ach:</p>
<pre><code class="language-console">$ cargo run
   Compiling panic v0.1.0 (file:///projects/panic)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.27s
     Running `target/debug/panic`
thread 'main' panicked at src/main.rs:4:6:
index out of bounds: the len is 3 but the index is 99
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>L√©ir√≠onn an earr√°id seo l√≠ne 4 d√°r <em>main.rs</em> √°it a nd√©anaimid iarracht an t-inn√©acs a rochtain
<code>99</code> den veicteoir in <code>v</code>.</p>
<p>Ins√≠onn an l√≠ne <code>n√≥ta:</code> d√∫inn gur f√©idir linn an timpeallacht <code>RUST_BACKTRACE</code> a shocr√∫
athr√≥g chun aisrian a fh√°il ar cad go d√≠reach a tharla chun an earr√°id a chur faoi deara. A
Is √©ard at√° i <em>backtrace</em> n√° liosta de na feidhmeanna go l√©ir a glaodh chun √© seo a bhaint amach
pointe. Oibr√≠onn backtraces in Rust mar a dh√©anann siad i dteangacha eile: an eochair do
Is √© an t-aisrian a l√©amh n√° tos√∫ √≥n mbarr agus l√©amh go dt√≠ go bhfeiceann t√∫ comhaid leat
scr√≠obh. Sin an √°it a dt√°inig an fhadhb. Na l√≠nte os cionn an spota sin
an c√≥d a d'iarr do ch√≥d; t√° na l√≠nte th√≠os c√≥d a dtugtar do
c√≥d. D'fh√©adfadh go n-√°ireofa√≠ ar na l√≠nte roimh agus tar √©is cro√≠ch√≥d Rust, caighde√°nach
c√≥d leabharlainne, n√≥ cliathbhosca√≠ at√° in √∫s√°id agat. D√©anaimis iarracht c√∫l-lorg a fh√°il
ag socr√∫ an athr√≥g timpeallachta <code>RUST_BACKTRACE</code> chuig aon luach seachas <code>0</code>.
L√©ir√≠onn liost√∫ 9-2 aschur at√° cos√∫il leis an m√©id a fheicfidh t√∫.</p>
<!-- manual-regeneration
cd listings/ch09-error-handling/listing-09-01
RUST_BACKTRACE=1 cargo run
copy the backtrace output below
check the backtrace number mentioned in the text below the listing
-->
<Listing number="9-2" caption="The backtrace generated by a call to `panic!` displayed when the environment variable `RUST_BACKTRACE` is set">
<pre><code class="language-console">$ RUST_BACKTRACE=1 cargo run
thread 'main' panicked at src/main.rs:4:6:
index out of bounds: the len is 3 but the index is 99
stack backtrace:
   0: rust_begin_unwind
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/std/src/panicking.rs:662:5
   1: core::panicking::panic_fmt
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/core/src/panicking.rs:74:14
   2: core::panicking::panic_bounds_check
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/core/src/panicking.rs:276:5
   3: &lt;usize as core::slice::index::SliceIndex&lt;[T]&gt;&gt;::index
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/core/src/slice/index.rs:302:10
   4: core::slice::index::&lt;impl core::ops::index::Index&lt;I&gt; for [T]&gt;::index
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/core/src/slice/index.rs:16:9
   5: &lt;alloc::vec::Vec&lt;T,A&gt; as core::ops::index::Index&lt;I&gt;&gt;::index
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/alloc/src/vec/mod.rs:2920:9
   6: panic::main
             at ./src/main.rs:4:6
   7: core::ops::function::FnOnce::call_once
             at /rustc/f6e511eec7342f59a25f7c0534f1dbea00d01b14/library/core/src/ops/function.rs:250:5
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
</code></pre>
</Listing>
<p>Sin go leor aschur! D'fh√©adfadh an t-aschur cruinn a fheiceann t√∫ a bheith difri√∫il ag brath
ar do ch√≥ras oibri√∫ch√°in agus leagan Rust. D'fhonn backtracks a fh√°il leis seo
faisn√©is, n√≠ m√≥r siombail√≠ d√≠fhabhtaithe a chumas√∫. T√° siombail√≠ d√≠fhabhtaithe cumasaithe ag
r√©amhshocraithe nuair a √∫s√°idtear <code>cargo build</code> n√≥ <code>cargo run</code> gan an bhratach <code>--release</code>,
mar at√° againn anseo.</p>
<p>San aschur i Liost√∫ 9-2, l√©ir√≠onn l√≠ne 6 den ch√∫lrian go dt√≠ an l√≠ne in√°r
tionscadal is c√∫is leis an bhfadhb: l√≠ne 4 de <em>src/main.rs</em>. M√°s rud √© nach bhfuil muid ag iarraidh
√°r gcl√°r chun scaoll, ba ch√≥ir d√∫inn t√∫s a chur len√°r n-imscr√∫d√∫ ag an su√≠omh a luaitear
go dt√≠ an ch√©ad l√≠ne ina luaitear comhad a scr√≠obh muid. I Liosta 9-1, √°it a bhfuilimid
scr√≠obh d'aon ghn√≥ c√≥d a bheadh ‚Äã‚Äãscaoll, is √© an bealach a shocr√∫ ar an scaoll gan
iarraidh eilimint thar raon na n-inn√©acsanna veicteora. Nuair a bheidh do c√≥d
scaoll amach anseo, beidh ort a dh√©anamh amach c√©n gn√≠omh at√° √° dh√©anamh ag an gc√≥d
cad iad na luachanna is c√∫is leis an scaoll agus cad ba cheart don ch√≥d a dh√©anamh ina ionad sin.</p>
<p>Tiocfaidh muid ar ais chuig <code>panic!</code> agus nuair ba cheart agus n√°r cheart d√∫inn <code>panic!</code> a √∫s√°id chun
l√°imhse√°il coinn√≠ollacha earr√°ide sa [‚ÄúChun <code>panic!</code> n√≥ Gan
<code>panic!</code>‚Äù][go-scaoll-n√≥-n√≠-scaoll]<!-- neamhaird a dh√©anamh ar --> alt n√≠os d√©ana√≠ sa mh√≠r seo
caibidil. Ansin, f√©achfaimid ar conas a ghn√≥th√∫ √≥ earr√°id ag baint √∫s√°ide as <code>Result</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="earr√°id√≠-inghn√≥thaithe-le-result"><a class="header" href="#earr√°id√≠-inghn√≥thaithe-le-result">Earr√°id√≠ Inghn√≥thaithe le <code>Result</code></a></h2>
<p>N√≠l formh√≥r na n-earr√°id√≠ tromch√∫iseach go leor chun a cheangal ar an gcl√°r stop ioml√°n.
Uaireanta nuair a theipeann ar fheidhm is ar ch√∫is is f√©idir leat a l√©irmh√≠ni√∫ go h√©asca
agus freagra a thabhairt ar. Mar shampla, m√° dh√©anann t√∫ iarracht comhad a oscailt agus go mainneoidh an oibr√≠ocht sin
toisc nach bhfuil an comhad ann, b'fh√©idir gur mhaith leat an comhad a chruth√∫ ina ionad
an pr√≥iseas a fhoirceannadh.</p>
<p>Athghairm √≥ <a href="ch02-00-guessing-game-tutorial.html#handling-potential-failure-with-result">‚ÄúL√°imhse√°il Teip F√©ideartha le <code>Result</code>‚Äù</a><!--
neamhaird a dh√©anamh ar --> i gCaibidil 2 go bhfuil dh√° shainmh√≠ni√∫ ar an enum <code>Result</code>
leaganacha, <code>Ok</code> agus <code>Err</code>, mar a leanas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Result&lt;T, E&gt; {
    Ok(T),
    Err(E),
}
<span class="boring">}</span></code></pre></pre>
<p>Is paraim√©adair chine√°lacha iad na <code>T</code> agus <code>E</code>: pl√©ifimid cine√°lacha n√≠os m√≥
mionsonra√≠ i gCaibidil 10. N√≠ m√≥r duit fios a bheith agat anois go seasann <code>T</code>
an cine√°l luacha a thabharfar ar ais i gc√°s ratha laistigh den <code>Ok</code>
athraitheach, agus seasann <code>E</code> don chine√°l earr√°ide a thabharfar ar ais in a
c√°s teipe laistigh den leagan <code>Err</code>. Toisc go bhfuil na cine√°lacha cine√°lacha seo ag <code>Result</code>
paraim√©adair, is f√©idir linn an cine√°l <code>Result</code> agus na feidhmeanna a shainmh√≠n√≠tear air a √∫s√°id
go leor c√°sanna √©ags√∫la ina bhfuil an luach ratha agus luach earr√°ide ba mhaith linn a
f√©adfaidh an t-aischur a bheith difri√∫il.</p>
<p>Glaoimis ar fheidhm a thugann luach `Tortha√≠' ar ais toisc go bhf√©adfadh an fheidhm
teip. I Liosta 9-3 d√©anaimid iarracht comhad a oscailt.</p>
<Listing number="9-3" file-name="src/main.rs" caption="Opening a file">
<pre><pre class="playground"><code class="language-rust">use std::fs::File;

fn main() {
    let greeting_file_result = File::open("hello.txt");
}</code></pre></pre>
</Listing>
<p>Is √© an cine√°l fillte ar <code>File::open</code> <code>Result&lt;T, E&gt;</code>. An paraim√©adar cine√°lach <code>T</code>
comhl√°naithe ag cur i bhfeidhm <code>File::open</code> le cine√°l an
luach ratha, <code>std::fs::File</code>, at√° ina l√°imhse√°il comhaid. An cine√°l <code>E</code> a √∫s√°idtear i
Is √© an luach earr√°ide <code>std::io::Error</code>. Cialla√≠onn an cine√°l fillte seo an glao chuig
Seans go n-√©ireodh le <code>File::open</code> agus go seolfar l√°imhse√°il comhaid ar f√©idir linn a l√©amh uaidh n√≥
scr√≠obh chuig. Seans go dteipfeadh ar an nglao feidhme freisin: mar shampla, seans nach mbeadh an comhad
ann, n√≥ seans nach bhfuil cead againn an comhad a rochtain. An <code>File::open</code>
n√≠ m√≥r go mbeadh bealach ag feidhm a insint d√∫inn c√© acu ar √©irigh leis n√≥ ar theip air agus ag
an t-am c√©anna a thabhairt d√∫inn ceachtar an l√°imhse√°il comhad n√≥ faisn√©is earr√°id. seo
Is √© an fhaisn√©is go d√≠reach a thugann an <code>Result</code> enum in i√∫l.</p>
<p>Sa ch√°s go n-√©ir√≠onn le <code>File::open</code>, an luach san athr√≥g
Beidh <code>greeting_file_result</code> ina shampla de <code>Ok</code> ina bhfuil l√°imhse√°il comhaid.
Sa ch√°s go dteipeann air, beidh an luach in <code>greeting_file_result</code> mar luach
instance of <code>Err</code> ina bhfuil tuilleadh eolais faoin gcine√°l earr√°ide a
tharla.</p>
<p>N√≠ m√≥r d√∫inn cur leis an gc√≥d i Liost√∫ 9-3 chun gn√≠omhartha √©ags√∫la a dh√©anamh ag brath
ar an luach tuairisce√°in <code>File::open</code>. L√©ir√≠onn liost√∫ 9-4 bealach amh√°in chun an
<code>Result</code> ag baint √∫s√°ide as uirlis bhun√∫sach, an abairt <code>match</code> a phl√©amar ann
Caibidil 6 .</p>
<Listing number="9-4" file-name="src/main.rs" caption="Using a `match` expression to handle the `Result` variants that might be returned">
<pre><pre class="playground"><code class="language-rust should_panic">use std::fs::File;

fn main() {
    let greeting_file_result = File::open("hello.txt");

    let greeting_file = match greeting_file_result {
        Ok(file) =&gt; file,
        Err(error) =&gt; panic!("Problem opening the file: {error:?}"),
    };
}</code></pre></pre>
</Listing>
<p>Tabhair faoi deara, cos√∫il leis an enum <code>Option</code>, go raibh an <code>Result</code> enum agus a leagan
tugtha isteach sa sc√≥ip ag an r√©amhr√°, mar sin n√≠ g√° d√∫inn <code>Result::</code> a shonr√∫
roimh na leaganacha <code>Ok</code> agus <code>Err</code> sna hairm <code>match</code>.</p>
<p>Nuair a bh√≠onn an toradh <code>Ok</code>, seolfaidh an c√≥d seo an luach <code>file</code> istigh as
an leagan <code>Ok</code>, agus ansin sannaimid an luach l√°imhse√°la comhaid sin don athr√≥g
<code>greeting_file</code>. Tar √©is an <code>match</code>, is f√©idir linn an l√°imhse√°il comhaid a √∫s√°id le haghaidh l√©amh n√≥
ag scr√≠obh.</p>
<p>L√°imhse√°lann an l√°mh eile den <code>match</code> an c√°s √≥na bhfaighimid luach <code>Err</code> uaidh
<code>File::open</code>. Sa sampla seo, roghnaigh muid an macra <code>panic!</code> a ghlaoch. M√°s rud √©
n√≠l aon chomhad darb ainm <em>hello.txt</em> in√°r n-eolaire reatha agus ritheann muid √© seo
c√≥d, feicfimid an t-aschur seo a leanas √≥n macra <code>panic!</code>:</p>
<pre><code class="language-console">$ cargo run
   Compiling error-handling v0.1.0 (file:///projects/error-handling)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.73s
     Running `target/debug/error-handling`
thread 'main' panicked at src/main.rs:8:23:
Problem opening the file: Os { code: 2, kind: NotFound, message: "No such file or directory" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>Mar is gn√°ch, cuireann an t-aschur seo in i√∫l d√∫inn go d√≠reach cad a chuaigh m√≠cheart.</p>
<h3 id="ag-meaitse√°il-ar-earr√°id√≠-difri√∫la"><a class="header" href="#ag-meaitse√°il-ar-earr√°id√≠-difri√∫la">Ag Meaitse√°il ar Earr√°id√≠ Difri√∫la</a></h3>
<p>Beidh <code>panic!</code> sa ch√≥d i Liost√∫ 9-4 is cuma c√©n f√°th ar theip ar <code>File::open</code>.
Mar sin f√©in, ba mhaith linn gn√≠omhartha √©ags√∫la a dh√©anamh ar ch√∫iseanna teipe √©ags√∫la. M√°s rud √©
Theip ar <code>Comhad::open</code> toisc nach bhfuil an comhad ann, ba mhaith linn an comhad a chruth√∫
agus cuir an l√°imhse√°il ar ais chuig an gcomhad nua. M√° theip ar <code>File::open</code> d'aon cheann eile
c√∫is - mar shampla, toisc nach raibh cead againn an comhad a oscailt - t√°imid f√≥s
Ba mhaith liom an c√≥d a <code>panic!</code> ar an mbealach c√©anna a rinne s√© i Liosta 9-4. Chun seo, t√°imid
cuir slonn <code>match</code> istigh leis, a thaispe√°ntar i Liost√∫ 9-5.</p>
<Listing number="9-5" file-name="src/main.rs" caption="Handling different kinds of errors in different ways">
<!-- ignore this test because otherwise it creates hello.txt which causes other
tests to fail lol -->
<pre><code class="language-rust ignore">use std::fs::File;
use std::io::ErrorKind;

fn main() {
    let greeting_file_result = File::open("hello.txt");

    let greeting_file = match greeting_file_result {
        Ok(file) =&gt; file,
        Err(error) =&gt; match error.kind() {
            ErrorKind::NotFound =&gt; match File::create("hello.txt") {
                Ok(fc) =&gt; fc,
                Err(e) =&gt; panic!("Problem creating the file: {e:?}"),
            },
            other_error =&gt; {
                panic!("Problem opening the file: {other_error:?}");
            }
        },
    };
}</code></pre>
</Listing>
<p>Is √© an cine√°l luacha a fhilleann <code>File::open</code> taobh istigh den leagan <code>Err</code>
<code>io::Error</code>, ar strucht√∫r √© a shol√°thra√≠onn an leabharlann chaighde√°nach. An strucht√∫r seo
t√° modh <code>kind</code> aige ar f√©idir linn glaoch air chun luach <code>io::ErrorKind</code> a fh√°il. An enum
Sol√°thra√≠onn an leabharlann chaighde√°nach <code>io::ErrorKind</code> agus t√° leaganacha eile ann
ag l√©iri√∫ na gcine√°lacha √©ags√∫la earr√°id√≠ a d'fh√©adfadh teacht as <code>io</code>
oibr√≠ocht. Is √© an leagan is mian linn a √∫s√°id n√° <code>ErrorKind::NotFound</code>, a thugann le fios
n√≠l an comhad at√°imid ag iarraidh a oscailt ann f√≥s. Mar sin t√°imid ag meaitse√°il ar
<code>greeting_file_result</code>, ach t√° meaitse√°il istigh againn freisin ar <code>error.kind()</code>.</p>
<p>Is √© an coinn√≠oll ba mhaith linn a sheice√°il sa chluiche inmhe√°nach n√° an bhfuil an luach ar ais
le <code>error.kind()</code> an leagan <code>NotFound</code> den enum <code>ErrorKind</code>. M√° t√°,
d√©anaimid iarracht an comhad a chruth√∫ le <code>File::create</code>. Mar sin f√©in, mar gheall ar <code>File::create</code>
d'fh√©adfadh teip freisin, n√≠ m√≥r d√∫inn an dara l√°mh sa abairt <code>match</code> istigh. Nuair a bheidh an
n√≠ f√©idir an comhad a chruth√∫, priont√°iltear teachtaireacht earr√°ide eile. An dara l√°mh de
fanann an <code>match</code> seachtrach mar an gc√©anna, mar sin scaoll an chl√°ir ar aon earr√°id seachas
an earr√°id chomhaid at√° ar iarraidh.</p>
<blockquote>
<h4 id="roghanna-eile-seachas-match-a-√∫s√°id-le-resultt-e"><a class="header" href="#roghanna-eile-seachas-match-a-√∫s√°id-le-resultt-e">Roghanna eile seachas <code>match</code> a √∫s√°id le <code>Result&lt;T, E&gt;</code></a></h4>
<p>Sin go leor <code>match</code>! T√° an abairt <code>match</code> an-√∫s√°ideach ach an-√∫s√°ideach freisin
i bhfad primitive. I gCaibidil 13, foghlaimeoidh t√∫ faoi dh√∫nadh, a √∫s√°idtear
le go leor de na modhanna at√° sainmh√≠nithe ar <code>Result&lt;T, E&gt;</code>. Is f√©idir na modhanna seo a bheith n√≠os m√≥
gonta n√° <code>match</code> a √∫s√°id agus luachanna <code>Result&lt;T, E&gt;</code> i do ch√≥d √° l√°imhse√°il.</p>
<p>Mar shampla, seo bealach eile chun an loighic ch√©anna a scr√≠obh mar a l√©ir√≠tear i Liost√∫
9-5, an uair seo ag baint √∫s√°ide as d√∫nta agus an modh <code>unwrap_or_else</code>:</p>
<!-- N√ç F√âIDIR Sliocht F√âACH https://github.com/rust-lang/mdBook/issues/1127 -->
<pre><code class="language-rust ignore">use std::fs::File;
use std::io::ErrorKind;

fn main() {
    let greeting_file = File::open("hello.txt").unwrap_or_else(|error| {
        if error.kind() == ErrorKind::NotFound {
            File::create("hello.txt").unwrap_or_else(|error| {
                panic!("Problem creating the file: {error:?}");
            })
        } else {
            panic!("Problem opening the file: {error:?}");
        }
    });
}</code></pre>
<p>C√© go bhfuil an t-iompar c√©anna ag an gc√≥d seo agus at√° i Liost√∫ 9-5, n√≠l s√© ann
aon nathanna <code>match</code> at√° n√≠os glaine le l√©amh. Tar ar ais chuig an sampla seo
tar √©is duit Caibidil 13 a l√©amh, agus breathnaigh ar an modh <code>unwrap_or_else</code> sa
doicim√©id chaighde√°nacha leabharlainne. Is f√©idir le go leor n√≠os m√≥ de na modhanna seo a ghlanadh ollmh√≥r
neadaigh na habairt√≠ <code>match</code> agus t√∫ ag d√©ile√°il le hearr√°id√≠.</p>
</blockquote>
<h4 id="aicearra√≠-le-haghaidh-scaoill-ar-earr√°id-unwrap-agus-expect"><a class="header" href="#aicearra√≠-le-haghaidh-scaoill-ar-earr√°id-unwrap-agus-expect">Aicearra√≠ le haghaidh Scaoill ar Earr√°id: <code>unwrap</code> agus <code>expect</code></a></h4>
<p>Oibr√≠onn baint √∫s√°ide as <code>match</code> go maith go leor, ach f√©adann s√© a bheith beag√°n briathartha agus n√≠ bh√≠onn s√© i gc√≥na√≠
r√∫n a chur in i√∫l go maith. T√° go leor modhanna c√∫nt√≥ra ag an gcine√°l <code>Result&lt;T, E&gt;</code>
sainithe air chun tascanna √©ags√∫la, n√≠os saini√∫la a dh√©anamh. Is √© an modh <code>unwrap</code> a
modh aicearra curtha i bhfeidhm d√≠reach cos√∫il leis an slonn <code>match</code> a scr√≠obh muid ann
Liost√°il 9-4. M√°s √© an luach <code>Result</code> an leagan <code>Ok</code>', fillfidh <code>unwrap</code>
an luach taobh istigh den <code>Ok</code>. M√°s √© an <code>Result</code> an leagan <code>Err</code>, d√©anfaidh <code>unwrap</code>
cuir glaoch ar an macra <code>panic!</code> d√∫inn. Seo sampla de <code>unwrap</code> i ngn√≠omh:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust should_panic">use std::fs::File;

fn main() {
    let greeting_file = File::open("hello.txt").unwrap();
}</code></pre></pre>
</Listing>
<p>M√° rithimid an c√≥d seo gan comhad <em>hello.txt</em>, feicfidh muid teachtaireacht earr√°ide uaidh
an glao <code>panic!</code> a dh√©anann an modh <code>unwrap</code>:</p>
<!-- manual-regeneration
cd listings/ch09-error-handling/no-listing-04-unwrap
cargo run
copy and paste relevant text
-->
<pre><code class="language-text">thread 'main' panicked at src/main.rs:4:49:
called `Result::unwrap()` on an `Err` value: Os { code: 2, kind: NotFound, message: "No such file or directory" }
</code></pre>
<p>Mar an gc√©anna, ligeann an modh <code>expect</code> d√∫inn an teachtaireacht earr√°ide <code>panic!</code> a roghn√∫ freisin.
Is f√©idir √∫s√°id a bhaint as <code>expect</code> in ionad <code>unwrap</code>' agus ag sol√°thar teachtaireachta√≠ earr√°ide maithe
do r√∫n agus a dh√©anamh rian√∫ s√≠os an fhoinse scaoll n√≠os √©asca. Comhr√©ir na
Breathna√≠onn <code>expect</code> mar seo:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust should_panic">use std::fs::File;

fn main() {
    let greeting_file = File::open("hello.txt")
        .expect("hello.txt should be included in this project");
}</code></pre></pre>
</Listing>
<p>Bainimid √∫s√°id as <code>expect</code> ar an mbealach c√©anna le <code>unwrap</code>: chun l√°imhse√°il an chomhaid n√≥ glao a chur ar ais
an macra <code>panic!</code>. An teachtaireacht earr√°ide a √∫s√°ideann <code>expect</code> ina ghlao ar <code>panic!</code>
an paraim√©adar a thabharfaimid ar aghaidh chuig <code>expect</code>, seachas an r√©amhshocr√∫
teachtaireacht <code>panic!</code> a √∫s√°ideann <code>unwrap</code>. Seo an chuma at√° air:</p>
<!-- manual-regeneration
cd listings/ch09-error-handling/no-listing-05-expect
cargo run
copy and paste relevant text
-->
<pre><code class="language-text">thread 'main' panicked at src/main.rs:5:10:
hello.txt should be included in this project: Os { code: 2, kind: NotFound, message: "No such file or directory" }
</code></pre>
<p>I gc√≥d c√°il√≠ochta t√°irgthe, roghna√≠onn an chuid is m√≥ de na Rustaceans <code>expect</code> seachas
<code>unwrap</code> agus tabhair comhth√©acs n√≠os m√≥ faoi na f√°thanna a bhfuiltear ag s√∫il go mbeidh an oibr√≠ocht i gc√≥na√≠
√©irigh. Ar an mbealach sin, m√° chrutha√≠tear go bhfuil do chuid boinn tuisceana m√≠cheart riamh, t√° n√≠os m√≥ agat
faisn√©is le h√∫s√°id le linn d√≠fhabhtaithe.</p>
<h3 id="earr√°id√≠-iomadaithe"><a class="header" href="#earr√°id√≠-iomadaithe">Earr√°id√≠ Iomadaithe</a></h3>
<p>Nuair a ghlaonn feidhmi√∫ feidhme rud √©igin a d‚Äôfh√©adfadh teip, ina ionad
l√°imhse√°il an earr√°id laistigh den fheidhm f√©in is f√©idir leat an earr√°id ar ais chuig an
c√≥d glaonna ionas gur f√©idir leis cinneadh a dh√©anamh ar cad at√° le d√©anamh. Tugtar <em>iomad√∫</em> air seo
an earr√°id agus tugann s√© n√≠os m√≥ smachta ar an gc√≥d glaonna, √°it a bhf√©adfadh n√≠os m√≥ a bheith ann
faisn√©is n√≥ loighic a orda√≠onn conas ba ch√≥ir an earr√°id a l√°imhse√°il n√° cad
at√° ar f√°il duit i gcomhth√©acs do ch√≥d.</p>
<p>Mar shampla, taispe√°nann Liost√∫ 9-6 feidhm a l√©ann ainm √∫s√°ideora √≥ chomhad. M√°s rud √©
n√≠l an comhad ann n√≥ n√≠ f√©idir √© a l√©amh, cuirfidh an fheidhm seo na hearr√°id√≠ sin ar ais
chuig an gc√≥d ar a dtugtar an fheidhm.</p>
<Listing number="9-6" file-name="src/main.rs" caption="A function that returns errors to the calling code using `match`">
<!-- Deliberately not using rustdoc_include here; the `main` function in the
file panics. We do want to include it for reader experimentation purposes, but
don't want to include it for rustdoc testing purposes. -->
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::io::{self, Read};

fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {
    let username_file_result = File::open("hello.txt");

    let mut username_file = match username_file_result {
        Ok(file) =&gt; file,
        Err(e) =&gt; return Err(e),
    };

    let mut username = String::new();

    match username_file.read_to_string(&amp;mut username) {
        Ok(_) =&gt; Ok(username),
        Err(e) =&gt; Err(e),
    }
}
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is f√©idir an fheidhm seo a scr√≠obh ar bhealach i bhfad n√≠os giorra, ach t√°imid chun tos√∫ ag
go leor de a dh√©anamh de l√°imh chun l√°imhse√°il earr√°id√≠ a ini√∫chadh; ag deireadh,
taispe√°nfaimid an bealach is giorra. Breathna√≠mid ar an gcine√°l aischuir den fheidhm
ar dt√∫s: <code>Result&lt;String, io::Error&gt;</code>. Cialla√≠onn s√© seo go bhfuil an fheidhm ag filleadh a
luach an chine√°il <code>Result&lt;T, E&gt;</code>, √°it a bhfuil an paraim√©adar cine√°lach <code>T</code> curtha
l√≠onadh isteach leis an gcine√°l coincr√©ite <code>String</code> agus an cine√°l cine√°lach <code>E</code> curtha
l√≠onadh isteach leis an gcine√°l coincr√©ite <code>io::Error</code>.</p>
<p>M√° √©ir√≠onn leis an bhfeidhm seo gan aon fhadhbanna, is √© an c√≥d a ghlaonn seo
gheobhaidh an fheidhm luach <code>Ok</code> a shealbha√≠onn <code>String</code> - an <code>username</code> sin
l√©igh an fheidhm seo √≥n gcomhad. M√° bh√≠onn aon fhadhbanna ag an bhfeidhm seo, beidh an
gheobhaidh c√≥d glaonna luach <code>Err</code> a bhfuil sampla de <code>io::Error</code> ann
go bhfuil tuilleadh eolais faoi cad a bh√≠ ar na fadhbanna. Roghnaigh muid
<code>io::Error</code> mar chine√°l tuairisce√°in na feidhme seo toisc go dtarla√≠onn s√© gurb √© sin an
cine√°l an luach earr√°ide a fuarthas ar ais √≥n d√° oibr√≠ocht a bhfuilimid ag glaoch isteach
corp na feidhme seo a d‚Äôfh√©adfadh a theipeann: an fheidhm <code>File::open</code> agus an
modh <code>read_to_string</code>.</p>
<p>Tosa√≠onn corp na feidhme tr√≠ ghlao a chur ar an bhfeidhm <code>File::open</code>. Ansin muid
l√°imhse√°il an luach <code>Result</code> le <code>match</code> cos√∫il leis an <code>match</code> i Liost√∫ 9-4.
M√° √©ir√≠onn le <code>File::open</code>, l√°imhse√°il an chomhaid san athr√≥g patr√∫n <code>file</code>
thiocfaidh chun bheith ina luach san athr√≥g mutable <code>username_file</code> agus an fheidhm
leanann. Sa ch√°s <code>Err</code>, in ionad <code>panic!</code> a ghlaoch, √∫s√°idimid an <code>return</code>
eochairfhocal a thabhairt ar ais go luath amach as an fheidhm go hioml√°n agus pas a fh√°il sa luach earr√°ide
√≥ <code>File::open</code>, anois san athr√≥g patr√∫n <code>e</code>, ar ais go dt√≠ an c√≥d glaonna mar
luach earr√°ide na feidhme seo.</p>
<p>Mar sin, m√° t√° l√°imhse√°il comhaid againn in <code>username_file</code>, crutha√≠onn an fheidhm ansin a
nua <code>String</code> in athr√≥g <code>username</code> agus cuireann s√© an modh <code>read_to_string</code> ar si√∫l
l√°imhse√°il an chomhaid in <code>username_file</code> chun √°bhar an chomhaid a l√©amh isteach
<code>username</code>. Tugann an modh <code>read_to_string</code> <code>Result</code> ar ais freisin mar gheall air
b'fh√©idir go dteipfeadh, c√© gur √©irigh le <code>File::open</code>. Mar sin teasta√≠onn <code>comait</code> eile uainn
l√°imhse√°il an <code>Result</code> sin: m√° √©ir√≠onn le <code>read_to_string</code>, ansin t√° an fheidhm at√° againn
√©irigh leis, agus cuirimid an t-ainm √∫s√°ideora ar ais √≥n gcomhad at√° in <code>username</code> anois
fillte i <code>Ok</code>. M√° theipeann ar <code>read_to_string</code>, cuirimid ar ais an luach earr√°ide sa
ar an mbealach c√©anna a thugamar ar ais an luach earr√°ide sa <code>match</code> a l√°imhse√°il an
luach aischuir <code>File::open</code>. Mar sin f√©in, n√≠ g√° d√∫inn a r√° go soil√©ir
<code>return</code>, mar is √© seo an slonn deiridh san fheidhm.</p>
<p>Ansin l√°imhse√°lfaidh an c√≥d a ghlaonn an c√≥d seo luach <code>Ok</code> a fh√°il
ina bhfuil ainm √∫s√°ideora n√≥ luach <code>Err</code> ina bhfuil <code>io::Error</code>. T√° s√©
suas go dt√≠ an c√≥d glaonna chun cinneadh a dh√©anamh cad ba cheart a dh√©anamh leis na luachanna sin. M√° t√° an glaoch
Faigheann c√≥d luach <code>Err</code>, d'fh√©adfadh s√© <code>panic!</code> a ghlaoch agus an cl√°r a thuairte√°il, bain √∫s√°id as a
ainm √∫s√°ideora r√©amhshocraithe, n√≥ f√©ach ar an ainm √∫s√°ideora √≥ √°it √©igin eile seachas comhad, le haghaidh
shampla. N√≠l go leor faisn√©ise againn maidir le cad √© an c√≥d glaonna i nd√°ir√≠re
ag iarraidh a dh√©anamh, mar sin t√°imid ag iomad√∫ gach eolas faoi rath n√≥ earr√°id an√≠os le haghaidh
√© a l√°imhse√°il go cu√≠.</p>
<p>T√° patr√∫n seo na n-earr√°id√≠ iomadaithe chomh coitianta i Rust go sol√°thra√≠onn Rust an
oibreoir comhartha ceiste <code>?</code> chun √© seo a dh√©anamh n√≠os √©asca.</p>
<h4 id="aicearra-le-haghaidh-earr√°id√≠-iomadaithe-an-t-oibreoir-"><a class="header" href="#aicearra-le-haghaidh-earr√°id√≠-iomadaithe-an-t-oibreoir-">Aicearra le haghaidh Earr√°id√≠ Iomadaithe: an t-oibreoir <code>?</code></a></h4>
<p>L√©ir√≠onn liost√∫ 9-7 cur i bhfeidhm <code>read_username_from_file</code> a bhfuil an
feidhmi√∫lacht ch√©anna agus at√° i Liost√∫ 9-6, ach √∫s√°ideann an cur i bhfeidhm seo an <code>?</code>
oibreoir.</p>
<Listing number="9-7" file-name="src/main.rs" caption="A function that returns errors to the calling code using the `?` operator">
<!-- Deliberately not using rustdoc_include here; the `main` function in the
file panics. We do want to include it for reader experimentation purposes, but
don't want to include it for rustdoc testing purposes. -->
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::io::{self, Read};

fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {
    let mut username_file = File::open("hello.txt")?;
    let mut username = String::new();
    username_file.read_to_string(&amp;mut username)?;
    Ok(username)
}
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Sainmh√≠n√≠tear an <code>?</code> a chuirtear i ndiaidh luach <code>Result</code> chun oibri√∫ ar an mbealach c√©anna beagnach
mar na habairt√≠ <code>match</code> a shainmh√≠omar chun na luachanna <code>Result</code> sa Liost√∫ a l√°imhse√°il
9-6. M√°s <code>OK</code> luach an <code>Result</code>, d√©anfaidh an luach taobh istigh den <code>Ok</code>
faigh ar ais √≥n slonn seo, agus leanfaidh an cl√°r ar aghaidh. M√° t√° an luach
is an <code>Err</code>, cuirfear an <code>Err</code> ar ais √≥n bhfeidhm ioml√°n amhail is d√° mbeadh
d'√∫s√°id an eochairfhocal <code>return</code> ionas go n-aistr√≠tear luach na hearr√°ide chuig an nglao
c√≥d.</p>
<p>T√° difr√≠ocht idir cad a dh√©anann an slonn <code>match</code> √≥ Liosta 9-6
agus cad a dh√©anann an t-oibreoir <code>?</code>: luachanna earr√°ide ar a dtugtar an t-oibreoir <code>?</code>
orthu dul tr√≠d an bhfeidhm <code>√≥</code>, sainmh√≠nithe sa <code>√ì</code> trait sa
leabharlann caighde√°nach, a √∫s√°idtear chun luachanna a thiont√∫ √≥ chine√°l amh√°in go cine√°l eile.
Nuair a ghlaonn an t-oibreoir <code>?</code> ar an bhfeidhm <code>√≥</code>, is √© an cine√°l earr√°ide a fhaightear
thiont√∫ go cine√°l earr√°ide at√° sainithe i gcine√°l tuairisce√°in an tsrutha
feidhm. T√° s√© seo √∫s√°ideach nuair a fhilleann feidhm cine√°l earr√°ide amh√°in chun a l√©iri√∫
na beala√≠ ar fad a d'fh√©adfadh feidhm a theipeann, fi√∫ d√° dteipfeadh ar ph√°irteanna do go leor cine√°lacha √©ags√∫la
c√∫iseanna.</p>
<p>Mar shampla, d'fh√©adfaimis an fheidhm <code>read_username_from_file</code> a athr√∫ i Liost√∫
9-7 chun cine√°l earr√°ide saincheaptha darb ainm <code>OurError</code> a shain√≠mid a thabhairt ar ais. M√° t√°imid freisin
sainmh√≠nigh <code>impl From&lt;io::Error&gt; for OurError</code> chun sampla de
<code>OurError</code> √≥ <code>io::Error</code>, ansin glaonna an t-oibreoir <code>?</code> i gcorp na
Cuirfidh <code>read_username_from_file</code> glaoch ar <code>√≥</code> agus tiont√≥idh s√© na cine√°lacha earr√°ide gan
g√° c√≥d ar bith eile a chur leis an bhfeidhm.</p>
<p>I gcomhth√©acs Liost√∫ 9-7, beidh an <code>?</code> ag deireadh an ghlao <code>File::open</code>
cuir an luach taobh istigh de <code>OK</code> ar ais chuig an athr√≥g <code>username_file</code>. M√°s earr√°id
tharla√≠onn, beidh an t-oibreoir <code>?</code> ar ais go luath as an fheidhm ioml√°n agus a thabhairt
aon luach 'Earr√°id' leis an gc√≥d glaonna. Baineann an rud c√©anna leis an <code>?</code> ag an
deireadh an ghlao <code>read_to_string</code>.</p>
<p>Cuireann an t-oibreoir <code>?</code> deireadh le go leor pl√°ta coire agus d√©anann s√© an fheidhm seo
cur i bhfeidhm n√≠os simpl√≠. D'fh√©adfaimis an c√≥d seo a ghiorr√∫ n√≠os faide fi√∫ tr√≠ shlabhrai√∫
glaonna modh d√≠reach tar √©is an <code>?</code>, mar a thaispe√°ntar i Liosta 9-8.</p>
<Listing number="9-8" file-name="src/main.rs" caption="Chaining method calls after the `?` operator">
<!-- Deliberately not using rustdoc_include here; the `main` function in the
file panics. We do want to include it for reader experimentation purposes, but
don't want to include it for rustdoc testing purposes. -->
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::io::{self, Read};

fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {
    let mut username = String::new();

    File::open("hello.txt")?.read_to_string(&amp;mut username)?;

    Ok(username)
}
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>T√°imid tar √©is cruth√∫ na <code>String</code> nua in <code>username</code> a bhogadh go dt√≠ t√∫s na
an fheidhm; n√≠l aon athr√∫ ar an gcuid sin. In ionad athr√≥g a chruth√∫
<code>username_file</code>, shlabhra√≠omar an glao go <code>read_to_string</code> d√≠reach ar an
toradh <code>Comhad::open("hello.txt")?</code>. T√° <code>?</code> f√≥s againn ag deireadh an
glao <code>read_to_string</code>, agus tugaimid ar ais f√≥s luach <code>OK</code> ina bhfuil <code>username</code>
nuair a √©ir√≠onn leis an d√° <code>File::open</code> agus <code>read_to_string</code> seachas filleadh
earr√°id√≠. T√° an fheidhmi√∫lacht mar an gc√©anna ar√≠s agus at√° i Liost√∫ 9-6 agus Liost√∫ 9-7;
n√≠l anseo ach bealach difri√∫il, n√≠os eirgeanama√≠ochta chun √© a scr√≠obh.</p>
<p>L√©ir√≠onn liost√∫ 9-9 bealach chun √© seo a dh√©anamh n√≠os giorra f√≥s tr√≠ √∫s√°id a bhaint as <code>fs::read_to_string</code>.</p>
<Listing number="9-9" file-name="src/main.rs" caption="Using `fs::read_to_string` instead of opening and then reading the file">
<!-- Deliberately not using rustdoc_include here; the `main` function in the
file panics. We do want to include it for reader experimentation purposes, but
don't want to include it for rustdoc testing purposes. -->
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs;
use std::io;

fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {
    fs::read_to_string("hello.txt")
}
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is oibr√≠ocht choitianta go leor √© comhad a l√©amh ina teaghr√°n, mar sin an caighde√°n
sol√°thra√≠onn an leabharlann an fheidhm √°isi√∫il <code>fs::read_to_string</code> a oscla√≠onn an
comhad, crutha√≠onn s√© <code>String</code> nua, l√©ann inneachar an chomhaid, cuireann s√© an t-√°bhar
isteach sa <code>String</code> sin, agus ar ais √©. Ar nd√≥igh, ag baint √∫s√°ide as <code>fs::read_to_string</code>
N√≠ thugann s√© seo an deis d√∫inn an l√°imhse√°il earr√°ide go l√©ir a mh√≠ni√∫, mar sin rinneamar √©
an bealach is faide ar dt√∫s.</p>
<h4 id="an-√Åit-ar-f√©idir-an-toibreoir--a-√ös√°id"><a class="header" href="#an-√Åit-ar-f√©idir-an-toibreoir--a-√ös√°id">An √Åit ar f√©idir an tOibreoir <code>?</code> a √ös√°id</a></h4>
<p>N√≠ f√©idir an t-oibreoir <code>?</code> a √∫s√°id ach amh√°in i bhfeidhmeanna a bhfuil a gcine√°l fillte comhoiri√∫nach
leis an luach a √∫s√°idtear an <code>?</code> ar. T√° s√© seo toisc go bhfuil an t-oibreoir <code>?</code> sainmh√≠nithe
chun luach a chur ar ais go luath as an bhfeidhm, ar an mbealach c√©anna
mar an slonn <code>match</code> a shainmh√≠n√≠omar i Liost√∫ 9-6. I Liosta 9-6, t√° an
Bh√≠ <code>match</code> ag baint √∫s√°ide as luach <code>Result</code>, agus thug an l√°mh fillte luath ar ais an
luach <code>Err(e)</code>. Caithfidh <code>Result</code> a bheith i gcine√°l aischuir na feidhme ionas go mbeidh
t√° s√© ag lu√≠ leis an <code>return</code> seo.</p>
<p>I Liost√∫ 9-10, breathna√≠mid ar an earr√°id a gheobhaidh muid m√° √∫s√°idimid an t-oibreoir <code>?</code>
i bhfeidhm <code>main</code> le cine√°l tuairisce√°in nach lu√≠onn leis an gcine√°l
an luach a √∫s√°idimid <code>?</code> ar.</p>
<Listing number="9-10" file-name="src/main.rs" caption="Attempting to use the `?` in the `main` function that returns `()` won‚Äôt compile.">
<pre><code class="language-rust ignore does_not_compile">use std::fs::File;

fn main() {
    let greeting_file = File::open("hello.txt")?;
}</code></pre>
</Listing>
<p>Oscla√≠onn an c√≥d seo comhad, rud a d'fh√©adfadh teip. Leanann an t-oibreoir <code>?</code> an <code>Result</code>
luach ar ais le <code>File::open</code>, ach t√° an cine√°l tuairisce√°in ag an bpr√≠omhfheidhm seo
<code>()</code>, n√≠ <code>Result</code>. Nuair a dh√©anaimid an c√≥d seo a thioms√∫, faigheann muid an earr√°id seo a leanas
teachtaireacht:</p>
<pre><code class="language-console">$ cargo run
   Compiling error-handling v0.1.0 (file:///projects/error-handling)
error[E0277]: the `?` operator can only be used in a function that returns `Result` or `Option` (or another type that implements `FromResidual`)
 --&gt; src/main.rs:4:48
  |
3 | fn main() {
  | --------- this function should return `Result` or `Option` to accept `?`
4 |     let greeting_file = File::open("hello.txt")?;
  |                                                ^ cannot use the `?` operator in a function that returns `()`
  |
  = help: the trait `FromResidual&lt;Result&lt;Infallible, std::io::Error&gt;&gt;` is not implemented for `()`
help: consider adding return type
  |
3 ~ fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
4 |     let greeting_file = File::open("hello.txt")?;
5 +     Ok(())
  |

For more information about this error, try `rustc --explain E0277`.
error: could not compile `error-handling` (bin "error-handling") due to 1 previous error
</code></pre>
<p>L√©ir√≠onn an earr√°id seo nach bhfuil cead againn ach an t-oibreoir <code>?</code> a √∫s√°id in a
feidhm a fhilleann <code>Result</code>, <code>Option</code>, n√≥ cine√°l eile a chuireann i bhfeidhm
<code>FromResidual</code>.</p>
<p>Chun an earr√°id a shocr√∫, t√° dh√° rogha agat. Rogha amh√°in is ea an cine√°l tuairisce√°in a athr√∫
d‚Äôfheidhm a bheith comhoiri√∫nach leis an luach at√° √° √∫s√°id agat as an oibreoir <code>?</code>
ar chomh fada agus nach bhfuil aon srianta agat chun √© sin a chosc. Is √© an rogha eile a
bain √∫s√°id as <code>match</code> n√≥ ceann de na modhanna <code>Result&lt;T, E&gt;</code> chun <code>Result&lt;T, E&gt;</code> a l√°imhse√°il
p√© sl√≠ is cu√≠.</p>
<p>Luaigh an teachtaireacht earr√°ide freisin gur f√©idir <code>?</code> a √∫s√°id le luachanna <code>Option&lt;T&gt;</code>
chomh maith. Mar is amhlaidh le h√∫s√°id <code>?</code> ar <code>Result</code>, n√≠ f√©idir leat ach <code>?</code> a √∫s√°id ar <code>Option</code> in a
feidhm a thugann <code>Option</code> ar ais. Iompar an oibreora <code>?</code> nuair a ghlaoitear air
ar <code>Option&lt;T&gt;</code> at√° cos√∫il lena hiompra√≠ocht nuair a ghlaoitear air ar <code>Result&lt;T, E&gt;</code>:
m√°s √© an luach <code>None</code>, cuirfear an <code>None</code> ar ais go luath √≥n bhfeidhm ag
an pointe sin. M√°s <code>Some</code> an luach, is √© an luach taobh istigh den <code>Some</code> an
luach iarmhartach an slonn, agus leanann an fheidhm. Ag liost√∫ 9-11 t√°
sampla d‚Äôfheidhm a aims√≠onn carachtar deiridh na ch√©ad l√≠ne sa
t√©acs tugtha.</p>
<Listing number="9-11" caption="Using the `?` operator on an `Option<T>` value">
<pre><pre class="playground"><code class="language-rust">fn last_char_of_first_line(text: &amp;str) -&gt; Option&lt;char&gt; {
    text.lines().next()?.chars().last()
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    assert_eq!(
</span><span class="boring">        last_char_of_first_line("Hello, world\nHow are you today?"),
</span><span class="boring">        Some('d')
</span><span class="boring">    );
</span><span class="boring">
</span><span class="boring">    assert_eq!(last_char_of_first_line(""), None);
</span><span class="boring">    assert_eq!(last_char_of_first_line("\nhi"), None);
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Filleann an fheidhm seo <code>Option &lt;char&gt;</code> toisc go bhfuil seans ann go bhfuil
carachtar ann, ach is f√©idir freisin nach bhfuil. Glacann an c√≥d seo an
arg√≥int slisnithe teaghr√°n <code>text</code> agus glaoitear an modh <code>lines</code> air, a fhilleann
iterator thar na l√≠nte sa t√©ad. Toisc gur mian leis an fheidhm seo
scr√∫daigh an ch√©ad l√≠ne, glaonn s√© <code>next</code> ar an atriallt√≥ir chun an ch√©ad luach a fh√°il
√≥n iterator. M√°s √© <code>text</code> an teaghr√°n folamh, d√©anfaidh an glao seo go <code>next</code>
tabhair <code>None</code> ar ais, agus sa ch√°s sin √∫s√°idimid <code>?</code> chun <code>None</code> a stopadh agus a thabhairt ar ais √≥
<code>last_char_of_first_line</code>. Murab √© <code>text</code> an teaghr√°n folamh, d√©anfaidh <code>next</code>
cuir ar ais luach <code>Some</code> ina bhfuil sreang√°n den ch√©ad l√≠ne i <code>text</code>.</p>
<p>Sliocht an <code>?</code> an t√©ad sliseog, agus is f√©idir linn <code>chars</code> a ghlaoch ar an t√©adshlis sin
chun iterator a fh√°il ar a charachtair. T√° suim againn sa charachtar deireanach i
an ch√©ad l√≠ne seo, mar sin tugaimid <code>last</code> chun an mh√≠r dheiridh san atriallt√≥ir a thabhairt ar ais.
Is <code>Option</code> √© seo mar is f√©idir gur folamh an ch√©ad l√≠ne
t√©ad ; mar shampla, m√° thosa√≠onn <code>text</code> le l√≠ne bh√°n ach go bhfuil carachtair air
l√≠nte eile, mar at√° in <code>"\nhi"</code>. Mar sin f√©in, m√° t√° carachtar deireanach ar an gc√©ad
l√≠ne, cuirfear ar ais √© sa leagan <code>Some</code>. An t-oibreoir <code>?</code> sa l√°r
tugann s√© bealach gonta d√∫inn leis an loighic seo a chur in i√∫l, rud a ligeann d√∫inn cur i bhfeidhm an
feidhm i l√≠ne amh√°in. Mura bhf√©adfaimis an t-oibreoir <code>?</code> a √∫s√°id ar <code>Option</code>, bheimis
caithfidh siad an loighic seo a chur i bhfeidhm ag baint √∫s√°ide as tuilleadh glaonna modha n√≥ slonn <code>match</code>.</p>
<p>Tabhair faoi deara gur f√©idir leat an t-oibreoir <code>?</code> a √∫s√°id ar <code>Result</code> in fheidhm a fhilleann
<code>Result</code>, agus is f√©idir leat an t-oibreoir <code>?</code> a √∫s√°id ar <code>Option</code> san fheidhm a
Filleann s√© <code>Option</code>, ach n√≠ f√©idir leat a mheascadh agus a mheaitse√°il. N√≠ dh√©anfaidh an t-oibreoir <code>?</code>
tiontaigh <code>Result</code> go huathoibr√≠och go <code>Option</code> n√≥ vice versa; sna c√°sanna sin,
is f√©idir leat modhanna a √∫s√°id mar an modh <code>ok</code> ar <code>Result</code> n√≥ an modh <code>ok_or</code> ar
<code>Option</code> chun an comhsh√≥ a dh√©anamh go sainr√°ite.</p>
<p>Go dt√≠ seo, filleann na <code>main</code> ar fad a d'√∫s√°ideamar <code>()</code>. Is √≠ an fheidhm <code>main</code>
speisialta toisc gurb √© pointe iontr√°la agus pointe scoir r√≠omhchl√°ir inrite √©,
agus t√° srianta ar an gcine√°l tuairisce√°in is f√©idir a bheith ag an gcl√°r
iompar mar a bheif√≠ ag s√∫il leis.</p>
<p>Ar √°mhara√≠ an tsaoil, is f√©idir le <code>main</code> <code>Result&lt;(), E&gt;</code> a thabhairt ar ais freisin. T√° an c√≥d ag liost√∫ 9-12
√≥ Liost√∫ 9-10, ach d'athraigh muid an cine√°l fillte <code>main</code> le bheith
<code>Result&lt;(), Box&lt;dyn Error&gt;&gt;</code> agus chuir s√© luach fillte <code>Ok(())</code> leis go dt√≠ an deireadh. seo
tioms√≥far an c√≥d anois.</p>
<Listing number="9-12" file-name="src/main.rs" caption="Changing `main` to return `Result<(), E>` allows the use of the `?` operator on `Result` values.">
<pre><code class="language-rust ignore">use std::error::Error;
use std::fs::File;

fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let greeting_file = File::open("hello.txt")?;

    Ok(())
}</code></pre>
</Listing>
<p>Is √© an cine√°l <code>Box&lt;dyn Error&gt;</code> n√° <em>trait object</em>, a labhr√≥imid faoi sa
<a href="ch18-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types">‚ÄúAg baint √∫s√°ide as R√©ada Trait a Ligeann Luachanna √âags√∫la
Cine√°lacha‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt i gCaibidil 18. Faoi l√°thair, is f√©idir leat
l√©igh <code>Box&lt;dyn Error&gt;</code> a chialla√≠onn "earr√°id de chine√°l ar bith." Ag baint √∫s√°ide as <code>?</code> ar <code>Result</code>
luach i bhfeidhm <code>main</code> leis an gcine√°l earr√°ide <code>Box&lt;dyn Error&gt;</code> ceadaithe
toisc go gceada√≠onn s√© aon luach <code>Err</code> a thabhairt ar ais go luath. C√© go bhfuil an comhlacht ar
n√≠ thabharfaidh an <code>main</code> seo ar ais ach earr√°id√≠ den chine√°l <code>std::io::Error</code>, le
ag sonr√∫ <code>Box&lt;dyn Error&gt;</code>, leanfaidh an s√≠ni√∫ seo de bheith ceart fi√∫ m√°
cuirtear tuilleadh c√≥d a thugann earr√°id√≠ eile ar ais le corp na <code>main</code>.</p>
<p>Nuair a fhilleann feidhm <code>main</code> <code>Result&lt;(), E&gt;</code>, scoirfidh an inrite le
luach <code>0</code> m√° fhilleann <code>main``Ok(())</code> agus scoirfidh s√© le luach neamhzero m√°
Tugann <code>main</code> luach <code>Err</code> ar ais. Inrite at√° scr√≠ofa i sl√°nuimhreacha tuairisce√°in C nuair
scoireann siad: cuireann cl√°ir a scoir an sl√°nuimhir <code>0</code> ar ais go rath√∫il, agus cl√°ir
an earr√°id sin cuir sl√°nuimhir √©igin ar ais seachas <code>0</code>. Tugann Rust ar ais sl√°nuimhreacha √≥
inrite a bheith ag lu√≠ leis an gcoinbhinsi√∫n seo.</p>
<p>F√©adfaidh an <code>main</code> aon chine√°lacha a chuireann i bhfeidhm <a href="../std/process/trait.Termination.html">an
<code>std::process::Termination</code> trait</a> <!-- neamhaird -->, ina bhfuil
feidhm <code>report</code> a thugann <code>ExitCode</code> ar ais. T√©igh i gcomhairle leis an leabharlann chaighde√°nach
doicim√©ad√∫ le haghaidh tuilleadh eolais ar chur i bhfeidhm na tr√©ithe <code>Termination</code> le haghaidh
do chine√°lacha f√©in.</p>
<p>Anois go bhfuil na sonra√≠ pl√©ite againn maidir le ‚Äòscaoll!‚Äô a ghlaoch n√≥ ‚ÄòToradh‚Äô a sheoladh ar ais,
filleadh ar an topaic maidir le conas a chinneadh c√© acu is cu√≠ a √∫s√°id ina
c√°sanna.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="go-panic-n√≥-gan-panic"><a class="header" href="#go-panic-n√≥-gan-panic">Go <code>panic!</code> n√≥ Gan <code>panic!</code></a></h2>
<p>Mar sin, conas a shocra√≠onn t√∫ cathain ba cheart duit <code>panic!</code> a ghlaoch agus cathain ba cheart duit filleadh
<code>Result</code>? Nuair a scaoll c√≥d, n√≠l aon bhealach a ghn√≥th√∫. D‚Äôfh√©adf√° <code>panic!</code> a ghlaoch
i gc√°s aon earr√°ide, cib√© an bhfuil bealach f√©ideartha ann chun aisghabh√°il n√≥ nach bhfuil, ach
ansin t√° t√∫ ag d√©anamh an chinnidh nach f√©idir c√°s a aisghabh√°il ar son
an c√≥d glaonna. Nuair a roghna√≠onn t√∫ luach <code>Result</code> a thabhairt ar ais, tugann t√∫ an
roghanna c√≥d glaonna. D'fh√©adfadh an c√≥d glaonna a roghn√∫ chun iarracht a dh√©anamh a ghn√≥th√∫ i
ar bhealach at√° feili√∫nach d√° ch√°s, n√≥ d‚Äôfh√©adfadh s√© a chinneadh go nd√©anfa√≠ ‚ÄòEarr√°id‚Äô
T√° luach sa ch√°s seo do-aisghabh√°la, mar sin is f√©idir glaoch ar <code>panic!</code> agus cas do
earr√°id in-aisghabh√°la isteach i gceann do-aisghabh√°la. Mar sin, is √©ard at√° i gceist le <code>Result</code> a thabhairt ar ais
rogha r√©amhshocraithe maith nuair a bh√≠onn feidhm √° saini√∫ agat a d‚Äôfh√©adfadh teip a bheith uirthi.</p>
<p>I gc√°sanna mar shampla√≠, c√≥d fr√©amhshamhail, agus t√°st√°lacha, t√° s√© n√≠os m√≥
cu√≠ c√≥d a scr√≠obh a scanra√≠onn seachas <code>Result</code> a thabhairt ar ais. D√©anaimis
fiosraigh c√©n f√°th, ansin pl√©igh c√°sanna nach f√©idir leis an tiomsaitheoir √© sin a insint
T√° teip dodh√©anta, ach is f√©idir leat mar an duine. Cr√≠ochn√≥idh an chaibidil le
roinnt treoirl√≠nte ginear√°lta maidir le conas a chinneadh c√© acu an scaoll i gc√≥d na leabharlainne.</p>
<h3 id="sampla√≠-c√≥d-fr√©amhshamhail-agus-t√°st√°lacha"><a class="header" href="#sampla√≠-c√≥d-fr√©amhshamhail-agus-t√°st√°lacha">Sampla√≠, C√≥d Fr√©amhshamhail, agus T√°st√°lacha</a></h3>
<p>Agus sampla √° scr√≠obh agat chun coincheap √©igin a l√©iri√∫, lena n-√°ir√≠tear freisin
is f√©idir le c√≥d l√°idir l√°imhse√°la earr√°id√≠ an sampla a dh√©anamh n√≠os soil√©ire. I sampla√≠, t√°
thuigtear gurb √© at√° i gceist le glao ar mhodh cos√∫il le <code>unwrap</code> a d'fh√©adfadh scaoll a dh√©anamh n√° a
ionadsealbh√≥ir don tsl√≠ ar mhaith leat go l√°imhse√°lfadh d‚Äôiarratas earr√°id√≠, is f√©idir
difri√∫il bunaithe ar a bhfuil an chuid eile de do ch√≥d a dh√©anamh.</p>
<p>Mar an gc√©anna, b√≠onn na modhanna <code>unwrap</code> agus <code>expect</code> an-√°isi√∫il agus fr√©amhshamhalt√∫ √° dh√©anamh,
sula mbeidh t√∫ r√©idh chun cinneadh a dh√©anamh conas earr√°id√≠ a l√°imhse√°il. F√°gann siad marc√≥ir√≠ soil√©ire isteach
do ch√≥d le haghaidh nuair a bheidh t√∫ r√©idh chun do chl√°r a dh√©anamh n√≠os l√°idre.</p>
<p>M√° theipeann ar ghlao modha i dt√°st√°il, ba mhaith leat go dteipfeadh ar an t√°st√°il ioml√°n, fi√∫ d√° mbeadh
n√≠ h√© an modh sin an fheidhmi√∫lacht at√° √° th√°st√°il. Toisc go bhfuil <code>panic!</code> mar th√°st√°il
marc√°ilte mar theip, agus is √© <code>unwrap</code> n√≥ <code>expect</code> go d√≠reach cad ba cheart
tarl√∫.</p>
<h3 id="c√°sanna-ina-bhfuil-breis-eolais-agat-n√°-an-tiomsaitheoir"><a class="header" href="#c√°sanna-ina-bhfuil-breis-eolais-agat-n√°-an-tiomsaitheoir">C√°sanna ina Bhfuil Breis Eolais Agat N√° An Tiomsaitheoir</a></h3>
<p>Bheadh ‚Äã‚Äãs√© oiri√∫nach freisin <code>unwrap</code> n√≥ <code>expect</code> a ghlaoch nuair a bh√≠onn roinnt agat
loighic eile a chinnt√≠onn go mbeidh luach <code>Ok</code> ag an <code>Result</code>, ach an loighic
nach rud √© a thuigeann an tiomsaitheoir. Beidh luach <code>Result</code> f√≥s agat
nach m√≥r duit a l√°imhse√°il: is cuma c√©n oibr√≠ocht at√° √° glaoch agat f√≥s
f√©idearthacht teip i gcoitinne, c√© go bhfuil s√© dodh√©anta go loighci√∫il
do ch√°s ar leith. M√°s f√©idir leat a chinnti√∫ tr√≠d an gc√≥d a ini√∫chadh de l√°imh
nach mbeidh leagan <code>Err</code> agat cho√≠che, t√° s√© bre√° inghlactha glaoch a chur air
<code>unwrap</code>, agus n√≠os fearr f√≥s a dhoicim√©ad√∫ ar an gc√∫is a cheapann t√∫ nach mbeidh riamh agat
Leagan <code>Err</code> sa t√©acs <code>expect</code>. Seo sampla:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::net::IpAddr;

    let home: IpAddr = "127.0.0.1"
        .parse()
        .expect("Hardcoded IP address should be valid");
<span class="boring">}</span></code></pre></pre>
<p>T√°imid ag cruth√∫ sampla <code>IpAddr</code> tr√≠ teaghr√°n crua-ch√≥id a phars√°il. Is f√©idir linn a fheice√°il
gur seoladh IP bail√≠ √© <code>127.0.0.1</code>, mar sin t√° s√© inghlactha <code>expect</code> a √∫s√°id
anseo. Mar sin f√©in, le teaghr√°n bail√≠, c√≥daithe, n√≠ athra√≠onn an cine√°l tuairisce√°in
den mhodh <code>parse</code>: faigheann muid luach <code>Result</code> f√≥s, agus gheobhaidh an tiomsaitheoir
d√©anaimid f√≥s an <code>Result</code> a l√°imhse√°il amhail is gur f√©idir an leagan <code>Err</code> a dh√©anamh
mar nach bhfuil an tiomsaitheoir cliste go leor chun a fheice√°il go bhfuil an teaghr√°n seo i gc√≥na√≠ a
seoladh IP bail√≠. M√° th√°inig an teaghr√°n seoladh IP √≥ √∫s√°ideoir seachas a bheith
hardcoded isteach sa chl√°r agus mar sin <em>raibh</em> seans teipe,
Is cinnte gur mhaith linn an <code>Result</code> a l√°imhse√°il ar bhealach n√≠os l√°idre ina ionad sin.
M√° luann t√∫ an toimhde go bhfuil an seoladh IP seo c√≥daithe crua, spreagfar sinn √© sin a dh√©anamh
athr√∫ <code>expect</code> go c√≥d l√°imhse√°la earr√°id√≠ n√≠os fearr m√°s rud √©, sa todhcha√≠, n√≠ m√≥r d√∫inn a fh√°il
an seoladh IP √≥ fhoinse √©igin eile ina ionad sin.</p>
<h3 id="treoirl√≠nte-do-l√°imhse√°il-earr√°id√≠"><a class="header" href="#treoirl√≠nte-do-l√°imhse√°il-earr√°id√≠">Treoirl√≠nte do L√°imhse√°il Earr√°id√≠</a></h3>
<p>T√° s√© inmholta go mbeadh do ch√≥d scaoll nuair is f√©idir go bhf√©adfadh do ch√≥d
deireadh suas i droch-staid. Sa chomhth√©acs seo, is √©ard at√° i <em>droch-staid</em> n√° nuair a bh√≠onn roinnt toimhde ann,
T√° r√°tha√≠ocht, conradh, n√≥ malairt√≠ briste, mar shampla nuair a bh√≠onn luachanna neamhbhail√≠,
cuirtear luachanna contr√°rtha, n√≥ luachanna at√° in easnamh ar aghaidh chuig do ch√≥d - m√≥ide ceann amh√°in n√≥
n√≠os m√≥ d√≠obh seo a leanas:</p>
<ul>
<li>Is √© an droch-staid rud √©igin gan choinne, i gcompar√°id le rud √©igin go
is d√≥cha go dtarl√≥idh s√© √≥ am go ch√©ile, cos√∫il le h√∫s√°ideoir sonra√≠ a iontr√°il m√≠cheart
form√°id.</li>
<li>N√≠ m√≥r do ch√≥d tar √©is an phointe seo a bheith ag brath ar gan a bheith sa droch-staid seo,
seachas seice√°il le haghaidh na faidhbe ag gach c√©im.</li>
<li>N√≠l bealach maith ann chun an fhaisn√©is seo a ionch√≥d√∫ sna cine√°lacha a √∫s√°ideann t√∫. D√©anfaimid
oibri√∫ tr√≠ shampla d√° bhfuil i gceist againn sna <a href="ch18-03-oo-design-patterns.html#encoding-states-and-behavior-as-types">‚ÄúSt√°it Ionch√≥daithe agus Iompar
mar Cine√°lacha‚Äù</a><!-- neamhaird --> alt de Chaibidil 18.</li>
</ul>
<p>M√° ghlaonn duine √©igin ar do ch√≥d agus m√° chuireann s√©/s√≠ luachanna isteach nach bhfuil ciall leo, beidh
is fearr earr√°id a thabhairt ar ais m√°s f√©idir leat ionas gur f√©idir le h√∫s√°ideoir na leabharlainne cinneadh a dh√©anamh ar cad √©
ba mhaith leo a dh√©anamh sa ch√°s sin. Mar sin f√©in, i gc√°sanna ina bhf√©adfa√≠ lean√∫int ar aghaidh
neamhchinnte n√≥ d√≠obh√°lach, b‚Äôfh√©idir gurb √© an rogha is fearr <code>panic!</code> a ghlaoch agus fol√°ireamh a thabhairt do na
duine a √∫s√°ideann do leabharlann chun an fabht ina gc√≥d ionas gur f√©idir leo √© a dheisi√∫ le linn
forbartha. Mar an gc√©anna, is minic a bh√≠onn <code>panic!</code> oiri√∫nach m√° t√° t√∫ ag glaoch
c√≥d seachtrach at√° as do smacht agus tugann s√© ar ais staid neamhbhail√≠ go
n√≠l aon bhealach agat le socr√∫.</p>
<p>Nuair a bh√≠onntear ag s√∫il le teip, √°fach, t√° s√© n√≠os oiri√∫na√≠ <code>Result</code> a thabhairt ar ais
n√° glaoch <code>panic!</code> a dh√©anamh. I measc na sampla√≠ t√° pars√°la√≠ m√≠chumtha a thabhairt
sonra√≠ n√≥ iarratas HTTP a thugann st√°das ar ais a thugann le fios go bhfuil r√°ta bainte amach agat
teorainn. Sna c√°sanna seo, nuair a chuirtear <code>Result</code> ar ais, l√©ir√≠tear gur teip √©
an fh√©idearthacht a bhfuiltear ag s√∫il leis go gcaithfidh an c√≥d glaonna cinneadh a dh√©anamh maidir le conas d√©ile√°il leis.</p>
<p>Nuair a dh√©anann do ch√≥d oibr√≠ocht a d‚Äôfh√©adfadh √∫s√°ideoir a chur i mbaol m√° t√°
ar a dtugtar ag baint √∫s√°ide as luachanna neamhbhail√≠, ba ch√≥ir do ch√≥d a fh√≠or√∫ go bhfuil na luachanna bail√≠ ar dt√∫s
agus scaoll mura bhfuil na luachanna bail√≠. Is ar ch√∫iseanna s√°bh√°ilteachta is m√≥ a dh√©antar √© seo:
M√° dh√©anann t√∫ iarracht oibri√∫ ar shonra√≠ neamhbhail√≠ is f√©idir do ch√≥d a nochtadh d'leochaileachta√≠.
Is √© seo an phr√≠omhch√∫is go nglaofaidh an leabharlann chaighde√°nach <code>panic!</code> m√° dh√©anann t√∫ iarracht
rochtain chuimhne as-theorainneacha: ag iarraidh rochtain a fh√°il ar chuimhne nach l√©i
is fadhb choitianta sl√°nd√°la √© an strucht√∫r sonra√≠ reatha. Is minic a bh√≠onn feidhmeanna
<em>contracts</em>: n√≠ r√°tha√≠tear a n-iompra√≠ocht ach amh√°in m√° sh√°sa√≠onn na hionchuir ar leith
riachtanais. T√° ciall ag baint le panicking nuair a sh√°ra√≠tear an conradh mar a
l√©ir√≠onn s√°r√∫ conartha fabht ar thaobh an ghlaoiteora i gc√≥na√≠, agus n√≠ cine√°l √©
earr√°id is mian leat go mbeadh ar an gc√≥d glaonna a l√°imhse√°il go sainr√°ite. Go deimhin, t√°
aon bhealach r√©as√∫nta chun glaoch c√≥d a ghn√≥th√∫; an <em>r√≠omhchl√°raitheoir√≠</em> glaonna ag teast√°il
chun an c√≥d a shocr√∫. Conartha√≠ le haghaidh feidhm, go h√°irithe nuair a bheidh s√°r√∫
ina ch√∫is le scaoll, a mh√≠ni√∫ sa doicim√©ad√∫ API don fheidhm.</p>
<p>Mar sin f√©in, bheadh go leor seice√°lacha earr√°ide i do chuid feidhmeanna go l√©ir briathar
agus annoying. Go fortunately, is f√©idir leat c√≥ras cine√°l Rust a √∫s√°id (agus mar sin an cine√°l
seice√°il a rinne an tiomsaitheoir) go leor de na seice√°lacha a dh√©anamh ar do shon. M√° t√° do
t√° cine√°l √°irithe ag feidhm mar pharaim√©adar, is f√©idir leat dul ar aghaidh le do ch√≥id
loighic a fhios agam gur chinntigh an tiomsaitheoir cheana f√©in go bhfuil luach bail√≠ agat. Le haghaidh
Mar shampla, m√° t√° cine√°l agat seachas <code>Option</code>, t√° s√∫il ag do chl√°r
b√≠odh <em>rud √©igin</em> agat seachas <em>rud ar bith</em>. N√≠ g√° do ch√≥d a l√°imhse√°il mar sin
dh√° ch√°s do na leaganacha <code>Some</code> agus <code>None</code>: n√≠ bheidh ach c√°s amh√°in ann do
cinnte go bhfuil luach. N√≠ bheidh c√≥d ag iarraidh rud ar bith a chur ar aghaidh chuig d'fheidhm
fi√∫ tioms√∫, mar sin n√≠ g√° d'fheidhm a sheice√°il don ch√°s sin ag am rite.
Sampla eile is ea √∫s√°id a bhaint as cine√°l sl√°nuimhir gan s√≠ni√∫ mar <code>u32</code>, rud a chinnt√≠onn
n√≠ bh√≠onn an paraim√©adar di√∫ltach riamh.</p>
<h3 id="cine√°lacha-saincheaptha-√°-gcruth√∫-le-haghaidh-bail√≠ocht√∫"><a class="header" href="#cine√°lacha-saincheaptha-√°-gcruth√∫-le-haghaidh-bail√≠ocht√∫">Cine√°lacha Saincheaptha √° gCruth√∫ le haghaidh Bail√≠ocht√∫</a></h3>
<p>Glacaimis an smaoineamh c√≥ras cine√°l Rust a √∫s√°id chun a chinnti√∫ go bhfuil luach bail√≠ againn
c√©im amh√°in eile agus f√©ach ar chine√°l saincheaptha a chruth√∫ le haghaidh bail√≠ochtaithe. Athghairm an
cluiche buille faoi thuairim i gCaibidil 2 inar iarr √°r gc√≥d ar an √∫s√°ideoir buille faoi thuairim a thabhairt ar uimhir
idir 1 agus 100. muid ndeimhnithe riamh go raibh buille faoi thuairim an √∫s√°ideora eatarthu si√∫d
uimhreacha roimh √© a sheice√°il i gcoinne √°r n-uimhir r√∫nda; n√≠ dhearnamar ach √© sin a bhail√≠ocht√∫
bh√≠ an buille faoi thuairim dearfach. Sa ch√°s seo, n√≠ raibh na hiarmhairt√≠ an-dona: √°r
bheadh ‚Äã‚Äãan t-aschur ‚ÄúR√≥-ard‚Äù n√≥ ‚ÄúR√≥-√≠seal‚Äù f√≥s ceart. Ach bheadh ‚Äã‚Äã‚Äã‚Äãs√© a
feabhs√∫ √∫s√°ideach chun an t-√∫s√°ideoir a threor√∫ i dtreo tomhais bhail√≠ agus a bhfuil √©ags√∫lachta√≠ acu
iompar nuair a dh√©anann an t-√∫s√°ideoir buille faoi thuairim uimhir at√° as raon i gcompar√°id le nuair a bh√≠onn an
cine√°lacha √∫s√°ideoir√≠, mar shampla, litreacha ina ionad.</p>
<p>Bealach amh√°in chun √© seo a dh√©anamh n√° an buille faoi thuairim a phars√°il mar <code>i32</code> in ionad ach a
<code>u32</code> chun uimhreacha a d'fh√©adfadh a bheith di√∫ltach a chead√∫, agus ansin cuir seic le haghaidh an
uimhir a bheith i raon, mar sin:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span><span class="boring">use std::cmp::Ordering;
</span><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span>    loop {
        // --snip--

<span class="boring">        println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">        let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">        io::stdin()
</span><span class="boring">            .read_line(&amp;mut guess)
</span><span class="boring">            .expect("Failed to read line");
</span><span class="boring">
</span>        let guess: i32 = match guess.trim().parse() {
            Ok(num) =&gt; num,
            Err(_) =&gt; continue,
        };

        if guess &lt; 1 || guess &gt; 100 {
            println!("The secret number will be between 1 and 100.");
            continue;
        }

        match guess.cmp(&amp;secret_number) {
            // --snip--
<span class="boring">            Ordering::Less =&gt; println!("Too small!"),
</span><span class="boring">            Ordering::Greater =&gt; println!("Too big!"),
</span><span class="boring">            Ordering::Equal =&gt; {
</span><span class="boring">                println!("You win!");
</span><span class="boring">                break;
</span><span class="boring">            }
</span><span class="boring">        }
</span>    }
<span class="boring">}</span></code></pre>
</Listing>
<p>Seice√°lann an slonn <code>if</code> cib√© an bhfuil √°r luach as raon, ins√≠onn s√© don √∫s√°ideoir
faoin bhfadhb, agus glaonna <code>continue</code> chun t√∫s a chur leis an gc√©ad atriall eile den l√∫b
agus iarr buille faoi thuairim eile. Tar √©is an abairt <code>if</code>, is f√©idir linn dul ar aghaidh leis an
compar√°id√≠ idir <code>guess</code> agus an uimhir r√∫nda a fhios agam go bhfuil <code>guess</code>
idir 1 agus 100.</p>
<p>Mar sin f√©in, n√≠ r√©iteach id√©alach √© seo: d√° mba rud √© go raibh s√© r√≠th√°bhachtach go nd√©anfa√≠ an
n√≠or fheidhmigh an cl√°r ach ar luachanna idir 1 agus 100, agus bh√≠ go leor feidhmeanna aige
leis an riachtanas seo, go mbeadh seice√°il mar seo i ngach feidhm
tedious (agus d'fh√©adfadh tionchar a imirt ar fheidhm√≠ocht).</p>
<p>Ina √°it sin, is f√©idir linn cine√°l nua a dh√©anamh agus na bail√≠ochtaithe a chur i bhfeidhm le cruth√∫
sampla den chine√°l seachas na bail√≠ochtaithe a athr√° i ngach √°it. Sin
mar sin, t√° s√© s√°bh√°ilte d'fheidhmeanna an cine√°l nua a √∫s√°id ina s√≠nithe agus
√∫s√°id go muin√≠neach as na luachanna a fhaigheann siad. L√©ir√≠onn liost√∫ 9-13 bealach amh√°in chun a
Cine√°l <code>Guess</code> nach gcruth√≥idh ach sampla de <code>Guess</code> m√° t√° an fheidhm <code>new</code>
a fhaigheann luach idir 1 agus 100.</p>
<Listing number="9-13" caption="A `Guess` type that will only continue with values between 1 and 100">
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Guess {
    value: i32,
}

impl Guess {
    pub fn new(value: i32) -&gt; Guess {
        if value &lt; 1 || value &gt; 100 {
            panic!("Guess value must be between 1 and 100, got {value}.");
        }

        Guess { value }
    }

    pub fn value(&amp;self) -&gt; i32 {
        self.value
    }
}
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ar dt√∫s d√©anaimid sainmh√≠ni√∫ ar strucht√∫r darb ainm <code>Guess</code> a bhfuil r√©imse darb ainm <code>value</code> sin
t√° <code>i32</code> aige. Seo an √°it a st√≥r√°lfar an uimhir.</p>
<p>Ansin cuirimid feidhm ghaolmhar i bhfeidhm darb ainm <code>new</code> ar <code>Guess</code> a chrutha√≠onn
sampla√≠ de luachanna <code>Guess</code>. Sainmh√≠n√≠tear an fheidhm <code>new</code> go bhfuil ceann aici
paraim√©adar darb ainm <code>value</code> den chine√°l <code>i32</code> agus <code>Guess</code> a thabhairt ar ais. An c√≥d sa
D√©anann corp na feidhme <code>new</code> t√°st√°il ar 'luach' lena chinnti√∫ go bhfuil s√© idir 1 agus 100.
Mura n-√©ir√≠onn le ‚Äòvalue‚Äô an triail seo, d√©anaimid glao <code>panic!</code> a chuirfidh fol√°ireamh
an r√≠omhchl√°raitheoir at√° ag scr√≠obh an c√≥d glaonna go bhfuil fabht a theasta√≠onn uathu
a shocr√∫, mar go gcruth√≥fa√≠ <code>Guess</code> le <code>value</code> lasmuigh den raon seo
an conradh a bhfuil <code>Guess::new</code> ag brath air a sh√°r√∫. Na coinn√≠ollacha ina
Seans gur cheart <code>Guess::new</code> a phl√© ina API poibl√≠
doicim√©ad√∫; cl√∫d√≥imid coinbhinsi√∫in doicim√©adaithe a l√©ir√≠onn an fh√©idearthacht
de <code>panic!</code> sna doicim√©id API a chrutha√≠onn t√∫ i gCaibidil 14. M√°s rud √©
√©ir√≠onn le <code>value</code> an triail, crutha√≠mid <code>Guess</code> nua lena shraith r√©imse <code>value</code>
chuig an bparaim√©adar <code>value</code> agus seol ar ais an <code>Guess</code>.</p>
<p>Ansin, cuirimid modh darb ainm <code>value</code> i bhfeidhm a fhaigheann <code>self</code> ar iasacht, nach bhfuil aon cheann aige
paraim√©adair eile, agus tuairisce√°in <code>i32</code>. Uaireanta tugtar modh den chine√°l seo
a <em>getter</em> toisc go bhfuil s√© mar chusp√≥ir aige roinnt sonra√≠ a fh√°il √≥na r√©ims√≠ agus iad a sheoladh ar ais
√©. T√° an modh poibl√≠ seo riachtanach toisc go bhfuil r√©imse <code>value</code> an <code>Guess</code>
T√° strucht√∫r pr√≠obh√°ideach. T√° s√© t√°bhachtach go mbeadh an r√©imse <code>value</code> pr√≠obh√°ideach mar sin c√≥d
ag baint √∫s√°ide as an strucht√∫r <code>Guess</code> n√≠ cheada√≠tear <code>value</code> a shocr√∫ go d√≠reach: c√≥d lasmuigh
caithfidh an mod√∫l an fheidhm <code>Guess::new</code> a √∫s√°id chun sampla de
<code>Guess</code>, ag cinnti√∫ mar sin nach bhfuil aon bhealach le <code>Guess</code> <code>value</code> a bheith aige sin
nach bhfuil seice√°ilte ag na coinn√≠ollacha san fheidhm <code>Guess::new</code>.</p>
<p>D'fh√©adfadh feidhm a bhfuil paraim√©adar aici n√≥ nach dtugann ach uimhreacha idir 1 agus 100 ar ais
ansin dearbhaigh ina sh√≠ni√∫ go nglacann s√© n√≥ go dtugann s√© ar ais <code>Guess</code> seachas
<code>i32</code> agus n√≠ bheadh ‚Äã‚Äãair aon seice√°lacha breise a dh√©anamh ina chorp.</p>
<h2 id="achoimre-8"><a class="header" href="#achoimre-8">Achoimre</a></h2>
<p>T√° gn√©ithe l√°imhse√°la earr√°id√≠ Rust deartha chun cabhr√∫ leat c√≥d n√≠os daingne a scr√≠obh.
L√©ir√≠onn an macra <code>panic!</code> go bhfuil do chl√°r i riocht nach f√©idir leis a l√°imhse√°il agus
ligeann duit insint don phr√≥iseas chun stop a chur in ionad iarracht a dh√©anamh dul ar aghaidh le neamhbhail√≠ n√≥
luachanna m√≠chearta. √ös√°ideann an enum <code>Result</code> c√≥ras cine√°il Rust chun √© sin a chur in i√∫l
seans go dteipfidh ar oibr√≠ochta√≠ ar bhealach a d'fh√©adfadh do ch√≥d a ghn√≥th√∫. Is f√©idir leat √∫s√°id a bhaint as
<code>Result</code> chun c√≥d a ghlaonn do ch√≥d a insint go gcaithfidh s√© acmhainneacht a l√°imhse√°il
rath n√≥ teip chomh maith. Ag baint √∫s√°ide as <code>panic!</code> agus <code>Result</code> sa chu√≠
D√©anfaidh c√°sanna do ch√≥d n√≠os iontaofa i bhfianaise fadhbanna dosheachanta.</p>
<p>Anois go bhfuil beala√≠ √∫s√°ideacha feicthe agat a n-√∫s√°ideann an leabharlann chaighde√°nach generics leo
sna huimhreacha <code>Option</code> agus <code>Result</code>, labhr√≥imid faoin gcaoi a n-oibr√≠onn generics agus conas a oibr√≠onn t√∫
Is f√©idir iad a √∫s√°id i do ch√≥d.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cine√°lacha-cine√°lta-tr√©ithe-agus-saolta"><a class="header" href="#cine√°lacha-cine√°lta-tr√©ithe-agus-saolta">Cine√°lacha Cine√°lta, Tr√©ithe, agus Saolta</a></h1>
<p>T√° uirlis√≠ ag gach teanga r√≠omhchl√°raithe chun an d√∫bailt a l√°imhse√°il go h√©ifeachtach
de choincheapa. I Rust, t√° uirlis amh√°in d√° leith√©id <em>generics</em>: seast√°in teib√≠ do
cine√°lacha coincr√©ite n√≥ air√≠onna eile. Is f√©idir linn iompar generics n√≥
conas a bhaineann siad le cine√°lacha eile gan fios cad a bheidh ina n-√°it
nuair a bheidh an c√≥d √° thioms√∫ agus √° rith.</p>
<p>Is f√©idir le feidhmeanna paraim√©adair de chine√°l √©igin a ghlacadh, in ionad cine√°l coincr√©ite
cos√∫il le <code>i32</code> n√≥ <code>String</code>, ar an mbealach c√©anna a ghlacann siad paraim√©adair le anaithnid
luachanna chun an c√≥d c√©anna a rith ar illuachanna nithi√∫la. Go deimhin, t√° muid cheana f√©in
√∫s√°idtear generics i gCaibidil 6 le <code>Option&lt;T&gt;</code>, i gCaibidil 8 le <code>Vec&lt;T&gt;</code> agus
<code>HashMap&lt;K, V&gt;</code>, agus i gCaibidil 9 le <code>Result&lt;T, E&gt;</code>. Sa chaibidil seo, beidh t√∫
ini√∫chadh a dh√©anamh ar conas do chine√°lacha, feidhmeanna agus modhanna f√©in a shaini√∫ le generics!</p>
<p>Ar dt√∫s d√©anfaimid athbhreithni√∫ ar conas feidhm a bhaint as chun d√∫bailt c√≥d a laghd√∫. D√©anfaimid
ansin bain √∫s√°id as an teicn√≠c ch√©anna chun feidhm chine√°lach a dh√©anamh as dh√° fheidhm a
difri√∫il ach amh√°in i gcine√°lacha a bparaim√©adar. M√≠neoimid freisin conas √© a √∫s√°id
cine√°lacha cine√°lacha i strucht√∫ir agus sainmh√≠nithe enum.</p>
<p>Ansin foghlaimeoidh t√∫ conas <em>traits</em> a √∫s√°id chun iompar a shaini√∫ ar bhealach cine√°lach. tu
is f√©idir tr√©ithe a chomhcheangal le cine√°lacha cine√°lach chun srian a chur ar chine√°l cine√°lach glacadh leis
ach na cine√°lacha sin a bhfuil iompar ar leith acu, i gcompar√°id le cine√°l ar bith.</p>
<p>Ar deireadh, pl√©ifimid <em>lifetimes</em>: cine√°lacha cine√°lacha √©ags√∫la a thugann an
faisn√©is a thioms√∫ faoin gcaoi a mbaineann tagairt√≠ lena ch√©ile. Ceada√≠onn saolr√©
go leor eolais a thabhairt don tiomsaitheoir faoi luachanna a fuarthas ar iasacht ionas gur f√©idir leis
a chinnti√∫ go mbeidh teistim√©ireachta√≠ bail√≠ i n√≠os m√≥ c√°sanna n√° mar a d'fh√©adfadh s√© gan √°r
cabhair.</p>
<h2 id="d√∫bailt-a-bhaint-tr√≠-feidhm-a-bhaint-as"><a class="header" href="#d√∫bailt-a-bhaint-tr√≠-feidhm-a-bhaint-as">D√∫bailt a Bhaint Tr√≠ Feidhm a Bhaint as</a></h2>
<p>Ceada√≠onn Generics d√∫inn cine√°lacha sonracha a athshol√°thar le sealbh√≥ir √°it a l√©ir√≠onn
cine√°lacha iomad√∫la chun d√∫bailt c√≥d a bhaint. Sula tumadh isteach i gcomhr√©ir generics,
Breathna√≠mid ar dt√∫s ar conas d√∫bailt a bhaint ar bhealach nach mbaineann
cine√°lacha cine√°lacha tr√≠ fheidhm a bhaint a chuireann a
√°itshealbh√≥ir a l√©ir√≠onn luachanna iolracha. Ansin cuirfimid an rud c√©anna i bhfeidhm
teicn√≠c chun feidhm chine√°lach a bhaint as! Tr√≠ f√©achaint ar conas a aithint
c√≥d d√∫blach is f√©idir leat a bhaint as feidhm, a thos√≥idh t√∫ √° aithint
c√≥d d√∫blach is f√©idir a √∫s√°id generics.</p>
<p>Cuirfimid t√∫s leis an gcl√°r gearr i Liost√∫ 10-1 a aims√≠onn an ceann is m√≥
uimhir i liosta.</p>
<Listing number="10-1" file-name="src/main.rs" caption="Finding the largest number in a list of numbers">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let number_list = vec![34, 50, 25, 100, 65];

    let mut largest = &amp;number_list[0];

    for number in &amp;number_list {
        if number &gt; largest {
            largest = number;
        }
    }

    println!("The largest number is {largest}");
<span class="boring">    assert_eq!(*largest, 100);
</span>}</code></pre></pre>
</Listing>
<p>St√≥r√°laimid liosta sl√°nuimhreacha san athr√≥g <code>number_list</code> agus cuirimid tagairt
go dt√≠ an ch√©ad uimhir ar an liosta in athr√≥g darb ainm <code>largest</code>. D√©anaimid athr√° ansin
tr√≠ na huimhreacha go l√©ir sa liosta, agus m√° t√° an uimhir reatha n√≠os m√≥ n√°
an uimhir at√° st√≥r√°ilte in <code>largest</code>, cuirimid in ionad na tagartha san athr√≥g sin.
Mar sin f√©in, m√° t√° an l√≠on reatha n√≠os l√∫ n√° n√≥ cothrom leis an l√≠on is m√≥ a fheictear
go dt√≠ seo, n√≠ athra√≠onn an athr√≥g, agus bogann an c√≥d ar aghaidh go dt√≠ an ch√©ad uimhir eile
sa liosta. Tar √©is na huimhreacha go l√©ir ar an liosta a mheas, ba cheart go mbeadh <code>largest</code>
tagairt a dh√©anamh don l√≠on is m√≥, at√° sa ch√°s seo 100.</p>
<p>T√° s√© de ch√∫ram orainn anois an l√≠on is m√≥ a aimsi√∫ in dh√° liosta √©ags√∫la de
uimhreacha. Chun √© sin a dh√©anamh, is f√©idir linn a roghn√∫ an c√≥d i Liost√∫ 10-1 a dh√∫bailt agus a √∫s√°id
an loighic ch√©anna ag dh√° √°it dhifri√∫la sa chl√°r, mar a l√©ir√≠tear i Liosta 10-2.</p>
<Listing number="10-2" file-name="src/main.rs" caption="Code to find the largest number in *two* lists of numbers">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let number_list = vec![34, 50, 25, 100, 65];

    let mut largest = &amp;number_list[0];

    for number in &amp;number_list {
        if number &gt; largest {
            largest = number;
        }
    }

    println!("The largest number is {largest}");

    let number_list = vec![102, 34, 6000, 89, 54, 2, 43, 8];

    let mut largest = &amp;number_list[0];

    for number in &amp;number_list {
        if number &gt; largest {
            largest = number;
        }
    }

    println!("The largest number is {largest}");
}</code></pre></pre>
</Listing>
<p>C√© go n-oibr√≠onn an c√≥d seo, b√≠onn d√∫bl√°il c√≥d tedious agus seans maith go hearr√°id√≠. T√°imid freisin
n√≠ m√≥r cuimhneamh ar an gc√≥d a nuashonr√∫ in √°iteanna √©ags√∫la nuair is mian linn athr√∫ a dh√©anamh
√©.</p>
<p>Chun deireadh a chur leis an d√∫bailt seo, cruth√≥imid astarraingt tr√≠ a
feidhm a fheidhm√≠onn ar aon liosta sl√°nuimhreacha a chuirtear isteach mar pharaim√©adar. seo
r√©iteach a dh√©anann √°r gc√≥d n√≠os soil√©ire agus ligeann d√∫inn a chur in i√∫l an coincheap a aimsi√∫ ar an
an l√≠on is m√≥ i liosta go hachomair.</p>
<p>I Liost√∫ 10-3, bainimid an c√≥d a aims√≠onn an uimhir is m√≥ in a
feidhm darb ainm <code>largest</code>. Ansin tugaimid an fheidhm chun an l√≠on is m√≥ a fh√°il
sa d√° liosta √≥ Liosta 10-2. D'fh√©adfaimis an fheidhm a √∫s√°id ar aon cheann eile freisin
liosta de na luachanna <code>i32</code> a d'fh√©adfadh a bheith againn sa todhcha√≠.</p>
<Listing number="10-3" file-name="src/main.rs" caption="Abstracted code to find the largest number in two lists">
<pre><pre class="playground"><code class="language-rust">fn largest(list: &amp;[i32]) -&gt; &amp;i32 {
    let mut largest = &amp;list[0];

    for item in list {
        if item &gt; largest {
            largest = item;
        }
    }

    largest
}

fn main() {
    let number_list = vec![34, 50, 25, 100, 65];

    let result = largest(&amp;number_list);
    println!("The largest number is {result}");
<span class="boring">    assert_eq!(*result, 100);
</span>
    let number_list = vec![102, 34, 6000, 89, 54, 2, 43, 8];

    let result = largest(&amp;number_list);
    println!("The largest number is {result}");
<span class="boring">    assert_eq!(*result, 6000);
</span>}</code></pre></pre>
</Listing>
<p>T√° paraim√©adar ar a dtugtar <code>list</code> ag an bhfeidhm <code>largest</code>, a sheasann d'aon cheann
slis choincr√©ite de luachanna <code>i32</code> a d'fh√©adfaimis dul isteach san fheidhm. Mar thoradh air sin,
nuair a ghlaoimid an fheidhm, ritheann an c√≥d ar na luachanna sonracha a rithimid
isteach.</p>
<p>Go hachomair, seo na c√©imeanna a ghlacamar chun an c√≥d a athr√∫ √≥ Liost√∫ 10-2 go
Liost√°il 10-3:</p>
<ol>
<li>C√≥d d√∫blach a aithint.</li>
<li>Sliocht an c√≥d d√∫blach isteach i gcorp na feidhme, agus sonraigh an
ionchuir agus luachanna aischuir an ch√≥id sin i s√≠ni√∫ na feidhme.</li>
<li>Nuashonraigh an d√° ch√°s de ch√≥d d√∫blach chun an fheidhm a ghlaoch ina ionad.</li>
</ol>
<p>Ansin, √∫s√°idfimid na c√©imeanna c√©anna seo le cine√°lacha cine√°lacha chun d√∫bailt c√≥d a laghd√∫. I
ar an mbealach c√©anna is f√©idir leis an gcomhlacht feidhme oibri√∫ ar <code>list</code> teib√≠ ina ionad sin
de luachanna sonracha, ceada√≠onn generics c√≥d oibri√∫ ar chine√°lacha teib√≠.</p>
<p>Mar shampla, abair go raibh dh√° fheidhm againn: ceann a aims√≠onn an mh√≠r is m√≥ in a
slice de luachanna <code>i32</code> agus ceann a aims√≠onn an mh√≠r is m√≥ i slice de <code>char</code>
luachanna. Conas a chuirfimid deireadh leis an d√∫bailt sin? Faighimis amach!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cine√°lacha-ginear√°lta-sonra√≠"><a class="header" href="#cine√°lacha-ginear√°lta-sonra√≠">Cine√°lacha Ginear√°lta Sonra√≠</a></h2>
<p>Bainimid √∫s√°id as generics chun sainmh√≠nithe a chruth√∫ le haghaidh m√≠reanna cos√∫il le s√≠nithe feidhm n√≥
structs, ar f√©idir linn a √∫s√°id ansin le go leor cine√°lacha sonra√≠ nithi√∫la √©ags√∫la. D√©anaimis
breathn√∫ ar dt√∫s ar conas feidhmeanna, strucht√∫ir, enums, agus modhanna a shaini√∫ ag baint √∫s√°ide as
cine√°lach. Ansin pl√©ifimid conas a th√©ann cine√°lacha cine√°lacha i bhfeidhm ar fheidhm√≠ocht c√≥d.</p>
<h3 id="i-sainmh√≠nithe-feidhme"><a class="header" href="#i-sainmh√≠nithe-feidhme">I Sainmh√≠nithe Feidhme</a></h3>
<p>Nuair a shain√≠tear feidhm a √∫s√°ideann generics, cuirimid na cine√°lacha cine√°lacha sa
s√≠ni√∫ na feidhme ina mbeadh muid a shonr√∫ de ghn√°th ar na cine√°lacha sonra√≠ an
paraim√©adair agus luach tuairisce√°in. D√©anann s√© sin √°r gc√≥d n√≠os sol√∫btha agus cuireann s√© ar f√°il
n√≠os m√≥ feidhmi√∫lachta do ghlaoiteoir√≠ ar √°r bhfeidhm agus d√∫bailt c√≥id a chosc.</p>
<p>Ag lean√∫int len√°r bhfeidhm <code>largest</code>, l√©ir√≠onn Liost√∫ 10-4 dh√° fheidhm a
Faigheann an d√° cheann an luach is m√≥ i slice. D√©anfaimid iad seo a chomhcheangal ina n-aonar ansin
feidhm a √∫s√°ideann generics.</p>
<Listing number="10-4" file-name="src/main.rs" caption="Two functions that differ only in their names and in the types in their signatures">
<pre><pre class="playground"><code class="language-rust">fn largest_i32(list: &amp;[i32]) -&gt; &amp;i32 {
    let mut largest = &amp;list[0];

    for item in list {
        if item &gt; largest {
            largest = item;
        }
    }

    largest
}

fn largest_char(list: &amp;[char]) -&gt; &amp;char {
    let mut largest = &amp;list[0];

    for item in list {
        if item &gt; largest {
            largest = item;
        }
    }

    largest
}

fn main() {
    let number_list = vec![34, 50, 25, 100, 65];

    let result = largest_i32(&amp;number_list);
    println!("The largest number is {result}");
<span class="boring">    assert_eq!(*result, 100);
</span>
    let char_list = vec!['y', 'm', 'a', 'q'];

    let result = largest_char(&amp;char_list);
    println!("The largest char is {result}");
<span class="boring">    assert_eq!(*result, 'y');
</span>}</code></pre></pre>
</Listing>
<p>Is √≠ an fheidhm <code>largest_i32</code> an ceann a bhaineamar amach i Liost√∫ 10-3 a aims√≠onn
an <code>i32</code> is m√≥ i slisne. Faigheann an fheidhm <code>largest_char</code> an ceann is m√≥
<code>char</code> i slisne. T√° an c√≥d c√©anna ag na comhlachta√≠ feidhme, mar sin cuirimis deireadh leis
an d√∫bailt tr√≠ pharaim√©adar cine√°lach a thabhairt isteach in aon fheidhm amh√°in.</p>
<p>Chun na cine√°lacha a pharaim√©adar√∫ i bhfeidhm aonair nua, n√≠ m√≥r d√∫inn an cine√°l a ainmni√∫
paraim√©adar, d√≠reach mar a dh√©anaimid do na paraim√©adair luacha go dt√≠ feidhm. Is f√©idir leat √∫s√°id a bhaint as
aon aitheant√≥ir mar ainm paraim√©adar cine√°il. Ach √∫s√°idfimid <code>T</code> mar gheall ar, le
coinbhinsi√∫n, t√° ainmneacha paraim√©adar cine√°l i Rust gearr, go minic ach litir amh√°in, agus
Is √© Coinbhinsi√∫n Cine√°l-ainmnithe Rust UpperCamelCase. Gearr do <em>type</em>, is √© <code>T</code> an
rogha r√©amhshocraithe an chuid is m√≥ de r√≠omhchl√°raitheoir√≠ Rust.</p>
<p>Nuair a √∫s√°idimid paraim√©adar i gcorp na feidhme, n√≠ m√≥r d√∫inn a dhearbh√∫ an
ainm paraim√©adar sa s√≠ni√∫ ionas go mbeidh a fhios ag an tiomsaitheoir cad a chialla√≠onn an t-ainm sin.
Mar an gc√©anna, nuair a √∫s√°idimid ainm paraim√©adar cine√°l i s√≠ni√∫ feidhm, n√≠ m√≥r d√∫inn
chun an t-ainm paraim√©adar cine√°l a dhearbh√∫ sula n-√∫s√°idfimid √©. Chun an cine√°lach a shaini√∫
an fheidhm <code>largest</code>, cuirimid dearbhuithe cine√°l-ainm taobh istigh de l√∫ib√≠n√≠ uillinne,
<code>&lt;&gt;</code>, idir ainm na feidhme agus liosta na bparaim√©adar, mar seo:</p>
<pre><code class="language-rust ignore">fn largest&lt;T&gt;(list: &amp;[T]) -&gt; &amp;T {</code></pre>
<p>L√©imid an sainmh√≠ni√∫ seo mar seo a leanas: t√° an fheidhm <code>largest</code> cine√°lach thar chine√°l √©igin
<code>T</code>. T√° paraim√©adar amh√°in ag an bhfeidhm seo darb ainm <code>list</code>, ar sliseog luachanna √©
den chine√°l <code>T</code>. Tabharfaidh an fheidhm <code>largest</code> tagairt ar ais do luach an
cine√°l c√©anna <code>T</code>.</p>
<p>L√©ir√≠onn liost√∫ 10-5 an sainmh√≠ni√∫ comhcheangailte ar fheidhm <code>largest</code> ag baint √∫s√°ide as an gcine√°l cine√°lach
cine√°l sonra√≠ ina sh√≠ni√∫. L√©ir√≠onn an liost√∫ freisin conas is f√©idir linn glaoch ar an bhfeidhm
le slice de luachanna <code>i32</code> n√≥ luachanna <code>char</code>. Tabhair faoi deara nach nd√©anfaidh an c√≥d seo
le ch√©ile go f√≥ill, ach d√©anfaimid √© a shocr√∫ n√≠os d√©ana√≠ sa chaibidil seo.</p>
<Listing number="10-5" file-name="src/main.rs" caption="The `largest` function using generic type parameters; this doesn‚Äôt compile yet">
<pre><code class="language-rust ignore does_not_compile">fn largest&lt;T&gt;(list: &amp;[T]) -&gt; &amp;T {
    let mut largest = &amp;list[0];

    for item in list {
        if item &gt; largest {
            largest = item;
        }
    }

    largest
}

fn main() {
    let number_list = vec![34, 50, 25, 100, 65];

    let result = largest(&amp;number_list);
    println!("The largest number is {result}");

    let char_list = vec!['y', 'm', 'a', 'q'];

    let result = largest(&amp;char_list);
    println!("The largest char is {result}");
}</code></pre>
</Listing>
<p>M√° thiomsaimid an c√≥d seo faoi l√°thair, gheobhaidh muid an earr√°id seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling chapter10 v0.1.0 (file:///projects/chapter10)
error[E0369]: binary operation `&gt;` cannot be applied to type `&amp;T`
 --&gt; src/main.rs:5:17
  |
5 |         if item &gt; largest {
  |            ---- ^ ------- &amp;T
  |            |
  |            &amp;T
  |
help: consider restricting type parameter `T`
  |
1 | fn largest&lt;T: std::cmp::PartialOrd&gt;(list: &amp;[T]) -&gt; &amp;T {
  |             ++++++++++++++++++++++

For more information about this error, try `rustc --explain E0369`.
error: could not compile `chapter10` (bin "chapter10") due to 1 previous error
</code></pre>
<p>Luann an t√©acs cabhrach <code>std::cmp::PartialOrd</code>, at√° ina <em>trait</em>, agus t√°imid ag
ag dul chun labhairt faoi thr√©ithe sa ch√©ad alt eile. Chun anois, t√° a fhios go bhfuil an earr√°id seo
Deirtear nach n-oibreoidh an corp <code>largest</code> do gach cine√°l <code>T</code>
d'fh√©adfadh a bheith. Toisc gur mian linn luachanna de chine√°l <code>T</code> sa chorp a chur i gcompar√°id, is f√©idir linn
n√° h√∫s√°id ach cine√°lacha ar f√©idir a luachanna a ord√∫. Chun compar√°id√≠ a chumas√∫, an caighde√°n
T√° an tr√©ithe <code>std::cmp::PartialOrd</code> ag an leabharlann is f√©idir leat a chur i bhfeidhm ar chine√°lacha
(f√©ach Aguis√≠n C le haghaidh tuilleadh ar an tr√©ith seo). Tr√≠ na t√©acsanna cabhrach a lean√∫int
Mar mholadh, cuirimid srian leis na cine√°lacha at√° bail√≠ do <code>T</code> amh√°in d√≥ibh si√∫d a chuireann i bhfeidhm
Beidh <code>PartialOrd</code> agus an sampla seo le ch√©ile, mar gheall ar an leabharlann caighde√°nach
cuireann <code>PartialOrd</code> i bhfeidhm ar <code>i32</code> agus <code>char</code> araon.</p>
<h3 id="i-sainmh√≠nithe-strucht√∫r"><a class="header" href="#i-sainmh√≠nithe-strucht√∫r">I Sainmh√≠nithe Strucht√∫r</a></h3>
<p>Is f√©idir linn strucht√∫ir a shaini√∫ freisin chun paraim√©adar cine√°l cine√°lach a √∫s√°id i gceann amh√°in n√≥ n√≠os m√≥
r√©ims√≠ ag baint √∫s√°ide as an chomhr√©ir <code>&lt;&gt;</code>. Sainmh√≠n√≠onn liost√∫ 10-6 strucht√∫r <code>Point&lt;T&gt;</code> le coinne√°il
Comhorda√≠onn <code>x</code> agus <code>y</code> luachanna de chine√°l ar bith.</p>
<Listing number="10-6" file-name="src/main.rs" caption="A `Point<T>` struct that holds `x` and `y` values of type `T`">
<pre><pre class="playground"><code class="language-rust">struct Point&lt;T&gt; {
    x: T,
    y: T,
}

fn main() {
    let integer = Point { x: 5, y: 10 };
    let float = Point { x: 1.0, y: 4.0 };
}</code></pre></pre>
</Listing>
<p>T√° an chomhr√©ir chun cine√°lacha a √∫s√°id i sainmh√≠nithe strucht√∫ir cos√∫il leis an gceann a √∫s√°idtear i
sainmh√≠nithe feidhm. Ar dt√∫s dearbha√≠mid ainm an pharaim√©adar cine√°l taobh istigh
l√∫ib√≠n√≠ uillinn d√≠reach tar √©is ainm an struct. Ansin √∫s√°idimid an cine√°lach
cl√≥scr√≠obh an sainmh√≠ni√∫ ar struct nuair a shonr√≥imis sonra√≠ nithi√∫la ar shl√≠ eile
cine√°lacha.</p>
<p>Tabhair faoi deara toisc n√°r √∫s√°ideamar ach cine√°l cine√°lach amh√°in chun <code>Point &lt;T&gt;</code> a shaini√∫, seo
deir an sainmh√≠ni√∫ go bhfuil an strucht√∫r <code>Point&lt;T&gt;</code> cine√°lach thar cine√°l √©igin <code>T</code>, agus
is iad na r√©ims√≠ <code>x</code> agus <code>y</code> <em>an d√° chine√°l</em> sin, is cuma c√©n cine√°l sin. M√°s rud √©
crutha√≠mid sampla de <code>Point&lt;T&gt;</code> a bhfuil luachanna de chine√°lacha √©ags√∫la aige, mar at√° i
Ag liost√∫ 10-7, n√≠ thioms√≥idh √°r gc√≥d.</p>
<Listing number="10-7" file-name="src/main.rs" caption="The fields `x` and `y` must be the same type because both have the same generic data type `T`.">
<pre><code class="language-rust ignore does_not_compile">struct Point&lt;T&gt; {
    x: T,
    y: T,
}

fn main() {
    let wont_work = Point { x: 5, y: 4.0 };
}</code></pre>
</Listing>
<p>Sa sampla seo, nuair a shannaimid an luach sl√°nuimhir <code>5</code> go <code>x</code>, ligimid an
t√° a fhios ag tiomsaitheoir gur sl√°nuimhir a bheidh sa chine√°l cine√°lach <code>T</code> don ch√°s seo de
<code>Point&lt;T&gt;</code>. Ansin nuair a shonraimid <code>4.0</code> le haghaidh <code>y</code>, rud a shainigh muid go mbeadh an
cine√°l c√©anna le <code>x</code>, gheobhaidh muid earr√°id cine√°l neamhr√©ire mar seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling chapter10 v0.1.0 (file:///projects/chapter10)
error[E0308]: mismatched types
 --&gt; src/main.rs:7:38
  |
7 |     let wont_work = Point { x: 5, y: 4.0 };
  |                                      ^^^ expected integer, found floating-point number

For more information about this error, try `rustc --explain E0308`.
error: could not compile `chapter10` (bin "chapter10") due to 1 previous error
</code></pre>
<p>Strucht√∫r <code>Point</code> a shaini√∫ ina bhfuil <code>x</code> agus <code>y</code> araon cine√°lach ach a bhf√©adfadh go mbeadh
cine√°lacha √©ags√∫la, is f√©idir linn paraim√©adair ilchine√°lacha cine√°lacha a √∫s√°id. Mar shampla, i
Ag liost√∫ 10-8, athra√≠onn muid an sainmh√≠ni√∫ ar <code>Point</code> le bheith cine√°lach thar chine√°lacha <code>T</code>
agus <code>U</code> √°it a bhfuil <code>x</code> den chine√°l <code>T</code> agus <code>y</code> den chine√°l <code>U</code>.</p>
<Listing number="10-8" file-name="src/main.rs" caption="A `Point<T, U>` generic over two types so that `x` and `y` can be values of different types">
<pre><pre class="playground"><code class="language-rust">struct Point&lt;T, U&gt; {
    x: T,
    y: U,
}

fn main() {
    let both_integer = Point { x: 5, y: 10 };
    let both_float = Point { x: 1.0, y: 4.0 };
    let integer_and_float = Point { x: 5, y: 4.0 };
}</code></pre></pre>
</Listing>
<p>Anois ceada√≠tear na c√°sanna go l√©ir de <code>Point</code> a thaispe√°ntar! Is f√©idir leat an oiread cine√°lach a √∫s√°id
paraim√©adair cine√°l i sainmh√≠ni√∫ mar is mian leat, ach ag baint √∫s√°ide as n√≠os m√≥ n√° c√∫pla a dh√©anann
do ch√≥d deacair a l√©amh. M√° aims√≠onn t√∫ go bhfuil go leor cine√°lacha cine√°lacha de dh√≠th ort
do ch√≥d, d'fh√©adfadh s√© a l√©iri√∫ go bhfuil g√° le do ch√≥d a athstrucht√∫r√∫ go dt√≠ n√≠os l√∫
p√≠osa√≠.</p>
<h3 id="i-sainmh√≠nithe-enum"><a class="header" href="#i-sainmh√≠nithe-enum">I Sainmh√≠nithe Enum</a></h3>
<p>Mar a rinneamar le strucht√∫ir, is f√©idir linn enums a shaini√∫ chun cine√°lacha sonra√≠ cine√°lacha a choinne√°il ina gcuid
athraithigh. Breathna√≠mis ar an <code>Option&lt;T&gt;</code> at√° sa chaighde√°n
sol√°thairt√≠ leabharlainne, a d‚Äô√∫s√°ideamar i gCaibidil 6:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Option&lt;T&gt; {
    Some(T),
    None,
}
<span class="boring">}</span></code></pre></pre>
<p>Ba cheart go nd√©anfadh an sainmh√≠ni√∫ seo n√≠os m√≥ ciall duit anois. Mar a fheiceann t√∫, t√° an
T√° <code>Option&lt;T&gt;</code> enum cine√°lach thar an gcine√°l <code>T</code> agus t√° dh√° leagan ann: <code>Some</code>, a
t√° luach amh√°in de chine√°l <code>T</code> aige, agus malairt <code>None</code> nach bhfuil luach ar bith aige.
Tr√≠ √∫s√°id a bhaint as an <code>Option&lt;T&gt;</code> enum, is f√©idir linn coincheap teib√≠ an
luach roghnach, agus toisc go bhfuil <code>Option&lt;T&gt;</code> cine√°lach, is f√©idir linn an astarraingt seo a √∫s√°id
is cuma c√©n cine√°l an luach roghnach.</p>
<p>Is f√©idir le Enums cine√°lacha ilchine√°lacha a √∫s√°id freisin. An sainmh√≠ni√∫ ar an <code>Result</code>
Is sampla amh√°in √© an enum a d‚Äô√∫s√°ideamar i gCaibidil 9:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Result&lt;T, E&gt; {
    Ok(T),
    Err(E),
}
<span class="boring">}</span></code></pre></pre>
<p>T√° an enum <code>Result</code> cine√°lach thar dh√° chine√°l, <code>T</code> agus <code>E</code>, agus t√° dh√° leagan ann:
<code>Ok</code>, a bhfuil luach de chine√°l <code>T</code> aige, agus <code>Err</code>, a bhfuil luach cine√°il aige
<code>e</code>. F√°gann an sainmh√≠ni√∫ seo go bhfuil s√© √°isi√∫il an enum <code>Result</code> a √∫s√°id √°it ar bith againn
b√≠odh oibr√≠ocht agat a d'fh√©adfadh a bheith rath√∫il (luach de chine√°l √©igin <code>T</code> a thabhairt ar ais) n√≥ a theipeann
(tabhair ar ais earr√°id de shaghas √©igin <code>E</code>). Go deimhin, is √© seo an rud a d'√∫s√°id muid a oscailt
comhad i Liost√∫ 9-3, √°it ar l√≠onadh <code>T</code> leis an gcine√°l <code>std::fs::File</code> nuair
D'√©irigh leis an gcomhad a oscailt agus l√≠onadh <code>E</code> leis an gcine√°l
<code>std::io::Error</code> nuair a bh√≠ fadhbanna le hoscailt an chomhaid.</p>
<p>Nuair a aithn√≠onn t√∫ c√°sanna i do ch√≥d le strucht√∫r iolrach n√≥ enum
sainmh√≠nithe nach bhfuil difri√∫il ach amh√°in i gcine√°lacha na luachanna at√° acu, is f√©idir leat
seachain d√∫bailt tr√≠ √∫s√°id a bhaint as cine√°lacha cine√°lacha ina ionad.</p>
<h3 id="i-sainmh√≠nithe-modh"><a class="header" href="#i-sainmh√≠nithe-modh">I Sainmh√≠nithe Modh</a></h3>
<p>Is f√©idir linn modhanna a chur i bhfeidhm maidir le strucht√∫ir agus enums (mar a rinneamar i gCaibidil 5) agus √∫s√°id
cine√°lacha cine√°lacha ina sainmh√≠nithe freisin. L√©ir√≠onn liost√∫ 10-9 an <code>Point&lt;T&gt;</code>
strucht√∫r sainmh√≠nithe againn i Liost√∫ 10-6 le modh darb ainm <code>x</code> curtha i bhfeidhm air.</p>
<Listing number="10-9" file-name="src/main.rs" caption="Implementing a method named `x` on the `Point<T>` struct that will return a reference to the `x` field of type `T`">
<pre><pre class="playground"><code class="language-rust">struct Point&lt;T&gt; {
    x: T,
    y: T,
}

impl&lt;T&gt; Point&lt;T&gt; {
    fn x(&amp;self) -&gt; &amp;T {
        &amp;self.x
    }
}

fn main() {
    let p = Point { x: 5, y: 10 };

    println!("p.x = {}", p.x());
}</code></pre></pre>
</Listing>
<p>Anseo, shainmh√≠omar modh darb ainm <code>x</code> ar <code>Point &lt;T&gt;</code> a thugann tagairt ar ais
leis na sonra√≠ sa r√©imse <code>x</code>.</p>
<p>Tabhair faoi deara go gcaithfimid <code>T</code> a dhearbh√∫ d√≠reach i ndiaidh <code>impl</code> ionas gur f√©idir linn <code>T</code> a √∫s√°id lena shonr√∫
go bhfuil modhanna ar an gcine√°l <code>Point &lt;T&gt;</code> √° gcur i bhfeidhm againn. Tr√≠ <code>T</code> a dhearbh√∫ mar a
cine√°l cine√°lach tar √©is <code>impl</code>, is f√©idir le meirge a aithint gurb √© an cine√°l san uillinn
Is cine√°l cine√°lach seachas cine√°l coincr√©ite √© l√∫ib√≠n√≠ i <code>Point</code>. D'fh√©adfadh muid
roghnaigh ainm eile don pharaim√©adar cine√°lach seo n√° an t-ainm cine√°lach
paraim√©adar dearbhaithe sa sainmh√≠ni√∫ struct, ach ag baint √∫s√°ide as an ainm c√©anna √©
traidisi√∫nta. M√° scr√≠obhann t√∫ modh laistigh de <code>impl</code> a dhearbha√≠onn cine√°lach
cine√°l, saineofar an modh sin ar aon √°sc den chine√°l, is cuma c√©n
cuirtear an cine√°l coincr√©it in ionad an chine√°il cine√°lach.</p>
<p>Is f√©idir linn srianta ar chine√°lacha cine√°lacha a shonr√∫ freisin agus modhanna √° saini√∫ ar an
cine√°l. D'fh√©adfaimis, mar shampla, modhanna a chur i bhfeidhm ar ch√°sanna <code>Point&lt;f32&gt;</code> amh√°in
seachas ar ch√°sanna <code>Point&lt;T&gt;</code> le haon chine√°l cine√°lach. I Liosta 10-10 t√°imid
bain √∫s√°id as an gcine√°l coincr√©ite <code>f32</code>, rud a chialla√≠onn nach ndearbha√≠mid aon chine√°l i ndiaidh <code>impl</code>.</p>
<Listing number="10-10" file-name="src/main.rs" caption="An `impl` block that only applies to a struct with a particular concrete type for the generic type parameter `T`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct Point&lt;T&gt; {
</span><span class="boring">    x: T,
</span><span class="boring">    y: T,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; Point&lt;T&gt; {
</span><span class="boring">    fn x(&amp;self) -&gt; &amp;T {
</span><span class="boring">        &amp;self.x
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>impl Point&lt;f32&gt; {
    fn distance_from_origin(&amp;self) -&gt; f32 {
        (self.x.powi(2) + self.y.powi(2)).sqrt()
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let p = Point { x: 5, y: 10 };
</span><span class="boring">
</span><span class="boring">    println!("p.x = {}", p.x());
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Cialla√≠onn an c√≥d seo go mbeidh <code>distance_from_origin</code> ag an gcine√°l <code>Point&lt;f32&gt;</code>
modh ; i gc√°sanna eile de <code>Point&lt;T&gt;</code> nuair nach de chine√°l <code>f32</code> √© <code>T</code>'
an modh seo a shaini√∫. Tomhaiseann an modh c√© chomh fada √°r bpointe √≥ na
pointe ag comhordan√°id√≠ (0.0, 0.0) agus √∫s√°ideann oibr√≠ochta√≠ matamaitice at√°
ar f√°il do chine√°lacha sn√°mhphointe amh√°in.</p>
<p>N√≠ bh√≠onn paraim√©adair chine√°lacha i sainmh√≠ni√∫ strucht√∫ir mar a ch√©ile i gc√≥na√≠ leo si√∫d
√∫s√°ideann t√∫ s√≠nithe modha an strucht√∫ir ch√©anna sin. √ös√°ideann liost√∫ 10-11 an cine√°lach
cine√°lacha <code>X1</code> agus <code>Y1</code> don strucht√∫r <code>Point</code> agus <code>X2</code> <code>Y2</code> don mhodh <code>mixup</code>
s√≠ni√∫ chun an sampla a dh√©anamh n√≠os soil√©ire. Crutha√≠onn an modh <code>Point</code> nua
mar shampla leis an luach <code>x</code> √≥n <code>self</code> <code>Point</code> (den chine√°l <code>X1</code>) agus an <code>y</code>
luach √≥n <code>Point</code> a cuireadh isteach (den chine√°l <code>Y2</code>).</p>
<Listing number="10-11" file-name="src/main.rs" caption="A method that uses generic types different from its struct‚Äôs definition">
<pre><pre class="playground"><code class="language-rust">struct Point&lt;X1, Y1&gt; {
    x: X1,
    y: Y1,
}

impl&lt;X1, Y1&gt; Point&lt;X1, Y1&gt; {
    fn mixup&lt;X2, Y2&gt;(self, other: Point&lt;X2, Y2&gt;) -&gt; Point&lt;X1, Y2&gt; {
        Point {
            x: self.x,
            y: other.y,
        }
    }
}

fn main() {
    let p1 = Point { x: 5, y: 10.4 };
    let p2 = Point { x: "Hello", y: 'c' };

    let p3 = p1.mixup(p2);

    println!("p3.x = {}, p3.y = {}", p3.x, p3.y);
}</code></pre></pre>
</Listing>
<p>I <code>main</code>, t√° <code>Point</code> sainmh√≠nithe againn a bhfuil <code>i32</code> ann do <code>x</code> (le luach <code>5</code>)
agus <code>f64</code> le haghaidh <code>y</code> (le luach <code>10.4</code>). Is strucht√∫r <code>Point</code> √© an athr√≥g <code>p2</code>
a bhfuil sreangshlis le haghaidh <code>x</code> (le luach <code>"Hello"</code>) agus <code>char</code> le haghaidh <code>y</code>
(le luach <code>c</code>). Ag glaoch <code>mixup</code> ar <code>p1</code> leis an arg√≥int <code>p2</code> tugann <code>p3</code> d√∫inn,
a mbeidh <code>i32</code> le haghaidh <code>x</code> mar gur th√°inig <code>x</code> √≥ <code>p1</code>. An athr√≥g <code>p3</code>
will have a <code>char</code> for <code>y</code> because <code>y</code> came from <code>p2</code>. An macra <code>println!</code>
priont√°lfaidh glao <code>p3.x = 5, p3.y = c</code>.</p>
<p>Is √© cusp√≥ir an sampla seo a l√©iri√∫ staid ina bhfuil roinnt cine√°lach
dearbha√≠tear paraim√©adair le <code>impl</code> agus dearbha√≠tear cuid acu leis an modh
sainmh√≠ni√∫. Anseo, dearbha√≠tear na paraim√©adair chine√°lacha <code>X1</code> agus <code>Y1</code> ina dhiaidh sin
<code>impl</code> mar go dt√©ann siad leis an sainmh√≠ni√∫ struct. Na paraim√©adair chine√°lacha <code>X2</code>
agus d√©antar <code>Y2</code> a dhearbh√∫ tar √©is <code>fn mixup</code> toisc nach mbaineann siad ach leis an
modh.</p>
<h3 id="feidhm√≠ocht-an-ch√≥id-ag-√ös√°id-generics"><a class="header" href="#feidhm√≠ocht-an-ch√≥id-ag-√ös√°id-generics">Feidhm√≠ocht an Ch√≥id ag √ös√°id Generics</a></h3>
<p>B'fh√©idir go bhfuil t√∫ ag smaoineamh an bhfuil costas ama rite ag baint √∫s√°ide as cine√°l cine√°lach
paraim√©adair. Is √© an dea-sc√©al n√° nach nd√©anfaidh √∫s√°id cine√°lacha cine√°lacha do chl√°r
re√°cht√°il ar bith n√≠os moille n√° mar a bheadh ‚Äã‚Äãs√© le cine√°lacha coincr√©ite.</p>
<p>Cuireann meirge √© seo i gcr√≠ch tr√≠ mhonamorphization an ch√≥id a dh√©anamh ag baint √∫s√°ide as
generics ag am tiomsaithe. Is √© <em>Monomorphization</em> an pr√≥iseas a bhaineann le casadh cine√°lach
c√≥d isteach i gc√≥d sonrach tr√≠ na cine√°lacha nithi√∫la a √∫s√°idtear nuair a
tiomsaithe. Sa phr√≥iseas seo, d√©anann an tiomsaitheoir a mhalairt de na c√©imeanna a d'√∫s√°ideamar
chun an fheidhm chine√°lach a chruth√∫ i Liost√∫ 10-5: f√©achann an tiomsaitheoir ar gach ceann de na
√°iteanna ina dtugtar c√≥d cine√°lach agus gineann c√≥d do na cine√°lacha nithi√∫la
tugtar an c√≥d cine√°lach le.</p>
<p>Breathna√≠mid ar conas a oibr√≠onn s√© seo tr√≠ √∫s√°id a bhaint as cine√°lach na leabharlainne caighde√°nach
<code>Option&lt;T&gt;</code> enum:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let integer = Some(5);
let float = Some(5.0);
<span class="boring">}</span></code></pre></pre>
<p>Nuair a thiomsa√≠onn Rust an c√≥d seo, d√©anann s√© monomorphization. Le linn sin
phr√≥iseas, l√©ann an tiomsaitheoir na luachanna a √∫s√°ideadh i <code>Option&lt;T&gt;</code>
c√°sanna agus aithn√≠onn s√© dh√° chine√°l <code>Option&lt;T&gt;</code>: is √© ceann amh√°in <code>i32</code> agus an ceann eile
t√° <code>f64</code>. Mar sin, leathna√≠onn s√© an sainmh√≠ni√∫ cine√°lach ar <code>Option&lt;T&gt;</code> ina dh√° cheann
sainmh√≠nithe ar <code>i32</code> agus <code>f64</code>, rud a chuirtear in ionad an chine√°lach
sainmh√≠ni√∫ leis na cinn ar leith.</p>
<p>Breathna√≠onn an leagan monomorphized den ch√≥d cos√∫il leis an m√©id seo a leanas (an
√ös√°ideann tiomsaitheoir ainmneacha at√° difri√∫il √≥ na cinn at√° in √∫s√°id againn anseo le haghaidh l√©iri√∫):</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">enum Option_i32 {
    Some(i32),
    None,
}

enum Option_f64 {
    Some(f64),
    None,
}

fn main() {
    let integer = Option_i32::Some(5);
    let float = Option_f64::Some(5.0);
}</code></pre></pre>
</Listing>
<p>Cuirtear na sainmh√≠nithe ar leith cruthaithe ag
an tiomsaitheoir. Toisc go dtiomsa√≠onn Rust c√≥d cine√°lach i gc√≥d a shonra√≠onn an
cine√°l i ngach c√°s, n√≠ √≠ocaimid aon chostas ama rite as generics a √∫s√°id. Nuair a bheidh an c√≥d
ritheann, feidhm√≠onn s√© d√≠reach mar a bheadh ‚Äã‚Äãs√© d√° mbeadh d√∫bailt againn ar gach sainmh√≠ni√∫
l√°mh. D√©anann an pr√≥iseas monamorphization generics Rust thar a bheith √©ifeachtach
ag am rite.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tr√©ithe-ag-sainmh√≠ni√∫-iompar-comhroinnte"><a class="header" href="#tr√©ithe-ag-sainmh√≠ni√∫-iompar-comhroinnte">Tr√©ithe: Ag Sainmh√≠ni√∫ Iompar Comhroinnte</a></h2>
<p>Sainmh√≠n√≠onn <em>trait</em> an fheidhmi√∫lacht at√° ag cine√°l ar leith agus ar f√©idir leis a roinnt
cine√°lacha eile. Is f√©idir linn tr√©ithe a √∫s√°id chun iompar roinnte a shaini√∫ ar bhealach teib√≠. muid
is f√©idir <em>trait bounds</em> a √∫s√°id chun a shonr√∫ gur f√©idir le cine√°l cine√°lach a bheith ina chine√°l ar bith a bhfuil
iompar √°irithe.</p>
<blockquote>
<p>N√≥ta: T√° tr√©ithe cos√∫il le gn√© ar a dtugtar go minic <em>interfaces</em> i gceann eile
teangacha, c√© go bhfuil roinnt difr√≠ochta√≠ ann.</p>
</blockquote>
<h3 id="tr√©ith-√°-sainmh√≠ni√∫"><a class="header" href="#tr√©ith-√°-sainmh√≠ni√∫">Tr√©ith √° Sainmh√≠ni√∫</a></h3>
<p>Is √©ard at√° in iompar cine√°il na modhanna ar f√©idir linn glaoch orthu ar an gcine√°l sin. Difri√∫il
roinneann cine√°lacha an t-iompar c√©anna m√°s f√©idir linn na modhanna c√©anna a ghlaoch orthu sin go l√©ir
cine√°lacha. Is bealach iad sainmh√≠nithe tr√©ithe chun s√≠nithe modhanna a ghr√∫p√°il le ch√©ile chun
sraith iompra√≠ochta√≠ a shaini√∫ at√° riachtanach chun cusp√≥ir √©igin a bhaint amach.</p>
<p>Mar shampla, lig d√∫inn a r√° go bhfuil strucht√∫ir iolracha againn a bhfuil cine√°lacha √©ags√∫la agus
m√©ideanna t√©acs: strucht√∫r <code>NewsArticle</code> a choinn√≠onn sc√©al nuachta comhdaithe in a
su√≠omh ar leith agus <code>Tweet</code> ar f√©idir, ar a mh√©ad, 280 carachtar a bheith ann
le meiteashonra√≠ a thugann le fios c√© acu tweet nua, retweet n√≥ freagra a bh√≠ ann
chuig tweet eile.</p>
<p>Ba mhaith linn cliathbhosca leabharlainne comhbhailitheoir me√°n a dh√©anamh darb ainm <code>aggregator</code> is f√©idir
taispe√°in achoimr√≠ ar shonra√≠ a d'fh√©adfa√≠ a st√≥r√°il in <code>NewsArticle</code> n√≥ <code>Tweet</code>
shampla. Chun seo a dh√©anamh, t√° achoimre de dh√≠th orainn √≥ gach cine√°l, agus iarrfaimid √© sin
achoimre tr√≠ mhodh <code>summarize</code> a ghlaoch ar shampla. L√©ir√≠onn liost√∫ 10-12 an
sainmh√≠ni√∫ ar thr√©ith <code>Summary</code> phoibl√≠ a chuireann an t-iompar seo in i√∫l.</p>
<Listing number="10-12" file-name="src/lib.rs" caption="A `Summary` trait that consists of the behavior provided by a `summarize` method">
<pre><code class="language-rust noplayground">pub trait Summary {
    fn summarize(&amp;self) -&gt; String;
}</code></pre>
</Listing>
<p>Anseo, dearbha√≠mid tr√©ith ag baint √∫s√°ide as an eochairfhocal <code>trait</code> agus ansin ainm an trait,
at√° <code>Summary</code> sa ch√°s seo. Dearbha√≠mid freisin gur <code>Summary</code> an trait ionas go
is f√©idir le cliathbhosca√≠ ag brath ar an gcliathbhosca seo √∫s√°id a bhaint as an tr√©ith seo freisin, mar a fheicfimid ann
c√∫pla sampla. Taobh istigh de na l√∫ib√≠n√≠ curly, dearbha√≠mid na s√≠nithe modh
a chuireann s√≠os ar iompra√≠ocht na gcine√°lacha a chuireann an trait seo i bhfeidhm, at√° i
is √© an c√°s seo n√° <code>fn summarize(&amp;self) -&gt; String</code>.</p>
<p>Tar √©is an s√≠ni√∫ modh, in ionad cur i bhfeidhm a shol√°thar laistigh de chatach
l√∫ib√≠n√≠, √∫s√°idimid leathstad. N√≠ m√≥r do gach cine√°l a chuireann an tr√©ith seo chun feidhme a shol√°thar
a iompar saincheaptha f√©in le haghaidh an comhlacht ar an modh. Cuirfidh an tiomsaitheoir i bhfeidhm
go mbeidh an modh <code>summarize</code> ag aon chine√°l a bhfuil an trait <code>Summary</code> aige
sainmh√≠nithe go d√≠reach leis an s√≠ni√∫ seo.</p>
<p>Is f√©idir le tr√©ith modhanna iolracha a bheith ina chorp: t√° na s√≠nithe modh liostaithe
ceann in aghaidh an l√≠ne, agus cr√≠ochna√≠onn gach l√≠ne i leathstad.</p>
<h3 id="tr√©ith-ar-chine√°l-a-chur-i-bhfeidhm"><a class="header" href="#tr√©ith-ar-chine√°l-a-chur-i-bhfeidhm">Tr√©ith ar Chine√°l a Chur i bhFeidhm</a></h3>
<p>Anois go bhfuil s√≠nithe inmhianaithe na modhanna <code>Summary</code> sainithe againn,
is f√©idir linn √© a chur i bhfeidhm ar na cine√°lacha in√°r gcomhbhailitheoir me√°in. Liost√°il 10-13 se√≥nna
cur i bhfeidhm na tr√©ithe <code>Summary</code> ar an strucht√∫r <code>NewsArticle</code> a √∫s√°ideann
an ceannl√≠ne, an t-√∫dar, agus an su√≠omh chun luach aischuir a chruth√∫
<code>summarize</code>. Maidir leis an strucht√∫r <code>Tweet</code>, sainmh√≠n√≠mid <code>summarize</code> mar an t-ainm √∫s√°ideora
ina dhiaidh sin t√©acs ioml√°n an tweet, ag glacadh leis go bhfuil an t-√°bhar tweet
teoranta do 280 carachtar cheana f√©in.</p>
<Listing number="10-13" file-name="src/lib.rs" caption="Implementing the `Summary` trait on the `NewsArticle` and `Tweet` types">
<pre><code class="language-rust noplayground"><span class="boring">pub trait Summary {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String;
</span><span class="boring">}
</span><span class="boring">
</span>pub struct NewsArticle {
    pub headline: String,
    pub location: String,
    pub author: String,
    pub content: String,
}

impl Summary for NewsArticle {
    fn summarize(&amp;self) -&gt; String {
        format!("{}, by {} ({})", self.headline, self.author, self.location)
    }
}

pub struct Tweet {
    pub username: String,
    pub content: String,
    pub reply: bool,
    pub retweet: bool,
}

impl Summary for Tweet {
    fn summarize(&amp;self) -&gt; String {
        format!("{}: {}", self.username, self.content)
    }
}</code></pre>
</Listing>
<p>T√° cur i bhfeidhm tr√©ith ar chine√°l cos√∫il le modhanna rialta a chur i bhfeidhm. T√° an
difr√≠ocht is ea gur tar √©is <code>impl</code>, cuirimid an t-ainm trait ba mhaith linn a chur i bhfeidhm,
ansin bain √∫s√°id as an eochairfhocal <code>for</code>, agus ansin sonraigh ainm an chine√°il a theasta√≠onn uainn
an trait a chur i bhfeidhm le haghaidh. Laistigh den bhloc <code>impl</code>, chuireamar na s√≠nithe modha
at√° sainmh√≠nithe ag an saini√∫ trait. In ionad leathstad a chur leis i ndiaidh gach ceann acu
s√≠ni√∫, √∫s√°idimid l√∫ib√≠n√≠ curly agus l√≠on isteach an comhlacht modh leis an saini√∫il
iompar a theasta√≠onn uainn go mbeadh modhanna an trait don chine√°l √°irithe.</p>
<p>Anois go bhfuil an trait <code>Summary</code> ar <code>NewsArticle</code> agus
<code>Tweet</code>, is f√©idir le h√∫s√°ideoir√≠ an chliabh√°in na modhanna trait a ghlaoch ar ch√°sanna de
<code>NewsArticle</code> agus <code>Tweet</code> ar an mbealach c√©anna a dtugaimid modhanna rialta orthu. An t-aon
difr√≠ocht n√° go gcaithfidh an t-√∫s√°ideoir an tr√©ith a thabhairt isteach sa raon feidhme chomh maith leis an
cine√°lacha. Seo sampla den chaoi a bhf√©adfadh cliathbhosca d√©n√°rtha √°r <code>aggregator</code> a √∫s√°id
cliathbhosca leabharlainne:</p>
<pre><code class="language-rust ignore">use aggregator::{Summary, Tweet};

fn main() {
    let tweet = Tweet {
        username: String::from("horse_ebooks"),
        content: String::from(
            "of course, as you probably already know, people",
        ),
        reply: false,
        retweet: false,
    };

    println!("1 new tweet: {}", tweet.summarize());
}</code></pre>
<p>Priont√°lann an c√≥d seo <code>1 new tweet: horse_ebooks: of course, as you probably already know, people</code>.</p>
<p>Is f√©idir le cliathbhosca√≠ eile a bhraitheann ar an gcliathbhosca <code>aggregator</code> an <code>Summary</code> a thabhairt freisin
tr√©ith isteach sa sc√≥ip chun <code>Summary</code> a chur i bhfeidhm ar a gcine√°lacha f√©in. Srian amh√°in le
Tabhair faoi deara nach f√©idir linn tr√©ith a chur i bhfeidhm ar chine√°l ach amh√°in m√° t√° an trait n√≥ an
cine√°l, n√≥ iad araon, √°iti√∫il d√°r gcliathbhosca. Mar shampla, is f√©idir linn caighde√°n a chur i bhfeidhm
tr√©ithe leabharlainne cos√∫il le <code>Display</code> ar chine√°l saincheaptha mar <code>Tweet</code> mar chuid d√°r
feidhmi√∫lacht cliathbhosca <code>aggregator</code> toisc go bhfuil an cine√°l <code>Tweet</code> √°iti√∫il d√°r gcuid
cliathbhosca <code>aggregator</code>. Is f√©idir linn freisin <code>Summary</code> ar <code>Vec&lt;T&gt;</code> a chur i bhfeidhm in√°r
cliathbhosca <code>aggregator</code> toisc go bhfuil an trait <code>Summary</code> √°iti√∫il d√°r <code>aggregator</code>
cliathbhosca.</p>
<p>Ach n√≠ f√©idir linn tr√©ithe seachtracha a chur i bhfeidhm ar chine√°lacha seachtracha. Mar shampla, n√≠ f√©idir linn
cuir an trait <code>Display</code> ar <code>Vec&lt;T&gt;</code> i bhfeidhm laistigh d√°r gcliathbhosca <code>aggregator</code> toisc
Sainmh√≠n√≠tear <code>Display</code> agus <code>Vec&lt;T&gt;</code> araon sa ghn√°thleabharlann agus n√≠l siad
√°iti√∫il d√°r gcliathbhosca <code>aggregator</code>. Is cuid de mhaoin ar a dtugtar an srian seo
<em>coherence</em>, agus go sonrach an riail <em>orphan</em>, ainmnithe amhlaidh mar gheall ar an
n√≠l cine√°l tuismitheora i l√°thair. Cinnt√≠onn an riail seo nach f√©idir c√≥d daoine eile
briseadh do ch√≥d agus vice versa. Gan an riail, d'fh√©adfadh dh√° chliabh√°n a chur i bhfeidhm
an tr√©ith ch√©anna don chine√°l c√©anna, agus n√≠ bheadh ‚Äã‚Äãa fhios ag Rust c√©n cur i bhfeidhm
a √∫s√°id.</p>
<h3 id="feidhmithe-r√©amhshocraithe"><a class="header" href="#feidhmithe-r√©amhshocraithe">Feidhmithe R√©amhshocraithe</a></h3>
<p>Uaireanta b√≠onn s√© √∫s√°ideach iompar r√©amhshocraithe a bheith agat le haghaidh cuid de na modhanna n√≥ gach ceann d√≠obh
i tr√©ith in ionad feidhmi√∫ch√°in a √©ileamh do gach modh ar gach cine√°l.
Ansin, de r√©ir mar a chuirimid an trait i bhfeidhm ar chine√°l √°irithe, is f√©idir linn a choinne√°il n√≥ a sh√°r√∫
iompra√≠ocht r√©amhshocraithe gach modha.</p>
<p>I Liost√∫ 10-14, sonra√≠mid teaghr√°n r√©amhshocraithe don mhodh <code>summarize</code> den
Tr√©ith <code>Summary</code> in ionad an s√≠ni√∫ modha amh√°in a shaini√∫, mar a rinneamar i
Liost√°il 10-12.</p>
<Listing number="10-14" file-name="src/lib.rs" caption="Defining a `Summary` trait with a default implementation of the `summarize` method">
<pre><code class="language-rust noplayground">pub trait Summary {
    fn summarize(&amp;self) -&gt; String {
        String::from("(Read more...)")
    }
}
<span class="boring">
</span><span class="boring">pub struct NewsArticle {
</span><span class="boring">    pub headline: String,
</span><span class="boring">    pub location: String,
</span><span class="boring">    pub author: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for NewsArticle {}
</span><span class="boring">
</span><span class="boring">pub struct Tweet {
</span><span class="boring">    pub username: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">    pub reply: bool,
</span><span class="boring">    pub retweet: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for Tweet {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}: {}", self.username, self.content)
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Chun feidhmchl√°r r√©amhshocraithe a √∫s√°id chun achoimre a dh√©anamh ar ch√°sanna de <code>NewsArticle</code>, d√©anaimid
sonraigh bloc <code>impl</code> folamh le <code>impl Summary for NewsArticle {}</code>.</p>
<p>C√© nach bhfuilimid ag saini√∫ an mhodha <code>summarize</code> ar <code>NewsArticle</code> a thuilleadh
go d√≠reach, chuireamar cur i bhfeidhm r√©amhshocraithe ar f√°il agus shonraigh muid √© sin
Cuireann <code>NewsArticle</code> an trait <code>Summary</code> i bhfeidhm. Mar thoradh air sin, is f√©idir linn glaoch f√≥s
an modh <code>summarize</code> ar shampla de <code>NewsArticle</code>, mar seo:</p>
<pre><code class="language-rust ignore"><span class="boring">use aggregator::{self, NewsArticle, Summary};
</span><span class="boring">
</span><span class="boring">fn main() {
</span>    let article = NewsArticle {
        headline: String::from("Penguins win the Stanley Cup Championship!"),
        location: String::from("Pittsburgh, PA, USA"),
        author: String::from("Iceburgh"),
        content: String::from(
            "The Pittsburgh Penguins once again are the best \
             hockey team in the NHL.",
        ),
    };

    println!("New article available! {}", article.summarize());
<span class="boring">}</span></code></pre>
<p>Priont√°lann an c√≥d seo <code>New article available! (Read more...)</code>.</p>
<p>N√≠ g√° d√∫inn aon rud a athr√∫ chun forfheidhmi√∫ r√©amhshocraithe a chruth√∫
cur i bhfeidhm <code>Summary</code> ar <code>Tweet</code> i Liosta 10-13. Is √© an ch√∫is at√° leis sin
is ionann an chomhr√©ir chun cur i bhfeidhm r√©amhshocraithe a sh√°r√∫ agus an chomhr√©ir
chun modh trait a chur i bhfeidhm nach bhfuil cur i bhfeidhm r√©amhshocraithe aige.</p>
<p>Is f√©idir le cur i bhfeidhm r√©amhshocraithe modhanna eile sa tr√©ith ch√©anna a ghlaoch, fi√∫ amh√°in m√°s iad sin
n√≠l cur i bhfeidhm r√©amhshocraithe ag modhanna eile. Ar an mbealach seo, is f√©idir le trait
go leor feidhmi√∫lacht √∫s√°ideach a shol√°thar agus n√≠ g√° ach na hoibreoir√≠ a shonr√∫
cuid bheag de. Mar shampla, d'fh√©adfaimis an tr√©ithe <code>Summary</code> a shaini√∫ chun a
modh <code>summarize_author</code> a bhfuil a chur i bhfeidhm ag teast√°il, agus ansin sainigh a
modh <code>summarize</code> a bhfuil cur i bhfeidhm r√©amhshocraithe aige a ghlaonn an
modh <code>summarize_author</code>:</p>
<pre><code class="language-rust noplayground">pub trait Summary {
    fn summarize_author(&amp;self) -&gt; String;

    fn summarize(&amp;self) -&gt; String {
        format!("(Read more from {}...)", self.summarize_author())
    }
}
<span class="boring">
</span><span class="boring">pub struct Tweet {
</span><span class="boring">    pub username: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">    pub reply: bool,
</span><span class="boring">    pub retweet: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for Tweet {
</span><span class="boring">    fn summarize_author(&amp;self) -&gt; String {
</span><span class="boring">        format!("@{}", self.username)
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>Chun an leagan seo de <code>Summary</code> a √∫s√°id, n√≠ g√° d√∫inn ach <code>summarize_author</code> a shaini√∫
nuair a chuirimid an trait i bhfeidhm ar chine√°l:</p>
<pre><code class="language-rust ignore"><span class="boring">pub trait Summary {
</span><span class="boring">    fn summarize_author(&amp;self) -&gt; String;
</span><span class="boring">
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("(Read more from {}...)", self.summarize_author())
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct Tweet {
</span><span class="boring">    pub username: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">    pub reply: bool,
</span><span class="boring">    pub retweet: bool,
</span><span class="boring">}
</span><span class="boring">
</span>impl Summary for Tweet {
    fn summarize_author(&amp;self) -&gt; String {
        format!("@{}", self.username)
    }
}</code></pre>
<p>Tar √©is d√∫inn <code>summarize_author</code> a shaini√∫, is f√©idir linn <code>summarize</code> a ghlaoch ar ch√°sanna an
Beidh <code>Tweet</code> struct, agus cur i bhfeidhm r√©amhshocraithe <code>summarize</code> glaoch ar an
sainmh√≠ni√∫ ar <code>summarize_author</code> at√° curtha ar f√°il againn. Toisc go bhfuil muid curtha i bhfeidhm
<code>summarize_author</code>, thug an trait <code>Summary</code> iompar an
modh <code>summarize</code> gan a cheangal orainn a thuilleadh c√≥d a scr√≠obh. Seo a bhfuil
is cos√∫il:</p>
<pre><code class="language-rust ignore"><span class="boring">use aggregator::{self, Summary, Tweet};
</span><span class="boring">
</span><span class="boring">fn main() {
</span>    let tweet = Tweet {
        username: String::from("horse_ebooks"),
        content: String::from(
            "of course, as you probably already know, people",
        ),
        reply: false,
        retweet: false,
    };

    println!("1 new tweet: {}", tweet.summarize());
<span class="boring">}</span></code></pre>
<p>Priont√°lann an c√≥d seo <code>1 new tweet: (Read more from @horse_ebooks...)</code>.</p>
<p>Tabhair faoi deara nach f√©idir an forfheidhmi√∫ r√©amhshocraithe a ghlaoch √≥
cur i bhfeidhm an mhodha ch√©anna sin a sh√°r√∫.</p>
<h3 id="tr√©ithe-mar-pharaim√©adair"><a class="header" href="#tr√©ithe-mar-pharaim√©adair">Tr√©ithe mar Pharaim√©adair</a></h3>
<p>Anois go bhfuil a fhios agat conas tr√©ithe a shaini√∫ agus a chur i bhfeidhm, is f√©idir linn ini√∫chadh a dh√©anamh ar conas iad a √∫s√°id
tr√©ithe a shaini√∫ feidhmeanna a ghlacann go leor cine√°lacha √©ags√∫la. Bainfimid √∫s√°id as an
Tr√©ith <code>Summary</code> chuireamar i bhfeidhm ar na cine√°lacha <code>NewsArticle</code> agus <code>Tweet</code> in
Ag liost√∫ 10-13 chun feidhm <code>notify</code> a shaini√∫ a dtugtar an modh <code>summarize</code> air
ar a pharaim√©adar <code>item</code>, at√° de shaghas √©igin a chuireann an <code>Summary</code> i bhfeidhm
trait. Chun seo a dh√©anamh, √∫s√°idimid an chomhr√©ir <code>impl Trait</code>, mar seo:</p>
<pre><code class="language-rust ignore"><span class="boring">pub trait Summary {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct NewsArticle {
</span><span class="boring">    pub headline: String,
</span><span class="boring">    pub location: String,
</span><span class="boring">    pub author: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for NewsArticle {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}, by {} ({})", self.headline, self.author, self.location)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct Tweet {
</span><span class="boring">    pub username: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">    pub reply: bool,
</span><span class="boring">    pub retweet: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for Tweet {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}: {}", self.username, self.content)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>pub fn notify(item: &amp;impl Summary) {
    println!("Breaking news! {}", item.summarize());
}</code></pre>
<p>In ionad cine√°l nithi√∫il don pharaim√©adar <code>item</code>, sonra√≠mid an <code>impl</code>
eochairfhocal agus an t-ainm trait. Glacann an paraim√©adar seo le haon chine√°l a chuireann an
tr√©ith shonraithe. I gcorp an <code>notify</code>, is f√©idir linn glaoch ar aon mhodhanna ar <code>item</code>
a thagann as an trait <code>Summary</code>, mar shampla <code>summarize</code>. Is f√©idir linn <code>notify</code> a ghlaoch
agus pas a fh√°il in aon ch√°s de <code>NewsArticle</code> n√≥ <code>Tweet</code>. C√≥d a ghlaonn an
feidhmi√∫ le haon chine√°l eile, mar shampla <code>String</code> n√≥ <code>i32</code>, n√≠ thioms√≥idh
toisc nach gcuireann na cine√°lacha sin <code>Summary</code> i bhfeidhm.</p>
<!-- Sean-cheannteidil. N√° bain amach n√≥ seans go mbrisfidh naisc. -->
<p><a id="fixing-the-more-function-with-trait-bounds"></a></p>
<h4 id="comhr√©ir-trait-bound"><a class="header" href="#comhr√©ir-trait-bound">Comhr√©ir Trait Bound</a></h4>
<p>Feidhm√≠onn an chomhr√©ir <code>impl Trait</code> do ch√°sanna simpl√≠ ach is comhr√©ir √© i nd√°ir√≠re
si√∫cra le haghaidh foirm n√≠os faide ar a dtugtar <em>trait bound</em>; Breathna√≠onn s√© mar seo:</p>
<pre><code class="language-rust ignore">pub fn notify&lt;T: Summary&gt;(item: &amp;T) {
    println!("Breaking news! {}", item.summarize());
}</code></pre>
<p>T√° an fhoirm n√≠os faide seo comhionann leis an sampla sa roinn roimhe seo ach t√°
n√≠os briathar. Cuirimid teorainneacha tr√©ithe leis an dearbh√∫ den chine√°l cine√°lach
paraim√©adar tar √©is idirstad agus laistigh de l√∫ib√≠n√≠ uillinn.</p>
<p>T√° an chomhr√©ir <code>impl Trait</code> √°isi√∫il agus crutha√≠onn s√© c√≥d n√≠os gonta go simpl√≠
c√°sanna, agus is f√©idir leis an gcomhr√©ir tr√©ithe n√≠os ioml√°ine castacht a chur in i√∫l i gc√°sanna eile
c√°sanna. Mar shampla, is f√©idir dh√° pharaim√©adar a bheith againn a chuireann <code>Summary</code> i bhfeidhm. Ag d√©anamh
mar sin t√° cuma mar seo ar chomhr√©ir <code>impl Trait</code>:</p>
<pre><code class="language-rust ignore">pub fn notify(item1: &amp;impl Summary, item2: &amp;impl Summary) {</code></pre>
<p>Is cu√≠ <code>impl Trait</code> a √∫s√°id m√° theasta√≠onn uainn go gcead√≥dh an fheidhm seo <code>item1</code> agus
cine√°lacha √©ags√∫la a bheith ag <code>item2</code> (chomh fada agus a chuireann an d√° chine√°l <code>Summary</code> i bhfeidhm). M√°s rud √©
ba mhaith linn iallach a chur ar an d√° paraim√©adair a bheith ar an gcine√°l c√©anna, √°fach, n√≠ m√≥r d√∫inn a √∫s√°id a
trait faoi cheangal, mar seo:</p>
<pre><code class="language-rust ignore">pub fn notify&lt;T: Summary&gt;(item1: &amp;T, item2: &amp;T) {</code></pre>
<p>Sonra√≠tear an cine√°l cine√°lach <code>T</code> mar an cine√°l <code>item1</code> agus <code>item2</code>
paraim√©adair srianta ar an bhfeidhm den s√≥rt sin go bhfuil an cine√°l nithi√∫la an luach
a rith mar arg√≥int ar son <code>item1</code> agus caithfidh <code>item2</code> a bheith mar an gc√©anna.</p>
<h4 id="ag-sonr√∫-na-dtr√©ithe-iolracha-leis-an-gcomhr√©ir-"><a class="header" href="#ag-sonr√∫-na-dtr√©ithe-iolracha-leis-an-gcomhr√©ir-">Ag sonr√∫ na dTr√©ithe Iolracha leis an gComhr√©ir <code>+</code></a></h4>
<p>Is f√©idir linn n√≠os m√≥ n√° tr√©ith amh√°in a shonr√∫ freisin. Abair go raibh muid ag iarraidh <code>notify</code> a √∫s√°id
form√°idi√∫ taispe√°na chomh maith le <code>summarize</code> ar <code>item</code>: sonra√≠mid sa <code>notify</code>
sainmh√≠ni√∫ go gcaithfidh <code>item</code> <code>Display</code> agus <code>Summary</code> araon a chur i bhfeidhm. Is f√©idir linn a dh√©anamh
mar sin ag baint √∫s√°ide as an chomhr√©ir <code>+</code>:</p>
<pre><code class="language-rust ignore">pub fn notify(item: &amp;(impl Summary + Display)) {</code></pre>
<p>T√° an chomhr√©ir <code>+</code> bail√≠ freisin le teorainneacha tr√©ithe ar chine√°lacha cine√°lacha:</p>
<pre><code class="language-rust ignore">pub fn notify&lt;T: Summary + Display&gt;(item: &amp;T) {</code></pre>
<p>Leis an d√° theorainn tr√©ith sonraithe, is f√©idir le corp an <code>notify</code> <code>summarize</code> a ghlaoch
agus √∫s√°id <code>{}</code> chun <code>item</code> a fhorm√°idi√∫.</p>
<h4 id="tr√©ith-n√≠os-soil√©ire-teorainneacha-le-cl√°sail-√°it"><a class="header" href="#tr√©ith-n√≠os-soil√©ire-teorainneacha-le-cl√°sail-√°it">Tr√©ith n√≠os Soil√©ire Teorainneacha le Cl√°sail <code>√°it</code></a></h4>
<p>T√° m√≠bhunt√°ist√≠ ag baint le h√∫s√°id an iomarca teorainneacha trait. T√° a thr√©ith f√©in ag gach cine√°lach
teorainneacha, mar sin is f√©idir go leor feidhmeanna a bhfuil paraim√©adair chine√°lacha iolracha acu
faisn√©is faoi cheangal idir ainm na feidhme agus a liosta paraim√©adar,
rud a fh√°gann gur deacair s√≠ni√∫ na feidhme a l√©amh. Ar an gc√∫is seo, t√° malartach ag Rust
Comhr√©ir chun teorainneacha tr√©ithe a shonr√∫ taobh istigh de chl√°sal <code>where</code> i ndiaidh na feidhme
s√≠ni√∫. Mar sin, in ionad √© seo a scr√≠obh:</p>
<pre><code class="language-rust ignore">fn some_function&lt;T: Display + Clone, U: Clone + Debug&gt;(t: &amp;T, u: &amp;U) -&gt; i32 {</code></pre>
<p>we can use a <code>where</code> clause, like this:</p>
<pre><code class="language-rust ignore">fn some_function&lt;T, U&gt;(t: &amp;T, u: &amp;U) -&gt; i32
where
    T: Display + Clone,
    U: Clone + Debug,
{
<span class="boring">    unimplemented!()
</span><span class="boring">}</span></code></pre>
<p>N√≠l an oiread sin bearrtha ar sh√≠ni√∫ na feidhme seo: ainm na feidhme, liosta paraim√©adar,
agus cine√°l fillte gar d√° ch√©ile, cos√∫il le feidhm gan go leor tr√©ithe
teorainneacha.</p>
<h3 id="cine√°lacha-filleadh-a-chuireann-tr√©ithe-i-bhfeidhm"><a class="header" href="#cine√°lacha-filleadh-a-chuireann-tr√©ithe-i-bhfeidhm">Cine√°lacha Filleadh a chuireann Tr√©ithe i bhFeidhm</a></h3>
<p>Is f√©idir linn an chomhr√©ir <code>impl Trait</code> a √∫s√°id freisin sa su√≠omh fillte chun aischur a
luach de shaghas √©igin a chuireann trait i bhfeidhm, mar a thaispe√°ntar anseo:</p>
<pre><code class="language-rust ignore"><span class="boring">pub trait Summary {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct NewsArticle {
</span><span class="boring">    pub headline: String,
</span><span class="boring">    pub location: String,
</span><span class="boring">    pub author: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for NewsArticle {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}, by {} ({})", self.headline, self.author, self.location)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct Tweet {
</span><span class="boring">    pub username: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">    pub reply: bool,
</span><span class="boring">    pub retweet: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for Tweet {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}: {}", self.username, self.content)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn returns_summarizable() -&gt; impl Summary {
    Tweet {
        username: String::from("horse_ebooks"),
        content: String::from(
            "of course, as you probably already know, people",
        ),
        reply: false,
        retweet: false,
    }
}</code></pre>
<p>Tr√≠ √∫s√°id a bhaint as <code>impl Summary</code> don chine√°l tuairisce√°in, sonra√≠mid go bhfuil an
Filleann an fheidhm <code>returns_summarizable</code> cine√°l √©igin a chuireann an <code>Summary</code> i bhfeidhm
trait gan an cine√°l coincr√©it a ainmni√∫. Sa ch√°s seo, <code>returns_summarizable</code>
seolann s√© <code>Tweet</code> ar ais, ach n√≠ g√° go mbeadh a fhios sin ag an gc√≥d a ghlaonn an fheidhm seo.</p>
<p>T√° an cumas chun cine√°l tuairisce√°in a shonr√∫ de r√©ir na tr√©ithe a chuireann s√© i bhfeidhm amh√°in
√∫s√°ideach go h√°irithe i gcomhth√©acs d√∫nadh agus atriallt√≥ir√≠, a chl√∫da√≠mid iontu
Caibidil 13. Crutha√≠onn d√∫nta agus iterators cine√°lacha nach bhfuil a fhios ach ag an tiomsaitheoir n√≥
cine√°lacha at√° an-fhada a shonr√∫. Ligeann an chomhr√©ir <code>impl Trait</code> t√∫ go gonta
sonraigh go bhfilleann feidhm cine√°l √©igin a chuireann an trait <code>Iterator</code> i bhfeidhm
gan g√° le cine√°l an-fhada a scr√≠obh amach.</p>
<p>Mar sin f√©in, n√≠ f√©idir leat <code>impl Trait</code> a √∫s√°id ach amh√°in m√° t√° cine√°l amh√°in √° sheoladh ar ais agat. Le haghaidh
mar shampla, an c√≥d seo a sheolann ceachtar <code>NewsArticle</code> n√≥ <code>Tweet</code> leis an
n√≠ n-oibreodh an cine√°l tuairisce√°in at√° sonraithe mar <code>impl Summary</code>:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">pub trait Summary {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct NewsArticle {
</span><span class="boring">    pub headline: String,
</span><span class="boring">    pub location: String,
</span><span class="boring">    pub author: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for NewsArticle {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}, by {} ({})", self.headline, self.author, self.location)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct Tweet {
</span><span class="boring">    pub username: String,
</span><span class="boring">    pub content: String,
</span><span class="boring">    pub reply: bool,
</span><span class="boring">    pub retweet: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Summary for Tweet {
</span><span class="boring">    fn summarize(&amp;self) -&gt; String {
</span><span class="boring">        format!("{}: {}", self.username, self.content)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn returns_summarizable(switch: bool) -&gt; impl Summary {
    if switch {
        NewsArticle {
            headline: String::from(
                "Penguins win the Stanley Cup Championship!",
            ),
            location: String::from("Pittsburgh, PA, USA"),
            author: String::from("Iceburgh"),
            content: String::from(
                "The Pittsburgh Penguins once again are the best \
                 hockey team in the NHL.",
            ),
        }
    } else {
        Tweet {
            username: String::from("horse_ebooks"),
            content: String::from(
                "of course, as you probably already know, people",
            ),
            reply: false,
            retweet: false,
        }
    }
}</code></pre>
<p>N√≠ cheada√≠tear 'Nuacht-Airteagal' n√≥ 'Tweet' a thabhairt ar ais de bharr srianta
thart ar an gcaoi a gcuirtear an chomhr√©ir <code>impl Trait</code> i bhfeidhm sa tiomsaitheoir. Cl√∫d√≥idh muid
conas feidhm a scr√≠obh leis an iompar seo sa <a href="ch18-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types">‚ÄúAg √ös√°id R√©ada Tr√©ith a Ligeann Luachanna de Chine√°lacha √âags√∫la‚Äù</a><!--
neamhaird a dh√©anamh ar --> alt de Chaibidil 18.</p>
<h3 id="ag-√ös√°id-teorainneacha-trait-chun-modhanna-a-chur-i-bhfeidhm-go-coinn√≠ollach"><a class="header" href="#ag-√ös√°id-teorainneacha-trait-chun-modhanna-a-chur-i-bhfeidhm-go-coinn√≠ollach">Ag √ös√°id Teorainneacha Trait chun Modhanna a Chur i bhFeidhm go Coinn√≠ollach</a></h3>
<p>Tr√≠ √∫s√°id a bhaint as tr√©ith at√° faoi cheangal le bloc <code>impl</code> a √∫s√°ideann paraim√©adair chine√°lacha,
is f√©idir linn modhanna a chur i bhfeidhm go coinn√≠ollach le haghaidh cine√°lacha a chuireann an sonraithe i bhfeidhm
tr√©ithe. Mar shampla, cuireann an cine√°l <code>Pair&lt;T&gt;</code> i Liosta 10-15 i bhfeidhm i gc√≥na√≠ an
feidhm <code>new</code> chun sampla nua de <code>Pair&lt;T&gt;</code> a thabhairt ar ais (aisghlaoch √≥n
<a href="ch05-03-method-syntax.html#defining-methods">‚ÄúModhanna a Shainmh√≠ni√∫‚Äù</a><!-- neamhaird a dh√©anamh ar --> roinn de Chaibidil 5 a dh√©anann <code>Self</code>
is ailias cine√°l √© don chine√°l bloc <code>impl</code>, at√° sa ch√°s seo
<code>Pair&lt;T&gt;</code>). Ach sa ch√©ad bhloc <code>impl</code> eile, n√≠ chuireann <code>Pair&lt;T&gt;</code> i bhfeidhm ach an
modh <code>cmp_display</code> m√° chuireann a chine√°l inmhe√°nach <code>T</code> an trait <code>PartialOrd</code> i bhfeidhm
a chumasa√≠onn compar√°id <em>agus</em> an tr√©ithe <code>Display</code> a chumasa√≠onn priont√°il.</p>
<Listing number="10-15" file-name="src/lib.rs" caption="Conditionally implementing methods on a generic type depending on trait bounds">
<pre><code class="language-rust noplayground">use std::fmt::Display;

struct Pair&lt;T&gt; {
    x: T,
    y: T,
}

impl&lt;T&gt; Pair&lt;T&gt; {
    fn new(x: T, y: T) -&gt; Self {
        Self { x, y }
    }
}

impl&lt;T: Display + PartialOrd&gt; Pair&lt;T&gt; {
    fn cmp_display(&amp;self) {
        if self.x &gt;= self.y {
            println!("The largest member is x = {}", self.x);
        } else {
            println!("The largest member is y = {}", self.y);
        }
    }
}</code></pre>
</Listing>
<p>Is f√©idir linn freisin tr√©ith a chur i bhfeidhm go coinn√≠ollach d'aon chine√°l a chuireann i bhfeidhm
tr√©ith eile. Cur i bhfeidhm tr√©ith ar aon chine√°l a sh√°sa√≠onn an tr√©ith
tugtar <em>blanket implementations</em> ar theorainneacha agus √∫s√°idtear go forleathan iad sna
Leabharlann chaighde√°nach meirge. Mar shampla, cuireann an leabharlann chaighde√°nach an
Tr√©ith <code>ToString</code> ar aon chine√°l a chuireann an trait <code>Display</code> i bhfeidhm. An <code>impl</code>
Breathna√≠onn an bloc sa ghn√°thleabharlann cos√∫il leis an gc√≥d seo:</p>
<pre><code class="language-rust ignore">impl&lt;T: Display&gt; ToString for T {
    // --snip--
}</code></pre>
<p>Toisc go bhfuil an cur i bhfeidhm cuimsitheach seo ag an leabharlann chaighde√°nach, is f√©idir linn an
modh <code>to_string</code> arna shaini√∫ ag an tr√©ith <code>ToString</code> ar aon chine√°l a fheidhm√≠onn
an trait <code>Display</code>. Mar shampla, is f√©idir linn sl√°nuimhreacha a thiont√∫ ina gcuid comhfhreagrach
Luachanna <code>String</code> mar seo toisc go gcuireann sl√°nuimhreacha <code>Display</code> i bhfeidhm:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = 3.to_string();
<span class="boring">}</span></code></pre></pre>
<p>T√° cur i bhfeidhm blainc√©id le feice√°il sa doicim√©ad√∫ don trait sa
Alt ‚ÄúFeidhmitheoir√≠‚Äù.</p>
<p>Ligeann tr√©ithe agus teorainneacha tr√©ithe d√∫inn c√≥d a scr√≠obh a √∫s√°ideann paraim√©adair chine√°lacha chun
d√∫bailt a laghd√∫ ach sonraigh freisin don tiomsaitheoir gur mian linn an cine√°lach
cine√°l a bhfuil iompar ar leith. Is f√©idir leis an tiomsaitheoir an tr√©ith faoi cheangal a √∫s√°id ansin
faisn√©is le seice√°il go sol√°thra√≠onn na cine√°lacha coincr√©ite go l√©ir a √∫s√°idtear len√°r gc√≥d an
iompar ceart. I dteangacha at√° cl√≥scr√≠ofa go dinimici√∫il, gheobhaimid earr√°id ag
am rite m√° ghlaomar modh ar chine√°l n√°r shainigh an modh. Ach
Bogann Rust na hearr√°id√≠ seo chun am a thioms√∫ agus mar sin t√° iallach orainn na fadhbanna a r√©iteach
sula mbeidh √°r gc√≥d fi√∫ in ann a rith. Ina theannta sin, n√≠ g√° d√∫inn c√≥d a scr√≠obh
a sheice√°lann iompar ag am rite toisc go bhfuil seice√°il d√©anta againn cheana f√©in tr√°th an tiomsaithe
am. M√° dh√©antar amhlaidh, feabhsa√≠onn s√© an fheidhm√≠ocht gan an tsol√∫bthacht a thabhairt suas
de chine√°lacha.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tagairt√≠-a-bhail√≠ocht√∫-le-saoil"><a class="header" href="#tagairt√≠-a-bhail√≠ocht√∫-le-saoil">Tagairt√≠ a Bhail√≠ocht√∫ le Saoil</a></h2>
<p>Is cine√°l cine√°lach eile iad saolr√© at√° in √∫s√°id againn cheana f√©in. Ina ionad sin
n√° a chinnti√∫ go bhfuil an t-iompar a theasta√≠onn uainn ag cine√°l, cinnt√≠onn an saolr√© sin
t√° tagairt√≠ bail√≠ chomh fada agus a theasta√≠onn uainn iad a bheith.</p>
<p>Sonra√≠ amh√°in n√°r phl√©igh muid sna <a href="ch04-02-references-and-borrowing.html#references-and-borrowing">‚ÄúTagairt√≠ agus
Iasachta√≠ a fh√°il‚Äù</a><!-- neamhaird a dh√©anamh ar --> t√° an roinn i gCaibidil 4
go bhfuil <em>lifetime</em> ag gach tagairt i Rust, agus sin an raon feidhme d√≥
t√° an tagairt sin bail√≠. An chuid is m√≥ den am, b√≠onn saolta intuigthe agus t√°tal,
d√≠reach mar an chuid is m√≥ den am, t√° t√°tal a bhaint as cine√°lacha. N√≠ m√≥r d√∫inn cine√°lacha a an√≥t√°il amh√°in
nuair is f√©idir cine√°lacha iolracha. Ar an mbealach c√©anna, n√≠ m√≥r d√∫inn saolr√©anna a an√≥t√°il
nuair a d‚Äôfh√©adfa√≠ saolr√© na dtagairt√≠ a cheangal ar roinnt beala√≠ √©ags√∫la. Rust
√©il√≠onn orainn na caidrimh a an√≥t√°il ag baint √∫s√°ide as paraim√©adair chine√°lacha saoil chun
a chinnti√∫ go mbeidh na tagairt√≠ iarbh√≠r a √∫s√°idtear ag am rite bail√≠ cinnte.</p>
<p>N√≠ coincheap √© saolr√©anna an√≥t√°la at√° ag formh√≥r na dteangacha r√≠omhchl√°r√∫ch√°in eile, mar sin de
beidh s√© seo ag dul a bhraitheann neamhchoitianta. C√© nach gcl√∫d√≥idh muid saolr√©anna ina gcuid
go hioml√°n sa chaibidil seo, pl√©ifimid beala√≠ coitianta a dtiocfadh leat teacht orthu
comhr√©ir feadh an tsaoil ionas gur f√©idir leat a bheith compordach leis an gcoincheap.</p>
<h3 id="tagairt√≠-dangling-le-saoil-a-chosc"><a class="header" href="#tagairt√≠-dangling-le-saoil-a-chosc">Tagairt√≠ Dangling le Saoil a Chosc</a></h3>
<p>Is √≠ an phr√≠omhaidhm le saolr√©anna n√° <em>dangling references</em> a chosc, a chuireann faoi deara a
cl√°r chun sonra√≠ a thagairt seachas na sonra√≠ a bhfuil s√© beartaithe tagairt a dh√©anamh d√≥ibh.
Smaoinigh ar an gcl√°r i Liost√∫ 10-16, a bhfuil raon feidhme seachtrach agus taobh istigh aige
sc√≥ip.</p>
<Listing number="10-16" caption="An attempt to use a reference whose value has gone out of scope">
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let r;

    {
        let x = 5;
        r = &amp;x;
    }

    println!("r: {r}");
}</code></pre>
</Listing>
<blockquote>
<p>N√≥ta: Dearbha√≠onn na sampla√≠ i Liost√∫ 10-16, 10-17, agus 10-23 athr√≥ga
gan luach tosaigh a thabhairt d√≥ibh, mar sin t√° an t-ainm athr√≥g ann ar an taobh amuigh
sc√≥ip. Ar an gc√©ad amharc, d‚Äôfh√©adfadh s√© a bheith cos√∫il go bhfuil s√© seo ag teacht salach ar a bhfuil ag Rust
gan luachanna null. Mar sin f√©in, m√° dh√©anaimid iarracht athr√≥g a √∫s√°id sula dtabharfar luach d√≥,
gheobhaidh muid earr√°id ama tiomsaithe, rud a thaispe√°nann nach gceada√≠onn Rust go deimhin
luachanna null.</p>
</blockquote>
<p>Dearbha√≠onn an raon feidhme seachtrach athr√≥g darb ainm <code>r</code> gan aon luach tosaigh, agus an
dearbha√≠onn raon feidhme inmhe√°nach athr√≥g darb ainm <code>x</code> le luach tosaigh <code>5</code>. Laistigh
an sc√≥ip istigh, d√©anaimid iarracht luach <code>r</code> a shocr√∫ mar thagairt do <code>x</code>. Ansin
cr√≠ochna√≠onn an sc√≥ip inmhe√°nach, agus d√©anaimid iarracht an luach a phriont√°il in <code>r</code>. N√≠ dh√©anfaidh an c√≥d seo
tiomsaigh toisc go bhfuil an luach a bhfuil <code>r</code> ag tagairt d√≥ imithe as an sc√≥ip roimhe seo
d√©anaimid iarracht √© a √∫s√°id. Seo an teachtaireacht earr√°ide:</p>
<pre><code class="language-console">$ cargo run
   Compiling chapter10 v0.1.0 (file:///projects/chapter10)
error[E0597]: `x` does not live long enough
 --&gt; src/main.rs:6:13
  |
5 |         let x = 5;
  |             - binding `x` declared here
6 |         r = &amp;x;
  |             ^^ borrowed value does not live long enough
7 |     }
  |     - `x` dropped here while still borrowed
8 |
9 |     println!("r: {r}");
  |                  --- borrow later used here

For more information about this error, try `rustc --explain E0597`.
error: could not compile `chapter10` (bin "chapter10") due to 1 previous error
</code></pre>
<p>Deir an teachtaireacht earr√°ide nach bhfuil an athr√≥g <code>x</code> "beo fada go leor." T√° an
Is √© an ch√∫is go mbeidh <code>x</code> as an raon feidhme nuair a chr√≠ochna√≠onn an raon feidhme istigh ar l√≠ne 7.
Ach t√° <code>r</code> f√≥s bail√≠ don sc√≥ip sheachtrach; toisc go bhfuil a raon feidhme n√≠os m√≥, deirimid
go mairfeadh s√© "n√≠os faide." D√° gcead√≥dh Rust don ch√≥d seo oibri√∫, bheadh ‚Äã‚Äã<code>r</code>
cuimhne thagartha a bh√≠ dealraitheach nuair a chuaigh <code>x</code> as raon feidhme, agus
n√≠ bheadh ‚Äã‚Äãaon rud a rinneamar iarracht a dh√©anamh le <code>r</code> ag obair i gceart. Mar sin, conas a dh√©anann Rust
a chinneadh go bhfuil an c√≥d seo neamhbhail√≠? √ös√°ideann s√© seice√°la√≠ iasachta√≠.</p>
<h3 id="an-seice√°la√≠-iasachta"><a class="header" href="#an-seice√°la√≠-iasachta">An Seice√°la√≠ Iasachta</a></h3>
<p>T√° <em>borrow checker</em>  ag an tiomsaitheoir Rust a dh√©anann compar√°id idir sc√≥ip chun a chinneadh
cib√© an bhfuil gach iasacht bail√≠. L√©ir√≠onn Liost√∫ 10-17 an c√≥d c√©anna le Liost√∫
10-16 ach le n√≥ta√≠ a thaispe√°nann saolr√©anna na n-athr√≥g.</p>
<Listing number="10-17" caption="Annotations of the lifetimes of `r` and `x`, named `'a` and `'b`, respectively">
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let r;                // ---------+-- 'a
                          //          |
    {                     //          |
        let x = 5;        // -+-- 'b  |
        r = &amp;x;           //  |       |
    }                     // -+       |
                          //          |
    println!("r: {r}");   //          |
}                         // ---------+</code></pre>
</Listing>
<p>Anseo, rinneamar saolr√© <code>r</code> a an√≥t√°il le <code>'a</code> agus saolr√© <code>x</code>
le <code>'b</code>. Mar a fheiceann t√∫, t√° an bloc <code>' b</code> istigh i bhfad n√≠os l√∫ n√° an bloc seachtrach
<code>'a</code> bloc saoil. Ag am tiomsaithe, d√©anann Rust compar√°id idir m√©id an d√° cheann
saoil agus feictear go bhfuil saolr√© <code>'a</code> ag <code>r</code> ach go dtagra√≠onn s√© don chuimhne
le saolr√© <code>'b</code>. Di√∫lta√≠tear don chl√°r toisc go bhfuil <code>'b</code> n√≠os giorra n√°
<code>'a</code>: n√≠ mhaireann √°bhar na tagartha chomh fada leis an tagairt.</p>
<p>Le liost√∫ 10-18 socra√≠tear an c√≥d ionas nach mbeidh tagairt dhochrach aige agus √©
thiomsa√≠onn gan aon earr√°id√≠.</p>
<Listing number="10-18" caption="A valid reference because the data has a longer lifetime than the reference">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 5;            // ----------+-- 'b
                          //           |
    let r = &amp;x;           // --+-- 'a  |
                          //   |       |
    println!("r: {r}");   //   |       |
                          // --+       |
}                         // ----------+</code></pre></pre>
</Listing>
<p>Anseo, t√° an saolr√© <code>' b</code> ag <code>x</code>, at√° sa ch√°s seo n√≠os m√≥ n√° <code>'a</code>. seo
cialla√≠onn <code>r</code> is f√©idir tagairt a dh√©anamh do <code>x</code> mar t√° a fhios ag Rust go bhfuil an tagairt in <code>r</code> will
bheith bail√≠ i gc√≥na√≠ agus <code>x</code> bail√≠.</p>
<p>Anois go bhfuil a fhios agat cad iad saolr√© na dtagairt√≠ agus conas a dh√©anann Rust anail√≠s
saolr√©anna chun a chinnti√∫ go mbeidh teistim√©ireachta√≠ bail√≠ i gc√≥na√≠, d√©anaimis ini√∫chadh cine√°lach
saolr√© paraim√©adair agus luachanna toraidh i gcomhth√©acs feidhmeanna.</p>
<h3 id="saoil-cine√°lach-i-bhfeidhmeanna"><a class="header" href="#saoil-cine√°lach-i-bhfeidhmeanna">Saoil Cine√°lach i bhFeidhmeanna</a></h3>
<p>Scr√≠obhfaimid feidhm a thabharfaidh ar ais an ceann is faide de dh√° shlisne t√©ad. seo
Beidh feidhm a ghlacadh dh√° shlisne teaghr√°n agus ar ais slice amh√°in teaghr√°n. Tar √©is
t√° an fheidhm <code>longest</code> curtha i bhfeidhm againn, ba cheart don ch√≥d i Liost√∫ 10-19
cl√≥ <code>The longest string is abcd</code>.</p>
<Listing number="10-19" file-name="src/main.rs" caption="A `main` function that calls the `longest` function to find the longer of two string slices">
<pre><code class="language-rust ignore">fn main() {
    let string1 = String::from("abcd");
    let string2 = "xyz";

    let result = longest(string1.as_str(), string2);
    println!("The longest string is {result}");
}</code></pre>
</Listing>
<p>Tabhair faoi deara gur mian linn an fheidhm a ghlacadh slisn√≠ teaghr√°n, a bhfuil tagairt√≠,
seachas teaghr√°in, mar n√≠limid ag iarraidh an fheidhm <code>longest</code> a ghlacadh
√∫in√©ireacht a paraim√©adair. D√©an tagairt don <a href="ch04-03-slices.html#string-slices-as-parameters">‚ÄúSlices Teaghr√°n mar
Paraim√©adair‚Äù</a><!-- neamhaird --> an roinn i gCaibidil 4
le tuilleadh pl√© a fh√°il faoin bhf√°th gurb iad na paraim√©adair a √∫s√°idimid i Liosta 10-19 n√° na
cinn at√° uainn.</p>
<p>M√° dh√©anaimid iarracht an fheidhm <code>longest</code> a chur i bhfeidhm mar a thaispe√°ntar i Liost√∫ 10-20, √©
n√≠ thioms√≥idh.</p>
<Listing number="10-20" file-name="src/main.rs" caption="An implementation of the `longest` function that returns the longer of two string slices but does not yet compile">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span><span class="boring">    let string1 = String::from("abcd");
</span><span class="boring">    let string2 = "xyz";
</span><span class="boring">
</span><span class="boring">    let result = longest(string1.as_str(), string2);
</span><span class="boring">    println!("The longest string is {result}");
</span><span class="boring">}
</span><span class="boring">
</span>fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {
    if x.len() &gt; y.len() {
        x
    } else {
        y
    }
}</code></pre>
</Listing>
<p>Ina √°it sin, faighimid an earr√°id seo a leanas a labhra√≠onn faoi shaolr√©anna:</p>
<pre><code class="language-console">$ cargo run
   Compiling chapter10 v0.1.0 (file:///projects/chapter10)
error[E0106]: missing lifetime specifier
 --&gt; src/main.rs:9:33
  |
9 | fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {
  |               ----     ----     ^ expected named lifetime parameter
  |
  = help: this function's return type contains a borrowed value, but the signature does not say whether it is borrowed from `x` or `y`
help: consider introducing a named lifetime parameter
  |
9 | fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {
  |           ++++     ++          ++          ++

For more information about this error, try `rustc --explain E0106`.
error: could not compile `chapter10` (bin "chapter10") due to 1 previous error
</code></pre>
<p>L√©ir√≠onn an t√©acs cabhrach go dteasta√≠onn paraim√©adar cine√°lach saoil don chine√°l fillte
air mar n√≠ f√©idir le Rust a r√° an mbaineann an tagairt at√° √° thabhairt ar ais
<code>x</code> n√≥ <code>y</code>. I nd√°ir√≠re, n√≠l a fhios againn ach an oiread, mar gheall ar an <code>if</code> bloc sa chorp
den fheidhm seo filleann tagairt do <code>x</code> agus filleann an bloc <code>else</code> a
tagairt do <code>y</code>!</p>
<p>Agus an fheidhm seo √° saini√∫ againn, n√≠l a fhios againn na luachanna nithi√∫la a bheidh
a chur ar aghaidh isteach sa fheidhm seo, mar sin n√≠l a fhios againn c√© acu an c√°s <code>if</code> n√≥ an
cuirfear c√°s <code>else</code> i gcr√≠ch. N√≠l a fhios againn freisin ar shaolr√©anna nithi√∫la an
tagairt√≠ a sheolfar isteach, mar sin n√≠ f√©idir linn breathn√∫ ar na sc√≥ip mar a rinneamar
Liosta√≠ 10-17 agus 10-18 chun a chinneadh an nd√©anfaidh an tagairt a chuirimid ar ais
bheith bail√≠ i gc√≥na√≠. N√≠ f√©idir leis an seice√°la√≠ iasachta√≠ √© seo a chinneadh ach an oiread, mar gheall air
N√≠ fios conas a bhaineann saolr√© <code>x</code> agus <code>y</code> le saolr√© an
luach aischuir. Chun an earr√°id seo a r√©iteach, cuirfimid paraim√©adair chine√°lacha saoil leis sin
an gaol idir na tagairt√≠ a shaini√∫ ionas gur f√©idir leis an seice√°la√≠ iasachta√≠
a anail√≠s a dh√©anamh.</p>
<h3 id="comhr√©ir-n√≥ta√≠-saoil"><a class="header" href="#comhr√©ir-n√≥ta√≠-saoil">Comhr√©ir N√≥ta√≠ Saoil</a></h3>
<p>N√≠ athra√≠onn n√≥ta√≠ saoil c√© chomh fada agus a mhaireann aon cheann de na tagairt√≠. Ina ionad sin,
d√©anann siad cur s√≠os ar na gaolmhaireachta√≠ a bhaineann le saolr√© na tagairt√≠ iolracha do gach ceann acu
eile gan cur isteach ar an saolr√©. D√≠reach mar is f√©idir le feidhmeanna glacadh le haon chine√°l
nuair a shonra√≠onn an s√≠ni√∫ paraim√©adar cine√°l cine√°lach, is f√©idir le feidhmeanna glacadh leis
tagairt√≠ le haon saolr√© tr√≠ pharaim√©adar cine√°lach saoil a shonr√∫.</p>
<p>T√° comhr√©ir beag√°n neamhghn√°ch ag n√≥ta√≠ saoil: ainmneacha an tsaoil
n√≠ m√≥r do pharaim√©adair tos√∫ le haspail (<code>'</code>) agus de ghn√°th is c√°s √≠ochtair iad ar fad
agus an-ghearr, cos√∫il le cine√°lacha cine√°lacha. √ös√°ideann formh√≥r na ndaoine an t-ainm <code>'a</code> ar an gc√©ad dul s√≠os
n√≥ta feadh an tsaoil. Cuirimid n√≥ta√≠ paraim√©adar an tsaoil i ndiaidh <code>&amp;</code> a
tagairt, ag baint √∫s√°ide as sp√°s chun an n√≥ta a scaradh √≥ chine√°l na tagartha.</p>
<p>Seo roinnt sampla√≠: tagairt do <code>i32</code> gan paraim√©adar saoil, a
tagairt do <code>i32</code> a bhfuil paraim√©adar saoil darb ainm <code>'a</code> aige, agus mutable
tagairt do <code>i32</code> a bhfuil an saolr√© <code>'a</code> aige freisin.</p>
<pre><code class="language-rust ignore">&amp;i32        // tagairt
&amp;'a i32     // tagairt le saolr√© follasach
&amp;'a mut i32 // tagairt mutable le saolr√© follasach</code></pre>
<p>N√≠l m√≥r√°n br√≠ ag baint le n√≥ta saoil amh√°in ann f√©in toisc go bhfuil an
T√° an√≥t√°lacha i gceist a insint do Rust conas paraim√©adair chine√°lacha feadh an tsaoil il
baineann tagairt√≠ lena ch√©ile. D√©anaimis scr√∫d√∫ ar conas na n√≥ta√≠ saoil
a bhaineann le ch√©ile i gcomhth√©acs na feidhme <code>longest</code>.</p>
<h3 id="an√≥t√°lacha-saoil-i-s√≠nithe-feidhme"><a class="header" href="#an√≥t√°lacha-saoil-i-s√≠nithe-feidhme">An√≥t√°lacha Saoil i S√≠nithe Feidhme</a></h3>
<p>Chun n√≥ta√≠ saoil a √∫s√°id i s√≠nithe feidhm, n√≠ m√≥r d√∫inn an
paraim√©adair cine√°lach <em>lifetime</em> laistigh de l√∫ib√≠n√≠ uillinne idir ainm na feidhme
agus an liosta paraim√©adar, d√≠reach mar a rinneamar le paraim√©adair cine√°lach <em>type</em>.</p>
<p>Ba mhaith linn go gcuirfeadh an s√≠ni√∫ an srian seo a leanas in i√∫l: an t-aischur
beidh an tagairt bail√≠ fad is at√° an d√° pharaim√©adar bail√≠. Is √© seo an
an gaol idir saolr√© na bparaim√©adar agus an luach toraidh. D√©anfaimid
ainmnigh an saolr√© <code>'a</code> agus ansin cuir le gach tagairt √©, mar a thaispe√°ntar sa Liost√∫
10-21.</p>
<Listing number="10-21" file-name="src/main.rs" caption="The `longest` function definition specifying that all the references in the signature must have the same lifetime `'a`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let string1 = String::from("abcd");
</span><span class="boring">    let string2 = "xyz";
</span><span class="boring">
</span><span class="boring">    let result = longest(string1.as_str(), string2);
</span><span class="boring">    println!("The longest string is {result}");
</span><span class="boring">}
</span><span class="boring">
</span>fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {
    if x.len() &gt; y.len() {
        x
    } else {
        y
    }
}</code></pre></pre>
</Listing>
<p>Ba cheart don ch√≥d seo an toradh a theasta√≠onn uainn a thioms√∫ agus a th√°irgeadh nuair a √∫s√°idimid √© leis an
`pr√≠omhfheidhm' i Liost√∫ 10-19.</p>
<p>Ins√≠onn s√≠ni√∫ na feidhme do Rust anois go bhfuil <code>'a</code>, an fheidhm ar feadh an tsaoil
B√≠onn dh√° pharaim√©adar, agus is slisn√≠ teaghr√°n iad araon a mhaireann ar a laghad mar
ar feadh an tsaoil <code>'a</code>. Ins√≠onn an s√≠ni√∫ feidhm freisin Rust go bhfuil an teaghr√°n
Beidh slice ar ais √≥n bhfeidhm beo ar a laghad chomh fada agus a saolr√© <code>'a</code>.
Go praitici√∫il, cialla√≠onn s√© go bhfuil an saolr√© an tagairt ar ais ag an
t√° an fheidhm <code>longest</code> mar an gc√©anna leis an gceann is l√∫ de shaolr√©anna na luachanna
d√° dtagra√≠tear ag na harg√≥int√≠ feidhm. Is iad na caidrimh seo a theasta√≠onn uainn
Rust a √∫s√°id agus an c√≥d seo √° anail√≠si√∫.</p>
<p>Cuimhnigh, nuair a shonra√≠mid na paraim√©adair saoil sa s√≠ni√∫ feidhme seo,
n√≠l muid ag athr√∫ saolr√© aon luachanna a chuirtear isteach n√≥ a thugtar ar ais. Ina ionad sin,
t√°imid ag sonr√∫ gur cheart don seice√°la√≠ iasachta√≠ di√∫lt√∫ d‚Äôaon luachanna nach nd√©anann
clo√≠ leis na srianta seo. Tabhair faoi deara nach g√° an fheidhm <code>longest</code>
fios go cruinn c√° fhad a mhairfidh <code>x</code> agus <code>y</code>, ach gur f√©idir le sc√≥ip √©igin a bheith
in ionad <code>'a</code> a sh√°s√≥idh an s√≠ni√∫ seo.</p>
<p>Nuair a bh√≠onn saolr√©anna i bhfeidhmeanna √° an√≥t√°il, t√©ann na n√≥ta√≠ isteach san fheidhm
s√≠ni√∫, nach bhfuil sa chomhlacht feidhme. Is cuid de na n√≥ta√≠ saoil
conradh na feidhme, m√≥r√°n cos√∫il leis na cine√°lacha sa s√≠ni√∫. Ag
go bhfuil s√≠nithe feidhm cialla√≠onn an conradh saolr√© an anail√≠s ar an meirge
Is f√©idir le tiomsaitheoir a bheith n√≠os simpl√≠. M√° t√° fadhb ann leis an gcaoi a bhfuil feidhm
an√≥t√°ilte n√≥ an bealach ar a dtugtar √©, is f√©idir leis an earr√°id√≠ tiomsaitheoir pointe go dt√≠ an chuid de
√°r gc√≥d agus na srianta n√≠os cruinne. M√°s rud √©, ina ionad sin, an tiomsaitheoir Rust
rinneamar n√≠os m√≥ t√°tail faoi na caidrimh a bh√≠ i gceist againn ar feadh an tsaoil
le bheith, b'fh√©idir nach mbeadh an tiomsaitheoir in ann ach go leor c√©imeanna a √∫s√°id chun √°r gc√≥d a √∫s√°id
ar shi√∫l √≥ ch√∫is na faidhbe.</p>
<p>Nuair a thugaimid tagairt√≠ nithi√∫la don <code>longest</code>, is √© sin an saolr√© nithi√∫il
in ionad <code>'a</code> is ea an chuid de sc√≥ip <code>x</code> a fhorlu√≠onn leis an
sc√≥ip <code>y</code>. I bhfocail eile, beidh an saolr√© cine√°lach <code>'a</code> a fh√°il ar an nithi√∫la
saolr√© at√° comhionann leis an gceann is l√∫ de shaolr√© <code>x</code> agus <code>y</code>. Toisc
rinneamar an tagairt ar ais a an√≥t√°il leis an bparaim√©adar saoil c√©anna <code>'a</code>,
beidh an tagairt ar ais bail√≠ freisin ar feadh an fhad is l√∫ de na
saolr√© <code>x</code> agus <code>y</code>.</p>
<p>Breathna√≠mid ar an gcaoi a gcuireann n√≥ta√≠ saoil srian ar an bhfeidhm <code>longest</code> tr√≠
tagairt√≠ a bhfuil saolr√©anna coincr√©iteacha √©ags√∫la acu a rith. T√° liosta 10-22
sampla simpl√≠.</p>
<Listing number="10-22" file-name="src/main.rs" caption="Using the `longest` function with references to `String` values that have different concrete lifetimes">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let string1 = String::from("long string is long");

    {
        let string2 = String::from("xyz");
        let result = longest(string1.as_str(), string2.as_str());
        println!("The longest string is {result}");
    }
}
<span class="boring">
</span><span class="boring">fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {
</span><span class="boring">    if x.len() &gt; y.len() {
</span><span class="boring">        x
</span><span class="boring">    } else {
</span><span class="boring">        y
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Sa sampla seo, t√° <code>string1</code> bail√≠ go dt√≠ deireadh an sc√≥ip sheachtraigh, <code>string2</code>
bail√≠ go dt√≠ deireadh an sc√≥ip istigh, agus d√©anann <code>result</code> tagairt do rud √©igin
at√° bail√≠ go dt√≠ deireadh an raon feidhme laistigh. Rith an c√≥d seo agus feicfidh t√∫
go gceada√≠onn an seice√°la√≠ iasachta√≠; tioms√≥idh agus priont√°lfaidh s√© <code>The longest string is long string is long</code>.</p>
<p>Ansin, d√©anaimis iarracht sampla a thaispe√°nann go bhfuil saolr√© na tagartha i
caithfidh gurb √© <code>result</code> saolr√© n√≠os l√∫ an d√° arg√≥int. Bogfaimid an
dearbh√∫ na hathr√≥ige <code>result</code> lasmuigh den sc√≥ip inmhe√°nach ach f√°g an
sannadh an luacha don athr√≥g <code>result</code> taobh istigh den sc√≥ip le
<code>string2</code>. Ansin bogfaimid an <code>println!</code> a √∫s√°ideann <code>result</code> chuig taobh amuigh de
raon feidhme istigh, tar √©is an raon feidhme istigh dar cr√≠och. Beidh an c√≥d i Liost√∫ 10-23
gan tioms√∫.</p>
<Listing number="10-23" file-name="src/main.rs" caption="Attempting to use `result` after `string2` has gone out of scope">
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let string1 = String::from("long string is long");
    let result;
    {
        let string2 = String::from("xyz");
        result = longest(string1.as_str(), string2.as_str());
    }
    println!("The longest string is {result}");
}
<span class="boring">
</span><span class="boring">fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {
</span><span class="boring">    if x.len() &gt; y.len() {
</span><span class="boring">        x
</span><span class="boring">    } else {
</span><span class="boring">        y
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Nuair a dh√©anaimid iarracht an c√≥d seo a thioms√∫, faighimid an earr√°id seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling chapter10 v0.1.0 (file:///projects/chapter10)
error[E0597]: `string2` does not live long enough
 --&gt; src/main.rs:6:44
  |
5 |         let string2 = String::from("xyz");
  |             ------- binding `string2` declared here
6 |         result = longest(string1.as_str(), string2.as_str());
  |                                            ^^^^^^^ borrowed value does not live long enough
7 |     }
  |     - `string2` dropped here while still borrowed
8 |     println!("The longest string is {result}");
  |                                     -------- borrow later used here

For more information about this error, try `rustc --explain E0597`.
error: could not compile `chapter10` (bin "chapter10") due to 1 previous error
</code></pre>
<p>L√©ir√≠onn an earr√°id le haghaidh <code>result</code> a bheith bail√≠ don r√°iteas <code>println!</code>,
Ba gh√° go mbeadh <code>string2</code> bail√≠ go dt√≠ deireadh an sc√≥ip sheachtraigh. T√° a fhios ag meirge
seo toisc gur thugamar an√≥t√°il ar shaolr√© na bparaim√©adar feidhme agus ar ais
luachanna ag baint √∫s√°ide as an bparaim√©adar saoil c√©anna <code>'a</code>.</p>
<p>Mar dhaoine, is f√©idir linn breathn√∫ ar an gc√≥d seo agus a fheice√°il go bhfuil <code>string1</code> n√≠os faide n√°
<code>string2</code>, agus mar sin, beidh tagairt do <code>string1</code> i <code>result</code>.
Toisc nach bhfuil <code>string1</code> imithe as an sc√≥ip go f√≥ill, d√©anfar tagairt do <code>string1</code>
f√≥s bail√≠ don r√°iteas <code>println!</code>. Mar sin f√©in, n√≠ f√©idir leis an tiomsaitheoir a fheice√°il
go bhfuil an tagairt bail√≠ sa ch√°s seo. T√°imid tar √©is a d√∫irt Rust go bhfuil an saolr√©
t√° an tagairt a thugann an fheidhm <code>longest</code> ar ais mar an gc√©anna leis an gceann is l√∫ de
saolr√© na dtagairt√≠ a cuireadh isteach. D√° bhr√≠ sin, an seice√°la√≠ iasachta√≠
d√≠cheada√≠tear an c√≥d i Liost√∫ 10-23 mar go bhf√©adfadh tagairt neamhbhail√≠ a bheith aige.</p>
<p>D√©an iarracht n√≠os m√≥ turgnaimh a dhearadh a athra√≠onn luachanna agus saolr√© an
tagairt√≠ a cuireadh ar aghaidh chuig an bhfeidhm <code>longest</code> agus conas a cuireadh an tagairt ar ais
√∫s√°idtear. D√©an hipit√©is√≠ faoi c√© acu an rachaidh n√≥ nach rachaidh do thurgnaimh thar an
seice√°la√≠ iasachta√≠ sula nd√©anann t√∫ tioms√∫; seice√°il ansin f√©achaint an bhfuil an ceart agat!</p>
<h3 id="smaointeoireacht-i-dt√©arma√≠-saoil"><a class="header" href="#smaointeoireacht-i-dt√©arma√≠-saoil">Smaointeoireacht i dT√©arma√≠ Saoil</a></h3>
<p>Braitheann an bealach inar g√° duit paraim√©adair an tsaoil a shonr√∫ ar an m√©id at√° agat
feidhm ag d√©anamh. Mar shampla, m√° d‚Äôathraigh muid cur i bhfeidhm an
feidhm <code>longest</code> chun an ch√©ad pharaim√©adar a thabhairt ar ais i gc√≥na√≠ seachas an ceann is faide
slisne teaghr√°n, n√≠ bheadh ‚Äã‚Äã‚Äã‚Äãg√° d√∫inn saolr√© a shonr√∫ ar an bparaim√©adar <code>y</code>. T√° an
tioms√≥idh an c√≥d seo a leanas:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let string1 = String::from("abcd");
</span><span class="boring">    let string2 = "efghijklmnopqrstuvwxyz";
</span><span class="boring">
</span><span class="boring">    let result = longest(string1.as_str(), string2);
</span><span class="boring">    println!("The longest string is {result}");
</span><span class="boring">}
</span><span class="boring">
</span>fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;str) -&gt; &amp;'a str {
    x
}</code></pre></pre>
</Listing>
<p>T√° paraim√©adar saoil <code>'a</code> sonraithe againn don pharaim√©adar <code>x</code> agus don tuairisce√°n
cine√°l, ach n√≠ le haghaidh an pharaim√©adar <code>y</code>, toisc nach bhfuil an saolr√© <code>y</code> acu
gaol ar bith le saolr√© <code>x</code> n√≥ luach an aischuir.</p>
<p>Nuair a bheidh tagairt √≥ fheidhm √° filleadh ar ais, is √© an paraim√©adar saoil don
n√≠ m√≥r an cine√°l fillte a mheaitse√°il leis an bparaim√©adar saoil do cheann de na paraim√©adair. M√°s rud √©
tagra√≠onn an tagairt ar ais <em>not</em> do cheann de na paraim√©adair, caithfidh s√© tagairt a dh√©anamh
go luach a chrutha√≠tear laistigh den fheidhm seo. Mar sin f√©in, bheadh ‚Äã‚Äã‚Äã‚Äãs√© seo ina dangling
tagairt mar go rachaidh an luach as raon feidhme ag deireadh na feidhme.
Smaoinigh ar an iarracht seo an fheidhm <code>longest</code> nach nd√©anfaidh
tiomsaigh:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span><span class="boring">    let string1 = String::from("abcd");
</span><span class="boring">    let string2 = "xyz";
</span><span class="boring">
</span><span class="boring">    let result = longest(string1.as_str(), string2);
</span><span class="boring">    println!("The longest string is {result}");
</span><span class="boring">}
</span><span class="boring">
</span>fn longest&lt;'a&gt;(x: &amp;str, y: &amp;str) -&gt; &amp;'a str {
    let result = String::from("really long string");
    result.as_str()
}</code></pre>
</Listing>
<p>Anseo, c√© go bhfuil paraim√©adar saoil <code>'a</code> sonraithe againn don tuairisce√°n
cine√°l, beidh an cur i bhfeidhm theipeann a thioms√∫ mar gheall ar an luach ar ais
n√≠l baint ag an saolr√© le saolr√© na bparaim√©adar ar chor ar bith. Seo √© an
teachtaireacht earr√°ide a fhaighimid:</p>
<pre><code class="language-console">$ cargo run
   Compiling chapter10 v0.1.0 (file:///projects/chapter10)
error[E0515]: cannot return value referencing local variable `result`
  --&gt; src/main.rs:11:5
   |
11 |     result.as_str()
   |     ------^^^^^^^^^
   |     |
   |     returns a value referencing data owned by the current function
   |     `result` is borrowed here

For more information about this error, try `rustc --explain E0515`.
error: could not compile `chapter10` (bin "chapter10") due to 1 previous error
</code></pre>
<p>Is √≠ an fhadhb at√° ann go dt√©ann <code>result</code> as an sc√≥ip agus go nd√©antar √© a ghlanadh ag an deireadh
den fheidhm <code>longest</code>. T√°imid ag iarraidh tagairt a thabhairt ar ais do <code>result</code> freisin
√≥n bhfeidhm. N√≠l aon bhealach is f√©idir linn paraim√©adair shaolr√© a shonr√∫ go
d‚Äôathr√≥dh s√© an tagairt dhochrach, agus n√≠ ligfidh Rust d√∫inn cliseadh a chruth√∫
tagairt. Sa ch√°s seo, is √© an socr√∫ is fearr n√° cine√°l sonra√≠ faoi √∫in√©ireacht a thabhairt ar ais
seachas tagairt agus mar sin t√° an fheidhm ghlao freagrach as
ag glanadh suas an luach.</p>
<p>Ar deireadh thiar, baineann comhr√©ir saoil le saolr√©anna √©ags√∫la a nascadh
paraim√©adair agus luachanna aischuir feidhmeanna. Nuair a bheidh siad ceangailte, t√° Rust
d√≥thain faisn√©ise chun oibr√≠ochta√≠ cuimhne-s√°bh√°ilte a chead√∫ agus oibr√≠ochta√≠ a dh√≠chead√∫
a chruth√≥dh leideanna buailte n√≥ a sh√°r√≥dh s√°bh√°ilteacht na cuimhne ar shl√≠ eile.</p>
<h3 id="n√≥ta√≠-saoil-i-sainmh√≠nithe-strucht√∫r"><a class="header" href="#n√≥ta√≠-saoil-i-sainmh√≠nithe-strucht√∫r">N√≥ta√≠ Saoil i Sainmh√≠nithe Strucht√∫r</a></h3>
<p>Go dt√≠ seo, na strucht√∫ir at√° sainmh√≠nithe againn go l√©ir faoi √∫in√©ireacht seal√∫chais. Is f√©idir linn strucht√∫ir a shaini√∫
chun tagairt√≠ a choinne√°il, ach sa ch√°s sin bheadh ‚Äã‚Äãorainn n√≥ta saoil a chur leis
ar gach tagairt i sainmh√≠ni√∫ an strucht√∫ir. I liost√∫ 10-24 t√° strucht√∫r ainmnithe
<code>ImportantExcerpt</code> a choinn√≠onn slisne teaghr√°n.</p>
<Listing number="10-24" file-name="src/main.rs" caption="A struct that holds a reference, requiring a lifetime annotation">
<pre><pre class="playground"><code class="language-rust">struct ImportantExcerpt&lt;'a&gt; {
    part: &amp;'a str,
}

fn main() {
    let novel = String::from("Call me Ishmael. Some years ago...");
    let first_sentence = novel.split('.').next().unwrap();
    let i = ImportantExcerpt {
        part: first_sentence,
    };
}</code></pre></pre>
</Listing>
<p>T√° an <code>part</code> r√©imse singil ag an strucht√∫r seo a choinn√≠onn slisne teaghr√°n, is √© sin a
tagairt. Mar is amhlaidh le cine√°lacha sonra√≠ cine√°lach, dearbha√≠mid ainm an chine√°l cine√°lach
paraim√©adar feadh an tsaoil taobh istigh l√∫ib√≠n√≠ uillinn tar √©is ainm an struct ionas gur f√©idir linn
√∫s√°id a bhaint as an paraim√©adar saoil i gcorp an tsainmh√≠nithe struct. seo
Cialla√≠onn an√≥t√°il nach f√©idir le <code>ImportantExcerpt</code> a bheith n√≠os faide n√° an tagairt
coinn√≠onn s√© ina r√©imse <code>part</code>.</p>
<p>Crutha√≠onn an fheidhm <code>main</code> anseo sampla den strucht√∫r <code>ImportantExcerpt</code>
a choinn√≠onn tagairt don ch√©ad abairt den <code>String</code> at√° ar √∫in√©ireacht ag an
athr√≥g <code>novel</code>. T√° na sonra√≠ san <code>novel</code> ann roimh an <code>ImportantExcerpt</code>
crutha√≠tear shampla. Ina theannta sin, n√≠ th√©ann <code>novel</code> as raon feidhme go dt√≠ ina dhiaidh sin
t√©ann an <code>ImportantExcerpt</code> amach as an sc√≥ip, mar sin t√° an tagairt sa
T√° sampla <code>ImportantExcerpt</code> bail√≠.</p>
<h3 id="elision-ar-feadh-an-tsaoil"><a class="header" href="#elision-ar-feadh-an-tsaoil">Elision ar feadh an tSaoil</a></h3>
<p>D'fhoghlaim t√∫ go bhfuil saolr√© ag gach tagairt agus gur g√° duit a shonr√∫
paraim√©adair shaolr√© le haghaidh feidhmeanna n√≥ strucht√∫ir a √∫s√°ideann tagairt√≠. Mar sin f√©in, t√°imid
Bh√≠ feidhm aige i Liost√∫ 4-9, a thaispe√°ntar ar√≠s i Liost√∫ 10-25, a cuireadh le ch√©ile
gan n√≥ta√≠ saoil.</p>
<Listing number="10-25" file-name="src/lib.rs" caption="A function we defined in Listing 4-9 that compiled without lifetime annotations, even though the parameter and return type are references">
<pre><pre class="playground"><code class="language-rust">fn first_word(s: &amp;str) -&gt; &amp;str {
    let bytes = s.as_bytes();

    for (i, &amp;item) in bytes.iter().enumerate() {
        if item == b' ' {
            return &amp;s[0..i];
        }
    }

    &amp;s[..]
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let my_string = String::from("hello world");
</span><span class="boring">
</span><span class="boring">    // first_word works on slices of `String`s
</span><span class="boring">    let word = first_word(&amp;my_string[..]);
</span><span class="boring">
</span><span class="boring">    let my_string_literal = "hello world";
</span><span class="boring">
</span><span class="boring">    // first_word works on slices of string literals
</span><span class="boring">    let word = first_word(&amp;my_string_literal[..]);
</span><span class="boring">
</span><span class="boring">    // Because string literals *are* string slices already,
</span><span class="boring">    // this works too, without the slice syntax!
</span><span class="boring">    let word = first_word(my_string_literal);
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is c√∫is stairi√∫il an ch√∫is a thiomsa√≠onn an fheidhm seo gan n√≥ta√≠ saoil:
i leaganacha luatha (r√©amh-1.0) de Rust, n√≠ bheadh ‚Äã‚Äãan c√≥d seo tiomsaithe toisc
bh√≠ saolr√© follasach ag teast√°il √≥ gach tagairt. Ag an am sin, an fheidhm
bheadh ‚Äã‚Äãs√≠ni√∫ scr√≠ofa mar seo:</p>
<pre><code class="language-rust ignore">fn first_word&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;'a str {</code></pre>
<p>Tar √©is a l√°n de ch√≥d Rust a scr√≠obh, fuair an fhoireann Rust go r√≠omhchl√°raitheoir√≠ Rust
go raibh na n√≥ta√≠ saoil c√©anna √° gcur isteach ar√≠s agus ar√≠s eile go h√°irithe
c√°sanna. Bh√≠ na c√°sanna seo intuartha agus lean siad roinnt cinntitheach
patr√∫in. Rinne na forbr√≥ir√≠ na patr√∫in seo a r√≠omhchl√°r√∫ isteach i gc√≥d an tiomsaitheora amhlaidh
d‚Äôfh√©adfadh an seice√°la√≠ iasachta√≠ t√°tal a bhaint as na saolr√©anna sna c√°sanna seo agus n√≠ bheadh
n√≥ta√≠ soil√©ire de dh√≠th.</p>
<p>T√° an p√≠osa seo de stair Rust √°bhartha mar is f√©idir go bhfuil n√≠os m√≥
tiocfaidh patr√∫in cinntitheacha chun cinn agus cuirfear leis an tiomsaitheoir iad. Sa todhcha√≠,
d'fh√©adfadh go mbeadh n√≠os l√∫ n√≥ta√≠ saoil de dh√≠th.</p>
<p>Tugtar an
<em>rialacha √©alaithe saoil</em>. N√≠ rialacha iad seo at√° le lean√∫int ag r√≠omhchl√°raitheoir√≠; siad
sraith c√°sanna ar leith a bhreithneoidh an tiomsaitheoir, agus m√°s rud √© do ch√≥d
oiri√∫nach do na c√°sanna seo, n√≠ g√° duit na saolr√©anna a scr√≠obh go sainr√°ite.</p>
<p>N√≠ thugann na rialacha d√≠othaithe t√°tal ioml√°n. M√° t√° d√©bhr√≠ocht f√≥s mar
cad iad na saolr√©anna at√° ag na tagairt√≠ tar √©is do Rust na rialacha a chur i bhfeidhm, an
n√≠ dh√©anfaidh an tiomsaitheoir buille faoi thuairim c√©n saolr√© ba cheart a bheith sna tagairt√≠ at√° f√°gtha.
In ionad buille faoi thuairim a thabhairt, tabharfaidh an tiomsaitheoir earr√°id duit is f√©idir leat a r√©iteach
tr√≠ na n√≥ta√≠ saoil a chur leis.</p>
<p>Tugtar <em>ionchur saoil</em> ar fhad saoil ar pharaim√©adair feidhme n√≥ modha, agus
tugtar <em>saolr√©anna aschuir</em> ar shaolr√©anna ar luachanna aischuir.</p>
<p>√ös√°ideann an tiomsaitheoir tr√≠ riail chun saolr√© na dtagairt√≠ a dh√©anamh amach
nuair nach bhfuil n√≥ta√≠ soil√©ire ann. Baineann an ch√©ad riail le hionchur
saolr√©anna, agus t√° feidhm ag an dara agus an tr√≠√∫ riail maidir le saolr√©anna aschuir. M√° t√° an
Faigheann tiomsaitheoir go dt√≠ deireadh na dtr√≠ rialacha agus t√° tagairt√≠ do
rud nach f√©idir leis saolr√©anna a dh√©anamh amach, stopfaidh an tiomsaitheoir le hearr√°id.
Baineann na rialacha seo le sainmh√≠nithe <code>fn</code> chomh maith le bloic <code>impl</code>.</p>
<p>Is √© an ch√©ad riail go sannann an tiomsaitheoir paraim√©adar saoil do gach ceann acu
paraim√©adar at√° ina thagairt. I bhfocail eile, feidhm le paraim√©adar amh√°in
faigheann s√© paraim√©adar saoil amh√°in: <code>fn foo&lt;'a&gt;(x: &amp;'a i32)</code>; feidhm le dh√°
faigheann paraim√©adair dh√° pharaim√©adair saoil ar leith: <code>fn foo&lt;'a, 'b&gt;(x: &amp;'a i32, y: &amp;'b i32)</code>; agus mar sin de.</p>
<p>Is √© an dara riail, m√° t√° go d√≠reach paraim√©adar saoil ionchuir amh√°in, go
sanntar an saolr√© do gach paraim√©adair shaolr√© aschuir: <code>fn foo&lt;'a&gt;(x: &amp;'a i32) -&gt; &amp;'a i32</code>.</p>
<p>Is √© an tr√≠√∫ riail, m√° t√° paraim√©adair shaolr√© ionchuir iolracha, ach
duine acu is <code>&amp;self</code> n√≥ <code>&amp;mut self</code> toisc gur modh √© seo, saolr√©
sanntar <code>self</code> ar gach paraim√©adair shaolr√© aschuir. D√©anann an tr√≠√∫ riail seo
modhanna i bhfad n√≠os deise a l√©amh agus a scr√≠obh mar go bhfuil n√≠os l√∫ siombail√≠ riachtanach.</p>
<p>Ligean orainn gur muid an tiomsaitheoir. Cuirfimid na rialacha seo i bhfeidhm chun na
saolr√© na dtagairt√≠ i s√≠ni√∫ na feidhme <code>first_word</code> i
Liost√°il 10-25. Tosa√≠onn an s√≠ni√∫ gan aon saolr√©anna a bhaineann leis an
tagairt√≠:</p>
<pre><code class="language-rust ignore">fn first_word(s: &amp;str) -&gt; &amp;str {</code></pre>
<p>Ansin t√° feidhm ag an tiomsaitheoir an ch√©ad riail, a shonra√≠onn go bhfuil gach paraim√©adar
faigheann a shaolr√© f√©in. Tabharfaimid <code>'a</code> air mar is gn√°ch, mar sin anois t√° an s√≠ni√∫
seo:</p>
<pre><code class="language-rust ignore">fn first_word&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;str {</code></pre>
<p>T√° feidhm ag an dara riail toisc go bhfuil go d√≠reach saolr√© ionchuir amh√°in. An dara ceann
sonra√≠onn an riail go sanntar saolr√© an pharaim√©adar ionchuir amh√°in
saolr√© an aschuir, mar sin is √© an s√≠ni√∫ anois:</p>
<pre><code class="language-rust ignore">fn first_word&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;'a str {</code></pre>
<p>Anois t√° saolr√©anna ag na tagairt√≠ go l√©ir sa s√≠ni√∫ feidhme seo, agus t√° an
is f√©idir leis an tiomsaitheoir lean√∫int lena anail√≠s gan g√° don r√≠omhchl√°raitheoir an√≥t√°il a dh√©anamh
na saolr√©anna sa s√≠ni√∫ feidhme seo.</p>
<p>Breathna√≠mid ar shampla eile, an uair seo ag baint √∫s√°ide as an bhfeidhm <code>longest</code> a raibh
gan aon pharaim√©adair saoil nuair a thosaigh muid ag obair leis i Liost√∫ 10-20:</p>
<pre><code class="language-rust ignore">fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {</code></pre>
<p>Cuirfimid an ch√©ad riail i bhfeidhm: faigheann gach paraim√©adar a shaolr√© f√©in. An uair seo t√°imid
b√≠odh dh√° pharaim√©adair againn seachas ceann amh√°in, agus mar sin t√° dh√° shaolr√© againn:</p>
<pre><code class="language-rust ignore">fn longest&lt;'a, 'b&gt;(x: &amp;'a str, y: &amp;'b str) -&gt; &amp;str {</code></pre>
<p>Is f√©idir leat a fheice√°il nach bhfuil feidhm ag an dara riail toisc go bhfuil n√≠os m√≥ n√° ceann amh√°in ann
shaolr√© ionchuir. N√≠l feidhm ag an tr√≠√∫ riail ach an oiread, mar is √© an <code>longest</code> n√° a
feidhm seachas modh, mar sin n√≠l aon cheann de na paraim√©adair <code>self</code>. Tar √©is
ag obair tr√≠ na tr√≠ rialacha, n√≠l a fhios againn go f√≥ill cad √© an toradh
Is √© saolr√© an chine√°il. Sin √© an f√°th go bhfuaireamar earr√°id agus muid ag iarraidh an c√≥d a thioms√∫ isteach
Liost√∫ 10-20: d‚Äôoibrigh an tiomsaitheoir tr√≠ na rialacha √©alaithe ar feadh an tsaoil ach f√≥s f√©in
n√≠orbh fh√©idir fad saoil na dtagairt√≠ sa s√≠ni√∫ a dh√©anamh amach.</p>
<p>Toisc nach mbaineann an tr√≠√∫ riail ach le s√≠nithe modhanna, f√©achfaimid
saolr√©anna sa chomhth√©acs sin taobh le taobh f√©achaint c√©n f√°th a gcialla√≠onn an tr√≠√∫ riail nach g√° d√∫inn
an√≥t√°il saolr√©anna i s√≠nithe modha go minic.</p>
<h3 id="an√≥t√°lacha-saoil-i-sainmh√≠nithe-modh"><a class="header" href="#an√≥t√°lacha-saoil-i-sainmh√≠nithe-modh">An√≥t√°lacha Saoil i Sainmh√≠nithe Modh</a></h3>
<p>Nuair a chuirimid modhanna i bhfeidhm ar strucht√∫r le saolr√©anna, bainimid √∫s√°id as an chomhr√©ir ch√©anna agus at√°
paraim√©adair chine√°lacha a thaispe√°ntar i Liosta 10-11. I gc√°s ina ndearbha√≠mid agus
Braitheann √∫s√°id paraim√©adair an tsaoil ar cib√© an bhfuil baint acu leis an strucht√∫r
r√©ims√≠ n√≥ paraim√©adair an mhodha agus na luachanna tuairisce√°in.</p>
<p>N√≠ m√≥r ainmneacha saoil do r√©ims√≠ strucht√∫ir a dhearbh√∫ i gc√≥na√≠ tar √©is an <code>impl</code>
eochairfhocal agus ansin √∫s√°idtear √© tar √©is ainm an strucht√∫ir toisc go bhfuil na saolr√©anna sin p√°irteach
den chine√°l strucht√∫ir.</p>
<p>I s√≠nithe modha taobh istigh den bhloc <code>impl</code>, d'fh√©adfadh tagairt√≠ a bheith ceangailte leis an
saolr√© na dtagairt√≠ i r√©ims√≠ an strucht√∫ir, n√≥ d'fh√©adfadh siad a bheith neamhsple√°ch. I
Ina theannta sin, is minic a fh√°gann rialacha √©alaithe an tsaoil √© ionas go mbeidh n√≥ta√≠ saoil ann
nach bhfuil riachtanach i s√≠nithe modh. Breathna√≠mid ar roinnt sampla√≠ ag baint √∫s√°ide as an
strucht√∫r darb ainm <code>ImportantExcerpt</code> a shainmh√≠omar i Liost√∫ 10-24.</p>
<p>Ar dt√∫s √∫s√°idfimid modh darb ainm <code>level</code> a bhfuil an t-aon pharaim√©adar ina thagairt d√≥
<code>self</code> agus arb √© i32` a luach aischuir, nach tagairt d'aon rud √©:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct ImportantExcerpt&lt;'a&gt; {
</span><span class="boring">    part: &amp;'a str,
</span><span class="boring">}
</span><span class="boring">
</span>impl&lt;'a&gt; ImportantExcerpt&lt;'a&gt; {
    fn level(&amp;self) -&gt; i32 {
        3
    }
}
<span class="boring">
</span><span class="boring">impl&lt;'a&gt; ImportantExcerpt&lt;'a&gt; {
</span><span class="boring">    fn announce_and_return_part(&amp;self, announcement: &amp;str) -&gt; &amp;str {
</span><span class="boring">        println!("Attention please: {announcement}");
</span><span class="boring">        self.part
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let novel = String::from("Call me Ishmael. Some years ago...");
</span><span class="boring">    let first_sentence = novel.split('.').next().unwrap();
</span><span class="boring">    let i = ImportantExcerpt {
</span><span class="boring">        part: first_sentence,
</span><span class="boring">    };
</span><span class="boring">}</span></code></pre></pre>
<p>An dearbh√∫ paraim√©adar saoil tar √©is <code>impl</code> agus a √∫s√°id tar √©is ainm an chine√°il
ag teast√°il, ach n√≠ g√° d√∫inn saolr√© na tagartha a an√≥t√°il
go <code>self</code> mar gheall ar riail an ch√©ad elision.</p>
<p>Seo sampla ina bhfuil feidhm ag an tr√≠√∫ riail √©alaithe saoil:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct ImportantExcerpt&lt;'a&gt; {
</span><span class="boring">    part: &amp;'a str,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl&lt;'a&gt; ImportantExcerpt&lt;'a&gt; {
</span><span class="boring">    fn level(&amp;self) -&gt; i32 {
</span><span class="boring">        3
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>impl&lt;'a&gt; ImportantExcerpt&lt;'a&gt; {
    fn announce_and_return_part(&amp;self, announcement: &amp;str) -&gt; &amp;str {
        println!("Attention please: {announcement}");
        self.part
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let novel = String::from("Call me Ishmael. Some years ago...");
</span><span class="boring">    let first_sentence = novel.split('.').next().unwrap();
</span><span class="boring">    let i = ImportantExcerpt {
</span><span class="boring">        part: first_sentence,
</span><span class="boring">    };
</span><span class="boring">}</span></code></pre></pre>
<p>T√° dh√° shaolr√© ionchuir ann, mar sin cuireann Rust an ch√©ad riail √©alaithe saoil i bhfeidhm
agus tugann s√© a saolta f√©in idir <code>&amp;self</code> agus <code>announcement</code>. Ansin, mar gheall ar
ceann de na paraim√©adair is ea <code>&amp;self</code>, faigheann an cine√°l tuairisce√°in saolr√© <code>&amp;self</code>,
agus t√° cuntas d√©anta ar gach saolr√©.</p>
<h3 id="an-saol-statach"><a class="header" href="#an-saol-statach">An Saol Statach</a></h3>
<p>Saolr√© speisialta amh√°in a chaithfimid a phl√© n√° <code>'static</code>, rud a l√©ir√≠onn go bhfuil an
tagairt difear <em>can</em> beo ar feadh r√© ioml√°n an chl√°ir. Gach
t√° an saolr√© <code>'static</code> ag sreanglitreacha, agus is f√©idir linn an√≥t√°il a dh√©anamh mar seo a leanas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s: &amp;'static str = "I have a static lifetime.";
<span class="boring">}</span></code></pre></pre>
<p>St√≥r√°iltear t√©acs na teaghr√°n seo go d√≠reach i nd√©n√°rtha an chl√°ir, mar at√°
ar f√°il i gc√≥na√≠. D√° bhr√≠ sin, t√° saolr√© gach teaghr√°in-liteartha <code>'static</code>.</p>
<p>Seans go bhfeicfe√° molta√≠ i dteachtaireachta√≠ earr√°ide chun an saolr√© <code>'static</code> a √∫s√°id. Ach
sula sonr√≥far <code>'static</code> mar an saolr√© le haghaidh tagartha, smaoinigh ar
cib√© an bhfuil an tagairt at√° agat i do ch√≥na√≠ i nd√°ir√≠re ar feadh shaolr√© ioml√°n do
cl√°r n√≥ nach ea, agus cib√© acu is mian leat √©. An chuid is m√≥ den am, teachtaireacht earr√°ide
ag moladh na dtortha√≠ saoil <code>'static</code> as iarracht a dh√©anamh ar dhrong a chruth√∫
tagairt n√≥ neamhr√©ir idir na saolr√©anna at√° ar f√°il. I gc√°sanna den s√≥rt sin, an r√©iteach
is √© sin na fadhbanna sin a r√©iteach, gan an saolr√© <code>'static</code> a shonr√∫.</p>
<h2 id="paraim√©adair-chine√°lacha-cine√°lacha-teorainneacha-trait-agus-saoil-le-ch√©ile"><a class="header" href="#paraim√©adair-chine√°lacha-cine√°lacha-teorainneacha-trait-agus-saoil-le-ch√©ile">Paraim√©adair Chine√°lacha Cine√°lacha, Teorainneacha Trait, agus Saoil le Ch√©ile</a></h2>
<p>Breathna√≠mid go hachomair ar an chomhr√©ir a bhaineann le paraim√©adair cine√°lacha cine√°lacha, tr√©ithe a shonr√∫
teorainneacha, agus saolr√©anna ar fad in aon fheidhm amh√°in!</p>
<pre><code class="language-meirge"># fn main() {
#     let string1 = String::from("abcd");
#     let string2 = "xyz";
# 
#     let result = longest_with_an_announcement(
#         string1.as_str(),
#         string2,
#         "Today is someone's birthday!",
#     );
#     println!("The longest string is {result}");
# }
# 
use std::fmt::Display;

fn longest_with_an_announcement&lt;'a, T&gt;(
    x: &amp;'a str,
    y: &amp;'a str,
    ann: T,
) -&gt; &amp;'a str
where
    T: Display,
{
    println!("Announcement! {ann}");
    if x.len() &gt; y.len() {
        x
    } else {
        y
    }
}
</code></pre>
<p>Seo √≠ an fheidhm <code>longest</code> √≥ Liost√∫ 10-21 a fhilleann an ceann is faide de
dh√° shlisne teaghr√°n. Ach anois t√° paraim√©adar breise aige darb ainm <code>ann</code> den chine√°lach
cl√≥scr√≠obh <code>T</code>, ar f√©idir √© a l√≠onadh isteach de r√©ir cine√°il ar bith a chuireann an <code>Display</code> i bhfeidhm
tr√©ith mar at√° sonraithe ag an gcl√°sal <code>√°it</code>. D√©anfar an paraim√©adar breise seo a phriont√°il
ag baint √∫s√°ide as <code>{}</code>, agus sin an f√°th a bhfuil an tr√©ithe <code>Display</code> faoi cheangal riachtanach. Toisc
is cine√°l cine√°lach iad saolr√©anna, dearbhuithe an pharaim√©adar saoil
T√©ann <code>'a</code> agus an cine√°l paraim√©adar cine√°lach <code>T</code> sa liosta c√©anna taobh istigh den uillinn
l√∫ib√≠n√≠ i ndiaidh ainm na feidhme.</p>
<h2 id="achoimre-9"><a class="header" href="#achoimre-9">Achoimre</a></h2>
<p>Chl√∫daigh muid go leor sa chaibidil seo! Anois go bhfuil a fhios agat faoi chine√°l cine√°lach
paraim√©adair, tr√©ithe agus teorainneacha tr√©ithe, agus paraim√©adair chine√°lacha saoil, t√° t√∫
r√©idh le c√≥d a scr√≠obh gan athr√° a oibr√≠onn i go leor c√°sanna √©ags√∫la.
Ligeann paraim√©adair chine√°lacha duit an c√≥d a chur i bhfeidhm ar chine√°lacha √©ags√∫la. Tr√©ithe agus
cinnt√≠onn teorainneacha tr√©ithe, c√© go bhfuil na cine√°lacha cine√°lacha, go mbeidh an
iompar a theasta√≠onn √≥n gc√≥d. D'fhoghlaim t√∫ conas n√≥ta√≠ saoil a √∫s√°id lena chinnti√∫
nach mbeidh aon tagairt√≠ dochlo√≠te ag an gc√≥d sol√∫btha seo. Agus seo go l√©ir
tarla√≠onn anail√≠s ag am tiomsaithe, rud nach gcuireann isteach ar fheidhm√≠ocht am rite!</p>
<p>Creid √© n√≥ n√° creid, t√° i bhfad n√≠os m√≥ le foghlaim ar na h√°bhair a phl√©amar
sa chaibidil seo: Pl√©ann Caibidil 18 r√©ada trait, ar bealach eile iad a √∫s√°id
tr√©ithe. T√° c√°sanna n√≠os casta ann freisin a bhaineann le n√≥ta√≠ saoil
nach mbeidh de dh√≠th ort ach i gc√°sanna s√°rfhorbartha; d√≥ibh si√∫d, ba cheart duit l√©amh
an <a href="../reference/index.html">Tagairt Rust</a>. Ach ina dhiaidh sin, beidh t√∫ ag foghlaim conas trialacha a scr√≠obh isteach
Rust ionas gur f√©idir leat a chinnti√∫ go bhfuil do ch√≥d ag obair mar ba ch√≥ir d√≥.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="trialacha-uathoibrithe-a-scr√≠obh"><a class="header" href="#trialacha-uathoibrithe-a-scr√≠obh">Trialacha Uathoibrithe a Scr√≠obh</a></h1>
<p>Ina aiste 1972 ‚ÄúThe Humble R√≠omhchl√°raitheoir,‚Äù d√∫irt Edsger W. Dijkstra go
‚ÄúIs f√©idir le t√°st√°il cl√°r a bheith ina bhealach an-√©ifeachtach chun l√°ithreacht fabhtanna a thaispe√°int, ach
t√° s√© gan d√≥chas neamhleor chun a n-√©agmais a thaispe√°int.‚Äù N√≠ chialla√≠onn s√© sin againn
n√≠or cheart d√∫inn iarracht a dh√©anamh an oiread agus is f√©idir linn a th√°st√°il!</p>
<p>Is ionann cruinneas in√°r gcl√°ir agus an m√©id a dh√©anann √°r gc√≥d an m√©id at√° beartaithe againn
√© a dh√©anamh. T√° meirge deartha le leibh√©al ard imn√≠ maidir le cirte
na gcl√°r, ach t√° cruinneas casta agus n√≠ furasta a chruth√∫. Cine√°l meirge
t√° cuid mh√≥r den ualach seo ag baint leis an gc√≥ras, ach n√≠ f√©idir leis an gcine√°l c√≥ras a ghabh√°il
gach rud. Mar sin, cuims√≠onn Rust taca√≠ocht chun t√°st√°lacha bogearra√≠ uathoibrithe a scr√≠obh.</p>
<p>Abair go scr√≠obhaimid feidhm <code>add_two</code> a chuireann 2 le cib√© uimhir a thugtar d√≥
√©. Glacann s√≠ni√∫ na feidhme seo le sl√°nuimhir mar pharaim√©adar agus filleann s√© an
sl√°nuimhir mar thoradh air. Nuair a dh√©anaimid an fheidhm sin a chur i bhfeidhm agus a thioms√∫, d√©anann Rust gach rud
an cine√°l seice√°la agus seice√°il iasachta at√° foghlamtha agat go dt√≠ seo lena chinnti√∫
nach bhfuilimid ag dul thar luach <code>String</code> n√≥ tagairt neamhbhail√≠, mar shampla
leis an bhfeidhm seo. Ach n√≠ f√©idir le Rust a sheice√°il go nd√©anfaidh an fheidhm seo go beacht
cad at√° ar intinn againn, is √© sin ar ais an paraim√©adar m√≥ide 2 seachas, abair, an
paraim√©adar m√≥ide 10 n√≥ an paraim√©adar l√∫ide 50! Sin an √°it a dtagann t√°st√°lacha isteach.</p>
<p>Is f√©idir linn t√°st√°lacha a scr√≠obh a dhearbha√≠onn, mar shampla, nuair a thugaimid <code>3</code> ar aghaidh chuig an
feidhm <code>add_two</code>, is √© an luach ar ais n√° <code>5</code>. Is f√©idir linn na t√°st√°lacha seo a rith aon uair
d√©anaimid athruithe ar √°r gc√≥d chun a chinnti√∫ nach bhfuil aon iompar ceart ann
athraigh.</p>
<p>Is scil chasta √≠ an t√°st√°il: c√© nach f√©idir linn gach mionsonra a chl√∫dach in aon chaibidil amh√°in
faoi ‚Äã‚Äãconas t√°st√°lacha maithe a scr√≠obh, sa chaibidil seo d√©anfaimid pl√© ar mheicnic na
√Åiseanna t√°st√°la meirge. Labhr√≥imid faoi na n√≥ta√≠ agus na macra√≠
ar f√°il duit agus do th√°st√°lacha √° scr√≠obh agat, an t-iompar r√©amhshocraithe agus na roghanna
ar choinn√≠oll do th√°st√°lacha a rith, agus conas trialacha a eagr√∫ ina dtrialacha aonaid agus
t√°st√°lacha comhth√°th√∫.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="conas-trialacha-a-scr√≠obh"><a class="header" href="#conas-trialacha-a-scr√≠obh">Conas Trialacha a Scr√≠obh</a></h2>
<p>Is feidhmeanna Rust iad t√°st√°lacha a fh√≠ora√≠onn go bhfuil an c√≥d neamhth√°st√°la ag feidhmi√∫ i
an modh ionchais. Is gn√°ch go nd√©anann coirp na bhfeidhmeanna t√°st√°la na tr√≠ cinn seo
gn√≠omhartha:</p>
<ul>
<li>Socraigh aon sonra√≠ n√≥ st√°it at√° ag teast√°il.</li>
<li>Rith an c√≥d is mian leat a th√°st√°il.</li>
<li>Dearbhaigh gurb iad na tortha√≠ a bhfuil t√∫ ag s√∫il leo.</li>
</ul>
<p>Breathna√≠mid ar na gn√©ithe a shol√°thra√≠onn Rust go sonrach chun t√°st√°lacha a scr√≠obh
d√©an na gn√≠omhartha seo, lena n-√°ir√≠tear an tr√©ith <code>test</code>, c√∫pla macra, agus an
tr√©ith <code>should_panic</code>.</p>
<h3 id="anatama√≠ocht-na-feidhme-t√°st√°la"><a class="header" href="#anatama√≠ocht-na-feidhme-t√°st√°la">Anatama√≠ocht na Feidhme T√°st√°la</a></h3>
<p>Ar a simpl√≠, is feidhm √≠ t√°st√°il in Rust at√° an√≥t√°ilte leis an <code>test</code>
tr√©ith. Is meiteashonra√≠ iad tr√©ithe faoi ph√≠osa√≠ de ch√≥d Meirge; sampla amh√°in is ea
an tr√©ith <code>derive</code> a d'√∫s√°ideamar le structs i gCaibidil 5. Feidhm a athr√∫
isteach i bhfeidhm t√°st√°la, cuir <code>#[test]</code> ar an l√≠ne roimh <code>fn</code>. Nuair a ritheann t√∫ do
t√°st√°lacha leis an ord√∫ <code>cargo test</code>, t√≥gann Rust d√©n√°rtha r√°dala t√°st√°la a ritheann
na feidhmeanna agus na tuarasc√°lacha an√≥t√°ilte ar cib√© acu an n-√©ir√≠onn le gach feidhm t√°st√°la n√≥
theipeann.</p>
<p>Aon uair a dh√©anaimid tionscadal leabharlainne nua le Cargo, mod√∫l t√°st√°la le t√°st√°il
gintear feidhm ann go huathoibr√≠och d√∫inn. Tugann an mod√∫l seo duit a
teimpl√©ad chun do th√°st√°lacha a scr√≠obh ionas nach mbeidh ort f√©achaint suas go cruinn
strucht√∫r agus comhr√©ir gach uair a chuireann t√∫ t√∫s le tionscadal nua. Is f√©idir leat an oiread
feidhmeanna t√°st√°la breise agus an oiread mod√∫il t√°st√°la agus is mian leat!</p>
<p>Fiosr√≥imid roinnt gn√©ithe den chaoi a n-oibr√≠onn t√°st√°lacha tr√≠ th√°st√°il a dh√©anamh leis an teimpl√©ad
t√°st√°il sula nd√©anaimid t√°st√°il iarbh√≠r ar aon ch√≥d. Ansin scr√≠obhfaimid roinnt t√°st√°lacha sa saol f√≠or
a thugann roinnt c√≥d scr√≠ofa againn agus a dhearbha√≠onn go bhfuil a iompar ceart.</p>
<p>Crutha√≠mid tionscadal leabharlainne nua darb ainm <code>adder</code> a chuirfidh dh√° uimhir leis:</p>
<pre><code class="language-console">$ cargo new adder --lib
     Created library `adder` project
$ cd adder
</code></pre>
<p>Ba cheart go mbeadh cuma ar a bhfuil sa chomhad <em>src/lib.rs</em> i do leabharlann <code>adder</code>
Liost√°il 11-1.</p>
<Listing number="11-1" file-name="src/lib.rs" caption="The code generated automatically by `cargo new`">
<!-- manual-regeneration
cd listings/ch11-writing-automated-tests
rm -rf listing-11-01
cargo new listing-11-01 --lib --name adder
cd listing-11-01
echo "$ cargo test" > output.txt
RUSTFLAGS="-A unused_variables -A dead_code" RUST_TEST_THREADS=1 cargo test >> output.txt 2>&1
git diff output.txt # commit any relevant changes; discard irrelevant ones
cd ../../..
-->
<pre><code class="language-rust noplayground">pub fn add(left: u64, right: u64) -&gt; u64 {
    left + right
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn it_works() {
        let result = add(2, 2);
        assert_eq!(result, 4);
    }
}</code></pre>
</Listing>
<p>Tosa√≠onn an comhad le sampla <code>add</code> feidhm, ionas go mbeidh rud √©igin againn
a th√°st√°il.</p>
<p>Faoi l√°thair, d√≠r√≠mid ar an bhfeidhm <code>it_works</code> amh√°in. Tabhair faoi deara an <code>#[test]</code>
n√≥ta: l√©ir√≠onn an tr√©ith seo feidhm t√°st√°la, mar sin an t√°st√°il
t√° a fhios ag r√°dala an fheidhm seo a ch√≥ire√°il mar th√°st√°il. Seans go mbeidh neamhth√°st√°il againn freisin
feidhmeanna sa mhod√∫l <code>tests</code> chun cuidi√∫ le c√°sanna com√≥nta a shocr√∫ n√≥ le cur i gcr√≠ch
oibr√≠ochta√≠ coitianta, mar sin n√≠ m√≥r d√∫inn a chur in i√∫l i gc√≥na√≠ c√© na feidhmeanna at√° ina dtrialacha.</p>
<p>√ös√°ideann an comhlacht feidhme samplach an macra <code>assert_eq!</code> chun a dhearbh√∫ go bhfuil <code>result</code>,
ina bhfuil an toradh ar ghlaoch <code>add</code> le 2 agus 2, cothrom le 4. Seo
feidhm√≠onn dearbh√∫ mar shampla den fhorm√°id do ghn√°thth√°st√°il. Rithfimid √©
f√©achaint go n-√©ir√≠onn leis an t√°st√°il seo.</p>
<p>Ritheann an t-ord√∫ <code>cargo test</code> na t√°st√°lacha go l√©ir in√°r dtionscadal, mar a thaispe√°ntar i Liost√∫
11-2.</p>
<Listing number="11-2" caption="The output from running the automatically generated test">
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.57s
     Running unittests src/lib.rs (file:///projects/adder/target/debug/deps/adder-7acb243c25ffd9dc)

running 1 test
test tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
</code></pre>
</Listing>
<p>Chuir lasta le ch√©ile agus rith an t√°st√°il. Feicimid an l√≠ne <code>running 1 test</code>. An ch√©ad cheann eile
l√©ir√≠onn an l√≠ne ainm na feidhme t√°st√°la ginte, ar a dtugtar <code>tests::it_works</code>,
agus go bhfuil toradh na trialach sin <code>ok</code>. An achoimre ioml√°n <code>test result: ok.</code> cialla√≠onn s√© gur ritheadh ‚Äã‚Äãna t√°st√°lacha go l√©ir, agus an chuid a l√©ann <code>1 passed; 0 failed</code> l√≠on na dtrialacha a d'√©irigh leo n√≥ ar theip orthu.</p>
<p>Is f√©idir triail a mharc√°il mar th√°st√°il nach dtugtar aird uirthi agus mar sin n√≠ ritheann s√© go h√°irithe
shampla ; cl√∫d√≥imid √© sin sa <a href="ch11-02-running-tests.html#ignoring-some-tests-unless-specifically-requested">‚ÄúNeamhaird a thabhairt ar Roinnt Trialacha Mura Go Sonrach
Iarrtha‚Äù</a><!-- neamhaird --> alt n√≠os d√©ana√≠ sa chaibidil seo
nach bhfuil d√©anta agat anseo, l√©ir√≠onn an achoimre <code>0 ignored</code>.</p>
<p>Baineann an staitistic <code>0 measured</code> le t√°st√°lacha tagarmhairc a thomhaiseann feidhm√≠ocht.
N√≠l t√°st√°lacha tagarmharc√°la ar f√°il, √≥n scr√≠bhinn seo, ach amh√°in i Rust gach o√≠che. F√©ach
<a href="../unstable-book/library-features/test.html">na doicim√©id faoi th√°st√°lacha tagarmharc√°la</a> chun tuilleadh a fhoghlaim.</p>
<p>Is f√©idir linn arg√≥int a chur ar aghaidh chuig an ord√∫ <code>cargo test</code> gan ach t√°st√°lacha a bhfuil a
oireann an t-ainm le teaghr√°n; tugtar <em>filtering</em> air seo agus cl√∫d√≥imid √© sin sa
<a href="ch11-02-running-tests.html#running-a-subset-of-tests-by-name">‚ÄúFothacar Trialacha √° Rith de r√©ir Ainm‚Äù</a><!-- neamhaird a dh√©anamh ar --> alt. Seo muid
n√°r scagadh na t√°st√°lacha at√° √° rith, mar sin taispe√°nann deireadh na hachoimre <code>0 filtered out</code>.</p>
<p>T√° an ch√©ad chuid eile den aschur t√°st√°la ag tos√∫ ag <code>Doc-tests adder</code> le haghaidh an
tortha√≠ aon t√°st√°lacha doicim√©adachta. N√≠l aon t√°st√°lacha doicim√©adaithe againn go f√≥ill,
ach is f√©idir le Rust aon sampla√≠ c√≥d at√° le feice√°il in√°r ndoicim√©ad√∫ API a thioms√∫.
Cuid√≠onn an ghn√© seo le do dhoicim√©id agus do ch√≥d a choinne√°il ar comhchiall! D√©anfaimid pl√© ar conas
scr√≠obh trialacha doicim√©ad√∫ch√°in sa <a href="ch14-02-publishing-to-crates-io.html#documentation-comments-as-tests">‚ÄúTuairim√≠ C√°ip√©is√≠ochta mar
T√°st√°lacha‚Äù</a><!-- neamhaird --> alt de Chaibidil 14. Go dt√≠ seo, beidh muid
neamhaird a dh√©anamh den aschur <code>Doc-tests</code>.</p>
<p>Tosa√≠mid ar an t√°st√°il a shaincheapadh d√°r riachtanais f√©in. Ar dt√∫s, athraigh ainm
an fheidhm <code>it_works</code> chuig ainm eile, mar <code>exploration</code>, mar sin:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust noplayground">pub fn add(left: u64, right: u64) -&gt; u64 {
    left + right
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn exploration() {
        let result = add(2, 2);
        assert_eq!(result, 4);
    }
}</code></pre>
<p>Then run <code>cargo test</code> again. The output now shows <code>exploration</code> instead of
<code>it_works</code>:</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.59s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 1 test
test tests::exploration ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Anois cuirfimid triail eile leis, ach an uair seo d√©anfaimid t√°st√°il a mhainneoidh! T√°st√°lacha
theipeann nuair a scaoll rud √©igin sa fheidhm t√°st√°la. Re√°cht√°iltear gach t√°st√°il i gceann nua
sn√°ithe, agus nuair a fheiceann an pr√≠omh-sn√°ithe go bhfuil sn√°ithe t√°st√°la b√°s, is √© an t√°st√°il
marc√°ilte mar theip. I gCaibidil 9, labhair muid faoi conas an bealach is simpl√≠ chun scaoll
Is √© an macra <code>panic!</code> a ghlaoch. Cuir isteach an t√°st√°il nua mar fheidhm ainmnithe
<code>another</code>, mar sin t√° cuma ar do chomhad <em>src/lib.rs</em> Liost√∫ 11-3.</p>
<Listing number="11-3" file-name="src/lib.rs" caption="Adding a second test that will fail because we call the `panic!` macro">
<pre><code class="language-rust panics noplayground">pub fn add(left: u64, right: u64) -&gt; u64 {
    left + right
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn exploration() {
        let result = add(2, 2);
        assert_eq!(result, 4);
    }

    #[test]
    fn another() {
        panic!("Make this test fail");
    }
}</code></pre>
</Listing>
<p>Rith na t√°st√°lacha ar√≠s ag √∫s√°id <code>cargo test</code>. Ba cheart go mbeadh cuma Liost√∫ ar an aschur
11-4, a thaispe√°nann gur theip ar √°r dt√°st√°il <code>exploration</code> agus ar <code>another</code>.</p>
<Listing number="11-4" caption="Test results when one test passes and one test fails">
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.72s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 2 tests
test tests::another ... FAILED
test tests::exploration ... ok

failures:

---- tests::another stdout ----
thread 'tests::another' panicked at src/lib.rs:17:9:
Make this test fail
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::another

test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
</Listing>
<!-- manual-regeneration
rg panicked listings/ch11-writing-automated-tests/listing-11-03/output.txt
check the line number of the panic matches the line number in the following paragraph
 -->
<p>In ionad <code>ok</code>, taispe√°nann an l√≠ne <code>test tests::another</code> <code>FAILED</code>. Beirt nua
ailt le feice√°il idir na tortha√≠ aonair agus an achoimre: an ch√©ad
l√©ir√≠onn s√© an ch√∫is mhionsonraithe le gach teip t√°st√°la. Sa ch√°s seo, faigheann muid an
sonra√≠ ar theip ar <code>another</code> toisc go raibh scaoll air ag 'Make this test fail'` ar
l√≠ne 17 sa chomhad <em>src/lib.rs</em>. N√≠l sa ch√©ad chuid eile ach ainmneacha gach duine
na t√°st√°lacha a dteipeann orthu, rud at√° √∫s√°ideach nuair a bh√≠onn go leor t√°st√°lacha agus go leor
aschur t√°st√°la teip mhionsonraithe. Is f√©idir linn an t-ainm t√°st√°la teip a √∫s√°id chun rith d√≠reach
an t√°st√°il sin chun √© a dh√≠fhabht√∫ ar bhealach n√≠os √©asca; Labhr√≥imid n√≠os m√≥ faoi bheala√≠ le t√°st√°lacha a re√°cht√°il
an [‚ÄúConas a Re√°cht√°iltear T√°st√°lacha a Rial√∫‚Äù][rial√∫-conas-a-rithtear na t√°st√°lacha]<!-- neamhaird a dh√©anamh
--> alt.</p>
<p>Taispe√°nann an l√≠ne achoimre ag an deireadh: tr√≠d is tr√≠d, is √© toradh √°r dt√°st√°la <code>FAILED</code>. muid
bh√≠ pas t√°st√°la amh√°in agus teip t√°st√°la amh√°in.</p>
<p>Anois go bhfuil cuma thortha√≠ na dt√°st√°lacha i gc√°sanna √©ags√∫la feicthe agat,
Breathna√≠mid ar roinnt macra√≠ seachas <code>panic!</code> at√° √∫s√°ideach i dtrialacha.</p>
<h3 id="tortha√≠-√°-seice√°il-leis-an-macra-asert"><a class="header" href="#tortha√≠-√°-seice√°il-leis-an-macra-asert">Tortha√≠ √° Seice√°il leis an Macra <code>Asert!</code></a></h3>
<p>T√° an macra <code>assert!</code>, a shol√°thra√≠onn an leabharlann chaighde√°nach, √∫s√°ideach nuair is mian leat
chun a chinnti√∫ go meastar riocht √©igin i dt√°st√°il go <code>true</code>. Tugann muid an
macra <code>assert!</code> arg√≥int a dh√©anann meast√≥ireacht ar Boole. M√° t√° an luach
<code>true</code>, n√≠ tharla√≠onn aon rud agus √©ir√≠onn leis an t√°st√°il. M√°s <code>false</code> an luach, beidh an
Glaonn an macra ar <code>panic!</code> chun teip a chur ar an t√°st√°il. Ag baint √∫s√°ide as an <code>assert!</code>
Cuid√≠onn macra linn seice√°il go bhfuil √°r gc√≥d ag feidhmi√∫ ar an mbealach at√° beartaithe againn.</p>
<p>I gCaibidil 5, Liosta 5-15, d'√∫s√°ideamar strucht√∫r <code>Rectangle</code> agus <code>can_hold</code>
modh, a dh√©antar ar√≠s anseo i Liosta 11-5. Cuirimis an c√≥d seo sa
<em>src/lib.rs</em>, ansin scr√≠obh roinnt t√°st√°lacha d√≥ ag baint √∫s√°ide as an macra <code>assert!</code>.</p>
<Listing number="11-5" file-name="src/lib.rs" caption="The `Rectangle` struct and its `can_hold` method from Chapter 5">
<pre><code class="language-rust noplayground">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
        self.width &gt; other.width &amp;&amp; self.height &gt; other.height
    }
}</code></pre>
</Listing>
<p>Tugann an modh <code>can_hold</code> Boole ar ais, rud a chialla√≠onn gur c√°s √∫s√°ide foirfe √©
don mhacra <code>asert!</code>. I Liost√°il 11-6, scr√≠obhaimid triail a chleachtann an
modh <code>can_hold</code> tr√≠ shampla <code>Rectangle</code> a chruth√∫ a bhfuil leithead 8 agus
airde 7 agus ag ma√≠omh gur f√©idir leis sampla eile <code>Rectangle</code> a choinne√°il
t√° leithead 5 agus airde 1 aige.</p>
<Listing number="11-6" file-name="src/lib.rs" caption="A test for `can_hold` that checks whether a larger rectangle can indeed hold a smaller rectangle">
<pre><code class="language-rust noplayground"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Rectangle {
</span><span class="boring">    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
</span><span class="boring">        self.width &gt; other.width &amp;&amp; self.height &gt; other.height
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn larger_can_hold_smaller() {
        let larger = Rectangle {
            width: 8,
            height: 7,
        };
        let smaller = Rectangle {
            width: 5,
            height: 1,
        };

        assert!(larger.can_hold(&amp;smaller));
    }
}</code></pre>
</Listing>
<p>Tabhair faoi deara an l√≠ne <code>use super::*;</code> taobh istigh den mhod√∫l <code>tests</code>. Is √© an mod√∫l <code>tests</code>
mod√∫l rialta a leanann na gn√°thrialacha infheictheachta a chl√∫da√≠omar i gCaibidil
7 sa [‚ÄúCos√°in chun Tagairt a Dh√©anamh do Mh√≠r sa Mhod√∫l
Crann‚Äù][cos√°in-le-tagairt-go-m√≠r-sa-crann-mhod√∫il]<!-- neamhaird -->
alt. Toisc gur mod√∫l istigh √© an mod√∫l <code>tests</code>, caithfimid an
c√≥d faoi th√°st√°il sa mhod√∫l seachtrach isteach i raon feidhme an mhod√∫il istigh. √∫s√°idimid
glob anseo, mar sin t√° aon rud a shain√≠mid sa mhod√∫l seachtrach ar f√°il d√≥ seo
mod√∫l <code>tests</code>.</p>
<p>D‚Äôainmnigh muid √°r dt√°st√°il ‚Äòlarger_can_hold_smaller‚Äô, agus chrutha√≠omar an d√° cheann
C√°sanna <code>Rectangle</code> a theasta√≠onn uainn. Ansin thugamar an macra <code>assert!</code> agus
rith s√© mar thoradh ar ghlaoch ar <code>more.can_hold(&amp;smaller)</code>. T√° an abairt seo
ceaptha a thabhairt ar ais `` f√≠or, mar sin ba ch√≥ir √°r t√°st√°il pas a fh√°il. Faighimis amach!</p>
<pre><code class="language-console">$ cargo test
   Compiling rectangle v0.1.0 (file:///projects/rectangle)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.66s
     Running unittests src/lib.rs (target/debug/deps/rectangle-6584c4561e48942e)

running 1 test
test tests::larger_can_hold_smaller ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests rectangle

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Ritheann s√©! Cuirimis t√°st√°il eile leis, an uair seo √° dhearbh√∫ go bhfuil n√≠os l√∫
n√≠ f√©idir le dronuilleog dronuilleog n√≠os m√≥ a choinne√°il:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust noplayground"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Rectangle {
</span><span class="boring">    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
</span><span class="boring">        self.width &gt; other.width &amp;&amp; self.height &gt; other.height
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn larger_can_hold_smaller() {
        // --snip--
<span class="boring">        let larger = Rectangle {
</span><span class="boring">            width: 8,
</span><span class="boring">            height: 7,
</span><span class="boring">        };
</span><span class="boring">        let smaller = Rectangle {
</span><span class="boring">            width: 5,
</span><span class="boring">            height: 1,
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        assert!(larger.can_hold(&amp;smaller));
</span>    }

    #[test]
    fn smaller_cannot_hold_larger() {
        let larger = Rectangle {
            width: 8,
            height: 7,
        };
        let smaller = Rectangle {
            width: 5,
            height: 1,
        };

        assert!(!smaller.can_hold(&amp;larger));
    }
}</code></pre>
<p>Toisc go bhfuil toradh ceart na feidhme <code>can_hold</code> sa ch√°s seo <code>false</code>,
caithfimid an toradh sin a dhi√∫lt√∫ sula gcuirfimid ar aghaidh chuig an macra <code>assert!</code> √©. Mar a
Mar thoradh air sin, rithfidh √°r dt√°st√°il m√° fhilleann <code>can_hold</code> <code>false</code>:</p>
<pre><code class="language-console">$ cargo test
   Compiling rectangle v0.1.0 (file:///projects/rectangle)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.66s
     Running unittests src/lib.rs (target/debug/deps/rectangle-6584c4561e48942e)

running 2 tests
test tests::larger_can_hold_smaller ... ok
test tests::smaller_cannot_hold_larger ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests rectangle

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Dh√° th√°st√°il a √©ir√≠onn! Anois f√©achaimis cad a tharl√≥idh d√°r dtortha√≠ t√°st√°la nuair a dh√©anaimid
bug a thabhairt isteach in√°r gc√≥d. Athr√≥imid cur i bhfeidhm an <code>can_hold</code>
tr√≠ chomhartha n√≠os l√∫ n√° an comhartha a chur in ionad an chomhartha is m√≥ n√° √©
i gcompar√°id leis na leithead:</p>
<pre><code class="language-rust not_desired_behavior noplayground"><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Rectangle {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">}
</span><span class="boring">
</span>// --snip--
impl Rectangle {
    fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {
        self.width &lt; other.width &amp;&amp; self.height &gt; other.height
    }
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn larger_can_hold_smaller() {
</span><span class="boring">        let larger = Rectangle {
</span><span class="boring">            width: 8,
</span><span class="boring">            height: 7,
</span><span class="boring">        };
</span><span class="boring">        let smaller = Rectangle {
</span><span class="boring">            width: 5,
</span><span class="boring">            height: 1,
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        assert!(larger.can_hold(&amp;smaller));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn smaller_cannot_hold_larger() {
</span><span class="boring">        let larger = Rectangle {
</span><span class="boring">            width: 8,
</span><span class="boring">            height: 7,
</span><span class="boring">        };
</span><span class="boring">        let smaller = Rectangle {
</span><span class="boring">            width: 5,
</span><span class="boring">            height: 1,
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        assert!(!smaller.can_hold(&amp;larger));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>T√°irgeann rith na dtrialacha na nithe seo a leanas anois:</p>
<pre><code class="language-console">$ cargo test
   Compiling rectangle v0.1.0 (file:///projects/rectangle)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.66s
     Running unittests src/lib.rs (target/debug/deps/rectangle-6584c4561e48942e)

running 2 tests
test tests::larger_can_hold_smaller ... FAILED
test tests::smaller_cannot_hold_larger ... ok

failures:

---- tests::larger_can_hold_smaller stdout ----
thread 'tests::larger_can_hold_smaller' panicked at src/lib.rs:28:9:
assertion failed: larger.can_hold(&amp;smaller)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::larger_can_hold_smaller

test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Fuair ‚Äã‚Äã‚Äã‚Äã√°r t√°st√°lacha an fabht! Toisc go bhfuil <code>larger.width</code> <code>8</code> agus <code>smaller.width</code> is
<code>5</code>, filleann an chompar√°id idir na leithead in <code>can_hold</code> anois <code>false</code>: n√≠l 8
n√≠os l√∫ n√° 5.</p>
<h3 id="comhionannas-√°-th√°st√°il-leis-na-macra√≠-assert_eq-agus-assert_ne"><a class="header" href="#comhionannas-√°-th√°st√°il-leis-na-macra√≠-assert_eq-agus-assert_ne">Comhionannas √° Th√°st√°il leis na Macra√≠ <code>assert_eq!</code> agus <code>assert_ne!</code></a></h3>
<p>Bealach coiteann chun feidhmi√∫lacht a fh√≠or√∫ is ea t√°st√°il le haghaidh comhionannais idir an toradh
den ch√≥d at√° faoi th√°st√°il agus an luach a bhfuil s√∫il agat go dtabharfaidh an c√≥d ar ais. D'fh√©adf√°
D√©an √© seo tr√≠d an macra <code>assert!</code> a √∫s√°id agus slonn a chur air ag baint √∫s√°ide as an
<code>==</code> oibreoir. Mar sin f√©in, t√° s√© seo chomh coitianta go bhfuil an leabharlann caighde√°nach
sol√°thra√≠onn s√© p√©ire macra√≠ ‚Äî<code>assert_eq!</code> agus <code>assert_ne!</code>‚Äîchun an triail seo a dh√©anamh
n√≠os √°isi√∫la. D√©anann na macra√≠ seo compar√°id idir dh√° arg√≥int ar son comhionannais n√≥
√©agothroime, faoi seach. D√©anfaidh siad an d√° luach a phriont√°il freisin m√°s √© an dearbh√∫
theipeann, rud a fh√°gann gur fusa <em>why</em> theip ar an t√°st√°il a fheice√°il; a mhalairt, an
N√≠ thugann macra <code>assert!</code> le fios ach go bhfuair s√© luach <code>false</code> don <code>==</code>
l√©iri√∫, gan na luachanna ba ch√∫is leis an luach <code>false</code> a phriont√°il.</p>
<p>I Liost√∫ 11-7, scr√≠obhaimid feidhm darb ainm <code>add_two</code> a chuireann <code>2</code> lena
paraim√©adar, ansin d√©anaimid t√°st√°il ar an bhfeidhm seo ag baint √∫s√°ide as an macra <code>assert_eq!</code>.</p>
<Listing number="11-7" file-name="src/lib.rs" caption="Testing the function `add_two` using the `assert_eq!` macro">
<pre><code class="language-rust noplayground">pub fn add_two(a: usize) -&gt; usize {
    a + 2
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn it_adds_two() {
        let result = add_two(2);
        assert_eq!(result, 4);
    }
}</code></pre>
</Listing>
<p>D√©anaimis seice√°il go n-√©ir√≠onn leis!</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.58s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 1 test
test tests::it_adds_two ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Crutha√≠mid athr√≥g darb ainm <code>result</code> a choinn√≠onn toradh an ghlao
<code>add_two(2)</code>. Ansin cuirimid <code>result</code> agus <code>4</code> ar aghaidh mar na harg√≥int√≠ go <code>assert_eq!</code>.
Is √© an l√≠ne aschuir don triail seo n√° <code>test tests::it_adds_two ... ok</code>, agus an <code>ok</code>
t√©acs le fios go bhfuil √°r t√°st√°il a rith!</p>
<p>Cuirimis fabht isteach in√°r gc√≥d f√©achaint c√©n chuma at√° ar <code>assert_eq!</code> nuair at√° s√©
theipeann. Athraigh cur i bhfeidhm na feidhme <code>add_two</code> chun <code>3</code> a chur leis ina ionad sin:</p>
<pre><code class="language-rust not_desired_behavior noplayground">pub fn add_two(a: usize) -&gt; usize {
    a + 3
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn it_adds_two() {
</span><span class="boring">        let result = add_two(2);
</span><span class="boring">        assert_eq!(result, 4);
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>Rith na t√°st√°lacha ar√≠s:</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.61s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 1 test
test tests::it_adds_two ... FAILED

failures:

---- tests::it_adds_two stdout ----
thread 'tests::it_adds_two' panicked at src/lib.rs:12:9:
assertion `left == right` failed
  left: 5
 right: 4
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::it_adds_two

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Fuair ‚Äã‚Äã‚Äã‚Äã√°r dt√°st√°il an fabht! Theip ar an t√°st√°il <code>it_adds_two</code>, agus ins√≠onn an teachtaireacht
d√∫inn <code>assertion `left == right` failed</code> agus cad iad na luachanna <code>left</code> agus <code>right</code>
bhfuil. Cuid√≠onn an teachtaireacht seo linn t√∫s a chur le d√≠fhabhtaithe: an arg√≥int <code>left</code>, √°it a raibh againn
ba √© an toradh ar ghlaoch <code>add_two(2)</code>, n√° <code>5</code> ach ba √© <code>4</code> an arg√≥int <code>right</code>.
Is f√©idir leat a shamhl√∫ go mbeadh s√© seo cabhrach go h√°irithe nuair a bh√≠onn go leor againn
t√°st√°lacha ar si√∫l.</p>
<p>Tabhair faoi deara, i roinnt teangacha agus creata√≠ t√°st√°la, na paraim√©adair don chomhionannas
Tugtar <code>expected</code> agus <code>actual</code> ar fheidhmeanna dearbhaithe, agus an t-ord ina bhfuil
sonra√≠mid c√∫rsa√≠ na n-arg√≥int√≠. Mar sin f√©in, i Rust, tugtar <code>left</code> agus
<code>right</code>, agus an t-ord ina sonra√≠mid an luach a mbeimid ag s√∫il leis agus an luach
is cuma leis an gc√≥d a th√°irgtear. D‚Äôfh√©adfaimis an dearbh√∫ a scr√≠obh sa triail seo mar
<code>assert_eq!(4, result)</code>, rud a thabharfadh an teachtaireacht teipe c√©anna
a thaispe√°nann <code>assertion failed: `(left == right)`</code>.</p>
<p>Rachaidh an macra <code>assert_ne!</code> mura bhfuil an d√° luach a thugaimid d√≥ cothrom agus
teip m√° t√° siad comhionann. T√° an macra seo an-√∫s√°ideach i gc√°sanna nuair nach bhfuilimid cinnte
c√©n luach <em>will</em>, ach t√° a fhios againn cad √© an luach n√°r cheart a bheith.
Mar shampla, m√° t√°imid ag t√°st√°il feidhm at√° r√°thaithe a hionchur a athr√∫
ar bhealach √©igin, ach braitheann an bealach a athra√≠tear an t-ionchur ar an l√° de
an tseachtain a bhfuil √°r dtrialacha √° re√°cht√°il againn, b'fh√©idir gurb √© an rud is fearr le dearbh√∫ go bhfuil an
nach bhfuil aschur na feidhme comhionann leis an ionchur.</p>
<p>Faoin dromchla, √∫s√°ideann na macra√≠ <code>assert_eq!</code> agus <code>assert_ne!</code> na hoibreoir√≠
<code>==</code> agus <code>!=</code>, faoi seach. Nuair a theipeann ar na dearbhuithe, d√©anann na macra√≠ seo a gcuid
arg√≥int√≠ a √∫s√°ideann form√°idi√∫ d√≠fhabhtaithe, rud a chialla√≠onn go gcaithfidh na luachanna at√° √° gcur i gcompar√°id
na tr√©ithe <code>PartialEq</code> agus <code>Debug</code> a chur i bhfeidhm. Gach cine√°l primitive agus an chuid is m√≥ de
cuireann na gn√°thchine√°lacha leabharlainne na tr√©ithe seo i bhfeidhm. Le haghaidh strucht√∫ir agus enums go
a shain√≠onn t√∫ f√©in, beidh ort <code>PartialEq</code> a chur i bhfeidhm chun comhionannas a dhearbh√∫
na cine√°lacha sin. Beidh ort <code>Debug</code> a chur i bhfeidhm freisin chun na luachanna a phriont√°il nuair a bheidh an
theipeann ar dhearbh√∫. Toisc gur tr√©ithe d√≠orthaithe iad an d√° thr√©ith, mar a luadh i
Ag liost√∫ 5-12 i gCaibidil 5, b√≠onn s√© seo chomh simpl√≠ de ghn√°th le cur leis an
<code>#[derive(PartialEq, Debug)]</code> an√≥t√°il le do shainmh√≠ni√∫ strucht√∫r n√≥ enum. F√©ach
Aguis√≠n C, [‚ÄúTr√©ithe In-D√≠orthaithe,‚Äù][tr√©ithe derivable]<!-- neamhaird a dh√©anamh ar --> le haghaidh tuilleadh
sonra√≠ faoi na tr√©ithe seo agus tr√©ithe d√≠orthacha eile.</p>
<h3 id="teachtaireachta√≠-teip-saincheaptha-√°-gcur-leis"><a class="header" href="#teachtaireachta√≠-teip-saincheaptha-√°-gcur-leis">Teachtaireachta√≠ Teip Saincheaptha √° gcur leis</a></h3>
<p>Is f√©idir leat freisin teachtaireacht saincheaptha a phriont√°il leis an teachtaireacht teip mar
arg√≥int√≠ roghnacha leis na macra√≠ <code>assert!</code>, <code>assert_eq!</code>, agus <code>asert_ne!</code>. ar bith
arg√≥int√≠ a shonra√≠tear tar √©is na harg√≥int√≠ riachtanacha a chur ar aghaidh chuig an
macra <code>format!</code> (a pl√©adh i gCaibidil 8 sa [‚ÄúConcatenation with the <code>+</code>
Oibreoir n√≥ an <code>format!</code>
Macra‚Äù][concatenation-with-the--operator-n√≥-an-format-macra]<!-- neamhaird -->
alt), ionas gur f√©idir leat teaghr√°n form√°ide a chur ar aghaidh ina bhfuil sealbh√≥ir√≠ √°itribh <code>{}</code> agus
luachanna le dul sna h√°itsealbh√≥ir√≠ sin. T√° teachtaireachta√≠ saincheaptha √∫s√°ideach le doicim√©ad√∫
cad is br√≠ le dearbh√∫; nuair a theipeann ar th√°st√°il, beidh tuiscint n√≠os fearr agat ar cad √©
Is √≠ an fhadhb leis an gc√≥d.</p>
<p>Mar shampla, d√©arfaimis go bhfuil feidhm againn a thugann beann√∫ do dhaoine de r√©ir ainm agus muid
ag iarraidh a th√°st√°il go bhfuil an t-ainm a chuirimid isteach san fheidhm le feice√°il san aschur:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust noplayground">pub fn greeting(name: &amp;str) -&gt; String {
    format!("Hello {name}!")
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn greeting_contains_name() {
        let result = greeting("Carol");
        assert!(result.contains("Carol"));
    }
}</code></pre>
<p>N√≠l na riachtanais don chl√°r seo aontaithe go f√≥ill, agus t√°imid
cinnte go n-athr√≥far an t√©acs <code>Hello</code> ag t√∫s na Beannachta. muid
chinn nach dteasta√≠onn uainn go mbeadh orainn an t√°st√°il a nuashonr√∫ nuair a athra√≠onn na riachtanais,
mar sin in ionad a sheice√°il le haghaidh comhionannais beacht leis an luach ar ais √≥ na
feidhm <code>greeting</code>, n√≠ dh√©anfaidh muid ach dearbh√∫ go bhfuil t√©acs an
paraim√©adar ionchuir.</p>
<p>Anois cuirimis fabht isteach sa ch√≥d seo tr√≠ <code>greeting</code> a athr√∫ chun eisiamh
<code>name</code> chun a fheice√°il c√©n chuma at√° ar an teip t√°st√°la r√©amhshocraithe:</p>
<pre><code class="language-rust not_desired_behavior noplayground">pub fn greeting(name: &amp;str) -&gt; String {
    String::from("Hello!")
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn greeting_contains_name() {
</span><span class="boring">        let result = greeting("Carol");
</span><span class="boring">        assert!(result.contains("Carol"));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>T√°irgeann an t√°st√°il seo a leanas:</p>
<pre><code class="language-console">$ cargo test
   Compiling greeter v0.1.0 (file:///projects/greeter)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.91s
     Running unittests src/lib.rs (target/debug/deps/greeter-170b942eb5bf5e3a)

running 1 test
test tests::greeting_contains_name ... FAILED

failures:

---- tests::greeting_contains_name stdout ----
thread 'tests::greeting_contains_name' panicked at src/lib.rs:12:9:
assertion failed: result.contains("Carol")
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::greeting_contains_name

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Tugann an toradh seo le fios gur theip ar an dearbh√∫ agus c√©n l√≠ne an
t√° dearbh√∫ ar si√∫l. Dh√©anfadh teachtaireacht teip n√≠os √∫s√°id√≠ an luach a phriont√°il √≥n
feidhm <code>greeting</code>. Cuirimis teachtaireacht teipe saincheaptha leis comhdh√©anta d‚Äôfhorm√°id
teaghr√°n le √°itshealbh√≥ir l√≠onta isteach leis an luach iarbh√≠r a fuaireamar √≥n
feidhm <code>greeting</code>:</p>
<pre><code class="language-rust ignore"><span class="boring">pub fn greeting(name: &amp;str) -&gt; String {
</span><span class="boring">    String::from("Hello!")
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span>    #[test]
    fn greeting_contains_name() {
        let result = greeting("Carol");
        assert!(
            result.contains("Carol"),
            "Greeting did not contain name, value was `{result}`"
        );
    }
<span class="boring">}</span></code></pre>
<p>Anois agus an t√°st√°il √° rith againn, gheobhaidh muid teachtaireacht earr√°ide n√≠os faisn√©iseach:</p>
<pre><code class="language-console">$ cargo test
   Compiling greeter v0.1.0 (file:///projects/greeter)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.93s
     Running unittests src/lib.rs (target/debug/deps/greeter-170b942eb5bf5e3a)

running 1 test
test tests::greeting_contains_name ... FAILED

failures:

---- tests::greeting_contains_name stdout ----
thread 'tests::greeting_contains_name' panicked at src/lib.rs:12:9:
Greeting did not contain name, value was `Hello!`
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::greeting_contains_name

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Is f√©idir linn an luach a fuaireamar i nd√°ir√≠re san aschur t√°st√°la a fheice√°il, rud a chabhr√≥dh linn
debug cad a tharla in ionad an m√©id a bh√≠ muid ag s√∫il a tharl√≥idh.</p>
<h3 id="ag-seice√°il-le-haghaidh-panics-le-should_panic"><a class="header" href="#ag-seice√°il-le-haghaidh-panics-le-should_panic">Ag seice√°il le haghaidh Panics le <code>should_panic</code></a></h3>
<p>Chomh maith le luachanna fillte a sheice√°il, t√° s√© t√°bhachtach a sheice√°il go bhfuil √°r gc√≥d
l√°imhse√°lann s√© coinn√≠ollacha earr√°ide agus muid ag s√∫il leis. Mar shampla, smaoinigh ar an gcine√°l <code>Guess</code>
a chrutha√≠omar i gCaibidil 9, Liosta 9-13. C√≥d eile a √∫s√°ideann <code>Guess</code>
ag brath ar an r√°tha√≠ocht nach mbeidh ach luachanna sna c√°sanna <code>Guess</code>
idir 1 agus 100. Is f√©idir linn triail a scr√≠obh a chinnt√≠onn go nd√©anfar iarracht a dh√©anamh a
<code>Guess</code> shampla le luach lasmuigh den raon scaoll.</p>
<p>D√©anaimid √© seo tr√≠d an tr√©ith <code>should_panic</code> a chur len√°r bhfeidhm t√°st√°la. T√° an
Gabhann t√°st√°il m√° t√° an c√≥d laistigh den fheidhm scaoll; theipeann ar an t√°st√°il m√° t√° an c√≥d
taobh istigh den fheidhm n√≠ scaoll.</p>
<p>L√©ir√≠onn liost√∫ 11-8 t√°st√°il a sheice√°lann go dtarla√≠onn coinn√≠ollacha earr√°ide <code>Guess::new</code>
nuair a mbeimid ag s√∫il leo.</p>
<Listing number="11-8" file-name="src/lib.rs" caption="Testing that a condition will cause a `panic!`">
<pre><code class="language-rust noplayground">pub struct Guess {
    value: i32,
}

impl Guess {
    pub fn new(value: i32) -&gt; Guess {
        if value &lt; 1 || value &gt; 100 {
            panic!("Guess value must be between 1 and 100, got {value}.");
        }

        Guess { value }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    #[should_panic]
    fn greater_than_100() {
        Guess::new(200);
    }
}</code></pre>
</Listing>
<p>Cuirimid an aitreab√∫id <code>#[should_panic]</code> tar √©is an aitreab√∫id <code>#[test]</code> agus
roimh an fheidhm t√°st√°la a mbaineann s√© l√©i. Breathna√≠mid ar an toradh nuair a bheidh an t√°st√°il seo
Gabhann:</p>
<pre><code class="language-console">$ cargo test
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.58s
     Running unittests src/lib.rs (target/debug/deps/guessing_game-57d70c3acb738f4d)

running 1 test
test tests::greater_than_100 - should panic ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests guessing_game

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Breathna√≠onn go maith! Anois tugaimid fabht isteach in√°r gc√≥d tr√≠d an riocht a bhaint
go rachaidh an fheidhm <code>new</code> i scaoll m√° t√° an luach n√≠os m√≥ n√° 100:</p>
<pre><code class="language-rust not_desired_behavior noplayground"><span class="boring">pub struct Guess {
</span><span class="boring">    value: i32,
</span><span class="boring">}
</span><span class="boring">
</span>// --snip--
impl Guess {
    pub fn new(value: i32) -&gt; Guess {
        if value &lt; 1 {
            panic!("Guess value must be between 1 and 100, got {value}.");
        }

        Guess { value }
    }
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    #[should_panic]
</span><span class="boring">    fn greater_than_100() {
</span><span class="boring">        Guess::new(200);
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>Nuair a rithfimid an t√°st√°il i Liost√∫ 11-8, teipfidh uirthi:</p>
<pre><code class="language-console">$ cargo test
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.62s
     Running unittests src/lib.rs (target/debug/deps/guessing_game-57d70c3acb738f4d)

running 1 test
test tests::greater_than_100 - should panic ... FAILED

failures:

---- tests::greater_than_100 stdout ----
note: test did not panic as expected

failures:
    tests::greater_than_100

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>N√≠ fhaighimid teachtaireacht an-chabhrach sa ch√°s seo, ach nuair a fh√©achaimid ar an triail
fheidhm, feicimid go bhfuil s√© an√≥t√°ilte le <code>#[should_panic]</code>. An teip a fuair muid
Cialla√≠onn s√© sin nach raibh an c√≥d san fheidhm t√°st√°la ina ch√∫is le scaoll.</p>
<p>Is f√©idir le t√°st√°lacha a √∫s√°ideann <code>should_panic</code> a bheith neamhchruinn. Dh√©anfadh t√°st√°il <code>should_panic</code>
pas a fh√°il fi√∫ m√° t√° an scaoll t√°st√°la ar ch√∫is eile √≥n gceann a bh√≠ muid
ag s√∫il. Chun t√°st√°lacha <code>should_panic</code> a dh√©anamh n√≠os cruinne, is f√©idir linn rogha roghnach a chur leis
paraim√©adar <code>expected</code> don aitreab√∫id <code>should_panic</code>. D√©anfaidh an √∫im t√°st√°la
d√©an cinnte go bhfuil an t√©acs curtha ar f√°il sa teachtaireacht teip. Mar shampla,
smaoinigh ar an gc√≥d modhnaithe do <code>Guess</code> i Liost√∫ 11-9 mar a bhfuil an fheidhm <code>new</code>
panics le teachtaireachta√≠ √©ags√∫la ag brath ar cib√© an bhfuil an luach r√≥-bheag n√≥
r√≥-mh√≥r.</p>
<Listing number="11-9" file-name="src/lib.rs" caption="Testing for a `panic!` with a panic message containing a specified substring">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Guess {
</span><span class="boring">    value: i32,
</span><span class="boring">}
</span><span class="boring">
</span>// --snip--

impl Guess {
    pub fn new(value: i32) -&gt; Guess {
        if value &lt; 1 {
            panic!(
                "Guess value must be greater than or equal to 1, got {value}."
            );
        } else if value &gt; 100 {
            panic!(
                "Guess value must be less than or equal to 100, got {value}."
            );
        }

        Guess { value }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    #[should_panic(expected = "less than or equal to 100")]
    fn greater_than_100() {
        Guess::new(200);
    }
}</code></pre>
</Listing>
<p>Rachaidh an t√°st√°il seo thar mar gheall ar an luach a chuireamar san aitreab√∫id <code>should_panic</code>''s
Fotheaghr√°n is ea an paraim√©adar <code>expected</code> den teachtaireacht a thugann an <code>Guess::new</code>
scaoll feidhm le . D'fh√©adfaimis an teachtaireacht scaoll ioml√°n a shonraigh muid
ag s√∫il leis, a bheadh ‚Äã‚Äãsa ch√°s seo a bheith <code>Guess value must be less than or equal to 100, got 200</code>. Braitheann an m√©id a roghna√≠onn t√∫ a shonr√∫ ar c√© mh√©ad den scaoll
t√° an teachtaireacht uath√∫il n√≥ dinimici√∫il agus c√© chomh beacht is mian leat do th√°st√°il a bheith. I seo
c√°s, t√° fotheideal den teachtaireacht scaoll go leor chun a chinnti√∫ go bhfuil an c√≥d sa
feidhm√≠onn an fheidhm t√°st√°la an c√°s <code>else if value &gt; 100</code>.</p>
<p>F√©ach cad a tharla√≠onn nuair a th√°st√°il <code>should_panic</code> le teachtaireacht <code>expected</code>
theipeann, cuirimis fabht isteach in√°r gc√≥d ar√≠s tr√≠ chorp√°in an
<code>if value &lt; 1</code> agus na bloic <code>else if value &gt; 100</code>:</p>
<pre><code class="language-rust ignore not_desired_behavior"><span class="boring">pub struct Guess {
</span><span class="boring">    value: i32,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Guess {
</span><span class="boring">    pub fn new(value: i32) -&gt; Guess {
</span>        if value &lt; 1 {
            panic!(
                "Guess value must be less than or equal to 100, got {value}."
            );
        } else if value &gt; 100 {
            panic!(
                "Guess value must be greater than or equal to 1, got {value}."
            );
        }
<span class="boring">
</span><span class="boring">        Guess { value }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    #[should_panic(expected = "less than or equal to 100")]
</span><span class="boring">    fn greater_than_100() {
</span><span class="boring">        Guess::new(200);
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>An uair seo nuair a ritheann muid an t√°st√°il <code>should_panic</code>, teipfidh s√©:</p>
<pre><code class="language-console">$ cargo test
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.66s
     Running unittests src/lib.rs (target/debug/deps/guessing_game-57d70c3acb738f4d)

running 1 test
test tests::greater_than_100 - should panic ... FAILED

failures:

---- tests::greater_than_100 stdout ----
thread 'tests::greater_than_100' panicked at src/lib.rs:12:13:
Guess value must be greater than or equal to 1, got 200.
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
note: panic did not contain expected string
      panic message: `"Guess value must be greater than or equal to 1, got 200."`,
 expected substring: `"less than or equal to 100"`

failures:
    tests::greater_than_100

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Tugann an teachtaireacht teip le fios go ndearna an t√°st√°il seo scaoll go deimhin agus muid ag s√∫il leis,
ach n√≠or chuimsigh an teachtaireacht scaoill an teaghr√°n ionchais <code>n√≠os l√∫ n√° n√≥ cothrom go dt√≠ 100</code>. Ba √© an teachtaireacht scaoll a fuair muid sa ch√°s seo n√° <code>Guess value must a bheith n√≠os m√≥ n√° n√≥ cothrom le 1, fuair 200.</code> Anois is f√©idir linn tos√∫ figuring amach c√©n √°it
Is √© √°r fabht!</p>
<h3 id="ag-baint-√∫s√°ide-as-resultt-e-i-dtrialacha"><a class="header" href="#ag-baint-√∫s√°ide-as-resultt-e-i-dtrialacha">Ag baint √∫s√°ide as <code>Result&lt;T, E&gt;</code> i dTrialacha</a></h3>
<p>√År t√°st√°lacha go dt√≠ seo go l√©ir scaoll nuair a theipeann orthu. Is f√©idir linn t√°st√°lacha a scr√≠obh freisin a √∫s√°ideann
<code>Result&lt;T, E&gt;</code>! Seo an t√°st√°il √≥ Liost√∫ 11-1, athscr√≠ofa chun <code>Result&lt;T, E&gt;</code> agus seol ar ais <code>Err</code> in ionad scaoll a dh√©anamh:</p>
<pre><code class="language-rust noplayground"><span class="boring">pub fn add(left: u64, right: u64) -&gt; u64 {
</span><span class="boring">    left + right
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span>    #[test]
    fn it_works() -&gt; Result&lt;(), String&gt; {
        let result = add(2, 2);

        if result == 4 {
            Ok(())
        } else {
            Err(String::from("two plus two does not equal four"))
        }
    }
<span class="boring">}</span></code></pre>
<p>T√° an cine√°l tuairisce√°in <code>Result&lt;(), String&gt;</code> anois ag an bhfeidhm <code>it_works</code>. Sna
comhlacht na feidhme, seachas glaoch ar an <code>assert_eq!</code> macra, t√°imid ar ais
<code>Ok(())</code> nuair a √©ir√≠onn leis an triail agus <code>Err</code> le <code>String</code> istigh nuair a bheidh an t√°st√°il
theipeann.</p>
<p>Trialacha a scr√≠obh ionas go dtabharfaidh siad <code>Result&lt;T, E&gt;</code> ar do chumas an cheist a √∫s√°id
oibreoir marc i gcorp na t√°st√°lacha, is f√©idir a bheith ina bhealach √°isi√∫il a scr√≠obh
t√°st√°lacha ba cheart a theipeann orthu m√° thugann oibr√≠ocht ar bith laistigh d√≠obh leagan <code>Err</code> ar ais.</p>
<p>N√≠ f√©idir leat an n√≥ta <code>#[should_panic]</code> a √∫s√°id ar th√°st√°lacha a √∫s√°ideann <code>Result&lt;T, E&gt;</code>. Chun a dhearbh√∫ go dtugann oibr√≠ocht athr√≥g <code>Err</code> ar ais, <em>n√°</em> h√∫s√°id an
oibreoir comhartha ceiste ar an luach <code>Result&lt;T, E&gt;</code>. Ina √°it sin, bain √∫s√°id as
<code>assert!(value.is_err())</code>.</p>
<p>Anois go bhfuil roinnt beala√≠ ar eolas agat chun trialacha a scr√≠obh, f√©achaimis ar a bhfuil ag tarl√∫
nuair a rithimid √°r dtrialacha agus nuair a dh√©anaimid ini√∫chadh ar na roghanna √©ags√∫la is f√©idir linn a √∫s√°id le <code>cargo test</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="conas-a-re√°cht√°iltear-t√°st√°lacha-a-rial√∫"><a class="header" href="#conas-a-re√°cht√°iltear-t√°st√°lacha-a-rial√∫">Conas a Re√°cht√°iltear T√°st√°lacha a Rial√∫</a></h2>
<p>D√≠reach mar a thiomsa√≠onn <code>cargo run</code> do ch√≥d agus ansin ritheann s√© an d√©n√°rtha iarmhartach,
Tiomsa√≠onn <code>cargo test</code> do ch√≥d sa mh√≥d t√°st√°la agus ritheann s√© an t√°st√°il iarmhartach
dh√©n√°rtha. Is √© iompar r√©amhshocraithe an dh√©n√°rtha a th√°irgtear le <code>cargo test</code> a rith
na t√°st√°lacha go l√©ir go comhthreomhar agus an t-aschur gabh√°la a ghintear le linn rit√≠ t√°st√°la,
an t-aschur a chosc √≥ bheith ar taispe√°int agus √© a dh√©anamh n√≠os √©asca an t-aschur a l√©amh
aschur a bhaineann leis na tortha√≠ t√°st√°la. Is f√©idir leat, √°fach, ord√∫ a shonr√∫
roghanna chun an t-iompar r√©amhshocraithe seo a athr√∫.</p>
<p>T√©ann roinnt roghanna na n-orduithe chuig <code>cargo test</code>, agus t√©ann cuid acu chuig an t√°st√°il iarmhartach
dh√©n√°rtha. Chun an d√° chine√°l arg√≥int√≠ seo a scaradh, liosta√≠onn t√∫ na harg√≥int√≠ sin
t√©igh go dt√≠ <code>cargo test</code> agus ansin an deighilteoir <code>--</code> agus ansin na cinn a th√©ann go dt√≠
an d√©n√°rtha t√°st√°la. Agus <code>cargo test --help</code> √° rith, taispe√°ntar na roghanna is f√©idir leat a √∫s√°id
le <code>cargo test</code>, agus ag rith <code>cargo test -- --help</code> taispe√°ntar na roghanna at√° agat
Is f√©idir √∫s√°id a bhaint as tar √©is an deighilteoir. D√©antar na roghanna sin a dhoicim√©ad√∫ freisin i atlt <a href="https://doc.rust-lang.org/rustc/tests/index.html">na ‚ÄúT√°st√°lacha‚Äù</a> den <a href="https://doc.rust-lang.org/rustc/index.html">leabhar rustc</a>.</p>
<h3 id="trialacha-a-re√°cht√°il-go-comhuaineach-n√≥-i-ndiaidh-a-ch√©ile"><a class="header" href="#trialacha-a-re√°cht√°il-go-comhuaineach-n√≥-i-ndiaidh-a-ch√©ile">Trialacha a Re√°cht√°il go Comhuaineach n√≥ i ndiaidh a ch√©ile</a></h3>
<p>Nuair a ritheann t√∫ t√°st√°lacha iolracha, de r√©ir r√©amhshocraithe ritheann siad go comhthreomhar ag baint √∫s√°ide as sn√°itheanna,
rud a chialla√≠onn go gcr√≠ochna√≠onn siad ag rith n√≠os tap√∫la agus go bhfaigheann t√∫ aiseolas n√≠os tap√∫la. Toisc go bhfuil an
t√° t√°st√°lacha ar si√∫l ag an am c√©anna, n√≠ m√≥r duit a chinnti√∫ nach mbraitheann do th√°st√°lacha
ar a ch√©ile n√≥ ar aon st√°t comhroinnte, lena n-√°ir√≠tear timpeallacht chomhroinnte, mar shampla
an t-eolaire oibre reatha n√≥ na hathr√≥ga timpeallachta.</p>
<p>Mar shampla, abair go ritheann gach ceann de do th√°st√°lacha c√≥d √©igin a chrutha√≠onn comhad ar diosca
ainmnithe <em>test-output.txt</em> agus scr√≠obhann s√© roinnt sonra√≠ chuig an gcomhad sin. Ansin l√©ann gach t√°st√°il
na sonra√≠ sa chomhad sin agus dearbha√≠onn s√© go bhfuil luach √°irithe sa chomhad,
at√° difri√∫il i ngach t√°st√°il. Toisc go ritheann na t√°st√°lacha ag an am c√©anna, ceann amh√°in
d'fh√©adfadh an t√°st√°il an comhad a fhorscr√≠obh san am idir triail eile a scr√≠obh agus
ag l√©amh an chomhaid. Beidh an dara t√°st√°il theipeann ansin, n√≠ toisc go bhfuil an c√≥d
m√≠cheart ach toisc gur chuir na t√°st√°lacha isteach ar a ch√©ile agus iad ar si√∫l
i gcomhthreo. R√©iteach amh√°in is ea a chinnti√∫ go scr√≠obhann gach t√°st√°il chuig comhad eile;
r√©iteach eile is ea na t√°st√°lacha a rith ceann i ndiaidh a ch√©ile.</p>
<p>M√°s rud √© nach bhfuil t√∫ ag iarraidh na t√°st√°lacha a re√°cht√°il ag an am c√©anna n√≥ m√°s mian leat n√≠os m√≠ne
smacht a fh√°il ar l√≠on na sn√°itheanna a √∫s√°idtear, is f√©idir leat an bhratach <code>--test-threads</code> a sheoladh
agus l√≠on na sn√°itheanna is mian leat a √∫s√°id don d√©n√°rtha t√°st√°la. F√©ach ar
an sampla seo a leanas:</p>
<pre><code class="language-console">$ cargo test -- --test-threads=1
</code></pre>
<p>Shocraigh muid l√≠on na sn√°itheanna t√°st√°la go <code>1</code>, ag r√° leis an gcl√°r gan √∫s√°id a bhaint as
comhthreomhaireacht. T√≥gfaidh s√© n√≠os m√≥ ama n√° rith na t√°st√°lacha ag baint √∫s√°ide as sn√°ithe amh√°in
iad ag an am c√©anna, ach n√≠ chuirfidh na t√°st√°lacha isteach ar a ch√©ile m√° roinneann siad
st√°it.</p>
<h3 id="aschur-feidhme-√°-thaispe√°int"><a class="header" href="#aschur-feidhme-√°-thaispe√°int">Aschur Feidhme √° Thaispe√°int</a></h3>
<p>De r√©ir r√©amhshocraithe, m√° √©ir√≠onn le t√°st√°il, gabhann leabharlann t√°st√°la Rust aon rud a phriont√°iltear chuige
aschur caighde√°nach. Mar shampla, m√° thugaimid <code>println!</code> i dt√°st√°il agus sa triail
Gabhann, n√≠ fheicfimid an t-aschur <code>println!</code> sa teirmin√©al; n√≠ fheicfimid ach an
l√≠ne a l√©ir√≠onn an t√°st√°il a ritheadh. M√° theipeann ar th√°st√°il, feicfimid cib√© rud a bh√≠ ann
cl√≥ite go dt√≠ aschur caighde√°nach leis an gcuid eile den teachtaireacht teip.</p>
<p>Mar shampla, t√° feidhm amaideach ag Liost√∫ 11-10 a phrionna√≠onn luach a chuid
paraim√©adar agus tuairisce√°in 10, chomh maith le t√°st√°il a √©ir√≠onn agus t√°st√°il a theipeann.</p>
<Listing number="11-10" file-name="src/lib.rs" caption="Tests for a function that calls `println!`">
<pre><code class="language-rust panics noplayground">fn prints_and_returns_10(a: i32) -&gt; i32 {
    println!("I got the value {a}");
    10
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn this_test_will_pass() {
        let value = prints_and_returns_10(4);
        assert_eq!(value, 10);
    }

    #[test]
    fn this_test_will_fail() {
        let value = prints_and_returns_10(8);
        assert_eq!(value, 5);
    }
}</code></pre>
</Listing>
<p>Nuair a dh√©anaimid na t√°st√°lacha seo le <code>cargo test</code>, feicfidh muid an t-aschur seo a leanas:</p>
<pre><code class="language-console">$ cargo test
   Compiling silly-function v0.1.0 (file:///projects/silly-function)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.58s
     Running unittests src/lib.rs (target/debug/deps/silly_function-160869f38cff9166)

running 2 tests
test tests::this_test_will_fail ... FAILED
test tests::this_test_will_pass ... ok

failures:

---- tests::this_test_will_fail stdout ----
I got the value 8
thread 'tests::this_test_will_fail' panicked at src/lib.rs:19:9:
assertion `left == right` failed
  left: 10
 right: 5
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::this_test_will_fail

test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Tabhair faoi deara nach bhfeicimid <code>I got the value 4</code>, mar at√°
priont√°ilte nuair a ritheann an t√°st√°il a ritheann. T√° an t-aschur sin gafa. T√° an
aschur √≥n t√°st√°il ar theip air, <code>I got the value 8</code>, le feice√°il sa chuid
den aschur achoimre t√°st√°la, a l√©ir√≠onn freisin c√∫is an teip t√°st√°la.</p>
<p>M√°s mian linn luachanna cl√≥ite a fheice√°il chun t√°st√°lacha a rith freisin, is f√©idir linn a r√° le Rust
taispe√°in freisin aschur na dt√°st√°lacha rath√∫la le <code>--show-output</code>:</p>
<pre><code class="language-console">$ cargo test -- --show-output
</code></pre>
<p>Nuair a rithimid na t√°st√°lacha i Liost√∫ 11-10 ar√≠s leis an mbratach <code>--show-output</code>, d√©anaimid
f√©ach an t-aschur seo a leanas:</p>
<pre><code class="language-console">$ cargo test -- --show-output
   Compiling silly-function v0.1.0 (file:///projects/silly-function)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.60s
     Running unittests src/lib.rs (target/debug/deps/silly_function-160869f38cff9166)

running 2 tests
test tests::this_test_will_fail ... FAILED
test tests::this_test_will_pass ... ok

successes:

---- tests::this_test_will_pass stdout ----
I got the value 4


successes:
    tests::this_test_will_pass

failures:

---- tests::this_test_will_fail stdout ----
I got the value 8
thread 'tests::this_test_will_fail' panicked at src/lib.rs:19:9:
assertion `left == right` failed
  left: 10
 right: 5
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::this_test_will_fail

test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<h3 id="fothacar-trialacha-a-re√°cht√°il-de-r√©ir-ainm"><a class="header" href="#fothacar-trialacha-a-re√°cht√°il-de-r√©ir-ainm">Fothacar Trialacha a Re√°cht√°il de r√©ir Ainm</a></h3>
<p>Uaireanta, f√©adann s√© go leor ama sraith t√°st√°la ioml√°n a rith. M√° t√° t√∫ ag obair ar
c√≥d i r√©imse ar leith, b'fh√©idir gur mhaith leat a re√°cht√°il ach na t√°st√°lacha a bhaineann leis
an c√≥d sin. Is f√©idir leat na t√°st√°lacha at√° le d√©anamh a roghn√∫ ach an t-ainm <code>cargo test</code> a chur
n√≥ ainmneacha na dtrialacha n√≥ na dtrialacha ar mhaith leat a rith mar arg√≥int.</p>
<p>Chun a l√©iri√∫ conas fo-thacar t√°st√°lacha a rith, cruth√≥imid tr√≠ th√°st√°il ar dt√∫s
√°r bhfeidhm <code>add_two</code>, mar a thaispe√°ntar i Liost√∫ 11-11, agus roghnaigh na cinn le rith.</p>
<Listing number="11-11" file-name="src/lib.rs" caption="Three tests with three different names">
<pre><code class="language-rust noplayground">pub fn add_two(a: usize) -&gt; usize {
    a + 2
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn add_two_and_two() {
        let result = add_two(2);
        assert_eq!(result, 4);
    }

    #[test]
    fn add_three_and_two() {
        let result = add_two(3);
        assert_eq!(result, 5);
    }

    #[test]
    fn one_hundred() {
        let result = add_two(100);
        assert_eq!(result, 102);
    }
}</code></pre>
</Listing>
<p>M√° ritheann muid na t√°st√°lacha gan dul thar aon arg√≥int√≠, mar a chonaic muid n√≠os luaithe, go l√©ir an
beidh t√°st√°lacha ar si√∫l ag an am c√©anna:</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.62s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 3 tests
test tests::add_three_and_two ... ok
test tests::add_two_and_two ... ok
test tests::one_hundred ... ok

test result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<h4 id="trialacha-aonair-a-rith"><a class="header" href="#trialacha-aonair-a-rith">Trialacha Aonair a Rith</a></h4>
<p>Is f√©idir linn ainm aon fheidhme t√°st√°la a chur ar aghaidh chuig <code>cargo test</code> chun an t√°st√°il sin amh√°in a rith:</p>
<pre><code class="language-console">$ cargo test one_hundred
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.69s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 1 test
test tests::one_hundred ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 0.00s

</code></pre>
<p>N√≠or rith ach an triail leis an ainm <code>one_hundred</code>; n√≠or mheaitse√°il an d√° th√°st√°il eile
an t-ainm sin. Cuireann an t-aschur t√°st√°la in i√∫l d√∫inn go raibh n√≠os m√≥ t√°st√°lacha againn n√°r rith leo
ag taispe√°int <code>2 filtered out</code>  ag an deireadh.</p>
<p>N√≠ f√©idir linn ainmneacha t√°st√°lacha iolracha a shonr√∫ ar an mbealach seo; ach an ch√©ad luach
a thugtar do <code>cargo test</code> √∫s√°idfear √©. Ach t√° bealach ann chun t√°st√°lacha iolracha a rith.</p>
<h4 id="scagadh-chun-ilth√°st√°lacha-a-rith"><a class="header" href="#scagadh-chun-ilth√°st√°lacha-a-rith">Scagadh chun Ilth√°st√°lacha a Rith</a></h4>
<p>Is f√©idir linn cuid d'ainm t√°st√°la a shonr√∫, agus aon t√°st√°il a bhfuil a ainm ag teacht leis an luach sin
re√°cht√°lfar. Mar shampla, toisc go bhfuil <code>add</code> in dh√° cheann d√°r dt√°st√°lacha, is f√©idir linn
rith an d√° cheann sin tr√≠ <code>cargo test add</code> a rith:</p>
<pre><code class="language-console">$ cargo test add
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.61s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 2 tests
test tests::add_three_and_two ... ok
test tests::add_two_and_two ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out; finished in 0.00s

</code></pre>
<p>Rith an t-ord√∫ seo gach t√°st√°il le <code>add</code> san ainm agus scagadh amach an triail
darb ainm <code>one_hundred</code>. Tabhair faoi deara freisin go n-√©ir√≠onn an mod√∫l ina dtaispe√°ntar t√°st√°il
chuid d‚Äôainm na t√°st√°la, ionas gur f√©idir linn na t√°st√°lacha go l√©ir a rith i mod√∫l tr√≠ scagadh
ar ainm an mhod√∫il.</p>
<h3 id="neamhaird-a-thabhairt-ar-roinnt-trialacha-mura-niarratar-go-sonrach"><a class="header" href="#neamhaird-a-thabhairt-ar-roinnt-trialacha-mura-niarratar-go-sonrach">Neamhaird a thabhairt ar Roinnt Trialacha Mura nIarratar Go Sonrach</a></h3>
<p>Uaireanta is f√©idir le roinnt t√°st√°lacha sonracha a bheith an-am-√≠ditheach a fhorghn√≠omh√∫, mar sin leat
b'fh√©idir gur mhaith leo iad a eisiamh le linn an chuid is m√≥ de na <code>cargo test</code>. Seachas
liost√∫ mar arg√≥int√≠ na t√°st√°lacha go l√©ir ar mhaith leat a rith, is f√©idir leat an n√≥ta a chur ina ionad sin
t√°st√°lacha am-√≠deacha ag baint √∫s√°ide as an aitreab√∫id <code>ignore</code> chun iad a eisiamh, mar a thaispe√°ntar
anseo:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust noplayground"><span class="boring">pub fn add(left: u64, right: u64) -&gt; u64 {
</span><span class="boring">    left + right
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn it_works() {
        let result = add(2, 2);
        assert_eq!(result, 4);
    }

    #[test]
    #[ignore]
    fn expensive_test() {
        // code that takes an hour to run
    }
}</code></pre>
<p>Tar √©is <code>#[test]</code>, cuirimid an l√≠ne <code>#[ignore]</code> leis an t√°st√°il ba mhaith linn a eisiamh.
Anois agus √°r dt√°st√°lacha √° re√°cht√°il againn, ritheann <code>it_works</code>, ach n√≠ dh√©anann <code>expensive_test</code>:</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.60s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 2 tests
test tests::expensive_test ... ignored
test tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>T√° an fheidhm <code>expensive_test</code> liostaithe mar <code>ignored</code>. M√°s mian linn a rith amh√°in
na t√°st√°lacha a ndearnadh neamhaird orthu, is f√©idir linn <code>cargo test -- --ignored</code> a √∫s√°id:</p>
<pre><code class="language-console">$ cargo test -- --ignored
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.61s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 1 test
test expensive_test ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Tr√≠ na t√°st√°lacha a ritheann a rial√∫, is f√©idir leat a chinnti√∫ go mb√≠onn do thortha√≠ <code>cargo test</code>
cuirfear ar ais go tapa √©. Nuair a bh√≠onn t√∫ ag pointe a bhfuil ciall agat seice√°il
tortha√≠ na dtrialacha <code>ignored</code> agus t√° am agat fanacht ar na tortha√≠,
is f√©idir leat <code>cargo test -- --ignored</code> a rith ina ionad sin. M√°s mian leat na t√°st√°lacha go l√©ir a rith
cib√© an nd√©antar neamhaird orthu n√≥ nach nd√©antar, is f√©idir leat <code>cargo test -- --include-ignored</code> a rith.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="eagra√≠ocht-t√°st√°la"><a class="header" href="#eagra√≠ocht-t√°st√°la">Eagra√≠ocht T√°st√°la</a></h2>
<p>Mar a luadh ag t√∫s na caibidle, is discipl√≠n casta √≠ an t√°st√°il, agus
√∫s√°ideann daoine √©ags√∫la t√©arma√≠ocht agus eagr√∫ difri√∫il. An pobal Rust
smaoin√≠onn s√© ar th√°st√°lacha i dt√©arma√≠ dh√° phr√≠omhchatag√≥ir: t√°st√°lacha aonaid agus comhth√°th√∫
t√°st√°lacha. T√° <em>Unit tests</em> beag agus n√≠os d√≠rithe, ag t√°st√°il mod√∫l amh√°in ina aonar
ag an am, agus is f√©idir comh√©adain phr√≠obh√°ideacha a th√°st√°il. T√° <em>Trialacha Comhth√°thaithe</em> ar fad
taobh amuigh de do leabharlann agus bain √∫s√°id as do ch√≥d ar an mbealach c√©anna le haon sheachtrach eile
c√≥d, ag baint √∫s√°ide as an comh√©adan poibl√≠ amh√°in agus d'fh√©adfadh a fheidhmi√∫ iolrach
mod√∫il in aghaidh na t√°st√°la.</p>
<p>Scr√≠obh an d√° chine√°l t√°st√°lacha t√°bhachtach chun a chinnti√∫ go bhfuil na p√≠osa√≠ de do
leabharlann ag d√©anamh a bhfuil t√∫ ag s√∫il leo a dh√©anamh, ar leithligh agus le ch√©ile.</p>
<h3 id="trialacha-aonaid"><a class="header" href="#trialacha-aonaid">Trialacha Aonaid</a></h3>
<p>Is √© cusp√≥ir na dt√°st√°lacha aonaid gach aonad c√≥d a th√°st√°il ar leithligh √≥n
an chuid eile den ch√≥d chun a chur in i√∫l go tapa c√° bhfuil agus nach bhfuil an c√≥d ag obair
ag s√∫il. Cuirfidh t√∫ t√°st√°lacha aonaid san eolaire <em>src</em> i ngach comhad leis an
c√≥d at√° √° th√°st√°il acu. Is √© an gn√°s n√° mod√∫l darb ainm <code>tests</code> a chruth√∫
i ngach comhad chun na feidhmeanna t√°st√°la a chuimsi√∫ agus an mod√∫l a an√≥t√°il le
<code>cfg(test)</code>.</p>
<h4 id="mod√∫l-na-dtrialacha-agus-cfgtest"><a class="header" href="#mod√∫l-na-dtrialacha-agus-cfgtest">Mod√∫l na dTrialacha agus <code>#[cfg(test)]</code></a></h4>
<p>Ins√≠onn an n√≥ta <code>#[cfg(test)]</code> ar an mod√∫l <code>tests</code> do Rust a thioms√∫ agus
n√≠ ritheann an c√≥d t√°st√°la ach amh√°in nuair a ritheann t√∫ <code>cargo test</code>, n√≠ nuair a ritheann t√∫ <code>cargo build</code>. S√°bh√°lann s√© seo am tiomsaithe nuair nach bhfuil uait ach an leabharlann a th√≥g√°il agus
s√°bh√°lann s√© sp√°s sa d√©ant√∫s√°n tiomsaithe d√° bharr toisc nach bhfuil na t√°st√°lacha
san √°ireamh. Feicfidh t√∫ √© sin toisc go dt√©ann trialacha comhth√°thaithe ar bhealach eile
eolaire, n√≠l an n√≥ta <code>#[cfg(test)]</code> ag teast√°il uathu. Mar sin f√©in, mar gheall ar aonad
t√©ann na t√°st√°lacha sna comhaid ch√©anna leis an gc√≥d, √∫s√°idfidh t√∫ <code>#[cfg(test)]</code> le sonr√∫
n√°r cheart iad a √°ireamh sa toradh tiomsaithe.</p>
<p>Thabhairt chun cuimhne nuair a ghineamar an tionscadal nua <code>adder</code> sa ch√©ad chuid de
sa chaibidil seo, ghin lasta an c√≥d seo d√∫inn:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust noplayground">pub fn add(left: u64, right: u64) -&gt; u64 {
    left + right
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn it_works() {
        let result = add(2, 2);
        assert_eq!(result, 4);
    }
}</code></pre>
<p>Ar an mod√∫l <code>tests</code> a ghintear go huathoibr√≠och, seasann an aitreab√∫id <code>cfg</code>
<em>configuration</em> agus ins√≠onn s√© do Rust n√°r cheart ach an mh√≠r seo a leanas a chur san √°ireamh
tugadh rogha cumra√≠ochta √°irithe. Sa ch√°s seo, is √© an rogha cumra√≠ochta
<code>test</code>, a shol√°thra√≠onn Rust chun t√°st√°lacha a thioms√∫ agus a rith. Tr√≠ √∫s√°id a bhaint as an
tr√©ith <code>cfg</code>, n√≠ thiomsa√≠onn lasta √°r gc√≥d t√°st√°la ach amh√°in m√° rithimid na t√°st√°lacha go gn√≠omhach
le <code>cargo test</code>. √Åir√≠tear leis seo aon fheidhmeanna c√∫nt√≥ra a d‚Äôfh√©adfadh a bheith laistigh de seo
mod√∫l, chomh maith leis na feidhmeanna at√° an√≥t√°ilte le <code>#[test]</code>.</p>
<h4 id="feidhmeanna-pr√≠obh√°ideacha-a-th√°st√°il"><a class="header" href="#feidhmeanna-pr√≠obh√°ideacha-a-th√°st√°il">Feidhmeanna Pr√≠obh√°ideacha a Th√°st√°il</a></h4>
<p>T√° d√≠osp√≥ireacht ar si√∫l laistigh den phobal t√°st√°la faoi c√© acu pr√≠obh√°ideach n√≥ nach ea
ba cheart feidhmeanna a th√°st√°il go d√≠reach, agus d√©anann teangacha eile deacrachta√≠ n√≥
dodh√©anta feidhmeanna pr√≠obh√°ideacha a th√°st√°il. Beag beann ar a th√°st√°il id√©-eola√≠ocht t√∫
clo√≠ leis, ceada√≠onn rialacha pr√≠obh√°ideachais Rust duit feidhmeanna pr√≠obh√°ideacha a th√°st√°il.
Smaoinigh ar an gc√≥d i Liost√∫ 11-12 leis an bhfeidhm phr√≠obh√°ideach <code>internal_adder</code>.</p>
<Listing number="11-12" file-name="src/lib.rs" caption="Testing a private function">
<pre><code class="language-rust noplayground">pub fn add_two(a: usize) -&gt; usize {
    internal_adder(a, 2)
}

fn internal_adder(left: usize, right: usize) -&gt; usize {
    left + right
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn internal() {
        let result = internal_adder(2, 2);
        assert_eq!(result, 4);
    }
}</code></pre>
</Listing>
<p>Tabhair faoi deara nach bhfuil an fheidhm <code>internal_adder</code> marc√°ilte mar <code>pub</code>. T√° t√°st√°lacha d√≠reach
C√≥d meirge, agus n√≠l sa mhod√∫l <code>tests</code> ach mod√∫l eile. Mar a phl√©amar i
na <a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html">‚ÄúCos√°in chun Tagairt a Dh√©anamh do Mh√≠r i gCrann an Mhod√∫il‚Äù</a><!-- d√©an neamhaird de -->
alt, is f√©idir le m√≠reanna i mod√∫il leana√≠ na m√≠reanna i mod√∫il a sinsear a √∫s√°id. I
leis an triail seo, tugaimid gach ceann de na m√≠reanna tuismitheora mod√∫l <code>tests</code> isteach sa sc√≥ip le
<code>use super::*</code>, agus ansin is f√©idir <code>internal_adder</code> a ghlaoch ar an t√°st√°il. Mura gceapann t√∫
ba cheart feidhmeanna pr√≠obh√°ideacha a th√°st√°il, n√≠l aon rud i Rust a chuirfidh iallach
leat √© sin a dh√©anamh.</p>
<h3 id="trialacha-comhth√°thaithe"><a class="header" href="#trialacha-comhth√°thaithe">Trialacha Comhth√°thaithe</a></h3>
<p>I Rust, t√° t√°st√°lacha l√°nph√°irtithe go hioml√°n lasmuigh de do leabharlann. √ös√°ideann siad do
leabharlann ar an mbealach c√©anna a bheadh ‚Äã‚Äãaon ch√≥d eile, rud a chialla√≠onn nach f√©idir leo ach glaoch
feidhmeanna at√° mar chuid de API poibl√≠ do leabharlainne. Is √© an cusp√≥ir a th√°st√°il
cib√© an n-oibr√≠onn go leor codanna de do leabharlann le ch√©ile i gceart. Aonaid de ch√≥d a
d'fh√©adfadh fadhbanna a bheith ag obair i gceart ina n-aonar agus iad comhth√°ite, mar sin d√©an t√°st√°il
t√° cl√∫dach an ch√≥id chomhth√°ite t√°bhachtach freisin. Chun comhth√°th√∫ a chruth√∫
t√°st√°lacha, beidh eolaire <em>tests</em> uait ar dt√∫s.</p>
<h4 id="eolaire-na-tests"><a class="header" href="#eolaire-na-tests">Eolaire na <em>tests</em></a></h4>
<p>Crutha√≠mid eolaire <em>tests</em> ag an leibh√©al is airde d√°r eolaire tionscadail, an ch√©ad cheann eile
go <em>src</em>. T√° a fhios ag lasta comhaid t√°st√°la comhth√°thaithe a chuardach san eolaire seo. muid
ansin is f√©idir leis an oiread comhaid t√°st√°la agus is mian linn a dh√©anamh, agus tioms√≥idh lasta gach ceann de na
comhaid mar chliabh√°n aonair.</p>
<p>D√©anaimis t√°st√°il chomhth√°thaithe. Leis an gc√≥d i Liost√∫ 11-12 f√≥s sa
<em>src/lib.rs</em>, d√©an eolaire <em>tests</em>, agus cruthaigh comhad nua darb ainm
<em>tests/integration_test.rs</em>. Ba cheart go mbeadh cuma mar seo ar do strucht√∫r eolaire:</p>
<pre><code class="language-text">adder
‚îú‚îÄ‚îÄ Cargo.lock
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ lib.rs
‚îî‚îÄ‚îÄ tests
    ‚îî‚îÄ‚îÄ integration_test.rs
</code></pre>
<p>Cuir isteach an c√≥d i Liost√∫ 11-13 sa chomhad <em>tests/integration_test.rs</em>.</p>
<Listing number="11-13" file-name="tests/integration_test.rs" caption="An integration test of a function in the `adder` crate">
<pre><code class="language-rust ignore">use adder::add_two;

#[test]
fn it_adds_two() {
    let result = add_two(2);
    assert_eq!(result, 4);
}</code></pre>
</Listing>
<p>Is cliathbhosca ar leith √© gach comhad san eolaire <em>tests</em>, mar sin n√≠ m√≥r d√∫inn √°r gcuid
leabharlann isteach i raon feidhme gach cliathbhosca t√°st√°la. Ar an √°bhar sin cuirimid <code>use adder::add_two;</code> ag barr an ch√≥id, rud nach raibh ag teast√°il uainn sna trialacha aonaid.</p>
<p>N√≠ g√° d√∫inn aon ch√≥d a an√≥t√°il in <em>tests/integration_test.rs</em> le
<code>#[cfg(test)]</code>. D√©ile√°lann lasta go speisialta leis an eolaire <em>tests</em> agus tiomsa√≠onn s√© comhaid
san eolaire seo amh√°in nuair a rithimid <code>cargo test</code>. Rith 't√°st√°il lasta' anois:</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.31s
     Running unittests src/lib.rs (target/debug/deps/adder-1082c4b063a8fbe6)

running 1 test
test tests::internal ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/integration_test.rs (target/debug/deps/integration_test-1082c4b063a8fbe6)

running 1 test
test it_adds_two ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>√Åir√≠tear ar na tr√≠ chuid den aschur na t√°st√°lacha aonaid, an t√°st√°il chomhth√°thaithe, agus
na t√°st√°lacha doc. Tabhair faoi deara m√° theipeann ar aon t√°st√°il i roinn, na hailt seo a leanas
n√≠ bheidh a rith. Mar shampla, m√° theipeann ar th√°st√°il aonaid, n√≠ bheidh aon aschur ann
le haghaidh t√°st√°lacha comhth√°thaithe agus doc toisc nach re√°cht√°lfar na t√°st√°lacha sin ach amh√°in m√°s aonad iad uile
t√°st√°lacha ag dul thar.</p>
<p>T√° an ch√©ad chuid do na t√°st√°lacha aonaid mar a ch√©ile agus a chonaiceamar: l√≠ne amh√°in
do gach triail aonaid (ceann amh√°in darb ainm <code>internal</code> a chuireamar leis i Liost√∫ 11-12) agus
ansin l√≠ne achomair do na t√°st√°lacha aonaid.</p>
<p>Tosa√≠onn an chuid t√°st√°lacha comhth√°th√∫ leis an l√≠ne <code>Running tests/integration_test.rs</code>. Ansin, t√° l√≠ne le haghaidh gach feidhm t√°st√°la i
an t√°st√°il chomhth√°thaithe sin agus l√≠ne achoimre ar thortha√≠ an chomhth√°thaithe
t√°st√°il d√≠reach sula dtosa√≠onn an rann√°n <code>Doc-tests adder</code>.</p>
<p>T√° a chuid f√©in ag gach comhad t√°st√°la comhth√°thaithe, mar sin m√° chuirimid n√≠os m√≥ comhad leis an
<em>tests</em> eolaire, beidh n√≠os m√≥ rann√≥g t√°st√°la comhth√°thaithe.</p>
<p>Is f√©idir linn feidhm t√°st√°la comhth√°thaithe ar leith a rith f√≥s tr√≠d an t√°st√°il a shonr√∫
ainm na feidhme mar arg√≥int le <code>cargo test</code>. Na t√°st√°lacha go l√©ir a re√°cht√°il i a
comhad t√°st√°la comhth√°thaithe ar leith, bain √∫s√°id as an arg√≥int <code>--test</code> ar <code>cargo test</code>
agus ainm an chomhaid ina dhiaidh:</p>
<pre><code class="language-console">$ cargo test --test integration_test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.64s
     Running tests/integration_test.rs (target/debug/deps/integration_test-82e7799c1bc62298)

running 1 test
test it_adds_two ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>N√≠ ritheann an t-ord√∫ seo ach na t√°st√°lacha sa chomhad <em>tests/integration_test.rs</em>.</p>
<h4 id="fomod√∫il-i-dtrialacha-comhth√°thaithe"><a class="header" href="#fomod√∫il-i-dtrialacha-comhth√°thaithe">Fomod√∫il i dTrialacha Comhth√°thaithe</a></h4>
<p>De r√©ir mar a chuireann t√∫ n√≠os m√≥ t√°st√°lacha comhth√°thaithe leis, b'fh√©idir gur mhaith leat n√≠os m√≥ comhad a dh√©anamh sa
<em>tests</em> eolaire chun cabhr√∫ leo iad a eagr√∫; mar shampla, is f√©idir leat an t√°st√°il a ghr√∫p√°il
feidhmeanna ag an bhfeidhmi√∫lacht at√° √° th√°st√°il acu. Mar a luadh cheana, gach comhad
san eolaire <em>tests</em> at√° tiomsaithe mar chliabh√°n ar leith d√° cuid f√©in, rud at√° √∫s√°ideach
chun sc√≥ip ar leith a chruth√∫ chun aithris n√≠os mine a dh√©anamh ar an mbealach a bheidh √∫s√°ideoir√≠ deiridh
ag baint √∫s√°ide as do chliabh√°n. Mar sin f√©in, cialla√≠onn s√© seo nach nd√©anann comhaid san eolaire <em>tests</em>
d√©an an t-iompar c√©anna le comhaid in <em>src</em> a dh√©anamh, mar a d'fhoghlaim t√∫ i gCaibidil 7
maidir le conas c√≥d a dheighilt i mod√∫il agus comhaid.</p>
<p>T√° iompar √©ags√∫il comhad eolaire <em>tests</em> n√≠os suntasa√≠ nuair a bh√≠onn t√∫
sraith feidhmeanna c√∫nt√≥ra a bheith acu le h√∫s√°id i gcomhaid t√°st√°la comhth√°thaithe iolracha agus
d√©anann t√∫ iarracht na c√©imeanna a lean√∫int sa <a href="ch07-05-separating-modules-into-different-files.html">‚ÄúMod√∫il a Scaradh ina Mod√∫il √âags√∫la
Comhaid‚Äù</a><!-- neamhaird --> alt de Chaibidil 7 go
sliocht iad i mod√∫l coiteann. Mar shampla, m√° chrutha√≠mid <em>tests/common.rs</em>
agus feidhm darb ainm <code>setup</code> a chur ann, is f√©idir linn roinnt c√≥d a chur le <code>setup</code> sin
ba mhaith linn glaoch √≥ fheidhmeanna t√°st√°la iolracha i gcomhaid t√°st√°la iolracha:</p>
<p><span class="filename">Filename: tests/common.rs</span></p>
<pre><code class="language-rust noplayground">pub fn setup() {
    // setup code specific to your library's tests would go here
}</code></pre>
<p>Nuair a bheidh na t√°st√°lacha √° re√°cht√°il againn ar√≠s, feicfidh muid alt nua san aschur t√°st√°la don
<em>common.rs</em>, c√© nach bhfuil feidhmeanna t√°st√°la ar bith sa chomhad seo n√°
ar thugamar an fheidhm <code>setup</code> √≥ √°it ar bith:</p>
<pre><code class="language-console">$ cargo test
   Compiling adder v0.1.0 (file:///projects/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.89s
     Running unittests src/lib.rs (target/debug/deps/adder-92948b65e88960b4)

running 1 test
test tests::internal ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/common.rs (target/debug/deps/common-92948b65e88960b4)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/integration_test.rs (target/debug/deps/integration_test-92948b65e88960b4)

running 1 test
test it_adds_two ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests adder

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Nuair a bh√≠onn <code>common</code> le feice√°il i dtortha√≠ na dtrialacha agus <code>running 0 tests</code> ar taispe√°int do
n√≠ h√© an rud a bh√≠ uainn. Theastaigh uainn ach roinnt c√≥d a roinnt leis an gceann eile
comhaid t√°st√°la comhth√°th√∫. Chun ‚Äòcoitianta‚Äô a sheachaint san aschur t√°st√°la,
in ionad <em>tests/common.rs</em> a chruth√∫, cruth√≥imid <em>tests/common/mod.rs</em>. T√° an
Breathna√≠onn an eolaire tionscadail mar seo anois:</p>
<pre><code class="language-text">‚îú‚îÄ‚îÄ Cargo.lock
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ lib.rs
‚îî‚îÄ‚îÄ tests
    ‚îú‚îÄ‚îÄ common
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ mod.rs
    ‚îî‚îÄ‚îÄ integration_test.rs
</code></pre>
<p>Is √© seo an coinbhinsi√∫n ainmni√∫ch√°in n√≠os sine a thuigeann Rust freisin go bhfuil muid
luaite sa <a href="ch07-05-separating-modules-into-different-files.html#alternate-file-paths">"Cos√°in Chomhaid Malartacha"</a><!-- neamhaird --> de
Caibidil 7. Agus an comhad √° ainmni√∫ ar an mbealach seo, ins√≠onn s√© do Rust gan caitheamh leis an mod√∫l <code>common</code>
mar chomhad t√°st√°la comhth√°thaithe. Nuair a bhogaimid an c√≥d feidhme <code>setup</code> isteach
<em>tests/common/mod.rs</em> agus scrios an comhad <em>tests/common.rs</em>, an chuid sa
n√≠ bheidh aschur t√°st√°la le feice√°il a thuilleadh. Comhaid i bhfochomhadlanna na <em>t√°st√°lacha</em>
n√≠ dh√©antar an t-eolaire a thioms√∫ mar chliabh√°in ar leith n√≥ t√° codanna sa t√°st√°il
aschur.</p>
<p>Tar √©is d√∫inn <em>tests/common/mod.rs</em> a chruth√∫, is f√©idir linn √© a √∫s√°id √≥ aon cheann de na
comhaid t√°st√°la comhth√°th√∫ mar mhod√∫l. Seo sampla de ‚Äòsocr√∫‚Äô a ghlaoch
feidhm √≥n t√°st√°il <code>it_adds_two</code> in <em>tests/integration_test.rs</em>:</p>
<p><span class="filename">Filename: tests/integration_test.rs</span></p>
<pre><code class="language-rust ignore">use adder::add_two;

mod common;

#[test]
fn it_adds_two() {
    common::setup();

    let result = add_two(2);
    assert_eq!(result, 4);
}</code></pre>
<p>Tabhair faoi deara go bhfuil an dearbh√∫ <code>mod common;</code> mar an gc√©anna le dearbh√∫ an mhod√∫il
l√©irigh muid i Liosta 7-21. Ansin, sa fheidhm t√°st√°la, is f√©idir linn glaoch ar an
<code>common::setup()</code>  feidhm.</p>
<h4 id="trialacha-comhth√°thaithe-le-haghaidh-cliathbhosca√≠-d√©n√°rtha"><a class="header" href="#trialacha-comhth√°thaithe-le-haghaidh-cliathbhosca√≠-d√©n√°rtha">Trialacha Comhth√°thaithe le haghaidh cliathbhosca√≠ D√©n√°rtha</a></h4>
<p>M√°s cliathbhosca d√©n√°rtha √°r dtionscadal nach bhfuil ann ach comhad <em>src/main.rs</em> agus
nach bhfuil comhad <em>src/lib.rs</em>, n√≠ f√©idir linn t√°st√°lacha comhth√°th√∫ a chruth√∫ sa
<em>tests</em> eolaire agus tabhair na feidhmeanna at√° sainithe sa chomhad <em>src/main.rs</em> isteach
sc√≥ip le r√°iteas <code>use</code>. N√≠ nochtann ach cliathbhosca√≠ leabharlainne feidhmeanna nach bhfuil eile acu
is f√©idir cliathbhosca√≠ a √∫s√°id; cliathbhosca√≠ d√©n√°rtha t√° s√© i gceist a re√°cht√°il ina n-aonar.</p>
<p>T√° s√© seo ar cheann de na c√∫iseanna go bhfuil tionscadail meirge a shol√°thra√≠onn d√©n√°rtha a
straightforward <em>src/main.rs</em> comhad a ghlaonn an loighic a ch√≥na√≠onn sa
<em>src/lib.rs</em> comhad. Ag baint √∫s√°ide as an strucht√∫r sin, t√°st√°lacha comhth√°th√∫ <em>can</em> t√°st√°il an
cliathbhosca leabharlainne le <code>use</code> chun an fheidhmi√∫lacht th√°bhachtach a chur ar f√°il. M√° t√° an
oibr√≠onn feidhmi√∫lacht th√°bhachtach, an m√©id beag c√≥d sa <em>src/main.rs</em>
oibreoidh an comhad freisin, agus n√≠ g√° an m√©id beag c√≥d sin a th√°st√°il.</p>
<h2 id="achoimre-10"><a class="header" href="#achoimre-10">Achoimre</a></h2>
<p>Sol√°thra√≠onn gn√©ithe t√°st√°la Rust bealach chun a shonr√∫ conas ba cheart don ch√≥d feidhmi√∫
a chinnti√∫ go leanann s√© ag obair mar a bhfuil s√∫il agat, fi√∫ agus t√∫ ag d√©anamh athruithe. T√°st√°lacha aonaid
codanna √©ags√∫la de leabharlann a fheidhmi√∫ ar leithligh agus is f√©idir t√°st√°il phr√≠obh√°ideach
sonra√≠ cur chun feidhme. Seice√°lann t√°st√°lacha comhth√°thaithe go bhfuil go leor codanna den leabharlann
oibri√∫ le ch√©ile i gceart, agus √∫s√°ideann siad API poibl√≠ na leabharlainne chun an c√≥d a th√°st√°il
ar an mbealach c√©anna a √∫s√°idfidh c√≥d seachtrach √©. C√© go bhfuil c√≥ras cine√°l Rust agus
Cuid√≠onn rialacha √∫in√©ireachta le roinnt cine√°lacha fabht a chosc, t√° t√°st√°lacha f√≥s t√°bhachtach
laghdaigh fabhtanna loighce a bhaineann leis an gcaoi a bhfuiltear ag s√∫il go n-iompr√≥idh do ch√≥d.</p>
<p>D√©anaimis an t-eolas a d'fhoghlaim t√∫ sa chaibidil seo agus roimhe seo a chomhcheangal
caibidl√≠ a bheith ag obair ar thionscadal!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tionscadal-io-cl√°r-l√≠ne-ceannais-a-th√≥g√°il"><a class="header" href="#tionscadal-io-cl√°r-l√≠ne-ceannais-a-th√≥g√°il">Tionscadal I/O: Cl√°r L√≠ne Ceannais a Th√≥g√°il</a></h1>
<p>Achoimre is ea an chaibidil seo ar an iliomad scileanna at√° foghlamtha agat go dt√≠ seo agus
ini√∫chadh ar roinnt gn√©ithe caighde√°nacha leabharlainne. T√≥gfaimid l√≠ne ordaithe
uirlis a idirghn√≠omha√≠onn le hionchur/aschur comhaid agus orduithe chun cuid de
na coincheapa Rust at√° agat anois faoi do chrios.</p>
<p>D√©anann luas, s√°bh√°ilteacht meirge, aschur d√©n√°rtha aonair, agus taca√≠ocht tras-ard√°in √©
teanga iontach chun uirlis√≠ l√≠ne ceannais a chruth√∫, mar sin d√°r dtionscadal, d√©anfaimid
√°r leagan f√©in a dh√©anamh den uirlis chuardaigh na n-orduithe clasaiceach <code>grep</code>
(<strong>g</strong> cuardaigh l√©iri√∫ <strong>r</strong>egular<strong>e</strong> agus <strong>p</strong>rint). Sna
c√°s √∫s√°ide is simpl√≠, cuardaigh <code>grep</code> comhad sonraithe le haghaidh teaghr√°n sonraithe. Chuig
√© sin a dh√©anamh, glacann <code>grep</code> cos√°n comhaid agus teaghr√°n mar chuid arg√≥int√≠. Ansin l√©ann s√©
an comhad, aims√≠onn s√© l√≠nte sa chomhad sin ina bhfuil an arg√≥int teaghr√°n, agus prionta√≠
na l√≠nte sin.</p>
<p>Ar an mbealach seo, taispe√°nfaimid conas √°r n-uirlis l√≠ne ordaithe a bhaint as an teirmin√©al
gn√©ithe a √∫s√°ideann go leor uirlis√≠ l√≠ne ordaithe eile. L√©ifidh muid luach an
athr√≥g timpeallachta chun ligean don √∫s√°ideoir iompar √°r n-uirlis a chumr√∫.
D√©anfaimid teachtaireachta√≠ earr√°ide a phriont√°il freisin chuig an sruth caighde√°nach cons√≥l earr√°ide (<code>stderr</code>)
in ionad aschur caighde√°nach (<code>stdout</code>) ionas gur f√©idir leis an √∫s√°ideoir, mar shampla
aschur rath√∫il a atreor√∫ chuig comhad agus teachtaireachta√≠ earr√°ide f√≥s le feice√°il ar an sc√°ile√°n.</p>
<p>T√° ball amh√°in de phobal Rust, Andrew Gallant, tar √©is ball ioml√°n a chruth√∫ cheana f√©in
le feice√°il, leagan an-tapa de <code>grep</code>, ar a dtugtar <code>ripgrep</code>. Mar chompar√°id, √°r
Beidh leagan simpl√≠ go leor, ach beidh an chaibidil seo a thabhairt duit ar roinnt de na
eolas c√∫lra a theasta√≠onn uait chun tuiscint a fh√°il ar thionscadal f√≠ordhomhain ar n√≥s
<code>ripgrep</code>.</p>
<p>Cuirfidh √°r dtionscadal <code>grep</code> le ch√©ile roinnt coincheap a d'fhoghlaim t√∫ go dt√≠ seo:</p>
<ul>
<li>C√≥d eagraithe (<a href="ch07-00-managing-growing-projects-with-packages-crates-and-modules.html">Caibidil 7</a><!-- neamhaird -->)</li>
<li>Ag baint √∫s√°ide as veicteoir√≠ agus teaghr√°in (<a href="ch08-00-common-collections.html">Caibidil 8</a> <!-- neamhaird -->)</li>
<li>Earr√°id√≠ a l√°imhse√°il (<a href="ch09-00-error-handling.html">Caibidil 9</a><!-- neamhaird -->)</li>
<li>Ag baint √∫s√°ide as tr√©ithe agus saolr√©anna nuair is cu√≠ (<a href="ch10-00-generics.html">Caibidil 10</a><!-- neamhaird -->)</li>
<li>Trialacha scr√≠ofa (<a href="ch11-00-testing.html">Caibidil 11</a><!-- neamhaird -->)</li>
</ul>
<p>Tabharfaimid isteach go hachomair freisin d√∫nta, iterators, agus r√©ada trait, a
<a href="ch13-00-functional-features.html">Caibidil 13</a><!-- neamhaird --> agus <a href="ch18-00-oop.html">Caibidil 18</a> <!-- neamhaird -->
cl√∫dach go mion.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ag-glacadh-le-arg√≥int√≠-l√≠ne-ord√∫"><a class="header" href="#ag-glacadh-le-arg√≥int√≠-l√≠ne-ord√∫">Ag glacadh le Arg√≥int√≠ L√≠ne Ord√∫</a></h2>
<p>Crutha√≠mid tionscadal nua le, mar i gc√≥na√≠, <code>cargo new</code>. Cuirfimid glaoch ar √°r dtionscadal
<code>minigrep</code> chun √© a idirdheal√∫ √≥n uirlis <code>grep</code> a d'fh√©adfadh a bheith agat cheana f√©in
ar do ch√≥ras.</p>
<pre><code class="language-console">$ cargo new minigrep
     Created binary (application) `minigrep` project
$ cd minigrep
</code></pre>
<p>Is √© an ch√©ad tasc a thabhairt ar <code>minigrep</code> glacadh lena dh√° arg√≥int na n-orduithe: an
cos√°n comhaid agus teaghr√°n le cuardach a dh√©anamh air. Is √© sin, ba mhaith linn a bheith in ann √°r gcuid
cl√°r le <code>cargo run</code>, dh√° th√°ngthas ar na harg√≥int√≠ seo a leanas a chur in i√∫l
d√°r gcl√°r seachas don <code>cargo</code>, teaghr√°n le cuardach a dh√©anamh air, agus cos√°n chuige
comhad le cuardach a dh√©anamh ann, mar seo:</p>
<pre><code class="language-console">$ cargo run -- searchstring example-filename.txt
</code></pre>
<p>Faoi l√°thair, n√≠ f√©idir leis an gcl√°r a ghineann <code>cargo new</code> arg√≥int√≠ a phr√≥ise√°il
tabhair. Is f√©idir le roinnt leabharlanna at√° ann cheana f√©in ar <a href="https://crates.io/">crates.io</a> cabhr√∫
le cl√°r a scr√≠obh a ghlacann le harg√≥int√≠ na n-orduithe, ach toisc go bhfuil t√∫
ach an coincheap seo a fhoghlaim, cuirimis an cumas seo i bhfeidhm sinn f√©in.</p>
<h3 id="l√©amh-na-luachanna-arg√≥na"><a class="header" href="#l√©amh-na-luachanna-arg√≥na">L√©amh na Luachanna Arg√≥na</a></h3>
<p>Le cur ar chumas <code>minigrep</code> luachanna na n-arg√≥int√≠ ord√∫ a chuirimid ar aghaidh chucu a l√©amh
√©, beidh an fheidhm <code>std::env::args</code> a shol√°thra√≠tear i gcaighde√°n Rust de dh√≠th orainn
leabharlann. Tugann an fheidhm seo atriarth√≥ir ar na harg√≥int√≠ ord√∫ a ritheadh ‚Äã‚Äãar ais
go <code>minigrep</code>. Cl√∫d√≥imid atriallt√≥ir√≠ go hioml√°n i <a href="ch13-00-functional-features.html">Caibidil 13</a><!-- d√©an neamhaird
-->. Faoi l√°thair, n√≠ g√° duit ach fios a bheith agat ar dh√° shonra faoi iterators: iterators
sraith luachanna a th√°irgeadh, agus is f√©idir linn an modh <code>collect</code> a ghlaoch ar iterator
chun √© a iomp√∫ ina bhaili√∫ch√°n, mar veicteoir, ina bhfuil na heilimint√≠ go l√©ir
t√°irgeann an t-iterator.</p>
<p>Ligeann an c√≥d i Liost√∫ 12-1 do do chl√°r <code>minigrep</code> ord√∫ ar bith a l√©amh
arg√≥int√≠ l√≠ne a cuireadh ar aghaidh chuige, agus ansin na luachanna a bhaili√∫ i veicteoir.</p>
<Listing number="12-1" file-name="src/main.rs" caption="Collecting the command line arguments into a vector and printing them">
<pre><pre class="playground"><code class="language-rust">use std::env;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();
    dbg!(args);
}</code></pre></pre>
</Listing>
<p>Ar dt√∫s cuirimid an mod√∫l <code>std::env</code> isteach sa sc√≥ip le r√°iteas <code>use</code> mar sin d√©anaimid
is f√©idir a fheidhm <code>args</code> a √∫s√°id. Tabhair faoi deara gurb √© an fheidhm <code>std::env::args</code>
neadaithe in dh√° leibh√©al de mhod√∫il. Mar a phl√©amar i <a href="ch07-04-bringing-paths-into-scope-with-the-use-keyword.html#creating-idiomatic-use-paths">Caibidil
7</a> <!-- neamhaird a dh√©anamh ar -->, i gc√°sanna ina bhfuil an fheidhm inmhianaithe
neadaithe i n√≠os m√≥ n√° mod√∫l amh√°in, roghnaigh muid an mod√∫l tuismitheora a thabhairt isteach
sc√≥ip seachas an fheidhm. Tr√≠ √© sin a dh√©anamh, is f√©idir linn feidhmeanna eile a √∫s√°id go h√©asca
√≥ <code>std::env</code>. N√≠l s√© chomh d√©bhr√≠och freisin n√° <code>use std::env::args</code> agus
ansin an fheidhm a ghlaoch le <code>args</code>, mar is furasta <code>args</code> a bheith i gceist
cearr le feidhm at√° sainmh√≠nithe sa mhod√∫l reatha.</p>
<blockquote>
<h3 id="feidhm-args-agus-unicode-neamhbhail√≠"><a class="header" href="#feidhm-args-agus-unicode-neamhbhail√≠">Feidhm <code>args</code> agus Unicode Neamhbhail√≠</a></h3>
<p>Tabhair faoi deara go rachaidh <code>std::env::args</code> i scaoll m√° t√° arg√≥int neamhbhail√≠ ann
Unicode. M√°s g√° do do chl√°r glacadh le harg√≥int√≠ ina bhfuil neamhbhail√≠
Unicode, bain √∫s√°id as <code>std::env::args_os</code> ina ionad sin. Tugann an fheidhm sin aterator ar ais
a th√°irgeann luachanna <code>OsString</code> in ionad luachanna <code>String</code>. Roghna√≠omar
√∫s√°id <code>std::env::args</code> anseo le haghaidh simpl√≠ochta mar go bhfuil luachanna <code>OsString</code> difri√∫il in aghaidh na
ard√°n agus t√° siad n√≠os casta oibri√∫ leo n√° luachanna <code>String</code>.</p>
</blockquote>
<p>Ar an gc√©ad l√≠ne de <code>main</code>, tugaimid <code>env::args</code>, agus √∫s√°idimid l√°ithreach
<code>collect</code> chun an t-iterator a iomp√∫ ina veicteoir ina bhfuil na luachanna go l√©ir a th√°irgtear
ag an iterator. Is f√©idir linn an fheidhm <code>collect</code> a √∫s√°id chun go leor cine√°lacha de a chruth√∫
baili√∫ch√°in, mar sin d√©anaimid an√≥t√°il go sainr√°ite ar an gcine√°l <code>args</code> lena shonr√∫ go bhfuilimid
ag iarraidh veicteoir teaghr√°in. C√© gur annamh a chaithfidh t√∫ cine√°lacha a an√≥t√°il i
Meirge, is feidhm amh√°in √© <code>collect</code> is minic a chaithfidh t√∫ an√≥t√°il a dh√©anamh uirthi toisc go bhfuil Rust
n√≠l s√© in ann an cine√°l baili√∫ch√°in at√° uait a thuiscint.</p>
<p>Ar deireadh, priont√°laimid an veicteoir ag baint √∫s√°ide as an macra d√≠fhabhtaithe. D√©anaimis iarracht an c√≥d a rith
ar dt√∫s gan arg√≥int√≠ ar bith agus ansin le dh√° arg√≥int:</p>
<pre><code class="language-console">$ cargo run
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.61s
     Running `target/debug/minigrep`
[src/main.rs:5:5] args = [
    "target/debug/minigrep",
]
</code></pre>
<pre><code class="language-console">$ cargo run -- needle haystack
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.57s
     Running `target/debug/minigrep needle haystack`
[src/main.rs:5:5] args = [
    "target/debug/minigrep",
    "needle",
    "haystack",
]
</code></pre>
<p>Tabhair faoi deara gurb √© <code>"target/debug/minigrep"</code> an ch√©ad luach sa veicteoir, a
is ainm d√°r d√©n√°rtha. Meaitse√°lann s√© seo iompar an liosta arg√≥int√≠ i
C, cl√°ir ligean ar c√≠os √∫s√°id a bhaint as an t-ainm a bh√≠ √° agairt agus iad i gcr√≠ch.
Is minic a bh√≠onn s√© √°isi√∫il rochtain a fh√°il ar ainm an chl√°ir ar eagla go dteasta√≠onn uait
√© a phriont√°il i dteachtaireachta√≠ n√≥ iompar an chl√°ir a athr√∫ bunaithe ar an m√©id
Baineadh √∫s√°id as ailias na l√≠ne ordaithe chun an cl√°r a agairt. Ach chun cr√≠ocha seo
chaibidil, d√©anfaimid neamhaird de agus n√≠ sh√°bh√°lfaimid ach an d√° arg√≥int a theasta√≠onn uainn.</p>
<h3 id="luachanna-arg√≥int-a-sh√°bh√°il-in-athr√≥ga"><a class="header" href="#luachanna-arg√≥int-a-sh√°bh√°il-in-athr√≥ga">Luachanna Arg√≥int a Sh√°bh√°il in Athr√≥ga</a></h3>
<p>T√° an cl√°r in ann rochtain a fh√°il ar na luachanna at√° sonraithe mar l√≠ne ordaithe faoi l√°thair
arg√≥int√≠. Anois caithfimid luachanna an d√° arg√≥int a sh√°bh√°il in athr√≥ga mar sin de
is f√©idir linn na luachanna a √∫s√°id ar fud an chuid eile den chl√°r. D√©anaimid √© sin i Liost√∫
12-2.</p>
<Listing number="12-2" file-name="src/main.rs" caption="Creating variables to hold the query argument and file path argument">
<pre><code class="language-rust should_panic noplayground">use std::env;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let query = &amp;args[1];
    let file_path = &amp;args[2];

    println!("Searching for {query}");
    println!("In file {file_path}");
}</code></pre>
</Listing>
<p>Mar a chonaic muid nuair a phriont√°ileamar an veicteoir, is √© ainm an chl√°ir an ch√©ad cheann
luach sa veicteoir ag <code>args[0]</code>, mar sin t√°imid ag tos√∫ arg√≥int√≠ ag inn√©acs 1. T√° an
Is √© an ch√©ad arg√≥int a th√≥gann <code>minigrep</code> an teaghr√°n at√° √° lorg againn, mar sin cuirimid a
tagairt don ch√©ad arg√≥int san athr√≥g <code>query</code>. An dara arg√≥int
Beidh an cos√°n comhad, mar sin chuir muid tagairt don dara arg√≥int sa
athr√≥g <code>file_path</code>.</p>
<p>D√©anaimid luachanna na n-athr√≥g seo a phriont√°il go sealadach chun a chruth√∫ go bhfuil an c√≥d
ag obair mar at√° beartaithe againn. D√©anaimis an cl√°r seo a rith ar√≠s leis na harg√≥int√≠ <code>test</code>
agus <code>sample.txt</code>:</p>
<pre><code class="language-console">$ cargo run -- test sample.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep test sample.txt`
Searching for test
In file sample.txt
</code></pre>
<p>Go hiontach, t√° an cl√°r ag obair! Is iad luachanna na n-arg√≥int√≠ a theasta√≠onn uainn
sh√°bh√°il isteach na hathr√≥ga cearta. N√≠os d√©ana√≠ cuirfimid roinnt l√°imhse√°il earr√°ide leis chun d√©ile√°il leis
le c√°sanna earr√°ideacha f√©ideartha √°irithe, mar shampla nuair a shol√°thra√≠onn an t-√∫s√°ideoir uimh
arg√≥int√≠; faoi ‚Äã‚Äãl√°thair, d√©anfaimid neamhaird den sc√©al sin agus oibreoimid ar l√©amh comhaid a chur leis
cumais ina ionad.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="comhad-√°-l√©amh"><a class="header" href="#comhad-√°-l√©amh">Comhad √° L√©amh</a></h2>
<p>Anois cuirfimid feidhmi√∫lacht leis chun an comhad a shonra√≠tear sa <code>file_path</code> a l√©amh
arg√≥int. Ar dt√∫s teasta√≠onn uainn comhad samplach chun √© a th√°st√°il: √∫s√°idfimid comhad a bhfuil a
m√©id beag t√©acs thar l√≠nte iolracha le roinnt focal ar√≠s agus ar√≠s eile. Liost√°il 12-3
T√° d√°n Emily Dickinson aige a oibreoidh go maith! Cruthaigh comhad darb ainm
<em>poem.txt</em> ag bunleibh√©al do thionscadal, agus cuir isteach an d√°n ‚ÄúIs Aon Duine m√©!
C√© tusa?"</p>
<Listing number="12-3" file-name="poem.txt" caption="A poem by Emily Dickinson makes a good test case.">
<pre><code class="language-text">I'm nobody! Who are you?
Are you nobody, too?
Then there's a pair of us - don't tell!
They'd banish us, you know.

How dreary to be somebody!
How public, like a frog
To tell your name the livelong day
To an admiring bog!
</code></pre>
</Listing>
<p>Agus an t√©acs i bhfeidhm, cuir <em>src/main.rs</em> in eagar agus cuir c√≥d leis chun an comhad a l√©amh, mar
l√©irithe i Liost√∫ 12-4.</p>
<Listing number="12-4" file-name="src/main.rs" caption="Reading the contents of the file specified by the second argument">
<pre><code class="language-rust should_panic noplayground">use std::env;
use std::fs;

fn main() {
    // --snip--
<span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let query = &amp;args[1];
</span><span class="boring">    let file_path = &amp;args[2];
</span><span class="boring">
</span><span class="boring">    println!("Searching for {query}");
</span>    println!("In file {file_path}");

    let contents = fs::read_to_string(file_path)
        .expect("Should have been able to read the file");

    println!("With text:\n{contents}");
}</code></pre>
</Listing>
<p>Ar dt√∫s tugaimid isteach cuid √°bhartha den leabharlann chaighde√°nach le <code>use</code>
r√°iteas: n√≠ m√≥r d√∫inn <code>std::fs</code> chun comhaid a l√°imhse√°il.</p>
<p>Sa <code>main</code>, glacann an r√°iteas nua <code>fs::read_to_string</code> an <code>file_path</code>, oscla√≠onn s√©
an comhad sin, agus seolann s√© ar ais luach den chine√°l <code>std::io::Result&lt;String&gt;</code> ina bhfuil
inneachar an chomhaid.</p>
<p>Ina dhiaidh sin, cuirimid ar√≠s r√°iteas sealadach <code>println!</code> a phriont√°lann an luach
de <code>contents</code> tar √©is an comhad a l√©amh, ionas gur f√©idir linn a sheice√°il go bhfuil an cl√°r
ag obair go dt√≠ seo.</p>
<p>Rithfimid an c√≥d seo le haon teaghr√°n mar an arg√≥int ch√©ad l√≠ne ordaithe (mar gheall ar
n√≠l an chuid cuardaigh curtha i bhfeidhm againn f√≥s) agus an comhad <em>poem.txt</em> mar an
dara arg√≥int:</p>
<pre><code class="language-console">$ cargo run -- the poem.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep the poem.txt`
Searching for the
In file poem.txt
With text:
I'm nobody! Who are you?
Are you nobody, too?
Then there's a pair of us - don't tell!
They'd banish us, you know.

How dreary to be somebody!
How public, like a frog
To tell your name the livelong day
To an admiring bog!

</code></pre>
<p>Go hiontach! L√©adh an c√≥d agus ansin phriont√°iltear √°bhar an chomhaid. Ach an c√≥d
t√° c√∫pla lochtanna. I l√°thair na huaire, t√° an fheidhm <code>main</code> iolraithe
freagrachta√≠: go ginear√°lta, b√≠onn feidhmeanna n√≠os soil√©ire agus n√≠os √©asca le cothabh√°il m√°
t√° gach feidhm freagrach as smaoineamh amh√°in. Is √≠ an fhadhb eile go bhfuil muid
gan earr√°id√≠ a l√°imhse√°il chomh maith agus a d'fh√©adfaimis. T√° an cl√°r f√≥s beag, mar sin iad seo
n√≠ fadhb mh√≥r iad lochtanna, ach de r√©ir mar a fh√°sann an cl√°r, beidh s√© n√≠os deacra iad a shocr√∫
iad go glan. Is dea-chleachtas √© tos√∫ ar athmhachnamh go luath nuair
cl√°r a fhorbairt mar go bhfuil s√© i bhfad n√≠os √©asca m√©ideanna n√≠os l√∫ a athfhacht√≥iri√∫
c√≥d. D√©anfaimid √© sin chugainn.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="athmhacnamh-chun-mod√∫lacht-agus-l√°imhse√°il-earr√°id√≠-a-fheabhs√∫"><a class="header" href="#athmhacnamh-chun-mod√∫lacht-agus-l√°imhse√°il-earr√°id√≠-a-fheabhs√∫">Athmhacnamh chun Mod√∫lacht agus L√°imhse√°il Earr√°id√≠ a Fheabhs√∫</a></h2>
<p>Chun √°r gcl√°r a fheabhs√∫, socr√≥imid ceithre fhadhb a bhaineann leis an
strucht√∫r an chl√°ir agus conas a l√°imhse√°iltear earr√°id√≠ f√©ideartha. Ar dt√∫s, √°r <code>main</code>
D√©anann Feidhm dh√° thasc anois: pars√°lann s√© arg√≥int√≠ agus l√©ann s√© comhaid. Mar √°r
cl√°r ag f√°s, l√≠on na dtascanna ar leith L√°imhse√°lann an <code>main</code> fheidhm L√°imhse√°lann
m√©ad√∫. De r√©ir mar a ghn√≥tha√≠onn feidhm freagrachta√≠, b√≠onn s√© n√≠os deacra
c√∫is faoi, n√≠os deacra a th√°st√°il, agus n√≠os deacra a athr√∫ gan briseadh ceann amh√°in d√°
p√°irteanna. Is fearr feidhmi√∫lacht a scaradh ionas go mbeidh gach feidhm freagrach as
tasc amh√°in.</p>
<p>T√° baint ag an gceist seo leis an dara fadhb freisin: c√© go bhfuil <code>query</code> agus <code>file_path</code>
is athr√≥ga cumra√≠ochta iad d√°r gcl√°r, √∫s√°idtear athr√≥ga cos√∫il le <code>contents</code>
chun loighic an chl√°ir a fheidhmi√∫. D√° fhaide a √©ir√≠onn <code>main</code>, is amhlaidh is m√≥ athr√≥g
beidh orainn sc√≥ip a thabhairt isteach; d√° mh√©ad athr√≥g at√° againn i raon feidhme, is amhlaidh is deacra
beidh s√© s√∫il a choinne√°il ar chusp√≥ir gach ceann acu. Is fearr a ghr√∫p√°il
athr√≥ga cumra√≠ochta in aon strucht√∫r amh√°in chun a gcusp√≥ir a dh√©anamh soil√©ir.</p>
<p>Is √≠ an tr√≠√∫ fadhb n√° gur √∫s√°ideamar <code>expect</code> chun teachtaireacht earr√°ide a phriont√°il nuair a
theipeann ar l√©amh an chomhaid, ach n√≠ phrionna√≠onn an teachtaireacht earr√°ide ach <code>Should have been able to read the file</code>. Is f√©idir le l√©amh comhaid teip ar roinnt beala√≠: do
mar shampla, seans go bhfuil an comhad ar iarraidh, n√≥ seans nach bhfuil cead againn √© a oscailt.
Faoi l√°thair, beag beann ar an gc√°s, ba mhaith linn an teachtaireacht earr√°ide c√©anna a phriont√°il lena haghaidh
gach rud, nach dtabharfadh an t-√∫s√°ideoir aon fhaisn√©is!</p>
<p>Ceathr√∫, √∫s√°idimid <code>expect</code> chun earr√°id a l√°imhse√°il, agus m√° ritheann an t-√∫s√°ideoir √°r gcl√°r
gan d√≥thain arg√≥int√≠ a shonr√∫, gheobhaidh siad earr√°id <code>index out of bounds</code>
√≥ Rust nach m√≠n√≠onn go soil√©ir an fhadhb. B‚Äôfhearr d√° mbeadh an
bh√≠ an c√≥d l√°imhse√°la earr√°id√≠ in aon √°it amh√°in agus mar sin n√≠ raibh ach √°it amh√°in ag coth√≥ir√≠ sa todhcha√≠
dul i gcomhairle leis an gc√≥d m√°s g√° an loighic l√°imhse√°la earr√°id√≠ a athr√∫. Tar √©is na
Cinnteoidh c√≥d l√°imhse√°la earr√°id√≠ in aon √°it amh√°in go bhfuilimid ag priont√°il teachtaireachta√≠
beidh br√≠ leis sin d√°r n-√∫s√°ideoir√≠ deiridh.</p>
<p>Rachaimid i ngleic leis na ceithre fhadhb seo tr√≠n√°r dtionscadal a athmhonar√∫.</p>
<h3 id="imn√≠-maidir-le-tionscadail-dh√©n√°rtha-a-scaradh"><a class="header" href="#imn√≠-maidir-le-tionscadail-dh√©n√°rtha-a-scaradh">Imn√≠ maidir le Tionscadail Dh√©n√°rtha a Scaradh</a></h3>
<p>An fhadhb eagra√≠ocht√∫il a bhaineann le freagracht as tascanna iolracha a leithdh√°ileadh ar
t√° an fheidhm <code>main</code> coitianta i go leor tionscadal d√©n√°rtha. Mar thoradh air sin, an Rust
pobail i ndiaidh treoirl√≠nte a fhorbairt chun na h√°bhair imn√≠ ar leith a roinnt a
cl√°r d√©n√°rtha nuair a thosa√≠onn <code>main</code> ag √©ir√≠ m√≥r. T√° an m√©id seo a leanas ag an bpr√≥iseas seo
c√©imeanna:</p>
<ul>
<li>Roinn do chl√°r i gcomhad <em>main.rs</em> agus i gcomhad <em>lib.rs</em> agus bog do
loighic an chl√°ir chun <em>lib.rs</em>.</li>
<li>Chomh fada agus a bhfuil do loighic pars√°la ord√∫ beag, f√©adfaidh s√© fanacht i
<em>main.rs</em>.</li>
<li>Nuair a thosa√≠onn loighic pars√°la na n-orduithe ag √©ir√≠ n√≠os casta, bain amach √≠
√≥ <em>main.rs</em> agus bog √© go <em>lib.rs</em>.</li>
</ul>
<p>Na freagrachta√≠ a fhanann sa <code>main</code> tar √©is an phr√≥isis seo
ba ch√≥ir a bheith teoranta d√≥ibh seo a leanas:</p>
<ul>
<li>Ag glaoch ar an l√≠ne ordaithe loighic pars√°la leis na luachanna arg√≥int</li>
<li>Aon chumra√≠ocht eile a chur ar bun</li>
<li>Ag glaoch ar fheidhm <code>run</code> in <em>lib.rs</em></li>
<li>An earr√°id a l√°imhse√°il m√° fhilleann <code>run</code> earr√°id</li>
</ul>
<p>Baineann an patr√∫n seo le h√°bhair imn√≠ a scaradh: <em>main.rs</em> handles running the
L√°imhse√°lann an cl√°r agus <em>lib.rs</em> loighic uile an taisc at√° idir l√°mha. Mar gheall ort
n√≠ f√©idir an fheidhm <code>main</code> a th√°st√°il go d√≠reach, ligeann an strucht√∫r seo duit gach ceann d√≠obh a th√°st√°il
loighic do chl√°ir tr√≠ √© a aistri√∫ go feidhmeanna in <em>lib.rs</em>. An c√≥d a
Beidh iarsma√≠ i <em>main.rs</em> beag go leor chun a cruinneas a fh√≠or√∫ tr√≠ l√©amh
√©. D√©anaimis √°r gcl√°r a athoibri√∫ tr√≠d an bpr√≥iseas seo a lean√∫int.</p>
<h4 id="pars√°la√≠-arg√≥int-a-bhaint-as"><a class="header" href="#pars√°la√≠-arg√≥int-a-bhaint-as">Pars√°la√≠ Arg√≥int a Bhaint as</a></h4>
<p>Bainfimid an fheidhmi√∫lacht chun arg√≥int√≠ a phars√°il isteach in fheidhm a
Glaofaidh <code>main</code> chun ullmh√∫ le haghaidh loighic pars√°la na n-orduithe a bhogadh go dt√≠
<em>src/lib.rs</em>. L√©ir√≠onn liost√∫ 12-5 t√∫s nua <code>main</code> a ghlaonn ceann nua
feidhm <code>parse_config</code>, a shaineoimid in <em>src/main.rs</em> faoi l√°thair.</p>
<Listing number="12-5" file-name="src/main.rs" caption="Extracting a `parse_config` function from `main`">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span>fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let (query, file_path) = parse_config(&amp;args);

    // --snip--
<span class="boring">
</span><span class="boring">    println!("Searching for {query}");
</span><span class="boring">    println!("In file {file_path}");
</span><span class="boring">
</span><span class="boring">    let contents = fs::read_to_string(file_path)
</span><span class="boring">        .expect("Should have been able to read the file");
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span>}

fn parse_config(args: &amp;[String]) -&gt; (&amp;str, &amp;str) {
    let query = &amp;args[1];
    let file_path = &amp;args[2];

    (query, file_path)
}</code></pre>
</Listing>
<p>T√°imid f√≥s ag baili√∫ na n-arg√≥int√≠ ord√∫ i veicteoir, ach ina ionad sin
an luach arg√≥inte ag inn√©acs 1 a shannadh don athr√≥g <code>query</code> agus an
luach arg√≥inte ag inn√©acs 2 leis an athr√≥g <code>file_path</code> laistigh den <code>main</code>
fheidhm, cuirimid an veicteoir ioml√°n ar aghaidh chuig an fheidhm <code>parse_config</code>. T√° an
Coinn√≠onn feidhm <code>parse_config</code> an loighic a shocra√≠onn c√©n arg√≥int
ina athr√≥g agus a th√©ann na luachanna ar ais go dt√≠ <code>main</code>. Crutha√≠mid f√≥s
na hathr√≥ga <code>query</code> agus <code>file_path</code> i <code>main</code>, ach n√≠l na hathr√≥ga <code>main</code> a thuilleadh
freagracht as cinneadh a dh√©anamh ar an gcaoi a nd√©anann na harg√≥int√≠ agus na hathr√≥ga ceannl√≠ne
comhfhreagras.</p>
<p>Seans go bhfuil an chos√∫lacht ar an sc√©al go bhfuil an t-athoibri√∫ seo r√≥-mhillte d√°r gcl√°r beag, ach t√°imid ag athmhacr√∫
i gc√©imeanna beaga incriminteacha. Tar √©is an t-athr√∫ seo a dh√©anamh, rith an cl√°r ar√≠s go
deimhnigh go n-oibr√≠onn an phars√°il arg√≥inte f√≥s. Is maith do dhul chun cinn a sheice√°il
go minic, chun cuidi√∫ le c√∫is fadhbanna a aithint nuair a tharla√≠onn siad.</p>
<h4 id="luachanna-cumra√≠ochta-a-ghr√∫p√°il"><a class="header" href="#luachanna-cumra√≠ochta-a-ghr√∫p√°il">Luachanna Cumra√≠ochta a Ghr√∫p√°il</a></h4>
<p>Is f√©idir linn c√©im bheag eile a ghlacadh chun an fheidhm <code>parse_config</code> a fheabhs√∫ tuilleadh.
Faoi l√°thair, t√°imid ag filleadh tuple, ach ansin briseann muid √© sin l√°ithreach
tuple i gcodanna aonair ar√≠s. Is comhartha √© seo b‚Äôfh√©idir nach bhfuil againn
an astarraingt ceart f√≥s.</p>
<p>T√°scaire eile a thaispe√°nann go bhfuil sp√°s le feabhs√∫ n√° an chuid <code>config</code>
de <code>parse_config</code>, a thugann le tuiscint go bhfuil gaol idir an d√° luach a thabharfaimid ar ais agus
t√° an d√° chuid mar chuid de luach cumra√≠ochta amh√°in. N√≠limid √° chur in i√∫l seo faoi l√°thair
br√≠ i strucht√∫r na sonra√≠ seachas an d√° luach a ghr√∫p√°il isteach
tuple; ina ionad sin cuirfimid an d√° luach in aon strucht√∫r amh√°in agus tabharfaidh muid gach ceann de na
struct r√©ims√≠ ainm br√≠. D√©anfaidh s√© sin n√≠os fusa don todhcha√≠
lucht cothabh√°la an ch√≥id seo chun tuiscint a fh√°il ar an gcaoi a mbaineann na luachanna difri√∫la le gach ceann acu
eile agus cad √© an cusp√≥ir at√° leo.</p>
<p>L√©ir√≠onn liost√∫ 12-6 na feabhsuithe ar an bhfeidhm <code>parse_config</code>.</p>
<Listing number="12-6" file-name="src/main.rs" caption="Refactoring `parse_config` to return an instance of a `Config` struct">
<pre><code class="language-rust should_panic noplayground"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span>fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let config = parse_config(&amp;args);

    println!("Searching for {}", config.query);
    println!("In file {}", config.file_path);

    let contents = fs::read_to_string(config.file_path)
        .expect("Should have been able to read the file");

    // --snip--
<span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span>}

struct Config {
    query: String,
    file_path: String,
}

fn parse_config(args: &amp;[String]) -&gt; Config {
    let query = args[1].clone();
    let file_path = args[2].clone();

    Config { query, file_path }
}</code></pre>
</Listing>
<p>T√° strucht√∫r darb ainm <code>Config</code> curtha leis againn le go mbeidh r√©ims√≠ darb ainm <code>query</code> agus
<code>file_path</code>. L√©ir√≠onn s√≠ni√∫ <code>parse_config</code> anois go bhfilleann s√© a
luach <code>Config</code>. I gcorp <code>parse_config</code>, √°it a raibh muid ag filleadh
slisn√≠ teaghr√°n a dh√©anann tagairt do luachanna teaghr√°n in <code>args</code>, sain√≠mid anois <code>Config</code>
luachanna <code>String</code> faoi √∫in√©ireacht a bheith ann. Is √© an athr√≥g <code>args</code> i <code>main</code> √∫in√©ir
luachanna na harg√≥int√≠ agus n√≠l s√© ach ag ligean don fheidhm <code>parse_config</code> a fh√°il ar iasacht
orthu, rud a chialla√≠onn go s√°r√≥dh muid rialacha iasachtaithe Rust d√° nd√©anfadh <code>Config</code> iarracht a dh√©anamh
√∫in√©ireacht na luachanna in <code>args</code>.</p>
<p>T√° roinnt beala√≠ inar f√©idir linn na sonra√≠ <code>String</code> a bhainisti√∫; an √©asca,
C√© go bhfuil s√© beag√°n m√≠-√©ifeachtach, is √© an bealach an modh <code>clone</code> a ghlaoch ar na luachanna.
D√©anfaidh s√© seo c√≥ip ioml√°n de na sonra√≠ don sampla <code>Config</code> is f√©idir a bheith agat, c√© acu
t√≥gann s√© n√≠os m√≥ ama agus cuimhne n√° tagairt do na sonra√≠ teaghr√°n a st√≥r√°il.
Mar sin f√©in, d√©anann chl√≥n√°il na sonra√≠ √°r gc√≥d an-simpl√≠ mar gheall orainn
n√≠ g√° saolr√© na dtagairt√≠ a bhainisti√∫; sa ch√°s seo,
Is fi√∫ comhbhabht√°il fi√∫ntach √© feidhm√≠ocht bheag a thabhairt suas chun simpl√≠ocht a bhaint amach.</p>
<blockquote>
<h3 id="na-comhsh√≥iteanna-a-bhaineann-le-clone-a-√ös√°id"><a class="header" href="#na-comhsh√≥iteanna-a-bhaineann-le-clone-a-√ös√°id">Na Comhsh√≥iteanna a bhaineann le <code>clone</code> a √ös√°id</a></h3>
<p>T√° an claonadh ann i measc go leor Rustaceans gan √∫s√°id a bhaint as <code>clone</code> lena dheisi√∫
fadhbanna √∫in√©ireachta mar gheall ar a chostas ama rite. I
<a href="ch13-00-functional-features.html">Caibidil 13</a><!-- neamhaird a dh√©anamh -->, beidh t√∫ ag foghlaim conas √© a √∫s√°id n√≠os √©ifeachta√≠
modhanna sa chine√°l seo c√°sanna. Ach faoi l√°thair, t√° s√© ceart go leor c√∫pla a ch√≥ipe√°il
teaghr√°in chun lean√∫int ar aghaidh ag d√©anamh dul chun cinn mar n√≠ dh√©anfaidh t√∫ ach na c√≥ipeanna seo
uair amh√°in agus t√° cos√°n do chomhaid agus teaghr√°n na gceisteanna an-bheag. Is fearr a bheith agat
cl√°r oibre at√° beag√°n m√≠-√©ifeachtach n√° iarracht a dh√©anamh c√≥d hyperoptimize
ar do ch√©ad phas. De r√©ir mar a √©ir√≠onn t√∫ n√≠os m√≥ taith√≠ le Rust, beidh s√©
n√≠os √©asca tos√∫ leis an r√©iteach is √©ifeachta√≠, ach faoi l√°thair, t√°
bre√° inghlactha <code>clone</code> a ghlaoch.</p>
</blockquote>
<p>T√° <code>main</code> nuashonraithe againn agus mar sin cuireann s√© an t-√∫s <code>Config</code> ar ais ag
<code>parse_config</code> isteach in athr√≥g darb ainm <code>config</code>, agus nuashonra√≠omar an c√≥d sin
d'√∫s√°idt√≠ na hathr√≥ga ar leith <code>query</code> agus <code>file_path</code> roimhe seo mar sin √∫s√°ideann s√© anois
na r√©ims√≠ ar an strucht√∫r <code>Config</code> ina ionad sin.</p>
<p>Anois cuireann √°r gc√≥d in i√∫l n√≠os soil√©ire go bhfuil baint ag <code>query</code> agus <code>file_path</code> agus
gurb √© an cusp√≥ir at√° leo n√° conas a oibreoidh an cl√°r a chumr√∫. C√≥d ar bith a
√∫s√°ideann a fhios na luachanna seo chun iad a fh√°il sa ch√°s <code>config</code> sna r√©ims√≠
ainmnithe as a gcusp√≥ir.</p>
<h4 id="cruthaitheoir-√°-chruth√∫-do-config"><a class="header" href="#cruthaitheoir-√°-chruth√∫-do-config">Cruthaitheoir √° Chruth√∫ do <code>Config</code></a></h4>
<p>Go dt√≠ seo, t√° an loighic at√° freagrach as an l√≠ne ordaithe a phars√°il bainte amach againn
arg√≥int√≠ √≥ <code>main</code> agus √© a chur san fheidhm <code>parse_config</code>. Ag d√©anamh amhlaidh
chabhraigh s√© linn a fheice√°il go raibh gaol idir na luachanna <code>query</code> agus <code>file_path</code>, agus sin
Ba cheart caidreamh a chur in i√∫l in√°r gc√≥d. Chuireamar strucht√∫r <code>Config</code> leis ansin
ainmnigh an cusp√≥ir gaolmhar le <code>query</code> agus <code>file_path</code> agus a bheith in ann an
ainmneacha luachanna mar strucht√∫r ainmneacha r√©imse √≥n bhfeidhm <code>parse_config</code>.</p>
<p>Mar sin anois gurb √© cusp√≥ir na feidhme <code>parse_config</code> <code>Config</code> a chruth√∫
mar shampla, is f√©idir linn <code>parse_config</code> a athr√∫ √≥ fheidhm shimpl√≠ go feidhm
darb ainm <code>new</code> a bhaineann leis an strucht√∫r <code>Config</code>. Ag d√©anamh an athraithe seo
beidh an c√≥d n√≠os idiomatic. Is f√©idir linn c√°sanna de chine√°lacha a chruth√∫ sa
leabharlann caighde√°nach, mar <code>String</code>, tr√≠ <code>String::new</code> a ghlaoch. Mar an gc√©anna, le
ag athr√∫ <code>parse_config</code> go feidhm <code>new</code> a bhaineann le <code>Config</code>, d√©anfaimid
bheith in ann c√°sanna de <code>Config</code> a chruth√∫ tr√≠ <code>Config::new</code> a ghlaoch. Liost√°il 12-7
l√©ir√≠onn s√© na hathruithe is g√° d√∫inn a dh√©anamh.</p>
<Listing number="12-7" file-name="src/main.rs" caption="Changing `parse_config` into `Config::new`">
<pre><code class="language-rust should_panic noplayground"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span>fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let config = Config::new(&amp;args);
<span class="boring">
</span><span class="boring">    println!("Searching for {}", config.query);
</span><span class="boring">    println!("In file {}", config.file_path);
</span><span class="boring">
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)
</span><span class="boring">        .expect("Should have been able to read the file");
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span>
    // --snip--
}

// --snip--

<span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Config {
    fn new(args: &amp;[String]) -&gt; Config {
        let query = args[1].clone();
        let file_path = args[2].clone();

        Config { query, file_path }
    }
}</code></pre>
</Listing>
<p>T√° <code>main</code> nuashonraithe againn mar a raibh muid ag glaoch <code>parse_config</code> chun glaoch a chur air ina ionad sin
<code>Config::new</code>. D'athraigh muid an t-ainm <code>parse_config</code> go <code>new</code> agus bhogamar √©
laistigh de bhloc <code>impl</code>, a nascann an fheidhm <code>new</code> le <code>Config</code>. Bain triail as
an c√≥d seo a thioms√∫ ar√≠s chun a chinnti√∫ go n-oibr√≠onn s√©.</p>
<h3 id="l√°imhse√°il-earr√°id√≠-a-shocr√∫"><a class="header" href="#l√°imhse√°il-earr√°id√≠-a-shocr√∫">L√°imhse√°il Earr√°id√≠ a Shocr√∫</a></h3>
<p>Anois oibreoimid ar √°r l√°imhse√°il earr√°id√≠ a shocr√∫. Tabhair chun cuimhne go bhfuil iarracht √° dh√©anamh rochtain a fh√°il
is iad na luachanna sa veicteoir <code>args</code> ag inn√©acs 1 n√≥ inn√©acs 2 a chuirfidh an r√≠omhchl√°r faoi deara
scaoll m√° t√° n√≠os l√∫ n√° tr√≠ mh√≠r sa veicteoir. Bain triail as an gcl√°r a rith
gan aon arg√≥int√≠; beidh s√© cuma mar seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep`
thread 'main' panicked at src/main.rs:27:21:
index out of bounds: the len is 1 but the index is 1
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>An l√≠ne <code>index out of bounds: the len is 1 but the index is 1</code> an t-inn√©acs earr√°id
teachtaireacht at√° beartaithe le haghaidh r√≠omhchl√°raitheoir√≠. N√≠ chuideoidh s√© len√°r n-√∫s√°ideoir√≠ deiridh a thuiscint cad √©
ba ch√≥ir d√≥ibh a dh√©anamh ina ionad. D√©anaimis √© sin a shocr√∫ anois.</p>
<h4 id="an-teachtaireacht-earr√°ide-a-fheabhs√∫"><a class="header" href="#an-teachtaireacht-earr√°ide-a-fheabhs√∫">An Teachtaireacht Earr√°ide a Fheabhs√∫</a></h4>
<p>I Liost√∫ 12-8, cuirimid seic san fheidhm <code>new</code> a dheimhneoidh go bhfuil an
t√° an tslis fada go leor roimh rochtain a fh√°il ar inn√©acs 1 agus inn√©acs 2. Mura bhfuil
fada go leor, scaoileann an cl√°r agus taispe√°nann s√© teachtaireacht earr√°ide n√≠os fearr.</p>
<Listing number="12-8" file-name="src/main.rs" caption="Adding a check for the number of arguments">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let config = Config::new(&amp;args);
</span><span class="boring">
</span><span class="boring">    println!("Searching for {}", config.query);
</span><span class="boring">    println!("In file {}", config.file_path);
</span><span class="boring">
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)
</span><span class="boring">        .expect("Should have been able to read the file");
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span>    // --snip--
    fn new(args: &amp;[String]) -&gt; Config {
        if args.len() &lt; 3 {
            panic!("not enough arguments");
        }
        // --snip--
<span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Config { query, file_path }
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>T√° an c√≥d seo cos√∫il le <a href="ch09-03-to-panic-or-not-to-panic.html#creating-custom-types-for-validation">an fheidhm <code>Guess::new</code> a scr√≠obhamar sa Liost√∫
9-13</a> <!-- neamhaird -->, nuair a thugamar <code>panic!</code> nuair a
Bh√≠ arg√≥int <code>value</code> as raon na luachanna bail√≠. In ionad a sheice√°il le haghaidh
raon luachanna anseo, t√°imid ag seice√°il go bhfuil fad na <code>args</code> ar a laghad
Is f√©idir le <code>3</code> agus an chuid eile den fheidhm a oibri√∫ ar an toimhde go seo
T√° an coinn√≠oll comhl√≠onta. M√° t√° n√≠os l√∫ n√° tr√≠ mh√≠r ag <code>args</code>, an coinn√≠oll seo
beidh s√© <code>true</code>, agus tugaimid an macra <code>panic!</code> chun deireadh a chur leis an gcl√°r l√°ithreach.</p>
<p>Leis na l√≠nte breise c√≥d seo i <code>new</code>, rithfimid an cl√°r gan aon cheann
arg√≥int√≠ ar√≠s f√©achaint c√©n chuma at√° ar an earr√°id anois:</p>
<pre><code class="language-console">$ cargo run
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep`
thread 'main' panicked at src/main.rs:26:13:
not enough arguments
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>T√° an t-aschur seo n√≠os fearr: t√° teachtaireacht earr√°ide r√©as√∫nta againn anois. Mar sin f√©in, t√°imid freisin
b√≠odh faisn√©is sheachtrach againn nach dteasta√≠onn uainn a thabhairt d√°r n-√∫s√°ideoir√≠. B'fh√©idir go bhfuil an
n√≠ h√© an teicn√≠c a d‚Äô√∫s√°ideamar i Liost√∫ 9-13 an ceann is fearr le h√∫s√°id anseo: glao chuig
T√° <code>panic!</code> n√≠os oiri√∫na√≠ d'fhadhb r√≠omhchl√°raithe n√° d'fhadhb √∫s√°ide,
<a href="ch09-03-to-panic-or-not-to-panic.html#guidelines-for-error-handling">mar a pl√©adh i gCaibidil 9</a> <!-- neamhaird -->. Ina ionad sin,
√∫s√°idfimid an teicn√≠ocht eile ar fhoghlaim t√∫ faoi i gCaibidil 9‚Äî<a href="ch09-02-recoverable-errors-with-result.html">ag filleadh a
<code>Result</code></a> <!-- neamhaird --> a thugann le fios gur √©irigh n√≥ go bhfuil earr√°id ann.</p>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="returning-a-result-from-new-instead-of-calling-panic"></a></p>
<h4 id="result-a-fhilleadh-in-ionad-panic-a-ghlaoch"><a class="header" href="#result-a-fhilleadh-in-ionad-panic-a-ghlaoch"><code>Result</code> a Fhilleadh In ionad <code>panic!</code> a ghlaoch</a></h4>
<p>Is f√©idir linn ina ionad sin luach <code>Result</code> a thabhairt ar ais ina mbeidh sampla <code>Config</code> istigh
an c√°s rath√∫il agus d√©anfaidh s√© cur s√≠os ar an bhfadhb sa ch√°s earr√°ide. T√°imid freisin
ag dul a athr√∫ ainm na feidhme √≥ <code>new</code> go <code>build</code> mar go leor
t√° r√≠omhchl√°raitheoir√≠ ag s√∫il nach dteipfidh ar fheidhmeanna <code>new</code> cho√≠che. Nuair a bh√≠onn <code>Config::build</code>'
Ag cumars√°id le <code>main</code>, is f√©idir linn an cine√°l <code>Result</code> a √∫s√°id chun a chur in i√∫l go raibh a
fadhb. Ansin is f√©idir linn <code>main</code> a athr√∫ chun malairt <code>Err</code> a thiont√∫ ina leagan eile
earr√°id phraitici√∫il d√°r n-√∫s√°ideoir√≠ gan an t√©acs m√°guaird faoi <code>thread 'main'</code> agus <code>RUST_BACKTRACE</code> is c√∫is le glaoch chun <code>panic!</code>.</p>
<p>L√©ir√≠onn liost√∫ 12-9 na hathruithe is g√° d√∫inn a dh√©anamh ar luach aischuir an
feidhm a bhfuilimid ag tabhairt 'Cumra√≠ocht::build' air anois agus corp na feidhme at√° ag teast√°il
chun <code>Result</code> a thabhairt ar ais. Tabhair faoi deara nach tioms√≥far √© seo go dt√≠ go nuashonr√≥imid <code>main</code> mar
Bhuel, rud a dh√©anfaimid sa ch√©ad liost√∫ eile.</p>
<Listing number="12-9" file-name="src/main.rs" caption="Returning a `Result` from `Config::build`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let config = Config::new(&amp;args);
</span><span class="boring">
</span><span class="boring">    println!("Searching for {}", config.query);
</span><span class="boring">    println!("In file {}", config.file_path);
</span><span class="boring">
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)
</span><span class="boring">        .expect("Should have been able to read the file");
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Config {
    fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
        if args.len() &lt; 3 {
            return Err("not enough arguments");
        }

        let query = args[1].clone();
        let file_path = args[2].clone();

        Ok(Config { query, file_path })
    }
}</code></pre>
</Listing>
<p>Tugann √°r bhfeidhm <code>build</code> <code>Result</code> ar ais agus sampla <code>Config</code> sa rath
c√°s agus teaghr√°n litri√∫il sa ch√°s earr√°ide. Beidh √°r luachanna earr√°ide i gc√≥na√≠
t√©adlitreacha a bhfuil an saolr√© <code>'static</code> acu.</p>
<p>T√° dh√° athr√∫ d√©anta againn i gcorp na feidhme: in ionad <code>panic!</code> a ghlaoch
nuair nach n-√©ir√≠onn leis an √∫s√°ideoir go leor arg√≥int√≠ a dh√©anamh, tugaimid luach <code>Err</code> ar ais anois, agus
t√° an luach aischuir <code>Config</code> fillte againn i <code>OK</code>. D√©anann na hathruithe seo an
feidhm clo√≠ lena s√≠ni√∫ cine√°il nua.</p>
<p>M√° chuirtear luach <code>Err</code> ar ais √≥ <code>Config::build</code> ceada√≠onn s√© don phr√≠omhfheidhm
l√°imhse√°il an luach <code>Result</code> a cuireadh ar ais √≥n bhfeidhm <code>build</code> agus scoir an
pr√≥ise√°il n√≠os glaine i gc√°s earr√°ide.</p>
<!-- Old headings. Do not remove or links may break. --> 
<p><a id="calling-confignew-and-handling-errors"></a></p>
<h4 id="ag-glaoch-configbuild-agus-ag-l√°imhse√°il-earr√°id√≠"><a class="header" href="#ag-glaoch-configbuild-agus-ag-l√°imhse√°il-earr√°id√≠">Ag glaoch <code>Config::build</code> agus ag L√°imhse√°il Earr√°id√≠</a></h4>
<p>Chun an c√°s earr√°ide a l√°imhse√°il agus teachtaireacht at√° √©asca le h√∫s√°id a phriont√°il, n√≠ m√≥r d√∫inn nuashonr√∫ a dh√©anamh
<code>main</code> chun an <code>Result</code> at√° √° chur ar ais ag <code>Config::build</code> a l√°imhse√°il, mar a thaispe√°ntar in
Liost√°il 12-10. Glacfaimid an fhreagracht as an l√≠ne ceannais a fh√°g√°il freisin
uirlis le c√≥d earr√°ide nonzero ar shi√∫l √≥ <code>panic!</code> agus ina ionad sin a chur i bhfeidhm ag
l√°mh. Is gn√°s √© st√°das scoir nonzero chun comhartha a thabhairt don phr√≥iseas sin
ar a dtugtar √°r gcl√°r gur scoir an cl√°r le staid earr√°ide.</p>
<Listing number="12-10" file-name="src/main.rs" caption="Exiting with an error code if building a `Config` fails">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span>use std::process;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let config = Config::build(&amp;args).unwrap_or_else(|err| {
        println!("Problem parsing arguments: {err}");
        process::exit(1);
    });

    // --snip--
<span class="boring">
</span><span class="boring">    println!("Searching for {}", config.query);
</span><span class="boring">    println!("In file {}", config.file_path);
</span><span class="boring">
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)
</span><span class="boring">        .expect("Should have been able to read the file");
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Sa liost√∫ seo, d‚Äô√∫s√°ideamar modh n√°r chl√∫daigh muid go mion go f√≥ill:
<code>unwrap_or_else</code>, a shainmh√≠n√≠tear ar <code>Result&lt;T, E&gt;</code> ag an ngn√°thleabharlann.
Tr√≠ √∫s√°id a bhaint as <code>unwrap_or_else</code> is f√©idir linn earr√°id shaincheaptha √©igin nach mbaineann le <code>panic!</code> a shaini√∫
l√°imhse√°il. M√°s luach <code>OK</code> √© an <code>Result</code>, t√° iompar an mhodha seo cos√∫il
go <code>unwrap</code>: tugann s√© ar ais an luach inmhe√°nach at√° √° chumhdach ag <code>Ok</code>. Mar sin f√©in, m√° t√° an
Is luach <code>Err</code> √© an luach, glaonn an modh seo an c√≥d sa <em>closure</em>, is √© sin
feidhm gan ainm a shain√≠mid agus a thabharaimid mar arg√≥int go <code>unwrap_or_else</code>.
Cl√∫d√≥imid d√∫nadh n√≠os mine i <a href="ch13-00-functional-features.html">Caibidil 13</a><!-- neamhaird -->. Le haghaidh
anois, n√≠l le d√©anamh agat ach fios a bheith agat go rachaidh <code>unwrap_or_else</code> thar luach inmhe√°nach
an <code>Err</code>, arb √≠ sa ch√°s seo an teaghr√°n statach <code>"not enough arguments"</code>
a chuireamar i Liosta 12-9, len√°r nd√∫nadh san arg√≥int <code>err</code> that
dealraitheach idir na p√≠opa√≠ ingearach. Is f√©idir an c√≥d sa d√∫nadh a √∫s√°id ansin an
luach <code>err</code> nuair a ritheann s√©.</p>
<p>Chuireamar l√≠ne ‚Äò√∫s√°ide‚Äô nua leis chun <code>process</code> a thabhairt √≥n ngn√°thleabharlann isteach
sc√≥ip. N√≠l sa ch√≥d sa d√∫nadh a re√°cht√°lfar sa ch√°s earr√°ide ach dh√°
l√≠nte: priont√°ilimid an luach <code>err</code> agus ansin glaoimid <code>process::exit</code>. T√° an
stopfaidh an fheidhm <code>process::exit</code> an cl√°r l√°ithreach agus seolfaidh s√© an
uimhir a ritheadh ‚Äã‚Äãmar ch√≥d st√°dais scoir. T√° s√© seo cos√∫il leis an
L√°imhse√°il bunaithe ar <code>panic!</code> a d'√∫s√°ideamar i Liosta 12-8, ach n√≠ fhaighimid an l√°mh in uachtar ar fad a thuilleadh
aschur breise. D√©anaimis iarracht √©:</p>
<pre><code class="language-console">$ cargo run
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.48s
     Running `target/debug/minigrep`
Problem parsing arguments: not enough arguments
</code></pre>
<p>Go hiontach! T√° an t-aschur seo i bhfad n√≠os cairdi√∫la d√°r n-√∫s√°ideoir√≠.</p>
<h3 id="loighic-√°-baint-as-main"><a class="header" href="#loighic-√°-baint-as-main">Loighic √° baint as <code>main</code></a></h3>
<p>Anois go bhfuil an pars√°il cumra√≠ochta cr√≠ochnaithe againn, d√©anaimis dul chuig
loighic an chl√°ir. Mar a d√∫irt muid in <a href="ch12-03-improving-error-handling-and-modularity.html#scaradh-imn%C3%AD-do-thionscadail-d%C3%A9n%C3%A1rtha">‚ÄúImn√≠ a Scaradh maidir le D√©n√°rtha
Tionscadail‚Äù</a><!-- neamhaird a dh√©anamh -->, d√©anfaimid
bain feidhm darb ainm <code>run</code> a choinneoidh an loighic ar fad at√° sa
<code>main</code> nach bhfuil baint aici le cumra√≠ocht n√≥ l√°imhse√°il a shocr√∫
earr√°id√≠. Nuair a bheidh muid cr√≠ochnaithe, beidh <code>main</code> gonta agus √©asca le f√≠or√∫
ini√∫chadh, agus beimid in ann t√°st√°lacha a scr√≠obh don loighic eile ar fad.</p>
<p>L√©ir√≠onn liost√∫ 12-11 an fheidhm <code>run</code> asbhainte. Faoi l√°thair, n√≠limid ach ag d√©anamh
feabhas beag, incriminteach ar bhaint na feidhme. T√°imid f√≥s
ag saini√∫ na feidhme in <em>src/main.rs</em>.</p>
<Listing number="12-11" file-name="src/main.rs" caption="Extracting a `run` function containing the rest of the program logic">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">use std::process;
</span><span class="boring">
</span>fn main() {
    // --snip--

<span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let config = Config::build(&amp;args).unwrap_or_else(|err| {
</span><span class="boring">        println!("Problem parsing arguments: {err}");
</span><span class="boring">        process::exit(1);
</span><span class="boring">    });
</span><span class="boring">
</span>    println!("Searching for {}", config.query);
    println!("In file {}", config.file_path);

    run(config);
}

fn run(config: Config) {
    let contents = fs::read_to_string(config.file_path)
        .expect("Should have been able to read the file");

    println!("With text:\n{contents}");
}

// --snip--
<span class="boring">
</span><span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Cuims√≠onn an fheidhm <code>run</code> an loighic ar fad at√° f√°gtha √≥ <code>main</code>, ag tos√∫
√≥ l√©amh an chomhaid. Glacann an fheidhm <code>run</code> an sampla <code>Config</code> mar
arg√≥int.</p>
<h4 id="earr√°id√≠-ag-filleadh-√≥n-bhfeidhm-run"><a class="header" href="#earr√°id√≠-ag-filleadh-√≥n-bhfeidhm-run">Earr√°id√≠ Ag Filleadh √≥n bhFeidhm <code>run</code></a></h4>
<p>Leis an loighic cl√°ir at√° f√°gtha scartha isteach san fheidhm <code>run</code>, is f√©idir linn
feabhas a chur ar l√°imhse√°il earr√°id√≠, mar a rinneamar le <code>Config::build</code> i Liost√∫ 12-9.
In ionad ligean don chl√°r scaoll a dh√©anamh ach glaoch ar <code>expect</code>, an <code>run</code>
tabharfaidh feidhm <code>Result&lt;T, E&gt;</code> ar ais nuair a th√©ann rud √©igin m√≠cheart. Beidh s√© seo in i√∫l
D√©anaimid an loighic a bhaineann le l√°imhse√°il earr√°id√≠ a chomhdhl√∫th√∫ tuilleadh i <code>main</code> in a
bealach √©asca le h√∫s√°id. L√©ir√≠onn liost√∫ 12-12 na hathruithe is g√° d√∫inn a dh√©anamh ar an
s√≠ni√∫ agus corp <code>run</code>.</p>
<Listing number="12-12" file-name="src/main.rs" caption="Changing the `run` function to return `Result`">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::fs;
</span><span class="boring">use std::process;
</span>use std::error::Error;

// --snip--

<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let config = Config::build(&amp;args).unwrap_or_else(|err| {
</span><span class="boring">        println!("Problem parsing arguments: {err}");
</span><span class="boring">        process::exit(1);
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    println!("Searching for {}", config.query);
</span><span class="boring">    println!("In file {}", config.file_path);
</span><span class="boring">
</span><span class="boring">    run(config);
</span><span class="boring">}
</span><span class="boring">
</span>fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let contents = fs::read_to_string(config.file_path)?;

    println!("With text:\n{contents}");

    Ok(())
}
<span class="boring">
</span><span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>T√° tr√≠ athr√∫ shuntasacha d√©anta againn anseo. Ar dt√∫s, d'athraigh muid an cine√°l tuairisce√°in de
an fheidhm <code>run</code> go <code>Result&lt;(), Box&lt;dyn Error&gt;&gt;</code>. An fheidhm seo roimhe seo
ar ais an cine√°l aonaid, <code>()</code>, agus a choinne√°il orainn mar an luach ar ais sa
C√°s <code>OK</code>.</p>
<p>Don chine√°l earr√°ide, d'√∫s√°ideamar an <em>trait object</em> <code>Box&lt;dyn Error&gt;</code> (agus t√°
thug <code>std::error::Error</code> isteach sa sc√≥ip le r√°iteas <code>use</code> ag an mbarr).
Cl√∫d√≥imid r√©ada trait i <a href="ch18-00-oop.html">Caibidil 18</a><!-- neamhaird -->. Chun anois, d√≠reach
B√≠odh a fhios agat go gcialla√≠onn <code>Box&lt;dyn Error&gt;</code> go dtabharfaidh an fheidhm cine√°l ar ais a
cuireann s√© an trait <code>Error</code> i bhfeidhm, ach n√≠ g√° d√∫inn c√©n cine√°l ar leith a shonr√∫
beidh an luach tuairisce√°in. Tugann s√© seo sol√∫bthacht d√∫inn chun luachanna earr√°ide a thabhairt ar ais
d‚Äôfh√©adfadh s√© a bheith de chine√°lacha √©ags√∫la i gc√°sanna earr√°ide √©ags√∫la. T√° an eochairfhocal <code>dyn</code> gearr
le haghaidh <em>dinimici√∫il</em>.</p>
<p>Ar an dara dul s√≠os, t√° deireadh curtha againn leis an nglao chun s√∫il a chaitheamh i bhfabhar an oibreora <code>?</code>, agus muidne
labhair faoi i <a href="ch09-02-recoverable-errors-with-result.html#a-shortcut-for-propagating-errors-the--operator">Caibidil 9</a> <!-- neamhaird -->. Seachas
<code>panic!</code> ar earr√°id, cuirfidh <code>?</code> luach na hearr√°ide ar ais √≥n bhfeidhm reatha
don t√© at√° ag glaoch a l√°imhse√°il.</p>
<p>Ar an tr√≠√∫ dul s√≠os, tugann an fheidhm <code>run</code> luach <code>OK</code> ar ais anois sa ch√°s ratha.
D'fh√≥gair muid cine√°l ratha na feidhme <code>run</code> mar <code>()</code> sa s√≠ni√∫,
rud a chialla√≠onn go gcaithfimid luach an chine√°il aonaid a fhilleadh sa luach <code>Ok</code>. seo
<code>Ok(())</code> seans go bhf√©achfadh comhr√©ir beag√°n aisteach ar dt√∫s, ach √∫s√°id √° baint as <code>()</code> mar seo
an gn√°thbhealach lena chur in i√∫l go bhfuilimid ag glaoch <code>run</code> as a fo-iarmhairt√≠
amh√°in; n√≠ thugann s√© luach a theasta√≠onn uainn ar ais.</p>
<p>Nuair a ritheann t√∫ an c√≥d seo, tioms√≥idh s√© ach taispe√°nfaidh s√© rabhadh:</p>
<pre><code class="language-console">$ cargo run -- the poem.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
warning: unused `Result` that must be used
  --&gt; src/main.rs:19:5
   |
19 |     run(config);
   |     ^^^^^^^^^^^
   |
   = note: this `Result` may be an `Err` variant, which should be handled
   = note: `#[warn(unused_must_use)]` on by default
help: use `let _ = ...` to ignore the resulting value
   |
19 |     let _ = run(config);
   |     +++++++

warning: `minigrep` (bin "minigrep") generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.71s
     Running `target/debug/minigrep the poem.txt`
Searching for the
In file poem.txt
With text:
I'm nobody! Who are you?
Are you nobody, too?
Then there's a pair of us - don't tell!
They'd banish us, you know.

How dreary to be somebody!
How public, like a frog
To tell your name the livelong day
To an admiring bog!

</code></pre>
<p>Ins√≠onn Rust d√∫inn gur thug √°r gc√≥d neamhaird ar an luach <code>Result</code> agus ar an luach <code>Result</code>
d‚Äôfh√©adfadh s√© a l√©iri√∫ gur tharla earr√°id. Ach n√≠limid ag seice√°il f√©achaint an bhfuil n√≥
n√≠ raibh earr√°id ann, agus cuireann an tiomsaitheoir i gcuimhne d√∫inn gur d√≥cha go raibh s√© i gceist againn
t√° roinnt c√≥d l√°imhse√°la earr√°id√≠ anseo! D√©anaimis an fhadhb sin a r√©iteach anois.</p>
<h4 id="earr√°id√≠-l√°imhse√°la-ar-ais-√≥-run-sa-main"><a class="header" href="#earr√°id√≠-l√°imhse√°la-ar-ais-√≥-run-sa-main">Earr√°id√≠ L√°imhse√°la Ar ais √≥ <code>run</code> sa <code>main</code></a></h4>
<p>D√©anfaimid seice√°il le haghaidh earr√°id√≠ agus l√°imhse√°lfaimid iad ag baint √∫s√°ide as teicn√≠c cos√∫il leis an gceann a d'√∫s√°ideamar
le <code>Config::build</code> i Liost√∫ 12-10, ach le difr√≠ocht bheag:</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">use std::process;
</span><span class="boring">
</span>fn main() {
    // --snip--

<span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let config = Config::build(&amp;args).unwrap_or_else(|err| {
</span><span class="boring">        println!("Problem parsing arguments: {err}");
</span><span class="boring">        process::exit(1);
</span><span class="boring">    });
</span><span class="boring">
</span>    println!("Searching for {}", config.query);
    println!("In file {}", config.file_path);

    if let Err(e) = run(config) {
        println!("Application error: {e}");
        process::exit(1);
    }
}
<span class="boring">
</span><span class="boring">fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Config {
</span><span class="boring">    query: String,
</span><span class="boring">    file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>Bainimid √∫s√°id as <code>if let</code> seachas <code>unwrap_or_else</code> le seice√°il an bhfilleann <code>run</code> an
<code>Error</code> luach agus cuir glaoch ar <code>process::exit(1)</code> m√° dh√©anann s√©. An fheidhm <code>run</code>
N√≠ thugann s√© ar ais luach a theasta√≠onn uainn a <code>unwrap</code> ar an mbealach c√©anna
Filleann <code>Config::build</code> an sampla <code>Config</code>. Toisc go dtagann <code>run</code> ar ais <code>()</code> isteach
an c√°s ratha, is c√∫ram linn ach earr√°id a bhrath, mar sin n√≠ g√° d√∫inn
<code>unwrap_or_else</code> chun an luach neamhfhillte a thabhairt ar ais, nach mbeadh ann ach <code>()</code>.</p>
<p>T√° coirp na bhfeidhmeanna <code>if let</code> agus <code>unwrap_or_else</code> mar an gc√©anna i
an d√° ch√°s: priont√°ilimid an earr√°id agus scoir.</p>
<h3 id="c√≥d-a-scoilteadh-isteach-i-gcliathbhosca-leabharlainne"><a class="header" href="#c√≥d-a-scoilteadh-isteach-i-gcliathbhosca-leabharlainne">C√≥d a scoilteadh isteach i gcliathbhosca leabharlainne</a></h3>
<p>T√° √°r dtionscadal <code>minigrep</code> ag breathn√∫ go maith go dt√≠ seo! Anois scoiltfimid an
<em>src/main.rs</em> agus cuir roinnt c√≥d isteach sa chomhad <em>src/lib.rs</em>. Ar an mbealach sin, t√°imid
in ann an c√≥d a th√°st√°il agus comhad <em>src/main.rs</em> a bheith aige le n√≠os l√∫ freagrachta√≠.</p>
<p>Bogfaimid an c√≥d ar fad nach bhfuil sa <code>main</code> √≥ <em>src/main.rs</em> go
<em>src/lib.rs</em>:</p>
<ul>
<li>An sainmh√≠ni√∫ ar fheidhm <code>run</code></li>
<li>Na r√°itis <code>use</code> √°bhartha</li>
<li>An sainmh√≠ni√∫ ar <code>Config</code></li>
<li>An sainmh√≠ni√∫ ar fheidhm <code>Config::build</code></li>
</ul>
<p>Ba cheart go mbeadh na s√≠nithe a thaispe√°ntar i Liost√∫ 12-13 ag inneachar <em>src/lib.rs</em>
(D‚Äôfh√°gamar coirp na bhfeidhmeanna ar l√°r go gairid). Tabhair faoi deara nach nd√©anfaidh s√© seo
tiomsaigh go dt√≠ go modhnaimid <em>src/main.rs</em> i Liost√∫ 12-14.</p>
<Listing number="12-13" file-name="src/lib.rs" caption="Moving `Config` and `run` into *src/lib.rs*">
<pre><code class="language-rust ignore does_not_compile">use std::error::Error;
use std::fs;

pub struct Config {
    pub query: String,
    pub file_path: String,
}

impl Config {
    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
        // --snip--
<span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span>    }
}

pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    // --snip--
<span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    println!("With text:\n{contents}");
</span><span class="boring">
</span><span class="boring">    Ok(())
</span>}</code></pre>
</Listing>
<p>Bhaineamar √∫s√°id liobr√°lach as an eochairfhocal: <code>pub</code> ar <code>Config</code>, ar a r√©ims√≠ agus a chuid
modh <code>build</code>, agus ar an bhfeidhm <code>run</code>. T√° cliathbhosca leabharlainne againn anois a bhfuil
API poibl√≠ is f√©idir linn a th√°st√°il!</p>
<p>Anois caithfimid an c√≥d a bhog muid go <em>src/lib.rs</em> a thabhairt isteach i sc√≥ip an
cliathbhosca d√©n√°rtha in <em>src/main.rs</em>, mar a thaispe√°ntar i Liost√∫ 12-14.</p>
<Listing number="12-14" file-name="src/main.rs" caption="Using the `minigrep` library crate in *src/main.rs*">
<pre><code class="language-rust ignore">use std::env;
use std::process;

use minigrep::Config;

fn main() {
    // --snip--
<span class="boring">    let args: Vec&lt;String&gt; = env::args().collect();
</span><span class="boring">
</span><span class="boring">    let config = Config::build(&amp;args).unwrap_or_else(|err| {
</span><span class="boring">        println!("Problem parsing arguments: {err}");
</span><span class="boring">        process::exit(1);
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    println!("Searching for {}", config.query);
</span><span class="boring">    println!("In file {}", config.file_path);
</span><span class="boring">
</span>    if let Err(e) = minigrep::run(config) {
        // --snip--
<span class="boring">        println!("Application error: {e}");
</span><span class="boring">        process::exit(1);
</span>    }
}</code></pre>
</Listing>
<p>Cuirimid l√≠ne <code>use minigrep::Config</code> leis chun an cine√°l <code>Config</code> a thabhairt √≥n
cliathbhosca leabharlainne isteach i raon feidhme an chliabh√°in dh√©n√°rtha, agus d√©anaimid r√©im√≠r don fheidhm <code>run</code>
len√°r n-ainm cliathbhosca. Anois ba ch√≥ir go mbeadh an fheidhmi√∫lacht go l√©ir ceangailte agus ba ch√≥ir
oibre. Rith an cl√°r le <code>cargo run</code> agus cinntigh go n-oibr√≠onn gach rud i gceart.</p>
<p>Whew! Ba mh√≥r an obair √© sin, ach t√° rath orainn f√©in curtha ar bun againn sa
todhcha√≠. Anois t√° s√© i bhfad n√≠os √©asca earr√°id√≠ a l√°imhse√°il, agus t√° an c√≥d n√≠os m√≥ d√©anta againn
mod√∫lach. D√©anfar beagnach √°r gcuid oibre ar fad in <em>src/lib.rs</em> as seo amach.</p>
<p>Bainimis leas as an mod√∫lacht nua seo tr√≠ rud √©igin a dh√©anamh a dh√©anfadh
a bheith deacair leis an seanch√≥d ach t√° s√© √©asca leis an gc√≥d nua: d√©anfaimid
scr√≠obh roinnt t√°st√°lacha!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="feidhmi√∫lacht-na-leabharlainne-a-fhorbairt-le-forbairt-thrialaithe"><a class="header" href="#feidhmi√∫lacht-na-leabharlainne-a-fhorbairt-le-forbairt-thrialaithe">Feidhmi√∫lacht na Leabharlainne a Fhorbairt le Forbairt Thrialaithe</a></h2>
<p>Anois go bhfuil an loighic bainte amach againn i <em>src/lib.rs</em> agus d'fh√°g muid an arg√≥int
baili√∫ agus l√°imhse√°il earr√°id√≠ in <em>src/main.rs</em>, t√° s√© i bhfad n√≠os √©asca t√°st√°lacha a scr√≠obh
le haghaidh feidhmi√∫lacht l√°rnach √°r gc√≥d. Is f√©idir linn feidhmeanna a ghlaoch go d√≠reach le
arg√≥int√≠ √©ags√∫la agus seice√°il luachanna tuairisce√°in gan g√° a ghlaoch ar √°r d√©n√°rtha
√≥n l√≠ne ordaithe.</p>
<p>Sa chuid seo, cuirfimid an loighic chuardaigh leis an gcl√°r <code>minigrep</code> ag baint √∫s√°ide as
an pr√≥iseas forbartha t√°st√°la-tiom√°inte (TDD) leis na c√©imeanna seo a leanas:</p>
<ol>
<li>Scr√≠obh t√°st√°il a theipeann ort agus √© a rith chun a chinnti√∫ go dteipeann uirthi ar an gc√∫is leat
ag s√∫il.</li>
<li>Scr√≠obh n√≥ modhnaigh go leor c√≥d chun pas a fh√°il sa t√°st√°il nua.</li>
<li>D√©an an c√≥d a chuir t√∫ leis n√≥ a d'athraigh t√∫ a athchur agus cinntigh go leanann na t√°st√°lacha ar aghaidh
chun pas a fh√°il.</li>
<li>D√©an ar√≠s √≥ ch√©im 1!</li>
</ol>
<p>C√© nach bhfuil ann ach ceann amh√°in de go leor beala√≠ chun bogearra√≠ a scr√≠obh, is f√©idir le TDD cabhr√∫ le c√≥d a thiom√°int
dearadh. An triail a scr√≠obh sula scr√≠obhann t√∫ an c√≥d a fh√°gann go n-√©ireoidh leis an triail
cuid√≠onn s√© le cl√∫dach t√°st√°la ard a choinne√°il ar feadh an phr√≥isis.</p>
<p>D√©anfaimid t√°st√°il ar chur i bhfeidhm na feidhmi√∫lachta a dh√©anfaidh i nd√°ir√≠re
an teaghr√°n ceiste a chuardach in inneachar an chomhaid agus d√©an liosta de
l√≠nte a mheaitse√°lann an cheist. Cuirfimid an fheidhmi√∫lacht seo leis an bhfeidhm ar a dtugtar
<code>search</code>.</p>
<h3 id="scriobh-teist-theip"><a class="header" href="#scriobh-teist-theip">Scriobh teist theip</a></h3>
<p>Toisc nach bhfuil siad de dh√≠th orainn a thuilleadh, bainimis na r√°itis <code>println!</code> √≥
<em>src/lib.rs</em> agus <em>src/main.rs</em> a d‚Äô√∫s√°ideamar chun iompar an chl√°ir a sheice√°il.
Ansin, in <em>src/lib.rs</em>, cuirfimid mod√∫l <code>tests</code> le feidhm t√°st√°la, agus muid ag
rinne i <a href="ch11-01-writing-tests.html#the-anatomy-of-a-test-function">Caibidil 11</a> <!-- neamhaird -->. Sonra√≠onn an fheidhm t√°st√°la
an iompar ba mhaith linn a bheith ag an fheidhm <code>search</code>: t√≥gfaidh s√© ceist agus
an t√©acs a chuardach, agus beidh s√© ar ais ach na l√≠nte as an t√©acs a
an cheist a chuimsi√∫. L√©ir√≠onn liost√∫ 12-15 an t√°st√°il seo, nach dtioms√≥idh f√≥s.</p>
<Listing number="12-15" file-name="src/lib.rs" caption="Creating a failing test for the `search` function we wish we had">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn one_result() {
        let query = "duct";
        let contents = "\
Rust:
safe, fast, productive.
Pick three.";

        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
    }
}</code></pre>
</Listing>
<p>D√©anann an t√°st√°il seo cuardach don teaghr√°n <code>"duct"</code>. Is √© an t√©acs at√° √° chuardach againn n√° tr√≠
l√≠nte, ach ceann amh√°in acu ina bhfuil <code>"duct"</code> (tabhair faoi deara go bhfuil an c√∫lslais i ndiaidh an
Ins√≠onn oscailt luachan d√∫bailte do Rust gan carachtar nua-l√≠ne a chur ag an t√∫s
den √°bhar at√° sa teaghr√°n seo litri√∫il). Dearbha√≠mid gur th√°inig an luach ar ais √≥
N√≠l san fheidhm <code>search</code> ach an l√≠ne a mbeimid ag s√∫il leis.</p>
<p>N√≠limid in ann an t√°st√°il seo a rith go f√≥ill agus f√©achaint uirthi go dteipeann uirthi mar n√≠ amhlaidh a dh√©anann an t√°st√°il
fi√∫ tioms√∫: n√≠l an fheidhm <code>search</code> ann f√≥s! De r√©ir TDD
prionsabail, cuirfimid d√≠reach go leor c√≥d leis chun an t√°st√°il a chur le ch√©ile agus a re√°cht√°il
ag cur sainmh√≠ni√∫ ar an bhfeidhm <code>search</code> a thugann folamh ar ais i gc√≥na√≠
veicteoir, mar a thaispe√°ntar i Liost√∫ 12-16. Ansin ba ch√≥ir an t√°st√°il a thioms√∫ agus a theipeann
toisc nach meaitse√°lann veicteoir folamh veicteoir a bhfuil an l√≠ne <code>"safe, fast, productive."</code></p>
<Listing number="12-16" file-name="src/lib.rs" caption="Defining just enough of the `search` function so our test will compile">
<pre><code class="language-rust noplayground"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
    vec![]
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn one_result() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Tabhair faoi deara go gcaithfimid saolr√© sainr√°ite <code>'a</code> a shaini√∫ i s√≠ni√∫
<code>search</code> agus √∫s√°id an tsaoil sin leis an arg√≥int <code>contents</code> agus an tuairisce√°n
luach. Athghairm i <a href="ch10-03-lifetime-syntax.html">Caibidil 10</a><!-- neamhaird --> go bhfuil an saolr√©
sonr√≥idh paraim√©adair c√©n saolr√© arg√≥int at√° ceangailte le saolr√© an
luach aischuir. Sa ch√°s seo, tugaimid le fios gur ch√≥ir go mbeadh an veicteoir ar ais
slisn√≠ teaghr√°n a dh√©anann tagairt do shlisn√≠ den arg√≥int <code>contents</code> (seachas an
arg√≥int <code>query</code>).</p>
<p>I bhfocail eile, inseoimid do Rust go bhfuil na sonra√≠ ar ais ag an fheidhm <code>search</code>
beidh s√© beo chomh fada agus a chuirtear na sonra√≠ isteach san fheidhm <code>search</code> sa
arg√≥int <code>contents</code>. T√° s√© seo t√°bhachtach! Teasta√≠onn na sonra√≠ d√° dtagra√≠tear <em>by</em> a slice
a bheith bail√≠ chun an tagairt a bheith bail√≠; m√° ghlacann an tiomsaitheoir leis go bhfuil muid ag d√©anamh
slices teaghr√°n de <code>query</code> seachas <code>contents</code>, d√©anfaidh s√© a sheice√°il s√°bh√°ilteachta
m√≠cheart.</p>
<p>M√° dh√©anaimid dearmad ar na n√≥ta√≠ saoil agus iarracht a dh√©anamh an fheidhm seo a thioms√∫, d√©anfaimid
faigh an earr√°id seo:</p>
<pre><code class="language-console">$ cargo build
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
error[E0106]: missing lifetime specifier
  --&gt; src/lib.rs:28:51
   |
28 | pub fn search(query: &amp;str, contents: &amp;str) -&gt; Vec&lt;&amp;str&gt; {
   |                      ----            ----         ^ expected named lifetime parameter
   |
   = help: this function's return type contains a borrowed value, but the signature does not say whether it is borrowed from `query` or `contents`
help: consider introducing a named lifetime parameter
   |
28 | pub fn search&lt;'a&gt;(query: &amp;'a str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
   |              ++++         ++                 ++              ++

For more information about this error, try `rustc --explain E0106`.
error: could not compile `minigrep` (lib) due to 1 previous error
</code></pre>
<p>N√≠ fh√©adfaidh Rust a fhios a bheith againn c√© acu den d√° arg√≥int a theasta√≠onn uainn, mar sin n√≠ m√≥r d√∫inn a insint
√© go follasach. Toisc gurb √© <code>contents</code> an arg√≥int a chuims√≠onn √°r dt√©acs ar fad
agus ba mhaith linn na codanna den t√©acs sin a mheaitse√°il, t√° a fhios againn go bhfuil <code>contents</code> ar ais
an arg√≥int ba ch√≥ir a bheith ceangailte leis an luach tuairisce√°in ag baint √∫s√°ide as an saolr√©
comhr√©ir.</p>
<p>N√≠ √©il√≠onn teangacha r√≠omhchl√°r√∫ch√°in eile ort arg√≥int√≠ a nascadh le filleadh
luachanna sa s√≠ni√∫, ach beidh an cleachtas seo n√≠os √©asca le himeacht ama. D'fh√©adf√°
Ba mhaith liom an sampla seo a chur i gcompar√°id leis na sampla√≠ sa <a href="ch10-03-lifetime-syntax.html#validating-references-with-lifetimes">‚ÄúTagairt√≠ Bail√≠ocht√∫
le Lifetimes‚Äù</a><!-- neamhaird --> alt
i gCaibidil 10 .</p>
<p>Anois d√©anaimis an t√°st√°il:</p>
<pre><code class="language-console">$ cargo test
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.97s
     Running unittests src/lib.rs (target/debug/deps/minigrep-9cd200e5fac0fc94)

running 1 test
test tests::one_result ... FAILED

failures:

---- tests::one_result stdout ----
thread 'tests::one_result' panicked at src/lib.rs:44:9:
assertion `left == right` failed
  left: ["safe, fast, productive."]
 right: []
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::one_result

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Go hiontach, teipeann ar an t√°st√°il, d√≠reach mar a bh√≠ s√∫il againn. Go n-√©ir√≠ an t-√°dh linn!</p>
<h3 id="c√≥d-a-scr√≠obh-chun-an-t√°st√°il-a-phas"><a class="header" href="#c√≥d-a-scr√≠obh-chun-an-t√°st√°il-a-phas">C√≥d a Scr√≠obh chun an T√°st√°il a Phas</a></h3>
<p>Faoi l√°thair, t√° ag teip ar √°r dt√°st√°il toisc go gcuirimid veicteoir folamh ar ais i gc√≥na√≠. A shocr√∫
go gcaithfidh √°r gcl√°r na c√©imeanna seo a leanas a lean√∫int agus <code>search</code> a chur i bhfeidhm:</p>
<ol>
<li>Atriall tr√≠ gach l√≠ne den √°bhar.</li>
<li>Seice√°il an bhfuil √°r teaghr√°n fiosr√∫ch√°in sa l√≠ne.</li>
<li>M√° dh√©anann, cuir leis an liosta luachanna at√° √° thabhairt ar ais againn.</li>
<li>Mura nd√©anann, d√©an faic.</li>
<li>Tabhair ar ais liosta na dtortha√≠ a mheaitse√°lann.</li>
</ol>
<p>Oibr√≠mid tr√≠ gach c√©im, ag tos√∫ le atriall tr√≠ l√≠nte.</p>
<h4 id="atriall-tr√≠-l√≠nte-leis-an-modh-lines"><a class="header" href="#atriall-tr√≠-l√≠nte-leis-an-modh-lines">Atriall Tr√≠ L√≠nte leis an Modh <code>lines</code></a></h4>
<p>T√° modh cabhrach ag meirge chun atriallta l√≠ne-ar-l√≠ne teaghr√°in a l√°imhse√°il,
<code>lines</code> ainmnithe go caoth√∫il, a oibr√≠onna mar a thaispe√°ntar i Liosta 12-17. Tabhair faoi deara go
n√≠ bheidh s√© seo le ch√©ile f√≥s.</p>
<Listing number="12-17" file-name="src/lib.rs" caption="Iterating through each line in `contents`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
    for line in contents.lines() {
        // do something with line
    }
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn one_result() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Tugann an modh <code>lines</code> atriallt√≥ir ar ais. Labhr√≥imid go domhain faoi iterators
<a href="ch13-02-iterators.html">Caibidil 13</a><!-- d√©an neamhaird de -->, ach chun cuimhne go bhfaca t√∫ mar seo
as iterator a √∫s√°id i <a href="ch03-05-control-flow.html#looping-through-a-collection-with-for">Liost√∫ 3-5</a><!-- neamhaird -->, √°it ar √∫s√°ideamar a
l√∫b <code>for</code> le iterator chun c√≥d √©igin a rith ar gach m√≠r i mbaili√∫ch√°n.</p>
<h4 id="ag-cuardach-gach-l√≠ne-don-cheist"><a class="header" href="#ag-cuardach-gach-l√≠ne-don-cheist">Ag Cuardach Gach L√≠ne don Cheist</a></h4>
<p>Ansin, seice√°lfaimid an bhfuil √°r teaghr√°n ceisteanna sa l√≠ne reatha.
Ar √°mhara√≠ an tsaoil, t√° modh cabhrach ag teaghr√°in darb ainm <code>contains</code> a dh√©anann √© seo le haghaidh
linn! Cuir glao leis an modh <code>contains</code> san fheidhm <code>search</code>, mar a thaispe√°ntar i
Liost√°il 12-18. Tabhair faoi deara nach mbeidh s√© seo le ch√©ile f√≥s.</p>
<Listing number="12-18" file-name="src/lib.rs" caption="Adding functionality to see whether the line contains the string in `query`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
    for line in contents.lines() {
        if line.contains(query) {
            // do something with line
        }
    }
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn one_result() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Faoi l√°thair, t√°imid ag cur le feidhmi√∫lacht. Chun an c√≥d a fh√°il le tioms√∫, t√°imid
g√° luach a thabhairt ar ais √≥n gcomhlacht mar a l√©irigh muid ba mhaith linn san fheidhm
s√≠ni√∫.</p>
<h4 id="l√≠nte-meaitse√°la-√°-st√≥r√°il"><a class="header" href="#l√≠nte-meaitse√°la-√°-st√≥r√°il">L√≠nte Meaitse√°la √° St√≥r√°il</a></h4>
<p>Chun an fheidhm seo a chr√≠ochn√∫, n√≠ m√≥r d√∫inn bealach chun na l√≠nte meaitse√°la a theasta√≠onn uainn a st√≥r√°il
a thabhairt ar ais. Ar an √°bhar sin, is f√©idir linn veicteoir mutable a dh√©anamh roimh an l√∫b <code>for</code> agus
glaoigh ar an modh <code>push</code> chun <code>line</code> a st√≥r√°il sa veicteoir. Tar √©is an l√∫b <code>for</code>,
cuirimid ar ais an veicteoir, mar a thaispe√°ntar i Liost√∫ 12-19.</p>
<Listing number="12-19" file-name="src/lib.rs" caption="Storing the lines that match so we can return them">
<pre><code class="language-rust ignore"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
    let mut results = Vec::new();

    for line in contents.lines() {
        if line.contains(query) {
            results.push(line);
        }
    }

    results
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn one_result() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Anois n√≠or cheart don fheidhm <code>search</code> ach na l√≠nte ina bhfuil <code>query</code> a thabhairt ar ais,
agus ba ch√≥ir go n-√©ireodh len√°r dt√°st√°il. D√©anaimis an t√°st√°il a rith:</p>
<pre><code class="language-console">$ cargo test
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.22s
     Running unittests src/lib.rs (target/debug/deps/minigrep-9cd200e5fac0fc94)

running 1 test
test tests::one_result ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/main.rs (target/debug/deps/minigrep-9cd200e5fac0fc94)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests minigrep

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>√År t√°st√°il a rith, mar sin t√° a fhios againn go n-oibr√≠onn s√©!</p>
<p>Ag an bpointe seo, d'fh√©adfaimis deiseanna a bhreithni√∫ chun an
feidhmi√∫ na feidhme cuardaigh agus na t√°st√°lacha a choinne√°il ag dul go dt√≠
an fheidhmi√∫lacht ch√©anna a choinne√°il. N√≠l an c√≥d san fheidhm chuardaigh r√≥-olc,
ach n√≠ bhaineann s√© leas as roinnt gn√©ithe √∫s√°ideacha de iterators. D√©anfaimid
fill ar an sampla seo i <a href="ch13-02-iterators.html">Caibidil 13</a><!-- neamhaird a dh√©anamh ar -->, √°it a bhfuil
d√©anfaimid mionscr√∫d√∫ ar atriallt√≥ir√≠, agus f√©achfaimid ar conas √© a fheabhs√∫.</p>
<h4 id="ag-baint-√∫s√°ide-as-an-fheidhm-search-san-fheidhm-run"><a class="header" href="#ag-baint-√∫s√°ide-as-an-fheidhm-search-san-fheidhm-run">Ag baint √∫s√°ide as an fheidhm <code>search</code> san Fheidhm <code>run</code></a></h4>
<p>Anois go bhfuil an fheidhm <code>search</code> ag obair agus √° th√°st√°il, n√≠ m√≥r d√∫inn <code>search</code> a thabhairt air
√≥n√°r bhfeidhm <code>run</code>. N√≠ m√≥r d√∫inn pas a fh√°il sa luach <code>config.query</code> agus an
<code>contents</code> a l√©ann <code>run</code> √≥n gcomhad go dt√≠ an fheidhm <code>search</code>. Ansin <code>run</code>
priont√°lfaidh s√© gach l√≠ne a sheoltar ar ais √≥ <code>search</code>:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust ignore"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let contents = fs::read_to_string(config.file_path)?;

    for line in search(&amp;config.query, &amp;contents) {
        println!("{line}");
    }

    Ok(())
}
<span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn one_result() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>T√°imid f√≥s ag baint √∫s√°ide as l√∫b <code>for</code> chun gach l√≠ne √≥ <code>search</code> a thabhairt ar ais agus √© a phriont√°il.</p>
<p>Anois ba ch√≥ir an cl√°r ar fad ag obair! Bainimis triail as, ar dt√∫s le focal a
l√≠ne amh√°in go beacht a thabhairt ar ais √≥ dh√°n Emily Dickinson: <em>frog</em>.</p>
<pre><code class="language-console">$ cargo run -- frog poem.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.38s
     Running `target/debug/minigrep frog poem.txt`
How public, like a frog
</code></pre>
<p>Cool! Anois bainimis triail as focal a mheaitse√°lann l√≠nte iolracha, mar <em>body</em>:</p>
<pre><code class="language-console">$ cargo run -- body poem.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep body poem.txt`
I'm nobody! Who are you?
Are you nobody, too?
How dreary to be somebody!
</code></pre>
<p>Agus ar deireadh, d√©anaimis deimhin de nach bhfaighimid aon l√≠nte nuair a chuarda√≠onn muid a
focal nach bhfuil √°it ar bith sa d√°n, mar <em>monomorphization</em>:</p>
<pre><code class="language-console">$ cargo run -- monomorphization poem.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep monomorphization poem.txt`
</code></pre>
<p>Ar fheabhas! T√° √°r mionleagan f√©in t√≥gtha againn d‚Äôuirlis chlasaiceach agus t√° go leor foghlamtha againn
faoi ‚Äã‚Äãconas feidhmchl√°ir a strucht√∫r√∫. T√° beag√°n foghlamtha againn freisin faoi ionchur comhaid
agus aschur, saolr√©anna, t√°st√°il, agus pars√°il na n-orduithe.</p>
<p>Chun an tionscadal seo a chr√≠ochn√∫, taispe√°nfaimid go hachomair conas oibri√∫ leis
athr√≥ga timpeallachta agus conas a phriont√°il go hearr√°id chaighde√°nach, at√° sa d√° cheann
√∫s√°ideach agus t√∫ ag scr√≠obh cl√°ir orduithe.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ag-obair-le-hathr√≥ga-comhshaoil"><a class="header" href="#ag-obair-le-hathr√≥ga-comhshaoil">Ag Obair le hAthr√≥ga Comhshaoil</a></h2>
<p>Feabhs√≥imid <code>minigrep</code> tr√≠ ghn√© bhreise a chur leis: rogha le haghaidh
cuardach c√°s-√≠ogair ar f√©idir leis an √∫s√°ideoir a chur ar si√∫l tr√≠ thimpeallacht
athr√≥g. D'fh√©adfaimis an ghn√© seo a dh√©anamh mar rogha na n-orduithe agus √© sin a √©ileamh
cuireann √∫s√°ideoir√≠ isteach √© gach uair is mian leo √© a chur i bhfeidhm, ach ina ionad sin √© a dh√©anamh
athr√≥g timpeallachta, tugaimid deis d√°r n-√∫s√°ideoir√≠ an athr√≥g timpeallachta a shocr√∫ uair amh√°in
agus b√≠odh a gcuardach uile neamh√≠ogair sa seisi√∫n teirmin√©il sin.</p>
<h3 id="triail-theip-a-scr√≠obh-don-fheidhm-search-c√°s-√≠ogair"><a class="header" href="#triail-theip-a-scr√≠obh-don-fheidhm-search-c√°s-√≠ogair">Triail Theip a Scr√≠obh don Fheidhm <code>search</code> C√°s-√≠ogair</a></h3>
<p>Ar dt√∫s cuirimid feidhm nua <code>search_case_insensitive</code> isteach ar a dtabharfar nuair
t√° luach ag an athr√≥g timpeallachta. Leanfaimid orainn ag lean√∫int leis an bpr√≥iseas TDD,
mar sin is √© an ch√©ad ch√©im ar√≠s triail theipthe a scr√≠obh. Cuirfimid triail nua leis
an fheidhm nua <code>search_case_insensitive</code> agus athainmnigh √°r sean-triail √≥
<code>one_result</code> go <code>case_sensitive</code> chun na difr√≠ochta√≠ idir an d√° rud a shoil√©iri√∫
t√°st√°lacha, mar a thaispe√°ntar i Liost√∫ 12-20.</p>
<Listing number="12-20" file-name="src/lib.rs" caption="Adding a new failing test for the case-insensitive function we‚Äôre about to add">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    for line in search(&amp;config.query, &amp;contents) {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn case_sensitive() {
        let query = "duct";
        let contents = "\
Rust:
safe, fast, productive.
Pick three.
Duct tape.";

        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
    }

    #[test]
    fn case_insensitive() {
        let query = "rUsT";
        let contents = "\
Rust:
safe, fast, productive.
Pick three.
Trust me.";

        assert_eq!(
            vec!["Rust:", "Trust me."],
            search_case_insensitive(query, contents)
        );
    }
}</code></pre>
</Listing>
<p>Tabhair faoi deara go bhfuil <code>contents</code> na sean-th√°st√°la curtha in eagar againn freisin. T√° l√≠ne nua curtha leis againn
leis an t√©acs <code>"Duct tape."</code> ag baint √∫s√°ide as ceannlitir <em>D</em> n√°r cheart a bheith ag teacht leis an gceist
<code>"duct"</code> nuair a bh√≠onn muid ag cuardach ar bhealach c√°s-√≠ogair. Athr√∫ ar an t√°st√°il d'aois
ar an mbealach seo cabhra√≠onn s√© lena chinnti√∫ nach mbrisimid an c√°s-√≠ogair tr√≠ thimpiste
feidhmi√∫lacht chuardaigh at√° curtha i bhfeidhm againn cheana f√©in. Ba cheart go n-√©ireodh leis an t√°st√°il seo anois
agus ba ch√≥ir go leanfadh s√© ar aghaidh agus muid ag obair ar an gcuardach c√°s-√≠ogair.</p>
<p>√ös√°ideann an t√°st√°il nua don chuardach c√°s-<em>insensitive</em> <code>"rUsT"</code> mar cheist. I
an fheidhm <code>search_case_insensitive</code> at√°imid ar t√≠ cur leis, an cheist <code>"rUsT"</code>
Ba ch√≥ir go mbeadh an l√≠ne ina bhfuil <code>"Rust:"</code> le pr√≠omhchathair <em>R</em> agus an l√≠ne a mheaitse√°il
line <code>"Trust me."</code> c√© go bhfuil c√°s√°il √©ags√∫il ag an mbeirt √≥n gceist. seo
Is √© √°r dt√°st√°il theip, agus n√≠ theipfidh orainn √© a thioms√∫ toisc nach bhfuil sainithe againn f√≥s
an fheidhm <code>search_case_insensitive</code>. Thig leat creatlach a chur leis
cur i bhfeidhm a thugann veicteoir folamh ar ais i gc√≥na√≠, cos√∫il leis an mbealach a rinne muid
don fheidhm <code>search</code> i Liost√∫ 12-16 chun an t√°st√°il a thioms√∫ agus a theipeann a fheice√°il.</p>
<h3 id="feidhm-search_case_insensitive-√°-cur-i-bhfeidhm"><a class="header" href="#feidhm-search_case_insensitive-√°-cur-i-bhfeidhm">Feidhm <code>search_case_insensitive</code> √° cur i bhfeidhm</a></h3>
<p>Beidh an fheidhm <code>search_case_insensitive</code>, a thaispe√°ntar i Liost√∫ 12-21, beagnach
mar an gc√©anna leis an bhfeidhm <code>search</code>. Is √© an t-aon difr√≠ocht n√° go nd√©anfaimid c√°s √≠ochtair
an <code>query</code> agus gach <code>line</code> ionas gur cuma cad √© c√°s na n-arg√≥int√≠ ionchuir,
beidh siad mar an gc√©anna nuair a dh√©anaimid seice√°il an bhfuil an cheist sa l√≠ne.</p>
<Listing number="12-21" file-name="src/lib.rs" caption="Defining the `search_case_insensitive` function to lowercase the query and the line before comparing them">
<pre><code class="language-rust noplayground"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    for line in search(&amp;config.query, &amp;contents) {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search_case_insensitive&lt;'a&gt;(
    query: &amp;str,
    contents: &amp;'a str,
) -&gt; Vec&lt;&amp;'a str&gt; {
    let query = query.to_lowercase();
    let mut results = Vec::new();

    for line in contents.lines() {
        if line.to_lowercase().contains(&amp;query) {
            results.push(line);
        }
    }

    results
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ar dt√∫s d√©anaimid an sreang <code>query</code> a √≠oslaghd√∫ agus √© a st√≥r√°il in athr√≥g nua leis an
ainm c√©anna, ag sc√°th√∫ an bhunaidh. Glaoitear <code>go_lowercase</code> ar an gceist
riachtanach ionas gur cuma c√© acu an bhfuil ceist an √∫s√°ideora <code>"rust"</code>, <code>"RUST"</code>,
<code>"Rust"</code>, n√≥ <code>"rUsT"</code>, d√©ile√°lfaimid leis an gceist amhail is d√° mba <code>"rust"</code> √© agus beidh
neamh√≠ogair don ch√°s. C√© go l√°imhse√°lfaidh <code>to_lowercase</code> Unicode bhun√∫sach, beidh s√©
n√≠ bheidh s√© 100% cruinn. D√° mbeimis ag scr√≠obh f√≠or-iarratas, ba mhaith linn a
beag√°n n√≠os m√≥ oibre anseo, ach baineann an chuid seo le hathr√≥ga timpeallachta, nach bhfuil
Unicode, mar sin f√°gfaimid anseo √©.</p>
<p>Tabhair faoi deara gur <code>String</code> √© <code>query</code> anois seachas sreang√°n mar gheall ar ghlaoch
crutha√≠onn <code>to_lowercase</code> sonra√≠ nua seachas tagairt a dh√©anamh do shonra√≠ at√° ann cheana f√©in. Abair an
Is √© <code>"rUsT"</code> an cheist, mar shampla: n√≠l c√°s √≠ochtair sa t√©ad sliseog sin
<code>u</code> n√≥ <code>t</code> le h√∫s√°id againn, mar sin n√≠ m√≥r d√∫inn <code>String</code> nua a leithdh√°ileadh ina bhfuil
<code>"rust"</code>. Nuair a thugaimid <code>query</code> mar arg√≥int don mhodh <code>contains</code> anois, d√©anaimid
g√° ampersand a chur leis toisc go bhfuil s√≠ni√∫ <code>t√°</code> sainithe le glacadh
slisne teaghr√°n.</p>
<p>Ansin, cuirimid glao chuig <code>to_lowercase</code> ar gach <code>line</code> chun gach c√°s a laghd√∫
carachtair. Anois go bhfuil <code>line</code> agus <code>query</code> tiontaithe againn go c√°s √≠ochtair, d√©anfaimid
aimsigh meaitseanna is cuma cad √© c√°s an fhiosr√∫ch√°in.</p>
<p>Feicfimid an √©ir√≠onn leis an gcur i bhfeidhm seo na t√°st√°lacha:</p>
<pre><code class="language-console">$ cargo test
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.33s
     Running unittests src/lib.rs (target/debug/deps/minigrep-9cd200e5fac0fc94)

running 2 tests
test tests::case_insensitive ... ok
test tests::case_sensitive ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/main.rs (target/debug/deps/minigrep-9cd200e5fac0fc94)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests minigrep

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

</code></pre>
<p>Go hiontach! Rith siad. Anois, cuirimis glaoch ar an bhfeidhm nua <code>search_case_insensitive</code>
√≥n bhfeidhm <code>run</code>. Ar dt√∫s cuirfimid rogha cumra√≠ochta leis an <code>Config</code>
d√©an iarracht aistri√∫ idir cuardach c√°s-√≠ogair agus c√°s-√≠ogair. Ag cur
cruth√≥idh an r√©imse seo earr√°id√≠ tiomsaithe toisc nach bhfuilimid ag tos√∫ an r√©imse seo
√°it ar bith go f√≥ill:</p>
<p><span class="filename">Filename: src/lib.rs</span></p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span>pub struct Config {
    pub query: String,
    pub file_path: String,
    pub ignore_case: bool,
}
<span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    let results = if config.ignore_case {
</span><span class="boring">        search_case_insensitive(&amp;config.query, &amp;contents)
</span><span class="boring">    } else {
</span><span class="boring">        search(&amp;config.query, &amp;contents)
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    for line in results {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
<p>Chuireamar an r√©imse <code>ignore_case</code> isteach a bhfuil Boole aige. Ansin, n√≠ m√≥r d√∫inn an <code>run</code>
feidhm chun luach an r√©imse <code>ignore_case</code> a sheice√°il agus √© sin a √∫s√°id chun cinneadh a dh√©anamh
cib√© ar cheart an fheidhm <code>search</code> n√≥ an <code>search_case_insensitive</code> a ghlaoch
fheidhm, mar a thaispe√°ntar i Liost√∫ 12-22. N√≠ bheidh s√© seo le ch√©ile go f√≥ill.</p>
<Listing number="12-22" file-name="src/lib.rs" caption="Calling either `search` or `search_case_insensitive` based on the value in `config.ignore_case`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">    pub ignore_case: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let contents = fs::read_to_string(config.file_path)?;

    let results = if config.ignore_case {
        search_case_insensitive(&amp;config.query, &amp;contents)
    } else {
        search(&amp;config.query, &amp;contents)
    };

    for line in results {
        println!("{line}");
    }

    Ok(())
}
<span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ar deireadh, n√≠ m√≥r d√∫inn a sheice√°il le haghaidh an athr√≥g timpeallachta. Na feidhmeanna le haghaidh
t√° oibri√∫ le hathr√≥ga timpeallachta sa mhod√∫l <code>env</code> sa chaighde√°n
leabharlann, mar sin tugaimid an mod√∫l sin isteach sa sc√≥ip ag barr <em>src/lib.rs</em>. Ansin
√∫s√°idfimid an fheidhm <code>var</code> √≥n mod√∫l <code>env</code> le seice√°il an bhfuil aon luach ann
socraithe d'athr√≥g timpeallachta darb ainm <code>IGNORE_CASE</code>, mar a thaispe√°ntar i
Liost√°il 12-23.</p>
<Listing number="12-23" file-name="src/lib.rs" caption="Checking for any value in an environment variable named `IGNORE_CASE`">
<pre><code class="language-rust noplayground">use std::env;
// --snip--

<span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">    pub ignore_case: bool,
</span><span class="boring">}
</span><span class="boring">
</span>impl Config {
    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
        if args.len() &lt; 3 {
            return Err("not enough arguments");
        }

        let query = args[1].clone();
        let file_path = args[2].clone();

        let ignore_case = env::var("IGNORE_CASE").is_ok();

        Ok(Config {
            query,
            file_path,
            ignore_case,
        })
    }
}
<span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    let results = if config.ignore_case {
</span><span class="boring">        search_case_insensitive(&amp;config.query, &amp;contents)
</span><span class="boring">    } else {
</span><span class="boring">        search(&amp;config.query, &amp;contents)
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    for line in results {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Anseo, crutha√≠mid athr√≥g nua, <code>ignore_case</code>. Chun a luach a shocr√∫, tugaimid an
feidhm <code>env::var</code> agus cuir ainm na timpeallachta <code>IGNORE_CASE</code> air
athr√≥g. Tugann an fheidhm <code>env::var</code> ar ais a bheidh mar an
malairt <code>Ok</code> rath√∫il ina bhfuil luach na hathr√≥ige timpeallachta m√°s rud √©
socra√≠tear athr√≥g an chomhshaoil ‚Äã‚Äãar aon luach. Tabharfaidh s√© ar ais an leagan <code>Err</code>
mura bhfuil an athr√≥g timpeallachta socraithe.</p>
<p>T√°imid ag baint √∫s√°ide as an modh <code>is_ok</code> ar an <code>Result</code> le seice√°il an bhfuil an timpeallacht
T√° athr√≥g socraithe, rud a chialla√≠onn gur cheart don chl√°r cuardach c√°s-√≠ogair a dh√©anamh.
Mura bhfuil an athr√≥g timpeallachta <code>IGNORE_CASE</code> socraithe mar rud ar bith, beidh <code>is_ok</code>
fill <code>false</code> agus d√©anfaidh an cl√°r cuardach c√°s-√≠ogair. N√≠ dh√©anaimid
aire a thabhairt do <em>luach</em> na hathr√≥ige timpeallachta, d√≠reach cib√© an bhfuil s√© socraithe n√≥
gan a bheith socraithe, mar sin t√°imid ag seice√°il <code>is_ok</code> seachas <code>unwrap</code>, <code>expect</code>, n√≥ aon cheann a √∫s√°id
de na modhanna eile at√° feicthe againn ar <code>Result</code>.</p>
<p>Tugaimid an luach san athr√≥g <code>ignore_case</code> go dt√≠ an t- shampla <code>Config</code> mar sin de
Is f√©idir le feidhm <code>run</code> an luach sin a l√©amh agus cinneadh a dh√©anamh ar cheart glaoch
<code>search_case_insensitive</code> n√≥ <code>search</code>, mar a chuireamar i bhfeidhm i Liost√∫ 12-22.</p>
<p>D√©anaimis iarracht √©! Ar dt√∫s rithfidh muid √°r gcl√°r gan an timpeallacht
tacar athr√≥g agus leis an gceist <code>to</code>, ba cheart go mbeadh s√© ag teacht le haon l√≠ne at√° ann
an focal <em>to</em> i ngach c√°s √≠ochtair:</p>
<pre><code class="language-console">$ cargo run -- to poem.txt
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep to poem.txt`
Are you nobody, too?
How dreary to be somebody!
</code></pre>
<p>Is cos√∫il go n-oibr√≠onn go f√≥ill! Anois, d√©anaimis an cl√°r a re√°cht√°il le sraith <code>IGNORE_CASE</code>
go <code>1</code> ach leis an gceist ch√©anna <em>to</em>:</p>
<pre><code class="language-console">$ IGNORE_CASE=1 cargo run -- to poem.txt
</code></pre>
<p>M√° t√° PowerShell √° √∫s√°id agat, beidh ort an athr√≥g timpeallachta a shocr√∫ agus
rith an cl√°r mar orduithe ar leith:</p>
<pre><code class="language-console">PS&gt; $Env:IGNORE_CASE=1; cargo run -- to poem.txt
</code></pre>
<p>F√°gfaidh s√© seo go seasfaidh <code>IGNORE_CASE</code> ar feadh an chuid eile de do sheisi√∫n sliog√°n.
Is f√©idir √© a dh√≠shuite√°il leis an cmdlet <code>Remove-Item</code>:</p>
<pre><code class="language-console">PS&gt; Remove-Item Env:IGNORE_CASE
</code></pre>
<p>Ba cheart d√∫inn l√≠nte a fh√°il ina bhfuil <em>to</em> a bhf√©adfadh litreacha m√≥ra a bheith orthu:</p>
<!-- manual-regeneration
cd listings/ch12-an-io-project/listing-12-23
IGNORE_CASE=1 cargo run -- to poem.txt
can't extract because of the environment variable
-->
<pre><code class="language-console">Are you nobody, too?
How dreary to be somebody!
To tell your name the livelong day
To an admiring bog!
</code></pre>
<p>Ar fheabhas, fuaireamar l√≠nte freisin ina raibh <em>To</em>! Is f√©idir len√°r gcl√°r <code>minigrep</code> a dh√©anamh anois
cuardach c√°s-√≠ogair arna rial√∫ ag athr√≥g timpeallachta. Anois t√° a fhios agat
conas na roghanna at√° leagtha s√≠os a bhainisti√∫ tr√≠ √∫s√°id a bhaint as arg√≥int√≠ na n-orduithe n√≥ as timpeallacht
athr√≥ga.</p>
<p>Ceada√≠onn roinnt cl√°r arg√≥int√≠ <em>agus</em> athr√≥ga timpeallachta mar an gc√©anna
cumra√≠ocht. Sna c√°sanna sin, cinneann na cl√°ir a th√≥gann ceann amh√°in n√≥ an ceann eile
tosa√≠ocht. Le haghaidh cleachtaidh eile leat f√©in, d√©an iarracht √≠ogaireacht c√°is a rial√∫
tr√≠ arg√≥int ceannl√≠ne n√≥ tr√≠ athr√≥g timpeallachta. D√©an cinneadh
c√© acu ar cheart arg√≥int na n-orduithe n√≥ an athr√≥g timpeallachta a ghlacadh
tosa√≠ocht m√° re√°cht√°lfar an cl√°r le sraith amh√°in go c√°s√≠ogair agus sraith amh√°in go
neamhaird a dh√©anamh ar ch√°s.</p>
<p>T√° i bhfad n√≠os m√≥ gn√©ithe √∫s√°ideacha le pl√© sa mhod√∫l <code>std::env</code>
athr√≥ga timpeallachta: seice√°il a dhoicim√©ad√∫ chun a fh√°il amach cad at√° ar f√°il.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="teachtaireachta√≠-earr√°ide-√°-scr√≠obh-go-earr√°id-chaighde√°nach-in-ionad-aschur-caighde√°nach"><a class="header" href="#teachtaireachta√≠-earr√°ide-√°-scr√≠obh-go-earr√°id-chaighde√°nach-in-ionad-aschur-caighde√°nach">Teachtaireachta√≠ Earr√°ide √° Scr√≠obh go Earr√°id Chaighde√°nach In ionad Aschur Caighde√°nach</a></h2>
<p>Faoi l√°thair, t√°imid ag scr√≠obh √°r n-aschur go l√©ir chuig an teirmin√©al ag baint √∫s√°ide as an
<code>println!</code> macra. I bhformh√≥r na gcr√≠ochfort, t√° dh√° chine√°l aschuir: <em>standard
aschur</em> (<code>stdout</code>) le haghaidh faisn√©ise ginear√°lta agus <em>earr√°id chaighde√°nach</em> (<code>stderr</code>) le haghaidh
teachtaireachta√≠ earr√°ide. Cuireann an t-idirdheal√∫ seo ar chumas √∫s√°ideoir√≠ rogha a dh√©anamh chun an
aschur rath√∫il cl√°r go comhad ach f√≥s teachtaireachta√≠ earr√°ide a phriont√°il chuig an
sc√°ile√°n.</p>
<p>N√≠l an macra <code>println!</code> in ann priont√°il ach go dt√≠ aschur caighde√°nach, mar sin n√≠ m√≥r d√∫inn
rud √©igin eile a √∫s√°id le priont√°il go hearr√°id chaighde√°nach.</p>
<h3 id="ag-seice√°il-c√°-bhfuil-earr√°id√≠-scr√≠ofa"><a class="header" href="#ag-seice√°il-c√°-bhfuil-earr√°id√≠-scr√≠ofa">Ag Seice√°il C√° bhfuil Earr√°id√≠ Scr√≠ofa</a></h3>
<p>Ar dt√∫s d√©anaimis breathn√∫ ar an gcaoi a bhfuil an t-√°bhar at√° cl√≥ite ag <code>minigrep</code> √° phriont√°il faoi l√°thair
scr√≠ofa chuig aschur caighde√°nach, lena n-√°ir√≠tear aon teachtaireachta√≠ earr√°ide ar mhaith linn scr√≠obh chucu
earr√°id chaighde√°nach ina ionad sin. D√©anfaimid √© sin tr√≠d an sruth caighde√°nach aschuir a atreor√∫
chuig comhad agus √© ina ch√∫is le hearr√°id d'aon ghn√≥. N√≠ dh√©anfaimid an caighde√°n a atreor√∫
sruth earr√°ide, mar sin beidh aon √°bhar a seoladh chuig earr√°id chaighde√°nach ar aghaidh ag taispe√°int ar
an sc√°ile√°n.</p>
<p>T√°thar ag s√∫il go seolfaidh cl√°ir l√≠ne ordaithe teachtaireachta√≠ earr√°ide chuig an earr√°id chaighde√°nach
sruth ionas gur f√©idir linn f√≥s teachtaireachta√≠ earr√°ide a fheice√°il ar an sc√°ile√°n fi√∫ m√° atreora√≠onn muid an
sruth caighde√°nach aschuir chuig comhad. N√≠l √°r gcl√°r m√∫inte faoi l√°thair:
t√°imid ar t√≠ a fheice√°il go s√°bh√°lann s√© aschur na teachtaireachta earr√°ide chuig comhad ina ionad sin!</p>
<p>Leis an iompar seo a l√©iri√∫, rithfidh muid an cl√°r le <code>&gt;</code> agus cos√°n an chomhaid,
<em>output.txt</em>, ar mhaith linn an sruth caighde√°nach aschuir a atreor√∫ chuige. N√≠ dh√©anfaimid
pas a fh√°il ar arg√≥int√≠ ar bith, ar cheart d√≥ibh earr√°id a chruth√∫:</p>
<pre><code class="language-console">$ cargo run &gt; output.txt
</code></pre>
<p>Ins√≠onn an chomhr√©ir <code>&gt;</code> don bhlaosc √°bhar an aschuir chaighde√°naigh a scr√≠obh chuige
<em>output.txt</em> in ionad an sc√°ile√°in. N√≠ fhacamar an teachtaireacht earr√°ide a bh√≠ againn
ag s√∫il cl√≥ite ar an sc√°ile√°n, mar sin a chialla√≠onn go gcaithfidh s√© a bheith dar cr√≠och suas sa
comhad. Seo a bhfuil i <em>output.txt</em>:</p>
<pre><code class="language-text">Problem parsing arguments: not enough arguments
</code></pre>
<p>Sea, t√° √°r dteachtaireacht earr√°ide √° phriont√°il go dt√≠ an t-aschur caighde√°nach. T√° s√© i bhfad n√≠os m√≥
√∫s√°ideach chun teachtaireachta√≠ earr√°ide mar seo a phriont√°il go hearr√°id chaighde√°nach amh√°in
cr√≠ochna√≠onn sonra√≠ √≥ rith rath√∫il suas sa chomhad. Athr√≥imid √© sin.</p>
<h3 id="earr√°id√≠-priont√°la-go-earr√°id-chaighde√°nach"><a class="header" href="#earr√°id√≠-priont√°la-go-earr√°id-chaighde√°nach">Earr√°id√≠ Priont√°la go Earr√°id Chaighde√°nach</a></h3>
<p>√ös√°idfimid an c√≥d i Liost√∫ 12-24 chun an chaoi a phriont√°iltear teachtaireachta√≠ earr√°ide a athr√∫.
Mar gheall ar an refactoring rinne muid n√≠os luaithe sa chaibidil seo, go l√©ir an c√≥d go
t√° teachtaireachta√≠ earr√°ide prionta√≠ in aon fheidhm amh√°in, <code>main</code>. Sol√°thra√≠onn an leabharlann caighde√°nach
an macra <code>eprintln!</code> a phriont√°lann go dt√≠ an sruth caighde√°nach earr√°ide, mar sin d√©anaimis athr√∫
an d√° √°it a raibh muid ag glaoch <code>println!</code> chun earr√°id√≠ a phriont√°il chun <code>eprintln!</code> a √∫s√°id
ina ionad.</p>
<Listing number="12-24" file-name="src/main.rs" caption="Writing error messages to standard error instead of standard output using `eprintln!`">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::process;
</span><span class="boring">
</span><span class="boring">use minigrep::Config;
</span><span class="boring">
</span>fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let config = Config::build(&amp;args).unwrap_or_else(|err| {
        eprintln!("Problem parsing arguments: {err}");
        process::exit(1);
    });

    if let Err(e) = minigrep::run(config) {
        eprintln!("Application error: {e}");
        process::exit(1);
    }
}</code></pre>
</Listing>
<p>D√©anaimis an cl√°r a rith ar√≠s ar an mbealach c√©anna, gan arg√≥int√≠ agus
aschur caighde√°nach √° atreor√∫ le <code>&gt;</code>:</p>
<pre><code class="language-console">$ cargo run &gt; output.txt
Problem parsing arguments: not enough arguments
</code></pre>
<p>Anois feicimid an earr√°id ar an sc√°ile√°n agus n√≠l aon rud ag <em>output.txt</em>, is √© sin an
iompar a mbeimid ag s√∫il leis √≥ chl√°ir na n-orduithe.</p>
<p>Rithfimid an cl√°r ar√≠s le harg√≥int√≠ nach n-eascra√≠onn earr√°id ach at√° f√≥s
atreor√∫ aschur caighde√°nach chuig comhad, mar sin:</p>
<pre><code class="language-console">$ cargo run -- to poem.txt &gt; output.txt
</code></pre>
<p>N√≠ fheicfimid aon aschur chuig an teirmin√©al, agus beidh √°r gcuid <em>output.txt</em>
tortha√≠:</p>
<p><span class="filename">Ainm comhaid: output.txt</span></p>
<pre><code class="language-text">Are you nobody, too?
How dreary to be somebody!
</code></pre>
<p>L√©ir√≠onn s√© seo go bhfuil aschur caighde√°nach √° √∫s√°id againn anois le haghaidh aschur rath√∫il
agus earr√°id chaighde√°nach maidir le haschur earr√°ide de r√©ir mar is cu√≠.</p>
<h2 id="achoimre-11"><a class="header" href="#achoimre-11">Achoimre</a></h2>
<p>Rinne an chaibidil seo achoimre ar chuid de na m√≥rchoincheapa at√° foghlamtha agat go dt√≠ seo agus
cl√∫daithe conas oibr√≠ochta√≠ coitianta I/O a dh√©anamh i Rust. Tr√≠ √∫s√°id a bhaint as l√≠ne ordaithe
arg√≥int√≠, comhaid, athr√≥ga timpeallachta, agus an macra <code>eprintln!</code> le haghaidh priont√°la
earr√°id√≠, t√° t√∫ r√©idh anois feidhmchl√°ir orduithe a scr√≠obh. In √©ineacht le
na coincheapa i gcaibidl√≠ roimhe seo, beidh do ch√≥d a bheith eagraithe go maith, sonra√≠ a st√≥r√°il
go h√©ifeachtach sna strucht√∫ir sonra√≠ cu√≠, earr√°id√≠ a l√°imhse√°il go deas, agus a bheith
dea-th√°st√°il.</p>
<p>Ansin, d√©anfaimid ini√∫chadh ar roinnt gn√©ithe Rust a raibh tionchar ag feidhmi√∫il orthu
teangacha: d√∫nta agus iterators.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gn√©ithe-feidhmi√∫la-teanga-iterators-agus-d√∫nadh"><a class="header" href="#gn√©ithe-feidhmi√∫la-teanga-iterators-agus-d√∫nadh">Gn√©ithe Feidhmi√∫la Teanga: Iterators agus D√∫nadh</a></h1>
<p>Fuair ‚Äã‚Äãdearadh Rust inspior√°id √≥ go leor teangacha at√° ann cheana f√©in agus
teicn√≠c√≠, agus tionchar suntasach amh√°in is ea <em>r√≠omhchl√°r√∫ feidhme</em>.
Cuims√≠onn r√≠omhchl√°r√∫ i st√≠l fheidhmi√∫il feidhmeanna a √∫s√°id mar luachanna tr√≠
iad a rith in arg√≥int√≠, iad a thabhairt ar ais √≥ fheidhmeanna eile, iad a shannadh
chuig athr√≥ga le cur i gcr√≠ch n√≠os d√©ana√≠, agus mar sin de.</p>
<p>Sa chaibidil seo, n√≠ bheidh muid ag d√©anamh d√≠osp√≥ireachta ar an gceist cad is r√≠omhchl√°r√∫ feidhmi√∫il ann
nach bhfuil ach ina ionad sin pl√©ifidh s√© roinnt gn√©ithe de Rust at√° cos√∫il leo
gn√©ithe i go leor teangacha ar a dtugtar go minic feidhmi√∫il.</p>
<p>Go sonrach, cl√∫d√≥imid:</p>
<ul>
<li><em>Closures</em>, t√≥g√°il at√° cos√∫il le feidhm is f√©idir leat a st√≥r√°il in athr√≥g</li>
<li><em>Iterators</em>, bealach chun sraith eilimint√≠ a phr√≥ise√°il</li>
<li>Conas d√∫nadh agus atrialt√≥ir√≠ a √∫s√°id chun an tionscadal I/O i gCaibidil 12 a fheabhs√∫</li>
<li>Feidhm√≠ocht d√∫nta agus iterators (Fol√°ireamh Spoiler: t√° siad n√≠os tap√∫la n√°
seans go gceapf√°!)</li>
</ul>
<p>T√° roinnt gn√©ithe Rust eile cl√∫daithe againn cheana f√©in, cos√∫il le meaitse√°il patr√∫n agus
enums, a bhfuil tionchar freisin ag an st√≠l fheidhmi√∫il. Toisc m√°istreacht
Is cuid th√°bhachtach de scr√≠bhneoireacht idiomatic, tapa Rust √© d√∫nta agus iterators
c√≥d, tabharfaimid an chaibidil ioml√°n seo d√≥ibh.# Functional Language Features: Iterators and Closures</p>
<div style="break-before: page; page-break-before: always;"></div><!-- Sean-cheannteideal. N√° bain amach n√≥ seans go mbrisfidh naisc. -->
<p><a id="closures-anonymous-feidhmeanna-a-f√©idir-a ghabh√°il-a-timpeallacht"></a></p>
<h2 id="d√∫nadh-feidhmeanna-gan-ainm-a-gabhann-a-dtimpeallacht"><a class="header" href="#d√∫nadh-feidhmeanna-gan-ainm-a-gabhann-a-dtimpeallacht">D√∫nadh: Feidhmeanna Gan Ainm a Gabhann A dTimpeallacht</a></h2>
<p>Is feidhmeanna gan ainm iad d√∫nadh Rust is f√©idir leat a sh√°bh√°il in athr√≥g n√≥ pas a fh√°il mar
arg√≥int√≠ le feidhmeanna eile. Is f√©idir leat an d√∫nadh a chruth√∫ in aon √°it amh√°in agus ansin
glaoch ar an d√∫nadh √°it eile chun √© a mheas i gcomhth√©acs difri√∫il. Murab ionann
feidhmeanna, is f√©idir le d√∫nadh luachanna a ghabh√°il √≥n raon feidhme ina bhfuil siad sainithe.
L√©ireoimid conas a cheada√≠onn na gn√©ithe d√∫nta seo ath√∫s√°id c√≥d agus iompar
saincheaptha.</p>
<!-- Sean-cheannteidil. N√° bain amach n√≥ seans go mbrisfidh naisc. -->
<p><a id="creating-an-abstraction-of-behavior-with-closures"></a>
<a id="refactoring-using-functions"></a>
<a id="refactoring-with-closures-to-store-code"></a></p>
<h3 id="ag-gabh√°il-na-timpeallachta-le-d√∫nadh"><a class="header" href="#ag-gabh√°il-na-timpeallachta-le-d√∫nadh">Ag Gabh√°il na Timpeallachta le D√∫nadh</a></h3>
<p>Scr√∫d√≥imid ar dt√∫s conas is f√©idir linn d√∫nadh a √∫s√°id chun luachanna a fh√°il √≥ na
timpeallacht ina bhfuil siad sainithe le h√∫s√°id n√≠os d√©ana√≠. Seo √© an sc√©al: Gach c√°s
go minic, tugann √°r gcomhlacht t-l√©ine l√©ine eisiach, eagr√°n teoranta do
duine ar √°r liosta post√°la mar chur chun cinn. Is f√©idir le daoine ar an liosta post√°la
go roghnach a dath is fearr leat a chur ar a bpr√≥if√≠l. M√° t√° an duine a roghna√≠odh le haghaidh
t√° a sraith dathanna is fearr leat ag l√©ine saor in aisce, faigheann siad an l√©ine dath sin. M√° t√° an
n√≠l dath is fearr leat sonraithe ag an duine, faigheann siad cib√© dath at√° ar an gcuideachta
faoi ‚Äã‚Äãl√°thair t√° an chuid is m√≥ de.</p>
<p>T√° go leor beala√≠ ann chun √© seo a chur i bhfeidhm. Mar shampla, bainfimid √∫s√°id as
enum ar a dtugtar <code>ShirtColor</code> a bhfuil na leaganacha <code>Red</code> agus <code>Blue</code> (le teorainn
l√≠on na dathanna at√° ar f√°il ar mhaithe le simpl√≠ocht). D√©anaimid ionada√≠ocht ar son na cuideachta
fardal le strucht√∫r <code>Inventory</code> ar a bhfuil r√©imse darb ainm <code>shirts</code> sin
ina bhfuil <code>Vec&lt;ShirtColor&gt;</code> a sheasann do dhathanna na l√©ine at√° sa stoc faoi l√°thair.
Faigheann an modh <code>giveaway</code> a shainmh√≠n√≠tear ar <code>Inventory</code> an l√©ine roghnach
rogha dath an bhuaiteoir l√©ine in aisce, agus filleann dath an l√©ine an
gheobhaidh duine. Taispe√°ntar an socr√∫ seo i Liost√∫ 13-1:</p>
<Listing number="13-1" file-name="src/main.rs" caption="Shirt company giveaway situation">
<pre><code class="language-rust noplayground">#[derive(Debug, PartialEq, Copy, Clone)]
enum ShirtColor {
    Red,
    Blue,
}

struct Inventory {
    shirts: Vec&lt;ShirtColor&gt;,
}

impl Inventory {
    fn giveaway(&amp;self, user_preference: Option&lt;ShirtColor&gt;) -&gt; ShirtColor {
        user_preference.unwrap_or_else(|| self.most_stocked())
    }

    fn most_stocked(&amp;self) -&gt; ShirtColor {
        let mut num_red = 0;
        let mut num_blue = 0;

        for color in &amp;self.shirts {
            match color {
                ShirtColor::Red =&gt; num_red += 1,
                ShirtColor::Blue =&gt; num_blue += 1,
            }
        }
        if num_red &gt; num_blue {
            ShirtColor::Red
        } else {
            ShirtColor::Blue
        }
    }
}

fn main() {
    let store = Inventory {
        shirts: vec![ShirtColor::Blue, ShirtColor::Red, ShirtColor::Blue],
    };

    let user_pref1 = Some(ShirtColor::Red);
    let giveaway1 = store.giveaway(user_pref1);
    println!(
        "The user with preference {:?} gets {:?}",
        user_pref1, giveaway1
    );

    let user_pref2 = None;
    let giveaway2 = store.giveaway(user_pref2);
    println!(
        "The user with preference {:?} gets {:?}",
        user_pref2, giveaway2
    );
}</code></pre>
</Listing>
<p>T√° dh√° l√©ine ghorma agus l√©ine dhearg amh√°in f√°gtha sa <code>store</code> a shainmh√≠n√≠tear sa <code>main</code>
a dh√°ileadh don chur chun cinn eagr√°n teoranta seo. Tugaimid an modh <code>giveaway</code>
d'√∫s√°ideoir a bhfuil rogha le haghaidh l√©ine dearg agus √∫s√°ideoir gan aon rogha.</p>
<p>Ar√≠s, d‚Äôfh√©adfa√≠ an c√≥d seo a chur i bhfeidhm ar go leor beala√≠, agus anseo, chun d√≠ri√∫ air
d√∫nadh, t√°imid tar √©is clo√≠ le coincheapa at√° foghlamtha agat cheana f√©in seachas an corp√°n
an modh <code>giveaway</code> a √∫s√°ideann clabhs√∫r. Sa mhodh <code>giveaway</code>, faigheann muid an
rogha an √∫s√°ideora mar pharaim√©adar den chine√°l <code>Option&lt;ShirtColor&gt;</code> agus glaoigh ar an
modh <code>unwrap_or_else</code> ar <code>user_preference</code>. T√° an modh <a href="../std/option/enum.Option.html#method.unwrap_or_else"><code>unwrap_or_else</code> ar si√∫l
<code>Option&lt;T&gt;</code></a><!-- neamhaird --> ag an ngn√°thleabharlann.
B√≠onn arg√≥int amh√°in ann: d√∫nadh gan arg√≥int√≠ ar bith a thugann luach <code>T</code> ar ais
(an cine√°l c√©anna at√° st√≥r√°ilte sa leagan <code>Some</code> den <code>Option&lt;T&gt;</code>, sa ch√°s seo
<code>ShirtColor</code>). M√°s √© an <code>Option&lt;T&gt;</code> an ‚Äã‚Äãleagan <code>Some</code>, <code>unwrap_or_else</code>
aischuireann an luach √≥ laistigh den <code>Some</code>. M√°s √© an <code>Option&lt;T&gt;</code> an ‚Äã‚Äã<code>None</code>
leagan eile, glaonn <code>unwrap_or_else</code> an d√∫nadh agus seolann s√© an luach ar ais le
an d√∫nadh.</p>
<p>Sonraimid an slonn d√∫nta <code>|| self.most_stocked()</code> mar an arg√≥int chun
<code>unwrap_or_else</code>. Seo d√∫nadh nach nglacann aon pharaim√©adair f√©in (m√° t√° an
Bh√≠ paraim√©adair ag d√∫nadh, bheadh ‚Äã‚Äãsiad le feice√°il idir an d√° bharra ingearach). T√° an
glaonn comhlacht an d√∫nta <code>self.most_stocked()</code>. T√°imid ag sainmh√≠ni√∫ an d√∫nadh
anseo, agus d√©anfaidh feidhmi√∫ <code>unwrap_or_else</code> an d√∫nadh a mheas
n√≠os d√©ana√≠ m√° t√° an toradh ag teast√°il.</p>
<p>Ag rith an ch√≥id seo prionta√≠:</p>
<pre><code class="language-console">$ cargo run
   Compiling shirt-company v0.1.0 (file:///projects/shirt-company)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.27s
     Running `target/debug/shirt-company`
The user with preference Some(Red) gets Red
The user with preference None gets Blue
</code></pre>
<p>Gn√© shuimi√∫il amh√°in anseo n√° gur √©irigh linn d√∫nadh a ghlaonn
<code>self.most_stocked()</code> ar an gc√°s reatha <code>Inventory</code>. An leabharlann caighde√°nach
n√≠or gh√° go mbeadh eolas ar bith againn ar na cine√°lacha <code>Inventory</code> n√≥ <code>ShirtColor</code> at√° againn
sainithe, n√≥ an loighic ba mhaith linn a √∫s√°id sa ch√°s seo. Gabhann an d√∫nadh an
tagairt domhalartaithe don √°sc <code>self</code> <code>Inventory</code> agus √© a chur ar aghaidh leis an
c√≥d a shonraimid leis an modh <code>unwrap_or_else</code>. Feidhmeanna, ar an l√°imh eile,
nach bhfuil in ann a dtimpeallacht a ghabh√°il ar an mbealach seo.</p>
<h3 id="t√°tail-agus-an√≥t√°il-cine√°l-d√∫nadh"><a class="header" href="#t√°tail-agus-an√≥t√°il-cine√°l-d√∫nadh">T√°tail agus An√≥t√°il Cine√°l D√∫nadh</a></h3>
<p>T√° n√≠os m√≥ difr√≠ochta√≠ idir feidhmeanna agus d√∫nta. N√≠ dh√©anann d√∫nta
de ghn√°th √©il√≠onn t√∫ cine√°lacha na bparaim√©adar n√≥ an luach tuairisce√°in a an√≥t√°il
mar a dh√©anann feidhmeanna <code>fn</code>. Teasta√≠onn n√≥ta√≠ cine√°il ar fheidhmeanna toisc go bhfuil an
t√° cine√°lacha mar chuid de chomh√©adan follasach a nochtar do d'√∫s√°ideoir√≠. Ag sainmh√≠ni√∫ seo
comh√©adan docht t√°bhachtach chun a chinnti√∫ go n-aonta√≠onn gach duine ar cad iad na cine√°lacha
de luachanna √∫s√°ideann feidhm agus tuairisce√°in. Ar an l√°imh eile, n√≠ √∫s√°idtear d√∫nta
i gcomh√©adan nochta mar seo: d√©antar iad a st√≥r√°il in athr√≥ga agus √∫s√°idtear iad gan
iad a ainmni√∫ agus iad a nochtadh d'√∫s√°ideoir√≠ √°r leabharlann.</p>
<p>Is iond√∫il go mb√≠onn d√∫nta gearr agus n√≠ bhaineann siad ach le comhth√©acs c√∫ng
n√° in aon ch√°s treallach. Laistigh de na comhth√©acsanna teoranta seo, is f√©idir leis an tiomsaitheoir
t√°tail na bparaim√©adar agus an cine√°l tuairisce√°in, cos√∫il leis an gcaoi a bhfuil s√© in ann
chun t√°tal a bhaint as na cine√°lacha athr√≥g is m√≥ (t√° c√°sanna annamh nuair a bh√≠onn an tiomsaitheoir
t√° n√≥ta√≠ d√∫nta de dh√≠th freisin).</p>
<p>Mar is amhlaidh le hathr√≥ga, is f√©idir linn n√≥ta√≠ cine√°il a chur leis m√°s mian linn m√©ad√∫ a dh√©anamh
soil√©ireacht agus soil√©ireacht ar chostas a bheith n√≠os briathartha n√° mar at√° go docht
riachtanach. Is cos√∫il leis an sainmh√≠ni√∫ an sainmh√≠ni√∫ a thabhairt ar na cine√°lacha le haghaidh d√∫nadh
l√©irithe i Liost√∫ 13-2. Sa sampla seo, t√°imid ag sainmh√≠ni√∫ d√∫nadh agus √° st√≥r√°il
in athr√≥g seachas an d√∫nadh a shaini√∫ sa spota tugaimid thairis √© mar
arg√≥int mar a rinneamar i Liosta 13-1.</p>
<Listing number="13-2" file-name="src/main.rs" caption="Adding optional type annotations of the parameter and return value types in the closure">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use std::thread;
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn generate_workout(intensity: u32, random_number: u32) {
</span>    let expensive_closure = |num: u32| -&gt; u32 {
        println!("calculating slowly...");
        thread::sleep(Duration::from_secs(2));
        num
    };
<span class="boring">
</span><span class="boring">    if intensity &lt; 25 {
</span><span class="boring">        println!("Today, do {} pushups!", expensive_closure(intensity));
</span><span class="boring">        println!("Next, do {} situps!", expensive_closure(intensity));
</span><span class="boring">    } else {
</span><span class="boring">        if random_number == 3 {
</span><span class="boring">            println!("Take a break today! Remember to stay hydrated!");
</span><span class="boring">        } else {
</span><span class="boring">            println!(
</span><span class="boring">                "Today, run for {} minutes!",
</span><span class="boring">                expensive_closure(intensity)
</span><span class="boring">            );
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let simulated_user_specified_value = 10;
</span><span class="boring">    let simulated_random_number = 7;
</span><span class="boring">
</span><span class="boring">    generate_workout(simulated_user_specified_value, simulated_random_number);
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Agus n√≥ta√≠ cine√°il curtha leis, t√° cuma n√≠os cos√∫la ar chomhr√©ir na nd√∫nta√≠ leis an
comhr√©ir feidhmeanna. Anseo sain√≠mid feidhm a chuireann 1 lena pharaim√©adar agus
clabhs√∫r a bhfuil an t-iompar c√©anna air, chun compar√°id a dh√©anamh. Chuireamar roinnt sp√°sanna leis
chun na codanna √°bhartha a l√≠ne√°il. L√©ir√≠onn s√© seo an chomhr√©ir d√∫nta comhchos√∫il
chun comhr√©ir a fheidhmi√∫ ach amh√°in maidir le h√∫s√°id p√≠opa√≠ agus an m√©id comhr√©ire at√°
roghnach:</p>
<pre><code class="language-rust ignore">fn  add_one_v1   (x: u32) -&gt; u32 { x + 1 }
let add_one_v2 = |x: u32| -&gt; u32 { x + 1 };
let add_one_v3 = |x|             { x + 1 };
let add_one_v4 = |x|               x + 1  ;</code></pre>
<p>Taispe√°nann an ch√©ad l√≠ne sainmh√≠ni√∫ ar fheidhm, agus taispe√°nann an dara l√≠ne sainmh√≠ni√∫ ioml√°n
sainmh√≠ni√∫ d√∫nta an√≥t√°ilte. Sa tr√≠√∫ l√≠ne, bainimid na n√≥ta√≠ cine√°il
√≥n sainmh√≠ni√∫ d√∫nta. Sa cheathr√∫ l√≠ne, bainimid na l√∫ib√≠n√≠, a bhfuil
at√° roghnach toisc nach bhfuil ach l√©iri√∫ amh√°in ag an gcomhlacht d√∫nta. Is iad seo go l√©ir
sainmh√≠nithe bail√≠ a thabharfaidh an t-iompar c√©anna nuair a ghlaotar orthu. T√° an
√âil√≠onn l√≠nte <code>add_one_v3</code> agus <code>cuir_one_v4</code> go nd√©anfa√≠ na d√∫nta a mheas
in ann a thioms√∫ mar go mbeidh na cine√°lacha a thuiscint √≥na n-√∫s√°id. T√° s√© seo
cos√∫il le <code>let v = Vec::new();</code> a dteasta√≠onn ceachtar den chine√°l n√≥ta√≠ n√≥ luachanna de
cine√°l √©igin le cur isteach sa <code>Vec</code> le go mbeidh Rust in ann an cine√°l a thuiscint.</p>
<p>Maidir le sainmh√≠nithe d√∫nta, bainfidh an tiomsaitheoir le t√°tal a bhaint as cine√°l coincr√©ite amh√°in do gach ceann d√≠obh
a bparaim√©adar agus a luach aischuir. Mar shampla, taispe√°nann Liost√∫ 13-3
an sainmh√≠ni√∫ ar dh√∫nadh gairid nach dtugann ach an luach a fhaigheann s√© ar ais mar a
paraim√©adar. N√≠l an d√∫nadh seo an-√∫s√°ideach ach amh√°in chun cr√≠ocha seo
shampla. Tabhair faoi deara nach bhfuil aon chine√°l n√≥ta√≠ curtha againn leis an sainmh√≠ni√∫.
Toisc nach bhfuil aon n√≥ta√≠ cine√°il ann, is f√©idir linn an d√∫nadh a ghlaoch le haon chine√°l,
rud at√° d√©anta againn anseo le <code>String</code> an ch√©ad uair. M√° dh√©anaimid iarracht ansin glaoch
<code>example_closure</code> le sl√°nuimhir, gheobhaidh muid earr√°id.</p>
<Listing number="13-3" file-name="src/main.rs" caption="Attempting to call a closure whose types are inferred with two different types">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let example_closure = |x| x;

    let s = example_closure(String::from("hello"));
    let n = example_closure(5);
<span class="boring">}</span></code></pre>
</Listing>
<p>Tugann an tiomsaitheoir an earr√°id seo d√∫inn:</p>
<pre><code class="language-console">$ cargo run
   Compiling closure-example v0.1.0 (file:///projects/closure-example)
error[E0308]: mismatched types
 --&gt; src/main.rs:5:29
  |
5 |     let n = example_closure(5);
  |             --------------- ^- help: try using a conversion method: `.to_string()`
  |             |               |
  |             |               expected `String`, found integer
  |             arguments to this function are incorrect
  |
note: expected because the closure was earlier called with an argument of type `String`
 --&gt; src/main.rs:4:29
  |
4 |     let s = example_closure(String::from("hello"));
  |             --------------- ^^^^^^^^^^^^^^^^^^^^^ expected because this argument is of type `String`
  |             |
  |             in this closure call
note: closure parameter defined here
 --&gt; src/main.rs:2:28
  |
2 |     let example_closure = |x| x;
  |                            ^

For more information about this error, try `rustc --explain E0308`.
error: could not compile `closure-example` (bin "closure-example") due to 1 previous error
</code></pre>
<p>An ch√©ad uair a thugaimid <code>example_closure</code> air leis an luach <code>String</code>, an tiomsaitheoir
tugtar le tuiscint gur <code>String</code> an cine√°l <code>x</code> agus an cine√°l fillte den d√∫nadh. Iad si√∫d
cuirtear cine√°lacha faoi ghlas ansin sa d√∫nadh i <code>example_closure</code>, agus faigheann muid cine√°l
earr√°id nuair a dh√©anaimid iarracht cine√°l eile a √∫s√°id leis an d√∫nadh c√©anna.</p>
<h3 id="tagairt√≠-a-ghabh√°il-n√≥-√öin√©ireacht-a-bhogadh"><a class="header" href="#tagairt√≠-a-ghabh√°il-n√≥-√öin√©ireacht-a-bhogadh">Tagairt√≠ a Ghabh√°il n√≥ √öin√©ireacht a Bhogadh</a></h3>
<p>Is f√©idir le d√∫nta luachanna a ghabh√°il √≥na dtimpeallacht ar thr√≠ bhealach, rud a
l√©arsc√°il go d√≠reach chuig na tr√≠ bhealach is f√©idir le feidhm a ghlacadh paraim√©adar: iasacht a fh√°il
go do-athraithe, iasachta√≠ a fh√°il go comhuaineach, agus √∫in√©ireacht a ghlacadh. Cinnfidh an d√∫nadh
c√© acu seo at√° le h√∫s√°id bunaithe ar cad a dh√©anann corp na feidhme leis an
luachanna gafa.</p>
<p>I Liost√∫ 13-4, sainmh√≠n√≠mid d√∫nadh a ghabhann tagairt do-athlasach do
an veicteoir darb ainm <code>list</code> toisc nach bhfuil de dh√≠th air ach tagairt do-athlasta le priont√°il
an luach:</p>
<Listing number="13-4" file-name="src/main.rs" caption="Defining and calling a closure that captures an immutable reference">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let list = vec![1, 2, 3];
    println!("Before defining closure: {list:?}");

    let only_borrows = || println!("From closure: {list:?}");

    println!("Before calling closure: {list:?}");
    only_borrows();
    println!("After calling closure: {list:?}");
}</code></pre></pre>
</Listing>
<p>L√©ir√≠onn an sampla seo freisin gur f√©idir le hathr√≥g ceangal le sainmh√≠ni√∫ d√∫nta,.
agus is f√©idir linn an d√∫nadh a ghlaoch n√≠os d√©ana√≠ tr√≠d an ainm athr√≥g agus l√∫ib√≠n√≠ a √∫s√°id mar
d√° mba ainm feidhme √© an t-ainm athr√≥g.</p>
<p>Toisc gur f√©idir linn go leor tagairt√≠ do-athlasta a bheith againn do <code>list</code> ag an am c√©anna,
t√° <code>list</code> f√≥s inrochtana √≥n gc√≥d roimh an sainmh√≠ni√∫ d√∫nta, tar √©is
an sainmh√≠ni√∫ ar dh√∫nadh ach sula dtugtar an d√∫nadh, agus tar √©is an d√∫nadh
ar a dtugtar. Tiomsa√≠onn, ritheann agus prionta√≠ an c√≥d seo:</p>
<pre><code class="language-console">$ cargo run
     Locking 1 package to latest compatible version
      Adding closure-example v0.1.0 (/Users/chris/dev/rust-lang/book/tmp/listings/ch13-functional-features/listing-13-04)
   Compiling closure-example v0.1.0 (file:///projects/closure-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.43s
     Running `target/debug/closure-example`
Before defining closure: [1, 2, 3]
Before calling closure: [1, 2, 3]
From closure: [1, 2, 3]
After calling closure: [1, 2, 3]
</code></pre>
<p>Ansin, i Liost√∫ 13-5, athra√≠onn muid an corp d√∫nta ionas go gcuireann s√© eilimint leis
an veicteoir <code>list</code>. Gabhann an d√∫nadh tagairt mutable anois:</p>
<Listing number="13-5" file-name="src/main.rs" caption="Defining and calling a closure that captures a mutable reference">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut list = vec![1, 2, 3];
    println!("Before defining closure: {list:?}");

    let mut borrows_mutably = || list.push(7);

    borrows_mutably();
    println!("After calling closure: {list:?}");
}</code></pre></pre>
</Listing>
<p>Tiomsa√≠onn, ritheann agus prionta√≠ an c√≥d seo:</p>
<pre><code class="language-console">$ cargo run
     Locking 1 package to latest compatible version
      Adding closure-example v0.1.0 (/Users/chris/dev/rust-lang/book/tmp/listings/ch13-functional-features/listing-13-05)
   Compiling closure-example v0.1.0 (file:///projects/closure-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.43s
     Running `target/debug/closure-example`
Before defining closure: [1, 2, 3]
After calling closure: [1, 2, 3, 7]
</code></pre>
<p>Tabhair faoi deara nach bhfuil <code>println!</code> a thuilleadh idir an sainmh√≠ni√∫ agus an glao ar
an d√∫nadh <code>borrows_mutably</code>: nuair a shainmh√≠n√≠tear <code>borrows_mutably</code>, gabhann s√©
tagairt mutable do <code>list</code>. N√≠ √∫s√°idimid an d√∫nadh ar√≠s tar √©is an d√∫nta
ar a dtugtar, mar sin a thagann deireadh leis an iasacht mutable. Idir an sainmh√≠ni√∫ d√∫nta agus an
glao d√∫nta, n√≠ cheada√≠tear iasacht neamh-inaistrithe le priont√°il toisc nach bhfuil ceann eile
ceada√≠tear iasachta√≠ nuair a bh√≠onn iasacht shochorraithe ann. Bain triail as <code>println!</code> a chur leis
ann a fheice√°il c√©n teachtaireacht earr√°ide a fhaigheann t√∫!</p>
<p>M√°s mian leat iallach a chur ar an d√∫nadh √∫in√©ireacht a ghlacadh ar na luachanna a √∫s√°ideann s√© sa
timpeallacht c√© nach g√° go docht le corp an d√∫nta
√∫in√©ireacht, is f√©idir leat an eochairfhocal <code>move</code> a √∫s√°id roimh liosta na bparaim√©adar.</p>
<p>T√° an teicn√≠ocht seo √∫s√°ideach den chuid is m√≥ agus d√∫nadh √° rith ag sn√°ithe nua le bogadh
na sonra√≠ ionas go mbeidh s√© faoi √∫in√©ireacht an sn√°ithe nua. Pl√©ifimid sn√°itheanna agus c√©n f√°th
ba mhaith leat iad a √∫s√°id go mion i gCaibidil 16 agus muid ag caint faoi
concurrency, ach faoi l√°thair, d√©anaimis ini√∫chadh gairid ar sceite sn√°ithe nua ag baint √∫s√°ide as a
d√∫nadh a dteasta√≠onn an eochairfhocal <code>move</code>. L√©ir√≠onn Liost√∫ 13-6 Liosta 13-4 modhnaithe
chun an veicteoir a phriont√°il i sn√°ithe nua seachas sa phr√≠omhshn√°ithe:</p>
<Listing number="13-6" file-name="src/main.rs" caption="Using `move` to force the closure for the thread to take ownership of `list`">
<pre><pre class="playground"><code class="language-rust">use std::thread;

fn main() {
    let list = vec![1, 2, 3];
    println!("Before defining closure: {list:?}");

    thread::spawn(move || println!("From thread: {list:?}"))
        .join()
        .unwrap();
}</code></pre></pre>
</Listing>
<p>Scaipimid sn√°ithe nua, rud a fh√°gann gur d√∫nadh an sn√°ithe a rith mar arg√≥int. T√° an
comhlacht d√∫nadh prionta√≠ amach an liosta. I Liosta 13-4, n√≠or gabhadh ach an d√∫nadh
<code>list</code> ag baint √∫s√°ide as tagairt neamh-inmhalartaithe toisc gurb √© sin an m√©id rochtana is l√∫
chun <code>list</code> a theasta√≠onn chun √© a phriont√°il. Sa sampla seo, c√© go bhfuil an comhlacht d√∫nta
f√≥s ag teast√°il ach tagairt do- immutable, n√≠ m√≥r d√∫inn a shonr√∫ gur ch√≥ir <code>list</code>
a bhogadh isteach sa d√∫nadh tr√≠d an eochairfhocal <code>move</code> a chur ag t√∫s an
sainmh√≠ni√∫ d√∫nta. Seans go gcr√≠ochn√≥dh an sn√°ithe nua roimh an gcuid eile den phr√≠omhshn√°ithe
bailchr√≠ocha an tsn√°ithe, n√≥ b'fh√©idir go gcr√≠ochn√≥dh an pr√≠omhshn√°ithe ar dt√∫s. M√° t√° an sn√°ithe is m√≥
choinnigh √∫in√©ireacht ar <code>list</code> ach th√°inig deireadh leis sular th√°inig agus thit an sn√°ithe nua
<code>list</code>, bheadh ‚Äã‚Äãan tagairt do-athlasta sa sn√°ithe neamhbhail√≠. D√° bhr√≠ sin, an
√âil√≠onn tiomsaitheoir go n-aistreofar <code>list</code> isteach sa d√∫nadh a thugtar don sn√°ithe nua
mar sin beidh an tagairt bail√≠. Bain triail as an eochairfhocal <code>move</code> a bhaint n√≥ √∫s√°id a bhaint as <code>list</code>
sa sn√°ithe is m√≥ tar √©is an d√∫nadh a shainmh√≠ni√∫ a fheice√°il cad earr√°id√≠ tiomsaitheoir t√∫
faigh!</p>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="storing-closures-using-generic-parameters-and-the-fn-traits"></a>
<a id="limitations-of-the-cacher-implementation"></a>
<a id="moving-captured-values-out-of-the-closure-and-the-fn-traits"></a></p>
<h3 id="luachanna-gafa-√°-bogadh-as-d√∫nadh-agus-na-tr√©ithe-fn"><a class="header" href="#luachanna-gafa-√°-bogadh-as-d√∫nadh-agus-na-tr√©ithe-fn">Luachanna Gafa √° Bogadh As D√∫nadh agus na Tr√©ithe <code>Fn</code></a></h3>
<p>Nuair a bheidh tagairt faighte ag d√∫nadh n√≥ √∫in√©ireacht luach a ghabh√°il √≥
an timpeallacht ina sainmh√≠n√≠tear an d√∫nadh (ar an gcaoi sin b√≠onn tionchar aige ar cad, m√°s rud ar bith,
ar athra√≠odh a ionad <em>into</em> an d√∫nadh), sainmh√≠n√≠onn an c√≥d i gcorp an d√∫nta cad
a tharla√≠onn do na tagairt√≠ n√≥ na luachanna nuair a dh√©antar an d√∫nadh a mheas n√≠os d√©ana√≠ (mar sin
ag cur isteach ar an rud, m√°s rud ar bith, a bhogtar <em>amach as</em> an d√∫nadh). Is f√©idir le comhlacht d√∫nadh
d√©an aon cheann d√≠obh seo a leanas: bog luach gafa amach as an d√∫nadh, mutate an
luach a gabhadh, n√° bogadh n√° mutate an luach, n√≥ a ghabh√°il aon rud √≥ na
timpeallacht ar dt√∫s.</p>
<p>B√≠onn tionchar ag an mbealach a shealbha√≠onn agus a l√°imhse√°lann d√∫nadh luachanna √≥n gcomhshaol
a bhfuil tr√©ithe na n-uirlis√≠ d√∫nta, agus na tr√©ithe a bhaineann le feidhmeanna agus strucht√∫ir
is f√©idir a shonr√∫ cad iad na cine√°lacha d√∫nta is f√©idir leo a √∫s√°id. D√∫nfar go huathoibr√≠och
cuir ceann amh√°in, dh√° cheann, n√≥ tr√≠ cinn de na tr√©ithe <code>Fn</code> seo i bhfeidhm ar bhealach suimitheach,
ag brath ar an gcaoi a l√°imhse√°lann corp an d√∫naidh na luachanna:</p>
<ol>
<li>Baineann <code>FnOnce</code> le d√∫nadh ar f√©idir glaoch orthu uair amh√°in. Cuireann gach d√∫nadh i bhfeidhm
an trait seo ar a laghad, mar is f√©idir glaoch ar gach d√∫nadh. D√∫nadh sin
n√≠ chuirfidh bogann luachanna a gabhadh amach as a chorp ach <code>FnOnce</code> agus n√≠ chuirfidh s√© aon cheann i bhfeidhm
de na tr√©ithe <code>Fn</code> eile, mar n√≠ f√©idir √© a ghlaoch ach uair amh√°in.</li>
<li>Baineann <code>FnMut</code> le d√∫nadh nach n-aistr√≠onn luachanna a gabhadh amach as a gcuid
comhlacht, ach d'fh√©adfadh s√© sin na luachanna a gabhadh a athr√∫. Is f√©idir leis na d√∫nta seo a bheith
ar a dtugtar n√≠os m√≥ n√° uair amh√°in.</li>
<li>Baineann <code>Fn</code> le d√∫nadh nach n-aistr√≠onn luachanna gafa amach as a gcorp
agus nach mut√°lann luachanna a gabhadh, chomh maith le d√∫nadh a ghabh√°il
rud ar bith √≥na dtimpeallacht. Is f√©idir glaoch ar na d√∫nta seo n√≠os m√≥ n√° uair amh√°in
gan mutating a dtimpeallacht, rud at√° t√°bhachtach i gc√°sanna mar
d√∫nadh a ghlaoch go minic i gcomhthr√°th.</li>
</ol>
<p>Breathna√≠mid ar an sainmh√≠ni√∫ ar an modh <code>unwrap_or_else</code> ar <code>Option&lt;T&gt;</code> go
d‚Äô√∫s√°ideamar i Liost√∫ 13-1:</p>
<pre><code class="language-rust ignore">impl&lt;T&gt; Option&lt;T&gt; {
    pub fn unwrap_or_else&lt;F&gt;(self, f: F) -&gt; T
    where
        F: FnOnce() -&gt; T
    {
        match self {
            Some(x) =&gt; x,
            None =&gt; f(),
        }
    }
}</code></pre>
<p>Thabhairt chun cuimhne gurb √© <code>T</code> an cine√°l cine√°lach a l√©ir√≠onn an cine√°l luacha sa
Leagan <code>Some</code> de <code>Option</code>. Is √© an cine√°l sin <code>T</code> freisin an cine√°l tuairisce√°in den
feidhm <code>unwrap_or_else</code>: c√≥d a ghlaonn <code>unwrap_or_else</code> ar an
Gheobhaidh <code>Option&lt;String&gt;</code>, mar shampla, <code>String</code>.</p>
<p>Ansin, tabhair faoi deara go bhfuil an cine√°l cine√°lach breise ag an bhfeidhm <code>unwrap_or_else</code>
paraim√©adar <code>F</code>. Is √© an cine√°l <code>F</code> n√° cine√°l an pharaim√©adar darb ainm <code>f</code>, mar at√°
an d√∫nadh a chuirimid ar f√°il nuair a ghlaonn t√∫ ar <code>unwrap_or_else</code>.</p>
<p>Is √≠ an tr√©ith a shonra√≠tear ar an gcine√°l cine√°lach <code>F</code> n√° <code>FnOnce() -&gt; T</code>, a
cialla√≠onn s√© go gcaithfidh <code>F</code> a bheith in ann glaoch a chur air uair amh√°in, gan arg√≥int√≠ a ghlacadh, agus <code>T</code> a thabhairt ar ais.
Tr√≠ √∫s√°id a bhaint as <code>FnOnce</code> sa tr√©ith faoi cheangal cuirtear an srian sin in i√∫l
N√≠ dh√©anfaidh <code>unwrap_or_else</code> ach <code>f</code> a ghlaoch ar uair amh√°in ar a mh√©ad. I gcorp na
<code>unwrap_or_else</code>, feicimid m√°s <code>Some</code> an <code>Option</code>, n√≠ bheidh <code>f</code>
ar a dtugtar. Murab √© an <code>Option</code> n√° <code>None</code>, tabharfar <code>f</code> uair amh√°in. Mar gheall ar go l√©ir
feidhm√≠onn d√∫nta <code>FnOnce</code>, glacann <code>unwrap_or_else</code> leis na tr√≠ chine√°l
d√∫nta agus t√° s√© chomh sol√∫btha agus is f√©idir.</p>
<blockquote>
<p>N√≥ta: M√°s rud √© nach g√° luach a ghabh√°il √≥n m√©id is mian linn a dh√©anamh
timpeallacht, is f√©idir linn ainm feidhm a √∫s√°id seachas d√∫nadh. Le haghaidh
mar shampla, d'fh√©adfaimis <code>unwrap_or_else(Vec::nua)</code> a ghlaoch ar luach <code>Option&lt;Vec&lt;T&gt;&gt;</code>
chun veicteoir nua, folamh a fh√°il m√°s √© an luach <code>None</code>. An tiomsaitheoir go huathoibr√≠och
cuireann s√© i bhfeidhm cib√© ceann de na tr√©ithe <code>Fn</code> a bhaineann le feidhm
sainmh√≠ni√∫.</p>
</blockquote>
<p>Anois breathna√≠mid ar an modh caighde√°nach leabharlainne <code>sort_by_key</code> at√° sainmh√≠nithe ar slisn√≠,
a fheice√°il conas at√° s√© difri√∫il √≥ <code>unwrap_or_else</code> agus c√©n f√°th a n-√∫s√°ideann <code>sort_by_key</code>
<code>FnMut</code> in ionad <code>FnOnce</code> don trait faoi cheangal. Faigheann an d√∫nadh arg√≥int amh√°in
i bhfoirm tagartha don mh√≠r reatha sa tslis at√° √° bhreithni√∫,.
agus cuireann s√© ar ais luach cine√°l <code>K</code> is f√©idir a ord√∫. T√° an fheidhm seo √∫s√°ideach
nuair is mian leat slice a sh√≥rt√°il de r√©ir tr√©ith ar leith de gach m√≠r. I
Ag liost√∫ 13-7, t√° liosta c√°sanna <code>Rectangle</code> againn agus √∫s√°idimid <code>sort_by_key</code>
chun iad a ord√∫ de r√©ir a tr√©ith <code>width</code> √≥ √≠seal go hard:</p>
<Listing number="13-7" file-name="src/main.rs" caption="Using `sort_by_key` to order rectangles by width">
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let mut list = [
        Rectangle { width: 10, height: 1 },
        Rectangle { width: 3, height: 5 },
        Rectangle { width: 7, height: 12 },
    ];

    list.sort_by_key(|r| r.width);
    println!("{list:#?}");
}</code></pre></pre>
</Listing>
<p>Priont√°lann an c√≥d seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling rectangles v0.1.0 (file:///projects/rectangles)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.41s
     Running `target/debug/rectangles`
[
    Rectangle {
        width: 3,
        height: 5,
    },
    Rectangle {
        width: 7,
        height: 12,
    },
    Rectangle {
        width: 10,
        height: 1,
    },
]
</code></pre>
<p>Is √© an ch√∫is a shainmh√≠n√≠tear <code>sort_by_key</code> chun d√∫nadh <code>FnMut</code> a ghlacadh n√° go nglaonn s√©
an d√∫nadh iolra√≠: uair amh√°in do gach m√≠r sa slice. N√≠ dh√©anann an d√∫nadh <code>|r| r.width</code> aon rud a ghabh√°il, a mutadh n√° a bhogadh amach √≥na thimpeallacht, mar sin
comhl√≠onann s√© na ceanglais a bhaineann le tr√©ithe.</p>
<p>I gcodarsnacht leis sin, l√©ir√≠onn Liosta 13-8 sampla de dh√∫nadh a fheidhm√≠onn d√≠reach
an trait <code>FnOnce</code>, toisc go mbogann s√© luach amach as an timpeallacht. T√° an
n√≠ ligfidh an tiomsaitheoir d√∫inn an d√∫nadh seo a √∫s√°id le <code>sort_by_key</code>:</p>
<Listing number="13-8" file-name="src/main.rs" caption="Attempting to use an `FnOnce` closure with `sort_by_key`">
<pre><code class="language-rust ignore does_not_compile">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let mut list = [
        Rectangle { width: 10, height: 1 },
        Rectangle { width: 3, height: 5 },
        Rectangle { width: 7, height: 12 },
    ];

    let mut sort_operations = vec![];
    let value = String::from("closure called");

    list.sort_by_key(|r| {
        sort_operations.push(value);
        r.width
    });
    println!("{list:#?}");
}</code></pre>
</Listing>
<p>Is bealach suarach, convoluted √© seo (nach n-oibr√≠onn) chun iarracht a dh√©anamh na
l√≠on uaireanta a ghlaonn <code>sort_by_key</code> ar an d√∫nadh agus <code>list</code> √° sh√≥rt√°il. An c√≥d seo
d√©anann s√© iarracht an comhaireamh seo a dh√©anamh tr√≠ <code>value</code>‚Äîa <code>String</code> a bhr√∫ √≥ na d√∫nta
timpeallacht - isteach sa veicteoir <code>sort_operations</code>. Gabhann an d√∫nadh <code>value</code>
ansin bogtar <code>value</code> amach as an d√∫nadh tr√≠ √∫in√©ireacht <code>value</code> a aistri√∫ go dt√≠
an veicteoir <code>sort_operations</code>. Is f√©idir an d√∫nadh seo a ghairm uair amh√°in; ag iarraidh glaoch
n√≠ n-oibreodh s√© an dara huair mar n√≠ bheadh ‚Äã‚Äã<code>value</code> sa
timpeallacht a bhr√∫ isteach i <code>sort_operations</code> ar√≠s! D√° bhr√≠ sin, an d√∫nadh seo
n√≠ chuireann ach <code>FnOnce</code> i bhfeidhm. Nuair a dh√©anaimid iarracht an c√≥d seo a thioms√∫, faigheann muid an earr√°id seo
nach f√©idir an <code>value</code> sin a bhogadh amach as an d√∫nadh mar n√≠ m√≥r an d√∫nadh
cuir <code>FnMut</code> i bhfeidhm:</p>
<pre><code class="language-console">$ cargo run
   Compiling rectangles v0.1.0 (file:///projects/rectangles)
error[E0507]: cannot move out of `value`, a captured variable in an `FnMut` closure
  --&gt; src/main.rs:18:30
   |
15 |     let value = String::from("closure called");
   |         ----- captured outer variable
16 |
17 |     list.sort_by_key(|r| {
   |                      --- captured by this `FnMut` closure
18 |         sort_operations.push(value);
   |                              ^^^^^ move occurs because `value` has type `String`, which does not implement the `Copy` trait
   |
help: consider cloning the value if the performance cost is acceptable
   |
18 |         sort_operations.push(value.clone());
   |                                   ++++++++

For more information about this error, try `rustc --explain E0507`.
error: could not compile `rectangles` (bin "rectangles") due to 1 previous error
</code></pre>
<p>D√≠r√≠onn an earr√°id ar an l√≠ne sa chorp d√∫nta a bhogann <code>value</code> amach as an
timpeallacht. Chun √© seo a shocr√∫, n√≠ m√≥r d√∫inn an comhlacht d√∫nta a athr√∫ ionas nach nd√©anann s√©
luachanna a bhogadh amach as an timpeallacht. Chun an l√≠on uaireanta an d√∫nadh a chomhaireamh
ar a dtugtar, cuntar a choinne√°il sa timpeallacht agus a luach a mh√©ad√∫ i
Is bealach n√≠os simpl√≠ √© an comhlacht d√∫nta chun √© sin a r√≠omh. An d√∫nadh
i Liost√∫ 13-9 oibr√≠onn s√© le <code>sort_by_key</code> toisc nach bhfuil ann ach mutable a ghabh√°il
tagairt don chuntar <code>num_sort_operations</code> agus mar sin is f√©idir n√≠os m√≥ a ghlaoch air
n√° uair amh√°in:</p>
<Listing number="13-9" file-name="src/main.rs" caption="Using an `FnMut` closure with `sort_by_key` is allowed">
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let mut list = [
        Rectangle { width: 10, height: 1 },
        Rectangle { width: 3, height: 5 },
        Rectangle { width: 7, height: 12 },
    ];

    let mut num_sort_operations = 0;
    list.sort_by_key(|r| {
        num_sort_operations += 1;
        r.width
    });
    println!("{list:#?}, sorted in {num_sort_operations} operations");
}</code></pre></pre>
</Listing>
<p>T√° na tr√©ithe <code>Fn</code> t√°bhachtach nuair a bh√≠onn feidhmeanna n√≥ cine√°lacha sin √° saini√∫ n√≥ √° n-√∫s√°id
√∫s√°id a bhaint as d√∫nta. Sa ch√©ad chuid eile, d√©anfaimid pl√© ar atriallta. go leor
Glacann modhanna iterator arg√≥int√≠ d√∫nta, mar sin coinnigh na sonra√≠ d√∫nta seo san √°ireamh
agus muid ag lean√∫int ar aghaidh!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sraith-m√≠reanna-a-phr√≥ise√°il-le-hiterators"><a class="header" href="#sraith-m√≠reanna-a-phr√≥ise√°il-le-hiterators">Sraith M√≠reanna a Phr√≥ise√°il le hIterators</a></h2>
<p>Ceada√≠onn an patr√∫n atriator duit tasc √©igin a dh√©anamh ar sheicheamh m√≠reanna i
cas. B√≠onn iterator freagrach as loighic atriallta thar gach m√≠r agus
ag cinneadh cathain a bheidh an seicheamh cr√≠ochnaithe. Nuair a √∫s√°ideann t√∫ atriallt√≥ir√≠, n√≠ dh√©anann t√∫
caithfidh t√∫ an loighic sin a chur i bhfeidhm duit f√©in.</p>
<p>I Rust, t√° iterators <em>lazy</em>, rud a chialla√≠onn nach bhfuil aon √©ifeacht acu go dt√≠ go ghlaonn t√∫
modhanna a √≠d√≠onn an t-iterator chun √© a √∫s√°id suas. Mar shampla, an c√≥d i
Crutha√≠onn liost√∫ 13-10 atriallt√≥ir thar na m√≠reanna sa veicteoir <code>v1</code> tr√≠ ghlaoch a chur air
an modh <code>iter</code> arna shainmh√≠ni√∫ ar <code>Vec&lt;T&gt;</code>. N√≠ dh√©anann an c√≥d seo ann f√©in rud ar bith
√∫s√°ideach.</p>
<Listing number="13-10" file-name="src/main.rs" caption="Creating an iterator">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v1 = vec![1, 2, 3];

    let v1_iter = v1.iter();
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>St√≥r√°iltear an t-iterator san athr√≥g <code>v1_iter</code>. Chomh luath agus at√° cruthaithe againn
iterator, is f√©idir linn √© a √∫s√°id ar bheala√≠ √©ags√∫la. I Liosta 3-5 i gCaibidil 3, t√°imid
atriallta thar eagar ag baint √∫s√°ide as l√∫b <code>for</code> chun roinnt c√≥d a fhorghn√≠omh√∫ ar gach ceann d√° chuid
m√≠reanna. Faoin gcochall chruthaigh s√© seo go hintuigthe agus ansin d'√≥l s√© iterator,
ach rinneamar gl√≥ir ar conas go d√≠reach a oibr√≠onn s√© sin go dt√≠ seo.</p>
<p>Sa sampla i Liost√∫ 13-11, scaraimid cruth√∫ an atriart√≥ra √≥
√∫s√°id an iterator sa l√∫b <code>for</code>. Nuair a thugtar an l√∫b <code>for</code> ag baint √∫s√°ide as
an t-iterator in <code>v1_iter</code>, √∫s√°idtear gach eilimint san aitreoir i gceann amh√°in
atriallta na l√∫b, a phrionta√≠ amach gach luach.</p>
<Listing number="13-11" file-name="src/main.rs" caption="Using an iterator in a `for` loop">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v1 = vec![1, 2, 3];

    let v1_iter = v1.iter();

    for val in v1_iter {
        println!("Got: {val}");
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>I dteangacha nach bhfuil aitritheoir√≠ curtha ar f√°il ag a leabharlanna caighde√°nacha,
is d√≥cha go scr√≠obhf√° an fheidhmi√∫lacht ch√©anna seo tr√≠ athr√≥g a thos√∫ ag inn√©acs
0, ag baint √∫s√°ide as an athr√≥g sin chun inn√©acs√∫ isteach sa veicteoir chun luach a fh√°il, agus
ag incriminti√∫ an luach athraitheach i l√∫b go dt√≠ go shroich s√© l√≠on ioml√°n na
m√≠reanna sa veicteoir.</p>
<p>L√°imhse√°lann iterators an loighic sin ar fad duit, ag gearradh s√≠os ar ch√≥d athchleachtach duit
d'fh√©adfadh praiseach a dh√©anamh. Tugann iterators n√≠os m√≥ sol√∫bthachta duit √∫s√°id a bhaint as an gc√©anna
loighic le go leor cine√°lacha √©ags√∫la de sheichimh, n√≠ hamh√°in strucht√∫ir sonra√≠ is f√©idir leat
inn√©acs isteach, cos√∫il le veicteoir√≠. D√©anaimis scr√∫d√∫ ar an gcaoi a nd√©anann atriallt√≥ir√≠ √© sin.</p>
<h3 id="an-iterator-trait-agus-an-next-modh"><a class="header" href="#an-iterator-trait-agus-an-next-modh">An <code>Iterator</code> Trait agus an <code>next</code> Modh</a></h3>
<p>Cuireann gach iterator trait darb ainm <code>Iterator</code> i bhfeidhm a shainmh√≠n√≠tear sa
leabharlann caighde√°nach. Breathna√≠onn an sainmh√≠ni√∫ ar an trait mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Iterator {
    type Item;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;

    // methods with default implementations elided
}
<span class="boring">}</span></code></pre></pre>
<p>Tabhair faoi deara go n-√∫s√°ideann an sainmh√≠ni√∫ seo roinnt comhr√©ire nua: <code>type Item</code> agus <code>Self::Item</code>,
at√° ag sainmh√≠ni√∫ cine√°l <em>a bhaineann</em> leis an tr√©ith seo. Labhr√≥imid faoi
cine√°lacha gaolmhara go domhain i gCaibidil 20. Faoi l√°thair, n√≠l a fhios agat ach go bhfuil
deir an c√≥d seo go gcaithfidh t√∫ sainmh√≠ni√∫ a thabhairt freisin chun an trait <code>Iterator</code> a chur i bhfeidhm cine√°l <code>Item</code>, agus √∫s√°idtear an cine√°l <code>Item</code> seo sa chine√°l tuairisce√°in den <code>next</code>
modh. I bhfocail eile, is √© an cine√°l <code>Item</code> an cine√°l a sheoltar ar ais √≥n
iterator.</p>
<p>N√≠ √©il√≠onn an tr√©ith <code>Iterator</code> ach ar ghn√≠omhaithe modh amh√°in a shaini√∫: an
modh <code>next</code>, a sheolann m√≠r amh√°in den aterator ar ais ag am fillte isteach
<code>Some</code> agus, nuair a bh√≠onn an atriall thart, filleann s√© <code>None</code>.</p>
<p>Is f√©idir linn an modh <code>next</code> a ghlaoch ar iterators go d√≠reach; L√©ir√≠onn liost√∫ 13-12
cad iad na luachanna a sheoltar ar ais √≥ ghlaonna ar√≠s agus ar√≠s eile go <code>next</code> ar an iterator a crutha√≠odh
√≥n veicteoir.</p>
<Listing number="13-12" file-name="src/lib.rs" caption="Calling the `next` method on an iterator">
<pre><code class="language-rust noplayground"><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span>    #[test]
    fn iterator_demonstration() {
        let v1 = vec![1, 2, 3];

        let mut v1_iter = v1.iter();

        assert_eq!(v1_iter.next(), Some(&amp;1));
        assert_eq!(v1_iter.next(), Some(&amp;2));
        assert_eq!(v1_iter.next(), Some(&amp;3));
        assert_eq!(v1_iter.next(), None);
    }
<span class="boring">}</span></code></pre>
</Listing>
<p>Tabhair faoi deara go gcaithfimid <code>v1_iter</code> mutable a dh√©anamh: ag glaoch ar an modh <code>next</code> ar an
athra√≠onn iterator staid inmhe√°nach a √∫s√°ideann an t-iterator chun s√∫il a choinne√°il ar c√° h√°it
t√° s√© san ord. I bhfocail eile, <em>√≠d√≠onn an c√≥d seo</em>, n√≥ √∫s√°ideann suas, an
iterator. Itheann gach glao go dt√≠ an ch√©ad uair eile m√≠r √≥n aterator. N√≠ raibh g√° againn
chun <code>v1_iter</code> a dh√©anamh mutable nuair a d'√∫s√°ideamar l√∫b <code>for</code> toisc gur ghlac an l√∫b
√∫in√©ireacht <code>v1_iter</code> agus rinne s√© a athr√∫ taobh thiar de na picti√∫ir.</p>
<p>Tabhair faoi deara freisin go bhfuil na luachanna a fhaighimid √≥ na glaonna go <code>next</code> neamh-inaistrithe
tagairt√≠ do na luachanna sa veicteoir. T√°irgeann an modh <code>iter</code> iterator
thar thagairt√≠ domhalartaithe. M√°s mian linn a chruth√∫ iterator a th√≥gann
√∫in√©ireacht <code>v1</code> agus luachanna √∫in√©ireachta √° dtabhairt ar ais, is f√©idir linn <code>into_iter</code> a thabhairt air ina ionad
<code>iter</code>. Ar an gcaoi ch√©anna, m√°s mian linn tagairt√≠ mutable a athr√°, is f√©idir linn glaoch
<code>iter_mut</code> in ionad <code>iter</code>.</p>
<h3 id="modhanna-a-√≠d√≠onn-an-t-iterator"><a class="header" href="#modhanna-a-√≠d√≠onn-an-t-iterator">Modhanna a √≠d√≠onn an t-Iterator</a></h3>
<p>T√° roinnt modhanna √©ags√∫la ag an tr√©ith <code>Iterator</code> le r√©amhshocr√∫
feidhmi√∫ch√°in a shol√°thra√≠onn an leabharlann chaighde√°nach; is f√©idir leat eolas a fh√°il orthu seo
Tr√≠d an doicim√©ad√∫ caighde√°nach API leabharlainne a chuardach don <code>Iterator</code>
trait. Tugann cuid de na modhanna seo an modh <code>next</code> ina sainmh√≠ni√∫, a
is √© sin an f√°th go bhfuil ort an modh <code>next</code> a chur i bhfeidhm agus t√∫ ag cur an tr√©ith <code>Iterator</code>.</p>
<p>Tugtar <em>oiri√∫n√≥ir√≠ √≠dithe</em> ar mhodhanna a dtugann <code>next</code> orthu, toisc iad a bheith ag glaoch orthu
√∫s√°ideann suas an t-iterator. Sampla amh√°in is ea an modh <code>sum</code>, a ghlacann √∫in√©ireacht air
an iterator agus atriates tr√≠ na m√≠reanna tr√≠ ghlaoch ar√≠s agus ar√≠s eile <code>next</code>, mar sin
ag caitheamh an iterator. De r√©ir mar a atrialltar tr√≠d, cuireann s√© gach m√≠r le rith
ioml√°n agus cuireann s√© an t-ioml√°n ar ais nuair a bh√≠onn atriall cr√≠ochnaithe. I liost√∫ 13-13 t√° a
t√°st√°il a l√©ir√≠onn √∫s√°id an mhodha <code>sum</code>:</p>
<Listing number="13-13" file-name="src/lib.rs" caption="Calling the `sum` method to get the total of all items in the iterator">
<pre><code class="language-rust noplayground"><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span>    #[test]
    fn iterator_sum() {
        let v1 = vec![1, 2, 3];

        let v1_iter = v1.iter();

        let total: i32 = v1_iter.sum();

        assert_eq!(total, 6);
    }
<span class="boring">}</span></code></pre>
</Listing>
<p>N√≠l cead againn <code>v1_iter</code> a √∫s√°id tar √©is an ghlao chun <code>sum</code> a dh√©anamh toisc go dt√≥gann <code>sum</code>
√∫in√©ireacht an iterator ar a dtugaimid √©.</p>
<h3 id="modhanna-a-th√°irgeann-iterators-eile"><a class="header" href="#modhanna-a-th√°irgeann-iterators-eile">Modhanna a Th√°irgeann Iterators Eile</a></h3>
<p>Is modhanna iad <em>Iterator adapters</em> arna sainmh√≠ni√∫ ar an trait <code>Iterator</code> nach bhfuil
ithe an iterator. Ina √°it sin, t√°irgeann siad iterators √©ags√∫la tr√≠ athr√∫
gn√© √©igin den iterator bunaidh.</p>
<p>L√©ir√≠onn liost√∫ 13-14 sampla de ghlaoch ar an modh cuibheora iterator <code>map</code>,
a th√≥gann d√∫nadh chun glaoch ar gach m√≠r de r√©ir mar a atrialltar na m√≠reanna tr√≠d.
Tugann an modh <code>map</code> atriar nua ar ais a th√°irgeann na hearra√≠ mionathraithe. T√° an
Crutha√≠onn d√∫nadh anseo iterator nua ina mbeidh gach m√≠r as an veicteoir
m√©adaithe ag 1:</p>
<Listing number="13-14" file-name="src/main.rs" caption="Calling the iterator adapter `map` to create a new iterator">
<pre><pre class="playground"><code class="language-rust not_desired_behavior"><span class="boring">fn main() {
</span>    let v1: Vec&lt;i32&gt; = vec![1, 2, 3];

    v1.iter().map(|x| x + 1);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Mar sin f√©in, tugann an c√≥d seo rabhadh:</p>
<pre><code class="language-console">$ cargo run
   Compiling iterators v0.1.0 (file:///projects/iterators)
warning: unused `Map` that must be used
 --&gt; src/main.rs:4:5
  |
4 |     v1.iter().map(|x| x + 1);
  |     ^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: iterators are lazy and do nothing unless consumed
  = note: `#[warn(unused_must_use)]` on by default
help: use `let _ = ...` to ignore the resulting value
  |
4 |     let _ = v1.iter().map(|x| x + 1);
  |     +++++++

warning: `iterators` (bin "iterators") generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.47s
     Running `target/debug/iterators`
</code></pre>
<p>N√≠ dh√©anann an c√≥d i Liost√∫ 13-14 faic; an d√∫nadh at√° sonraithe againn
n√≠ chuirtear glaoch riamh air. Cuireann an rabhadh i gcuimhne d√∫inn c√©n f√°th: t√° cuibheoir√≠ iterator leisci√∫il, agus
caithfimid an iterator a ithe anseo.</p>
<p>Chun an rabhadh seo a shocr√∫ agus an t-itead√≥ir a ithe, √∫s√°idfimid an modh <code>collect</code>,
a d‚Äô√∫s√°ideamar i gCaibidil 12 le <code>env::args</code> i Liost√∫ 12-1. An modh seo
√≠d√≠onn s√© an t-iterator agus bail√≠onn s√© na luachanna mar thoradh air i mbaili√∫ch√°n sonra√≠
cine√°l.</p>
<p>I Liost√°il 13-15, bail√≠mid tortha√≠ atriallta thar an atriallta sin
ar ais √≥n nglao go dt√≠ <code>map</code> isteach i veicteoir. Beidh deireadh leis an veicteoir seo
ina bhfuil gach √≠tim as an veicteoir bunaidh m√©adaithe faoi 1.</p>
<Listing number="13-15" file-name="src/main.rs" caption="Calling the `map` method to create a new iterator and then calling the `collect` method to consume the new iterator and create a vector">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v1: Vec&lt;i32&gt; = vec![1, 2, 3];

    let v2: Vec&lt;_&gt; = v1.iter().map(|x| x + 1).collect();

    assert_eq!(v2, vec![2, 3, 4]);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Toisc go dt√≥gann <code>map</code> d√∫nadh, is f√©idir linn aon oibr√≠ocht ba mhaith linn a dh√©anamh a shonr√∫
ar gach m√≠r. Is sampla iontach √© seo ar an gcaoi a ligeann d√∫nadh duit roinnt a shaincheapadh
iompar agus an t-iompar atriallta √° ath√∫s√°id ag an trait <code>Iterator</code>
sol√°thra√≠onn.</p>
<p>Is f√©idir leat glaonna iolracha a shlabhra ar oiri√∫nt√≥ir√≠ atrialach chun gn√≠omhartha casta a dh√©anamh iontu
ar bhealach inl√©ite. Ach toisc go bhfuil gach iterators leisci√∫il, caithfidh t√∫ glaoch ar cheann de na
modhanna oiri√∫naitheora a √≠di√∫ chun tortha√≠ a fh√°il √≥ ghlaonna ar oiri√∫nt√≥ir√≠ iterator.</p>
<h3 id="ag-√ös√°id-d√∫nta-a-ghabhann-a-dtimpeallacht"><a class="header" href="#ag-√ös√°id-d√∫nta-a-ghabhann-a-dtimpeallacht">Ag √ös√°id D√∫nta a Ghabhann A dTimpeallacht</a></h3>
<p>Glacann go leor oiri√∫nt√≥ir√≠ iterator d√∫nadh mar arg√≥int√≠, agus go coitianta na d√∫nta
sonr√≥idh muid mar arg√≥int√≠ d‚Äôoiri√∫n√≥ir√≠ atriallta a bheidh ina nd√∫nta√≠ a ghabhfaidh
a dtimpeallacht.</p>
<p>Mar shampla seo, √∫s√°idfimid an modh <code>filter</code> a th√≥gann d√∫nadh. T√° an
faigheann d√∫nadh m√≠r √≥n atriallt√≥ir agus tugann s√© <code>bool</code> ar ais. M√° t√° an d√∫nadh
tuairisce√°in <code>true</code>, cuirfear an luach san √°ireamh san atriall a th√°irgtear tr√≠
<code>filter</code>. M√° thugann an d√∫nadh 'br√©agach' ar ais, n√≠ chuirfear an luach san √°ireamh.</p>
<p>I Liost√∫ 13-16, √∫s√°idimid <code>filter</code> le d√∫nadh a ghlacann an <code>shoe_size</code>
athr√≥g √≥na thimpeallacht chun athr√° a dh√©anamh thar bhaili√∫ch√°n de strucht√∫r <code>Shoe</code>
c√°sanna. Tabharfaidh s√© ar ais ach br√≥ga go bhfuil an m√©id sonraithe.</p>
<Listing number="13-16" file-name="src/lib.rs" caption="Using the `filter` method with a closure that captures `shoe_size`">
<pre><code class="language-rust noplayground">#[derive(PartialEq, Debug)]
struct Shoe {
    size: u32,
    style: String,
}

fn shoes_in_size(shoes: Vec&lt;Shoe&gt;, shoe_size: u32) -&gt; Vec&lt;Shoe&gt; {
    shoes.into_iter().filter(|s| s.size == shoe_size).collect()
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn filters_by_size() {
        let shoes = vec![
            Shoe {
                size: 10,
                style: String::from("sneaker"),
            },
            Shoe {
                size: 13,
                style: String::from("sandal"),
            },
            Shoe {
                size: 10,
                style: String::from("boot"),
            },
        ];

        let in_my_size = shoes_in_size(shoes, 10);

        assert_eq!(
            in_my_size,
            vec![
                Shoe {
                    size: 10,
                    style: String::from("sneaker")
                },
                Shoe {
                    size: 10,
                    style: String::from("boot")
                },
            ]
        );
    }
}</code></pre>
</Listing>
<p>Glacann an fheidhm <code>shoes_in_size</code> √∫in√©ireacht ar veicteoir br√≥ga agus br√≥g
m√©id mar pharaim√©adair. Filleann s√© veicteoir nach bhfuil ann ach br√≥ga den mh√©id sonraithe
m√©id.</p>
<p>I gcorp <code>shoes_in_size</code>, tugaimid <code>into_iter</code> chun atriarad√≥ir a chruth√∫
a ghlacann √∫in√©ireacht ar an veicteoir. Ansin tugaimid <code>filter</code> chun √© sin a oiri√∫n√∫
iterator isteach i iterator nua go bhfuil ach gn√©ithe a dh√∫nadh
Filleann <code>true</code>.</p>
<p>Gabhann an d√∫nadh an paraim√©adar <code>shoe_size</code> √≥n timpeallacht agus
compar√°id a dh√©anamh idir an luach agus m√©id gach br√≥g, gan ach br√≥ga den mh√©id a choinne√°il
sonraithe. Ar deireadh, tr√≠ <code>collect</code> a ghlaoch bail√≠tear na luachanna a thugann an
iterator oiri√∫naithe isteach i veicteoir at√° tugtha ar ais ag an bhfeidhm.</p>
<p>L√©ir√≠onn an t√°st√°il nuair a thugaimid <code>shoes_in_size</code>, nach bhfaighimid ach br√≥ga ar ais
go bhfuil an m√©id c√©anna leis an luach e shonraigh muid.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="√År-dtionscadal-io-a-fheabhs√∫"><a class="header" href="#√År-dtionscadal-io-a-fheabhs√∫">√År dTionscadal I/O a Fheabhs√∫</a></h2>
<p>Leis an eolas nua seo faoi iterators, is f√©idir linn feabhas a chur ar an tionscadal I/O i
Caibidil 12 tr√≠ √∫s√°id a bhaint as iterators chun √°iteanna sa ch√≥d a dh√©anamh n√≠os soil√©ire agus n√≠os m√≥
gonta. Breathna√≠mid ar conas is f√©idir le hathraitheoir√≠ √°r gcur i bhfeidhm ar an
Feidhm <code>Config::build</code> agus an fheidhm <code>search</code>.</p>
<h3 id="ag-baint-clone-ag-√ös√°id-iterator"><a class="header" href="#ag-baint-clone-ag-√ös√°id-iterator">Ag baint <code>clone</code> ag √ös√°id Iterator</a></h3>
<p>I Liost√∫ 12-6, chuireamar c√≥d leis a ghlac slice de luachanna <code>String</code> agus a chruthaigh
sampla den strucht√∫r <code>Config</code> tr√≠ inn√©acs√∫ isteach sa slice agus cl√≥n√°il an
luachanna, ag ligean don strucht√∫r <code>Config</code> √∫in√©ireacht a bheith aige ar na luachanna sin. I Liost√∫ 13-17,
t√°imid tar √©is feidhmi√∫ na feidhme <code>Config::build</code> a chur i bhfeidhm mar a bh√≠
i Liosta 12-23:</p>
<Listing number="13-17" file-name="src/lib.rs" caption="Reproduction of the `Config::build` function from Listing 12-23">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">    pub ignore_case: bool,
</span><span class="boring">}
</span><span class="boring">
</span>impl Config {
    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
        if args.len() &lt; 3 {
            return Err("not enough arguments");
        }

        let query = args[1].clone();
        let file_path = args[2].clone();

        let ignore_case = env::var("IGNORE_CASE").is_ok();

        Ok(Config {
            query,
            file_path,
            ignore_case,
        })
    }
}
<span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    let results = if config.ignore_case {
</span><span class="boring">        search_case_insensitive(&amp;config.query, &amp;contents)
</span><span class="boring">    } else {
</span><span class="boring">        search(&amp;config.query, &amp;contents)
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    for line in results {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ag an am, d√∫irt muid gan a bheith buartha faoi na glaonna <code>clone</code> m√≠-√©ifeachtach mar gheall ar
chuirfimis deireadh leo amach anseo. Bhuel, t√° an t-am sin anois!</p>
<p>Bh√≠ <code>clone</code> ag teast√°il uainn anseo mar t√° slisne againn le heilimint√≠ <code>String</code> sa
paraim√©adar <code>args</code>, ach n√≠ le <code>args</code> an fheidhm <code>args</code>. Chun filleadh
√∫in√©ireacht ar shampla <code>Config</code>, bh√≠ orainn na luachanna a chl√≥n√°il √≥n <code>query</code>
agus r√©ims√≠ <code>file_path</code> de <code>Config</code> ionas gur f√©idir leis an √°sc <code>Config</code> a luachanna a bheith agat.</p>
<p>Leis an eolas nua at√° againn faoi iterators, is f√©idir linn an fheidhm <code>args</code> a athr√∫ go
√∫in√©ireacht a ghlacadh ar iterator mar a arg√≥int in ionad a fh√°il ar iasacht slice.
√ös√°idfimid feidhmi√∫lacht atrialach in ionad an ch√≥id a sheice√°lann an fad
an tslis agus na hinn√©acsanna go l√°ithreacha ar leith. Beidh s√© seo soil√©iri√∫ cad √© an
T√° feidhm <code>Config::build</code> ag d√©anamh mar go mbeidh rochtain ag an atrialach ar na luachanna.</p>
<p>Nuair a ghlacann <code>Config::build</code>' √∫in√©ireacht ar an atriallta agus stopann s√© ag √∫s√°id inn√©acs√∫
oibr√≠ochta√≠ a fhaigheann iasachta√≠, is f√©idir linn na luachanna <code>String</code> a bhogadh √≥n atriallt√≥ir isteach
<code>Config</code> seachas <code>clone</code> a ghlaoch agus leithdh√°ileadh nua a dh√©anamh.</p>
<h4 id="ag-baint-√∫s√°ide-as-an-iterator-filleadh-go-d√≠reach"><a class="header" href="#ag-baint-√∫s√°ide-as-an-iterator-filleadh-go-d√≠reach">Ag baint √∫s√°ide as an Iterator Filleadh go D√≠reach</a></h4>
<p>Oscail comhad <em>src/main.rs</em> do thionscadal I/O, ba cheart go mbeadh cuma mar seo air:</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::process;
</span><span class="boring">
</span><span class="boring">use minigrep::Config;
</span><span class="boring">
</span>fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();

    let config = Config::build(&amp;args).unwrap_or_else(|err| {
        eprintln!("Problem parsing arguments: {err}");
        process::exit(1);
    });

    // --snip--
<span class="boring">
</span><span class="boring">    if let Err(e) = minigrep::run(config) {
</span><span class="boring">        eprintln!("Application error: {e}");
</span><span class="boring">        process::exit(1);
</span><span class="boring">    }
</span>}</code></pre>
<p>Athr√≥imid ar dt√∫s t√∫s na <code>main</code> a bh√≠ againn i Liost√∫
12-24 leis an gc√≥d i Liost√∫ 13-18, a √∫s√°ideann atriallt√≥ir an uair seo. seo
n√≠ thioms√≥far go dt√≠ go nd√©anaimid <code>Config::build</code> a nuashonr√∫ freisin.</p>
<Listing number="13-18" file-name="src/main.rs" caption="Passing the return value of `env::args` to `Config::build`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::env;
</span><span class="boring">use std::process;
</span><span class="boring">
</span><span class="boring">use minigrep::Config;
</span><span class="boring">
</span>fn main() {
    let config = Config::build(env::args()).unwrap_or_else(|err| {
        eprintln!("Problem parsing arguments: {err}");
        process::exit(1);
    });

    // --snip--
<span class="boring">
</span><span class="boring">    if let Err(e) = minigrep::run(config) {
</span><span class="boring">        eprintln!("Application error: {e}");
</span><span class="boring">        process::exit(1);
</span><span class="boring">    }
</span>}</code></pre>
</Listing>
<p>Tugann an fheidhm <code>env::args</code> iterator ar ais! Seachas a bheith ag baili√∫ na
luachanna iterator isteach i veicteoir agus ansin sliocht a chur chuig <code>Config::build</code>, anois
t√°imid ag dul faoi √∫in√©ireacht an iterator a tugadh ar ais √≥ <code>env::args</code> go
<code>Config::build</code> go d√≠reach.</p>
<p>Ansin, n√≠ m√≥r d√∫inn an sainmh√≠ni√∫ ar <code>Config::build</code> a nuashonr√∫. I do I/O
comhad <em>src/lib.rs</em> an tionscadail, d√©anaimis s√≠ni√∫ <code>Config::build</code> a athr√∫ go
cuma Liost√°il 13-19. N√≠ thioms√≥idh s√© seo go f√≥ill toisc go gcaithfimid nuashonr√∫ a dh√©anamh ar an
comhlacht feidhm.</p>
<Listing number="13-19" file-name="src/lib.rs" caption="Updating the signature of `Config::build` to expect an iterator">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::env;
</span><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">    pub ignore_case: bool,
</span><span class="boring">}
</span><span class="boring">
</span>impl Config {
    pub fn build(
        mut args: impl Iterator&lt;Item = String&gt;,
    ) -&gt; Result&lt;Config, &amp;'static str&gt; {
        // --snip--
<span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        let ignore_case = env::var("IGNORE_CASE").is_ok();
</span><span class="boring">
</span><span class="boring">        Ok(Config {
</span><span class="boring">            query,
</span><span class="boring">            file_path,
</span><span class="boring">            ignore_case,
</span><span class="boring">        })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    let results = if config.ignore_case {
</span><span class="boring">        search_case_insensitive(&amp;config.query, &amp;contents)
</span><span class="boring">    } else {
</span><span class="boring">        search(&amp;config.query, &amp;contents)
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    for line in results {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>L√©ir√≠onn doicim√©ad√∫ caighde√°nach na leabharlainne don fheidhm <code>env::args</code> go bhfuil an
cine√°l an iterator a fhilleann s√© n√° <code>std::env::Args</code>, agus cuireann an cine√°l sin i bhfeidhm
an trait <code>Iterator</code> agus cuireann s√© luachanna <code>String</code> ar ais.</p>
<p>T√° s√≠ni√∫ na feidhme <code>Config::build</code> nuashonraithe againn mar sin an paraim√©adar
t√° cine√°l cine√°lach ag <code>args</code> agus na teorainneacha trait <code>impl Iterator&lt;Item = String&gt;</code>
in ionad <code>&amp;[String]</code>. √ös√°ideadh an chomhr√©ir <code>impl Trait</code> seo a phl√©amar
an <a href="ch10-02-traits.html#traits-as-parameters">‚ÄúTr√©ithe mar Pharaim√©adar‚Äù</a><!-- neamhaird --> de Chaibidil 10
cialla√≠onn s√© gur f√©idir le <code>args</code> a bheith ina chine√°l ar bith a chuireann an trait <code>Iterator</code> i bhfeidhm agus
seolann m√≠reanna <code>String</code> ar ais.</p>
<p>Toisc go bhfuil muid ag glacadh √∫in√©ireachta ar <code>args</code> agus beidh muid ag mutating <code>args</code> faoi
ag athr√° thairis air, is f√©idir linn an eochairfhocal <code>mut</code> a chur isteach i sonra√≠ocht an
paraim√©adar <code>args</code> chun √© a dh√©anamh mutable.</p>
<h4 id="ag-√ös√°id-modhanna-trait-iterator-in-ionad-inn√©acs√∫"><a class="header" href="#ag-√ös√°id-modhanna-trait-iterator-in-ionad-inn√©acs√∫">Ag √ös√°id Modhanna Trait <code>Iterator</code> In ionad Inn√©acs√∫</a></h4>
<p>Ansin, socr√≥imid corp <code>Config::build</code>. Toisc go gcuireann <code>args</code> an
Tr√©ith <code>Iterator</code>, t√° a fhios againn gur f√©idir linn an modh <code>next</code> a ghlaoch air! Liost√°il 13-20
nuashonra√≠onn s√© an c√≥d √≥ Liost√∫ 12-23 chun an modh <code>next</code> a √∫s√°id:</p>
<Listing number="13-20" file-name="src/lib.rs" caption="Changing the body of `Config::build` to use iterator methods">
<pre><code class="language-rust noplayground"><span class="boring">use std::env;
</span><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">    pub ignore_case: bool,
</span><span class="boring">}
</span><span class="boring">
</span>impl Config {
    pub fn build(
        mut args: impl Iterator&lt;Item = String&gt;,
    ) -&gt; Result&lt;Config, &amp;'static str&gt; {
        args.next();

        let query = match args.next() {
            Some(arg) =&gt; arg,
            None =&gt; return Err("Didn't get a query string"),
        };

        let file_path = match args.next() {
            Some(arg) =&gt; arg,
            None =&gt; return Err("Didn't get a file path"),
        };

        let ignore_case = env::var("IGNORE_CASE").is_ok();

        Ok(Config {
            query,
            file_path,
            ignore_case,
        })
    }
}
<span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    let results = if config.ignore_case {
</span><span class="boring">        search_case_insensitive(&amp;config.query, &amp;contents)
</span><span class="boring">    } else {
</span><span class="boring">        search(&amp;config.query, &amp;contents)
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    for line in results {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.contains(query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Cuimhnigh gurb √© an ch√©ad luach i luach aischuir <code>env::args</code> ainm
an cl√°r. Ba mhaith linn neamhaird a dh√©anamh air sin agus an ch√©ad luach eile a bhaint amach, mar sin glaoimid ar dt√∫s
<code>next</code> agus n√° d√©an faic leis an luach tuairisce√°in. Sa dara h√°it, tugaimid <code>next</code> chun an
luach ba mhaith linn a chur sa r√©imse <code>query</code> de <code>Config</code>. M√° fhilleann <code>next</code> a
<code>Some</code>, √∫s√°idimid <code>match</code> chun an luach a bhaint amach. M√° fhilleann s√© <code>None</code>, cialla√≠onn s√©
n√≠or tugadh go leor arg√≥int√≠ agus filleann muid go luath le luach <code>Err</code>. D√©anaimid
an rud c√©anna don luach <code>file_path</code>.</p>
<h3 id="c√≥d-a-dh√©anamh-n√≠os-soil√©ire-le-cuibheoir√≠-iterator"><a class="header" href="#c√≥d-a-dh√©anamh-n√≠os-soil√©ire-le-cuibheoir√≠-iterator">C√≥d a Dh√©anamh n√≠os soil√©ire le Cuibheoir√≠ Iterator</a></h3>
<p>Is f√©idir linn leas a bhaint as iterators san fheidhm <code>search</code> in√°r I/O
tionscadal, a at√°irgeadh anseo i Liost√∫ 13-21 mar a bh√≠ i Liost√∫ 12-19:</p>
<Listing number="13-21" file-name="src/lib.rs" caption="The implementation of the `search` function from Listing 12-19">
<pre><code class="language-rust ignore"><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        if args.len() &lt; 3 {
</span><span class="boring">            return Err("not enough arguments");
</span><span class="boring">        }
</span><span class="boring">
</span><span class="boring">        let query = args[1].clone();
</span><span class="boring">        let file_path = args[2].clone();
</span><span class="boring">
</span><span class="boring">        Ok(Config { query, file_path })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
    let mut results = Vec::new();

    for line in contents.lines() {
        if line.contains(query) {
            results.push(line);
        }
    }

    results
}
<span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn one_result() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Is f√©idir linn an c√≥d seo a scr√≠obh ar bhealach n√≠os gonta ag baint √∫s√°ide as modhanna oiri√∫nt√≥ra iterator.
M√° dh√©antar √© sin, is f√©idir linn veicteoir <code>results</code> idirmhe√°nacha mutable a sheachaint. T√° an
is fearr le st√≠l r√≠omhchl√°raithe feidhmi√∫il an m√©id st√°t mutable a √≠oslaghd√∫
c√≥d a dh√©anamh n√≠os soil√©ire. D'fh√©adfa√≠ feabhs√∫ sa todhcha√≠ a chumas√∫ d√° mbainf√≠ an st√°t mutable
chun cuardach a dh√©anamh ag an am c√©anna, mar n√≠ bheadh ‚Äã‚Äãorainn a bhainisti√∫
rochtain chomhthr√°thach ar an veicteoir <code>results</code>. L√©ir√≠onn liost√∫ 13-22 an t-athr√∫ seo:</p>
<Listing number="13-22" file-name="src/lib.rs" caption="Using iterator adapter methods in the implementation of the `search` function">
<pre><code class="language-rust ignore"><span class="boring">use std::env;
</span><span class="boring">use std::error::Error;
</span><span class="boring">use std::fs;
</span><span class="boring">
</span><span class="boring">pub struct Config {
</span><span class="boring">    pub query: String,
</span><span class="boring">    pub file_path: String,
</span><span class="boring">    pub ignore_case: bool,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Config {
</span><span class="boring">    pub fn build(
</span><span class="boring">        mut args: impl Iterator&lt;Item = String&gt;,
</span><span class="boring">    ) -&gt; Result&lt;Config, &amp;'static str&gt; {
</span><span class="boring">        args.next();
</span><span class="boring">
</span><span class="boring">        let query = match args.next() {
</span><span class="boring">            Some(arg) =&gt; arg,
</span><span class="boring">            None =&gt; return Err("Didn't get a query string"),
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let file_path = match args.next() {
</span><span class="boring">            Some(arg) =&gt; arg,
</span><span class="boring">            None =&gt; return Err("Didn't get a file path"),
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let ignore_case = env::var("IGNORE_CASE").is_ok();
</span><span class="boring">
</span><span class="boring">        Ok(Config {
</span><span class="boring">            query,
</span><span class="boring">            file_path,
</span><span class="boring">            ignore_case,
</span><span class="boring">        })
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub fn run(config: Config) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
</span><span class="boring">    let contents = fs::read_to_string(config.file_path)?;
</span><span class="boring">
</span><span class="boring">    let results = if config.ignore_case {
</span><span class="boring">        search_case_insensitive(&amp;config.query, &amp;contents)
</span><span class="boring">    } else {
</span><span class="boring">        search(&amp;config.query, &amp;contents)
</span><span class="boring">    };
</span><span class="boring">
</span><span class="boring">    for line in results {
</span><span class="boring">        println!("{line}");
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    Ok(())
</span><span class="boring">}
</span><span class="boring">
</span>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {
    contents
        .lines()
        .filter(|line| line.contains(query))
        .collect()
}
<span class="boring">
</span><span class="boring">pub fn search_case_insensitive&lt;'a&gt;(
</span><span class="boring">    query: &amp;str,
</span><span class="boring">    contents: &amp;'a str,
</span><span class="boring">) -&gt; Vec&lt;&amp;'a str&gt; {
</span><span class="boring">    let query = query.to_lowercase();
</span><span class="boring">    let mut results = Vec::new();
</span><span class="boring">
</span><span class="boring">    for line in contents.lines() {
</span><span class="boring">        if line.to_lowercase().contains(&amp;query) {
</span><span class="boring">            results.push(line);
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    results
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_sensitive() {
</span><span class="boring">        let query = "duct";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Duct tape.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(vec!["safe, fast, productive."], search(query, contents));
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn case_insensitive() {
</span><span class="boring">        let query = "rUsT";
</span><span class="boring">        let contents = "\
</span><span class="boring">Rust:
</span><span class="boring">safe, fast, productive.
</span><span class="boring">Pick three.
</span><span class="boring">Trust me.";
</span><span class="boring">
</span><span class="boring">        assert_eq!(
</span><span class="boring">            vec!["Rust:", "Trust me."],
</span><span class="boring">            search_case_insensitive(query, contents)
</span><span class="boring">        );
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Thabhairt chun cuimhne gurb √© cusp√≥ir na feidhme <code>search</code> gach l√≠ne a chur ar ais isteach
<code>contents</code> ina bhfuil an <code>query</code>. Cos√∫il leis an sampla <code>filter</code> i Liost√∫
13-16, √∫s√°ideann an c√≥d seo an <code>filter</code> cuibheoir a choinne√°il ach amh√°in na l√≠nte go
<code>line.contains(query)</code> filleann <code>true</code> le haghaidh. Bail√≠mid na l√≠nte meaitse√°la ansin
isteach i veicteoir eile le <code>collect</code>. I bhfad n√≠os simpl√≠! Thig leat a dh√©anamh mar an gc√©anna
athr√∫ chun modhanna atrialach a √∫s√°id san fheidhm <code>search_case_insensitive</code> mar
go maith.</p>
<h3 id="ag-roghn√∫-idir-l√∫b-n√≥-iterators"><a class="header" href="#ag-roghn√∫-idir-l√∫b-n√≥-iterators">Ag Roghn√∫ Idir L√∫b n√≥ Iterators</a></h3>
<p>Is √≠ an ch√©ad cheist loighci√∫il eile n√° c√©n st√≠l ar cheart duit a roghn√∫ i do ch√≥d f√©in agus
c√©n f√°th: an cur i bhfeidhm bunaidh i Liost√∫ 13-21 n√≥ an leagan a √∫s√°ideann
iterators i Liosta 13-22. Is fearr leis an gcuid is m√≥ de r√≠omhchl√°raitheoir√≠ Rust an t-iterator a √∫s√°id
st√≠l. T√° s√© beag√°n n√≠os deacra a fh√°il ar an hang of ar dt√∫s, ach nuair a bhraitheann t√∫
maidir leis na hoiri√∫n√≥ir√≠ iterator √©ags√∫la agus cad a dh√©anann siad, is f√©idir iterators a bheith n√≠os √©asca a
thuiscint. In ionad fiddling leis na p√≠osa√≠ √©ags√∫la l√∫badh agus t√≥g√°il
veicteoir√≠ nua, d√≠r√≠onn an c√≥d ar chusp√≥ir ardleibh√©il an l√∫b. seo
achoimr√≠onn cuid den ch√≥d coitianta ionas gur fusa na coincheapa a fheice√°il
at√° uath√∫il don ch√≥d seo, mar an riocht scagtha i ngach eilimint
n√≠ m√≥r don iterator pas a fh√°il.</p>
<p>Ach an ionann an d√° fheidhmi√∫ i nd√°ir√≠re? An toimhde iomasach
b'fh√©idir go mbeidh an l√∫b n√≠os √≠sle n√≠os tap√∫la. Labhraim√≠s faoi
feidhm√≠ochta.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="feidhm√≠ocht-a-chompar√°id-l√∫b-vs-iterators"><a class="header" href="#feidhm√≠ocht-a-chompar√°id-l√∫b-vs-iterators">Feidhm√≠ocht a Chompar√°id: L√∫b vs. Iterators</a></h2>
<p>Chun a chinneadh c√© acu l√∫b n√≥ iterators a √∫s√°id, n√≠ m√≥r duit fios a bheith agat c√© acu
t√° cur i bhfeidhm n√≠os tap√∫la: an leagan den fheidhm <code>search</code> le sainr√°ite
<code>for</code> l√∫b n√≥ an leagan le iterators.</p>
<p>Re√°cht√°ileamar tagarmharc tr√≠ √°bhar ioml√°n <em>The Adventures of
Sherlock Holmes</em> le Sir Arthur Conan Doyle isteach i <code>String</code> agus ag lorg an
focal <em>the</em> san √°bhar. Seo iad tortha√≠ an tagarmhairc ar an
leagan de <code>search</code> ag baint √∫s√°ide as an l√∫b <code>for</code> agus an leagan ag baint √∫s√°ide as iterators:</p>
<pre><code class="language-text">test bench_search_for  ... bench:  19,620,300 ns/iter (+/- 915,700)
test bench_search_iter ... bench:  19,234,900 ns/iter (+/- 657,200)
</code></pre>
<p>T√° feidhm√≠ocht den chine√°l c√©anna ag an d√° fheidhmi√∫! N√≠ mh√≠neoimid an
c√≥d tagarmharc√°la anseo, toisc nach bhfuil an pointe a chruth√∫ go bhfuil an d√° leagan
comhionann ach chun tuiscint ghinear√°lta a fh√°il ar an gcaoi a bhfuil an d√° fheidhmi√∫ seo
i gcompar√°id le feidhm√≠ocht-ciallmhar.</p>
<p>Chun tagarmharc n√≠os cuimsith√≠ a fh√°il, ba cheart duit seice√°il ag baint √∫s√°ide as t√©acsanna √©ags√∫la de
m√©ideanna √©ags√∫la mar an <code>contents</code>, focail √©ags√∫la agus focail d'fhaid √©ags√∫la
mar an <code>query</code>, agus gach cine√°l √©ags√∫lachta eile. Is √© an pointe seo:
iterators, c√© gur astarraingt ardleibh√©il, a thioms√∫ s√≠os go dt√≠ thart ar an
an c√≥d c√©anna agus a bheadh ‚Äã‚Äãd√° scr√≠obhf√° an c√≥d leibh√©al n√≠os √≠sle t√∫ f√©in. T√° iterators amh√°in
as astarraingt√≠ <em>nialais-chostais</em> Rust, rud a chialla√≠onn √∫s√°id as an astarraingt
n√≠ fhorchuirtear aon am rite breise. T√° s√© seo cos√∫il le conas Bjarne
Sainmh√≠n√≠onn Stroustrup, dearth√≥ir bunaidh agus feidhmitheoir C++
<em>zero-overhead</em> in ‚ÄúFond√∫ireachta√≠ C++‚Äù (2012):</p>
<blockquote>
<p>Go ginear√°lta, clo√≠onn feidhmeanna C++ leis an bprionsabal n√°id forchostais: Cad at√° t√∫
n√° h√∫s√°id, n√≠ √≠ocann t√∫ as. Agus anuas air sin: An rud a √∫s√°ideann t√∫, n√≠ fh√©adf√° l√°mh a chur air
c√≥d ar bith n√≠os fearr.</p>
</blockquote>
<p>Mar shampla eile, t√≥gtar an c√≥d seo a leanas √≥ dh√≠ch√≥d√≥ir fuaime. T√° an
√∫s√°ideann algartam d√≠ch√≥daithe an oibr√≠ocht matamaitice tuar l√≠neach chun
meastach√°n a dh√©anamh ar luachanna na todhcha√≠ bunaithe ar fheidhm l√≠neach de na sampla√≠ roimhe seo. seo
√ös√°ideann c√≥d slabhra iterator chun roinnt matamaitice a dh√©anamh ar thr√≠ athr√≥g i raon feidhme: a
slice de shonra√≠ <code>buffer</code>, sraith de 12 <code>coefficients</code>, agus m√©id faoina
chun sonra√≠ a aistri√∫ in <code>qlp_shift</code>. Dhearbhaigh muid na hathr√≥ga laistigh den sampla seo
ach n√≠or tugadh aon luachanna d√≥ibh; c√© nach bhfuil m√≥r√°n br√≠ leis an gc√≥d seo
taobh amuigh d√° chomhth√©acs, is sampla gonta, f√≠or-dhomhain √© f√≥s den chaoi a bhfuil Rust
aistr√≠onn smaointe ardleibh√©il go c√≥d √≠sealleibh√©il.</p>
<pre><code class="language-rust ignore">let buffer: &amp;mut [i32];
let coefficients: [i64; 12];
let qlp_shift: i16;

for i in 12..buffer.len() {
    let prediction = coefficients.iter()
                                 .zip(&amp;buffer[i - 12..i])
                                 .map(|(&amp;c, &amp;s)| c * s as i64)
                                 .sum::&lt;i64&gt;() &gt;&gt; qlp_shift;
    let delta = buffer[i];
    buffer[i] = prediction as i32 + delta;
}</code></pre>
<p>Chun luach <code>prediction</code> a r√≠omh, atri√°lann an c√≥d seo tr√≠ gach ceann de na
12 luach i <code>coefficients</code> agus √∫s√°idtear an modh <code>zip</code> chun an chomh√©ifeacht a ph√©ire√°il
luachanna leis na 12 luach roimhe seo sa <code>buffer</code>. Ansin, do gach p√©ire, muid
iolr√∫ na luachanna le ch√©ile, suim na tortha√≠ go l√©ir, agus aistrigh na giot√°n sa
suimigh <code>qlp_shift</code> ar dheis.</p>
<p>Is minic a thugann r√≠omhanna in fheidhmchl√°ir mar dh√≠ch√≥d√≥ir√≠ fuaime tosa√≠ocht don fheidhm√≠ocht
is airde. Anseo, t√° iterator √° chruth√∫ againn, ag baint √∫s√°ide as dh√° oiri√∫nt√≥ir, agus ansin
ag caitheamh an luacha. C√©n c√≥d tion√≥il a dh√©anfadh an c√≥d Rust seo a thioms√∫ d√≥? Bhuel,
√≥ thaobh na scr√≠bhneoireachta seo de, tiomsa√≠onn s√© s√≠os go dt√≠ an tion√≥l c√©anna a scr√≠obhf√° de l√°imh.
N√≠l aon l√∫b ar chor ar bith a fhreagra√≠onn don atriall thar na luachanna i
<code>coefficients</code>: T√° a fhios ag Rust go bhfuil 12 atriall ann, mar sin "d√≠rolla√≠onn s√©" an
l√∫b. Is optam√∫ √© <em>Unrolling</em> a bhainfidh an lastuas den l√∫b
c√≥d rialaithe agus ina ionad sin gineann s√© c√≥d athchleachtach do gach atriall de
an l√∫b.</p>
<p>Faigheann gach comh√©ifeachta√≠ a st√≥r√°il i gcl√°ir, rud a chialla√≠onn rochtain a fh√°il ar an
luachanna an-tapa. N√≠l aon seice√°lacha teorann ar an rochtain eagair ag am rite.
D√©anann na huasmh√©aduithe seo go l√©ir a bhfuil Rust in ann a chur i bhfeidhm an c√≥d a eascra√≠onn as
thar a bheith √©ifeachtach. Anois go bhfuil s√© seo ar eolas agat, is f√©idir leat iterators agus d√∫nta a √∫s√°id
gan eagla! D√©anann siad cos√∫il go bhfuil c√≥d ag leibh√©al n√≠os airde ach n√≠ fhorchuireann siad a
pion√≥s feidhm√≠ochta ritime as √© sin a dh√©anamh.</p>
<h2 id="achoimre-12"><a class="header" href="#achoimre-12">Achoimre</a></h2>
<p>Is gn√©ithe Rust iad d√∫nta agus iterators spreagtha ag r√≠omhchl√°r√∫ feidhmi√∫il
smaointe teanga. Cuireann siad le cumas Rust a chur in i√∫l go soil√©ir
smaointe ardleibh√©il ar fheidhm√≠ocht √≠sealleibh√©il. Feidhmeanna d√∫nta agus
is amhlaidh nach gcuirtear isteach ar fheidhm√≠ocht am rite. T√° s√© seo mar chuid de
T√° s√© mar sprioc ag Rust a dh√≠cheall a dh√©anamh astarraingt√≠ gan costas a shol√°thar.</p>
<p>Anois go bhfuil sainl√©iri√∫ √°r dtionscadal I/O feabhsaithe againn, f√©achaimis
roinnt gn√©ithe n√≠os m√≥ de <code>cargo</code> a chabhr√≥idh linn an tionscadal a roinnt leis an
domhan.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tuilleadh-faoi-cargo-agus-cratesio"><a class="header" href="#tuilleadh-faoi-cargo-agus-cratesio">Tuilleadh Faoi Cargo agus Crates.io</a></h1>
<p>Go dt√≠ seo n√≠or √∫s√°ideamar ach na gn√©ithe is bun√∫sa√≠ de Cargo chun t√≥g√°il, rith agus t√°st√°il
√°r gc√≥d, ach is f√©idir leis i bhfad n√≠os m√≥ a dh√©anamh. Sa chaibidil seo, pl√©ifimid cuid d√° cuid
gn√©ithe eile n√≠os airde chun a thaispe√°int duit conas iad seo a leanas a dh√©anamh:</p>
<ul>
<li>Saincheap do th√≥g√°il tr√≠ phr√≥if√≠l√≠ scaoileadh</li>
<li>Foilsigh leabharlanna ar <a href="https://crates.io/">crates.io</a> <!-- neamhaird --></li>
<li>Eagraigh tionscadail mh√≥ra le sp√°sanna oibre</li>
<li>Suite√°il binaries √≥ <a href="https://crates.io/">crates.io</a> <!-- neamhaird --></li>
<li>Leathnaigh Lasta ag baint √∫s√°ide as orduithe saincheaptha</li>
</ul>
<p>Is f√©idir le Cargo n√≠os m√≥ a dh√©anamh n√° an fheidhmi√∫lacht a chl√∫da√≠onn muid sa chaibidil seo, mar sin de
m√≠ni√∫ ioml√°n ar a chuid gn√©ithe go l√©ir, f√©ach <a href="https://doc.rust-lang.org/cargo/">a dhoicim√©ad√∫</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="t√≥gann-saincheapadh-le-pr√≥if√≠l√≠-eisi√∫na"><a class="header" href="#t√≥gann-saincheapadh-le-pr√≥if√≠l√≠-eisi√∫na">T√≥gann Saincheapadh le Pr√≥if√≠l√≠ Eisi√∫na</a></h2>
<p>I Rust, t√° pr√≥if√≠l√≠ <em>release</em> r√©amhshainithe agus pr√≥if√≠l√≠ inoiri√∫naithe le
cumra√≠ochta√≠ √©ags√∫la a ligeann do r√≠omhchl√°raitheoir n√≠os m√≥ smachta a bheith acu
roghanna √©ags√∫la chun c√≥d a thioms√∫. T√° gach pr√≥if√≠l cumraithe neamhsple√°ch ar
na cinn eile.</p>
<p>T√° dh√° phr√≠omhphr√≥if√≠l ag Cargo: an phr√≥if√≠l <code>dev</code> a √∫s√°ideann Cargo nuair a ritheann t√∫ <code>cargo build</code> agus an phr√≥if√≠l <code>release</code> a √∫s√°ideann Cargo nuair a ritheann t√∫ <code>cargo build --release</code>. Sainmh√≠n√≠tear an phr√≥if√≠l <code>dev</code> le r√©amhshocruithe maithe le haghaidh forbartha,
agus t√° mainneachtain√≠ maithe ag an bpr√≥if√≠l <code>release</code> maidir le t√≥g√°il scaoileadh.</p>
<p>Seans go bhfuil cur amach ar na hainmneacha pr√≥if√≠le seo √≥ aschur do chuid t√≥g√°la:</p>
<!-- athghini√∫int de l√°imh
√°it ar bith, rith:
t√≥g√°il lasta
lasta a th√≥g√°il --scaoileadh
agus a chinnti√∫ go bhfuil an t-aschur th√≠os cruinn
-->
<pre><code class="language-console">$ cargo build
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.00s
$ cargo build --release
    Finished `release` profile [optimized] target(s) in 0.32s
</code></pre>
<p>Is iad na <code>dev</code> agus <code>release</code> na pr√≥if√≠l√≠ √©ags√∫la seo a √∫s√°ideann an tiomsaitheoir.</p>
<p>T√° socruithe r√©amhshocraithe ag Cargo do gach ceann de na pr√≥if√≠l√≠ a bh√≠onn i bhfeidhm nuair nach bhfuil
cuireadh aon rann√°in <code>[profile.*]</code> isteach go sainr√°ite i gcomhad <em>Cargo.toml</em> an tionscadail.
Tr√≠ rann√°in <code>[profile.*]</code> a chur isteach d'aon phr√≥if√≠l is mian leat a shaincheapadh, n√≠ m√≥r duit
aon fho-thacar de na socruithe r√©amhshocraithe a sh√°r√∫. Mar shampla, anseo t√° an r√©amhshocraithe
luachanna don socr√∫ <code>opt-level</code> do na pr√≥if√≠l√≠ <code>dev</code> agus <code>release</code>:</p>
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3
</code></pre>
<p>Riala√≠onn an socr√∫ <code>opt-level</code> l√≠on na n-uasmh√©aduithe a mbainfidh Rust leo
do ch√≥d, le raon de 0 go 3. S√≠neann cur i bhfeidhm n√≠os m√≥ optimizations
am a thioms√∫, mar sin m√° t√° t√∫ ag forbairt agus ag tioms√∫ do ch√≥d go minic,
beidh t√∫ ag iarraidh n√≠os l√∫ optimizations a thioms√∫ n√≠os tap√∫la fi√∫ m√° t√° an c√≥d mar thoradh air
ritheann n√≠os moille. Mar sin is √© <code>0</code> an <code>opt-level</code> r√©amhshocraithe do <code>dev</code>. Nuair at√° t√∫
r√©idh chun do ch√≥d a scaoileadh, is fearr n√≠os m√≥ ama a chaitheamh ag tioms√∫. Beidh t√∫ amh√°in
tiomsaigh i m√≥d eisithe uair amh√°in, ach re√°cht√°lfaidh t√∫ an cl√°r tiomsaithe go minic,
mar sin ceirdeanna modh scaoileadh n√≠os faide ama a thioms√∫ le haghaidh c√≥d a ritheann n√≠os tap√∫la. Is √© sin
c√©n f√°th gurb √© <code>3</code> an <code>opt-level</code> r√©amhshocraithe don phr√≥if√≠l <code>release</code>.</p>
<p>Is f√©idir leat socr√∫ r√©amhshocraithe a sh√°r√∫ tr√≠ luach difri√∫il a chur leis
<em>Cargo.toml</em>. Mar shampla, m√°s mian linn leas ioml√°n a bhaint as leibh√©al 1 sa
pr√≥if√≠l forbartha, is f√©idir linn an d√° l√≠ne seo a chur le <em>Cargo.toml</em> √°r dtionscadal
comhad:</p>
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[profile.dev]
opt-level = 1
</code></pre>
<p>S√°ra√≠onn an c√≥d seo an socr√∫ r√©amhshocraithe <code>0</code>. Anois agus muid ag rith <code>cargo build</code>,
√ös√°idfidh Cargo na r√©amhshocruithe don phr√≥if√≠l <code>dev</code> m√≥ide √°r n-oiri√∫n√∫ do
<code>opt-level</code>. Toisc go bhfuil <code>opt-level</code> socraithe againn go <code>1</code>, beidh feidhm ag Cargo n√≠os m√≥
optimizations n√° an r√©amhshocr√∫, ach n√≠ oiread agus is i scaoileadh scaoileadh.</p>
<p>Le haghaidh liosta ioml√°n na roghanna cumra√≠ochta agus mainneachtain√≠ do gach pr√≥if√≠l, f√©ach
<a href="https://doc.rust-lang.org/cargo/reference/profiles.html">Doicim√©ad√∫ Cargo</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="foilsitheoireacht-crate-go-cratesio"><a class="header" href="#foilsitheoireacht-crate-go-cratesio">Foilsitheoireacht Crate go Crates.io</a></h2>
<p>D'√∫s√°ideamar pac√°ist√≠ √≥ <a href="https://crates.io/">crates.io</a> <!-- neamhaird --> mar
sple√°chais √°r dtionscadal, ach is f√©idir leat do ch√≥d a roinnt le daoine eile freisin
tr√≠ do phac√°ist√≠ f√©in a fhoilsi√∫. Cl√°rlann na gcliathbhosca ag
<a href="https://crates.io/">crates.io</a> <!-- neamhaird --> d√°ileann an c√≥d foinse
do phac√°ist√≠, mar sin go pr√≠omha √≥st√°lann s√© c√≥d foinse oscailte.</p>
<p>T√° gn√©ithe ag Rust and Cargo a dh√©anann do phac√°iste foilsithe n√≠os √©asca do dhaoine
a aimsi√∫ agus a √∫s√°id. Labhr√≥imid faoi chuid de na gn√©ithe seo ina dhiaidh sin agus m√≠neoimid ansin
conas pac√°iste a fhoilsi√∫.</p>
<h3 id="tr√°chtanna-doicim√©ad√∫ch√°in-√ös√°ideacha-a-dh√©anamh"><a class="header" href="#tr√°chtanna-doicim√©ad√∫ch√°in-√ös√°ideacha-a-dh√©anamh">Tr√°chtanna Doicim√©ad√∫ch√°in √ös√°ideacha a Dh√©anamh</a></h3>
<p>M√° dh√©antar do phac√°ist√≠ a dhoicim√©ad√∫ go cruinn cabhr√≥idh s√© seo le h√∫s√°ideoir√≠ eile a bheith ar an eolas faoi conas agus cathain
iad a √∫s√°id, mar sin is fi√∫ an t-am a infheisti√∫ chun doicim√©id a scr√≠obh. I gCaibidil
3, phl√©amar conas tr√°cht a dh√©anamh ar ch√≥d meirge ag baint √∫s√°ide as dh√° slais, <code>//</code>. T√° meirge freisin
tr√°cht de chine√°l ar leith maidir le doicim√©ad√∫, ar a dtugtar go caoth√∫il a
<em>documentation comment</em>, a ghinfidh doicim√©ad√∫ HTML. An HTML
taispe√°nann s√© an t-√°bhar tuairim√≠ doicim√©ad√∫ le haghaidh m√≠reanna API poibl√≠ at√° beartaithe
do r√≠omhchl√°raitheoir√≠ a bhfuil suim acu fios a bheith agat conas do chliabh√°n a <em>√∫s√°id</em> seachas conas
t√° do chliabh√°n <em>curtha i bhfeidhm</em>.</p>
<p>√ös√°ideann tuairim√≠ doicim√©adaithe tr√≠ shlis, <code>///</code>, in ionad dh√° cheann agus taca√≠ocht
Nodaireacht marc√°il s√≠os chun an t√©acs a fhorm√°idi√∫. Cuir tuairim√≠ doicim√©adaithe d√≠reach
roimh an m√≠r at√° √° dhoicim√©ad√∫ acu. L√©ir√≠onn liost√∫ 14-1 tuairim√≠ doicim√©adachta
le haghaidh feidhm <code>add_one</code> i gcliathbhosca darb ainm <code>my_crate</code>.</p>
<Listing number="14-1" file-name="src/lib.rs" caption="A documentation comment for a function">
<pre><code class="language-rust ignore">/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
</Listing>
<p>Anseo, tugaimid cur s√≠os ar cad a dh√©anann an fheidhm <code>add_one</code>, t√∫s a
alt leis an gceannteideal <code>Examples</code>, agus ansin cuir c√≥d ar f√°il a thaispe√°nann
conas an fheidhm <code>add_one</code> a √∫s√°id. Is f√©idir linn na doicim√©id HTML a ghini√∫int √≥
tr√°chtann an doicim√©ad√∫ seo tr√≠ <code>cargo doc</code> a rith. Ritheann an t-ord√∫ seo an
uirlis <code>rustdoc</code> a dh√°iltear le Rust agus cuireann s√© an doicim√©ad√∫ HTML ginte
san eolaire <em>target/doc</em>.</p>
<p>Ar mhaithe le caoithi√∫lacht, t√≥gfar HTML do do chuid nuair a ritheann t√∫ <code>cargo doc --open</code>'
doicim√©id reatha an chliabh√°in (chomh maith leis na doicim√©id le haghaidh do chuid
sple√°chais an chliabh√°in) agus oscail an toradh i mbrabhs√°la√≠ gr√©as√°in. D√©an nasclean√∫int go dt√≠ an
feidhm <code>add_one</code> agus feicfidh t√∫ conas at√° an t√©acs sna tuairim√≠ doicim√©adachta
rindre√°ilte, mar a thaispe√°ntar i bhF√≠or 14-1:</p>
<img alt="Rendered HTML documentation for the `add_one` function of `my_crate`" src="img/trpl14-01.png" class="center" />
<p><span class="caption">F√≠or 14-1: Doicim√©ad√∫ch√°n HTML don <code>add_one</code>
feidhm</span></p>
<h4 id="rann√≥ga-a-√ös√°idtear-go-coitianta"><a class="header" href="#rann√≥ga-a-√ös√°idtear-go-coitianta">Rann√≥ga a √ös√°idtear go Coitianta</a></h4>
<p>D‚Äô√∫s√°ideamar an ceannteideal Markdown <code># Examples</code> i Liost√∫ 14-1 chun roinn a chruth√∫
sa HTML leis an teideal "Examples." Seo a leanas roinnt ailt eile a cliathbhosca√≠
√∫s√°ideann √∫dair go coitianta ina gcuid doicim√©ad:</p>
<ul>
<li><strong>Panics</strong>: Na c√°sanna ina bhf√©adfadh an fheidhm at√° √° doicim√©ad√∫
scaoll. Ba cheart do ghlaoiteoir√≠ na feidhme nach dteasta√≠onn uathu a gcl√°ir scaoll
d√©an cinnte nach dtugann siad an fheidhm sna c√°sanna seo.</li>
<li><strong>Earr√°id√≠</strong>: M√° thugann an fheidhm <code>Result</code> ar ais, ag cur s√≠os ar na cine√°lacha
earr√°id√≠ a d‚Äôfh√©adfadh tarl√∫ agus cad iad na coinn√≠ollacha a d‚Äôfh√©adfadh a bheith ina gc√∫is leis na hearr√°id√≠ sin
d'fh√©adfadh s√© a bheith cabhrach do ghlaoiteoir√≠ ionas gur f√©idir leo c√≥d a scr√≠obh chun an
cine√°lacha √©ags√∫la earr√°id√≠ ar bheala√≠ √©ags√∫la.</li>
<li><strong>S√°bh√°ilteacht</strong>: M√° t√° an fheidhm 'neamhsh√°bh√°ilte' le glaoch (pl√©imid neamhsh√°bh√°ilteacht i
Caibidil 20), ba ch√≥ir go mbeadh alt ann a mh√≠n√≠onn c√©n f√°th a bhfuil an fheidhm neamhsh√°bh√°ilte
agus ag cl√∫dach na malairt√≠ a bhfuil an fheidhm ag s√∫il go seasfaidh glaoiteoir√≠ leo.</li>
</ul>
<p>N√≠ bh√≠onn na hailt seo go l√©ir ag teast√°il √≥ fhormh√≥r na dtuairim√≠ doicim√©adaithe, ach is a
seicliosta maith chun na gn√©ithe de do chuid √∫s√°ideoir√≠ c√≥d a chur i gcuimhne duit
suim acu eolas a fh√°il faoi.</p>
<h4 id="tuairim√≠-doicim√©ad√∫ch√°in-mar-thrialacha"><a class="header" href="#tuairim√≠-doicim√©ad√∫ch√°in-mar-thrialacha">Tuairim√≠ Doicim√©ad√∫ch√°in mar Thrialacha</a></h4>
<p>Is f√©idir cabhr√∫ le bloic shamplacha de ch√≥id a chur i do thuairim√≠ doicim√©adaithe a l√©iri√∫
conas do leabharlann a √∫s√°id, agus t√° b√≥nas breise ag baint leis sin: ag rith <code>cargo test</code> re√°cht√°lfar na sampla√≠ c√≥d i do dhoicim√©ad√∫ mar th√°st√°lacha! N√≠ dh√©anfaidh aon n√≠
n√≠os fearr n√° doicim√©ad√∫ le sampla√≠. Ach n√≠l aon rud n√≠os measa n√° sampla√≠
nach n-oibr√≠onn toisc go bhfuil an c√≥d athraithe √≥ bh√≠ an doicim√©ad√∫
scr√≠ofa. M√° rithimid <code>cargo test</code> leis na doicim√©id don <code>add_one</code>
fheidhm √≥ Liost√∫ 14-1, feicfimid roinn sna tortha√≠ t√°st√°la mar seo:</p>
<!-- manual-regeneration
cd listings/ch14-more-about-cargo/listing-14-01/
cargo test
copy just the doc-tests section below
-->
<pre><code class="language-text">   Doc-tests my_crate

running 1 test
test src/lib.rs - add_one (line 5) ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.27s
</code></pre>
<p>Anois m√° athra√≠onn muid an fheidhm n√≥ an sampla mar sin beidh an <code>assert_eq!</code> sa
mar shampla scaoll agus rith <code>cargo test</code> ar√≠s, feicfidh muid go nglacann na t√°st√°lacha doc
go bhfuil an sampla agus an c√≥d as info lena ch√©ile!</p>
<h4 id="ag-tr√°cht-ar-mh√≠reanna-cuimsithe"><a class="header" href="#ag-tr√°cht-ar-mh√≠reanna-cuimsithe">Ag Tr√°cht ar Mh√≠reanna Cuimsithe</a></h4>
<p>Cuireann an st√≠l doc comment <code>//!</code> doicim√©ad√∫ leis an m√≠r ina bhfuil an
tuairim√≠ seachas na m√≠reanna a leanann na tuairim√≠. √ös√°idimid de ghn√°th
na tuairim√≠ doc seo taobh istigh den fhr√©amhchomhad cliathbhosca (<em>src/lib.rs</em> de r√©ir an ghn√°is) n√≥
taobh istigh de mhod√∫l chun an gcliathbhosca n√≥ an mod√∫l ina ioml√°ine a dhoicim√©ad√∫.</p>
<p>Mar shampla, doicim√©ad√∫ a chur leis a chuireann s√≠os ar chusp√≥ir an <code>my_crate</code>
cliathbhosca ina bhfuil an fheidhm <code>add_one</code>, cuirimid tuairim√≠ doicim√©adaithe leis sin
tos√∫ le <code>//!</code> go dt√≠ t√∫s an chomhaid <em>src/lib.rs</em>, mar a thaispe√°ntar i Liost√∫
14-2:</p>
<Listing number="14-2" file-name="src/lib.rs" caption="Documentation for the `my_crate` crate as a whole">
<pre><code class="language-rust ignore">//! # My Crate
//!
//! `my_crate` is a collection of utilities to make performing certain
//! calculations more convenient.

/// Adds one to the number given.
// --snip--
<span class="boring">///
</span><span class="boring">/// # Examples
</span><span class="boring">///
</span><span class="boring">/// ```
</span><span class="boring">/// let arg = 5;
</span><span class="boring">/// let answer = my_crate::add_one(arg);
</span><span class="boring">///
</span><span class="boring">/// assert_eq!(6, answer);
</span><span class="boring">/// ```
</span><span class="boring">pub fn add_one(x: i32) -&gt; i32 {
</span><span class="boring">    x + 1
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Tabhair faoi deara nach bhfuil aon ch√≥d tar √©is na l√≠ne deiridh a thosa√≠onn le <code>//!</code>. Toisc
chuireamar t√∫s leis na tuairim√≠ le <code>//!</code> in ionad <code>///</code>, t√°imid ag doicim√©ad√∫ na m√≠re
ina bhfuil an tr√°cht seo seachas m√≠r a leanann an n√≥ta tr√°chta seo. I
sa ch√°s seo, is √© an mh√≠r sin an comhad <em>src/lib.rs</em>, arb √© fr√©amh an chliabh√°in √©. iad seo
cuireann tuairim√≠ s√≠os ar an gcliathbhosca ioml√°n.</p>
<p>Nuair a rithimid <code>cargo doc --open</code>, taispe√°nfar na tuairim√≠ seo ar an tosach
leathanach den ch√°ip√©is√≠ocht le haghaidh <code>my_crate</code> os cionn liosta na m√≠reanna poibl√≠ sa
cliathbhosca, mar a thaispe√°ntar i bhF√≠or 14-2:</p>
<img alt="C√°ip√©is√≠ocht HTML sol√°thraithe le n√≥ta tr√°chta don chliath√°n ina ioml√°ine" src="img/trpl14-02.png" class="center" />
<p><span class="caption">F√≠or 14-2: Doicim√©ad√∫ rindre√°ilte do <code>my_crate</code>,
lena n-√°ir√≠tear an tr√°cht a dh√©anann cur s√≠os ar an gcliathbhosca ina ioml√°ine</span></p>
<p>T√° tuairim√≠ doicim√©ad√∫ch√°in laistigh de mh√≠reanna √∫s√°ideach chun cur s√≠os a dh√©anamh ar chliabh√°in agus
mod√∫il go h√°irithe. √ös√°id iad le cusp√≥ir ioml√°n an choime√°d√°in a mh√≠ni√∫
cabhr√∫ le do chuid √∫s√°ideoir√≠ eagra√≠ocht an chliabh√°in a thuiscint.</p>
<h3 id="api-√Åisi√∫il-poibl√≠-√°-heasp√≥rt√°il-le-pub-use"><a class="header" href="#api-√Åisi√∫il-poibl√≠-√°-heasp√≥rt√°il-le-pub-use">API √Åisi√∫il Poibl√≠ √° heasp√≥rt√°il le <code>pub use</code></a></h3>
<p>Is m√≥r an breithni√∫ √© strucht√∫r d‚ÄôAPI poibl√≠ agus t√∫ ag foilsi√∫ a
cliathbhosca. Is l√∫ an eolas at√° ag daoine a √∫s√°ideann do chliabh√°n ar an strucht√∫r n√° mar at√° t√∫ f√©in
T√° agus b'fh√©idir go mbeadh deacracht acu na p√≠osa√≠ is mian leo a √∫s√°id a fh√°il m√° t√° do chliabh√°n
t√° ordlathas m√≥r mod√∫l aige.</p>
<p>I gCaibidil 7, chl√∫da√≠omar conas m√≠reanna a phoibli√∫ ag baint √∫s√°ide as an eochairfhocal <code>pub</code>, agus
m√≠reanna a thabhairt isteach i sc√≥ip leis an eochairfhocal <code>use</code>. Mar sin f√©in, an strucht√∫r a
a dh√©anann ciall duit agus t√∫ ag forbairt cliathbhosca seans nach mbeadh s√© an-√°isi√∫il
do d'√∫s√°ideoir√≠. B'fh√©idir gur mhaith leat do strucht√∫ir a eagr√∫ in ordlathas
ina bhfuil leibh√©il iolracha, ach ansin daoine at√° ag iarraidh cine√°l at√° agat a √∫s√°id
sainmh√≠nithe go domhain san ordlathas d'fh√©adfadh s√© go mbeadh deacracht ag f√°il amach go bhfuil cine√°l ann.
D'fh√©adfadh s√© go mbeadh siad buartha freisin go mbeadh orthu <code>use</code> a chur isteach
<code>my_crate::some_module::another_module::UsefulType;</code>  seachas <code>use</code>
<code>my_crate::UsefulType;</code>.</p>
<p>Is √© an dea-sc√©al n√° mura bhfuil an strucht√∫r √°isi√∫il do dhaoine eile a √∫s√°id
√≥ leabharlann eile, n√≠ g√° duit d‚Äôeagra√≠ocht inmhe√°nach a atheagr√∫:
ina ionad sin, is f√©idir leat m√≠reanna a ath-onnmhairi√∫ chun strucht√∫r poibl√≠ √©ags√∫il a dh√©anamh
√≥ do strucht√∫r pr√≠obh√°ideach tr√≠ √∫s√°id a bhaint as <code>pub use</code>. T√≥gann ath-onnmhairi√∫ poibl√≠
m√≠r in aon √°it amh√°in agus cuireann s√© go poibl√≠ √© in √°it eile, amhail is d√° mba
sainithe sa su√≠omh eile ina ionad sin.</p>
<p>Mar shampla, abair go ndearnamar leabharlann darb ainm <code>art</code> chun coincheapa eala√≠ne a shamhalt√∫.
Laistigh den leabharlann seo t√° dh√° mhod√∫l: mod√∫l <code>kinds</code> ina bhfuil dh√° enum
darb ainm <code>PrimaryColor</code> agus <code>SecondaryColor</code> agus mod√∫l <code>utils</code> ina bhfuil a
feidhm darb ainm <code>mix</code>, mar a thaispe√°ntar i Liost√∫ 14-3:</p>
<Listing number="14-3" file-name="src/lib.rs" caption="Leabharlann `art` le m√≠reanna eagraithe i mod√∫il `kinds` agus `utils`">
<pre><code class="language-rust noplayground test_harness">//! # Art
//!
//! A library for modeling artistic concepts.

pub mod kinds {
    /// The primary colors according to the RYB color model.
    pub enum PrimaryColor {
        Red,
        Yellow,
        Blue,
    }

    /// The secondary colors according to the RYB color model.
    pub enum SecondaryColor {
        Orange,
        Green,
        Purple,
    }
}

pub mod utils {
    use crate::kinds::*;

    /// Combines two primary colors in equal amounts to create
    /// a secondary color.
    pub fn mix(c1: PrimaryColor, c2: PrimaryColor) -&gt; SecondaryColor {
        // --snip--
<span class="boring">        unimplemented!();
</span>    }
}</code></pre>
</Listing>
<p>L√©ir√≠onn F√≠or 14-3 cad √© an leathanach tosaigh de na doicim√©id don chliathbhosca seo
ghintear le <code>cargo doc</code> cuma:</p>
<img alt="C√°ip√©is√≠ocht rindre√°ilte don chliath√°n `art` a liosta√≠onn na mod√∫il `kinds` agus `utils`" src="img/trpl14-03.png" class="center" />
<p><span class="caption">F√≠or 14-3: Leathanach tosaigh na doicim√©id le haghaidh <code>art</code>
a liosta√≠onn na mod√∫il <code>kinds</code> agus <code>utils</code></span></p>
<p>Tabhair faoi deara nach bhfuil na cine√°lacha <code>PrimaryColor</code> agus <code>SecondaryColor</code> liostaithe ar an
leathanach tosaigh, n√° an fheidhm <code>mix</code>. N√≠ m√≥r d√∫inn <code>kinds</code> agus <code>utils</code> a chlice√°il chun
iad a fheice√°il.</p>
<p>Teasta√≠onn r√°itis <code>use</code> ar chliathbhosca eile a bhraitheann ar an leabharlann seo
na m√≠reanna √≥ <code>art</code> a thabhairt isteach sa sc√≥ip, ag sonr√∫ strucht√∫r an mhod√∫il sin
sainithe faoi l√°thair. Taispe√°nann liosta 14-4 sampla de chliabh√°n a √∫s√°ideann an
<code>PrimaryColor</code> agus <code>mix</code> m√≠reanna √≥n gcliathbhosca <code>art</code>:</p>
<Listing number="14-4" file-name="src/main.rs" caption="Cliathbhosca ag baint √∫s√°ide as m√≠reanna an chliabh√°in `art` agus a strucht√∫r inmhe√°nach easp√≥rt√°ilte">
<pre><code class="language-rust ignore">use art::kinds::PrimaryColor;
use art::utils::mix;

fn main() {
    let red = PrimaryColor::Red;
    let yellow = PrimaryColor::Yellow;
    mix(red, yellow);
}</code></pre>
</Listing>
<p>B'√©igean d'√∫dar an ch√≥id i Liost√∫ 14-4, a √∫s√°ideann an cliathbhosca <code>art</code>
d√©an amach go bhfuil <code>PrimaryColor</code> sa mhod√∫l <code>kinds</code> agus go bhfuil <code>mix</code> sa mhod√∫l
mod√∫l <code>utils</code>. T√° strucht√∫r mod√∫il an chliathbhosca <code>art</code> n√≠os √°bhartha do
forbr√≥ir√≠ at√° ag obair ar an gcliathbhosca <code>art</code> n√° d√≥ibh si√∫d a √∫s√°ideann √©. An inmhe√°nach
n√≠l aon fhaisn√©is √∫s√°ideach sa strucht√∫r do dhuine at√° ag iarraidh
tuiscint a fh√°il ar conas an cliathbhosca <code>art</code> a √∫s√°id, ach is c√∫is le mearbhall mar gheall ar
n√≠ m√≥r d'fhorbr√≥ir√≠ a √∫s√°ideann √© a dh√©anamh amach c√° h√°it le breathn√∫, agus n√≠ m√≥r d√≥ibh an
ainmneacha mod√∫il sna r√°itis <code>use</code>.</p>
<p>Chun an eagra√≠ocht inmhe√°nach a bhaint den API poibl√≠, is f√©idir linn an
c√≥d cliathbhosca <code>art</code> i Liost√∫ 14-3 chun r√°itis <code>pub use</code> a chur leis chun an
m√≠reanna ar an leibh√©al is airde, mar a thaispe√°ntar i Liost√∫ 14-5:</p>
<Listing number="14-5" file-name="src/lib.rs" caption="Ag cur r√°itis `√∫s√°id t√≠ t√°bhairne` chun m√≠reanna a athonnmhairi√∫">
<pre><code class="language-rust ignore">//! # Art
//!
//! A library for modeling artistic concepts.

pub use self::kinds::PrimaryColor;
pub use self::kinds::SecondaryColor;
pub use self::utils::mix;

pub mod kinds {
    // --snip--
<span class="boring">    /// The primary colors according to the RYB color model.
</span><span class="boring">    pub enum PrimaryColor {
</span><span class="boring">        Red,
</span><span class="boring">        Yellow,
</span><span class="boring">        Blue,
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    /// The secondary colors according to the RYB color model.
</span><span class="boring">    pub enum SecondaryColor {
</span><span class="boring">        Orange,
</span><span class="boring">        Green,
</span><span class="boring">        Purple,
</span><span class="boring">    }
</span>}

pub mod utils {
    // --snip--
<span class="boring">    use crate::kinds::*;
</span><span class="boring">
</span><span class="boring">    /// Combines two primary colors in equal amounts to create
</span><span class="boring">    /// a secondary color.
</span><span class="boring">    pub fn mix(c1: PrimaryColor, c2: PrimaryColor) -&gt; SecondaryColor {
</span><span class="boring">        SecondaryColor::Orange
</span><span class="boring">    }
</span>}</code></pre>
</Listing>
<p>Liost√°lfar anois na doicim√©id API a ghineann <code>cargo doc</code> don chliathbhosca seo
agus nasc ath-onnmhair√≠ ar an leathanach tosaigh, mar a thaispe√°ntar i bhF√≠or 14-4, ag d√©anamh an
Cine√°lacha <code>PrimaryColor</code> agus <code>SecondaryColor</code> agus is fusa teacht ar an bhfeidhm <code>mix</code>.</p>
<img alt="C√°ip√©is√≠ocht rindre√°ilte don chliath√°n `art` leis na hathonnmhair√≠ ar an leathanach tosaigh" src="img/trpl14-04.png" class="center" />
<p><span class="caption">F√≠or 14-4: Leathanach tosaigh an doicim√©id le haghaidh <code>art</code>
a liosta√≠onn na hathonnmhair√≠</span></p>
<p>Is f√©idir leis an gcliathbhosca <code>art</code> f√≥s an strucht√∫r inmhe√°nach √≥ Liost√∫ a fheice√°il agus a √∫s√°id
14-3 mar a l√©ir√≠tear i Liosta 14-4, n√≥ is f√©idir leo an ceann is √°isi√∫la a √∫s√°id
strucht√∫r i Liost√∫ 14-5, mar a thaispe√°ntar i Liost√∫ 14-6:</p>
<Listing number="14-6" file-name="src/main.rs" caption="Cl√°r a √∫s√°ideann na m√≠reanna ath-onnmhairithe √≥n gcliathbhosca `art`">
<pre><code class="language-rust ignore">use art::mix;
use art::PrimaryColor;

fn main() {
    // --snip--
<span class="boring">    let red = PrimaryColor::Red;
</span><span class="boring">    let yellow = PrimaryColor::Yellow;
</span><span class="boring">    mix(red, yellow);
</span>}</code></pre>
</Listing>
<p>I gc√°sanna ina bhfuil go leor mod√∫il neadaithe, ath-onnmhairi√∫ na cine√°lacha ag an mbarr
leibh√©al le <code>pub use</code> difr√≠ocht shuntasach a dh√©anamh i dtaith√≠ na
daoine a bhaineann √∫s√°id as an gcliathbhosca. √ös√°id choitianta eile a bhaintear as <code>pub use</code> is ea ath-onnmhairi√∫
sainmh√≠nithe ar sple√°chas sa chliathbhosca reatha chun na cliathbhosca√≠ sin a dh√©anamh
sainmh√≠nithe mar chuid de API poibl√≠ do chliabh√°n.</p>
<p>Is eala√≠n n√≠os m√≥ n√° eola√≠ocht √© strucht√∫r API poibl√≠ √∫s√°ideach a chruth√∫, agus
is f√©idir leat athr√° chun an API is fearr a oibr√≠onn do d‚Äô√∫s√°ideoir√≠ a aimsi√∫. Ag roghn√∫ <code>pub use</code> sol√∫bthacht duit maidir leis an gcaoi a strucht√∫ra√≠onn t√∫ do chliabh√°n go hinmhe√°nach agus
d√≠ch√∫pl√°il an strucht√∫r inmhe√°nach sin √≥n m√©id a chuireann t√∫ i l√°thair d‚Äô√∫s√°ideoir√≠. F√©ach ar
cuid den ch√≥d cliathbhosca√≠ at√° suite√°ilte agat f√©achaint an bhfuil a strucht√∫r inmhe√°nach
difri√∫il √≥na API poibl√≠.</p>
<h3 id="cuntas-cratesio-a-bhun√∫"><a class="header" href="#cuntas-cratesio-a-bhun√∫">Cuntas Crates.io a Bhun√∫</a></h3>
<p>Sular f√©idir leat cliathbhosca√≠ ar bith a fhoilsi√∫, n√≠ m√≥r duit cuntas a chruth√∫ ar
<a href="https://crates.io/">crates.io</a> <!-- neamhaird --> agus faigh comhartha API. Chun √© sin a dh√©anamh,
tabhair cuairt ar an leathanach baile ag <a href="https://crates.io/">crates.io</a> <!-- neamhaird --> agus log√°il isteach
isteach tr√≠ chuntas GitHub. (T√° an cuntas GitHub ina riachtanas faoi l√°thair, ach
seans go dtac√≥dh an su√≠omh le beala√≠ eile chun cuntas a chruth√∫ amach anseo.) Uair amh√°in
t√° t√∫ log√°ilte isteach, tabhair cuairt ar do shocruithe cuntais ag
<a href="https://crates.io/me/">https://crates.io/me/</a> <!-- neamhaird --> agus faigh ar ais do
Eochair API. Ansin rith an t-ord√∫ <code>cargo login</code> agus greamaigh d'eochair API nuair a iarrtar ort √©, mar seo:</p>
<pre><code class="language-console">$ cargo login
abcdefghijklmnopqrstuvwxyz012345
</code></pre>
<p>Cuirfidh an t-ord√∫ seo in i√∫l do cargo faoi do chomhartha API agus st√≥r√°lfar isteach go h√°iti√∫il √©
~/.cargo/credentials. Tabhair faoi deara gur <em>secret</em> √© an comhartha seo: n√° roinn √©
le haon duine eile. M√° roinneann t√∫ √© le duine ar bith ar ch√∫is ar bith, ba cheart duit
√© a ch√∫lghairm agus gini√∫int comhartha nua ar <a href="https://crates.io/">crates.io</a><!-- neamhaird
-->.</p>
<h3 id="meiteashonra√≠-√°-gcur-le-cliathbhosca-nua"><a class="header" href="#meiteashonra√≠-√°-gcur-le-cliathbhosca-nua">Meiteashonra√≠ √° gcur le cliathbhosca Nua</a></h3>
<p>Ligean le r√° go bhfuil cliathbhosca agat is mian leat a fhoilsi√∫. Roimh fhoilsi√∫, beidh ort
roinnt meiteashonra√≠ a chur leis sa rann√°n <code>[package]</code> de <em>Cargo.toml</em> an chliathbhosca
comhad.</p>
<p>Beidh ainm uath√∫il ag teast√°il √≥ do chliabh√°n. Agus t√∫ ag obair ar chliabh√°n go h√°iti√∫il,
is f√©idir leat cliathbhosca a ainmni√∫ cib√© rud is mian leat. Mar sin f√©in, ainmneacha cliathbhosca√≠ ar
<a href="https://crates.io/">crates.io</a><!-- neamhaird --> a leithdh√°ileadh ar an gc√©ad teacht,
bonn freastail ar an gc√©ad dul s√≠os. Nuair a ghlactar ainm cliathbhosca, n√≠ f√©idir le haon duine eile cliathbhosca a fhoilsi√∫
leis an ainm sin. Sula nd√©anann t√∫ iarracht cliathbhosca a fhoilsi√∫, cuardaigh an t-ainm at√° ort
ag iarraidh a √∫s√°id. M√° √∫s√°ideadh an t-ainm, beidh ort ainm eile a aimsi√∫ agus
cuir an r√©imse <code>name</code> in eagar sa chomhad <em>Cargo.toml</em> faoin rann√°n <code>[package]</code> go
√∫s√°id an t-ainm nua le haghaidh foilsitheoireachta, mar sin:</p>
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[package]
name = "guessing_game"
</code></pre>
<p>Fi√∫ m√° t√° ainm ar leith roghnaithe agat, nuair a ritheann t√∫ ‚Äòcargo publish‚Äô le foilsi√∫
an cliathbhosca ag an bpointe seo, gheobhaidh t√∫ rabhadh agus ansin earr√°id:</p>
<!-- manual-regeneration
cd listings/ch14-more-about-cargo/listing-14-01/
cargo publish
copy just the relevant lines below
-->
<pre><code class="language-console">$ cargo publish
    Updating crates.io index
warning: manifest has no description, license, license-file, documentation, homepage or repository.
See https://doc.rust-lang.org/cargo/reference/manifest.html#package-metadata for more info.
--snip--
error: failed to publish to registry at https://crates.io

Caused by:
  the remote server responded with an error (status 400 Bad Request): missing or empty metadata fields: description, license. Please see https://doc.rust-lang.org/cargo/reference/manifest.html for more information on configuring these field
</code></pre>
<p>Earra√≠onn s√© seo toisc go bhfuil roinnt faisn√©ise r√≠th√°bhachtach in easnamh ort: cur s√≠os agus
t√° cead√∫nas ag teast√°il le go mbeidh a fhios ag daoine cad a dh√©anann do chliabh√°n agus faoina bhfuil
t√©arma√≠ is f√©idir leo √© a √∫s√°id. In <em>Cargo.toml</em>, cuir cur s√≠os nach bhfuil ann ach a
abairt n√≥ dh√≥, mar go mbeidh s√© le feice√°il le do chliabh√°n sna tortha√≠ cuardaigh. Le haghaidh
sa r√©imse <code>license</code>, n√≠ m√≥r duit luach aitheant√≥ra <em>chead√∫nas</em> a thabhairt. T√° an <a href="http://spdx.org/licenses/">Linux
Liosta√≠onn Malart√∫ Sonra√≠ Pac√°iste Bogearra√≠ an Fhorais (SPDX)</a> na haitheant√≥ir√≠
is f√©idir leat √© a √∫s√°id don luach seo. Mar shampla, a shonr√∫ go bhfuil do chead√∫nas agat
cliathbhosca ag baint √∫s√°ide as an gCead√∫nas MIT, cuir an t-aitheant√≥ir <code>MIT</code> leis:</p>
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[package]
name = "guessing_game"
license = "MIT"
</code></pre>
<p>M√°s mian leat cead√∫nas a √∫s√°id nach bhfuil le feice√°il sa SPDX, n√≠ m√≥r duit √© a chur
t√©acs an chead√∫nais sin i gcomhad, cuir an comhad san √°ireamh i do thionscadal, agus ansin
√∫s√°id <code>license-file</code> chun ainm an chomhaid sin a shonr√∫ in ionad an comhad cead√∫nais a √∫s√°id
eochair <code>license</code>.</p>
<p>T√° treoir maidir le c√©n cead√∫nas at√° oiri√∫nach do do thionscadal thar an raon feidhme
den leabhar seo. Ceada√≠onn go leor daoine sa phobal Rust a gcuid tionscadal sa
ar an mbealach c√©anna le Rust tr√≠ √∫s√°id a bhaint as cead√∫nas d√© de <code>MIT OR Apache-2.0</code>. An cleachtas seo
l√©ir√≠onn s√© gur f√©idir leat a shonr√∫ freisin aitheant√≥ir√≠ cead√∫nais iolrach scartha
ag <code>OR</code> chun cead√∫nais iolracha a bheith agat do do thionscadal.</p>
<p>Le hainm uath√∫il, an leagan, do chur s√≠os, agus cead√∫nas curtha leis, beidh an
Seans go mbeidh cuma mar seo ar chomhad <em>Cargo.toml</em> do thionscadal at√° r√©idh le foilsi√∫:</p>
<p><span class="filename">Filename: Cargo.toml</span></p>
<pre><code class="language-toml">[package]
name = "guessing_game"
version = "0.1.0"
edition = "2021"
description = "A fun game where you guess what number the computer has chosen."
license = "MIT OR Apache-2.0"

[dependencies]
</code></pre>
<p>D√©anann <a href="https://doc.rust-lang.org/cargo/">doicim√©ad√∫ cargo</a> cur s√≠os ar cheann eile
meiteashonra√≠ is f√©idir leat a shonr√∫ chun a chinnti√∫ gur f√©idir le daoine eile do chliabh√°n a aimsi√∫ agus a √∫s√°id n√≠os m√≥
go h√©asca.</p>
<h3 id="foilsitheoireacht-chuig-cratesio"><a class="header" href="#foilsitheoireacht-chuig-cratesio">Foilsitheoireacht chuig Crates.io</a></h3>
<p>Anois go bhfuil cuntas cruthaithe agat, sh√°bh√°il t√∫ do chomhartha API, roghnaigh t√∫ ainm d√≥
do chliabh√°n, agus na meiteashonra√≠ riachtanacha sonraithe agat, t√° t√∫ r√©idh le foilsi√∫!
Uasl√≥d√°lann foilsi√∫ cliathbhosca leagan ar leith go
<a href="https://crates.io/">crates.io</a> <!-- neamhaird --> le h√∫s√°id ag daoine eile.</p>
<p>B√≠ c√∫ramach, mar t√° foilsi√∫ <em>buan</em>. N√≠ f√©idir leis an leagan a bheith riamh
forscr√≠ofa, agus n√≠ f√©idir an c√≥d a scriosadh. Pr√≠omhsprioc amh√°in de
<a href="https://crates.io/">crates.io</a> <!-- neamhaird --> chun feidhmi√∫ mar chartlann bhuan
de ch√≥d ionas go mbeidh t√≥g√°il de gach tionscadal at√° ag brath ar cliathbhosca√≠ √≥
<a href="https://crates.io/">crates.io</a> <!-- neamhaird --> leanfaidh s√© ag obair. Ag cead√∫
d√° scriosfa√≠ an leagan bheadh ‚Äã‚Äãs√© dodh√©anta an sprioc sin a chomhl√≠onadh. Mar sin f√©in, t√°
gan teorainn le l√≠on na leaganacha cliathbhosca√≠ is f√©idir leat a fhoilsi√∫.</p>
<p>Rith an t-ord√∫ <code>cargo publish</code> ar√≠s. Ba cheart go n-√©ireodh leis anois:</p>
<!-- manual-regeneration
go to some valid crate, publish a new version
cargo publish
copy just the relevant lines below
-->
<pre><code class="language-console">$ cargo publish
    Updating crates.io index
   Packaging guessing_game v0.1.0 (file:///projects/guessing_game)
   Verifying guessing_game v0.1.0 (file:///projects/guessing_game)
   Compiling guessing_game v0.1.0
(file:///projects/guessing_game/target/package/guessing_game-0.1.0)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.19s
   Uploading guessing_game v0.1.0 (file:///projects/guessing_game)
</code></pre>
<p>Comhghairdeachas! T√° do ch√≥d roinnte agat anois le pobal Rust, agus
is f√©idir le duine ar bith do chliabh√°n a chur leis go h√©asca mar sple√°chas d√° dtionscadal.</p>
<h3 id="leagan-nua-de-chliathbhosca-reatha-a-fhoilsi√∫"><a class="header" href="#leagan-nua-de-chliathbhosca-reatha-a-fhoilsi√∫">Leagan Nua de Chliathbhosca Reatha a Fhoilsi√∫</a></h3>
<p>Nuair a bheidh athruithe d√©anta agat ar do chliabh√°n agus t√∫ r√©idh le leagan nua a scaoileadh,
athra√≠onn t√∫ an luach <code>version</code> at√° sonraithe i do chomhad <em>Cargo.toml</em> agus
athfhoilsi√∫. Bain √∫s√°id as na <a href="http://semver.org/">rialacha maidir le Leagan S√©imeantach</a> le socr√∫ cad is
t√° uimhir chu√≠ an ch√©ad leagain eile bunaithe ar na cine√°lacha athruithe at√° d√©anta agat.
Ansin rith <code>cargo publish</code> chun an leagan nua a uasl√≥d√°il.</p>
<!-- Seannasc, n√° bain -->
<p><a id="removing-versions-from-cratesio-with-cargo-yank"></a></p>
<h3 id="leaganacha-√°-dtarraingt-siar-√≥-cratesio-le-cargo-yank"><a class="header" href="#leaganacha-√°-dtarraingt-siar-√≥-cratesio-le-cargo-yank">Leaganacha √° dtarraingt siar √≥ Crates.io le <code>cargo yank</code></a></h3>
<p>C√© nach f√©idir leat leaganacha roimhe seo de chliabh√°n a bhaint, is f√©idir leat aon cheann a chosc
tionscadail amach anseo √≥ chur leo mar sple√°chas nua. T√° s√© seo √∫s√°ideach nuair a
T√° leagan an gcliathbhosca briste ar ch√∫is amh√°in n√≥ ar ch√∫is eile. I gc√°sanna den s√≥rt sin, cargo
taca√≠onn <em>yanking</em> leagan gcliathbhosca.</p>
<p>Cuireann Yanking a version cosc ‚Äã‚Äãar thionscadail nua √≥ bheith ag brath ar an leagan sin fad a bheidh s√©
ag ligean do gach tionscadal reatha at√° ag brath air lean√∫int ar aghaidh. Go bun√∫sach, a
cialla√≠onn yank nach bhriseadh gach tionscadal le <em>Cargo.lock</em>, agus aon todhcha√≠
N√≠ bhainfidh comhaid <em>Cargo.lock</em> √∫s√°id as an leagan yanked.</p>
<p>Chun leagan de chliathbhosca a yanc√°il, in eolaire an chliathbhosca at√° agat
foilsithe roimhe seo, rith <code>cargo yank</code> agus sonraigh an leagan at√° uait
yanc. Mar shampla, m√° t√° cliathbhosca darb ainm <code>guessing_game</code> foilsithe againn
1.0.1 agus ba mhaith linn √© a yank, san eolaire tionscadail do <code>guessing_game</code> ba mhaith linn
rith:</p>
<!-- manual-regeneration:
cargo yank carol-test --version 2.1.0
cargo yank carol-test --version 2.1.0 --undo
-->
<pre><code class="language-console">$ cargo yank --vers 1.0.1
    Updating crates.io index
        Yank guessing_game@1.0.1
</code></pre>
<p>Tr√≠ <code>--undo</code> a chur leis an ord√∫, is f√©idir leat yank a cheal√∫ agus tionscadail a chead√∫
chun tos√∫ ag brath ar leagan ar√≠s:</p>
<pre><code class="language-console">$ cargo yank --vers 1.0.1 --undo
    Updating crates.io index
      Unyank guessing_game@1.0.1
</code></pre>
<p>A yank <em>n√≠</em> scriosann s√© c√≥d ar bith. N√≠ f√©idir, mar shampla, √© a scriosadh de thaisme
r√∫in uasl√≥d√°ilte. M√° tharla√≠onn s√© sin, n√≠ m√≥r duit na r√∫in sin a athshocr√∫ l√°ithreach.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sp√°sanna-oibre-cargo"><a class="header" href="#sp√°sanna-oibre-cargo">Sp√°sanna Oibre Cargo</a></h2>
<p>I gCaibidil 12, th√≥gamar pac√°iste a chuimsigh cliathbhosca d√©n√°rtha agus leabharlann
cliathbhosca. De r√©ir mar a th√©ann do thionscadal chun cinn, seans go bhfaighidh t√∫ an crate leabharlainne
ag √©ir√≠ n√≠os m√≥ f√≥s agus ba mhaith leat do phac√°iste a roinnt n√≠os faide isteach
crates leabharlann il. Cuireann Cargo gn√© ar a dtugtar <em>workspaces</em> ar f√°il ar f√©idir
cabhr√∫ le ilphac√°ist√≠ gaolmhara a fhorbra√≠tear in √©ineacht.</p>
<h3 id="sp√°s-oibre-√°-chruth√∫"><a class="header" href="#sp√°s-oibre-√°-chruth√∫">Sp√°s Oibre √° Chruth√∫</a></h3>
<p>Is √© at√° i <em>workspace</em> n√° sraith pac√°ist√≠ a roinneann an <em>Cargo.lock</em> c√©anna agus an t-aschur c√©anna
eolaire. D√©anaimis tionscadal ag baint √∫s√°ide as sp√°s oibre - √∫s√°idfimid c√≥d f√°nach mar sin d√©anfaimid
is f√©idir d√≠ri√∫ ar strucht√∫r an sp√°is oibre. T√° beala√≠ √©ags√∫la chun
sp√°s oibre a strucht√∫r√∫, mar sin n√≠ l√©ireoimid ach bealach coiteann amh√°in. Beidh a
sp√°s oibre ina bhfuil d√©n√°rtha agus dh√° leabharlann. An d√©n√°rtha, a shol√°thr√≥idh
an phr√≠omhfheidhm√≠ocht, ag brath ar an d√° leabharlann. Beidh leabharlann amh√°in
cuir feidhm <code>add_one</code> ar f√°il, agus feidhm <code>add_two</code> leis an dara leabharlann.
Beidh na tr√≠ chliathbhosca seo mar chuid den sp√°s oibre c√©anna. Tos√≥imid ag cruth√∫
eolaire nua don sp√°s oibre:</p>
<pre><code class="language-console">$ mkdir add
$ cd add
</code></pre>
<p>Ansin, san eolaire <em>add</em>, crutha√≠mid an comhad <em>Cargo.toml</em> a dh√©anfaidh
cumraigh an sp√°s oibre ar fad. N√≠ bheidh alt <code>[package]</code> ag an gcomhad seo.
Ina √°it sin, tos√≥idh s√© le rann√°n <code>[workspace]</code> a ligfidh d√∫inn cur leis
baill chuig an sp√°s oibre. D√©anaimid pointe freisin chun an ceann is d√©ana√≠ agus is m√≥ a √∫s√°id
leagan de algartam r√©itithe Cargo in√°r sp√°s oibre tr√≠d an
<code>resolver</code> go <code>"2"</code>.</p>
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[workspace]
resolver = "2"
</code></pre>
<p>Ansin, cruth√≥imid an gcliathbhosca d√©n√°rtha <code>adder</code> tr√≠ <code>cargo new</code> a rith laistigh den
<em>cuir</em> eolaire:</p>
<!-- athghini√∫int de l√°imh
liosta√≠ cd/ch14-tuilleadh-faoi-lasta/aschur-amh√°in-01-adder-crate/add
rm -rf adder
adder nua lasta
c√≥ip den aschur th√≠os
-->
<pre><code class="language-console">$ cargo new adder
    Creating binary (application) `adder` package
      Adding `adder` as member of workspace at `file:///projects/add`
</code></pre>
<p>Nuair a ritheann <code>cargo new</code> taobh istigh de sp√°s oibre cuireann s√© go huathoibr√≠och leis an nuachruthaithe
pac√°iste chuig an eochair <code>members</code> sa sainmh√≠ni√∫ <code>[workspace]</code> sa sp√°s oibre
<code>Cargo.toml</code>, mar seo:</p>
<pre><code class="language-toml">[workspace]
resolver = "2"
members = ["adder"]
</code></pre>
<p>Ag an bpointe seo, is f√©idir linn an sp√°s oibre a th√≥g√°il tr√≠ <code>cargo build</code> a re√°cht√°il. Na comhaid
ba cheart go mbeadh cuma mar seo i do <em>add</em> eolaire:</p>
<pre><code class="language-text">‚îú‚îÄ‚îÄ Cargo.lock
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ adder
‚îÇ   ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ src
‚îÇ       ‚îî‚îÄ‚îÄ main.rs
‚îî‚îÄ‚îÄ target
</code></pre>
<p>T√° eolaire <em>target</em> amh√°in sa sp√°s oibre ar an leibh√©al is airde a tiomsa√≠odh
cuirfear artifacts isteach; n√≠l a chuid f√©in ag an bpac√°iste <code>adder</code>
<em>target</em> eolaire. Fi√∫ d√° mbeadh muid chun <code>cargo build</code> a rith √≥n taobh istigh den
<em>adder</em> eolaire, bheadh ‚Äã‚Äãna d√©ant√°in tiomsaithe f√≥s i <em>add/target</em>
seachas <em>add/adder/target</em>. Strucht√∫ra√≠onn Cargo an t-eolaire <em>target</em> i
sp√°s oibre mar seo mar go bhfuil na crates i sp√°s oibre i gceist a bheith ag brath ar
ch√©ile. D√° mbeadh a eolaire <em>target</em> f√©in ag gach cliathbhosca, bheadh ‚Äã‚Äãag gach cliathbhosca
chun gach ceann de na crates eile sa sp√°s oibre a ath-thioms√∫ chun na d√©ant√°in a chur
ina <em>target</em> eolaire f√©in. Tr√≠ chomhadlann <em>target</em> amh√°in a roinnt, na crates
is f√©idir at√≥g√°il gan gh√° a sheachaint.</p>
<h3 id="an-dara-pac√°iste-a-chruth√∫-sa-sp√°s-oibre"><a class="header" href="#an-dara-pac√°iste-a-chruth√∫-sa-sp√°s-oibre">An Dara Pac√°iste a Chruth√∫ sa Sp√°s Oibre</a></h3>
<p>Ansin, crutha√≠mid pac√°iste ball eile sa sp√°s oibre agus cuirfimid glaoch air
<code>add_one</code> leis. Athraigh an barrleibh√©al <em>Cargo.toml</em> chun an cos√°n <em>add_one</em> a shonr√∫
liosta na <code>members</code>:</p>
<p><span class="filename">Ainm comhaid: Cargo.toml</span></p>
<pre><code class="language-toml">[workspace]
resolver = "2"
members = ["adder", "add_one"]
</code></pre>
<p>Ansin ginigh cliathbhosca leabharlainne nua darb ainm <code>add_one</code>:</p>
<!-- athghini√∫int de l√°imh
liosta√≠ cd/ch14-n√≠os m√≥ faoi-lasta/aschur-amh√°in-02-cuir-amh√°in/cuir leis
rm -rf add_one
lasta add_one nua --lib
c√≥ip den aschur th√≠os
-->
<pre><code class="language-cons√≥l">$cargo add_one nua --lib
 Leabharlann √° chruth√∫ pac√°iste `add_one`
 Ag cur `add_one` isteach mar bhall den sp√°s oibre ag `comhad:///projects/add`
</code></pre>
<p>Ba cheart go mbeadh na heolair√≠ agus na comhaid seo i do chomhadlann <em>add</em> anois:</p>
<pre><code class="language-t√©acs">‚îú‚îÄ‚îÄ Cargo.lock
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ add_one
‚îÇ ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ ‚îî‚îÄ‚îÄ src
‚îÇ ‚îî‚îÄ‚îÄ lib.rs
‚îú‚îÄ‚îÄ nathair
‚îÇ ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ ‚îî‚îÄ‚îÄ src
‚îÇ ‚îî‚îÄ‚îÄ pr√≠omh.rs
‚îî‚îÄ‚îÄ sprioc
</code></pre>
<p>Sa chomhad <em>add_one/src/lib.rs</em>, cuirimis feidhm <code>add_one</code> leis:</p>
<p><span class="filename">Ainm comhaid: add_one/src/lib.rs</span></p>
<pre><code class="language-rust noplayground">pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
<p>Anois is f√©idir linn an pac√°iste <code> adder</code> a bheith againn len√°r d√©n√°rtha ag brath ar an <code>add_one</code>
pac√°iste a bhfuil √°r leabharlann. Ar dt√∫s, n√≠ m√≥r d√∫inn sple√°chas cos√°n a chur leis
<code>add_one</code> le <em>adder/Cargo.toml</em>.</p>
<p><span class="filename">Ainm comhaid: adder/Cargo.toml</span></p>
<pre><code class="language-toml">[dependencies]
add_one = { path = "../add_one" }
</code></pre>
<p>N√≠ ghlacann Cargo leis go mbeidh crates i sp√°s oibre ag brath ar a ch√©ile, mar sin de
n√≠ m√≥r d√∫inn a bheith soil√©ir faoi na caidrimh sple√°chais.</p>
<p>Ansin, bainimis √∫s√°id as an bhfeidhm <code>add_one</code> (√≥n gcliathbhosca <code>add_one</code>) sa
cliathbhosca <code>adder</code>. Oscail an comhad <em>adder/src/main.rs</em> agus athraigh an <code>main</code>
feidhm chun an fheidhm <code>add_one</code> a ghlaoch, mar at√° i Liost√∫ 14-7.</p>
<Listing number="14-7" file-name="adder/src/main.rs" caption="Ag baint √∫s√°ide as an gcliathbhosca leabharlainne `add_one` i gcliathbhosca `adder`">
<pre><code class="language-rust ignore">fn main() {
    let num = 10;
    println!("Hello, world! {num} plus one is {}!", add_one::add_one(num));
}</code></pre>
</Listing>
<p>D√©anaimis an sp√°s oibre a th√≥g√°il tr√≠ <code>cargo build</code> a rith sa bharrleibh√©al <em>add</em>
eolaire!</p>
<!-- athghini√∫int de l√°imh
liosta√≠ cd/ch14-more-about-cargo/listing-14-07/add
t√≥g√°il lasta
aschur c√≥ip th√≠os; n√≠ l√°imhse√°lann an script nuashonraithe aschuir fochomhadlanna i gcos√°in i gceart
-->
<pre><code class="language-console">$ cargo build
   Compiling add_one v0.1.0 (file:///projects/add/add_one)
   Compiling adder v0.1.0 (file:///projects/add/adder)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.22s
</code></pre>
<p>Chun an cliathbhosca d√©n√°rtha a rith √≥n eolaire <em>add</em>, is f√©idir linn a shonr√∫ c√© acu
pac√°iste sa sp√°s oibre ba mhaith linn a rith tr√≠d an arg√≥int <code>-p</code> agus an
ainm an phac√°iste le <code>cargo run</code>:</p>
<!-- athghini√∫int de l√°imh
liosta√≠ cd/ch14-more-about-cargo/listing-14-07/add
rith lasta -p adder
aschur c√≥ip th√≠os; n√≠ l√°imhse√°lann an script nuashonraithe aschuir fochomhadlanna i gcos√°in i gceart
-->
<pre><code class="language-console">$ cargo run -p adder
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/adder`
Hello, world! 10 plus one is 11!
</code></pre>
<p>Ritheann s√© seo an c√≥d in <em>adder/src/main.rs</em>, at√° ag brath ar an gcliathbhosca <code>add_one</code>.</p>
<h4 id="ag-brath-ar-phac√°iste-seachtrach-i-sp√°s-oibre"><a class="header" href="#ag-brath-ar-phac√°iste-seachtrach-i-sp√°s-oibre">Ag brath ar Phac√°iste Seachtrach i Sp√°s Oibre</a></h4>
<p>Tabhair faoi deara nach bhfuil ach comhad <em>Cargo.lock</em> amh√°in ag an mbarrleibh√©al,
seachas <em>Cargo.lock</em> a bheith i gcomhadlann gach cliathbhosca. Cinnt√≠onn s√© seo go
t√° na crates go l√©ir ag baint √∫s√°ide as an leagan c√©anna de gach sple√°chas. M√° chuirimid an <code>rand</code>
pac√°iste chuig na comhaid <em>adder/Cargo.toml</em> agus <em>add_one/Cargo.toml</em>, d√©anfaidh Cargo
R√©itigh an d√° cheann go leagan amh√°in de <code>rand</code> agus taifead √© sin sa cheann
<em>Cargo.glas</em>. M√° dh√©antar na crates go l√©ir sa sp√°s oibre, bain √∫s√°id as na sple√°chais ch√©anna
cialla√≠onn s√© seo go mbeidh na crates ag lu√≠ lena ch√©ile i gc√≥na√≠. Cuirimis an
cliathbhosca <code>rand</code> chuig an rann√°n <code>[dependencies]</code> sa chomhad <em>add_one/Cargo.toml</em>
ionas gur f√©idir linn an cliathbhosca <code>rand</code> a √∫s√°id sa crate <code>add_one</code>:</p>
<!-- Agus an leagan de `rand` √° nuashonr√∫, nuashonraigh an leagan de
√∫s√°idtear `rand` sna comhaid seo ionas go dtagann siad go l√©ir le:
* ch02-00-buille faoi thuairim-cluiche-tutorial.md
*ch07-04-ag tabhairt-cos√°in-i--sc√≥ip-leis-an-√∫s√°id-eochairfhocal.md
-->
<p><span class="filename">Ainm comhaid: add_one/Cargo.toml</span></p>
<pre><code class="language-toml">[dependencies]
rand = "0.8.5"
</code></pre>
<p>Is f√©idir linn <code>use rand;</code> a chur leis an gcomhad <em>add_one/src/lib.rs</em> anois, agus an
sp√°s oibre ioml√°n tr√≠ <code>cargo build</code> a rith san eolaire <em>add</em> a thabhairt isteach
agus an gcliathbhosca <code>rand</code> a thioms√∫. Gheobhaidh muid rabhadh amh√°in mar n√≠limid
ag tagairt don <code>rand</code> a thugamar isteach sa sc√≥ip:</p>
<!-- manual-regeneration
cd listings/ch14-more-about-cargo/no-listing-03-workspace-with-external-dependency/add
cargo build
copy output below; the output updating script doesn't handle subdirectories in paths properly
-->
<pre><code class="language-console">$ cargo build
    Updating crates.io index
  Downloaded rand v0.8.5
   --snip--
   Compiling rand v0.8.5
   Compiling add_one v0.1.0 (file:///projects/add/add_one)
warning: unused import: `rand`
 --&gt; add_one/src/lib.rs:1:5
  |
1 | use rand;
  |     ^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: `add_one` (lib) generated 1 warning (run `cargo fix --lib -p add_one` to apply 1 suggestion)
   Compiling adder v0.1.0 (file:///projects/add/adder)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.95s
</code></pre>
<p>T√° faisn√©is sa <em>Cargo.lock</em> barrleibh√©il anois faoi sple√°chas na
<code>add_one</code> ar <code>rand</code>. Mar sin f√©in, c√© go n-√∫s√°idtear <code>rand</code> √°it √©igin sa
sp√°s oibre, n√≠ f√©idir linn √© a √∫s√°id i crates eile sa sp√°s oibre mura gcuirimid leis
<code>rand</code> chuig a gcuid comhad <em>Cargo.toml</em> freisin. Mar shampla, m√° chuirimid <code>use rand;</code> leis
chuig an gcomhad <em>adder/src/main.rs</em> don phac√°iste <code>adder</code>, gheobhaidh muid earr√°id:</p>
<!-- manual-regeneration
cd listings/ch14-more-about-cargo/output-only-03-use-rand/add
cargo build
copy output below; the output updating script doesn't handle subdirectories in paths properly
-->
<pre><code class="language-console">$ cargo build
  --snip--
   Compiling adder v0.1.0 (file:///projects/add/adder)
error[E0432]: unresolved import `rand`
 --&gt; adder/src/main.rs:2:5
  |
2 | use rand;
  |     ^^^^ no external crate `rand`
</code></pre>
<p>Chun √© seo a shocr√∫, cuir an comhad <em>Cargo.toml</em> in eagar don phac√°iste <code>adder</code> agus cuir in i√∫l
go bhfuil <code>rand</code> ina sple√°chas d√≥ freisin. D√©anfar an pac√°iste <code>adder</code> a th√≥g√°il
cuir <code>rand</code> leis an liosta sple√°chais do <code>adder</code> in <em>Cargo.lock</em>, ach n√≠l
√≠osl√≥d√°lfar c√≥ipeanna breise de <code>rand</code>. Cinnteoidh Cargo go mbeidh gach
cliathbhosca i ngach pac√°iste sa sp√°s oibre a bheidh in √∫s√°id ag an bpac√°iste <code>rand</code>
an leagan c√©anna chomh fada agus a shonra√≠onn siad leaganacha comhoiri√∫nacha de <code>rand</code>, ag s√°bh√°il
sp√°s d√∫inn agus a chinnti√∫ go mbeidh na crates sa sp√°s oibre ag lu√≠ leis
ch√©ile.</p>
<p>M√° shonra√≠onn crates sa sp√°s oibre leaganacha neamh-chomhoiri√∫nacha den sple√°chas c√©anna,
R√©iteoidh Cargo gach ceann acu, ach d√©anfaidh s√© iarracht f√≥s gan ach c√∫pla leagan a r√©iteach
agus is f√©idir.</p>
<h4 id="t√°st√°il-√°-chur-le-sp√°s-oibre"><a class="header" href="#t√°st√°il-√°-chur-le-sp√°s-oibre">T√°st√°il √° Chur le Sp√°s Oibre</a></h4>
<p>Le feabhs√∫ eile, cuirimis t√°st√°il ar an bhfeidhm <code>add_one::add_one</code> laistigh den crate <code>add_one</code>:</p>
<p><span class="filename">Filename: add_one/src/lib.rs</span></p>
<pre><code class="language-rust noplayground">pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn it_works() {
        assert_eq!(3, add_one(2));
    }
}</code></pre>
<p>Anois re√°cht√°il <code>cargo test</code> san eolaire <em>add</em> barrleibh√©il. Rith <code>cargo test</code> isteach
re√°cht√°lfar sp√°s oibre strucht√∫rtha mar seo na trialacha do na crates ar fad i
an sp√°s oibre:</p>
<!-- manual-regeneration
cd listings/ch14-more-about-cargo/no-listing-04-workspace-with-tests/add
cargo test
copy output below; the output updating script doesn't handle subdirectories in
paths properly
-->
<pre><code class="language-console">$ cargo test
   Compiling add_one v0.1.0 (file:///projects/add/add_one)
   Compiling adder v0.1.0 (file:///projects/add/adder)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.20s
     Running unittests src/lib.rs (target/debug/deps/add_one-f0253159197f7841)

running 1 test
test tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/main.rs (target/debug/deps/adder-49979ff40686fa8e)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests add_one

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
</code></pre>
<p>L√©ir√≠onn an ch√©ad chuid den aschur go bhfuil an t√°st√°il <code>it_works</code> sa <code>add_one</code>
cliathbhosca a rith. L√©ir√≠onn an ch√©ad chuid eile nach bhfuarthas t√°st√°lacha nialais sa <code>adder</code>
gcliathbhosca, agus ansin taispe√°nann an t-alt deireanach n√°id t√°st√°lacha doicim√©ad√∫ a fuarthas i
an gcliathbhosca <code>add_one</code>.</p>
<p>Is f√©idir linn t√°st√°lacha a re√°cht√°il freisin le haghaidh cliathbhosca ar leith amh√°in i sp√°s oibre √≥n
eolaire barrleibh√©il tr√≠d an mbratach <code>-p</code> a √∫s√°id agus ainm an chliabh√°in a shonr√∫
ba mhaith linn t√°st√°il a dh√©anamh:</p>
<!-- manual-regeneration
cd listings/ch14-more-about-cargo/no-listing-04-workspace-with-tests/add
cargo test -p add_one
copy output below; the output updating script doesn't handle subdirectories in paths properly
-->
<pre><code class="language-console">$ cargo test -p add_one
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.00s
     Running unittests src/lib.rs (target/debug/deps/add_one-b3235fea9a156f74)

running 1 test
test tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests add_one

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
</code></pre>
<p>L√©ir√≠onn an t-aschur seo nach ndearna <code>cargo test</code> ach na t√°st√°lacha don crate <code>add_one</code>  agus
n√≠or rith na t√°st√°lacha crate <code>adder</code>.</p>
<p>M√° fhoils√≠onn t√∫ na crates sa sp√°s oibre chuig <a href="https://crates.io/">crates.io</a>,
n√≠ m√≥r gach cliathbhosca sa sp√°s oibre a fhoilsi√∫ ar leithligh. Cos√∫il le <code>cargo test</code>, is f√©idir linn cliathbhosca ar leith a fhoilsi√∫ in√°r sp√°s oibre tr√≠ √∫s√°id a bhaint as an <code>-p</code>
bratach agus ag sonr√∫ ainm an chliathbhosca ba mhaith linn a fhoilsi√∫.</p>
<p>Chun cleachtadh breise a fh√°il, cuir crate <code>cuir_two</code> leis an sp√°s oibre seo i gceann cos√∫il leis
mar an crate <code>add_one</code>!</p>
<p>De r√©ir mar a fh√°sann do thionscadal, smaoinigh ar sp√°s oibre a √∫s√°id: is fusa √© a thuiscint
comhph√°irteanna aonair n√≠os l√∫ n√° blob m√≥r c√≥d. Ina theannta sin, a choinne√°il
is f√©idir leis na crates i sp√°s oibre comhord√∫ idir crates a dh√©anamh n√≠os √©asca m√° bh√≠onn siad
a athr√∫ go minic ag an am c√©anna.</p>
<div style="break-before: page; page-break-before: always;"></div><!-- Old link, do not remove -->
<p><a id="installing-binaries-from-cratesio-with-cargo-install"></a></p>
<h2 id="d√©n√°rtha-a-shuite√°il-le-cargo-install"><a class="header" href="#d√©n√°rtha-a-shuite√°il-le-cargo-install">D√©n√°rtha a shuite√°il le <code>cargo install</code></a></h2>
<p>Ligeann an t-ord√∫ <code>shuite√°il lasta</code> duit cliathbhosca√≠ d√©n√°rtha a shuite√°il agus a √∫s√°id
go h√°iti√∫il. N√≠l s√© seo beartaithe chun pac√°ist√≠ c√≥rais a athshol√°thar; t√° s√© i gceist a
bealach √°isi√∫il d'fhorbr√≥ir√≠ Rust uirlis√≠ a shuite√°il a bhfuil daoine eile roinnte orthu
<a href="https://crates.io/">crates.io</a> <!-- neamhaird -->. Tabhair faoi deara nach f√©idir leat ach a shuite√°il
pac√°ist√≠ a bhfuil spriocanna d√©n√°rtha acu. Is √© sprioc <em>dh√©n√°rtha</em> an cl√°r inrite
crutha√≠tear √© sin m√° t√° comhad <em>src/main.rs</em> n√≥ comhad eile sonraithe ag an gcliathbhosca
mar dh√©n√°rtha, i gcompar√°id le sprioc leabharlainne nach f√©idir a rith leis f√©in ach
oiri√∫nach lena n-√°ir√≠tear laistigh de chl√°ir eile. De ghn√°th, t√° cliathbhosca√≠
faisn√©is sa chomhad <em>README</em> faoi c√© acu an leabharlann √© cliathbhosca, an bhfuil a
sprioc dh√©n√°rtha, n√≥ an d√° cheann.</p>
<p>St√≥r√°iltear gach d√©n√°rtha at√° suite√°ilte le <code>cargo install</code> sa suite√°il
fillte√°n <em>bin</em> an fhr√©amh. M√° shuite√°il t√∫ Rust ag baint √∫s√°ide as <em>rustup.rs</em> agus nach bhfuil aon cheann agat
cumra√≠ochta√≠ saincheaptha, beidh an eolaire seo <em>$HOME/.cargo/bin</em>. Cinntigh go
t√° an t-eolaire i do <code>$PATH</code> le go mbeidh t√∫ in ann na cl√°ir at√° suite√°ilte agat le <code>cargo install</code> a rith.</p>
<p>Mar shampla, i gCaibidil 12 luaigh muid go bhfuil cur i bhfeidhm Rust de
an uirlis <code>grep</code> ar a dtugtar <code>ripgrep</code> chun comhaid a chuardach. Chun <code>ripgrep</code> a shuite√°il, n√≠ m√≥r d√∫inn
is f√©idir leis an m√©id seo a leanas a rith:</p>
<!-- manual-regeneration
cargo install something you don't have, copy relevant output below
-->
<pre><code class="language-console">$ cargo install ripgrep
    Updating crates.io index
  Downloaded ripgrep v13.0.0
  Downloaded 1 crate (243.3 KB) in 0.88s
  Installing ripgrep v13.0.0
--snip--
   Compiling ripgrep v13.0.0
    Finished `release` profile [optimized + debuginfo] target(s) in 10.64s
  Installing ~/.cargo/bin/rg
   Installed package `ripgrep v13.0.0` (executable `rg`)
</code></pre>
<p>Taispe√°nann an dara l√≠ne go deireanach den aschur su√≠omh agus ainm an
d√©n√°rtha suite√°ilte, arb √© <code>rg</code> √© i gc√°s <code>ripgrep</code>. Chomh fada leis an
t√° an t-eolaire suite√°la i do <code>$PATH</code>, mar a luadh cheana, is f√©idir leat
ansin rith <code>rg --help</code> agus tos√∫ ag baint √∫s√°ide as uirlis n√≠os tap√∫la, n√≠os meirgeach chun comhaid a chuardach!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cargo-a-sh√≠neadh-le-orduithe-saincheaptha"><a class="header" href="#cargo-a-sh√≠neadh-le-orduithe-saincheaptha">Cargo a Sh√≠neadh le Orduithe Saincheaptha</a></h2>
<p>T√° Cargo deartha ionas gur f√©idir leat √© a leathn√∫ le fo-orduithe nua gan a bheith ort
Cargo a mhodhn√∫. M√° thugtar <code>cargo-something</code> ar dh√©n√°rtha i do <code>$PATH</code>, is f√©idir leat
rith √© amhail is gur fo-ord√∫ Cargo √© tr√≠ <code>cargo something</code> a rith. Saincheaptha
T√° orduithe mar seo liostaithe freisin nuair a ritheann t√∫ <code>cargo --list</code>. A bheith in ann
bain √∫s√°id as <code>cargo install</code> chun s√≠nt√≠ a shuite√°il agus ansin iad a rith d√≠reach mar an
Is bunt√°iste iontach √°isi√∫il iad uirlis√≠ Cargo ionsuite de dhearadh Cargo!</p>
<h2 id="achoimre-13"><a class="header" href="#achoimre-13">Achoimre</a></h2>
<p>Comhroinnt c√≥d le Cargo agus <a href="https://crates.io/">crates.io</a> <!-- neamhaird --> is
cuid den rud a dh√©anann √©iceach√≥ras Rust √∫s√°ideach le haghaidh go leor tascanna √©ags√∫la. meirge
T√° leabharlann caighde√°nach beag agus cobhsa√≠, ach t√° cliathbhosca√≠ √©asca a roinnt, a √∫s√°id, agus
feabhas a chur ar aml√≠ne difri√∫il √≥ cheann na teanga. N√° b√≠ c√∫thail faoi
c√≥d a roinnt at√° √∫s√°ideach duit ar <a href="https://crates.io/">crates.io</a><!-- neamhaird
-->; is d√≥cha go mbeidh s√© √∫s√°ideach do dhuine eile freisin!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="leideanna-cliste"><a class="header" href="#leideanna-cliste">Leideanna Cliste</a></h1>
<p>Is coincheap ginear√°lta √© <em>pointeoir</em> d‚Äôathr√≥g ina bhfuil seoladh i
cuimhne. Tagra√≠onn an seoladh seo do, n√≥ ‚Äúpoint√≠ ag,‚Äù do roinnt sonra√≠ eile. An chuid is m√≥
Is tagairt √≠ an cine√°l pointeoir coitianta i Rust, ar fhoghlaim t√∫ faoi i
Caibidil 4. Cuirtear tagairt√≠ in i√∫l leis an tsiombail <code>&amp;</code> agus faigheann siad an luach ar iasacht
pointe ar. N√≠l aon chumais speisialta acu seachas tagairt a dh√©anamh d√≥ibh
sonra√≠, agus gan aon forchostais.</p>
<p>Ar an l√°imh eile, is strucht√∫ir sonra√≠ iad <em>Smart pointers</em> a fheidhm√≠onn mar a
pointeoir ach t√° meiteashonra√≠ agus cumais bhreise acu freisin. Coincheap na
n√≠l leideanna cliste uath√∫il do Rust: th√°inig leideanna cliste √≥ C ++ agus t√° siad ann
i dteangacha eile chomh maith. T√° √©ags√∫lacht leideanna cliste sainithe ag Rust sa
leabharlann caighde√°nach a shol√°thra√≠onn feidhmi√∫lacht thar an gceann a shol√°thra√≠onn tagairt√≠.
Chun an coincheap ginear√°lta a ini√∫chadh, f√©achfaimid ar ch√∫pla sampla √©ags√∫la de
leideanna cliste, lena n-√°ir√≠tear cine√°l pointeoir cliste <em>reference counting</em>. seo
cuireann pointeoir ar do chumas sonra√≠ √∫in√©ir√≠ iolracha a bheith agat tr√≠ s√∫il a choinne√°il orthu
l√≠on na n-√∫in√©ir√≠ agus, nuair nach bhfuil aon √∫in√©ir√≠ f√°gtha, na sonra√≠ a ghlanadh.</p>
<p>T√° difr√≠ocht bhreise ag meirge, lena choincheap √∫in√©ireachta agus iasachta√≠ochta
idir thagairt√≠ agus leideanna cliste: c√© nach bhfaigheann tagairt√≠ ach sonra√≠ ar iasacht, i
go leor c√°sanna, leideanna cliste <em>ow</em> na sonra√≠ a d√≠r√≠onn siad ar.</p>
<p>C√© n√°r thugamar glaoch orthu mar sin ag an am, th√°ngamar ar roinnt acu cheana f√©in
leideanna cliste sa leabhar seo, ina measc <code>String</code> agus <code>Vec&lt;T&gt;</code> i gCaibidil 8. An d√° cheann
√°ir√≠tear na cine√°lacha seo mar threoracha cliste mar go bhfuil roinnt cuimhne acu agus go gceada√≠onn siad duit
a ionramh√°il. T√° meiteashonra√≠ agus cumais n√≥ r√°tha√≠ochta√≠ breise acu freisin.
Stringeann <code>String</code>, mar shampla, a chumas mar mheiteashonra√≠ agus t√° an breise√°n breise aige
an cumas a √°irithi√∫ go mbeidh a chuid sonra√≠ bail√≠ i gc√≥na√≠ UTF-8.</p>
<p>De ghn√°th cuirtear leideanna cliste i bhfeidhm ag baint √∫s√°ide as strucht√∫ir. Murab ionann agus gn√°th
struct, leideanna cliste a chur i bhfeidhm na tr√©ithe <code>Deref</code> agus <code>Drop</code>. An <code>Deref</code>
Ceada√≠onn an trait do shampla den strucht√∫r pointeoir cliste √© f√©in a iompar mar thagairt
ionas gur f√©idir leat do ch√≥d a scr√≠obh chun oibri√∫ le tagairt√≠ n√≥ le leideanna cliste.
Ligeann an tr√©ith <code>Drop</code> duit an c√≥d a rithtear nuair a bh√≠onn t√∫ a shaincheapadh
T√©ann an pointeoir cliste as an raon feidhme. Sa chaibidil seo, pl√©ifimid an d√° cheann
tr√©ithe agus a l√©iri√∫ c√©n f√°th a bhfuil siad t√°bhachtach do leideanna cliste.</p>
<p>√ìs rud √© gur patr√∫n dearadh ginear√°lta √© an patr√∫n pointeoir cliste a √∫s√°idtear
go minic i Rust, n√≠ chl√∫d√≥idh an chaibidil seo gach pointeoir cliste at√° ann cheana f√©in. go leor
t√° a gcuid leideanna cliste f√©in ag leabharlanna, agus is f√©idir leat do chuid f√©in a scr√≠obh fi√∫. D√©anfaimid
cl√∫da√≠onn siad na leideanna cliste is coitianta sa ghn√°thleabharlann:</p>
<ul>
<li><code>Bosca &lt;T&gt;</code> chun luachanna a leithdh√°ileadh ar an gcarn</li>
<li><code>Rc&lt;T&gt;</code>, cine√°l comhairimh tagartha a chumasa√≠onn √∫in√©ireacht iolrach</li>
<li><code>Ref&lt;T&gt;</code> agus <code>RefMut&lt;T&gt;</code>, a rochtain tr√≠ <code>RefCell&lt;T&gt;</code>, cine√°l a fhorfheidhm√≠onn
na rialacha iasachtaithe ag am rite in ionad am tiomsaithe</li>
</ul>
<p>Ina theannta sin, cl√∫d√≥imid an patr√∫n <em>interior mutability</em> nuair nach f√©idir √© a mhalart√∫
Nochtann cine√°l API chun luach istigh a sh√≥ch√°n. D√©anfaimid pl√© freisin
<em>reference cycles</em>: conas is f√©idir leo cuimhne a sceitheadh ‚Äã‚Äãagus conas iad a chosc.</p>
<p>L√©im√≠s isteach!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ag-baint-√∫s√°ide-as-boxt-chun-pointe-ar-shonra√≠-ar-an-charn"><a class="header" href="#ag-baint-√∫s√°ide-as-boxt-chun-pointe-ar-shonra√≠-ar-an-charn">Ag baint √∫s√°ide as <code>Box&lt;T&gt;</code> chun Pointe ar Shonra√≠ ar an Charn</a></h2>
<p>Is √© an pointeoir cliste is simpl√≠ n√° <em>box</em>, a bhfuil a chine√°l scr√≠ofa
<code>Box&lt;T&gt;</code>. Ligeann bosca√≠ duit sonra√≠ a st√≥r√°il ar an gcarn seachas ar an gcruach. Cad
f√≥s ar an chairn an pointeoir do na sonra√≠ gcarn. D√©an tagairt do Chaibidil 4 go
athbhreithni√∫ a dh√©anamh ar an difr√≠ocht idir an chairn agus an gcarn.</p>
<p>N√≠l forchostais feidhm√≠ochta ag bosca√≠, seachas a gcuid sonra√≠ a st√≥r√°il ar an
gcarn in ionad ar an chruach. Ach n√≠l m√≥r√°n cumais bhreise acu
ach an oiread. √ös√°idfidh t√∫ iad is minice sna c√°sanna seo:</p>
<ul>
<li>Nuair a bh√≠onn cine√°l agat nach f√©idir a mh√©id a bheith ar eolas ag am tiomsaithe agus at√° uait
luach den chine√°l sin a √∫s√°id i gcomhth√©acs a √©il√≠onn m√©id beacht</li>
<li>Nuair a bheidh t√∫ m√©id m√≥r sonra√≠ agus ba mhaith leat a aistri√∫ √∫in√©ireachta ach
cinntigh nach nd√©anfar na sonra√≠ a ch√≥ipe√°il nuair a dh√©anann t√∫ amhlaidh</li>
<li>Nuair is mian leat luach a bheith agat agus is cuma leat ach gur cine√°l √© sin
cuireann s√© tr√©ith ar leith i bhfeidhm seachas a bheith de chine√°l ar leith</li>
</ul>
<p>L√©ireoimid an ch√©ad staid sna <a href="ch15-01-box.html#enabling-recursive-types-with-boxes">‚ÄúCumas√∫ Cine√°lacha Athch√∫rsacha le
Bosca√≠‚Äù</a><!-- neamhaird -->. Sa roinn
sa dara c√°s, is f√©idir go dt√≥gfaidh s√© tamall fada aistri√∫ √∫in√©ireachta ar l√≠on m√≥r sonra√≠
am toisc go nd√©antar na sonra√≠ a ch√≥ipe√°il timpeall ar an gcruach. Chun feidhm√≠ocht a fheabhs√∫ i
an staid seo, is f√©idir linn an m√©id m√≥r sonra√≠ a st√≥r√°il ar an gcarn i mbosca.
Ansin, n√≠ dh√©antar ach an m√©id beag sonra√≠ pointeora a ch√≥ipe√°il timpeall ar an gcruach,
agus fanann na sonra√≠ d√° dtagra√≠onn s√© in aon √°it amh√°in ar an gcarn. Is √© an tr√≠√∫ c√°s
ar a dtugtar <em>trait object</em>, agus tugann Caibidil 18 roinn ioml√°n, <a href="ch18-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types">‚ÄúAg baint √∫s√°ide as
R√©ada Tr√©ith a Ligeann Luachanna de Chine√°lacha √âags√∫la,‚Äù</a><!--
neamhaird a dh√©anamh --> d√≠reach leis an √°bhar sin. Mar sin, an m√©id a fhoghlaim√≠onn t√∫ anseo, cuirfidh t√∫ isteach ar√≠s √©
Caibidil 18!</p>
<h3 id="ag-baint-√∫s√°ide-as-boxt-chun-sonra√≠-a-st√≥r√°il-ar-an-charn"><a class="header" href="#ag-baint-√∫s√°ide-as-boxt-chun-sonra√≠-a-st√≥r√°il-ar-an-charn">Ag baint √∫s√°ide as <code>Box&lt;T&gt;</code> chun Sonra√≠ a St√≥r√°il ar an Charn</a></h3>
<p>Sula nd√©anaimid pl√© ar an gc√°s √∫s√°ide st√≥r√°la carn do <code>Box&lt;T&gt;</code>, cl√∫d√≥imid an
comhr√©ir agus conas idirghn√≠omh√∫ le luachanna at√° st√≥r√°ilte laistigh de <code>Box&lt;T&gt;</code>.</p>
<p>L√©ir√≠onn liost√∫ 15-1 conas bosca a √∫s√°id chun luach <code>i32</code> a st√≥r√°il ar an gcarn:</p>
<Listing number="15-1" file-name="src/main.rs" caption="Storing an `i32` value on the heap using a box">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let b = Box::new(5);
    println!("b = {b}");
}</code></pre></pre>
</Listing>
<p>Sainmh√≠n√≠mid an athr√≥g <code>b</code> chun luach <code>Box</code> a bheith aige a dh√≠r√≠onn ar an
luach <code>5</code>, a leithdh√°iltear ar an gcarn. Priont√°lfaidh an cl√°r seo <code>b = 5</code>; isteach
sa ch√°s seo, is f√©idir linn rochtain a fh√°il ar na sonra√≠ sa bhosca cos√∫il le conas a bheadh ‚Äã‚Äãmuid d√° mba √© seo
bh√≠ na sonra√≠ ar an gcruach. D√≠reach mar aon luach faoi √∫in√©ireacht, nuair a th√©ann bosca as
sc√≥ip, mar a dh√©anann <code>b</code> ag deireadh <code>main</code>, d√©anfar √© a dh√°ileadh. T√° an
Tarla√≠onn deallocation don bhosca (at√° st√≥r√°ilte ar an chruach) agus na sonra√≠ √©
point√≠ go (st√≥r√°ilte ar an gcarn).</p>
<p>N√≠l s√© an-√∫s√°ideach luach aonair a chur ar an gcarn, mar sin n√≠ √∫s√°idfidh t√∫ bosca√≠ faoi
iad f√©in ar an mbealach seo go minic. Ag luachanna cos√∫il le <code>i32</code> amh√°in ar an
T√° stack, √°it a st√≥r√°iltear iad de r√©ir r√©amhshocraithe, n√≠os oiri√∫na√≠ don chuid is m√≥ de
c√°sanna. Breathna√≠mid ar ch√°s ina ligeann bosca√≠ d√∫inn na cine√°lacha a shain√≠mid
n√≠ bheadh ‚Äã‚Äãcead againn mura mbeadh bosca√≠ againn.</p>
<h3 id="cine√°lacha-athch√∫rsacha-a-chumas√∫-le-bosca√≠"><a class="header" href="#cine√°lacha-athch√∫rsacha-a-chumas√∫-le-bosca√≠">Cine√°lacha Athch√∫rsacha a Chumas√∫ le Bosca√≠</a></h3>
<p>Is f√©idir luach eile den chine√°l c√©anna a bheith ag luach de chine√°l <em>recursive</em> mar chuid de
f√©in. Crutha√≠onn cine√°lacha athch√∫rsacha ceist mar go gcaithfidh meirge ag am tiomsaithe
fios c√© mh√©ad sp√°is a th√≥gann cine√°l. Mar sin f√©in, t√° nead√∫ luachanna na
d'fh√©adfadh cine√°lacha athch√∫rsacha lean√∫int ar aghaidh go teoirici√∫il gan teorainn, mar sin n√≠ f√©idir le Rust a fhios conas
go leor sp√°is de dh√≠th ar an luach. Toisc go bhfuil m√©id aitheanta ag bosca√≠, is f√©idir linn a chumas√∫
cine√°lacha athch√∫rsacha tr√≠ bhosca a chur isteach sa sainmh√≠ni√∫ ar chine√°l athch√∫rsach.</p>
<p>Mar shampla de chine√°l athch√∫rsach, d√©anaimis ini√∫chadh ar an liosta <em>cons</em>. Is sonra√≠ √© seo
cine√°l a fhaightear go coitianta i dteangacha r√≠omhchl√°r√∫ch√°in feidhme. An cine√°l liosta m√≠bhunt√°ist√≠
beidh muid a shaini√∫ simpl√≠ ach amh√°in i gc√°s an atarl√∫; d√° bhr√≠ sin, an
beidh na coincheapa sa sampla a mbeimid ag obair leo √∫s√°ideach am ar bith a rachaidh t√∫ isteach
c√°sanna n√≠os casta a bhaineann le cine√°lacha athfhillteacha.</p>
<h4 id="tuilleadh-eolais-faoin-liosta-m√≠bhunt√°ist√≠"><a class="header" href="#tuilleadh-eolais-faoin-liosta-m√≠bhunt√°ist√≠">Tuilleadh Eolais Faoin Liosta M√≠bhunt√°ist√≠</a></h4>
<p>Is strucht√∫r sonra√≠ √© <em>cons list</em> a thagann √≥n teanga r√≠omhchl√°r√∫ch√°in Lisp
agus a chan√∫int√≠ agus t√° s√© comhdh√©anta de ph√©ir√≠ neadaithe, agus is √© an leagan Lisp d'a
liosta nasctha. Tagann a ainm √≥n bhfeidhm <code>cons</code> (gearr le haghaidh "construct
function‚Äù) in Lisp a dh√©anann p√©ire nua √≥na dh√° arg√≥int
ag glaoch <code>cons</code> ar ph√©ire comhdh√©anta de luach agus p√©ire eile, is f√©idir linn
d√©an liosta√≠ m√≠bhunt√°ist√≠ a bheidh comhdh√©anta de ph√©ir√≠ athch√∫rsacha.</p>
<p>Mar shampla, seo l√©iri√∫ pseudocode de liosta m√≠bhunt√°ist√≠ a bhfuil an
liosta 1, 2, 3 le gach p√©ire i l√∫ib√≠n√≠:</p>
<pre><code class="language-t√©acs">(1, (2, (3, nialas)))
</code></pre>
<p>T√° dh√° eilimint i ngach m√≠r i liosta m√≠bhunt√°ist√≠: luach na m√≠re reatha
agus an ch√©ad mh√≠r eile. N√≠l sa mh√≠r dheiridh ar an liosta ach luach darb ainm <code>Nil</code>
sin an ch√©ad mh√≠r eile. T√°irgtear liosta m√≠bhunt√°ist√≠ tr√≠ na 'm√≠bhunt√°ist√≠' a ghlaoch go hathch√∫rsach
feidhm. Is √© an t-ainm can√≥nach chun bunch√°s an atarlaithe a chur in i√∫l n√° <code>Nil</code>.
Tabhair faoi deara nach ionann √© seo agus an coincheap ‚Äúneamhn√≠‚Äù i gCaibidil 6,
at√° ina luach neamhbhail√≠ n√≥ as l√°thair.</p>
<p>N√≠ strucht√∫r sonra√≠ a √∫s√°idtear go coitianta i Rust √© an liosta m√≠bhunt√°ist√≠. An chuid is m√≥ den am
nuair a bh√≠onn liosta m√≠reanna agat i Rust, is rogha n√≠os fearr √© <code>Vec&lt;T&gt;</code> le h√∫s√°id.
Cine√°lacha sonra√≠ athfhillteacha eile at√° n√≠os casta <em>are</em> √∫s√°ideach i gc√°sanna √©ags√∫la,
ach ag tos√∫ leis an liosta m√≠bhunt√°ist√≠ sa chaibidil seo, is f√©idir linn a ini√∫chadh conas bosca√≠
lig d√∫inn cine√°l sonra√≠ athch√∫rsach a shaini√∫ gan m√≥r√°n seachr√°in.</p>
<p>I liost√∫ 15-2 t√° sainmh√≠ni√∫ enum le haghaidh liosta m√≠bhunt√°ist√≠. Tabhair faoi deara go bhfuil an c√≥d
n√≠ thioms√≥idh s√© f√≥s toisc nach bhfuil m√©id aitheanta ag an gcine√°l <code>List</code>, rud a
l√©ireoimid.</p>
<Listing number="15-2" file-name="src/main.rs" caption="The first attempt at defining an enum to represent a cons list data structure of `i32` values">
<pre><code class="language-rust ignore does_not_compile">enum List {
    Cons(i32, List),
    Nil,
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre>
</Listing>
<blockquote>
<p>Tabhair faoi deara: T√° liosta m√≠bhunt√°ist√≠ √° gcur i bhfeidhm againn nach bhfuil ach luachanna <code>i32</code> le haghaidh an
cr√≠ocha an tsampla seo. D'fh√©adfaimis √© a chur i bhfeidhm ag baint √∫s√°ide as generics, mar a dh√©anaimid
a phl√©itear i gCaibidil 10, chun cine√°l liosta m√≠bhunt√°ist√≠ a shaini√∫ a d'fh√©adfadh luachanna de
de shaghas ar bith.</p>
</blockquote>
<p>Ag baint √∫s√°ide as an gcine√°l <code>List</code> chun an liosta <code>1, 2, 3</code> a st√≥r√°il bheadh ‚Äã‚Äãcuma an ch√≥id ann
Liost√°il 15-3:</p>
<Listing number="15-3" file-name="src/main.rs" caption="Using the `List` enum to store the list `1, 2, 3`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">enum List {
</span><span class="boring">    Cons(i32, List),
</span><span class="boring">    Nil,
</span><span class="boring">}
</span><span class="boring">
</span>use crate::List::{Cons, Nil};

fn main() {
    let list = Cons(1, Cons(2, Cons(3, Nil)));
}</code></pre>
</Listing>
<p>T√° <code>1</code> ag an gc√©ad luach <code>Cons</code> agus luach <code>List</code> eile. Is √© an luach <code>List</code> seo
luach <code>Cons</code> eile a bhfuil <code>2</code> aige agus luach <code>List</code> eile. An luach <code>List</code> seo
is luach <code>Cons</code> amh√°in eile a shealbha√≠onn <code>3</code> agus luach <code>List</code>, at√° ar deireadh
<code>Nil</code>, an t-athraitheach neamh-athfhillteach a chomhartha√≠onn deireadh an liosta.</p>
<p>M√° dh√©anaimid iarracht an c√≥d a thioms√∫ i Liost√∫ 15-3, faighimid an earr√°id a thaispe√°ntar i
Liost√°il 15-4:</p>
<Listing number="15-4" file-name="output.txt" caption="The error we get when attempting to define a recursive enum">
<pre><code class="language-console">$ cargo run
   Compiling cons-list v0.1.0 (file:///projects/cons-list)
error[E0072]: recursive type `List` has infinite size
 --&gt; src/main.rs:1:1
  |
1 | enum List {
  | ^^^^^^^^^
2 |     Cons(i32, List),
  |               ---- recursive without indirection
  |
help: insert some indirection (e.g., a `Box`, `Rc`, or `&amp;`) to break the cycle
  |
2 |     Cons(i32, Box&lt;List&gt;),
  |               ++++    +

error[E0391]: cycle detected when computing when `List` needs drop
 --&gt; src/main.rs:1:1
  |
1 | enum List {
  | ^^^^^^^^^
  |
  = note: ...which immediately requires computing when `List` needs drop again
  = note: cycle used when computing whether `List` needs drop
  = note: see https://rustc-dev-guide.rust-lang.org/overview.html#queries and https://rustc-dev-guide.rust-lang.org/query.html for more information

Some errors have detailed explanations: E0072, E0391.
For more information about an error, try `rustc --explain E0072`.
error: could not compile `cons-list` (bin "cons-list") due to 2 previous errors
</code></pre>
</Listing>
<p>L√©ir√≠onn an earr√°id seo "go bhfuil m√©id gan teorainn." Is √© an ch√∫is at√° sainmh√≠nithe againn
<code>List</code> le malairt athfhillteach: t√° luach eile ann f√©in
go d√≠reach. Mar thoradh air sin, n√≠ f√©idir le Rust a dh√©anamh amach c√© mh√©ad sp√°is a theasta√≠onn uaidh a st√≥r√°il
luach <code>List</code>. D√©anaimis briseadh s√≠os c√©n f√°th a bhfaighimid an earr√°id seo. Ar dt√∫s, f√©achfaimid conas
Cinneann Rust c√© mh√©ad sp√°is a theasta√≠onn uaidh chun luach de chine√°l neamh-athfhillteach a st√≥r√°il.</p>
<h4 id="m√©id-cine√°l-neamh-athch√∫rsach-a-r√≠omh"><a class="header" href="#m√©id-cine√°l-neamh-athch√∫rsach-a-r√≠omh">M√©id Cine√°l Neamh-Athch√∫rsach a R√≠omh</a></h4>
<p>Athghairm an <code>Message</code> enum a mh√≠nigh muid i Liost√∫ 6-2 nuair a phl√©amar enum
sainmh√≠nithe i gCaibidil 6:</p>
<pre><pre class="playground"><code class="language-rust">enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
<p>Chun a chinneadh c√© mh√©ad sp√°is at√° le leithdh√°ileadh ar luach <code>Message</code>, t√©ann Rust
tr√≠ gach leagan chun a fh√°il amach c√© acu malairt de dh√≠th ar an sp√°s is m√≥. Meirge
feictear nach bhfuil sp√°s ar bith de dh√≠th ar <code>Message::Quit</code>, t√° go leor de dh√≠th ar <code>Message::Move</code>
sp√°s chun dh√° luach <code>i32</code> a st√≥r√°il, agus mar sin de. Toisc nach mbeidh ach leagan amh√°in ann
√∫s√°idte, is √© an sp√°s is m√≥ a bheidh ag teast√°il √≥ luach <code>Message</code> n√° an sp√°s a th√≥gfadh s√©
st√≥r√°il an ceann is m√≥ d√° leagan.</p>
<p>Cuir √© seo i gcodarsnacht leis an m√©id a tharla√≠onn nuair a dh√©anann Rust iarracht a fh√°il amach c√© mh√©ad sp√°is a
cine√°l athch√∫rsach cos√∫il leis an enum <code>List</code> i Liost√∫ 15-2 riachtanas. Tosa√≠onn an tiomsaitheoir
tr√≠ bhreathn√∫ ar an leagan <code>Cons</code>, a bhfuil luach de chine√°l <code>i32</code> agus luach aige
den chine√°l <code>List</code>. Mar sin, t√° g√° le <code>Cons</code> m√©id sp√°is at√° comhionann le m√©id
an <code>i32</code> m√≥ide m√©id <code>List</code>. Chun a dh√©anamh amach c√© mh√©ad cuimhne an <code>List</code>
riachtanais cine√°il, breathna√≠onn an tiomsaitheoir ar na leaganacha, ag tos√∫ leis an <code>Cons</code>
athraitheach. T√° luach cine√°l <code>i32</code> agus luach cine√°il ag an leagan <code>Cons</code>
<code>List</code>, agus leanann an pr√≥iseas seo gan teorainn, mar a thaispe√°ntar i bhF√≠or 15-1.</p>
<img alt="Liosta CONS gan teorainn" src="img/trpl15-01.svg" class="center" style="leithead: 50%;" />
<p><span class="caption">F√≠or 15-1: ‚ÄòLiosta‚Äô gan teorainn ina bhfuil √©igr√≠och
Leaganacha <code>cons</code></span></p>
<h4 id="ag-baint-√∫s√°ide-as-boxt-chun-cine√°l-athch√∫rsach-a-fh√°il-le-m√©id-aitheanta"><a class="header" href="#ag-baint-√∫s√°ide-as-boxt-chun-cine√°l-athch√∫rsach-a-fh√°il-le-m√©id-aitheanta">Ag baint √∫s√°ide as <code>Box&lt;T&gt;</code> chun Cine√°l Athch√∫rsach a Fh√°il le M√©id Aitheanta</a></h4>
<p>Toisc nach f√©idir le Rust a dh√©anamh amach c√© mh√©ad sp√°is at√° le leithdh√°ileadh le haghaidh athch√∫rsach
cine√°lacha sainithe, tugann an tiomsaitheoir earr√°id leis an moladh cabhrach seo:</p>
<!-- manual-regeneration
after doing automatic regeneration, look at listings/ch15-smart-pointers/listing-15-03/output.txt and copy the relevant line
-->
<pre><code class="language-text">help: insert some indirection (e.g., a `Box`, `Rc`, or `&amp;`) to break the cycle
  |
2 |     Cons(i32, Box&lt;List&gt;),
  |               ++++    +
</code></pre>
<p>Sa mholadh seo, cialla√≠onn ‚Äúind√≠reach‚Äù sin in ionad luach a st√≥r√°il
go d√≠reach, ba cheart d√∫inn an strucht√∫r sonra√≠ a athr√∫ chun an luach a st√≥r√°il go hind√≠reach tr√≠
ag st√≥r√°il pointeoir don luach ina ionad sin.</p>
<p>Toisc gur pointeoir √© <code>Box&lt;T&gt;</code>, b√≠onn a fhios ag Rust i gc√≥na√≠ c√© mh√©ad sp√°is at√° i <code>Box&lt;T&gt;</code>
riachtanais: n√≠ athra√≠onn m√©id an phointeora bunaithe ar an m√©id sonra√≠ at√° ann
ag tagairt do. Cialla√≠onn s√© seo gur f√©idir linn <code>Box&lt;T&gt;</code> a chur taobh istigh den leagan <code>Cons</code> ina ionad sin
de luach <code>List</code> eile go d√≠reach. D√≠reoidh an <code>Box&lt;T&gt;</code> go dt√≠ an ch√©ad <code>List</code> eile
luach a bheidh ar an gcarn seachas taobh istigh den leagan <code>Cons</code>.
Go coincheap√∫il, t√° liosta f√≥s againn, a crutha√≠odh le liosta√≠ a bhfuil liosta√≠ eile acu, ach
t√° an cur i bhfeidhm seo n√≠os cos√∫la anois leis na m√≠reanna a chur in aice lena ch√©ile
seachas taobh istigh d√° ch√©ile.</p>
<p>Is f√©idir linn an sainmh√≠ni√∫ ar an <code>List</code> enum i Liost√∫ 15-2 agus an √∫s√°id a athr√∫
den <code>List</code> i Liost√∫ 15-3 leis an gc√≥d i Liost√∫ 15-5, a thioms√≥idh:</p>
<Listing number="15-5" file-name="src/main.rs" caption="Definition of `List` that uses `Box<T>` in order to have a known size">
<pre><pre class="playground"><code class="language-rust">enum List {
    Cons(i32, Box&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};

fn main() {
    let list = Cons(1, Box::new(Cons(2, Box::new(Cons(3, Box::new(Nil))))));
}</code></pre></pre>
</Listing>
<p>T√° m√©id <code>i32</code> de dh√≠th ar an leagan <code>Cons</code> mar aon leis an sp√°s chun an
sonra√≠ pointeoir an bhosca. N√≠ st√≥r√°lann an leagan <code>Nil</code> aon luachanna, mar sin teasta√≠onn n√≠os l√∫ sp√°is uaidh
n√° an leagan <code>Cons</code>. T√° a fhios againn anois go nglacfaidh aon luach <code>List</code> leis an
m√©id <code>i32</code> m√≥ide m√©id sonra√≠ pointeoir an bhosca. Tr√≠ √∫s√°id a bhaint as bosca, t√°
briste an slabhra gan teorainn, athch√∫rsach, ionas gur f√©idir leis an tiomsaitheoir an m√©id a dh√©anamh amach
n√≠ m√≥r d√≥ luach <code>List</code> a st√≥r√°il. L√©ir√≠onn Figi√∫r 15-2 cad √© an leagan <code>Cons</code>
cuma anois.</p>
<img alt="A finite Cons list" src="img/trpl15-02.svg" class="center" />
<p><span class="caption">Figure 15-2: A <code>List</code> that is not infinitely sized
because <code>Cons</code> holds a <code>Box</code></span></p>
<p>N√≠ shol√°thra√≠onn bosca√≠ ach an t-ind√≠reach agus an leithdh√°ileadh carn; n√≠l aon acu
cumais speisialta eile, cos√∫il leis na cinn a fheicfimid leis an bpointeoir cliste eile
cine√°lacha. N√≠l an forchostas feidhm√≠ochta acu chomh maith n√° na cinn speisialta seo
cumais a thabh√∫, ionas gur f√©idir leo a bheith √∫s√°ideach i gc√°sanna cos√∫il leis an liosta m√≠bhunt√°ist√≠ a bhfuil an
is √© indirection an t-aon ghn√© a theasta√≠onn uainn. Breathn√≥imid ar n√≠os m√≥ c√°sanna √∫s√°ide do bhosca√≠
i gCaibidil 18, freisin.</p>
<p>Is pointeoir cliste √© an cine√°l <code>Box&lt;T&gt;</code> toisc go gcuireann s√© an trait <code>Deref</code> i bhfeidhm,
rud a ligeann do luachanna <code>Box&lt;T&gt;</code> a l√°imhse√°il mar thagairt√≠. Nuair a bh√≠onn <code>Box&lt;T&gt;</code>
T√©ann luach as an raon feidhme, d√©antar na sonra√≠ carn a bhfuil an bosca ag d√≠ri√∫ orthu a ghlanadh
suas chomh maith mar gheall ar chur i bhfeidhm na tr√©ithe <code>Drop</code>. Beidh an d√° thr√©ith seo
n√≠os t√°bhachta√≠ f√≥s maidir leis an bhfeidhmi√∫lacht a shol√°thra√≠onn an pointeoir cliste eile
cine√°lacha a phl√©faimid sa chuid eile den chaibidil seo. D√©anaimis ini√∫chadh ar an d√° thr√©ith seo
n√≠os mine.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="leideanna-cliste-a-chaitheamh-cos√∫il-le-tagairt√≠-rialta-leis-an-dtr√©ith-deref"><a class="header" href="#leideanna-cliste-a-chaitheamh-cos√∫il-le-tagairt√≠-rialta-leis-an-dtr√©ith-deref">Leideanna Cliste a Chaitheamh Cos√∫il le Tagairt√≠ Rialta leis an dTr√©ith <code>Deref</code></a></h2>
<p>Nuair a chuirtear an trait <code>Deref</code> i bhfeidhm is f√©idir leat iompar an
<em>dereference operator</em> <code>*</code> (gan a chur am√∫ leis an iolr√∫ n√≥ glob
oibreoir). Tr√≠ <code>Deref</code> a chur i bhfeidhm sa chaoi is gur f√©idir pointeoir cliste a bheith ann
c√≥ire√°ilte cos√∫il le tagairt rialta, is f√©idir leat scr√≠obh c√≥d a oibr√≠onn ar
tagairt√≠ agus √∫s√°id an c√≥d sin le leideanna cliste freisin.</p>
<p>Breathna√≠mid ar dt√∫s ar an gcaoi a n-oibr√≠onn an t-oibreoir d√≠reference le tagairt√≠ rialta.
Ansin d√©anfaimid iarracht cine√°l saincheaptha a shaini√∫ a iompra√≠onn mar <code>Box&lt;T&gt;</code>, agus f√©ach c√©n f√°th
n√≠ oibr√≠onn an t-oibreoir d√≠reference mar thagairt ar √°r nua-shainithe
cine√°l. D√©anfaimid ini√∫chadh ar an gcaoi a bhf√©adfar √© seo a dh√©anamh m√° chuirtear an tr√©ith 'Deref' i bhfeidhm
leideanna cliste a bheith ag obair ar bheala√≠ cos√∫il le tagairt√≠. Ansin f√©achfaimid ar
Gn√© <em>deref coercion</em> Rust agus conas a ligeann s√© d√∫inn oibri√∫ le ceachtar tagairt
n√≥ leideanna cliste.</p>
<blockquote>
<p>N√≥ta: T√° difr√≠ocht mh√≥r amh√°in idir an cine√°l <code>MyBox&lt;T&gt;</code> at√°imid ar t√≠
build and the real <code>Box&lt;T&gt;</code>: n√≠ st√≥r√°lfaidh √°r leagan a shonra√≠ ar an gcarn.
T√°imid ag d√≠ri√∫ an sampla seo ar <code>Deref</code>, mar sin √°it a bhfuil na sonra√≠ st√≥r√°ilte i nd√°ir√≠re
nach bhfuil chomh t√°bhachtach leis an iompar at√° cos√∫il le pointeoir.</p>
</blockquote>
<!-- Seannasc, n√° bain -->
<p><a id="following-the-pointer-to-the-value-with-the-dereference-operator"></a></p>
<h3 id="tar-√©is-an-pointeoir-don-luach"><a class="header" href="#tar-√©is-an-pointeoir-don-luach">Tar √©is an Pointeoir don Luach</a></h3>
<p>Is cine√°l pointeoir √© tagairt rialta, agus bealach amh√°in chun smaoineamh ar phointeoir
mar shaighead le luach at√° st√≥r√°ilte in √°it √©igin eile. I Liost√∫ 15-6, crutha√≠mid a
tagairt do luach <code>i32</code> agus ansin √∫s√°id an t-oibreoir d√≠reference chun an
tagairt don luach:</p>
<Listing number="15-6" file-name="src/main.rs" caption="Using the dereference operator to follow a reference to an `i32` value">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 5;
    let y = &amp;x;

    assert_eq!(5, x);
    assert_eq!(5, *y);
}</code></pre></pre>
</Listing>
<p>T√° luach <code>i32</code> <code>5</code> ag an athr√≥g <code>x</code>. Leagamar <code>y</code> comhionann le tagairt do
<code>x</code>. Is f√©idir linn a dhearbh√∫ go bhfuil <code>x</code> cothrom le <code>5</code>. Mar sin f√©in, m√°s mian linn a dh√©anamh ar
dearbh√∫ faoin luach in <code>y</code>, caithfimid <code>*y</code> a √∫s√°id chun an tagairt a lean√∫int
chuig an luach a bhfuil s√© ag d√≠ri√∫ air (mar sin <em>dereference</em>) ionas gur f√©idir leis an tiomsaitheoir compar√°id a dh√©anamh
an luach iarbh√≠r. Nuair a dh√≠r√≠mid <code>y</code>, t√° rochtain againn ar an luach sl√°nuimhir
T√° <code>y</code> ag cur in i√∫l gur f√©idir linn compar√°id a dh√©anamh le <code>5</code>.</p>
<p>D√° nd√©anfaimis iarracht <code>assert_eq!(5, y);</code> a scr√≠obh ina ionad sin, gheobhaimid an tioms√∫ seo
earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling deref-example v0.1.0 (file:///projects/deref-example)
error[E0277]: can't compare `{integer}` with `&amp;{integer}`
 --&gt; src/main.rs:6:5
  |
6 |     assert_eq!(5, y);
  |     ^^^^^^^^^^^^^^^^ no implementation for `{integer} == &amp;{integer}`
  |
  = help: the trait `PartialEq&lt;&amp;{integer}&gt;` is not implemented for `{integer}`
  = note: this error originates in the macro `assert_eq` (in Nightly builds, run with -Z macro-backtrace for more info)
help: consider dereferencing here
 --&gt; file:///home/.rustup/toolchains/1.82/lib/rustlib/src/rust/library/core/src/macros/mod.rs:46:35
  |
46|                 if !(*left_val == **right_val) {
  |                                   +

For more information about this error, try `rustc --explain E0277`.
error: could not compile `deref-example` (bin "deref-example") due to 1 previous error
</code></pre>
<p>N√≠ cheada√≠tear uimhir a chur i gcompar√°id agus tagairt d‚Äôuimhir toisc go bhfuil siad
cine√°lacha √©ags√∫la. N√≠ m√≥r d√∫inn an t-oibreoir d√≠reference a √∫s√°id chun an tagairt a lean√∫int
leis an luach at√° √° lua aige.</p>
<h3 id="ag-baint-√∫s√°ide-as-boxt-cos√∫il-le-tagairt"><a class="header" href="#ag-baint-√∫s√°ide-as-boxt-cos√∫il-le-tagairt">Ag baint √∫s√°ide as <code>Box&lt;T&gt;</code> Cos√∫il le Tagairt</a></h3>
<p>Is f√©idir linn an c√≥d a athscr√≠obh i Liost√∫ 15-6 chun <code>Box&lt;T&gt;</code> a √∫s√°id in ionad a
tagairt ; an t-oibreoir d√≠reference a √∫s√°idtear ar an <code>Box&lt;T&gt;</code> i Liost√∫ 15-7
feidhmeanna ar an mbealach c√©anna leis an oibreoir dereference a √∫s√°idtear ar an tagairt i
Liost√°il 15-6:</p>
<Listing number="15-7" file-name="src/main.rs" caption="Using the dereference operator on a `Box<i32>`">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 5;
    let y = Box::new(x);

    assert_eq!(5, x);
    assert_eq!(5, *y);
}</code></pre></pre>
</Listing>
<p>Is √© an pr√≠omhdhifr√≠ocht idir Liost√∫ 15-7 agus Liost√∫ 15-6 n√° gur anseo a shocra√≠mid
<code>y</code> a bheith ina shampla de <code>Box&lt;T&gt;</code> ag tagairt do luach c√≥ipe√°ilte de <code>x</code> in √°it
n√° tagairt a dh√≠r√≠onn ar luach <code>x</code>. Sa dearbh√∫ deireanach, is f√©idir linn
√∫s√°id an t-oibreoir d√≠reference chun pointeoir an <code>Box&lt;T&gt;</code> a lean√∫int mar an gc√©anna
bealach a rinne muid nuair a bh√≠ <code>y</code> mar thagairt. Ansin, d√©anfaimid ini√∫chadh ar a bhfuil speisialta
faoi ‚Äã‚Äã<code>Box&lt;T&gt;</code> a chuireann ar √°r gcumas an t-oibreoir d√≠thagartha a √∫s√°id tr√≠ √°r n-
cine√°l f√©in.</p>
<h3 id="√År-pointeoir-cliste-f√©in-a-shainmh√≠ni√∫"><a class="header" href="#√År-pointeoir-cliste-f√©in-a-shainmh√≠ni√∫">√År Pointeoir Cliste F√©in a Shainmh√≠ni√∫</a></h3>
<p>D√©anaimis pointeoir cliste a th√≥g√°il cos√∫il leis an gcine√°l <code>Box&lt;T&gt;</code> a shol√°thra√≠onn an
leabharlann caighde√°nach chun taith√≠ a fh√°il ar an gcaoi a n-iompra√≠onn leideanna cliste difri√∫il √≥
tagairt√≠ de r√©ir r√©amhshocraithe. Ansin f√©achfaimid ar conas an cumas a √∫s√°id chun an
oibreoir dereference.</p>
<p>Sainmh√≠n√≠tear an cine√°l <code>Box&lt;T&gt;</code> ar deireadh mar strucht√∫r tuple le eilimint amh√°in, mar sin
Sainmh√≠n√≠onn liost√∫ 15-8 cine√°l <code>MyBox&lt;T&gt;</code> ar an mbealach c√©anna. D√©anfaimid sainmh√≠ni√∫ freisin ar a
feidhm <code>new</code> chun an fheidhm <code>new</code> a shainmh√≠n√≠tear ar <code>Box&lt;T&gt;</code> a mheaitse√°il.</p>
<Listing number="15-8" file-name="src/main.rs" caption="Defining a `MyBox<T>` type">
<pre><pre class="playground"><code class="language-rust">struct MyBox&lt;T&gt;(T);

impl&lt;T&gt; MyBox&lt;T&gt; {
    fn new(x: T) -&gt; MyBox&lt;T&gt; {
        MyBox(x)
    }
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Sainmh√≠n√≠mid strucht√∫r darb ainm <code>MyBox</code> agus dearbha√≠mid paraim√©adar cine√°lach <code>T</code>, mar gheall ar
ba mhaith linn go mbeadh luachanna d'aon chine√°l ag √°r gcine√°l. Is strucht√∫r tuple √© an cine√°l <code>MyBox</code>
le gn√© amh√°in den chine√°l <code>T</code>. Glacann an fheidhm <code>MyBox::new</code> paraim√©adar amh√°in de
cl√≥scr√≠obh <code>T</code> agus seolann t√∫ sampla <code>MyBox</code> a choinn√≠onn an luach a cuireadh isteach.</p>
<p>D√©anaimis iarracht an <code>main</code> i Liost√∫ 15-7 a chur le Liost√∫ 15-8 agus
√© a athr√∫ chun an cine√°l <code>MyBox&lt;T&gt;</code> a shainmh√≠nigh muid a √∫s√°id in ionad <code>Box&lt;T&gt;</code>. T√° an
n√≠ thioms√≥idh an c√≥d i Liost√∫ 15-9 toisc nach bhfuil a fhios ag Rust conas d√≠thagairt a dh√©anamh
<code>MyBox</code>.</p>
<Listing number="15-9" file-name="src/main.rs" caption="Attempting to use `MyBox<T>` in the same way we used references and `Box<T>`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">struct MyBox&lt;T&gt;(T);
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; MyBox&lt;T&gt; {
</span><span class="boring">    fn new(x: T) -&gt; MyBox&lt;T&gt; {
</span><span class="boring">        MyBox(x)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let x = 5;
    let y = MyBox::new(x);

    assert_eq!(5, x);
    assert_eq!(5, *y);
}</code></pre>
</Listing>
<p>Here‚Äôs the resulting compilation error:</p>
<pre><code class="language-console">$ cargo run
   Compiling deref-example v0.1.0 (file:///projects/deref-example)
error[E0614]: type `MyBox&lt;{integer}&gt;` cannot be dereferenced
  --&gt; src/main.rs:14:19
   |
14 |     assert_eq!(5, *y);
   |                   ^^

For more information about this error, try `rustc --explain E0614`.
error: could not compile `deref-example` (bin "deref-example") due to 1 previous error
</code></pre>
<p>N√≠ f√©idir √°r gcine√°l <code>MyBox&lt;T&gt;</code> a dh√≠mheas toisc nach bhfuil s√© sin curtha i bhfeidhm againn
cumas ar √°r gcine√°l. Chun d√≠thagairt a dh√©anamh leis an oibreoir <code>*</code>, d√©anaimid
an trait <code>Deref</code> a chur i bhfeidhm.</p>
<h3 id="caitheamh-cine√°l-cos√∫il-le-tagairt-tr√≠d-an-trait-deref-a-chur-i-bhfeidhm"><a class="header" href="#caitheamh-cine√°l-cos√∫il-le-tagairt-tr√≠d-an-trait-deref-a-chur-i-bhfeidhm">Caitheamh Cine√°l Cos√∫il le Tagairt tr√≠d an Trait <code>Deref</code> a Chur i bhFeidhm</a></h3>
<p>Mar a pl√©adh sa <a href="ch10-02-traits.html#implementing-a-trait-on-a-type">‚ÄúTr√©ith a Chur i bhFeidhm ar Chine√°l‚Äù</a><!-- neamhaird a dh√©anamh
--> alt de Chaibidil 10, a chur i bhfeidhm tr√©ith, n√≠ m√≥r d√∫inn a chur ar f√°il
cur i bhfeidhm do mhodhanna riachtanacha an trait. An trait <code>Deref</code>, ar f√°il
ag an leabharlann chaighde√°nach, √©il√≠onn orainn modh amh√°in darb ainm <code>deref</code> sin a chur i bhfeidhm
faigheann s√© <code>self</code> ar iasacht agus cuireann s√© tagairt ar ais do na sonra√≠ istigh. Liost√°il 15-10
ina bhfuil <code>Deref</code> curtha i bhfeidhm le cur leis an sainmh√≠ni√∫ ar <code>MyBox</code>:</p>
<Listing number="15-10" file-name="src/main.rs" caption="Implementing `Deref` on `MyBox<T>`">
<pre><pre class="playground"><code class="language-rust">use std::ops::Deref;

impl&lt;T&gt; Deref for MyBox&lt;T&gt; {
    type Target = T;

    fn deref(&amp;self) -&gt; &amp;Self::Target {
        &amp;self.0
    }
}
<span class="boring">
</span><span class="boring">struct MyBox&lt;T&gt;(T);
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; MyBox&lt;T&gt; {
</span><span class="boring">    fn new(x: T) -&gt; MyBox&lt;T&gt; {
</span><span class="boring">        MyBox(x)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let x = 5;
</span><span class="boring">    let y = MyBox::new(x);
</span><span class="boring">
</span><span class="boring">    assert_eq!(5, x);
</span><span class="boring">    assert_eq!(5, *y);
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Sainmh√≠n√≠onn an chomhr√©ir <code>type Target = T;</code> cine√°l gaolmhar don <code>Deref</code>
tr√©ithe a √∫s√°id. Is bealach beag√°n difri√∫il iad cine√°lacha comhlachaithe chun a
paraim√©adar cine√°lach, ach n√≠ g√° duit a bheith buartha f√∫thu faoi l√°thair; cl√∫d√≥idh muid
iad go mion i gCaibidil 20.</p>
<p>L√≠onaimid corp an mhodha <code>deref</code> le <code>&amp;self.0</code> mar sin filleann <code>deref</code> a
tagairt don luach a theasta√≠onn uainn a rochtain leis an oibreoir <code>*</code>; aisghairm √≥ na
<a href="ch05-01-defining-structs.html#using-tuple-structs-without-named-fields-to-create-different-types">‚Äú√ös√°id Strucht√∫ir Tuple gan R√©ims√≠ Ainmnithe chun √âags√∫la a Chruth√∫
Cine√°lacha‚Äù</a><!-- neamhaird --> roinn de Chaibidil 5 a bhfuil rochtain ag <code>.0</code> air
an ch√©ad luach i strucht√∫r tuple. An fheidhm <code>main</code> i Liost√∫ 15-9 go
glaonna <code>*</code> ar an luach <code>MyBox&lt;T&gt;</code> le ch√©ile anois, agus na dearbhuithe pas!</p>
<p>Gan an tr√©ithe <code>Deref</code>, n√≠ f√©idir leis an tiomsaitheoir ach tagairt√≠ <code>&amp;</code> a dh√≠mheas.
Tugann an modh <code>deref</code> an cumas don tiomsaitheoir luach d'aon chine√°l a ghlacadh
a chuireann <code>Deref</code> i bhfeidhm agus a ghlaonn an modh <code>deref</code> chun tagairt <code>&amp;</code> a fh√°il go
t√° a fhios aige conas dereference.</p>
<p>Nuair a chuamar isteach <code>* y</code> i Liosta 15-9, rith Rust √© seo taobh thiar de na c√°sanna
c√≥d:</p>
<pre><code class="language-meirge  neamhaird">*(y.deref())
</code></pre>
<p>Cuireann Rust glaoch chuig an modh <code>deref</code> in ionad an oibreora <code>*</code> agus ansin a
tagairt shimpl√≠ ionas nach mbeidh orainn smaoineamh ar c√© acu an gcaithfimid n√≥ nach g√°
glaoigh ar an modh <code>deref</code>. Ligeann an ghn√© Rust seo d√∫inn c√≥d a scr√≠obh a fheidhm√≠onn
mar an gc√©anna cib√© an bhfuil tagairt rialta againn n√≥ cine√°l a chuireann i bhfeidhm
<code>Deref</code>.</p>
<p>Is √© an f√°th go dtugann an modh <code>deref</code> tagairt ar ais do luach, agus go bhfuil an
t√° g√° le tagairt shimpl√≠ lasmuigh de na l√∫ib√≠n√≠ in <code>*(y.deref())</code> f√≥s,
a bhaineann leis an gc√≥ras √∫in√©ireachta. M√° thug an modh <code>deref</code> an luach ar ais
go d√≠reach in ionad tagairt don luach, bhogfa√≠ an luach amach as
<code>self</code>. N√≠limid ag iarraidh √∫in√©ireacht a ghlacadh ar an luach inmhe√°nach taobh istigh de <code>MyBox&lt;T&gt;</code> in
sa ch√°s seo n√≥ i bhformh√≥r na gc√°sanna ina n-√∫s√°idimid an t-oibreoir d√≠reference.</p>
<p>Tabhair faoi deara go gcuirtear glao chuig an modh <code>deref</code> in ionad an oibreora <code>*</code> agus
ansin cuir glaoch chuig an oibreoir <code>*</code> uair amh√°in, gach uair a √∫s√°idimid <code>*</code> in√°r gc√≥d.
Toisc nach dtagann ionad√∫ an oibreora <code>*</code> ar√≠s gan teorainn, n√≠ m√≥r d√∫inn
deireadh suas le sonra√≠ den chine√°l <code>i32</code>, a mheaitse√°lann an <code>5</code> in <code>assert_eq!</code> i
Liost√°il 15-9.</p>
<h3 id="comh√©igeantais-fhor√©igthe-intuigthe-le-feidhmeanna-agus-modhanna"><a class="header" href="#comh√©igeantais-fhor√©igthe-intuigthe-le-feidhmeanna-agus-modhanna">Comh√©igeantais Fhor√©igthe intuigthe le Feidhmeanna agus Modhanna</a></h3>
<p>Tionta√≠onn <em>Deref coercion</em> tagairt do chine√°l a chuireann an <code>Deref</code> i bhfeidhm
tr√©ith isteach i dtagairt do chine√°l eile. Mar shampla, is f√©idir comh√©igean deref a thiont√∫
<code>&amp;String</code> go <code>&amp;str</code> toisc go gcuireann <code>String</code> an trait <code>Deref</code> i bhfeidhm ionas go mbeidh s√©
Filleann <code>&amp;str</code>. Is √°is √© comh√©igean deref a fheidhm√≠onn Rust ar arg√≥int√≠ chun
feidhmeanna agus modhanna, agus n√≠ oibr√≠onn s√© ach ar chine√°lacha a chuireann an <code>Deref</code> i bhfeidhm
trait. Tarla√≠onn s√© go huathoibr√≠och nuair a thugaimid tagairt do chine√°l √°irithe
luach mar arg√≥int le feidhm n√≥ modh nach bhfuil ag teacht leis an bparaim√©adar
cl√≥scr√≠obh an sainmh√≠ni√∫ ar fheidhm n√≥ modh. Seicheamh glaonna chuig an <code>deref</code>
athra√≠onn modh an cine√°l a shol√°thra√≠omar isteach sa chine√°l a theasta√≠onn √≥n bparaim√©adar.</p>
<p>Cuireadh comh√©igean deref le Rust ionas go mbeidh feidhm ag r√≠omhchl√°raitheoir√≠ ag scr√≠obh agus
n√≠ g√° an oiread tagairt√≠ agus d√≠thagairt√≠ follasacha a chur isteach i nglaonna modha
le <code>&amp;</code> agus <code>*</code>. Ligeann an ghn√© comh√©igean deref d√∫inn n√≠os m√≥ c√≥d a scr√≠obh freisin
is f√©idir oibri√∫ le haghaidh tagairt√≠ n√≥ leideanna cliste.</p>
<p>Chun comh√©igean deref a fheice√°il i ngn√≠omh, bainimis √∫s√°id as an gcine√°l <code>MyBox&lt;T&gt;</code> a shainmh√≠n√≠omar ann
Liost√°il 15-8 chomh maith le cur i bhfeidhm <code>Deref</code> a chuireamar leis sa Liost√∫
15-10. L√©ir√≠onn liosta 15-11 an sainmh√≠ni√∫ ar fheidhm a bhfuil sreangshleasa aici
paraim√©adar:</p>
<Listing number="15-11" file-name="src/main.rs" caption="A `hello` function that has the parameter `name` of type `&str`">
<pre><pre class="playground"><code class="language-rust">fn hello(name: &amp;str) {
    println!("Hello, {name}!");
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Is f√©idir linn an fheidhm <code>hello</code> a thabhairt le slisne teaghr√°n mar arg√≥int, mar shampla
<code>hello("Rust");</code> mar shampla. Tr√≠ chomh√©igean deref is f√©idir <code>hello</code> a thabhairt air
le tagairt do luach cine√°il <code>MyBox&lt;String&gt;</code>, mar a thaispe√°ntar i Liost√∫ 15-12:</p>
<Listing number="15-12" file-name="src/main.rs" caption="Calling `hello` with a reference to a `MyBox<String>` value, which works because of deref coercion">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use std::ops::Deref;
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; Deref for MyBox&lt;T&gt; {
</span><span class="boring">    type Target = T;
</span><span class="boring">
</span><span class="boring">    fn deref(&amp;self) -&gt; &amp;T {
</span><span class="boring">        &amp;self.0
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct MyBox&lt;T&gt;(T);
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; MyBox&lt;T&gt; {
</span><span class="boring">    fn new(x: T) -&gt; MyBox&lt;T&gt; {
</span><span class="boring">        MyBox(x)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn hello(name: &amp;str) {
</span><span class="boring">    println!("Hello, {name}!");
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let m = MyBox::new(String::from("Rust"));
    hello(&amp;m);
}</code></pre></pre>
</Listing>
<p>Anseo t√°imid ag glaoch ar an bhfeidhm <code>hello</code> leis an arg√≥int <code>&amp;m</code>, is √© sin a
tagairt do luach <code>MyBox&lt;String&gt;</code>. Toisc gur chuireamar an trait <code>Deref</code> i bhfeidhm
ar <code>MyBox&lt;T&gt;</code> i Liost√∫ 15-10, is f√©idir le Rust <code>&amp;MyBox &lt;String&gt;</code> a iomp√∫ ina <code>&amp;String</code>
tr√≠ ghlaoch ar <code>deref</code>. Sol√°thra√≠onn an leabharlann chaighde√°nach cur i bhfeidhm <code>Deref</code>
ar <code>String</code> a sheolann sreang√°n ar ais, agus t√° s√© seo i gc√°ip√©is√≠ocht an API
le haghaidh <code>Deref</code>. Glaonn Rust ar <code>deref</code> ar√≠s chun an <code>&amp;String</code> a iomp√∫ ina <code>&amp;str</code>, a
ag teacht le sainmh√≠ni√∫ na feidhme <code>hello</code>.</p>
<p>Murar chuir Rust comh√©igean deref i bhfeidhm, bheadh ‚Äã‚Äãorainn an c√≥d a scr√≠obh isteach
Liost√°il 15-13 in ionad an ch√≥id i Liost√∫ 15-12 chun <code>hello</code> a ghlaoch le luach
den chine√°l <code>&amp;MyBox&lt;String&gt;</code>.</p>
<Listing number="15-13" file-name="src/main.rs" caption="The code we would have to write if Rust didn‚Äôt have deref coercion">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use std::ops::Deref;
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; Deref for MyBox&lt;T&gt; {
</span><span class="boring">    type Target = T;
</span><span class="boring">
</span><span class="boring">    fn deref(&amp;self) -&gt; &amp;T {
</span><span class="boring">        &amp;self.0
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct MyBox&lt;T&gt;(T);
</span><span class="boring">
</span><span class="boring">impl&lt;T&gt; MyBox&lt;T&gt; {
</span><span class="boring">    fn new(x: T) -&gt; MyBox&lt;T&gt; {
</span><span class="boring">        MyBox(x)
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn hello(name: &amp;str) {
</span><span class="boring">    println!("Hello, {name}!");
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let m = MyBox::new(String::from("Rust"));
    hello(&amp;(*m)[..]);
}</code></pre></pre>
</Listing>
<p>D√©anann an <code>(*m)</code> tagairt don <code>MyBox&lt;String&gt;</code> mar <code>String</code>. Ansin t√° an <code>&amp;</code> agus
<code>[..]</code> glac sliseog teaghr√°n den <code>String</code> at√° comhionann leis an teaghr√°n ioml√°n go
mheaitse√°il s√≠ni√∫ <code>hello</code>. T√° s√© n√≠os deacra an c√≥d seo gan comh√©igeantais deref a dh√©anamh
l√©amh, scr√≠obh, agus tuiscint leis na siombail√≠ seo go l√©ir at√° i gceist. Deref comh√©igean
ligeann do Rust na tiontuithe seo a l√°imhse√°il d√∫inn go huathoibr√≠och.</p>
<p>Nuair a shainmh√≠n√≠tear an tr√©ith <code>Deref</code> do na cine√°lacha at√° i gceist, d√©anfaidh Rust anail√≠s ar an
cine√°lacha agus √∫s√°id <code>Deref::deref</code> a mh√©ad uair is g√° chun tagairt a fh√°il
mheaitse√°il le cine√°l an pharaim√©adar. An l√≠on uaireanta is g√° go mbeadh <code>Deref::deref</code>
a cuireadh isteach r√©itithe ag am tiomsaithe, mar sin n√≠l aon phion√≥s ama rite as a ghlacadh
bunt√°iste a bhaint as comh√©igean deref!</p>
<h3 id="mar-a-idirghn√≠omha√≠onn-comh√©igean-deref-le-mutability"><a class="header" href="#mar-a-idirghn√≠omha√≠onn-comh√©igean-deref-le-mutability">Mar a Idirghn√≠omha√≠onn Comh√©igean Deref le Mutability</a></h3>
<p>Cos√∫il leis an gcaoi a n-√∫s√°ideann t√∫ an tr√©ith <code>Deref</code> chun an t-oibreoir <code>*</code> a sh√°r√∫
tagairt√≠ domhalartaithe, is f√©idir leat an tr√©ith <code>DerefMut</code> a √∫s√°id chun an <code>*</code> a sh√°r√∫
oibreoir ar thagairt√≠ mutable.</p>
<p>D√©anann Rust comh√©igean a dh√≠spreagadh nuair a aims√≠onn s√© cine√°lacha agus cur i bhfeidhm tr√©ithe i dtr√≠ cinn
c√°sanna:</p>
<ul>
<li>√ì <code>&amp;T</code> go <code>&amp;U</code> nuair a <code>T: Deref &lt;Target=U&gt;</code></li>
<li>√ì <code>&amp;mut T</code> go <code>&amp;mut U</code> nuair <code>T: DerefMut&lt;Target=U&gt;</code></li>
<li>√ì <code>&amp;mut T</code> go <code>&amp;U</code> nuair a <code>T: Deref &lt;Target=U&gt;</code></li>
</ul>
<p>Is ionann an ch√©ad d√° ch√°s agus a ch√©ile ach amh√°in an dara c√°s
feidhm√≠onn mutability. Deir an ch√©ad ch√°s m√° t√° <code>&amp;T</code>, agus <code>T</code> agat
cuireann s√© <code>Deref</code> i bhfeidhm do chine√°l √©igin <code>U</code>, is f√©idir leat <code>&amp;U</code> a fh√°il go tr√©dhearcach. T√° an
deir an dara c√°s go dtarla√≠onn an comh√©igean deref c√©anna le haghaidh tagairt√≠ mutable.</p>
<p>T√° an tr√≠√∫ c√°s n√≠os deacra: comhleanfaidh meirge tagairt chomhsh√≥ite do ch√°s
do-mhoth√∫ch√°nach. Ach is <em>not</em> a mhalairt is f√©idir: beidh tagairt√≠ do-laghdaithe
riamh iallach a chur ar thagairt√≠ mutable. Mar gheall ar na rialacha iasachtaithe, m√° t√°
tagairt sho-sh√≥ite, n√≠ m√≥r gurb √≠ an tagairt sho-sh√≥-shamhail sin an t-aon tagairt d√≥ sin
sonra√≠ (ar shl√≠ eile, n√≠ thioms√≥dh an cl√°r). Comhsh√≥ amh√°in a thiont√∫
n√≠ sh√°r√≥idh tagairt do thagairt neamh-inmhalartaithe amh√°in na rialacha iasachta√≠ochta.
Chun tagairt do-ath-inmhe√°nach a thiont√∫ go tagairt shochorraithe, bheadh ‚Äã‚Äãg√° leis an
is √≠ an tagairt tosaigh do- immutable an t-aon tagairt domhalartaithe do na sonra√≠ sin, ach
n√≠ r√°tha√≠onn na rialacha iasachta√≠ochta √© sin. Mar sin, n√≠ f√©idir le Rust an
toimhde gur tagairt do-ath-inmhe√°nach a thiont√∫ go tagairt shochorraithe
is f√©idir.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="c√≥d-rith-ar-ghlantach√°n-leis-an-trait-drop"><a class="header" href="#c√≥d-rith-ar-ghlantach√°n-leis-an-trait-drop">C√≥d Rith ar Ghlantach√°n leis an Trait <code>Drop</code></a></h2>
<p>Is √© an dara tr√©ith at√° t√°bhachtach don phatr√∫n pointeoir cliste n√° <code>Drop</code>, rud a ligeann
shaincheapann t√∫ cad a tharla√≠onn nuair a bh√≠onn luach ar t√≠ dul as an raon feidhme. Is f√©idir leat
cur i bhfeidhm a shol√°thar don tr√©ith <code>Drop</code> ar aon chine√°l, agus is f√©idir leis an gc√≥d sin
a √∫s√°id chun acmhainn√≠ cos√∫il le comhaid n√≥ naisc l√≠onra a scaoileadh.</p>
<p>T√°imid ag tabhairt isteach <code>Drop</code> i gcomhth√©acs leideanna cliste mar go bhfuil an
is beagnach i gc√≥na√≠ a √∫s√°idtear feidhmi√∫lacht na tr√©ithe <code>Drop</code> agus a
pointeoir cliste. Mar shampla, nuair a scaoiltear <code>Box&lt;T&gt;</code> d√≠roinnfidh s√© an
sp√°s ar an gcarn a d√≠r√≠onn an bosca air.</p>
<p>I dteangacha √°irithe, i gc√°s cine√°lacha √°irithe, n√≠ m√≥r don r√≠omhchl√°raitheoir c√≥d a ghlaoch chun cuimhne saor in aisce
n√≥ acmhainn√≠ gach uair a chr√≠ochna√≠onn siad ag baint √∫s√°ide as sampla de na cine√°lacha sin. Sampla√≠
cuir l√°imhse√°lacha comhaid, soic√©id n√≥ glais san √°ireamh. M√° dh√©anann siad dearmad, d'fh√©adfadh an c√≥ras
√©ir√≠ r√≥-ualaithe agus tuairte√°la. I Rust, is f√©idir leat a shonr√∫ go bhfuil beag√°n √°irithe de
c√≥d a rith aon uair a th√©ann luach as raon feidhme, agus cuirfidh an tiomsaitheoir isteach
an c√≥d seo go huathoibr√≠och. Mar thoradh air sin, n√≠ g√° duit a bheith c√∫ramach faoi
c√≥d glanta a chur i ngach √°it i gcl√°r a chuireann c√°s ar leith
t√° an cine√°l cr√≠ochnaithe - n√≠ bheidh t√∫ ag sceitheadh ‚Äã‚Äãacmhainn√≠ f√≥s!</p>
<p>Sonra√≠onn t√∫ an c√≥d le rith nuair a th√©ann luach as raon feidhme tr√≠ chur i bhfeidhm an
Tr√©ith <code>drop</code>. √âil√≠onn an tr√©ith <code>Drop</code> ort modh amh√°in ainmnithe a chur i bhfeidhm
<code>drop</code> a th√≥gann tagairt mutable do <code>self</code>. Chun f√©achaint nuair a ghlaonn Rust 'titim',
cuirimis r√°itis <code>drop</code> le <code>println!</code> i bhfeidhm faoi l√°thair.</p>
<p>L√©ir√≠onn liost√∫ 15-14 strucht√∫r <code>CustomSmartPointer</code> nach bhfuil ach saincheaptha aige
feidhmi√∫lacht n√° go nd√©anfaidh s√© <code>Dropping CustomSmartPointer!</code> a phriont√°il nuair a bheidh an
mar shampla t√©ann as raon feidhme, chun a thaispe√°int nuair a ritheann Rust an fheidhm <code>drop</code>.</p>
<Listing number="15-14" file-name="src/main.rs" caption="A `CustomSmartPointer` struct that implements the `Drop` trait where we would put our cleanup code">
<pre><pre class="playground"><code class="language-rust">struct CustomSmartPointer {
    data: String,
}

impl Drop for CustomSmartPointer {
    fn drop(&amp;mut self) {
        println!("Dropping CustomSmartPointer with data `{}`!", self.data);
    }
}

fn main() {
    let c = CustomSmartPointer {
        data: String::from("my stuff"),
    };
    let d = CustomSmartPointer {
        data: String::from("other stuff"),
    };
    println!("CustomSmartPointers created.");
}</code></pre></pre>
</Listing>
<p>T√° an trait <code>Drop</code> san √°ireamh sa r√©amhr√°, mar sin n√≠ g√° d√∫inn √© a thabhairt isteach
sc√≥ip. Cuirimid an tr√©ith <code>Drop</code> ar <code>CustomSmartPointer</code> i bhfeidhm agus sol√°thra√≠mid an
cur i bhfeidhm don mhodh <code>drop</code> ar a dtugtar <code>println!</code>. An comhlacht ar an
Is √©ard is feidhm <code>drop</code> ann n√° √°it a gcuirfe√° aon loighic a theastaigh uait a rith
t√©ann sampla de do chine√°l as raon feidhme. T√°imid ag priont√°il roinnt t√©acs anseo chun
l√©iri√∫ go radhairc cathain a ghlaonn Rust 'titim'.</p>
<p>I <code>main</code>, crutha√≠mid dh√° ch√°s de <code>CustomSmartPointer</code> agus ansin priont√°il
<code>CustomSmartPointers created</code>. Ag deireadh <code>main</code>, √°r gc√°sanna de
Rachaidh <code>CustomSmartPointer</code> as an sc√≥ip, agus cuirfidh Rust glaoch ar an gc√≥d a chuireamar
sa mhodh <code>drop</code>, √°r dteachtaireacht deiridh a phriont√°il. Tabhair faoi deara n√°r gh√° d√∫inn
glaoigh ar an modh <code>drop</code> go sainr√°ite.</p>
<p>Agus an cl√°r seo √° rith againn, feicfidh muid an t-aschur seo a leanas:</p>
<pre><pre class="playground"><code class="language-rust">struct CustomSmartPointer {
    data: String,
}

impl Drop for CustomSmartPointer {
    fn drop(&amp;mut self) {
        println!("Dropping CustomSmartPointer with data `{}`!", self.data);
    }
}

fn main() {
    let c = CustomSmartPointer {
        data: String::from("my stuff"),
    };
    let d = CustomSmartPointer {
        data: String::from("other stuff"),
    };
    println!("CustomSmartPointers created.");
}</code></pre></pre>
<p>Thug Rust <code>drop</code> orainn go huathoibr√≠och nuair a chuaigh √°r gc√°sanna amach as an sc√≥ip,
ag glaoch ar an gc√≥d a shonraigh muid. Cuirtear athr√≥ga in ord droim ar ais de
a greadadh, mar sin thit <code>d</code> roimh <code>c</code>. Is √© cusp√≥ir an tsampla seo n√°
treoir amhairc a thabhairt duit ar conas a oibr√≠onn an modh <code>drop</code>; de ghn√°th dh√©anf√°
sonraigh an c√≥d glanta nach m√≥r do do chine√°l a rith seachas prionta
teachtaireacht.</p>
<h3 id="luach-a-√≠sli√∫-go-luath-le-stdmemdrop"><a class="header" href="#luach-a-√≠sli√∫-go-luath-le-stdmemdrop">Luach a √≠sli√∫ go luath le <code>std::mem::drop</code></a></h3>
<p>Ar an drochuair, n√≠l s√© √©asca an <code>drop</code> uathoibr√≠och a dh√≠chumas√∫
feidhmi√∫lacht. De ghn√°th n√≠ g√° ‚Äòtitim‚Äô a dh√≠chumas√∫; pointe ioml√°n an
Is √©ard at√° i gceist le tr√©ithe ‚Äútitim‚Äù go dtugtar aire uathoibr√≠och d√≥. √ì am go ch√©ile, √°fach,
b'fh√©idir gur mhaith leat luach a ghlanadh go luath. Sampla amh√°in is ea nuair a √∫s√°idtear cliste
leideanna a bhainist√≠onn glais: b'fh√©idir gur mhaith leat an modh <code>drop</code> a chur i bhfeidhm
scaoileann s√© an glas ionas gur f√©idir le c√≥d eile sa raon feidhme c√©anna an glas a fh√°il.
N√≠ ligeann Rust duit modh ‚Äòtitim‚Äô na trait ‚ÄòDrop‚Äô a ghlaoch de l√°imh; ina ionad
caithfidh t√∫ glaoch ar an bhfeidhm <code>std::mem::drop</code> a shol√°thra√≠onn an leabharlann chaighde√°nach
m√°s mian leat iallach a chur ar luach a √≠sli√∫ roimh dheireadh a sc√≥ip.</p>
<p>M√° dh√©anaimid iarracht modh 'titim' an trait <code>Drop</code> a ghlaoch de l√°imh tr√≠ athr√∫ a dh√©anamh ar an
`pr√≠omhfheidhm' √≥ Liost√∫ 15-14, mar a thaispe√°ntar i Liost√∫ 15-15, gheobhaidh muid
earr√°id tiomsaithe:</p>
<Listing number="15-16" file-name="src/main.rs" caption="Calling `std::mem::drop` to explicitly drop a value before it goes out of scope">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct CustomSmartPointer {
</span><span class="boring">    data: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Drop for CustomSmartPointer {
</span><span class="boring">    fn drop(&amp;mut self) {
</span><span class="boring">        println!("Dropping CustomSmartPointer with data `{}`!", self.data);
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let c = CustomSmartPointer {
        data: String::from("some data"),
    };
    println!("CustomSmartPointer created.");
    drop(c);
    println!("CustomSmartPointer dropped before the end of main.");
}</code></pre></pre>
</Listing>
<p>Nuair a dh√©anaimid iarracht an c√≥d seo a thioms√∫, gheobhaidh muid an earr√°id seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling drop-example v0.1.0 (file:///projects/drop-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.73s
     Running `target/debug/drop-example`
CustomSmartPointer created.
Dropping CustomSmartPointer with data `some data`!
CustomSmartPointer dropped before the end of main.
</code></pre>
<p>Deir an teachtaireacht earr√°ide seo nach bhfuil cead againn ‚Äòtitim‚Äô a ghlaoch go sainr√°ite. T√° an
√ös√°ideann teachtaireacht earr√°ide an t√©arma <em>destructor</em>, arb √© an t√©arma r√≠omhchl√°r√∫ch√°in ginear√°lta √©
le haghaidh feidhm a ghlanann sampla. T√° <em>destructor</em> ar aon dul le a
<em>constructor</em>, rud a chrutha√≠onn sampla. Is √© an fheidhm <code>drop</code> i Rust amh√°in
scriost√≥ir ar leith.</p>
<p>N√≠ ligeann Rust d√∫inn ‚Äòtitim‚Äô a ghlaoch go sainr√°ite mar go mbeadh Rust f√≥s
glaoigh go huathoibr√≠och ar <code>drop</code> ar an luach ag deireadh <code>main</code>. Chuirfeadh s√© seo faoi deara a
earr√°id <em>double free</em> toisc go mbeadh Rust ag iarraidh an luach c√©anna a ghlanadh
faoi ‚Äã‚Äãdh√≥.</p>
<p>N√≠ f√©idir linn ions√° uathoibr√≠och <code>drop</code> a dh√≠chumas√∫ nuair a th√©ann luach as
sc√≥ip, agus n√≠ f√©idir linn an modh <code>drop</code> a ghlaoch go sainr√°ite. Mar sin, m√°s g√° d√∫inn bhfeidhm
luach at√° le glanadh suas go luath, √∫s√°idimid an fheidhm <code>std::mem::drop</code>.</p>
<p>T√° an fheidhm <code>std::mem::drop</code> difri√∫il √≥n modh <code>drop</code> sa <code>Drop</code>
trait. Tugaimid √© tr√≠ rith mar arg√≥int an luach ba mhaith linn a bhr√∫ chun titim.
T√° an fheidhm sa r√©amhr√°, ionas /../listings/gur f√©idir linn <code>main</code> i Liost√∫ 15-15 a mhodhn√∫ go
cuir glaoch ar an bhfeidhm <code>drop</code>, mar a thaispe√°ntar i Liost√∫ 15-16:</p>
<Listing number="15-16" file-name="src/main.rs" caption="Ag glaoch ar `std::mem::drop` chun luach a laghd√∫ go sainr√°ite sula dt√©ann s√© as an sc√≥ip">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct CustomSmartPointer {
</span><span class="boring">    data: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Drop for CustomSmartPointer {
</span><span class="boring">    fn drop(&amp;mut self) {
</span><span class="boring">        println!("Dropping CustomSmartPointer with data `{}`!", self.data);
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let c = CustomSmartPointer {
        data: String::from("some data"),
    };
    println!("CustomSmartPointer created.");
    drop(c);
    println!("CustomSmartPointer dropped before the end of main.");
}</code></pre></pre>
</Listing>
<p>M√° ritheann t√∫ an c√≥d seo, d√©anfar na ruda√≠ seo a leanas a phriont√°il:</p>
<pre><code class="language-console">$ cargo run
   Compiling drop-example v0.1.0 (file:///projects/drop-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.73s
     Running `target/debug/drop-example`
CustomSmartPointer created.
Dropping CustomSmartPointer with data `some data`!
CustomSmartPointer dropped before the end of main.
</code></pre>
<p>T√° an t√©acs <code>Dropping CustomSmartPointer with data `some data`!</code> cl√≥ite
idir an <code>CustomSmartPointer created.</code> agus <code>CustomSmartPointer dropped before the end of main.</code> a thaispe√°nann go dtugtar an c√≥d modha <code>drop</code> ar
titim <code>c</code> ag an bpointe sin.</p>
<p>Is f√©idir leat c√≥d sonraithe i gcur i bhfeidhm tr√©ithe <code>Drop</code> a √∫s√°id ar go leor beala√≠ chun
glantach√°n a dh√©anamh √°isi√∫il agus s√°bh√°ilte: mar shampla, d'fh√©adf√° √© a √∫s√°id chun do chuid f√©in a chruth√∫
leithdh√°ilteoir cuimhne f√©in! Leis an tr√©ith <code>Drop</code> agus c√≥ras √∫in√©ireachta Rust, tusa
n√≠ g√° cuimhneamh ar ghlanadh suas toisc go nd√©anann Rust √© go huathoibr√≠och.</p>
<p>N√≠ g√° freisin a bheith buartha faoi fhadhbanna a eascra√≠onn de thaisme
glanadh suas luachanna at√° f√≥s in √∫s√°id: an c√≥ras √∫in√©ireachta a dh√©anann cinnte
t√° tagairt√≠ bail√≠ i gc√≥na√≠ cinnt√≠onn s√© freisin nach nglaofar <code>drop</code> ach uair amh√°in nuair
n√≠l an luach √° √∫s√°id a thuilleadh.</p>
<p>Anois agus <code>Box&lt;T&gt;</code> agus roinnt de thr√©ithe an chliste scr√∫daithe againn
leideanna, breathna√≠mis ar roinnt leideanna cliste eile at√° sainmh√≠nithe sa chaighde√°n
leabharlann.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="rct-an-pointeoir-cliste-a-chomhairtear-le-tagairt"><a class="header" href="#rct-an-pointeoir-cliste-a-chomhairtear-le-tagairt"><code>Rc&lt;T&gt;</code>, an Pointeoir Cliste a Chomhairtear le Tagairt</a></h2>
<p>I bhformh√≥r na gc√°sanna, t√° √∫in√©ireacht soil√©ir: t√° a fhios agat go d√≠reach c√©n athr√≥g
√∫in√©ireacht luach tugtha. Mar sin f√©in, t√° c√°sanna nuair a d'fh√©adfadh luach amh√°in a bheith
√∫in√©ir√≠ iolracha. Mar shampla, i strucht√∫ir sonra√≠ graf, d'fh√©adfadh imill iolracha
pointe go dt√≠ an n√≥d c√©anna, agus t√° an n√≥d sin faoi √∫in√©ireacht choincheap√∫il ag gach ceann de na himill
an pointe sin d√≥. N√≠or cheart n√≥d a ghlanadh suas mura bhfuil aon cheann ann
imill d√≠rithe air agus mar sin n√≠l aon √∫in√©ir√≠.</p>
<p>Caithfidh t√∫ √∫in√©ireacht iolrach a chumas√∫ go sainr√°ite tr√≠ √∫s√°id a bhaint as an gcine√°l Rust
<code>Rc&lt;T&gt;</code>, ar giorr√∫ch√°n √© le haghaidh comhaireamh <em>tagartha</em>. An cine√°l <code>Rc&lt;T&gt;</code>
coinn√≠onn s√© cuntas ar l√≠on na dtagairt√≠ do luach chun a chinneadh an bhfuil n√≥ nach bhfuil
t√° an luach f√≥s in √∫s√°id. M√° t√° nialas tagairt√≠ do luach, an luach
is f√©idir √© a ghlanadh gan aon tagairt√≠ a bheith neamhbhail√≠.</p>
<p>Samhlaigh <code>Rc&lt;T&gt;</code> mar theilif√≠s i seomra teaghlaigh. Nuair a thagann duine amh√°in isteach chun f√©achaint ar an teilif√≠s,
cuireann siad ar si√∫l √©. Is f√©idir le daoine eile teacht isteach sa seomra agus f√©achaint ar an teilif√≠s. Nuair a bheidh an ceann deireanach
f√°gann duine an seomra, casfaidh siad as an teilif√≠s toisc nach bhfuil s√© in √∫s√°id a thuilleadh.
M√° chasann duine √©igin as an teilif√≠s agus daoine eile f√≥s ag breathn√∫ air, bheadh
uproar √≥ na faireoir√≠ teilif√≠se at√° f√°gtha!</p>
<p>Bainimid √∫s√°id as an gcine√°l <code>Rc&lt;T&gt;</code> nuair is mian linn roinnt sonra√≠ a leithdh√°ileadh ar an gcarn le haghaidh
codanna iomad√∫la d√°r gcl√°r le l√©amh agus n√≠ f√©idir linn a chinneadh ag am tiomsaithe
c√©n chuid a chr√≠ochn√≥idh agus na sonra√≠ √° n-√∫s√°id go deireanach. D√° mbeadh a fhios againn c√©n chuid a chr√≠ochn√≥dh
Ar deireadh, d'fh√©adfaimis an chuid sin a dh√©anamh mar √∫in√©ir na sonra√≠, agus an ghn√°th√∫in√©ireacht
thiocfadh √©ifeacht leis na rialacha a chuirtear i bhfeidhm ag am tiomsaithe.</p>
<p>Tabhair faoi deara nach bhfuil <code>Rc&lt;T&gt;</code> le h√∫s√°id ach i gc√°sanna aon-sn√°ithithe. Nuair a phl√©imid
comhairgeadra i gCaibidil 16, cl√∫d√≥imid conas comhaireamh tagartha a dh√©anamh
cl√°ir ilshn√°ithe.</p>
<h3 id="ag-baint-√∫s√°ide-as-rct-chun-sonra√≠-a-chomhroinnt"><a class="header" href="#ag-baint-√∫s√°ide-as-rct-chun-sonra√≠-a-chomhroinnt">Ag baint √∫s√°ide as <code>Rc&lt;T&gt;</code> chun Sonra√≠ a Chomhroinnt</a></h3>
<p>Fillfimid ar √°r sampla liosta m√≠bhunt√°ist√≠ i Liost√∫ 15-5. Thabhairt chun cuimhne go bhfuil sainmh√≠nithe againn
√© ag baint √∫s√°ide as <code>Box&lt;T&gt;</code>. An uair seo, cruth√≥imid dh√° liosta a roinneann an bheirt acu faoi √∫in√©ireacht
den tr√≠√∫ liosta. Go coincheap√∫il, is cos√∫il √© seo le F√≠or 15-3:</p>
<img alt="Dh√° liosta a roinneann √∫in√©ireacht tr√≠√∫ liosta" src="img/trpl15-03.svg" class="center" />
<p><span class="caption">F√≠or 15-3: Dh√° liosta, <code>b</code> agus <code>c</code>, ag roinnt √∫in√©ireachta ar
an tr√≠√∫ liosta, <code>a</code></span></p>
<p>Cruth√≥imid liosta <code>a</code> ina bhfuil 5 agus ansin 10. Ansin d√©anfaimid dh√° cheann eile
liosta√≠: <code>b</code> a thosa√≠onn le 3 agus <code>c</code> a thosa√≠onn le 4. An d√° <code>b</code> agus <code>c</code>
Leanfaidh liosta√≠ ar aghaidh ansin go dt√≠ an ch√©ad liosta <code>a</code> ina bhfuil 5 agus 10. I gceann eile
focail, roinnfidh an d√° liosta an ch√©ad liosta ina bhfuil 5 agus 10.</p>
<p>Ag iarraidh an c√°s seo a chur i bhfeidhm ag baint √∫s√°ide as √°r sainmh√≠ni√∫ ar <code>List</code> le <code>Box&lt;T&gt;</code>
nach n-oibreoidh s√©, mar a thaispe√°ntar i Liost√∫ 15-17:</p>
<Listing number="15-17" file-name="src/main.rs" caption="Demonstrating we‚Äôre not allowed to have two lists using `Box<T>` that try to share ownership of a third list">
<pre><code class="language-rust ignore does_not_compile">enum List {
    Cons(i32, Box&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};

fn main() {
    let a = Cons(5, Box::new(Cons(10, Box::new(Nil))));
    let b = Cons(3, Box::new(a));
    let c = Cons(4, Box::new(a));
}</code></pre>
</Listing>
<p>Nuair a thiomsaimid an c√≥d seo, faighimid an earr√°id seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling cons-list v0.1.0 (file:///projects/cons-list)
error[E0382]: use of moved value: `a`
  --&gt; src/main.rs:11:30
   |
9  |     let a = Cons(5, Box::new(Cons(10, Box::new(Nil))));
   |         - move occurs because `a` has type `List`, which does not implement the `Copy` trait
10 |     let b = Cons(3, Box::new(a));
   |                              - value moved here
11 |     let c = Cons(4, Box::new(a));
   |                              ^ value used here after move

For more information about this error, try `rustc --explain E0382`.
error: could not compile `cons-list` (bin "cons-list") due to 1 previous error
</code></pre>
<p>Is leis na leaganacha <code>Cons</code> na sonra√≠ at√° ina seilbh, mar sin nuair a chrutha√≠mid an liosta <code>b</code>, <code>a</code>
bogtar isteach i <code>b</code> agus is le <code>b`` a</code>. Ansin, nuair a dh√©anaimid iarracht <code>a</code> a √∫s√°id ar√≠s nuair
ag cruth√∫ <code>c</code>, n√≠l cead againn mar go bhfuil <code>a</code> bogtha.</p>
<p>D'fh√©adfaimis an sainmh√≠ni√∫ ar <code>Cons</code> a athr√∫ chun tagairt√≠ a choinne√°il ina ionad, ach ansin
bheadh ‚Äã‚Äãorainn paraim√©adair saoil a shonr√∫. Tr√≠ shaolr√© a shonr√∫
paraim√©adair, ba mhaith linn a shonr√∫ go mbeidh gach eilimint sa liosta beo ag
ar a laghad chomh fada leis an liosta ioml√°n. Is √© seo an c√°s maidir leis na heilimint√≠ agus na liosta√≠
i Liosta 15-17, ach n√≠ i ngach c√°s.</p>
<p>Ina √°it sin, athr√≥imid √°r sainmh√≠ni√∫ ar <code>List</code> chun <code>Rc&lt;T&gt;</code> a √∫s√°id ina ionad
<code>Box&lt;T&gt;</code>, mar a thaispe√°ntar i Liosta 15-18. Beidh luach ag gach leagan <code>Cons</code> anois
agus <code>Rc&lt;T&gt;</code> ag tagairt do <code>List</code>. Nuair a chrutha√≠mid <code>b</code>, in ionad a ghlacadh
√∫in√©ireacht <code>a</code>, cl√≥n√°lfaimid an <code>Rc&lt;List&gt;</code> at√° √° choime√°d ag <code>a</code>, mar sin
l√≠on na dtagairt√≠ a mh√©ad√∫ √≥ dhuine amh√°in go dt√≠ dh√° agus ligean do <code>a</code> agus <code>b</code>
comh√∫in√©ireacht na sonra√≠ sa <code>Rc&lt;List&gt;</code> sin. Cl√≥nfaimid <code>a</code> freisin nuair
ag cruth√∫ <code>c</code>, ag m√©ad√∫ l√≠on na dtagairt√≠ √≥ dh√≥ go dt√≠ tr√≠. Gach uair
tugaimid <code>Rc::clone</code>, beidh an comhaireamh tagartha do na sonra√≠ laistigh den <code>Rc&lt;List&gt;</code>
m√©ad√∫, agus n√≠ dh√©anfar na sonra√≠ a ghlanadh mura bhfuil tagairt√≠ nialasacha ann
√©.</p>
<Listing number="15-18" file-name="src/main.rs" caption="A definition of `List` that uses `Rc<T>`">
<pre><pre class="playground"><code class="language-rust">enum List {
    Cons(i32, Rc&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};
use std::rc::Rc;

fn main() {
    let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));
    let b = Cons(3, Rc::clone(&amp;a));
    let c = Cons(4, Rc::clone(&amp;a));
}</code></pre></pre>
</Listing>
<p>N√≠ m√≥r d√∫inn r√°iteas <code>use</code> a chur leis chun <code>Rc&lt;T&gt;</code> a thabhairt isteach sa sc√≥ip toisc nach bhfuil
sa r√©amhr√°. I <code>main</code>, crutha√≠mid an liosta ina bhfuil 5 agus 10 agus st√≥r√°ilimid √©
<code>Rc&lt;List&gt;</code> nua in <code>a</code>. Ansin nuair a chrutha√≠mid <code>b</code> agus <code>c</code>, tugaimid an
Feidhm <code>Rc::clone</code> agus cuir tagairt don <code>Rc&lt;List&gt;</code> in <code>a</code> mar
arg√≥int.</p>
<p>D‚Äôfh√©adfaimis ‚Äòa.clone()‚Äô a bheith tugtha air seachas ‚ÄòRc::clone(&amp;a)‚Äô, ach Rust‚Äôs
Is √© an coinbhinsi√∫n <code>Rc::clone</code> a √∫s√°id sa ch√°s seo. Cur i bhfeidhm na
N√≠ dh√©anann <code>Rc::clone</code> c√≥ip dhomhain de na sonra√≠ go l√©ir cos√∫il le formh√≥r na gcine√°lacha'
feidhmithe <code>clone</code> a dh√©anamh. N√≠ dh√©anann an glao chuig <code>Rc::clone</code> ach incrimint√≠ an
comhaireamh tagartha, rud nach dt√≥gann m√≥r√°n ama. Is f√©idir le c√≥ipeanna domhain de shonra√≠ a
go leor ama. Tr√≠ √∫s√°id a bhaint as <code>Rc::clone</code> le haghaidh comhaireamh tagartha, is f√©idir linn √≥ thaobh amhairc de
idirdheal√∫ a dh√©anamh idir na cine√°lacha c√≥ip domhain de Chluain Eois agus na cine√°lacha Chluain Eois a
an l√≠on tagartha a mh√©ad√∫. Nuair a lorg fadhbanna feidhm√≠ochta sa
ch√≥d, n√≠ g√° d√∫inn ach machnamh a dh√©anamh ar na cl√≥in dhomhainch√≥ipe agus is f√©idir neamhaird a dh√©anamh ar ghlaonna chuig
<code>Rc::clone</code>.</p>
<h3 id="m√©ada√≠onn-cl√≥n√°il-an-rct-an-l√≠on-tagartha"><a class="header" href="#m√©ada√≠onn-cl√≥n√°il-an-rct-an-l√≠on-tagartha">M√©ada√≠onn Cl√≥n√°il an <code>Rc&lt;T&gt;</code> an ‚Äã‚ÄãL√≠on Tagartha</a></h3>
<p>Athra√≠mis √°r sampla oibre i Liost√∫ 15-18 ionas gur f√©idir linn an tagairt a fheice√°il
athra√≠tear an comhaireamh de r√©ir mar a chrutha√≠mid agus a scaoiltear tagairt√≠ don <code>Rc&lt;List&gt;</code> in <code>a</code>.</p>
<p>I Liost√∫ 15-19, athr√≥imid <code>main</code> ionas go mbeidh sc√≥ip istigh aige thart ar an liosta <code>c</code>;
ansin is f√©idir linn a fheice√°il conas a athra√≠onn an comhaireamh tagartha nuair a th√©ann <code>c</code> as raon feidhme.</p>
<Listing number="15-19" file-name="src/main.rs" caption="Printing the reference count">
<pre><pre class="playground"><code class="language-rust"><span class="boring">enum List {
</span><span class="boring">    Cons(i32, Rc&lt;List&gt;),
</span><span class="boring">    Nil,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">use crate::List::{Cons, Nil};
</span><span class="boring">use std::rc::Rc;
</span><span class="boring">
</span>fn main() {
    let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));
    println!("count after creating a = {}", Rc::strong_count(&amp;a));
    let b = Cons(3, Rc::clone(&amp;a));
    println!("count after creating b = {}", Rc::strong_count(&amp;a));
    {
        let c = Cons(4, Rc::clone(&amp;a));
        println!("count after creating c = {}", Rc::strong_count(&amp;a));
    }
    println!("count after c goes out of scope = {}", Rc::strong_count(&amp;a));
}</code></pre></pre>
</Listing>
<p>Ag gach pointe den chl√°r ina n-athra√≠onn an comhaireamh tagartha, priont√°laimid an
comhaireamh tagartha, a fhaighimid ach glaoch ar an bhfeidhm <code>Rc::strong_count</code>. seo
tugtar <code>strong_count</code> ar an bhfeidhm seachas <code>count</code> mar go bhfuil an cine√°l <code>Rc&lt;T&gt;</code>
freisin t√° <code>count_lag</code>; Feicfimid c√©n √∫s√°id a bhaintear as <code>count_lag</code> sa
[‚ÄúTimthriallta Tagartha a Chosc: Ag iomp√∫ <code>Rc&lt;T&gt;</code> ina a
<code>lag&lt;T&gt;</code>‚Äù][cosc-ref-timthriallta] <!-- neamhaird a dh√©anamh ar --> alt.</p>
<p>Priont√°lann an c√≥d seo iad seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling cons-list v0.1.0 (file:///projects/cons-list)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.45s
     Running `target/debug/cons-list`
count after creating a = 1
count after creating b = 2
count after creating c = 3
count after c goes out of scope = 2
</code></pre>
<p>Feicimid go bhfuil comhaireamh tagartha tosaigh 1 ag an <code>Rc&lt;List&gt;</code> in <code>a</code>; ansin
gach uair a thugaimid <code>clone</code>, arda√≠onn an comhaireamh faoi 1. Nuair a th√©ann <code>c</code> as an sc√≥ip,
t√©ann an comhaireamh s√≠os faoi 1. N√≠ g√° d√∫inn feidhm a ghlaoch chun laghd√∫ a dh√©anamh ar an
comhaireamh tagartha mar n√≠ m√≥r d√∫inn <code>Rc::clone</code> a ghlaoch chun an tagairt a mh√©ad√∫
comhaireamh: laghda√≠tear an comhaireamh tagartha le cur i bhfeidhm na tr√©ithe <code>Buail</code>
go huathoibr√≠och nuair a th√©ann luach <code>Rc&lt;T&gt;</code> as raon feidhme.</p>
<p>Is √© an rud nach f√©idir linn a fheice√°il sa sampla seo n√° nuair a th√©ann <code>b</code> agus ansin <code>a</code> as raon feidhme
ag deireadh <code>main</code>, is √© an comhaireamh ansin 0, agus an <code>Rc&lt;List&gt;</code> glanta suas
go hioml√°n. Tr√≠ √∫s√°id a bhaint as <code>Rc&lt;T&gt;</code> is f√©idir il-√∫in√©ir√≠ a bheith ag luach amh√°in, agus
cinnt√≠onn an comhaireamh go bhfanann an luach bail√≠ chomh fada le haon cheann de na h√∫in√©ir√≠
f√≥s ann.</p>
<p>Tr√≠ thagairt√≠ domhalartaithe, ligeann <code>Rc&lt;T&gt;</code> duit sonra√≠ a roinnt idir iolra√≠
codanna de do chl√°r le l√©amh amh√°in. M√° cheadaigh <code>Rc&lt;T&gt;</code> duit iolra a bheith agat
tagairt√≠ mutable freisin, d'fh√©adf√° s√°r√∫ a dh√©anamh ar cheann de na rialacha iasachtaithe a pl√©adh
i gCaibidil 4: is f√©idir le hiasachta√≠ mutable iolracha go dt√≠ an √°it ch√©anna a bheith ina ch√∫is le r√°sa√≠ sonra√≠
agus neamhr√©ireachta√≠. Ach t√° s√© an-√∫s√°ideach a bheith in ann sonra√≠ a mutadh! Sa ch√©ad cheann eile
alt seo, pl√©ifimid an patr√∫n s√≥cmhainneachta int√≠ agus an <code>RefCell&lt;T&gt;</code>
cl√≥scr√≠obh gur f√©idir leat a √∫s√°id in √©ineacht le <code>Rc&lt;T&gt;</code> chun oibri√∫ leis seo
srian immutability.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="refcellt-agus-an-patr√∫n-um-sh√≥cmhainneacht-int√≠"><a class="header" href="#refcellt-agus-an-patr√∫n-um-sh√≥cmhainneacht-int√≠"><code>RefCell&lt;T&gt;</code> agus an Patr√∫n um Sh√≥cmhainneacht Int√≠</a></h2>
<p>Is patr√∫n deartha √© <em>Interior mutability</em> i Rust a ligeann duit s√≥ch√°n a dh√©anamh
sonra√≠ fi√∫ nuair a bh√≠onn tagairt√≠ do-chomhth√°thaithe ann do na sonra√≠ sin; de ghn√°th, seo
d√≠cheada√≠tear gn√≠omha√≠ocht leis na rialacha iasachtaithe. Chun sonra√≠ a mutate, √∫s√°ideann an patr√∫n
c√≥d <code>unsafe</code> taobh istigh de strucht√∫r sonra√≠ chun gn√°thrialacha Rust a riala√≠onn a l√∫badh
s√≥ch√°n agus iasacht. Cuireann c√≥d neamhsh√°bh√°ilte in i√∫l don tiomsaitheoir go bhfuilimid
na rialacha a sheice√°il de l√°imh seachas a bheith ag brath ar an tiomsaitheoir chun iad a sheice√°il
d√∫inne; d√©anfaimid tuilleadh pl√© ar ch√≥d neamhsh√°bh√°ilte i gCaibidil 20.</p>
<p>N√≠ f√©idir linn cine√°lacha a √∫s√°id a √∫s√°ideann an patr√∫n s√≥cmhainneachta taobh istigh ach amh√°in nuair is f√©idir linn
a √°irithi√∫ go leanfar na rialacha iasachta√≠ochta ag am rite, c√© go bhfuil an
n√≠ f√©idir leis an tiomsaitheoir √© sin a r√°th√∫. T√° an c√≥d <code>unsafe</code> at√° i gceist fillte ansin i a
API s√°bh√°ilte, agus t√° an cine√°l seachtrach f√≥s immutable.</p>
<p>D√©anaimis an coincheap seo a ini√∫chadh tr√≠ bhreathn√∫ ar an gcine√°l <code>RefCell&lt;T&gt;</code> a leanann an
patr√∫n muability istigh.</p>
<h3 id="rialacha-iasachta-a-fhorfheidhmi√∫-ag-am-rite-le-refcellt"><a class="header" href="#rialacha-iasachta-a-fhorfheidhmi√∫-ag-am-rite-le-refcellt">Rialacha Iasachta a Fhorfheidhmi√∫ ag Am Rite le <code>RefCell&lt;T&gt;</code></a></h3>
<p>Murab ionann agus <code>Rc&lt;T&gt;</code>, is ionann an cine√°l <code>RefCell&lt;T&gt;</code> agus √∫in√©ireacht aonair ar na sonra√≠
coinn√≠onn s√©. Mar sin, cad a dh√©anann difr√≠ocht idir <code>RefCell&lt;T&gt;</code> agus cine√°l mar <code>Box&lt;T&gt;</code>?
Tabhair chun cuimhne na rialacha iasachtaithe a d‚Äôfhoghlaim t√∫ i gCaibidil 4:</p>
<ul>
<li>Ag aon am ar leith, f√©adfaidh t√∫ <em>either</em> (ach n√≠ an d√° cheann) tagairt sho-sh√≥ite amh√°in a bheith agat
n√≥ l√≠on ar bith tagairt√≠ do-inaistrithe.</li>
<li>Caithfidh teistim√©ireachta√≠ a bheith bail√≠ i gc√≥na√≠.</li>
</ul>
<p>Le tagairt√≠ agus <code>Box&lt;T&gt;</code>, cuirtear malairt√≠ na rialacha iasachta√≠ochta i bhfeidhm ag
am tiomsaithe. Le <code>RefCell&lt;T&gt;</code>, cuirtear na hathr√≥ga seo i bhfeidhm <em>ag am rite</em>.
Le tagairt√≠, m√° sh√°ra√≠onn t√∫ na rialacha seo, gheobhaidh t√∫ earr√°id tiomsaithe. Le
<code>RefCell&lt;T&gt;</code>, m√° sh√°ra√≠onn t√∫ na rialacha seo, beidh do chl√°r i scaoll agus scoirfidh t√∫.</p>
<p>Is iad na bunt√°ist√≠ a bhaineann le seice√°il na rialacha iasachtaithe ag am tiomsaithe n√° earr√°id√≠
a ghabh√°il n√≠os luaithe sa phr√≥iseas forbartha, agus n√≠l aon tionchar ar
feidhm√≠ocht runtime toisc go bhfuil an anail√≠s ar fad cr√≠ochnaithe roimh r√©. D√≥ibh si√∫d
c√∫iseanna, is √© seice√°il na rialacha iasachtaithe ag am tiomsaithe an rogha is fearr sa
formh√≥r na gc√°sanna, agus sin an f√°th gurb √© seo r√©amhshocr√∫ Rust.</p>
<p>Is √© an bunt√°iste a bhaineann leis na rialacha iasachtaithe a sheice√°il ag am rite ina ionad sin
ceada√≠tear c√°sanna √°irithe cuimhne-s√°bh√°ilte ansin, √°it a mbeid√≠s
d√≠cheadaithe ag na seice√°lacha ama tiomsaithe. Anail√≠s statach, cos√∫il leis an tiomsaitheoir Rust,
coime√°dach √≥ dh√∫chas √©. T√° roinnt air√≠onna de ch√≥d dodh√©anta a bhrath tr√≠
ag d√©anamh anail√≠s ar an gc√≥d: is √© an sampla is c√°ili√∫la n√° an Fadhb Stad, mar at√°
thar raon feidhme an leabhair seo ach is √°bhar sp√©isi√∫il √© le taighde a dh√©anamh air.</p>
<p>Toisc go bhfuil roinnt anail√≠se dodh√©anta, m√°s rud √© nach f√©idir leis an tiomsaitheoir Rust a bheith cinnte an
Comhl√≠onann c√≥d na rialacha √∫in√©ireachta, d'fh√©adfadh s√© di√∫lt√∫ do chl√°r ceart; isteach
ar an mbealach seo, t√° s√© coime√°dach. M√° ghlac Rust le cl√°r m√≠cheart, √∫s√°ideoir√≠
n√≠ bheadh ‚Äã‚Äãmuin√≠n agat as na r√°tha√≠ochta√≠ a thugann Rust. Mar sin f√©in, m√° Rust
ndi√∫lt√≥idh cl√°r ceart, beidh an r√≠omhchl√°raitheoir m√≠chaoithi√∫lacht, ach rud ar bith
is f√©idir tubaisteach tarl√∫. T√° an cine√°l <code>RefCell&lt;T&gt;</code> √∫s√°ideach nuair at√° t√∫ cinnte go bhfuil do
Leanann an c√≥d na rialacha iasachtaithe ach n√≠l an tiomsaitheoir in ann a thuiscint agus
r√°tha√≠ocht go.</p>
<p>Cos√∫il le <code>Rc&lt;T&gt;</code>, t√° <code>RefCell&lt;T&gt;</code> le h√∫s√°id i gc√°sanna aon-sn√°ithe amh√°in
agus tabharfaidh s√© earr√°id ama tiomsaithe duit m√° dh√©anann t√∫ iarracht √© a √∫s√°id i sn√°ithe ilshn√°ithe
comhth√©acs. Labhr√≥imid faoi conas feidhmi√∫lacht <code>RefCell&lt;T&gt;</code> a fh√°il in a
cl√°r ilshn√°ithe i gCaibidil 16.</p>
<p>Seo achoimre ar na f√°thanna le <code>Box&lt;T&gt;</code>, <code>Rc&lt;T&gt;</code>, n√≥ <code>RefCell&lt;T&gt;</code> a roghn√∫:</p>
<ul>
<li>Cuireann <code>Rc&lt;T&gt;</code> ar chumas √∫in√©ir√≠ iolracha na sonra√≠ c√©anna; <code>Box&lt;T&gt;</code> agus <code>RefCell&lt;T&gt;</code>
√∫in√©ir√≠ aonair a bheith acu.</li>
<li>Ceada√≠onn <code>Box&lt;T&gt;</code> iasachta√≠ domhalartaithe n√≥ s√≥-aistrithe a sheice√°il ag am tiomsaithe; <code>Rc&lt;T&gt;</code>
n√≠ cheada√≠onn s√© ach iasachta√≠ domhalartaithe a sheice√°il ag am tiomsaithe; Ceada√≠onn <code>RefCell&lt;T&gt;</code>
iasachta√≠ domhalartaithe n√≥ s√≥-aistrithe arna seice√°il ag am rite.</li>
<li>Toisc go gceada√≠onn <code>RefCell&lt;T&gt;</code> iasachta√≠ s√≥-aistrithe a sheice√°il ag am rite, is f√©idir leat
mutnaigh an luach taobh istigh den <code>RefCell&lt;T&gt;</code> fi√∫ nuair at√° an <code>RefCell&lt;T&gt;</code>
dochorraithe.</li>
</ul>
<p>Ag s√≥ch√°n an luach taobh istigh de luach neamh-inmhalartaithe t√° an <em>s√≥-sh√≥cmhainneacht</em>
patr√∫n. Breathna√≠mid ar ch√°s ina bhfuil s√≥cmhainneacht istigh √∫s√°ideach agus
scr√∫d√∫ conas is f√©idir.</p>
<h3 id="ins√≥-sh√≥cmhainneacht-iasacht-in-chomhsh√≥ite-go-luach-neamh-chomhargadh"><a class="header" href="#ins√≥-sh√≥cmhainneacht-iasacht-in-chomhsh√≥ite-go-luach-neamh-chomhargadh">Ins√≥-sh√≥cmhainneacht: Iasacht In-chomhsh√≥ite go Luach Neamh-Chomhargadh</a></h3>
<p>Iarmhairt ar na rialacha iasachta√≠ochta is ea nuair a bh√≠onn luach neamh-inmharthana agat, i.e.
n√≠ f√©idir leat √© a fh√°il ar iasacht go frithph√°irteach. Mar shampla, n√≠ thioms√≥idh an c√≥d seo:</p>
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let x = 5;
    let y = &amp;mut x;
}</code></pre>
<p>D√° nd√©anfadh t√∫ iarracht an c√≥d seo a thioms√∫, gheobhf√° an earr√°id seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling borrowing v0.1.0 (file:///projects/borrowing)
error[E0596]: cannot borrow `x` as mutable, as it is not declared as mutable
 --&gt; src/main.rs:3:13
  |
3 |     let y = &amp;mut x;
  |             ^^^^^^ cannot borrow as mutable
  |
help: consider changing this to be mutable
  |
2 |     let mut x = 5;
  |         +++

For more information about this error, try `rustc --explain E0596`.
error: could not compile `borrowing` (bin "borrowing") due to 1 previous error
</code></pre>
<p>Mar sin f√©in, t√° c√°sanna ann ina mbeadh s√© √∫s√°ideach luach a athr√∫
√© f√©in ina mhodhanna ach is cos√∫il go bhfuil s√© neamh-inchurtha le c√≥d eile. C√≥d lasmuigh den
n√≠ bheadh ‚Äã‚Äãmodhanna luacha in ann an luach a athr√∫. Ag baint √∫s√°ide as <code>RefCell&lt;T&gt;</code> is
bealach amh√°in chun an cumas s√≥cmhainneachta taobh istigh a fh√°il, ach <code>RefCell&lt;T&gt;</code>
n√≠ th√©ann s√© thart ar na rialacha iasachtaithe go hioml√°n: an seice√°la√≠ iasachta√≠ sa
Ceada√≠onn tiomsaitheoir seo s√≥cmhainneacht istigh, agus na rialacha iasacht a sheice√°il
ag am rite ina ionad. M√° sh√°ra√≠onn t√∫ na rialacha, gheobhaidh t√∫ <code>panic!</code> ina ionad
earr√°id tiomsaitheora.</p>
<p>Oibr√≠mid tr√≠ shampla praitici√∫il inar f√©idir linn <code>RefCell&lt;T&gt;</code> a √∫s√°id chun mutate
luach domhalartaithe agus f√©ach c√©n f√°th a bhfuil s√© sin √∫s√°ideach.</p>
<h4 id="c√°s-√ös√°ide-le-haghaidh-inmhe√°nach-mutability-r√©ada-br√©ige"><a class="header" href="#c√°s-√ös√°ide-le-haghaidh-inmhe√°nach-mutability-r√©ada-br√©ige">C√°s √ös√°ide le haghaidh Inmhe√°nach Mutability: R√©ada Br√©ige</a></h4>
<p>Uaireanta le linn t√°st√°la √∫s√°idfidh r√≠omhchl√°raitheoir cine√°l in ionad cine√°l eile,
chun iompar ar leith a urram√∫ agus a dhearbh√∫ go bhfuil s√© curtha i bhfeidhm i gceart.
Tugtar <em>t√°st√°il d√∫bailte</em> ar an gcine√°l seo coinne√°la√≠. Smaoinigh air sa chiall a
‚Äústunt d√∫bailte‚Äù i nd√©anamh scann√°n, nuair a ch√©im√≠onn duine isteach agus ina ionada√≠
aisteoir radharc tricky ar leith a dh√©anamh. Seasann d√∫bailteanna t√°st√°la do chine√°lacha eile
nuair at√° t√°st√°lacha √° rith againn. Is cine√°lacha saini√∫la d√∫bailte t√°st√°la iad <em>Mock objects</em>
a thaifeadann cad a tharla√≠onn le linn t√°st√°la ionas gur f√©idir leat a dhearbh√∫ go bhfuil an ceart
gn√≠omhartha ar si√∫l.</p>
<p>N√≠l r√©ada ag meirge sa chiall ch√©anna is at√° r√©ada ag teangacha eile,
agus n√≠l feidhmi√∫lacht r√©ad br√©ige ag Rust ionsuite sa ghn√°thleabharlann
mar a dh√©anann roinnt teangacha eile. Mar sin f√©in, is f√©idir leat a chruth√∫ cinnte strucht√∫r sin
f√≥nfaidh na cr√≠ocha c√©anna le r√©ad br√©ige.</p>
<p>Seo an c√°s a dh√©anfaimid t√°st√°il: cruth√≥imid leabharlann a rian√≥idh luach
in aghaidh uasluacha agus seolann s√© teachtaireachta√≠ bunaithe ar c√© chomh gar don uasluach
luach at√° ar an luach reatha. D‚Äôfh√©adfa√≠ an leabharlann seo a √∫s√°id chun s√∫il a choinne√°il ar a
cu√≥ta √∫s√°ideora don l√≠on glaonna API a bhfuil cead acu a dh√©anamh, mar shampla.</p>
<p>N√≠ chuirfidh √°r leabharlann ar f√°il ach an fheidhmi√∫lacht chun rian√∫ a dh√©anamh ar c√© chomh gar do na
is √© luach uasta agus cad ba cheart do na teachtaireachta√≠ a bheith ag na hamanna. Feidhmchl√°ir
beifear ag s√∫il go sol√°thr√≥idh √∫s√°id √°r leabharlann an mheicn√≠ocht chun an
teachtaireachta√≠: d'fh√©adfadh an t-iarratas teachtaireacht a chur san iarratas, seol
r√≠omhphost, seol teachtaireacht t√©acs, n√≥ rud √©igin eile. N√≠ g√° go mbeadh a fhios ag an leabharlann
go mion. N√≠l ag teast√°il uaidh ach rud a chuireann tr√©ith a chuirfimid ar f√°il i bhfeidhm
ar a dtugtar <code>Messenger</code>. L√©ir√≠onn liost√∫ 15-20 an c√≥d leabharlainne:</p>
<Listing number="15-20" file-name="src/lib.rs" caption="A library to keep track of how close a value is to a maximum value and warn when the value is at certain levels">
<pre><code class="language-rust noplayground">pub trait Messenger {
    fn send(&amp;self, msg: &amp;str);
}

pub struct LimitTracker&lt;'a, T: Messenger&gt; {
    messenger: &amp;'a T,
    value: usize,
    max: usize,
}

impl&lt;'a, T&gt; LimitTracker&lt;'a, T&gt;
where
    T: Messenger,
{
    pub fn new(messenger: &amp;'a T, max: usize) -&gt; LimitTracker&lt;'a, T&gt; {
        LimitTracker {
            messenger,
            value: 0,
            max,
        }
    }

    pub fn set_value(&amp;mut self, value: usize) {
        self.value = value;

        let percentage_of_max = self.value as f64 / self.max as f64;

        if percentage_of_max &gt;= 1.0 {
            self.messenger.send("Error: You are over your quota!");
        } else if percentage_of_max &gt;= 0.9 {
            self.messenger
                .send("Urgent warning: You've used up over 90% of your quota!");
        } else if percentage_of_max &gt;= 0.75 {
            self.messenger
                .send("Warning: You've used up over 75% of your quota!");
        }
    }
}</code></pre>
</Listing>
<p>Cuid th√°bhachtach amh√°in den ch√≥d seo n√° go bhfuil modh amh√°in ag an trait <code>Messenger</code>
ar a dtugtar <code>send</code> a th√≥gann tagairt do- immutable do <code>self</code> agus t√©acs an
teachtaireacht. Is √© an tr√©ith seo an comh√©adan a chaithfidh √°r r√©ad br√©ige a chur i bhfeidhm ionas go mbeidh
is f√©idir an bhr√©ag a √∫s√°id ar an mbealach c√©anna le r√©ad r√©ad√∫il. An chuid th√°bhachtach eile
is √© sin go dteasta√≠onn uainn iompar an mhodha <code>set_value</code> a th√°st√°il ar an
<code>LimitTracker</code>. Is f√©idir linn an m√©id a thugaimid isteach don pharaim√©adar <code>value</code> a athr√∫, ach
n√≠ thugann <code>set_value</code> tada ar ais d√∫inn chun dearbhuithe a dh√©anamh air. Ba mhaith linn a bheith
in ann a r√° m√° chrutha√≠mid <code>LimitTracker</code> le rud √©igin a chuireann i bhfeidhm
an tr√©ithe <code>Messenger</code> agus luach ar leith do <code>max</code>, nuair a th√©imid ar aghaidh difri√∫il
uimhreacha le haghaidh <code>value</code>, deirtear leis an teachtaire na teachtaireachta√≠ cu√≠ a sheoladh.</p>
<p>N√≠ m√≥r d√∫inn r√©ad br√©ige a, in ionad a sheoladh r-phost n√≥ teachtaireacht t√©acs nuair a againn
glaoigh ar <code>send</code>, n√≠ choinneoidh s√© ach s√∫il ar na teachtaireachta√≠ a iarrtar air a sheoladh. Is f√©idir linn
cruthaigh sampla nua den r√©ad br√©ige, cruthaigh <code>LimitTracker</code> a √∫s√°ideann an
r√©ad br√©ige, cuir glaoch ar an modh <code>set_value</code> ar <code>LimitTracker</code>, agus ansin seice√°il √© sin
t√° na teachtaireachta√≠ a mbeimid ag s√∫il leo ag an r√©ad br√©ige. L√©ir√≠onn liost√∫ 15-21 iarracht chun
cuir r√©ad br√©ige i bhfeidhm chun √© sin a dh√©anamh, ach n√≠ chead√≥idh an seice√°la√≠ iasachta√≠ √©:</p>
<Listing number="15-21" file-name="src/lib.rs" caption="An attempt to implement a `MockMessenger` that isn‚Äôt allowed by the borrow checker">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">pub trait Messenger {
</span><span class="boring">    fn send(&amp;self, msg: &amp;str);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct LimitTracker&lt;'a, T: Messenger&gt; {
</span><span class="boring">    messenger: &amp;'a T,
</span><span class="boring">    value: usize,
</span><span class="boring">    max: usize,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl&lt;'a, T&gt; LimitTracker&lt;'a, T&gt;
</span><span class="boring">where
</span><span class="boring">    T: Messenger,
</span><span class="boring">{
</span><span class="boring">    pub fn new(messenger: &amp;'a T, max: usize) -&gt; LimitTracker&lt;'a, T&gt; {
</span><span class="boring">        LimitTracker {
</span><span class="boring">            messenger,
</span><span class="boring">            value: 0,
</span><span class="boring">            max,
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn set_value(&amp;mut self, value: usize) {
</span><span class="boring">        self.value = value;
</span><span class="boring">
</span><span class="boring">        let percentage_of_max = self.value as f64 / self.max as f64;
</span><span class="boring">
</span><span class="boring">        if percentage_of_max &gt;= 1.0 {
</span><span class="boring">            self.messenger.send("Error: You are over your quota!");
</span><span class="boring">        } else if percentage_of_max &gt;= 0.9 {
</span><span class="boring">            self.messenger
</span><span class="boring">                .send("Urgent warning: You've used up over 90% of your quota!");
</span><span class="boring">        } else if percentage_of_max &gt;= 0.75 {
</span><span class="boring">            self.messenger
</span><span class="boring">                .send("Warning: You've used up over 75% of your quota!");
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;

    struct MockMessenger {
        sent_messages: Vec&lt;String&gt;,
    }

    impl MockMessenger {
        fn new() -&gt; MockMessenger {
            MockMessenger {
                sent_messages: vec![],
            }
        }
    }

    impl Messenger for MockMessenger {
        fn send(&amp;self, message: &amp;str) {
            self.sent_messages.push(String::from(message));
        }
    }

    #[test]
    fn it_sends_an_over_75_percent_warning_message() {
        let mock_messenger = MockMessenger::new();
        let mut limit_tracker = LimitTracker::new(&amp;mock_messenger, 100);

        limit_tracker.set_value(80);

        assert_eq!(mock_messenger.sent_messages.len(), 1);
    }
}</code></pre>
</Listing>
<p>Sainmh√≠n√≠onn an c√≥d t√°st√°la seo strucht√∫r <code>MockMessenger</code> a bhfuil <code>sent_messages</code> aige
r√©imse le <code>Vec</code> de luachanna <code>String</code> chun s√∫il a choinne√°il ar na teachtaireachta√≠ a ins√≠tear d√≥
a sheoladh. Sainmh√≠n√≠mid freisin feidhm ghaolmhar <code>new</code> le go mbeidh s√© √°isi√∫il di
cruthaigh luachanna <code>MockMessenger</code> nua a thosa√≠onn le liosta folamh teachtaireachta√≠. muid
ansin cuir an trait <code>Messenger</code> i bhfeidhm do <code>MockMessenger</code> ionas gur f√©idir linn a
<code>MockMessenger</code> go <code>LimitTracker</code>. Sa sainmh√≠ni√∫ ar an modh <code>send</code>, t√°imid
t√≥g an teachtaireacht a tugadh isteach mar pharaim√©adar agus st√≥r√°il sa <code>MockMessenger</code> √≠
liosta de na <code>sent_messages</code>.</p>
<p>Sa t√°st√°il, t√°imid ag t√°st√°il cad a tharla√≠onn nuair a iarrtar ar an <code>LimitTracker</code> a shocr√∫
<code>value</code> go dt√≠ rud at√° n√≠os m√≥ n√° 75 faoin gc√©ad den luach <code>max</code>. Gc√©ad dul s√≠os, muid
cruthaigh <code>MockMessenger</code> nua, a thos√≥idh le liosta folamh teachtaireachta√≠.
Ansin crutha√≠mid <code>LimitTracker</code> nua agus d√©anaimid tagairt don nua
<code>MockMessenger</code> agus luach <code>max</code> de 100. Glaoimid ar an modh <code>set_value</code> ar an
<code>LimitTracker</code> le luach 80, at√° n√≠os m√≥ n√° 75 faoin gc√©ad de 100. Ansin
dearbha√≠mid go bhfuil liosta na dteachtaireachta√≠ at√° √° gcoime√°d ag an <code>MockMessenger</code>
de anois teachtaireacht amh√°in a bheith ann.</p>
<p>Mar sin f√©in, t√° fadhb amh√°in leis an t√°st√°il seo, mar a thaispe√°ntar anseo:</p>
<pre><code class="language-cons√≥l">$ cargo test
   Compiling limit-tracker v0.1.0 (file:///projects/limit-tracker)
error[E0596]: cannot borrow `self.sent_messages` as mutable, as it is behind a `&amp;` reference
  --&gt; src/lib.rs:58:13
   |
58 |             self.sent_messages.push(String::from(message));
   |             ^^^^^^^^^^^^^^^^^^ `self` is a `&amp;` reference, so the data it refers to cannot be borrowed as mutable
   |
help: consider changing this to be a mutable reference in the `impl` method and the `trait` definition
   |
2  ~     fn send(&amp;mut self, msg: &amp;str);
3  | }
...
56 |     impl Messenger for MockMessenger {
57 ~         fn send(&amp;mut self, message: &amp;str) {
   |

For more information about this error, try `rustc --explain E0596`.
error: could not compile `limit-tracker` (lib test) due to 1 previous error
</code></pre>
<p>N√≠ f√©idir linn an <code>MockMessenger</code> a mhodhn√∫ chun s√∫il a choinne√°il ar na teachtaireachta√≠, toisc go bhfuil an
tagra√≠onn modh <code>send</code> do <code>self</code>. N√≠ f√©idir linn a ghlacadh freisin
moladh √≥n t√©acs earr√°ide <code>&amp;mut self</code> a √∫s√°id sa mhodh <code>impl</code> agus
an sainmh√≠ni√∫ <code>trait</code>. N√≠limid ag iarraidh an trait <code>Messenger</code> a athr√∫ amh√°in
ar mhaithe le t√°st√°il. Ina √°it sin, n√≠ m√≥r d√∫inn bealach a aimsi√∫ chun √°r gc√≥d t√°st√°la a dh√©anamh
oibri√∫ i gceart len√°r ndearadh reatha.</p>
<p>Is √© seo an c√°s inar f√©idir le s√≥cmhainneacht taobh istigh cabhr√∫! St√≥r√°lfaimid an
<code>sent_messages</code> laistigh de <code>RefCell&lt;T&gt;</code>, agus ansin beidh an modh <code>send</code>
in ann <code>sent_messages</code> a mhodhn√∫ chun na teachtaireachta√≠ at√° feicthe againn a st√≥r√°il. Liost√°il 15-22
l√©ir√≠onn an chuma at√° air sin:</p>
<Listing number="15-22" file-name="src/lib.rs" caption="Using `RefCell<T>` to mutate an inner value while the outer value is considered immutable">
<pre><code class="language-rust noplayground"><span class="boring">pub trait Messenger {
</span><span class="boring">    fn send(&amp;self, msg: &amp;str);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct LimitTracker&lt;'a, T: Messenger&gt; {
</span><span class="boring">    messenger: &amp;'a T,
</span><span class="boring">    value: usize,
</span><span class="boring">    max: usize,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl&lt;'a, T&gt; LimitTracker&lt;'a, T&gt;
</span><span class="boring">where
</span><span class="boring">    T: Messenger,
</span><span class="boring">{
</span><span class="boring">    pub fn new(messenger: &amp;'a T, max: usize) -&gt; LimitTracker&lt;'a, T&gt; {
</span><span class="boring">        LimitTracker {
</span><span class="boring">            messenger,
</span><span class="boring">            value: 0,
</span><span class="boring">            max,
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn set_value(&amp;mut self, value: usize) {
</span><span class="boring">        self.value = value;
</span><span class="boring">
</span><span class="boring">        let percentage_of_max = self.value as f64 / self.max as f64;
</span><span class="boring">
</span><span class="boring">        if percentage_of_max &gt;= 1.0 {
</span><span class="boring">            self.messenger.send("Error: You are over your quota!");
</span><span class="boring">        } else if percentage_of_max &gt;= 0.9 {
</span><span class="boring">            self.messenger
</span><span class="boring">                .send("Urgent warning: You've used up over 90% of your quota!");
</span><span class="boring">        } else if percentage_of_max &gt;= 0.75 {
</span><span class="boring">            self.messenger
</span><span class="boring">                .send("Warning: You've used up over 75% of your quota!");
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>#[cfg(test)]
mod tests {
    use super::*;
    use std::cell::RefCell;

    struct MockMessenger {
        sent_messages: RefCell&lt;Vec&lt;String&gt;&gt;,
    }

    impl MockMessenger {
        fn new() -&gt; MockMessenger {
            MockMessenger {
                sent_messages: RefCell::new(vec![]),
            }
        }
    }

    impl Messenger for MockMessenger {
        fn send(&amp;self, message: &amp;str) {
            self.sent_messages.borrow_mut().push(String::from(message));
        }
    }

    #[test]
    fn it_sends_an_over_75_percent_warning_message() {
        // --snip--
<span class="boring">        let mock_messenger = MockMessenger::new();
</span><span class="boring">        let mut limit_tracker = LimitTracker::new(&amp;mock_messenger, 100);
</span><span class="boring">
</span><span class="boring">        limit_tracker.set_value(80);
</span>
        assert_eq!(mock_messenger.sent_messages.borrow().len(), 1);
    }
}</code></pre>
</Listing>
<p>T√° an r√©imse <code>sent_messages</code> den chine√°l <code>RefCell&lt;Vec&lt;String&gt;&gt;</code> anois in ionad
<code>Vec&lt;String&gt;</code>. San fheidhm <code>new</code>, crutha√≠mid <code>RefCell&lt;Vec&lt;String&gt;&gt;</code> nua
shampla thart ar an veicteoir folamh.</p>
<p>Chun an modh <code>send</code> a chur i bhfeidhm, t√° an ch√©ad pharaim√©adar f√≥s ina
iasacht domhalartaithe den <code>self</code>, a thagann leis an sainmh√≠ni√∫ trait. Glaoimid
<code>borrow_mut</code> ar an <code>RefCell&lt;Vec&lt;String&gt;&gt;</code> i <code>self.sent_messages</code> chun a fh√°il
tagairt shochorraithe don luach taobh istigh den <code>RefCell&lt;Vec&lt;String&gt;&gt;</code>, is √© sin an
veicteoir. Ansin is f√©idir linn <code>br√∫</code> a ghlaoch ar an tagairt mutable don veicteoir a choinne√°il
rian de na teachtaireachta√≠ a seoladh le linn na t√°st√°la.</p>
<p>Is √© an t-athr√∫ deireanach at√° le d√©anamh againn n√° sa dearbh√∫: f√©achaint c√© mh√©ad earra at√° ann
sa veicteoir istigh, tugaimid <code>borrow</code> ar an <code>RefCell&lt;Vec&lt;String&gt;&gt;</code> chun
tagairt domhalartaithe don veicteoir.</p>
<p>Anois go bhfuil t√∫ feicthe agat conas <code>RefCell&lt;T&gt;</code> a √∫s√°id, d√©anaimis ini√∫chadh ar conas a oibr√≠onn s√©!</p>
<h4 id="iasachta√≠-a-choime√°d-ag-am-rite-le-refcellt"><a class="header" href="#iasachta√≠-a-choime√°d-ag-am-rite-le-refcellt">Iasachta√≠ a Choime√°d ag Am Rite le <code>RefCell&lt;T&gt;</code></a></h4>
<p>Nuair a chrutha√≠tear tagairt√≠ domhalartaithe agus mutable, √∫s√°idimid na <code>&amp;</code> agus <code>&amp;mut</code>
comhr√©ir, faoi seach. Le <code>RefCell&lt;T&gt;</code>, √∫s√°idimid an <code>borrow</code> agus <code>borrow_mut</code>
modhanna, at√° mar chuid den API s√°bh√°ilte a bhaineann le <code>RefCell&lt;T&gt;</code>. T√° an
Filleann modh <code>borrow</code> an cine√°l pointeoir cliste <code>Ref&lt;T&gt;</code>, agus <code>borrow_mut</code>
ar ais an cine√°l pointeoir cliste <code>RefMut&lt;T&gt;</code>. Cuireann an d√° chine√°l <code>Deref</code> i bhfeidhm, mar sin t√°imid
is f√©idir leo d√©ile√°il leo mar thagairt√≠ rialta.</p>
<p>Coinn√≠tear sa <code>RefCell&lt;T&gt;</code> c√© mh√©ad <code>Ref&lt;T&gt;</code> agus <code>RefMut&lt;T&gt;</code> cliste
t√° leideanna gn√≠omhach faoi l√°thair. Gach uair a dtugaimid <code>borrow</code>, an <code>RefCell&lt;T&gt;</code>
m√©ada√≠onn s√© a chomhaireamh maidir le c√© mh√©ad iasacht neamh-inmhalartaithe at√° gn√≠omhach. Nuair a <code>Tag&lt;T&gt;</code>
t√©ann luach amach as an raon feidhme, laghda√≠tear l√≠on na n-iasachta√≠ do-inaistrithe faoi cheann amh√°in. D√≠reach
cos√∫il leis na rialacha iasachtaithe maidir le ham tiomsaithe, ligeann <code>RefCell&lt;T&gt;</code> go leor do-athlasaithe a bheith againn
iasachta√≠ n√≥ iasacht sho-sh√≥ite amh√°in ag aon am.</p>
<p>M√° dh√©anaimid iarracht na rialacha seo a sh√°r√∫, seachas earr√°id tiomsaitheora a fh√°il agus muid
le tagairt√≠, beidh scaoll faoi chur i bhfeidhm <code>RefCell&lt;T&gt;</code>
am rite. L√©ir√≠onn liosta 15-23 modhn√∫ ar chur i bhfeidhm <code>send</code> isteach
Liost√°il 15-22. T√°imid ag iarraidh dh√° iasacht shochorraithe a chruth√∫ d‚Äôaon ghn√≥
chun an sc√≥ip ch√©anna a l√©iri√∫ go gcuireann <code>RefCell&lt;T&gt;</code> cosc ‚Äã‚Äãorainn √© seo a dh√©anamh
ag am rite.</p>
<Listing number="15-23" file-name="src/lib.rs" caption="Creating two mutable references in the same scope to see that `RefCell<T>` will panic">
<pre><code class="language-rust ignore panics"><span class="boring">pub trait Messenger {
</span><span class="boring">    fn send(&amp;self, msg: &amp;str);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct LimitTracker&lt;'a, T: Messenger&gt; {
</span><span class="boring">    messenger: &amp;'a T,
</span><span class="boring">    value: usize,
</span><span class="boring">    max: usize,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl&lt;'a, T&gt; LimitTracker&lt;'a, T&gt;
</span><span class="boring">where
</span><span class="boring">    T: Messenger,
</span><span class="boring">{
</span><span class="boring">    pub fn new(messenger: &amp;'a T, max: usize) -&gt; LimitTracker&lt;'a, T&gt; {
</span><span class="boring">        LimitTracker {
</span><span class="boring">            messenger,
</span><span class="boring">            value: 0,
</span><span class="boring">            max,
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn set_value(&amp;mut self, value: usize) {
</span><span class="boring">        self.value = value;
</span><span class="boring">
</span><span class="boring">        let percentage_of_max = self.value as f64 / self.max as f64;
</span><span class="boring">
</span><span class="boring">        if percentage_of_max &gt;= 1.0 {
</span><span class="boring">            self.messenger.send("Error: You are over your quota!");
</span><span class="boring">        } else if percentage_of_max &gt;= 0.9 {
</span><span class="boring">            self.messenger
</span><span class="boring">                .send("Urgent warning: You've used up over 90% of your quota!");
</span><span class="boring">        } else if percentage_of_max &gt;= 0.75 {
</span><span class="boring">            self.messenger
</span><span class="boring">                .send("Warning: You've used up over 75% of your quota!");
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">#[cfg(test)]
</span><span class="boring">mod tests {
</span><span class="boring">    use super::*;
</span><span class="boring">    use std::cell::RefCell;
</span><span class="boring">
</span><span class="boring">    struct MockMessenger {
</span><span class="boring">        sent_messages: RefCell&lt;Vec&lt;String&gt;&gt;,
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    impl MockMessenger {
</span><span class="boring">        fn new() -&gt; MockMessenger {
</span><span class="boring">            MockMessenger {
</span><span class="boring">                sent_messages: RefCell::new(vec![]),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span>    impl Messenger for MockMessenger {
        fn send(&amp;self, message: &amp;str) {
            let mut one_borrow = self.sent_messages.borrow_mut();
            let mut two_borrow = self.sent_messages.borrow_mut();

            one_borrow.push(String::from(message));
            two_borrow.push(String::from(message));
        }
    }
<span class="boring">
</span><span class="boring">    #[test]
</span><span class="boring">    fn it_sends_an_over_75_percent_warning_message() {
</span><span class="boring">        let mock_messenger = MockMessenger::new();
</span><span class="boring">        let mut limit_tracker = LimitTracker::new(&amp;mock_messenger, 100);
</span><span class="boring">
</span><span class="boring">        limit_tracker.set_value(80);
</span><span class="boring">
</span><span class="boring">        assert_eq!(mock_messenger.sent_messages.borrow().len(), 1);
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Crutha√≠mid athr√≥g <code>one_borrow</code> don phointeoir cliste <code>RefMut&lt;T&gt;</code> a cuireadh ar ais
√≥ <code>borrow_mut</code>. Ansin crutha√≠mid iasacht mutable eile ar an mbealach c√©anna sa
athr√≥g <code>two_borrow</code>. D√©anann s√© seo dh√° thagairt chomhsh√≥ite sa raon feidhme c√©anna,
nach bhfuil ceadaithe. Nuair a ritheann muid na t√°st√°lacha le haghaidh √°r leabharlann, an c√≥d i Liost√∫
Tioms√≥idh 15-23 gan aon earr√°id√≠, ach n√≠ theipeann ar an t√°st√°il:</p>
<pre><code class="language-cons√≥l">$ cargo test
   Compiling limit-tracker v0.1.0 (file:///projects/limit-tracker)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.91s
     Running unittests src/lib.rs (target/debug/deps/limit_tracker-e599811fa246dbde)

running 1 test
test tests::it_sends_an_over_75_percent_warning_message ... FAILED

failures:

---- tests::it_sends_an_over_75_percent_warning_message stdout ----
thread 'tests::it_sends_an_over_75_percent_warning_message' panicked at src/lib.rs:60:53:
already borrowed: BorrowMutError
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    tests::it_sends_an_over_75_percent_warning_message

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
</code></pre>
<p>Tabhair faoi deara go raibh scaoll ar an gc√≥d leis an teachtaireacht <code>already borrowed: BorrowMutError</code>. Seo mar a l√°imhse√°lann <code>RefCell&lt;T&gt;</code> s√°ruithe ar an iasacht
rialacha ag am rite.</p>
<p>Roghn√∫ a dh√©anamh ar earr√°id√≠ iasachtaithe ag am rite seachas am a thioms√∫, mar
at√° d√©anta againn anseo, cialla√≠onn s√© seo go bhf√©adfadh s√© go mbeadh bot√∫in i do ch√≥d √° aimsi√∫ agat n√≠os d√©ana√≠
sa phr√≥iseas forbartha: b'fh√©idir nach raibh go dt√≠ gur √∫s√°ideadh do ch√≥d chuig
t√°irgeadh. Chomh maith leis sin, thabh√≥dh do ch√≥d pion√≥s beag feidhm√≠ochta rite mar
mar thoradh ar na hiasachta√≠ a choinne√°il ag am rite seachas am tiomsaithe.
Mar sin f√©in, tr√≠ √∫s√°id a bhaint as <code>RefCell&lt;T&gt;</code> is f√©idir r√©ad br√©ige a scr√≠obh is f√©idir
modhnaigh √© f√©in chun s√∫il a choinne√°il ar na teachtaireachta√≠ at√° feicthe aige agus t√∫ √° √∫s√°id
i gcomhth√©acs nach gceada√≠tear ach luachanna neamh-inmhalartaithe. Is f√©idir leat <code>RefCell&lt;T&gt;</code> a √∫s√°id
in ainneoin a chomhbhabht√°lacha chun n√≠os m√≥ feidhmi√∫lachta a fh√°il n√° tagairt√≠ rialta
shol√°thar.</p>
<h3 id="√öin√©ir√≠-iolracha-sonra√≠-in-chomhsh√≥ite-a-bheith-agat-tr√≠-rct-agus-refcellt-a-chomhcheangal"><a class="header" href="#√öin√©ir√≠-iolracha-sonra√≠-in-chomhsh√≥ite-a-bheith-agat-tr√≠-rct-agus-refcellt-a-chomhcheangal">√öin√©ir√≠ Iolracha Sonra√≠ In-chomhsh√≥ite a bheith agat tr√≠ <code>Rc&lt;T&gt;</code> agus <code>RefCell&lt;T&gt;</code> a Chomhcheangal</a></h3>
<p>Bealach coitianta <code>RefCell&lt;T&gt;</code> a √∫s√°id is ea <code>Rc&lt;T&gt;</code>. Chun cuimhne go
Ligeann <code>Rc&lt;T&gt;</code> go bhfuil √∫in√©ir√≠ iolracha agat ar roinnt sonra√≠, ach n√≠ thugann s√© ach do-athlasach
rochtain ar na sonra√≠ sin. M√° t√° <code>Rc&lt;T&gt;</code> agat a bhfuil <code>RefCell&lt;T&gt;</code> agat, is f√©idir leat
faigh luach a fh√©adfaidh <em>agus</em> √∫in√©ir√≠ iolracha a bheith agat ar f√©idir leat a sh√≥ch√°n!</p>
<p>Mar shampla, tabhair chun cuimhne an sampla liosta m√≠bhunt√°ist√≠ i Liost√∫ 15-18 nuair a d‚Äô√∫s√°ideamar
<code>Rc&lt;T&gt;</code> chun liosta√≠ iolracha a chead√∫ chun √∫in√©ireacht liosta eile a roinnt. Toisc
N√≠ choinn√≠onn <code>Rc&lt;T&gt;</code> ach luachanna do-athchurtha, n√≠ f√©idir linn aon cheann de na luachanna sa
liosta nuair a bheidh siad cruthaithe againn. Cuirimis isteach <code>RefCell&lt;T&gt;</code> chun an cumas a bhaint amach
athraigh na luachanna sna liosta√≠. L√©ir√≠onn liost√∫ 15-24 gur tr√≠ √∫s√°id a bhaint as a
<code>RefCell&lt;T&gt;</code> sa sainmh√≠ni√∫ <code>Cons</code>, is f√©idir linn an luach at√° st√≥r√°ilte a mhionathr√∫
na liosta√≠:</p>
<Listing number="15-24" file-name="src/main.rs" caption="Using `Rc<RefCell<i32>>` to create a `List` that we can mutate">
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
enum List {
    Cons(Rc&lt;RefCell&lt;i32&gt;&gt;, Rc&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};
use std::cell::RefCell;
use std::rc::Rc;

fn main() {
    let value = Rc::new(RefCell::new(5));

    let a = Rc::new(Cons(Rc::clone(&amp;value), Rc::new(Nil)));

    let b = Cons(Rc::new(RefCell::new(3)), Rc::clone(&amp;a));
    let c = Cons(Rc::new(RefCell::new(4)), Rc::clone(&amp;a));

    *value.borrow_mut() += 10;

    println!("a after = {a:?}");
    println!("b after = {b:?}");
    println!("c after = {c:?}");
}</code></pre></pre>
</Listing>
<p>Crutha√≠mid luach ar sampla √© de <code>Rc&lt;RefCell&lt;i32&gt;&gt;</code> agus st√≥r√°ilimid √© i
athr√≥g darb ainm <code>value</code> ionas gur f√©idir linn rochtain a fh√°il air n√≠os d√©ana√≠. Ansin crutha√≠mid a
<code>List</code> in <code>a</code> le malairt <code>Cons</code> a choinn√≠onn <code>value</code>. N√≠ m√≥r d√∫inn cl√≥n√°il
<code>value</code> mar sin t√° √∫in√©ireacht ag <code>a</code> agus <code>value</code> araon ar an luach <code>5</code> istigh in √°it
n√° √∫in√©ireacht a aistri√∫ √≥ <code>value</code> go <code>a</code> n√≥ <code>a</code> a fh√°il ar iasacht uaidh
<code>value</code>.</p>
<p>Fillteaimid an liosta <code>a</code> i <code>Rc&lt;T&gt;</code> mar sin nuair a chrutha√≠mid liosta√≠ <code>b</code> agus <code>c</code>, d√©anann siad
in ann tagairt a dh√©anamh do <code>a</code> araon, agus is √© sin a rinne muid i Liost√∫ 15-18.</p>
<p>Tar √©is d√∫inn na liosta√≠ in <code>a</code>,<code>b</code>, agus <code>c</code> a chruth√∫, ba mhaith linn 10 a chur leis an
luach i <code>value</code>. D√©anaimid √© seo tr√≠ <code>borrow_mut</code> a ghlaoch ar <code>value</code>, a √∫s√°ideann an
gn√© dh√≠reagartha uathoibr√≠och a phl√©amar i gCaibidil 5 (f√©ach an rann√°n
[‚ÄúC√° bhfuil an <code>-&gt;</code> Oibreoir?‚Äù [c√° bhfuil an t-oibreoir---] <!-- d√©an neamhaird de -->) chun
d√©an tagairt don <code>Rc&lt;T&gt;</code> don luach <code>RefCell&lt;T&gt;</code> istigh. An <code>borrow_mut</code>
seolann an modh pointeoir cliste <code>RefMut&lt;T&gt;</code>, agus √∫s√°idimid an t-oibreoir d√≠thagartha
air agus athraigh an luach istigh.</p>
<p>Nuair a phriont√°ilimid <code>a</code>, <code>b</code>, agus <code>c</code>, feicimid go bhfuil na modhnaithe acu go l√©ir
luach 15 seachas 5:</p>
<pre><code class="language-cons√≥l">$ cargo run
   Compiling cons-list v0.1.0 (file:///projects/cons-list)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.63s
     Running `target/debug/cons-list`
a after = Cons(RefCell { value: 15 }, Nil)
b after = Cons(RefCell { value: 3 }, Cons(RefCell { value: 15 }, Nil))
c after = Cons(RefCell { value: 4 }, Cons(RefCell { value: 15 }, Nil))
</code></pre>
<p>T√° an teicn√≠c seo go leor n√©ata! Tr√≠ √∫s√°id a bhaint as <code>RefCell&lt;T&gt;</code>, t√° ceann amuigh againn
luach <code>List</code> do-laghdaithe. Ach is f√©idir linn na modhanna ar <code>RefCell&lt;T&gt;</code> a shol√°thra√≠onn
rochtain ar a shoghluaisteacht istigh ionas gur f√©idir linn √°r sonra√≠ a mhodhn√∫ nuair is g√° d√∫inn.
Cosna√≠onn seice√°lacha ama rite na rialacha iasachta√≠ochta sinn √≥ r√°sa√≠ sonra√≠, agus is amhlaidh at√°
uaireanta is fi√∫ beag√°n luas a thr√°d√°il don tsol√∫bthacht seo in√°r sonra√≠
strucht√∫ir. Tabhair faoi deara nach n-oibr√≠onn <code>RefCell&lt;T&gt;</code> do ch√≥d ilshn√°ithe!
Is √© <code>Mutex&lt;T&gt;</code> an ‚Äã‚Äãleagan s√°bh√°ilte de <code>RefCell&lt;T&gt;</code> agus pl√©ifimid
<code>Mutex&lt;T&gt;</code> i gCaibidil 16.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="is-f√©idir-le-timthriallta-tagartha-an-cuimhne-a-sceitheadh"><a class="header" href="#is-f√©idir-le-timthriallta-tagartha-an-cuimhne-a-sceitheadh">Is f√©idir le Timthriallta Tagartha an Cuimhne a sceitheadh</a></h2>
<p>Mar gheall ar r√°tha√≠ochta√≠ s√°bh√°ilteachta cuimhne Rust t√° s√© deacair, ach n√≠l s√© dodh√©anta
cruthaigh de thaisme cuimhne nach nglantar riamh (ar a dtugtar <em>memory leak</em>).
N√≠ ceann de r√°tha√≠ochta√≠ Rust √© sceitheadh ‚Äã‚Äãcuimhne a chosc go hioml√°n, rud a chialla√≠onn
t√° sceitheadh ‚Äã‚Äãcuimhne s√°bh√°ilte cuimhne i Rust. Is f√©idir linn a fheice√°il go gceada√≠onn Rust sceitheadh ‚Äã‚Äãcuimhne
tr√≠ √∫s√°id a bhaint as <code>Rc&lt;T&gt;</code> agus <code>RefCell&lt;T&gt;</code>: is f√©idir tagairt√≠ a chruth√∫ nuair a
tagra√≠onn m√≠reanna d√° ch√©ile i dtimthriall. Crutha√≠onn s√© seo leaks cuimhne mar gheall ar an
N√≠ bheidh l√≠on tagartha gach m√≠re sa timthriall a bhaint amach 0, agus na luachanna
n√≠ scaoilfear cho√≠che.</p>
<h3 id="timthriall-tagartha-√°-chruth√∫"><a class="header" href="#timthriall-tagartha-√°-chruth√∫">Timthriall Tagartha √° Chruth√∫</a></h3>
<p>Breathna√≠mid ar conas a d‚Äôfh√©adfadh timthriall tagartha tarl√∫ agus conas √© a chosc,
ag tos√∫ leis an sainmh√≠ni√∫ ar an <code>List</code> enum agus modh <code>tail</code> sa Liost√∫
15-25:</p>
<Listing number="15-25" file-name="src/main.rs" caption="A cons list definition that holds a `RefCell<T>` so we can modify what a `Cons` variant is referring to">
<pre><pre class="playground"><code class="language-rust">use crate::List::{Cons, Nil};
use std::cell::RefCell;
use std::rc::Rc;

#[derive(Debug)]
enum List {
    Cons(i32, RefCell&lt;Rc&lt;List&gt;&gt;),
    Nil,
}

impl List {
    fn tail(&amp;self) -&gt; Option&lt;&amp;RefCell&lt;Rc&lt;List&gt;&gt;&gt; {
        match self {
            Cons(_, item) =&gt; Some(item),
            Nil =&gt; None,
        }
    }
}

fn main() {}</code></pre></pre>
</Listing>
<p>T√° athr√∫ eile √° √∫s√°id againn ar an sainmh√≠ni√∫ ar <code>List</code> √≥ Liost√∫ 15-5. T√° an
is √© an dara heilimint sa leagan <code>Cons</code> anois <code>RefCell &lt;Rc&lt;List&gt;&gt;</code>, rud a chialla√≠onn go
in ionad a bheith in ann an luach <code>i32</code> a mhodhn√∫ mar a rinneamar i Liost√∫
15-24, ba mhaith linn an luach <code>List</code> a bhfuil malairt <code>Cons</code> d√≠rithe air a mhodhn√∫.
T√°imid ag cur modh <code>tail</code> leis freisin chun √© a dh√©anamh √°isi√∫il d√∫inn rochtain a fh√°il ar an
an dara m√≠r m√° t√° leagan <code>Cons</code> againn.</p>
<p>I Liost√∫ 15-26, t√°imid ag cur <code>main</code> leis a √∫s√°ideann na sainmh√≠nithe i
Liost√°il 15-25. Crutha√≠onn an c√≥d seo liosta in <code>a</code> agus liosta i <code>b</code> a dh√≠r√≠onn
an liosta in <code>a</code>. Ansin athra√≠onn s√© an liosta in <code>a</code> chun <code>b</code> a chur in i√∫l, ag cruth√∫ a
timthriall tagartha. T√° r√°itis <code>println!</code> ar an mbealach chun a thaispe√°int cad iad na
t√° comhaireamh tagartha ag point√≠ √©ags√∫la sa phr√≥iseas seo.</p>
<Listing number="15-26" file-name="src/main.rs" caption="Creating a reference cycle of two `List` values pointing to each other">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use crate::List::{Cons, Nil};
</span><span class="boring">use std::cell::RefCell;
</span><span class="boring">use std::rc::Rc;
</span><span class="boring">
</span><span class="boring">#[derive(Debug)]
</span><span class="boring">enum List {
</span><span class="boring">    Cons(i32, RefCell&lt;Rc&lt;List&gt;&gt;),
</span><span class="boring">    Nil,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl List {
</span><span class="boring">    fn tail(&amp;self) -&gt; Option&lt;&amp;RefCell&lt;Rc&lt;List&gt;&gt;&gt; {
</span><span class="boring">        match self {
</span><span class="boring">            Cons(_, item) =&gt; Some(item),
</span><span class="boring">            Nil =&gt; None,
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let a = Rc::new(Cons(5, RefCell::new(Rc::new(Nil))));

    println!("a initial rc count = {}", Rc::strong_count(&amp;a));
    println!("a next item = {:?}", a.tail());

    let b = Rc::new(Cons(10, RefCell::new(Rc::clone(&amp;a))));

    println!("a rc count after b creation = {}", Rc::strong_count(&amp;a));
    println!("b initial rc count = {}", Rc::strong_count(&amp;b));
    println!("b next item = {:?}", b.tail());

    if let Some(link) = a.tail() {
        *link.borrow_mut() = Rc::clone(&amp;b);
    }

    println!("b rc count after changing a = {}", Rc::strong_count(&amp;b));
    println!("a rc count after changing a = {}", Rc::strong_count(&amp;a));

    // Uncomment the next line to see that we have a cycle;
    // it will overflow the stack
    // println!("a next item = {:?}", a.tail());
}</code></pre></pre>
</Listing>
<p>Crutha√≠mid sampla <code>Rc&lt;List&gt;</code> a bhfuil luach <code>List</code> san athr√≥g <code>a</code>
le liosta tosaigh de <code>5, Nil</code>. Crutha√≠mid gabh√°ltas mar shampla <code>Rc&lt;List&gt;</code> ansin
luach <code>List</code> eile san athr√≥g <code>b</code> ina bhfuil an luach 10 agus point√≠
chuig an liosta in <code>a</code>.</p>
<p>Modhnaimid <code>a</code> mar sin d√≠r√≠onn s√© ar <code>b</code> in ionad <code>Nil</code>, ag cruth√∫ timthriall. D√©anaimid
sin tr√≠ √∫s√°id a bhaint as an modh <code>tail</code> chun tagairt a fh√°il don <code>RefCell&lt;Rc&lt;List&gt;&gt;</code>
in <code>a</code>, a chuireamar san athr√≥g <code>link</code>. Ansin √∫s√°idimid an <code>borrow_mut</code>
modh ar an <code>RefCell&lt;Rc&lt;List&gt;&gt;</code> chun an luach istigh √≥ <code>Rc&lt;List&gt;</code> a athr√∫
a choinn√≠onn luach <code>Nil</code> ar an <code>Rc&lt;List&gt;</code> i <code>b</code>.</p>
<p>Nuair a rithimid an c√≥d seo, ag coinne√°il an <code>println!</code> deireanach a d√∫irt amach le haghaidh an
n√≥im√©ad, gheobhaidh muid an t-aschur seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling cons-list v0.1.0 (file:///projects/cons-list)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.53s
     Running `target/debug/cons-list`
a initial rc count = 1
a next item = Some(RefCell { value: Nil })
a rc count after b creation = 2
b initial rc count = 1
b next item = Some(RefCell { value: Cons(5, RefCell { value: Nil }) })
b rc count after changing a = 2
a rc count after changing a = 2
</code></pre>
<p>Is iad comhaireamh tagartha na gc√°sanna <code>Rc&lt;List&gt;</code> sa d√° <code>a</code> agus <code>b</code> n√° 2 i ndiaidh
athra√≠onn muid an liosta in <code>a</code> chun <code>b</code> a chur in i√∫l. Ag deireadh <code>main</code>, titeann Rust an
athr√≥g <code>b</code>, a laghda√≠onn comhaireamh tagartha an shampla <code>b Rc&lt;List&gt;</code>
√≥ 2 go 1. N√≠ ligfear siar an chuimhne at√° ag <code>Rc&lt;List&gt;</code> ar an gcarn ag
an pointe seo, toisc go bhfuil a chomhaireamh tagartha 1, n√≠ 0. Ansin titeann Rust <code>a</code>, a
laghda√≠tear comhaireamh tagartha an √°sc <code>a Rc&lt;List&gt;</code> √≥ 2 go 1 mar
go maith. N√≠ f√©idir cuimhne an √°sc seo a √≠sli√∫ ach an oiread, mar gheall ar an gceann eile
Tagra√≠onn <code>Rc&lt;List&gt;</code> shampla d√≥ f√≥s. D√©anfaidh an chuimhne a leithdh√°iltear ar an liosta
fanacht gan baili√∫ go deo. Chun an timthriall tagartha seo a shamhl√∫, t√° a
l√©ar√°id i bhF√≠or 15-4.</p>
<img alt="Timthriall tagartha na liosta√≠" src="img/trpl15-04.svg" class="center" />
<p><span class="caption">F√≠or 15-4: Timthriall tagartha liosta√≠ <code>a</code> agus <code>b</code>
ag tagairt d√° ch√©ile</span></p>
<p>Mura nd√©anann t√∫ tr√°cht ar an <code>println!</code> deiridh agus m√° ritheann t√∫ an cl√°r, d√©anfaidh Rust iarracht √©
priont√°il an timthriall seo le <code>a</code> ag tagairt do <code>b</code> ag cur in i√∫l do <code>a</code> agus mar sin de go dt√≠ √©
thar maoil an chruach.</p>
<p>I gcompar√°id le cl√°r f√≠or-domhan, na hiarmhairt√≠ a chruth√∫ timthriall tagartha
sa sampla seo n√≠l siad an-dochar: d√≠reach tar √©is d√∫inn an timthriall tagartha a chruth√∫,
chr√≠ochna√≠onn an cl√°r. Mar sin f√©in, m√° leithdh√°ileadh cl√°r n√≠os casta go leor de chuimhne
i dtimthriall agus coinnithe air ar feadh i bhfad, d'√∫s√°idfeadh an cl√°r n√≠os m√≥ cuimhne
n√° mar a bh√≠ de dh√≠th air agus d'fh√©adfadh s√© an c√≥ras a sh√°r√∫, rud a fh√°gann go n-imeodh s√© as
cuimhne ar f√°il.</p>
<p>N√≠ furasta timthriallta tagartha a chruth√∫, ach n√≠l s√© dodh√©anta ach an oiread.
M√° t√° luachanna <code>RefCell&lt;T&gt;</code> agat ina bhfuil luachanna <code>Rc&lt;T&gt;</code> n√≥ a mhacasamhail neadaithe
teaglaim de chine√°lacha le mutability istigh agus comhaireamh tagartha, n√≠ m√≥r duit
cinntigh nach gcrutha√≠onn t√∫ timthriallta; n√≠ f√©idir leat brath ar Rust chun iad a ghabh√°il.
Is fabht loighce i do chl√°r √© timthriall tagartha a chruth√∫ agus ba cheart duit
t√°st√°lacha uathoibrithe, athbhreithnithe c√≥d, agus cleachtais forbartha bogearra√≠ eile a √∫s√°id chun
√≠oslaghd√∫.</p>
<p>R√©iteach eile chun timthriallta tagartha a sheachaint is ea do shonra√≠ a atheagr√∫
strucht√∫ir sa chaoi is go gcuireann tagairt√≠ √°irithe √∫in√©ireacht in i√∫l agus n√≠ l√©ir√≠onn roinnt tagairt√≠.
Mar thoradh air sin, is f√©idir leat a bheith timthriallta comhdh√©anta de roinnt caidreamh √∫in√©ireachta agus
roinnt caidreamh neamh-√∫in√©ireachta, agus n√≠ dh√©anann ach na caidrimh √∫in√©ireachta difear
cib√© an f√©idir luach a √≠sli√∫ n√≥ nach f√©idir. I Liosta 15-25, ba mhaith linn i gc√≥na√≠ <code>Cons</code>
roghanna eile chun a liosta a shealbh√∫, mar sin n√≠ f√©idir an strucht√∫r sonra√≠ a atheagr√∫.
Breathna√≠mid ar shampla ag baint √∫s√°ide as graif comhdh√©anta de n√≥id tuismitheora agus n√≥id linbh
f√©achaint c√©n uair is bealach iomchu√≠ chun cosc ‚Äã‚Äãa chur ar chaidrimh neamh√∫in√©ireachta
timthriallta tagartha.</p>
<h3 id="timthriallta-tagartha-a-chosc-rct-√°-iomp√∫-ina-weakt"><a class="header" href="#timthriallta-tagartha-a-chosc-rct-√°-iomp√∫-ina-weakt">Timthriallta Tagartha a Chosc: <code>Rc&lt;T&gt;</code> √° iomp√∫ ina <code>Weak&lt;T&gt;</code></a></h3>
<p>Go dt√≠ seo, t√° s√© l√©irithe againn go m√©ada√≠onn glaoch <code>Rc::clone</code> an
N√≠ ghlantar <code>strong_count</code> de shampla <code>Rc&lt;T&gt;</code>, agus <code>Rc&lt;T&gt;</code> ach
suas m√°s √© a <code>strong_count</code> n√° 0. Is f√©idir leat tagairt <em>lag</em> a chruth√∫ freisin don
luach laistigh de shampla <code>Rc&lt;T&gt;</code> tr√≠ <code>Rc::downgrade</code> a ghlaoch agus pas a fh√°il
tagairt don <code>Rc&lt;T&gt;</code>. Is tagairt√≠ l√°idre iad conas is f√©idir leat √∫in√©ireacht a roinnt
mar shampla <code>Rc&lt;T&gt;</code>. N√≠ chuireann tagairt√≠ laga caidreamh √∫in√©ireachta in i√∫l,
agus n√≠ chuireann a n-√°ireamh isteach nuair a ghlantar sampla <code>Rc&lt;T&gt;</code>. siad
n√≠ bheidh s√© ina ch√∫is le timthriall tagartha mar gheall ar aon timthriall ina bhfuil roinnt tagairt√≠ laga
Brisfear iad a luaithe is √© 0 an comhaireamh l√°idir tagartha luachanna at√° i gceist.</p>
<p>Nuair a ghlaonn t√∫ ar <code>Rc::downgrade</code>, gheobhaidh t√∫ pointeoir cliste den chine√°l <code>Weak&lt;T&gt;</code>.
In ionad an <code>count_strong_count</code> sa ch√°s <code>Rc&lt;T&gt;</code> a mh√©ad√∫ faoi 1, cuir glaoch
M√©ada√≠onn <code>Rc::downgrade</code> an <code>weak_count</code> faoi 1. √ös√°ideann an cine√°l <code>Rc&lt;T&gt;</code>
<code>weak_count</code> chun s√∫il a choinne√°il ar c√© mh√©ad tagairt <code>Weak&lt;T&gt;</code> at√° ann, cos√∫il le
<code>strong_count</code>. Is √© an difr√≠ocht n√° n√≠ g√° don <code>count_lag</code> a bheith 0 don
<code>Rc&lt;T&gt;</code> shampla le glanadh suas.</p>
<p>Toisc go mb‚Äôfh√©idir gur thit an luach a d‚Äôfh√©adfadh tagairt√≠ <code>Weak&lt;T&gt;</code> a dh√©anamh, le d√©anamh
rud ar bith leis an luach a bhfuil <code>Lag&lt;T&gt;</code> ag d√≠ri√∫ air, caithfidh t√∫ a chinnti√∫ go bhfuil an
luach ann f√≥s. D√©an √© seo tr√≠ ghlao a chur ar an modh <code>upgrade</code> ar <code>Weak&lt;T&gt;</code>
mar shampla, a thabharfaidh ar ais <code>Option&lt;Rc&lt;T&gt;&gt;</code>. Gheobhaidh t√∫ toradh ar <code>Some</code>
mura bhfuil an luach <code>Rc&lt;T&gt;</code> tite f√≥s agus toradh ar <code>None</code> mura bhfuil an
T√° luach <code>Rc&lt;T&gt;</code> tite. Toisc go dtugann <code>upgrade</code> <code>Option&lt;Rc&lt;T&gt;&gt;</code> ar ais,
Cinnteoidh Rust go l√°imhse√°lfar an c√°s <code>Some</code> agus an c√°s <code>None</code>, agus
n√≠ bheidh pointeoir neamhbhail√≠ ann.</p>
<p>Mar shampla, seachas liosta a √∫s√°id nach bhfuil a fhios ag a m√≠reanna ach faoin gc√©ad cheann eile
m√≠r, cruth√≥imid crann a bhfuil a fhios ag na m√≠reanna faoina leana√≠ m√≠reanna <em>agus</em>
m√≠reanna a dtuismitheoir√≠.</p>
<h4 id="strucht√∫r-sonra√≠-crann-a-chruth√∫-node-le-n√≥id-leana√≠"><a class="header" href="#strucht√∫r-sonra√≠-crann-a-chruth√∫-node-le-n√≥id-leana√≠">Strucht√∫r Sonra√≠ Crann a Chruth√∫: <code>Node</code> le N√≥id Leana√≠</a></h4>
<p>Chun t√∫s a chur leis, t√≥gfaimid crann le n√≥id a bhfuil eolas acu ar a n√≥id linbh.
Cruth√≥imid strucht√∫r darb ainm <code>Node</code> a shealbha√≠onn a luach <code>i32</code> f√©in chomh maith le
tagairt√≠ d√° luachanna <code>Node</code> a leana√≠:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">use std::cell::RefCell;
use std::rc::Rc;

#[derive(Debug)]
struct Node {
    value: i32,
    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let leaf = Rc::new(Node {
</span><span class="boring">        value: 3,
</span><span class="boring">        children: RefCell::new(vec![]),
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let branch = Rc::new(Node {
</span><span class="boring">        value: 5,
</span><span class="boring">        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),
</span><span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
<p>Teasta√≠onn uainn <code>Node</code> a mbeadh √∫in√©ireacht ag a leana√≠ air, agus ba mhaith linn an √∫in√©ireacht sin a roinnt linn
athr√≥g ionas gur f√©idir linn rochtain a fh√°il ar gach <code>Node</code> sa chrann go d√≠reach. Chun seo a dh√©anamh, t√°imid
sainmh√≠nigh na m√≠reanna <code>Vec&lt;T&gt;</code> mar luachanna den chine√°l <code>Rc&lt;Node&gt;</code>. Ba mhaith linn freisin
modhnaigh c√© na n√≥id at√° ina bp√°ist√≠ de n√≥d eile, ionas go mbeidh <code>RefCell&lt;T&gt;</code> againn isteach
<code>children</code> timpeall an <code>Vec&lt;Rc&lt;Node&gt;&gt;</code>.</p>
<p>Ansin, √∫s√°idfimid √°r sainmh√≠ni√∫ strucht√∫r agus cruth√≥imid sampla amh√°in <code>Node</code> ainmnithe
<code>leaf</code> leis an luach 3 agus gan leana√≠, agus c√°s eile darb ainm <code>branch</code>
leis an luach 5 agus <code>leaf</code> mar dhuine d√° leana√≠, mar a thaispe√°ntar i Liosta 15-27:</p>
<Listing number="15-27" file-name="src/main.rs" caption="Cruth√∫ n√≥d `leaf` gan chlann agus n√≥d `branch` le `leaf` mar dhuine d√° leana√≠">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use std::cell::RefCell;
</span><span class="boring">use std::rc::Rc;
</span><span class="boring">
</span><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Node {
</span><span class="boring">    value: i32,
</span><span class="boring">    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let leaf = Rc::new(Node {
        value: 3,
        children: RefCell::new(vec![]),
    });

    let branch = Rc::new(Node {
        value: 5,
        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),
    });
}</code></pre></pre>
</Listing>
<p>Cl√≥naimid an <code>Rc&lt;Node&gt;</code> i <code>leaf</code> agus st√≥r√°ilimid √© sin sa <code>branch</code>, rud a chialla√≠onn an
T√° beirt √∫in√©ir√≠ ag <code>Node</code> i <code>leaf</code> anois: <code>leaf</code> agus <code>branch</code>. Is f√©idir linn a fh√°il √≥
<code>branch</code> go <code>leaf</code> tr√≠ <code>branch.children</code>, ach n√≠l aon bhealach le f√°il √≥
<code>leaf</code> go <code>branch</code>. Is √© an f√°th nach bhfuil aon tagairt ag <code>leaf</code> do <code>branch</code> agus
n√≠ fios go bhfuil gaol acu leis. Ba mhaith linn go mbeadh a fhios ag <code>leaf</code> gurb √© <code>branch</code> a chuid
tuismitheoir. D√©anfaimid √© sin chugainn.</p>
<h4 id="tagairt-√≥-ph√°iste-√°-chur-lena-thuismitheoir"><a class="header" href="#tagairt-√≥-ph√°iste-√°-chur-lena-thuismitheoir">Tagairt √≥ Ph√°iste √° Chur lena Thuismitheoir</a></h4>
<p>Chun an n√≥d leanbh a chur ar an eolas faoina thuismitheoir, n√≠ m√≥r d√∫inn r√©imse <code>parent</code> a chur leis
√°r sainmh√≠ni√∫ ar strucht√∫r <code>Node</code>. Is √© an deacracht cinneadh a dh√©anamh c√©n cine√°l
ba cheart go mbeadh <code>parent</code>. T√° a fhios againn nach f√©idir <code>Rc&lt;T&gt;</code> a bheith ann, mar bheadh
cruthaigh timthriall tagartha le <code>leaf.parent</code> ag tagairt don <code>branch</code> agus
<code>branch.children</code> ag tagairt do <code>leaf</code>, rud a chuirfeadh lena <code>count_strong</code>
luachanna gan a bheith 0 riamh.</p>
<p>Ag smaoineamh ar na caidrimh ar bhealach eile, ba cheart go mbeadh √∫in√©ireacht ag n√≥d tuismitheora ar a chuid f√©in
leana√≠: m√° thittear n√≥d tuismitheora, ba ch√≥ir a n√≥id linbh a thit mar
go maith. Mar sin f√©in, n√≠or cheart go mbeadh √∫in√©ireacht ag leanbh ar a thuismitheoir: m√° scaoilimid n√≥d linbh, beidh an
ba ch√≥ir go mbeadh tuismitheoir ann f√≥s. Is c√°s √© seo le haghaidh tagairt√≠ laga!</p>
<p>Mar sin in ionad <code>Rc&lt;T&gt;</code>, bainfimid √∫s√°id as <code>Weak&lt;T&gt;</code> don chine√°l <code>parent</code>,
go sonrach <code>RefCell&lt;Weak&lt;Node&gt;&gt;</code>. Anois breathna√≠onn √°r sainmh√≠ni√∫ ar strucht√∫r <code>Node</code>
mar seo:</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">use std::cell::RefCell;
use std::rc::{Rc, Weak};

#[derive(Debug)]
struct Node {
    value: i32,
    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,
    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let leaf = Rc::new(Node {
</span><span class="boring">        value: 3,
</span><span class="boring">        parent: RefCell::new(Weak::new()),
</span><span class="boring">        children: RefCell::new(vec![]),
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    println!("leaf parent = {:?}", leaf.parent.borrow().upgrade());
</span><span class="boring">
</span><span class="boring">    let branch = Rc::new(Node {
</span><span class="boring">        value: 5,
</span><span class="boring">        parent: RefCell::new(Weak::new()),
</span><span class="boring">        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    *leaf.parent.borrow_mut() = Rc::downgrade(&amp;branch);
</span><span class="boring">
</span><span class="boring">    println!("leaf parent = {:?}", leaf.parent.borrow().upgrade());
</span><span class="boring">}</span></code></pre></pre>
<p>Beidh n√≥d in ann tagairt a dh√©anamh d√° mh√°thairn√≥d ach n√≠ leis a thuismitheoir √©.
I Liosta 15-28, d√©anaimid <code>main</code> a nuashonr√∫ chun an sainmh√≠ni√∫ nua seo a √∫s√°id mar sin an <code>leaf</code>
beidh bealach ag n√≥d tagairt a dh√©anamh d√° thuismitheoir, <code>branch</code>:</p>
<Listing number="15-28" file-name="src/main.rs" caption="A `leaf` node with a weak reference to its parent node `branch`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use std::cell::RefCell;
</span><span class="boring">use std::rc::{Rc, Weak};
</span><span class="boring">
</span><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Node {
</span><span class="boring">    value: i32,
</span><span class="boring">    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,
</span><span class="boring">    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let leaf = Rc::new(Node {
        value: 3,
        parent: RefCell::new(Weak::new()),
        children: RefCell::new(vec![]),
    });

    println!("leaf parent = {:?}", leaf.parent.borrow().upgrade());

    let branch = Rc::new(Node {
        value: 5,
        parent: RefCell::new(Weak::new()),
        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),
    });

    *leaf.parent.borrow_mut() = Rc::downgrade(&amp;branch);

    println!("leaf parent = {:?}", leaf.parent.borrow().upgrade());
}</code></pre></pre>
</Listing>
<p>Breathna√≠onn cruth√∫ an n√≥d <code>leaf</code> cos√∫il le Liost√∫ 15-27 c√© is moite de
an r√©imse <code>parent</code>: Tosa√≠onn <code>leaf</code> amach gan tuismitheoir, mar sin crutha√≠mid ceann nua,
folamh <code>Weak&lt;Node&gt;</code> mar shampla tagartha.</p>
<p>Ag an bpointe seo, nuair a dh√©anaimid iarracht tagairt a fh√°il do thuismitheoir <code>leaf</code> tr√≠ √∫s√°id a bhaint as
an modh <code>upgrade</code>, faigheann muid luach <code>None</code>. Feicimid √© seo san aschur √≥ na
an ch√©ad r√°iteas <code>println!</code>:</p>
<pre><code class="language-text">leaf parent = None
</code></pre>
<p>Nuair a chrutha√≠mid an n√≥d <code>branch</code>, beidh <code>Weak&lt;Node&gt;</code> nua aige freisin
tagairt sa r√©imse <code>parent</code>, toisc nach bhfuil n√≥d tuismitheora ag <code>branch</code>.
T√° <code>leaf</code> f√≥s againn mar dhuine de chlann <code>branch</code>. Nuair a bheidh an
Mar shampla <code>Node</code> i <code>branch</code>, is f√©idir linn <code>leaf</code> a mhionathr√∫ chun <code>Weak&lt;Node&gt;</code> a thabhairt d√≥
tagairt d√° thuismitheoir. √ös√°idimid an modh <code>borow_mut</code> ar an
<code>RefCell&lt;Weak&lt;Node&gt;&gt;</code> sa r√©imse <code>parent</code> ar <code>leaf</code>, agus ansin √∫s√°idimid an
Feidhm <code>Rc::downgrade</code> chun tagairt <code>Weak&lt;Node&gt;</code> a chruth√∫ do <code>branch</code> √≥
an <code>Rc&lt;Node&gt;</code> sa <code>branch</code>.</p>
<p>Nuair a phriont√°ilimid tuismitheoir <code>leaf</code> ar√≠s, gheobhaidh muid leagan <code>Some</code> an uair seo
shealbh√∫ <code>branch</code>: anois is f√©idir le <code>leaf</code> rochtain a fh√°il ar a thuismitheoir! Nuair a phriont√°ilimid <code>leaf</code>, d√©anaimid
seachain freisin an timthriall a chr√≠ochnaigh sa deireadh le cur thar maoil stoic mar a bh√≠ againn i
Liost√°il 15-26; cl√≥itear na tagairt√≠ <code>Weak&lt;Node&gt;</code> mar <code>(Weak)</code>:</p>
<pre><code class="language-text">leaf parent = Some(Node { value: 5, parent: RefCell { value: (Weak) },
children: RefCell { value: [Node { value: 3, parent: RefCell { value: (Weak) },
children: RefCell { value: [] } }] } })
</code></pre>
<p>L√©ir√≠onn an easpa aschuir gan teorainn n√°r chruthaigh an c√≥d seo tagairt
timthriall. Is f√©idir linn √© seo a insint freisin tr√≠ bhreathn√∫ ar na luachanna a fhaighimid √≥ ghlaoch
<code>Rc::strong_count</code> agus <code>Rc::weak_count</code>.</p>
<h4 id="amharcl√©iri√∫-athruithe-ar-strong_count-agus-weak_count"><a class="header" href="#amharcl√©iri√∫-athruithe-ar-strong_count-agus-weak_count">Amharcl√©iri√∫ Athruithe ar <code>strong_count</code> agus <code>weak_count</code></a></h4>
<p>Breathna√≠mid ar an gcaoi a bhfuil na luachanna <code>strong_count</code> agus <code>count_count_lag</code> an <code>Rc&lt;Node&gt;</code>
athra√≠onn c√°sanna tr√≠ raon feidhme inmhe√°nach nua a chruth√∫ agus cruth√∫ na
<code>branch</code> isteach sa raon feidhme sin. Tr√≠ sin a dh√©anamh, is f√©idir linn a fheice√°il cad a tharla√≠onn nuair a bh√≠onn <code>branch</code> cruthaithe agus ansin thit nuair a th√©ann s√© as raon feidhme. Taispe√°ntar na modhnuithe
i Liosta 15-29:</p>
<Listing number="15-29" file-name="src/main.rs" caption="Creating `branch` in an inner scope and examining strong and weak reference counts">
<pre><pre class="playground"><code class="language-rust"><span class="boring">use std::cell::RefCell;
</span><span class="boring">use std::rc::{Rc, Weak};
</span><span class="boring">
</span><span class="boring">#[derive(Debug)]
</span><span class="boring">struct Node {
</span><span class="boring">    value: i32,
</span><span class="boring">    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,
</span><span class="boring">    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let leaf = Rc::new(Node {
        value: 3,
        parent: RefCell::new(Weak::new()),
        children: RefCell::new(vec![]),
    });

    println!(
        "leaf strong = {}, weak = {}",
        Rc::strong_count(&amp;leaf),
        Rc::weak_count(&amp;leaf),
    );

    {
        let branch = Rc::new(Node {
            value: 5,
            parent: RefCell::new(Weak::new()),
            children: RefCell::new(vec![Rc::clone(&amp;leaf)]),
        });

        *leaf.parent.borrow_mut() = Rc::downgrade(&amp;branch);

        println!(
            "branch strong = {}, weak = {}",
            Rc::strong_count(&amp;branch),
            Rc::weak_count(&amp;branch),
        );

        println!(
            "leaf strong = {}, weak = {}",
            Rc::strong_count(&amp;leaf),
            Rc::weak_count(&amp;leaf),
        );
    }

    println!("leaf parent = {:?}", leaf.parent.borrow().upgrade());
    println!(
        "leaf strong = {}, weak = {}",
        Rc::strong_count(&amp;leaf),
        Rc::weak_count(&amp;leaf),
    );
}</code></pre></pre>
</Listing>
<p>Tar √©is <code>leaf</code> a chruth√∫, t√° comhaireamh l√°idir 1 agus lag ag a <code>Rc&lt;Node&gt;</code>
comhaireamh 0. Sa sc√≥ip inmhe√°nach, crutha√≠mid <code>branch</code> agus d√©anaimid √© a nascadh le
<code>leaf</code>, ag an bpointe nuair a phriont√°ilimid na comhaireamh, an <code>Rc&lt;Node&gt;</code> sa <code>branch</code>
beidh comhaireamh l√°idir de 1 agus comhaireamh lag de 1 (do phointe√°il <code>leaf.parent</code>
go <code>branch</code> le <code>Weak&lt;Node&gt;</code>). Nuair a phriont√°ilimid na h√°irimh i <code>leaf</code>, feicfimid
beidh l√≠on l√°idir de 2 aige, toisc go bhfuil cl√≥n de na
<code>Rc&lt;Node&gt;</code> de <code>leaf</code> arna st√≥r√°il i <code>branch.children</code>, ach beidh lag aige f√≥s
comhaireamh 0.</p>
<p>Nuair a chr√≠ochna√≠onn an raon feidhme istigh, t√©ann <code>branch</code> as raon feidhme agus an comhaireamh l√°idir de
laghda√≠tear an <code>Rc&lt;Node&gt;</code> go 0, mar sin laghda√≠tear a <code>Node</code>. An l√≠on lag de 1
√≥ <code>leaf.parent</code> nach bhfuil aon tionchar ar cib√© an bhfuil n√≥ nach bhfuil <code>Node</code> thit, mar sin againn
n√° faigh aon sceitheadh ‚Äã‚Äãcuimhne!</p>
<p>M√° dh√©anaimid iarracht rochtain a fh√°il ar thuismitheoir <code>leaf</code> tar √©is dheireadh an sc√≥ip, gheobhaidh muid
<code>None</code> ar√≠s. Ag deireadh an chl√°ir, t√° an <code>Rc&lt;Node&gt;</code> i <code>leaf</code> l√°idir
comhaireamh de 1 agus comhaireamh lag de 0, toisc go bhfuil an athr√≥g <code>leaf</code> an t-aon anois
tagairt don <code>Rc&lt;Node&gt;</code> ar√≠s.</p>
<p>T√° an loighic ar fad a bhainist√≠onn an comhaireamh agus an titim luacha ionsuite
<code>Rc&lt;T&gt;</code> agus <code>Weak&lt;T&gt;</code> agus a gcur i bhfeidhm ar an trait <code>Drop</code>. Le
ag sonr√∫ gur ch√≥ir go mbeadh an gaol √≥ leanbh lena thuismitheoir a
Tagairt <code>Weak&lt;T&gt;</code> sa sainmh√≠ni√∫ ar <code>Node</code>, is f√©idir leat tuismitheoir a bheith agat
d√≠r√≠onn n√≥id ar n√≥id linbh agus vice versa gan timthriall tagartha a chruth√∫
agus sceitheadh ‚Äã‚Äãcuimhne.</p>
<h2 id="achoimre-14"><a class="header" href="#achoimre-14">Achoimre</a></h2>
<p>Chl√∫daigh an chaibidil seo conas leideanna cliste a √∫s√°id chun r√°tha√≠ochta√≠ √©ags√∫la a dh√©anamh agus
comhbhabht√°il √≥ na cinn a dh√©anann Rust de r√©ir r√©amhshocraithe le tagairt√≠ rialta. T√° an
T√° m√©id aitheanta ag an gcine√°l <code>Box&lt;T&gt;</code> agus point√≠ ar na sonra√≠ a leithdh√°ileadh ar an gcarn. T√° an
Coinn√≠onn cine√°l <code>Rc&lt;T&gt;</code> l√≠on na dtagairt√≠ do shonra√≠ ar an gcarn mar sin de
is f√©idir go mbeadh √∫in√©ir√≠ iolracha ag na sonra√≠ sin. An cine√°l <code>RefCell&lt;T&gt;</code> lena taobh istigh
Tugann mutability cine√°l d√∫inn gur f√©idir linn a √∫s√°id nuair a theasta√≠onn uainn cine√°l do- immutable ach
g√° luach inmhe√°nach den chine√°l sin a athr√∫; cuireann s√© an iasacht i bhfeidhm freisin
rialacha ag am rite seachas ag am tiomsaithe.</p>
<p>Pl√©adh freisin na tr√©ithe <code>Deref</code> agus <code>Drop</code>, a chuireann ar chumas go leor de na
feidhmi√∫lacht na dtreoir cliste. Rinneamar ini√∫chadh ar thimthriallta tagartha is f√©idir a bheith ina ch√∫is
sceitheanna cuimhne agus conas iad a chosc tr√≠ √∫s√°id a bhaint as <code>Weak&lt;T&gt;</code>.</p>
<p>M√° t√° do sp√©is sa chaibidil seo agus gur mhaith leat do chuid f√©in a chur i bhfeidhm
leideanna cliste, seice√°il amach <a href="../nomicon/index.html">‚ÄúThe Rustonomicon‚Äù</a> le haghaidh n√≠os √∫s√°id√≠
eolas.</p>
<p>Next, beidh muid ag caint faoi concurrency i Rust. Foghlaimeoidh t√∫ fi√∫ faoi ch√∫pla rud nua
leideanna cliste.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="comhthr√°thacht-gan-eagla"><a class="header" href="#comhthr√°thacht-gan-eagla">Comhthr√°thacht Gan Eagla</a></h1>
<p>Is ceann de phr√≠omhspriocanna Rust √© l√°imhse√°il cl√°reagr√∫ comhthr√°thach go s√°bh√°ilte agus go h√©ifeacht√∫il. T√° <em>cl√°reagr√∫ comhthr√°thach</em>, √°it a n-oibr√≠onn codanna √©ags√∫la de chl√°r go neamhsple√°ch, agus <em>cl√°reagr√∫ comhthreomhar</em>, √°it a n-oibr√≠onn codanna √©ags√∫la de chl√°r ag an am c√©anna, ag √©ir√≠ n√≠os t√°bhachta√≠ de r√©ir mar a bhaineann n√≠os m√≥
r√≠omhair√≠ leas as a bpr√≥ise√°laithe iolracha. Go stairi√∫il,
bh√≠ cl√°reagr√∫ sna comhth√©acsanna seo deacair agus seans maith go dtarl√≥idh earr√°id√≠: t√° s√∫il ag Rust
sin a athr√∫.</p>
<p>Ar dt√∫s, cheap foireann Rust gur dh√° dh√∫shl√°n ar leithligh a bh√≠ i s√°bh√°ilteacht cuimhne a chinnti√∫ agus fadhbanna
comthr√°thachta a chosc le r√©iteach le modhanna
difri√∫la. Le himeacht ama, fuair an fhoireann amach gur
sraith chumhachtach uirlis√≠ iad na c√≥rais √∫in√©ireachta agus cine√°il chun cabhr√∫ le fadhbanna
s√°bh√°ilteachta cuimhne <em>agus</em> comhthr√°thachta a bhainisti√∫! Tr√≠ √∫in√©ireacht agus seice√°il cine√°il a ghiar√°il, is earr√°id√≠ ama tiomsaithe iad go leor earr√°id√≠ comhthr√°thachta i Rust seachas earr√°id√≠ ama rithe. D√° bhr√≠ sin, seachas
go gcaithfidh t√∫ go leor ama ag iarraidh na himthosca beachta a at√°irgeadh
faoi a dtarla√≠onn fabht comhthr√°thachta ama rithe, di√∫lt√≥idh c√≥d m√≠cheart
a thioms√∫ agus cuirfidh s√© earr√°id i l√°thair ag m√≠ni√∫ na faidhbe. Mar thoradh air sin, is f√©idir leat do ch√≥d a shocr√∫ agus t√∫ ag obair air seachas b'fh√©idir tar √©is d√≥ a bheith
seolta chuig t√°irgeadh. Thugamar <em>fearless</em> ar an ngn√© seo de Rust. Ligeann comhthr√°thacht gan eagla duit c√≥d a scr√≠obh at√° saor √≥
fhabhtanna beaga agus at√° √©asca a athfhacht√∫ gan fabhtanna nua a thabhairt isteach.</p>
<blockquote>
<p>N√≥ta: Ar mhaithe le simpl√≠ocht, d√©anfaimid tagairt do go leor de na fadhbanna mar
<em>comhthreomhar</em> seachas a bheith n√≠os cruinne tr√≠ <em>comhthreomhar agus/n√≥
comhthreomhar</em> a r√°. D√° mba faoi chomhthreomharacht agus/n√≥ comhthreomharacht a bheadh an leabhar seo, bheimis
n√≠os saini√∫la. Don chaibidil seo, cuir <em>comhthreomhar
agus/n√≥ comhthreomhar</em> ina n-√°it go meabhrach aon uair a √∫s√°idimid <em>comhthreomhar</em>.</p>
</blockquote>
<p>B√≠onn go leor teangacha dogmatach faoi na r√©itigh a chuireann siad ar f√°il chun d√©ile√°il le fadhbanna comhthr√°thacha. Mar shampla, t√° feidhmi√∫lacht gal√°nta ag Erlang le haghaidh comhthr√°thacht teachtaireachta√≠ a sheoladh ach n√≠l ann ach beala√≠ doil√©ire chun staid a roinnt idir sn√°itheanna. Is strait√©is r√©as√∫nta √≠ tac√∫ le fo-thacar de r√©itigh fh√©ideartha amh√°in do theangacha ardleibh√©il, toisc go ngeallann teanga ardleibh√©il bunt√°ist√≠ a bhaineann le roinnt smachta a thabhairt suas chun teib√≠ a fh√°il. Mar sin f√©in, t√°thar ag s√∫il go sol√°thr√≥idh teangacha √≠sealleibh√©il an r√©iteach leis an bhfeidhm√≠ocht is fearr in aon ch√°s ar leith agus go mbeidh n√≠os l√∫ teib√≠ acu thar an gcrua-earra√≠. D√° bhr√≠ sin, cuireann Rust r√©imse uirlis√≠ ar f√°il chun fadhbanna a shamhalt√∫ ar aon bhealach is oiri√∫na√≠ do do ch√°s agus do riachtanais.</p>
<p>Seo iad na topaic√≠ a chl√∫d√≥imid sa chaibidil seo:</p>
<ul>
<li>Conas sn√°itheanna a chruth√∫ chun p√≠osa√≠ √©ags√∫la c√≥id a rith ag an am c√©anna</li>
<li>Comhthr√°thacht <em>Teachtaireacht-thar-rith</em>, √°it a seolann beala√≠ teachtaireachta√≠ idir sn√°itheanna</li>
<li>Comhthr√°thacht <em>St√°it-roinnte</em>, √°it a bhfuil rochtain ag sn√°itheanna iolracha ar ph√≠osa √°irithe
sonra√≠</li>
<li>Na tr√©ithe <code>Sync</code> agus <code>Send</code>, a leathna√≠onn r√°tha√≠ochta√≠ comhthr√°thachta Rust chuig
cine√°lacha sainmh√≠nithe ag an √∫s√°ideoir chomh maith le cine√°lacha a shol√°thra√≠onn an leabharlann chaighde√°nach</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sn√°itheanna-a-√ös√°id-chun-c√≥d-a-rith-ag-an-am-c√©anna"><a class="header" href="#sn√°itheanna-a-√ös√°id-chun-c√≥d-a-rith-ag-an-am-c√©anna">Sn√°itheanna a √ös√°id chun C√≥d a Rith ag an Am C√©anna</a></h2>
<p>I bhformh√≥r na gc√≥ras oibri√∫ch√°in reatha, rithtear c√≥d cl√°ir at√° curtha i gcr√≠ch i
<em>phr√≥iseas</em>, agus bainisteoidh an c√≥ras oibri√∫ch√°in ilphr√≥isis ag an am c√©anna.
Laistigh de chl√°r, is f√©idir leat codanna neamhsple√°cha a bheith agat a ritheann ag an am c√©anna.
Tugtar <em>sn√°itheanna</em> ar na gn√©ithe a ritheann na codanna neamhsple√°cha seo. Mar
shampla, d'fh√©adfadh ilshn√°itheanna a bheith ag freastala√≠ gr√©as√°in ionas go bhf√©adfadh s√© freagairt do
n√≠os m√≥ n√° iarratas amh√°in ag an am c√©anna.</p>
<p>Is f√©idir feabhas a chur ar fheidhm√≠ocht tr√≠d an r√≠omhaireacht i do chl√°r a roinnt ina ilshn√°itheanna chun il
tascanna a rith ag an am c√©anna, ach cuireann s√© castacht leis freisin.
Toisc gur f√©idir le sn√°itheanna rith ag an am c√©anna, n√≠l aon r√°tha√≠ocht dh√∫chasach ann faoin
ord ina rithfidh codanna de do ch√≥d ar shn√°itheanna √©ags√∫la. Is f√©idir leis seo fadhbanna a chruth√∫, amhail:</p>
<ul>
<li>Coinn√≠ollacha r√°sa, √°it a bhfuil sn√°itheanna ag rochtain sonra√≠ n√≥ acmhainn√≠ in ord neamhr√©ireach</li>
<li>Deadlocks, √°it a bhfuil dh√° shn√°ithe ag fanacht lena ch√©ile, rud a chuireann cosc ‚Äã‚Äãar an d√° shn√°ithe lean√∫int ar aghaidh</li>
<li>Fabhtanna nach dtarla√≠onn ach i gc√°sanna √°irithe agus at√° deacair a at√°irgeadh agus a shocr√∫
go hiontaofa</li>
</ul>
<p>D√©anann Rust iarracht na h√©ifeachta√≠ di√∫ltacha a bhaineann le sn√°itheanna a √∫s√°id a mhaol√∫, ach
t√≥gann cl√°reagr√∫ i gcomhth√©acs ilsn√°ithe machnamh c√∫ramach f√≥s agus √©il√≠onn s√©
strucht√∫r c√≥d at√° difri√∫il √≥n gceann at√° i gcl√°ir a ritheann i sn√°ithe aonair.</p>
<p>Cuireann teangacha cl√°reagraithe sn√°itheanna i bhfeidhm ar ch√∫pla bealach difri√∫il, agus sol√°thra√≠onn go leor
c√≥rais oibri√∫ch√°in API ar f√©idir leis an teanga glaoch air chun sn√°itheanna nua a chruth√∫.
√ös√°ideann leabharlann chaighde√°nach Rust samhail <em>1:1</em> de chur i bhfeidhm sn√°ithe, √°it a
n-√∫s√°ideann cl√°r sn√°ithe c√≥rais oibri√∫ch√°in amh√°in in aghaidh gach sn√°ithe teanga amh√°in. T√°
cliathbhosca√≠ ann a chuireann samhlacha eile sn√°ithe i bhfeidhm a dh√©anann comhbhabht√°lacha difri√∫la leis an
tsamhail 1:1. (Sol√°thra√≠onn c√≥ras neamhshioncr√≥nach Rust, a fheicfimid sa ch√©ad chaibidil eile, cur chuige eile maidir le comhthr√°thacht chomh maith.)</p>
<h3 id="sn√°ithe-nua-a-chruth√∫-le-spawn"><a class="header" href="#sn√°ithe-nua-a-chruth√∫-le-spawn">Sn√°ithe Nua a Chruth√∫ le <code>spawn</code></a></h3>
<p>Chun sn√°ithe nua a chruth√∫, glaoimid ar an bhfeidhm <code>thread::spawn</code> agus cuirimid d√∫nadh (labhair muid faoi dh√∫nadh i gCaibidil 13) air ina bhfuil an c√≥d is mian linn a rith sa sn√°ithe nua. Priont√°lann an sampla i Liosta 16-1 t√©acs √≥ phr√≠omh-
shn√°ithe agus t√©acs eile √≥ shn√°ithe nua:</p>
<Listing number="16-1" file-name="src/main.rs" caption="Creating a new thread to print one thing while the main thread prints something else">
<pre><pre class="playground"><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {i} from the spawned thread!");
            thread::sleep(Duration::from_millis(1));
        }
    });

    for i in 1..5 {
        println!("hi number {i} from the main thread!");
        thread::sleep(Duration::from_millis(1));
    }
}</code></pre></pre>
</Listing>
<p>Tabhair faoi deara nuair a chr√≠ochna√≠onn pr√≠omhshn√°ithe cl√°ir Rust, go nd√∫nfar s√≠os na sn√°itheanna uile a crutha√≠odh, cib√© acu an bhfuil siad cr√≠ochnaithe ag rith n√≥ nach bhfuil. D‚Äôfh√©adfadh an t-aschur √≥n gcl√°r seo a bheith beag√°n difri√∫il gach uair, ach beidh cuma air cos√∫il leis an m√©id seo a leanas:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">hi number 1 from the main thread!
hi number 1 from the spawned thread!
hi number 2 from the main thread!
hi number 2 from the spawned thread!
hi number 3 from the main thread!
hi number 3 from the spawned thread!
hi number 4 from the main thread!
hi number 4 from the spawned thread!
hi number 5 from the spawned thread!
</code></pre>
<p>Cuireann na glaonna chuig <code>thread::sleep</code> iallach ar shn√°ithe a fhorghn√≠omh√∫ a stopadh ar feadh tr√©imhse ghearr,
rud a ligeann do shn√°ithe difri√∫il rith. Is d√≥cha go nglacfaidh na sn√°itheanna
sealanna, ach n√≠l aon r√°tha√≠ocht ann go nd√©anfaidh siad amhlaidh: braitheann s√© ar an gcaoi a sceideala√≠onn do ch√≥ras oibri√∫ch√°in na sn√°itheanna. Sa rith seo, priont√°ladh an pr√≠omhshn√°ithe ar dt√∫s, c√© go
bhfuil an r√°iteas priont√°la √≥n sn√°ithe sceite le feice√°il ar dt√∫s sa ch√≥d. Agus c√© gur inis muid don sn√°ithe sceite priont√°il go dt√≠ go mbeidh <code>i</code> 9, n√≠or shroich s√© ach 5
sular dh√∫n an pr√≠omhshn√°ithe s√≠os.</p>
<p>M√° ritheann t√∫ an c√≥d seo agus mura bhfeiceann t√∫ ach aschur √≥n bpr√≠omhshn√°ithe, n√≥ mura bhfeiceann t√∫ aon
fhorlu√≠, d√©an iarracht na huimhreacha sna raonta a mh√©ad√∫ chun n√≠os m√≥ deiseanna a chruth√∫
don ch√≥ras oibri√∫ch√°in aistri√∫ idir na sn√°itheanna.</p>
<h3 id="ag-fanacht-go-gcr√≠ochn√≥idh-gach-sn√°ithe-ag-√ös√°id-l√°imhse√°lacha-join"><a class="header" href="#ag-fanacht-go-gcr√≠ochn√≥idh-gach-sn√°ithe-ag-√ös√°id-l√°imhse√°lacha-join">Ag Fanacht go gCr√≠ochn√≥idh Gach Sn√°ithe ag √ös√°id L√°imhse√°lacha <code>join</code></a></h3>
<p>N√≠ hamh√°in go stopann an c√≥d i Liost√°il 16-1 an sn√°ithe sceite roimh am an chuid is m√≥ den
am mar gheall ar dheireadh an phr√≠omhshn√°ithe, ach toisc nach bhfuil aon r√°tha√≠ocht ann maidir leis an
ord ina ritheann sn√°itheanna, n√≠ f√©idir linn a r√°th√∫ go mbeidh an sn√°ithe sceite
ag rith ar chor ar bith!</p>
<p>Is f√©idir linn an fhadhb a bhaineann leis an sn√°ithe sceite gan a bheith ag rith n√≥ ag cr√≠ochn√∫ roimh am a r√©iteach
tr√≠ luach fillte <code>thread::spawn</code> a sh√°bh√°il in athr√≥g. Is √© <code>JoinHandle</code> cine√°l fillte <code>thread::spawn</code>. Is luach √∫in√©ireachta √© <code>JoinHandle</code> a fhanfaidh, nuair a
ghlaoimid ar an modh <code>join</code> air, go gcr√≠ochn√≥idh a shn√°ithe. Taispe√°nann Liost√°il 16-2
conas <code>JoinHandle</code> an tsn√°ithe a chrutha√≠omar i Liost√°il 16-1 a √∫s√°id agus
glaoch ar <code>join</code> chun a chinnti√∫ go gcr√≠ochna√≠onn an sn√°ithe sceite sula scoireann <code>main</code>:</p>
<Listing number="16-2" file-name="src/main.rs" caption="Saving a `JoinHandle` from `thread::spawn` to guarantee the thread is run to completion">
<pre><pre class="playground"><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    let handle = thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {i} from the spawned thread!");
            thread::sleep(Duration::from_millis(1));
        }
    });

    for i in 1..5 {
        println!("hi number {i} from the main thread!");
        thread::sleep(Duration::from_millis(1));
    }

    handle.join().unwrap();
}</code></pre></pre>
</Listing>
<p>M√° ghlaonn t√∫ ar <code>join</code> ar an l√°imhse√°il, cuirtear bac ar an sn√°ithe at√° ag rith faoi l√°thair go dt√≠ go gcr√≠ochna√≠onn an
sn√°ithe a l√©ir√≠tear leis an l√°imhse√°il. M√° <em>bhacann</em> t√∫_sn√°ithe,
c√© go
gcuirtear cosc ‚Äã‚Äãar an sn√°ithe obair a dh√©anamh n√≥ imeacht. √ìs rud √© gur chuireamar an glao
chun <code>join</code> i ndiaidh l√∫b <code>for</code> an phr√≠omhshn√°ithe, ba cheart go
gcuirf√≠ aschur cos√∫il leis seo ar f√°il tr√≠ Liosta 16-2 a rith:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">hi number 1 from the main thread!
hi number 2 from the main thread!
hi number 1 from the spawned thread!
hi number 3 from the main thread!
hi number 2 from the spawned thread!
hi number 4 from the main thread!
hi number 3 from the spawned thread!
hi number 4 from the spawned thread!
hi number 5 from the spawned thread!
hi number 6 from the spawned thread!
hi number 7 from the spawned thread!
hi number 8 from the spawned thread!
hi number 9 from the spawned thread!
</code></pre>
<p>Leanann an d√° shn√°ithe ar aghaidh ag malart√∫, ach fanann an pr√≠omhshn√°ithe mar gheall ar an nglao ar <code>handle.join()</code> agus n√≠ chr√≠ochna√≠onn s√© go dt√≠ go mbeidh an sn√°ithe sceite cr√≠ochnaithe.</p>
<p>Ach f√©achfaimid cad a tharla√≠onn nuair a bhogaimid <code>handle.join()</code> ina ionad sin roimh an
l√∫b <code>for</code> i <code>main</code>, mar seo:</p>
<Listing file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    let handle = thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {i} from the spawned thread!");
            thread::sleep(Duration::from_millis(1));
        }
    });

    handle.join().unwrap();

    for i in 1..5 {
        println!("hi number {i} from the main thread!");
        thread::sleep(Duration::from_millis(1));
    }
}</code></pre></pre>
</Listing>
<p>Fanfaidh an pr√≠omhshn√°ithe go mbeidh an sn√°ithe sceite cr√≠ochnaithe agus ansin rithfidh s√© a l√∫b <code>for</code>, mar sin n√≠ bheidh an t-aschur idirnasctha a thuilleadh, mar a thaispe√°ntar anseo:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">hi number 1 from the spawned thread!
hi number 2 from the spawned thread!
hi number 3 from the spawned thread!
hi number 4 from the spawned thread!
hi number 5 from the spawned thread!
hi number 6 from the spawned thread!
hi number 7 from the spawned thread!
hi number 8 from the spawned thread!
hi number 9 from the spawned thread!
hi number 1 from the main thread!
hi number 2 from the main thread!
hi number 3 from the main thread!
hi number 4 from the main thread!
</code></pre>
<p>Is f√©idir le sonra√≠ beaga, amhail an √°it a nglaotar ar <code>join</code>, tionchar a imirt ar cib√© an ritheann do
shn√°itheanna ag an am c√©anna n√≥ nach ritheann.</p>
<h3 id="√ös√°id-d√∫nta-move-le-sn√°itheanna"><a class="header" href="#√ös√°id-d√∫nta-move-le-sn√°itheanna">√ös√°id D√∫nta <code>move</code> le Sn√°itheanna</a></h3>
<p>Is minic a √∫s√°idfimid an eochairfhocal <code>move</code> le d√∫nta a chuirtear chuig <code>thread::spawn</code> mar go nglacfaidh an d√∫nadh √∫in√©ireacht ar na luachanna a √∫s√°ideann s√© √≥n
timpeallacht ansin, rud a aistr√≠onn √∫in√©ireacht na luachanna sin √≥ shn√°ithe amh√°in go
sn√°ithe eile. Sa chuid <a href="ch13-01-closures.html#capturing-references-or-moving-ownership">‚ÄúTagairt√≠ a Ghabh√°il n√≥ √öin√©ireacht a Bhogadh‚Äù</a><!-- ignore
--> de Chaibidil 13, phl√©amar <code>move</code> i gcomhth√©acs d√∫nta. Anois,
d√≠reoidh muid n√≠os m√≥ ar an idirghn√≠omha√≠ocht idir <code>move</code> agus <code>thread::spawn</code>.</p>
<p>Tabhair faoi deara i Liost√°il 16-1 nach nglacann an d√∫nadh a chuireann muid chuig <code>thread::spawn</code> aon
arg√≥int√≠: n√≠limid ag √∫s√°id aon sonra√≠ √≥n bpr√≠omhshn√°ithe i gc√≥d an tsn√°ithe
a crutha√≠odh. Chun sonra√≠ √≥n bpr√≠omhshn√°ithe a √∫s√°id sa sn√°ithe a crutha√≠odh, n√≠ m√≥r do dh√∫nadh an tsn√°ithe a crutha√≠odh na luachanna at√° de dh√≠th air a ghabh√°il. Taispe√°nann liost√∫ 16-3 iarracht veicteoir a chruth√∫ sa phr√≠omhshn√°ithe agus √© a √∫s√°id sa sn√°ithe a crutha√≠odh. Mar sin f√©in, n√≠ oibreoidh s√© seo go f√≥ill, mar a fheicfidh t√∫ i gceann n√≥im√©id.</p>
<Listing number="16-3" file-name="src/main.rs" caption="Attempting to use a vector created by the main thread in another thread">
<pre><code class="language-rust ignore does_not_compile">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(|| {
        println!("Here's a vector: {v:?}");
    });

    handle.join().unwrap();
}</code></pre>
</Listing>
<p>√ös√°ideann an d√∫nadh <code>v</code>, mar sin gabhfaidh s√© <code>v</code> agus d√©anfaidh s√© cuid de thimpeallacht an d√∫nta de. √ìs rud √© go ritheann <code>thread::spawn</code> an d√∫nadh seo i sn√°ithe nua, ba cheart go mbeimid in ann rochtain a fh√°il ar <code>v</code> laistigh den sn√°ithe nua sin. Ach nuair a thioms√≥imid an sampla seo, faighimid an earr√°id seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling threads v0.1.0 (file:///projects/threads)
error[E0373]: closure may outlive the current function, but it borrows `v`, which is owned by the current function
 --&gt; src/main.rs:6:32
  |
6 |     let handle = thread::spawn(|| {
  |                                ^^ may outlive borrowed value `v`
7 |         println!("Here's a vector: {v:?}");
  |                                     - `v` is borrowed here
  |
note: function requires argument type to outlive `'static`
 --&gt; src/main.rs:6:18
  |
6 |       let handle = thread::spawn(|| {
  |  __________________^
7 | |         println!("Here's a vector: {v:?}");
8 | |     });
  | |______^
help: to force the closure to take ownership of `v` (and any other referenced variables), use the `move` keyword
  |
6 |     let handle = thread::spawn(move || {
  |                                ++++

For more information about this error, try `rustc --explain E0373`.
error: could not compile `threads` (bin "threads") due to 1 previous error
</code></pre>
<p>Tugann Rust <em>infers</em> le fios conas <code>v</code> a ghabh√°il, agus toisc nach bhfuil g√° ach le tagairt do <code>v</code> ag <code>println!</code>, d√©anann an d√∫nadh iarracht <code>v</code> a fh√°il ar iasacht. Mar sin f√©in, t√° fadhb ann: n√≠ f√©idir le Rust
a r√° c√© chomh fada a rithfidh an sn√°ithe sceite, mar sin n√≠l a fhios aige an mbeidh an tagairt
do <code>v</code> bail√≠ i gc√≥na√≠.</p>
<p>Sol√°thra√≠onn Liost√°il 16-4 c√°s a bhfuil seans n√≠os m√≥ ann go mbeidh tagairt ann do <code>v</code>
nach mbeidh bail√≠:</p>
<Listing number="16-4" file-name="src/main.rs" caption="A thread with a closure that attempts to capture a reference to `v` from a main thread that drops `v`">
<pre><code class="language-rust ignore does_not_compile">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(|| {
        println!("Here's a vector: {v:?}");
    });

    drop(v); // oh no!

    handle.join().unwrap();
}</code></pre>
</Listing>
<p>D√° mbeadh cead ag Rust an c√≥d seo a rith, t√° seans ann go gcuirf√≠ an sn√°ithe sceite sa ch√∫lra l√°ithreach gan √© a rith ar chor ar bith. T√° tagairt do <code>v</code> istigh sa sn√°ithe sceite, ach scaoileann an pr√≠omhsn√°ithe <code>v</code> l√°ithreach, ag baint √∫s√°ide as an bhfeidhm <code>drop</code> a phl√©amar i gCaibidil 15. Ansin, nuair a thosa√≠onn an
sn√°ithe sceite ag rith, n√≠l <code>v</code> bail√≠ a thuilleadh, mar sin t√° tagairt d√≥
neamhbhail√≠ freisin. √ì n√≠ hea!</p>
<p>Chun an earr√°id tiomsaitheora i Liost√°il 16-3 a shocr√∫, is f√©idir linn comhairle na teachtaireachta earr√°ide a √∫s√°id:</p>
<!-- manual-regeneration
after automatic regeneration, look at listings/ch16-fearless-concurrency/listing-16-03/output.txt and copy the relevant part
-->
<pre><code class="language-text">help: to force the closure to take ownership of `v` (and any other referenced variables), use the `move` keyword
  |
6 |     let handle = thread::spawn(move || {
  |                                ++++
</code></pre>
<p>Tr√≠ an eochairfhocal <code>move</code> a chur leis roimh an d√∫nadh, cuirimid iallach ar an d√∫nadh √∫in√©ireacht a ghlacadh ar na luachanna at√° √° n-√∫s√°id aige seachas ligean do Rust a thabhairt i gcr√≠ch gur cheart d√≥ na luachanna a fh√°il ar iasacht. Tioms√≥far agus rithfidh an modhn√∫ ar Liost√°il 16-3 a thaispe√°ntar i Liost√°il
16-5 mar at√° beartaithe againn:</p>
<Listing number="16-5" file-name="src/main.rs" caption="Using the `move` keyword to force a closure to take ownership of the values it uses">
<pre><pre class="playground"><code class="language-rust">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(move || {
        println!("Here's a vector: {v:?}");
    });

    handle.join().unwrap();
}</code></pre></pre>
</Listing>
<p>B‚Äôfh√©idir go mbeadh fonn orainn an rud c√©anna a thriail chun an c√≥d i Liost√°il 16-4 a shocr√∫ √°it a raibh an pr√≠omhshn√°ithe ar a dtugtar <code>drop</code> tr√≠ dh√∫nadh <code>move</code> a √∫s√°id. Mar sin f√©in, n√≠ oibreoidh an socr√∫ seo mar go bhfuil an rud at√° Liost√°il 16-4 ag iarraidh a dh√©anamh d√≠cheadaithe ar ch√∫is
dhifri√∫il. D√° gcuirfimis <code>move</code> leis an d√∫nadh, bhogfaimis <code>v</code> isteach i dtimpeallacht an
dh√∫nta, agus n√≠ fh√©adfaimis glaoch ar <code>drop</code> air sa phr√≠omhshn√°ithe a thuilleadh. Gheobhaimis an earr√°id tiomsaitheora seo ina ionad:</p>
<pre><code class="language-console">$ cargo run
   Compiling threads v0.1.0 (file:///projects/threads)
error[E0382]: use of moved value: `v`
  --&gt; src/main.rs:10:10
   |
4  |     let v = vec![1, 2, 3];
   |         - move occurs because `v` has type `Vec&lt;i32&gt;`, which does not implement the `Copy` trait
5  |
6  |     let handle = thread::spawn(move || {
   |                                ------- value moved into closure here
7  |         println!("Here's a vector: {v:?}");
   |                                     - variable moved due to use in closure
...
10 |     drop(v); // oh no!
   |          ^ value used here after move

For more information about this error, try `rustc --explain E0382`.
error: could not compile `threads` (bin "threads") due to 1 previous error
</code></pre>
<p>T√° rialacha √∫in√©ireachta Rust tar √©is sinn a sh√°bh√°il ar√≠s! Fuaireamar earr√°id √≥n gc√≥d i
Liost√∫ 16-3 toisc go raibh Rust coime√°dach agus nach raibh s√© ach ag iasacht <code>v</code> don
sn√°ithe, rud a chiallaigh go bhf√©adfadh an pr√≠omhshn√°ithe tagairt an
tsn√°ithe a crutha√≠odh a chur ar neamhn√≠ go teoirici√∫il. Tr√≠ a r√° le Rust √∫in√©ireacht <code>v</code> a bhogadh chuig an
sn√°ithe a crutha√≠odh, t√°imid ag r√°th√∫ do Rust nach n-√∫s√°idfidh an pr√≠omhshn√°ithe <code>v</code> a thuilleadh. M√°
athra√≠mid Liost√∫ 16-4 ar an mbealach c√©anna, t√°imid ag s√°r√∫ na
rialacha √∫in√©ireachta nuair a dh√©anaimid iarracht <code>v</code> a √∫s√°id sa phr√≠omhshn√°ithe. S√°ra√≠onn an eochairfhocal <code>move</code>
r√©amhshocr√∫ coime√°dach Rust maidir le hiasacht; n√≠ ligeann s√© d√∫inn na
rialacha √∫in√©ireachta a sh√°r√∫.</p>
<p>Le tuiscint bhun√∫sach ar shn√°itheanna agus ar API an tsn√°ithe, f√©achaimis ar a
is f√©idir linn a <em>dh√©anamh</em> le sn√°itheanna.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="√ös√°id-a-bhaint-as-tarchur-teachtaireachta√≠-chun-sonra√≠-a-aistri√∫-idir-sn√°itheanna"><a class="header" href="#√ös√°id-a-bhaint-as-tarchur-teachtaireachta√≠-chun-sonra√≠-a-aistri√∫-idir-sn√°itheanna">√ös√°id a bhaint as Tarchur Teachtaireachta√≠ chun Sonra√≠ a Aistri√∫ idir Sn√°itheanna</a></h2>
<p>Cur chuige at√° ag √©ir√≠ n√≠os coitianta chun comhthr√°thacht sh√°bh√°ilte a chinnti√∫ n√° <em>tarchur_teachtaireachta</em>, √°it a nd√©anann sn√°itheanna n√≥ gn√≠omhaithe cumars√°id tr√≠ theachtaireachta√≠ ina bhfuil sonra√≠ a sheoladh chuig a ch√©ile. Seo an smaoineamh i mana √≥ <a href="https://golang.org/doc/effective_go.html#concurrency">dhoicim√©adacht teanga Go</a>:
‚ÄúN√° d√©an cumars√°id tr√≠ chuimhne a roinnt; ina ionad sin, roinn cuimhne tr√≠ chumars√°id.‚Äù</p>
<p>Chun comhthr√°thacht seolta teachtaireachta√≠ a bhaint amach, sol√°thra√≠onn leabharlann chaighde√°nach Rust
cur i bhfeidhm de <em>chain√©il</em>. Is coincheap cl√°rsceidealaithe ginear√°lta √© cain√©al tr√≠na
seoltar sonra√≠ √≥ shn√°ithe amh√°in go sn√°ithe eile.</p>
<p>Is f√©idir leat cain√©al i gcl√°rsceideal√∫ a shamhl√∫ mar chain√©al treorach uisce, amhail sruth√°n n√≥ abhainn. M√° chuireann t√∫ rud √©igin cos√∫il le lacha rubair
isteach in abhainn, rachaidh s√© s√≠os an abhainn go dt√≠ deireadh an uiscebhealaigh.</p>
<p>T√° dh√° leath ag cain√©al: tarchurad√≥ir agus glacad√≥ir. Is √© leath an tarchurad√≥ra
an su√≠omh suas an abhainn ina gcuireann t√∫ lachain rubair san abhainn, agus is √©
leath an ghlacad√≥ra an √°it a gcr√≠ochna√≠onn an lacha rubair s√≠os an abhainn. Glaonn cuid amh√°in de do
ch√≥d modhanna ar an tarchurad√≥ir leis na sonra√≠ is mian leat a sheoladh, agus
seice√°lann cuid eile an taobh glacad√≥ra le haghaidh teachtaireachta√≠ at√° ag teacht isteach. Deirtear go bhfuil cain√©al
<em>d√∫nta</em> m√° scaoiltear leath an tarchurad√≥ra n√≥ an ghlacad√≥ra.</p>
<p>Anseo, oibreoimid suas go dt√≠ cl√°r a bhfuil sn√°ithe amh√°in ann chun luachanna a ghini√∫int agus
iad a sheoladh s√≠os cain√©al, agus sn√°ithe eile a gheobhaidh na luachanna agus
a phriont√°lfaidh amach iad. Seolfaimid luachanna simpl√≠ idir sn√°itheanna ag baint √∫s√°ide as cain√©al
chun an ghn√© a l√©iri√∫. Nuair a bheidh t√∫ eolach ar an teicn√≠c, d'fh√©adf√°
cain√©il a √∫s√°id le haghaidh aon sn√°itheanna a gcaithfidh cumars√°id a dh√©anamh eatarthu, mar shampla
c√≥ras comhr√° n√≥ c√≥ras ina nd√©anann go leor sn√°itheanna codanna de r√≠omh
agus na codanna a sheoladh chuig sn√°ithe amh√°in a chomhioml√°na√≠onn na tortha√≠.</p>
<p>Ar dt√∫s, i Liost√°il 16-6, cruth√≥imid cain√©al ach n√≠ dh√©anaimid aon rud leis. Tabhair faoi deara nach nd√©anfar √© seo a thioms√∫ go f√≥ill mar n√≠ f√©idir le Rust a r√° c√©n cine√°l luachanna is mian linn a sheoladh thar an gcain√©al.</p>
<p><span class="filename">Filename: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">use std::sync::mpsc;

fn main() {
    let (tx, rx) = mpsc::channel();
}</code></pre>
<p><span class="caption">Listing 16-6: Creating a channel and assigning the two
halves to <code>tx</code> and <code>rx</code></span></p>
<p>Crutha√≠mid cain√©al nua ag baint √∫s√°ide as an bhfeidhm <code>mpsc::channel</code>; seasann <code>mpsc</code> do
<em>multiple producer, single consumer</em>. Go hachomair, cialla√≠onn an chaoi a gcuireann leabharlann chaighde√°nach Rust
cain√©il i bhfeidhm gur f√©idir le cain√©al il-chr√≠ocha <em>seolta</em> a bheith aige a
th√°irgeann luachanna ach gan ach cr√≠och <em>faighte</em> amh√°in a √≠d√≠onn na luachanna sin. Samhlaigh
il-shruthanna ag sileadh le ch√©ile in aon abhainn mh√≥r amh√°in: cr√≠ochn√≥idh gach rud a sheoltar s√≠os aon cheann de na
sruthanna in aon abhainn amh√°in ag an deireadh. Tosa√≠mid le
t√°irgeoir
amh√°in faoi l√°thair, ach cuirfimid il-th√°irgeoir√≠ leis nuair a bheidh an sampla seo
ag obair againn.</p>
<p>Tugann an fheidhm <code>mpsc::channel</code> tuple ar ais, agus is √© an ch√©ad eilimint de an
chr√≠och seolta‚Äîan tarchurad√≥ir‚Äîagus is √© an dara heilimint an cr√≠och glactha‚Äîan
glacad√≥ir. √ös√°idtear na giorr√∫ch√°in <code>tx</code> agus <code>rx</code> go traidisi√∫nta i go leor r√©ims√≠
do <em>transmitter</em> agus <em>receiver</em> faoi seach, mar sin ainmn√≠mid √°r n-athr√≥ga mar sin
chun gach cr√≠och a l√©iri√∫. T√°imid ag √∫s√°id r√°iteas <code>let</code> le patr√∫n a scriosann na tupla√≠; pl√©ifimid √∫s√°id patr√∫n i r√°itis <code>let</code> agus d√≠strucht√∫r√∫ i gCaibidil 19. Faoi l√°thair, b√≠odh a fhios agat gur cur chuige √°isi√∫il √© r√°iteas <code>let</code> a √∫s√°id ar an mbealach seo chun p√≠osa√≠ an tupla a east√≥scadh a fhilleann <code>mpsc::channel</code>.</p>
<p>Bogfaimid an taobh tarchuir isteach i sn√°ithe sceite agus lig d√∫inn teaghr√°n amh√°in a sheoladh ionas go mbeidh an sn√°ithe sceite ag cumars√°id leis an bpr√≠omhshn√°ithe, mar a thaispe√°ntar i
Liost√∫ 16-7. T√° s√© seo cos√∫il le lacha rubair a chur san abhainn suas an abhainn n√≥
teachtaireacht comhr√° a sheoladh √≥ shn√°ithe amh√°in go sn√°ithe eile.</p>
<Listing number="16-7" file-name="src/main.rs" caption="Moving `tx` to a spawned thread and sending ‚Äúhi‚Äù">
<pre><pre class="playground"><code class="language-rust">use std::sync::mpsc;
use std::thread;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let val = String::from("hi");
        tx.send(val).unwrap();
    });
}</code></pre></pre>
</Listing>
<p>Ar√≠s, t√°imid ag √∫s√°id <code>thread::spawn</code> chun sn√°ithe nua a chruth√∫ agus ansin ag √∫s√°id <code>move</code>
chun <code>tx</code> a bhogadh isteach sa d√∫nadh ionas go mbeidh <code>tx</code> ag an sn√°ithe sceite. Caithfidh an sn√°ithe sceite
an tarchurad√≥ir a bheith aige chun teachtaireachta√≠ a sheoladh tr√≠d an
chain√©al. T√° modh <code>send</code> ag an tarchurad√≥ir a ghlacann an luach is mian linn a
sheoladh. Tugann an modh <code>send</code> cine√°l <code>Result&lt;T, E&gt;</code> ar ais, mar sin m√° t√° an glacad√≥ir
scaoilte cheana f√©in agus mura bhfuil √°it ar bith ann chun luach a sheoladh, cuirfidh an oibr√≠ocht seolta
earr√°id ar ais. Sa sampla seo, t√°imid ag glaoch ar <code>unwrap</code> chun scaoll a chur i gc√°s
earr√°ide. Ach in fheidhmchl√°r f√≠or, l√°imhse√°lfaimis √© i gceart: fill ar
Chaibidil 9 chun athbhreithni√∫ a dh√©anamh ar strait√©is√≠ maidir le l√°imhse√°il earr√°ide i gceart.</p>
<p>I Liost√°il 16-8, gheobhaimid an luach √≥n nglacad√≥ir sa phr√≠omhshn√°ithe. T√° s√© seo
cos√∫il leis an lacha rubair a aisghabh√°il √≥n uisce ag deireadh na habhann n√≥
teachtaireacht comhr√° a fh√°il.</p>
<Listing number="16-8" file-name="src/main.rs" caption="Receiving the value ‚Äúhi‚Äù in the main thread and printing it">
<pre><pre class="playground"><code class="language-rust">use std::sync::mpsc;
use std::thread;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let val = String::from("hi");
        tx.send(val).unwrap();
    });

    let received = rx.recv().unwrap();
    println!("Got: {received}");
}</code></pre></pre>
</Listing>
<p>T√° dh√° mhodh √∫s√°ideacha ag an nglacad√≥ir: <code>recv</code> agus <code>try_recv</code>. T√°imid ag baint √∫s√°ide as <code>recv</code>,
giorr√∫ch√°n do <em>receive</em>, a chuirfidh bac ar fhorghn√≠omh√∫ an phr√≠omhshn√°ithe agus a fhanfaidh
go dt√≠ go seolfar luach s√≠os an cain√©al. Nuair a sheolfar luach, cuirfidh <code>recv</code>
ar ais √© i <code>Result&lt;T, E&gt;</code>. Nuair a dh√∫nann an tarchurad√≥ir, cuirfidh <code>recv</code>
earr√°id ar ais chun comhartha nach mbeidh aon luachanna eile ag teacht.</p>
<p>N√≠ chuireann an modh <code>try_recv</code> bac, ach ina ionad sin cuirfidh s√© <code>Result&lt;T, E&gt;</code> ar ais
l√°ithreach: luach <code>Ok</code> ina bhfuil teachtaireacht m√° t√° ceann ar f√°il agus luach <code>Err</code>
mura bhfuil aon teachtaireachta√≠ ann an uair seo. T√° √∫s√°id <code>try_recv</code> √∫s√°ideach
m√° t√° obair eile le d√©anamh ag an sn√°ithe seo agus muid ag fanacht le teachtaireachta√≠: d'fh√©adfaimis
l√∫b a scr√≠obh
a ghlaonn ar <code>try_recv</code> √≥ am go ham, a l√°imhse√°lann teachtaireacht m√° t√° ceann ar f√°il,
agus a dh√©anann obair eile ar feadh tamaill bhig go dt√≠ go nd√©antar seice√°il
ar√≠s.</p>
<p>D'√∫s√°ideamar <code>recv</code> sa sampla seo ar mhaithe le simpl√≠ocht; n√≠l aon obair eile againn don phr√≠omhshn√°ithe le d√©anamh seachas fanacht le teachtaireachta√≠, mar sin is cu√≠ an pr√≠omhshn√°ithe a bhloc√°il.</p>
<p>Nuair a ritheann muid an c√≥d i Liosta 16-8, feicfimid an luach priont√°ilte √≥n bpr√≠omhshn√°ithe:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">Got: hi
</code></pre>
<p>Foirfe!</p>
<h3 id="cain√©il-agus-aistri√∫-√öin√©ireachta"><a class="header" href="#cain√©il-agus-aistri√∫-√öin√©ireachta">Cain√©il agus Aistri√∫ √öin√©ireachta</a></h3>
<p>T√° r√≥l r√≠th√°bhachtach ag na rialacha √∫in√©ireachta i seoladh teachtaireachta√≠ mar go gcabhra√≠onn siad leat
c√≥d s√°bh√°ilte, comhuaineach a scr√≠obh. Is √© an bunt√°iste a bhaineann le smaoineamh ar √∫in√©ireacht ar fud do chl√°ir Rust n√° earr√°id√≠ a chosc i gcl√°reagr√∫ comhuaineach. D√©anaimis
turgnamh chun a thaispe√°int conas a oibr√≠onn beala√≠ agus √∫in√©ireacht le ch√©ile chun
fadhbanna a chosc: d√©anfaimid iarracht luach <code>val</code> a √∫s√°id sa sn√°ithe sceite <em>tar √©is</em> d√∫inn
√© a sheoladh s√≠os an cain√©al. Bain triail as an gc√≥d i Liost√°il 16-9 a thioms√∫ chun a fheice√°il c√©n f√°th
nach gceada√≠tear an c√≥d seo:</p>
<Listing number="16-9" file-name="src/main.rs" caption="Attempting to use `val` after we‚Äôve sent it down the channel">
<pre><code class="language-rust ignore does_not_compile">use std::sync::mpsc;
use std::thread;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let val = String::from("hi");
        tx.send(val).unwrap();
        println!("val is {val}");
    });

    let received = rx.recv().unwrap();
    println!("Got: {received}");
}</code></pre>
</Listing>
<p>Anseo, d√©anaimid iarracht <code>val</code> a phriont√°il tar √©is d√∫inn √© a sheoladh s√≠os an cain√©al tr√≠ <code>tx.send</code>.
Bheadh ‚Äã‚Äãs√© ina dhroch-smaoineamh √© seo a chead√∫: nuair a bheidh an luach seolta chuig sn√°ithe eile, d'fh√©adfadh an sn√°ithe sin √© a mhodhn√∫ n√≥ a ligean ar l√°r sula nd√©anaimid iarracht an luach a √∫s√°id
ar√≠s. D'fh√©adfadh s√© go mbeadh earr√°id√≠ n√≥
tortha√≠ gan choinne mar thoradh ar mhodhnuithe an sn√°ithe eile mar gheall ar shonra√≠ neamhr√©ireach n√≥ neamhbheith ann. Mar sin f√©in, tugann Rust
earr√°id d√∫inn m√° dh√©anaimid iarracht an c√≥d i Liost√°il 16-9 a thioms√∫:</p>
<pre><code class="language-console">$ cargo run
   Compiling message-passing v0.1.0 (file:///projects/message-passing)
error[E0382]: borrow of moved value: `val`
  --&gt; src/main.rs:10:26
   |
8  |         let val = String::from("hi");
   |             --- move occurs because `val` has type `String`, which does not implement the `Copy` trait
9  |         tx.send(val).unwrap();
   |                 --- value moved here
10 |         println!("val is {val}");
   |                          ^^^^^ value borrowed here after move
   |
   = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)

For more information about this error, try `rustc --explain E0382`.
error: could not compile `message-passing` (bin "message-passing") due to 1 previous error
</code></pre>
<p>T√° earr√°id ama tiomsaithe mar thoradh ar √°r mbot√∫n comhthr√°thachta. Glacann an fheidhm <code>send</code> √∫in√©ireacht ar a paraim√©adar, agus nuair a bhogtar an luach, glacann an glacad√≥ir √∫in√©ireacht air. Cuireann s√© seo cosc ‚Äã‚Äãorainn an luach a √∫s√°id ar√≠s de thaisme tar √©is √© a sheoladh; seice√°lann an c√≥ras √∫in√©ireachta go bhfuil gach rud ceart go leor.</p>
<h3 id="illuachanna-a-sheoladh-agus-an-glacad√≥ir-a-fheice√°il-ag-fanacht"><a class="header" href="#illuachanna-a-sheoladh-agus-an-glacad√≥ir-a-fheice√°il-ag-fanacht">Illuachanna a Sheoladh agus an Glacad√≥ir a Fheice√°il ag Fanacht</a></h3>
<p>Tiomsa√≠odh agus rith an c√≥d i Liost√°il 16-8, ach n√≠or l√©irigh s√© go soil√©ir d√∫inn go raibh dh√° shn√°ithe ar leith ag caint lena ch√©ile thar an gcain√©al. I Liost√°il 16-10 rinneamar roinnt modhnuithe a chruth√≥idh go bhfuil an c√≥d i Liost√°il 16-8 ag rith ag an am c√©anna: seolfaidh an sn√°ithe sceite teachtaireachta√≠ iolracha anois agus sosfaidh s√© ar feadh soicind idir gach teachtaireacht.</p>
<Listing number="16-10" file-name="src/main.rs" caption="Sending multiple messages and pausing between each">
<pre><code class="language-rust noplayground">use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let vals = vec![
            String::from("hi"),
            String::from("from"),
            String::from("the"),
            String::from("thread"),
        ];

        for val in vals {
            tx.send(val).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    for received in rx {
        println!("Got: {received}");
    }
}</code></pre>
</Listing>
<p>An uair seo, t√° veicteoir teaghr√°n ag an sn√°ithe sceite ar mhaith linn a sheoladh chuig an bpr√≠omhshn√°ithe. D√©anaimid athr√° orthu, ag seoladh gach ceann ina aonar, agus sos a chur idir gach ceann tr√≠ ghlaoch ar an bhfeidhm <code>thread::sleep</code> le luach <code>Duration</code> de
1 soicind.</p>
<p>Sa phr√≠omhshn√°ithe, n√≠limid ag glaoch ar an bhfeidhm <code>recv</code> go sainr√°ite a thuilleadh:
ina √°it sin, t√°imid ag d√©ile√°il le <code>rx</code> mar athr√°. Maidir le gach luach a fhaightear, t√°imid √°
phriont√°il. Nuair a dh√∫nfar an cain√©al, cr√≠ochn√≥idh an athr√°.</p>
<p>Nuair a bh√≠onn an c√≥d i Liosta 16-10 √° rith, ba cheart duit an t-aschur seo a leanas a fheice√°il
le sos 1 soicind idir gach l√≠ne:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">Got: hi
Got: from
Got: the
Got: thread
</code></pre>
<p>√ìs rud √© nach bhfuil aon ch√≥d againn a chuireann sos n√≥ moill ar an l√∫b <code>for</code> sa
phr√≠omhshn√°ithe, is f√©idir linn a r√° go bhfuil an pr√≠omhshn√°ithe ag fanacht le luachanna a fh√°il √≥n
sn√°ithe a crutha√≠odh.</p>
<h3 id="il-th√°irgeoir√≠-a-chruth√∫-tr√≠d-an-tarchurad√≥ir-a-chl√≥n√°il"><a class="header" href="#il-th√°irgeoir√≠-a-chruth√∫-tr√≠d-an-tarchurad√≥ir-a-chl√≥n√°il">Il-Th√°irgeoir√≠ a Chruth√∫ tr√≠d an Tarchurad√≥ir a Chl√≥n√°il</a></h3>
<p>N√≠os luaithe luaigh muid gur acrainm √© <code>mpsc</code> do <em>il-th√°irgeoir,
aon tomhalt√≥ir</em>. Cuirimis <code>mpsc</code> in √∫s√°id agus leathna√≠mis an c√≥d i Liost√°il 16-10
chun il-shn√°itheanna a chruth√∫ a sheolann luachanna chuig an nglacad√≥ir c√©anna. Is f√©idir linn √© sin a dh√©anamh
tr√≠ an tarchurad√≥ir a chl√≥n√°il, mar a thaispe√°ntar i Liost√°il 16-11:</p>
<Listing number="16-11" file-name="src/main.rs" caption="Sending multiple messages from multiple producers">
<pre><code class="language-rust noplayground"><span class="boring">use std::sync::mpsc;
</span><span class="boring">use std::thread;
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span>    // --snip--

    let (tx, rx) = mpsc::channel();

    let tx1 = tx.clone();
    thread::spawn(move || {
        let vals = vec![
            String::from("hi"),
            String::from("from"),
            String::from("the"),
            String::from("thread"),
        ];

        for val in vals {
            tx1.send(val).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    thread::spawn(move || {
        let vals = vec![
            String::from("more"),
            String::from("messages"),
            String::from("for"),
            String::from("you"),
        ];

        for val in vals {
            tx.send(val).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    for received in rx {
        println!("Got: {received}");
    }

    // --snip--
<span class="boring">}</span></code></pre>
</Listing>
<p>An uair seo, sula gcrutha√≠mid an ch√©ad sn√°ithe sceite, glaoimid ar <code>clone</code> ar an
tarchurad√≥ir. Tabharfaidh s√© seo tarchurad√≥ir nua d√∫inn is f√©idir linn a chur ar aghaidh chuig an gc√©ad
sn√°ithe sceite. Cuirimid an tarchurad√≥ir bunaidh ar aghaidh chuig an dara sn√°ithe sceite.
Tugann s√© seo dh√° shn√°ithe d√∫inn, agus gach ceann acu ag seoladh teachtaireachta√≠ difri√∫la chuig an nglacad√≥ir amh√°in.</p>
<p>Nuair a ritheann t√∫ an c√≥d, ba ch√≥ir go mbeadh cuma mar seo ar d‚Äôaschur:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">Got: hi
Got: more
Got: from
Got: messages
Got: for
Got: the
Got: thread
Got: you
</code></pre>
<p>B‚Äôfh√©idir go bhfeicfe√° na luachanna in ord difri√∫il, ag brath ar do ch√≥ras. Seo √©
an rud a fh√°gann go bhfuil comhthr√°thacht suimi√∫il agus deacair araon. M√° dh√©anann t√∫ turgnamh le
<code>thread::sleep</code>, ag tabhairt luachanna √©ags√∫la d√≥ sna sn√°itheanna √©ags√∫la, beidh gach rith
n√≠os neamhchinntitheach agus cruth√≥far aschur difri√∫il gach uair.</p>
<p>Anois agus muid tar √©is breathn√∫ ar an gcaoi a n-oibr√≠onn beala√≠, f√©achaimis ar mhodh difri√∫il
comthr√°thachta.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="comhthr√°thacht-comhroinnte"><a class="header" href="#comhthr√°thacht-comhroinnte">Comhthr√°thacht Comhroinnte</a></h2>
<p>Is bealach bre√° √© teachtaireachta√≠ a sheoladh chun comhthr√°thacht a l√°imhse√°il, ach n√≠ h√© an t-aon cheann amh√°in √©. Modh eile a bheadh ‚Äã‚Äãann n√° go mbeadh rochtain ag ilshn√°itheanna ar na sonra√≠ comhroinnte c√©anna. Smaoinigh ar an gcuid seo den mana √≥ dhoicim√©ad√∫ teanga Go
ar√≠s: "n√° d√©an cumars√°id tr√≠ chuimhne a roinnt."</p>
<p>C√©n chuma a bheadh ‚Äã‚Äãar chumars√°id tr√≠ chuimhne a roinnt? Ina theannta sin, c√©n f√°th a
dtabharfadh d√≠ograiseoir√≠ teachtaireachta√≠ rabhadh gan comhroinnt cuimhne a √∫s√°id?</p>
<p>Ar bhealach, t√° beala√≠ in aon teanga r√≠omhchl√°r√∫ch√°in cos√∫il le h√∫in√©ireacht aonair,
mar nuair a aistr√≠onn t√∫ luach s√≠os cain√©al, n√≠or cheart duit an luach sin a √∫s√°id a thuilleadh. T√° comhthr√°thacht chuimhne comhroinnte cos√∫il le h√∫in√©ireacht iolrach: is f√©idir le ilshn√°itheanna
rochtain a fh√°il ar an su√≠omh cuimhne c√©anna ag an am c√©anna. Mar a chonaic t√∫ i gCaibidil 15,
√°it ar chuir pointeoir√≠ cliste √∫in√©ireacht iolrach ar f√°il, is f√©idir le h√∫in√©ireacht iolrach
castacht a chur leis toisc go gcaithfear na h√∫in√©ir√≠ √©ags√∫la seo a bhainisti√∫. Cuid√≠onn c√≥ras cine√°il Rust
agus rialacha √∫in√©ireachta go m√≥r leis an mbainist√≠ocht seo a fh√°il i gceart. Mar shampla, f√©achaimis ar mh√∫t√©acsanna, ceann de na bunghn√©ithe comhthr√°thachta is coitianta
le haghaidh cuimhne comhroinnte.</p>
<h3 id="√ös√°id-mutexanna-chun-rochtain-ar-shonra√≠-a-chead√∫-√≥-shn√°ithe-amh√°in-ag-an-am"><a class="header" href="#√ös√°id-mutexanna-chun-rochtain-ar-shonra√≠-a-chead√∫-√≥-shn√°ithe-amh√°in-ag-an-am">√ös√°id Mutexanna chun Rochtain ar Shonra√≠ a Chead√∫ √≥ Shn√°ithe Amh√°in ag an Am</a></h3>
<p>Is giorr√∫ch√°n √© <em>Mutex</em> do <em>eisiamh frithph√°irteach</em>, mar at√°, n√≠ cheada√≠onn mutex ach do
shn√°ithe amh√°in rochtain a fh√°il ar shonra√≠ √°irithe ag aon am ar leith. Chun rochtain a fh√°il ar na sonra√≠ i
mutex, n√≠ m√≥r do shn√°ithe a chur in i√∫l ar dt√∫s go bhfuil rochtain uaidh tr√≠ iarraidh <em>glas</em> an
mutex a fh√°il. Is strucht√∫r sonra√≠ √© an glas at√° mar chuid den mutex a
choinn√≠onn s√∫il ar c√© a bhfuil rochtain eisiach aige ar na sonra√≠ faoi l√°thair. D√° bhr√≠ sin, d√©antar cur s√≠os ar an
mutex mar <em>chosaint</em> na sonra√≠ at√° aige tr√≠d an gc√≥ras glas√°la.</p>
<p>T√° c√°il ar Mutexanna as a bheith deacair a √∫s√°id mar caithfidh t√∫
dh√° riail a mheabhr√∫:</p>
<ul>
<li>N√≠ m√≥r duit iarracht a dh√©anamh an glas a fh√°il sula n-√∫s√°ideann t√∫ na sonra√≠.</li>
<li>Nuair a bheidh t√∫ cr√≠ochnaithe leis na sonra√≠ a chosna√≠onn an mutex, n√≠ m√≥r duit na sonra√≠ a dh√≠ghlas√°il
ionas gur f√©idir le sn√°itheanna eile an glas a fh√°il.</li>
</ul>
<p>Mar mheafar f√≠orshaoil ‚Äã‚Äãdo mutex, samhlaigh pl√© pain√©il ag
comhdh√°il le micreaf√≥n amh√°in. Sula bhf√©adann pain√©ala√≠ labhairt, caithfidh siad a iarraidh n√≥ comhartha a thabhairt gur mian leo an micreaf√≥n a √∫s√°id. Nuair a fhaigheann siad an micreaf√≥n, is f√©idir leo labhairt chomh fada agus is mian leo agus ansin an micreaf√≥n a thabhairt don ch√©ad phain√©ala√≠ eile a iarrann labhairt. M√° dh√©anann pain√©ala√≠ dearmad an micreaf√≥n a thabhairt d√≥ibh nuair a bh√≠onn siad cr√≠ochnaithe leis, n√≠ bheidh aon duine eile in ann labhairt. Mura n-oibr√≠onn bainist√≠ocht an mhicreaf√≥in chomhroinnte, n√≠ oibreoidh an pain√©al mar a bh√≠ beartaithe!</p>
<p>Is f√©idir go mbeadh s√© thar a bheith deacair bainist√≠ocht mutex a dh√©anamh i gceart, agus sin an f√°th go bhfuil an oiread sin daoine d√≠ograiseach faoi chain√©il. Mar sin f√©in, a bhu√≠ochas le c√≥ras cine√°il agus rialacha √∫in√©ireachta Rust, n√≠ f√©idir leat dul i ngleic le glas√°il agus d√≠ghlas√°il.</p>
<h4 id="api-mutext"><a class="header" href="#api-mutext">API <code>Mutex&lt;T&gt;</code></a></h4>
<p>Mar shampla de conas mutex a √∫s√°id, d√©anaimis tos√∫ tr√≠ mutex a √∫s√°id i gcomhth√©acs aon-sn√°ithe, mar a thaispe√°ntar i Liost√°il 16-12:</p>
<Listing number="16-12" file-name="src/main.rs" caption="Exploring the API of `Mutex<T>` in a single-threaded context for simplicity">
<pre><pre class="playground"><code class="language-rust">use std::sync::Mutex;

fn main() {
    let m = Mutex::new(5);

    {
        let mut num = m.lock().unwrap();
        *num = 6;
    }

    println!("m = {m:?}");
}</code></pre></pre>
</Listing>
<p>Mar is amhlaidh le go leor cine√°lacha, crutha√≠mid <code>Mutex&lt;T&gt;</code> ag baint √∫s√°ide as an bhfeidhm ghaolmhar <code>new</code>.
Chun rochtain a fh√°il ar na sonra√≠ taobh istigh den mutex, √∫s√°idimid an modh <code>lock</code> chun an
glas a fh√°il. Cuirfidh an glao seo bac ar an sn√°ithe reatha ionas nach f√©idir leis aon obair a dh√©anamh go dt√≠
go mbeidh s√© in√°r seal an glas a bheith againn.</p>
<p>Theipfeadh ar an nglao ar <code>lock</code> d√° mbeadh scaoll ar sn√°ithe eile a bhfuil an glas aige. Sa
ch√°s sin, n√≠ bheadh ‚Äã‚Äã‚Äã‚Äãaon duine in ann an glas a fh√°il riamh, mar sin roghnaigh muid <code>unwrap</code> agus an sn√°ithe seo a bheith i scaoll m√° bh√≠mid sa ch√°s sin.</p>
<p>Tar √©is d√∫inn an glas a fh√°il, is f√©idir linn an luach fillte, ar a dtugtar <code>num</code> sa
ch√°s seo, a l√°imhse√°il mar thagairt inathraithe do na sonra√≠ taobh istigh. Cinnt√≠onn an c√≥ras cine√°il
go bhfaighimid glas sula n-√∫s√°idimid an luach i <code>m</code>. Is √© <code>Mutex&lt;i32&gt;</code> cine√°l <code>m</code>, n√≠ <code>i32</code>, mar sin <em>n√≠ m√≥r</em> d√∫inn glaoch ar <code>lock</code> chun go mbeimid in ann an luach <code>i32</code> a √∫s√°id. N√≠ f√©idir linn dearmad a dh√©anamh; n√≠ ligfidh an c√≥ras cine√°il d√∫inn rochtain a fh√°il ar an <code>i32</code> istigh
ar shl√≠ eile.</p>
<p>Mar a d'fh√©adf√° a cheapadh, is pointeoir cliste √© <code>Mutex&lt;T&gt;</code>. N√≠os cruinne, tugann an glao
chun <code>glas√°il</code> <em>ar ais</em> pointeoir cliste ar a dtugtar <code>MutexGuard</code>, fillte i
<code>LockResult</code> a l√°imhse√°il muid leis an nglao chun <code>unwrap</code>. Cuireann an pointeoir cliste <code>MutexGuard</code> <code>Deref</code> i bhfeidhm chun pointe√°il ar √°r sonra√≠ istigh; t√° cur i bhfeidhm <code>Drop</code> ag an bpointeoir cliste freisin
a scaoileann an glas go huathoibr√≠och nuair a th√©ann
<code>MutexGuard</code> lasmuigh den raon feidhme, rud a tharla√≠onn ag deireadh an raon feidhme istigh. Mar thoradh air sin, n√≠l an baol ann go nd√©anaimid dearmad an glas a scaoileadh agus bac a chur ar an mutex
√≥ bheith √° √∫s√°id ag sn√°itheanna eile, toisc go dtarla√≠onn an scaoileadh glas
go huathoibr√≠och.</p>
<p>Tar √©is an glas a scaoileadh, is f√©idir linn an luach mutex a phriont√°il agus a fheice√°il gur √©irigh linn an <code>i32</code> istigh a athr√∫ go 6.</p>
<h4 id="mutext-a-roinnt-idir-sn√°itheanna-iolracha"><a class="header" href="#mutext-a-roinnt-idir-sn√°itheanna-iolracha"><code>Mutex&lt;T&gt;</code> a roinnt idir sn√°itheanna iolracha</a></h4>
<p>Anois, d√©anaimis iarracht luach a roinnt idir sn√°itheanna iolracha ag baint √∫s√°ide as <code>Mutex&lt;T&gt;</code>.
D√©anfaimid 10 sn√°ithe a chasadh suas agus m√©ad√≥imid luach cuntair faoi 1, ionas
go dt√©ann an cuntar √≥ 0 go 10. Beidh earr√°id tiomsaitheora sa ch√©ad sampla eile i Liosta 16-13, agus √∫s√°idfimid an earr√°id sin chun n√≠os m√≥ a fhoghlaim faoi √∫s√°id <code>Mutex&lt;T&gt;</code> agus conas a chabhra√≠onn Rust linn √© a √∫s√°id i gceart.</p>
<Listing number="16-13" file-name="src/main.rs" caption="Ten threads each increment a counter guarded by a `Mutex<T>`">
<pre><code class="language-rust ignore does_not_compile">use std::sync::Mutex;
use std::thread;

fn main() {
    let counter = Mutex::new(0);
    let mut handles = vec![];

    for _ in 0..10 {
        let handle = thread::spawn(move || {
            let mut num = counter.lock().unwrap();

            *num += 1;
        });
        handles.push(handle);
    }

    for handle in handles {
        handle.join().unwrap();
    }

    println!("Result: {}", *counter.lock().unwrap());
}</code></pre>
</Listing>
<p>Crutha√≠mid athr√≥g <code>counter</code> chun <code>i32</code> a choinne√°il taobh istigh de <code>Mutex&lt;T&gt;</code>, mar a rinneamar i Liost√°il 16-12. Ansin, crutha√≠mid 10 sn√°ithe tr√≠ athr√° a dh√©anamh thar raon uimhreacha. √ös√°idimid <code>thread::spawn</code> agus tugann muid an d√∫nadh c√©anna do na sn√°itheanna go l√©ir: ceann a bhogann an t-counter isteach sa sn√°ithe, a fhaigheann glas ar an <code>Mutex&lt;T&gt;</code> tr√≠ ghlaoch ar an modh <code>lock</code>, agus ansin cuireann s√© 1 leis an luach sa mutex. Nuair a chr√≠ochna√≠onn sn√°ithe a dh√∫nadh, rachaidh <code>num</code> as raon feidhme agus scaoilfidh s√© an
glas ionas gur f√©idir le sn√°ithe eile √© a fh√°il.</p>
<p>Sa phr√≠omhshn√°ithe, bail√≠mid na l√°imhse√°lacha join go l√©ir. Ansin, mar a rinneamar i Liost√°il 16-2, glaoimid <code>join</code> ar gach l√°imhse√°il chun a chinnti√∫ go gcr√≠ochna√≠onn na sn√°itheanna go l√©ir. Ag an bpointe sin, gheobhaidh an pr√≠omhshn√°ithe an glas agus priont√°lfaidh s√© toradh an chl√°ir seo.</p>
<p>Thugamar le fios nach nd√©anfadh an sampla seo a thioms√∫. Anois, d√©anaimis a fh√°il amach c√©n f√°th!</p>
<pre><code class="language-console">$ cargo run
   Compiling shared-state v0.1.0 (file:///projects/shared-state)
error[E0382]: borrow of moved value: `counter`
  --&gt; src/main.rs:21:29
   |
5  |     let counter = Mutex::new(0);
   |         ------- move occurs because `counter` has type `Mutex&lt;i32&gt;`, which does not implement the `Copy` trait
...
8  |     for _ in 0..10 {
   |     -------------- inside of this loop
9  |         let handle = thread::spawn(move || {
   |                                    ------- value moved into closure here, in previous iteration of loop
...
21 |     println!("Result: {}", *counter.lock().unwrap());
   |                             ^^^^^^^ value borrowed here after move
   |
help: consider moving the expression out of the loop so it is only moved once
   |
8  ~     let mut value = counter.lock();
9  ~     for _ in 0..10 {
10 |         let handle = thread::spawn(move || {
11 ~             let mut num = value.unwrap();
   |

For more information about this error, try `rustc --explain E0382`.
error: could not compile `shared-state` (bin "shared-state") due to 1 previous error
</code></pre>
<p>Deir an teachtaireacht earr√°ide gur aistr√≠odh luach an <code>counter</code> san athr√° roimhe seo den l√∫b. T√° Rust ag insint d√∫inn nach f√©idir linn √∫in√©ireacht <code>counter</code> a bhogadh isteach i sn√°itheanna iolracha. D√©anaimis an earr√°id tiomsaitheora a shocr√∫ le modh il√∫in√©ireachta a phl√©amar i gCaibidil 15.</p>
<h4 id="il√∫in√©ireacht-le-sn√°itheanna-iolracha"><a class="header" href="#il√∫in√©ireacht-le-sn√°itheanna-iolracha">Il√∫in√©ireacht le Sn√°itheanna Iolracha</a></h4>
<p>I gCaibidil 15, thugamar luach il√∫in√©ir√≠ tr√≠ √∫s√°id a bhaint as an pointeoir cliste <code>Rc&lt;T&gt;</code> chun luach comhaireamh tagartha a chruth√∫. D√©anaimis an rud c√©anna anseo agus feicfimid cad a tharla√≠onn. Fillfimid an <code>Mutex&lt;T&gt;</code> i <code>Rc&lt;T&gt;</code> i Liost√°il 16-14 agus cl√≥n√°lfaimid an <code>Rc&lt;T&gt;</code> sula mbogfaimid √∫in√©ireacht chuig an sn√°ithe.</p>
<Listing number="16-14" file-name="src/main.rs" caption="Attempting to use `Rc<T>` to allow multiple threads to own the `Mutex<T>`">
<pre><code class="language-rust ignore does_not_compile">use std::rc::Rc;
use std::sync::Mutex;
use std::thread;

fn main() {
    let counter = Rc::new(Mutex::new(0));
    let mut handles = vec![];

    for _ in 0..10 {
        let counter = Rc::clone(&amp;counter);
        let handle = thread::spawn(move || {
            let mut num = counter.lock().unwrap();

            *num += 1;
        });
        handles.push(handle);
    }

    for handle in handles {
        handle.join().unwrap();
    }

    println!("Result: {}", *counter.lock().unwrap());
}</code></pre>
</Listing>
<p>Ar√≠s eile, d√©anaimid tioms√∫ agus faighimid... earr√°id√≠ difri√∫la! T√° an tiomsaitheoir ag m√∫ineadh go leor d√∫inn.</p>
<pre><code class="language-console">$ cargo run
   Compiling shared-state v0.1.0 (file:///projects/shared-state)
error[E0277]: `Rc&lt;Mutex&lt;i32&gt;&gt;` cannot be sent between threads safely
   --&gt; src/main.rs:11:36
    |
11  |           let handle = thread::spawn(move || {
    |                        ------------- ^------
    |                        |             |
    |  ______________________|_____________within this `{closure@src/main.rs:11:36: 11:43}`
    | |                      |
    | |                      required by a bound introduced by this call
12  | |             let mut num = counter.lock().unwrap();
13  | |
14  | |             *num += 1;
15  | |         });
    | |_________^ `Rc&lt;Mutex&lt;i32&gt;&gt;` cannot be sent between threads safely
    |
    = help: within `{closure@src/main.rs:11:36: 11:43}`, the trait `Send` is not implemented for `Rc&lt;Mutex&lt;i32&gt;&gt;`, which is required by `{closure@src/main.rs:11:36: 11:43}: Send`
note: required because it's used within this closure
   --&gt; src/main.rs:11:36
    |
11  |         let handle = thread::spawn(move || {
    |                                    ^^^^^^^
note: required by a bound in `spawn`
   --&gt; file:///home/.rustup/toolchains/1.82/lib/rustlib/src/rust/library/std/src/thread/mod.rs:675:8
    |
672 | pub fn spawn&lt;F, T&gt;(f: F) -&gt; JoinHandle&lt;T&gt;
    |        ----- required by a bound in this function
...
675 |     F: Send + 'static,
    |        ^^^^ required by this bound in `spawn`

For more information about this error, try `rustc --explain E0277`.
error: could not compile `shared-state` (bin "shared-state") due to 1 previous error
</code></pre>
<p>√ì, t√° an teachtaireacht earr√°ide sin an-fhoclach! Seo an chuid th√°bhachtach le d√≠ri√∫ air:
<code>`Rc&lt;Mutex&lt;i32&gt;&gt;` cannot be sent between threads safely </code>. T√° an tiomsaitheoir ag
insint d√∫inn an ch√∫is freisin: <code>the trait `Send` is not implemented for `Rc&lt;Mutex&lt;i32&gt;&gt;`</code>. Labhr√≥imid faoi <code>Send</code> sa ch√©ad chuid eile: is ceann de
na tr√©ithe √© a chinnt√≠onn go bhfuil na cine√°lacha a √∫s√°idimid le sn√°itheanna ceaptha lena n-√∫s√°id i
gc√°sanna comhthr√°thacha.</p>
<p>Ar an drochuair, n√≠l <code>Rc&lt;T&gt;</code> s√°bh√°ilte a roinnt trasna sn√°itheanna. Nuair a bhainist√≠onn <code>Rc&lt;T&gt;</code>
an comhaireamh tagartha, cuireann s√© leis an gcomhaireamh do gach glao chuig <code>clone</code> agus
baineann s√© √≥n gcomhaireamh nuair a scaoiltear gach cl√≥n. Ach n√≠ √∫s√°ideann s√© aon
bhunphrionsabail chomhthr√°thacha chun a chinnti√∫ nach f√©idir le sn√°ithe eile
cur isteach ar athruithe ar an gcomhaireamh. D‚Äôfh√©adfadh s√© seo a bheith ina ch√∫is le comhaireamh m√≠cheart‚Äîfabhtanna caolch√∫iseacha a
d‚Äôfh√©adfadh sceitheanna cuimhne n√≥ luach a chailleadh sula mbeidh muid cr√≠ochnaithe
leis. Is cine√°l at√° d√≠reach cos√∫il le <code>Rc&lt;T&gt;</code> at√° de dh√≠th orainn ach ceann a dh√©anann athruithe
ar an gcomhaireamh tagartha ar bhealach at√° s√°bh√°ilte √≥ thaobh sn√°ithe de.</p>
<h4 id="comhaireamh-tagartha-adamhach-le-arct"><a class="header" href="#comhaireamh-tagartha-adamhach-le-arct">Comhaireamh Tagartha Adamhach le <code>Arc&lt;T&gt;</code></a></h4>
<p>Ar √°mhara√≠ an tsaoil, is cine√°l cos√∫il le <code>Rc&lt;T&gt;</code> √© <code>Arc&lt;T&gt;</code> at√° s√°bh√°ilte le h√∫s√°id i
gc√°sanna comhthr√°thacha. Seasann an <em>a</em> do <em>atomic</em>, rud a chialla√≠onn gur cine√°l <em>adamhach
comhairimh</em> tagartha √©. Is cine√°l breise comhthr√°thachta
bunaidh iad adamhach nach gcl√∫d√≥imid go mion anseo: f√©ach ar an doicim√©ad√∫
leabharlainne caighde√°nach le haghaidh <a href="../std/sync/atomic/index.html"><code>std::sync::atomic</code></a><!-- neamhaird --> le haghaidh tuilleadh
sonra√≠. Ag an bpointe seo, n√≠l le d√©anamh agat ach a fhios a bheith agat go n-oibr√≠onn adamhach cos√∫il le cine√°lacha
bunaidh ach go bhfuil siad s√°bh√°ilte a roinnt trasna sn√°itheanna.</p>
<p>B‚Äôfh√©idir go mbeadh iontas ort ansin c√©n f√°th nach bhfuil gach cine√°l primitive adamhach agus c√©n f√°th nach gcuirtear cine√°lacha caighde√°nacha leabharlainne i bhfeidhm chun <code>Arc&lt;T&gt;</code> a √∫s√°id de r√©ir r√©amhshocraithe. Is √© an ch√∫is at√° leis sin n√° go dtagann pion√≥s feidhm√≠ochta le s√°bh√°ilteacht sn√°ithe nach mian leat a √≠oc ach nuair a
bh√≠onn g√° agat leis i nd√°ir√≠re. M√° t√° t√∫ ag d√©anamh oibr√≠ochta√≠ ar luachanna laistigh de
shn√°ithe amh√°in, is f√©idir le do ch√≥d rith n√≠os tap√∫la mura g√° d√≥ na
r√°tha√≠ochta√≠ a shol√°thra√≠onn adamhach a fhorfheidhmi√∫.</p>
<p>Fillfimid ar √°r sampla: T√° an API c√©anna ag <code>Arc&lt;T&gt;</code> agus <code>Rc&lt;T&gt;</code>, mar sin socra√≠mid
√°r gcl√°r tr√≠d an l√≠ne <code>use</code>, an glao go <code>new</code>, agus an glao go
<code>clone</code> a athr√∫. Tioms√≥idh agus rithfidh an c√≥d i Liosta 16-15 sa deireadh:</p>
<Listing number="16-15" file-name="src/main.rs" caption="Using an `Arc<T>` to wrap the `Mutex<T>` to be able to share ownership across multiple threads">
<pre><pre class="playground"><code class="language-rust">use std::sync::{Arc, Mutex};
use std::thread;

fn main() {
    let counter = Arc::new(Mutex::new(0));
    let mut handles = vec![];

    for _ in 0..10 {
        let counter = Arc::clone(&amp;counter);
        let handle = thread::spawn(move || {
            let mut num = counter.lock().unwrap();

            *num += 1;
        });
        handles.push(handle);
    }

    for handle in handles {
        handle.join().unwrap();
    }

    println!("Result: {}", *counter.lock().unwrap());
}</code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d seo an m√©id seo a leanas:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">Result: 10
</code></pre>
<p>Rinneamar √©! Chomhaireamhamar √≥ 0 go 10, rud nach mbeadh an-suntasach b'fh√©idir, ach mh√∫in s√© go leor d√∫inn faoi <code>Mutex&lt;T&gt;</code> agus s√°bh√°ilteacht sn√°itheanna. D'fh√©adf√° strucht√∫r an chl√°ir seo a √∫s√°id freisin chun oibr√≠ochta√≠ n√≠os casta a dh√©anamh n√° d√≠reach cuntar a mh√©ad√∫. Ag baint √∫s√°ide as an strait√©is seo, is f√©idir leat r√≠omh a roinnt ina chodanna neamhsple√°cha, na codanna sin a roinnt thar shn√°itheanna, agus ansin <code>Mutex&lt;T&gt;</code> a √∫s√°id chun go nd√©anfaidh gach
sn√°ithe an toradh deiridh a nuashonr√∫ lena chuid.</p>
<p>Tabhair faoi deara, m√° t√° t√∫ ag d√©anamh oibr√≠ochta√≠ uimhri√∫la simpl√≠, go bhfuil cine√°lacha n√≠os simpl√≠ ann
n√° cine√°lacha <code>Mutex&lt;T&gt;</code> arna sol√°thar ag an mod√∫l <a href="../std/sync/atomic/index.html"><code>std::sync::atomic</code> den
leabharlann chaighde√°nach</a><!-- ignore -->. Sol√°thra√≠onn na cine√°lacha seo rochtain sh√°bh√°ilte, chomhuaineach,
adamhach ar chine√°lacha primitive. Roghna√≠omar <code>Mutex&lt;T&gt;</code> a √∫s√°id le cine√°l primitive
don sampla seo ionas go bhf√©adfaimis d√≠ri√∫ ar an gcaoi a n-oibr√≠onn <code>Mutex&lt;T&gt;</code>.</p>
<h3 id="cos√∫lachta√≠-idir-refcelltrct-agus-mutextarct"><a class="header" href="#cos√∫lachta√≠-idir-refcelltrct-agus-mutextarct">Cos√∫lachta√≠ idir <code>RefCell&lt;T&gt;</code>/<code>Rc&lt;T&gt;</code> agus <code>Mutex&lt;T&gt;</code>/<code>Arc&lt;T&gt;</code></a></h3>
<p>B‚Äôfh√©idir gur thug t√∫ faoi deara nach f√©idir an <code>counter</code> a athr√∫ ach go bhf√©adfaimis tagairt inathraithe a fh√°il don luach at√° istigh ann; cialla√≠onn s√© seo go sol√°thra√≠onn <code>Mutex&lt;T&gt;</code> inathraitheacht inmhe√°nach, mar a dh√©anann an teaghlach <code>Cell</code>. Ar an gcaoi ch√©anna a d‚Äô√∫s√°ideamar <code>RefCell&lt;T&gt;</code> i
gCaibidil 15 chun ligean d√∫inn √°bhar a athr√∫ laistigh de <code>Rc&lt;T&gt;</code>, √∫s√°idimid <code>Mutex&lt;T&gt;</code> chun √°bhar a athr√∫ laistigh de <code>Arc&lt;T&gt;</code>.</p>
<p>Sonra eile le tabhairt faoi deara n√° nach f√©idir le Rust t√∫ a chosaint √≥ gach cine√°l earr√°ide loighce
nuair a √∫s√°ideann t√∫ <code>Mutex&lt;T&gt;</code>. Cuimhnigh i gCaibidil 15 gur th√°inig an baol timthriallta tagartha a chruth√∫ le h√∫s√°id <code>Rc&lt;T&gt;</code>, √°it a dtagra√≠onn dh√° luach <code>Rc&lt;T&gt;</code> d√° ch√©ile, rud a fh√°gann sceitheanna cuimhne. Ar an gcaoi ch√©anna, t√° an baol ann go gcruth√≥far <em>deadlocks</em> le <code>Mutex&lt;T&gt;</code>. Tarla√≠onn siad seo nuair a bh√≠onn ar oibr√≠ocht dh√° acmhainn a ghlas√°il
agus nuair a bh√≠onn ceann de na glais faighte ag dh√° shn√°ithe, rud a fh√°gann go bhfanann siad
le ch√©ile go deo. M√°s sp√©is leat deadlocks, d√©an iarracht cl√°r Rust a chruth√∫
a bhfuil deadlock ann; ansin d√©an taighde ar strait√©is√≠ maolaithe deadlock do
mutexes in aon teanga agus d√©an iarracht iad a chur i bhfeidhm i Rust. Cuireann
an doicim√©ad√∫ caighde√°nach leabharlainne API do <code>Mutex&lt;T&gt;</code> agus <code>MutexGuard</code>
eolas √∫s√°ideach ar f√°il.</p>
<p>Cuirfimid clabhs√∫r ar an gcaibidil seo tr√≠ labhairt faoi na tr√©ithe <code>Send</code> agus <code>Sync</code> agus
conas is f√©idir linn iad a √∫s√°id le cine√°lacha saincheaptha.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="comhthr√°thacht-inleathnaithe-leis-na-tr√©ithe-sync-agus-send"><a class="header" href="#comhthr√°thacht-inleathnaithe-leis-na-tr√©ithe-sync-agus-send">Comhthr√°thacht Inleathnaithe leis na Tr√©ithe <code>Sync</code> agus <code>Send</code></a></h2>
<p>Is suimi√∫il go bhfuil <em>an-bheag√°n</em> gn√©ithe comhthr√°thachta ag an teanga Rust. T√° beagnach
gach
gn√© comhthr√°thachta a phl√©amar go dt√≠ seo sa chaibidil seo
mar chuid den leabharlann chaighde√°nach, n√≠ den teanga. N√≠l do roghanna maidir le l√°imhse√°il
comthr√°thacht teoranta don teanga n√° don leabharlann chaighde√°nach; is f√©idir leat
do ghn√©ithe comhthr√°thachta f√©in a scr√≠obh n√≥ iad si√∫d a scr√≠obh daoine eile a √∫s√°id.</p>
<p>Mar sin f√©in, t√° dh√° choincheap comhthr√°thachta leabaithe sa teanga: na
tr√©ithe <code>std::marker</code> <code>Sync</code> agus <code>Send</code>.</p>
<h3 id="cead√∫-aistri√∫-√öin√©ireachta-idir-sn√°itheanna-le-send"><a class="header" href="#cead√∫-aistri√∫-√öin√©ireachta-idir-sn√°itheanna-le-send">Cead√∫ Aistri√∫ √öin√©ireachta Idir Sn√°itheanna le <code>Send</code></a></h3>
<p>L√©ir√≠onn an tr√©ith marc√≥ra <code>Send</code> gur f√©idir √∫in√©ireacht luachanna den chine√°l
a chuireann <code>Send</code> i bhfeidhm a aistri√∫ idir sn√°itheanna. Is beagnach gach cine√°l Rust √© <code>Send</code>, ach t√° roinnt eisceachta√≠ ann, lena n-√°ir√≠tear <code>Rc&lt;T&gt;</code>: n√≠ f√©idir √© seo a bheith
<code>Send</code> mar m√° chl√≥n√°lann t√∫ luach <code>Rc&lt;T&gt;</code> agus m√° dh√©anann t√∫ iarracht √∫in√©ireacht an chl√≥in a aistri√∫
go sn√°ithe eile, d'fh√©adfadh an d√° shn√°ithe an comhaireamh tagartha a nuashonr√∫
ag an am c√©anna. Ar an gc√∫is seo, cuirtear <code>Rc&lt;T&gt;</code> i bhfeidhm lena √∫s√°id i
gc√°sanna aon-sn√°ithe nach mian leat an pion√≥s feidhm√≠ochta s√°bh√°ilte sn√°ithe a √≠oc.</p>
<p>D√° bhr√≠ sin, cinnt√≠onn c√≥ras cine√°lacha agus teorainneacha tr√©ithe Rust nach f√©idir leat
luach <code>Rc&lt;T&gt;</code> a sheoladh de thaisme trasna sn√°itheanna go neamhsh√°bh√°ilte. Nuair a rinneamar iarracht
√© seo a dh√©anamh i Liost√°il 16-14, fuair muid an earr√°id <code>the trait Send is not implemented for Rc&lt;Mutex&lt;i32&gt;&gt;</code>. Nuair a d'athra√≠omar go <code>Arc&lt;T&gt;</code>, arb √© <code>Send</code> √©, tiomsa√≠odh an c√≥d.</p>
<p>Aon chine√°l at√° comhdh√©anta go hioml√°n de chine√°lacha <code>Send</code>, marc√°iltear go huathoibr√≠och mar <code>Send</code> chomh maith. Is <code>Send</code> beagnach gach cine√°l primitive, seachas pointeoir√≠ amha, a phl√©ifimid i gCaibidil 20.</p>
<h3 id="cead√∫-rochtain-√≥-il-shn√°itheanna-le-sync"><a class="header" href="#cead√∫-rochtain-√≥-il-shn√°itheanna-le-sync">Cead√∫ Rochtain √≥ Il-Shn√°itheanna le <code>Sync</code></a></h3>
<p>L√©ir√≠onn an tr√©ith marc√≥ra <code>Sync</code> go bhfuil s√© s√°bh√°ilte don chine√°l a chuireann <code>Sync</code> i bhfeidhm tagairt a dh√©anamh d√≥ √≥ il-shn√°itheanna. I bhfocail eile, is <code>Sync</code> aon chine√°l <code>T</code> m√° t√° <code>&amp;T</code> (tagairt neamh-inathraithe do <code>T</code>) ina <code>Send</code>, rud a chialla√≠onn gur f√©idir an tagairt a sheoladh go s√°bh√°ilte chuig sn√°ithe eile. Cos√∫il le <code>Send</code>, is <code>Sync</code> cine√°lacha primitive, agus is <code>Sync</code> cine√°lacha at√° comhdh√©anta go hioml√°n de chine√°lacha at√° ina <code>Sync</code> freisin.</p>
<p>N√≠ <code>Sync</code> an pointeoir cliste <code>Rc&lt;T&gt;</code> ar na c√∫iseanna c√©anna nach
<code>Send</code> √©. N√≠ <code>Sync</code> an cine√°l <code>RefCell&lt;T&gt;</code> (a labhair muid faoi i gCaibidil 15) agus an
teaghlach de chine√°lacha gaolmhara <code>Cell&lt;T&gt;</code>. N√≠l cur i bhfeidhm iasachta
ag seice√°il go nd√©anann <code>RefCell&lt;T&gt;</code> ag am rith s√°bh√°ilte √≥ thaobh sn√°ithe de. Is √© <code>Sync</code> an pointeoir cliste
<code>Mutex&lt;T&gt;</code> agus is f√©idir √© a √∫s√°id chun rochtain a roinnt le sn√°itheanna
il mar a chonaic t√∫ sa chuid <a href="ch16-03-shared-state.html#sharing-a-mutext-between-multiple-threads">"<code>Mutex&lt;T&gt;</code> a roinnt idir sn√°itheanna iomad√∫la"</a><!-- ignore -->.</p>
<h3 id="t√°-send-agus-sync-a-chur-i-bhfeidhm-de-l√°imh-neamhsh√°bh√°ilte"><a class="header" href="#t√°-send-agus-sync-a-chur-i-bhfeidhm-de-l√°imh-neamhsh√°bh√°ilte">T√° <code>Send</code> agus <code>Sync</code> a Chur i bhFeidhm de L√°imh Neamhsh√°bh√°ilte</a></h3>
<p>Toisc go bhfuil cine√°lacha at√° comhdh√©anta de thr√©ithe <code>Send</code> agus <code>Sync</code> go huathoibr√≠och
freisin <code>Send</code> agus <code>Sync</code>, n√≠ g√° d√∫inn na tr√©ithe sin a chur i bhfeidhm de l√°imh. Mar
thr√©ithe marc√≥ra, n√≠l aon mhodhanna acu fi√∫ le cur i bhfeidhm. T√° siad
√∫s√°ideach chun neamhathraitheach a bhaineann le comhthr√°thacht a fhorfheidhmi√∫.</p>
<p>B√≠onn c√≥d Rust neamhsh√°bh√°ilte √° chur i bhfeidhm i gceist le cur i bhfeidhm na dtr√©ithe seo de l√°imh.</p>
<p>Labhr√≥imid faoi ch√≥d Rust neamhsh√°bh√°ilte a √∫s√°id i gCaibidil 20; faoi ‚Äã‚Äãl√°thair, is √© an fhaisn√©is th√°bhachtach n√° go n-√©il√≠onn t√≥g√°il cine√°lacha comhthr√°thacha nua nach bhfuil comhdh√©anta de chodanna <code>Send</code> agus
<code>Sync</code> machnamh c√∫ramach chun na r√°tha√≠ochta√≠ s√°bh√°ilteachta a choinne√°il. T√° tuilleadh eolais faoi na r√°tha√≠ochta√≠ seo agus conas iad a choinne√°il sa <a href="../nomicon/index.html">‚ÄúThe
Rustonomicon‚Äù</a>.</p>
<h2 id="achoimre-15"><a class="header" href="#achoimre-15">Achoimre</a></h2>
<p>N√≠ h√© seo an uair dheireanach a fheicfidh t√∫ comhthr√°thacht sa leabhar seo: d√≠r√≠onn an ch√©ad chaibidil eile ar fad ar chl√°reagr√∫ neamhshioncr√≥nach, agus √∫s√°idfidh an tionscadal i gCaibidil 21 na
coincheapa sa chaibidil seo i gc√°s n√≠os r√©ad√∫la n√° na sampla√≠ n√≠os l√∫
a phl√©itear anseo.</p>
<p>Mar a luadh cheana, toisc nach bhfuil m√≥r√°n den chaoi a l√°imhse√°lann Rust comhthr√°thacht mar chuid den teanga, cuirtear go leor r√©itigh chomhthr√°thachta i bhfeidhm mar chliathbhosca√≠.
Forbra√≠onn siad seo n√≠os tap√∫la n√° an leabharlann chaighde√°nach, mar sin b√≠ cinnte cuardach a dh√©anamh ar l√≠ne le haghaidh na gcliathbhosca√≠ reatha, √∫rscothacha le h√∫s√°id i gc√°sanna il-shn√°ithithe.</p>
<p>Sol√°thra√≠onn leabharlann chaighde√°nach Rust beala√≠ le haghaidh teachtaireachta√≠ a rith agus cine√°lacha pointeora cliste, amhail <code>Mutex&lt;T&gt;</code> agus <code>Arc&lt;T&gt;</code>, at√° s√°bh√°ilte le h√∫s√°id i gcomhth√©acsanna comhthr√°thacha. Cinnt√≠onn an c√≥ras cine√°lacha agus an seice√°la√≠ iasachta nach mbeidh r√°sa√≠ sonra√≠ n√° tagairt√≠ neamhbhail√≠ sa ch√≥d a √∫s√°ideann na r√©itigh seo.
Nuair a gheobhaidh t√∫ do ch√≥d le tioms√∫, is f√©idir leat a bheith cinnte go rithfidh s√© go sona s√°sta ar ilshn√°itheanna gan na cine√°lacha fabhtanna at√° deacair a rian√∫ at√° coitianta i dteangacha eile. N√≠ coincheap le bheith eaglach roimhe a thuilleadh √© cl√°ir chomhthr√°thacha:
t√©igh ar aghaidh agus d√©an do chl√°ir chomhthr√°thacha, gan eagla!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bun√∫sacha-na-cl√°reagraithe-asincr√≥na√≠-asincr√≥nach-fanacht-todhcha√≠-agus-sruthanna"><a class="header" href="#bun√∫sacha-na-cl√°reagraithe-asincr√≥na√≠-asincr√≥nach-fanacht-todhcha√≠-agus-sruthanna">Bun√∫sacha na Cl√°reagraithe Asincr√≥na√≠: Asincr√≥nach, Fanacht, Todhcha√≠, agus Sruthanna</a></h1>
<p>F√©adann s√© tamall a th√≥g√°il chun go leor oibr√≠ochta√≠ a iarrann muid ar an r√≠omhaire a dh√©anamh a chr√≠ochn√∫. Bheadh ‚Äã‚Äãs√©
deas d√° bhf√©adfaimis rud √©igin eile a dh√©anamh agus muid ag fanacht leis na
pr√≥isis fhada sin a bheith cr√≠ochnaithe. Cuireann r√≠omhair√≠ nua-aimseartha dh√° theicn√≠c ar f√°il chun
oibri√∫ ar n√≠os m√≥ n√° oibr√≠ocht amh√°in ag an am: comhthreomhaireacht agus comhthr√°thacht. Nuair a
thosa√≠mid ag scr√≠obh cl√°r a bhaineann le hoibr√≠ochta√≠ comhthreomhara n√≥ comhthr√°thacha,
√°fach, tagaimid go tapa ar dh√∫shl√°in nua a bhaineann le <em>chl√°reagr√∫_asincr√≥nach</em>, √°it nach bhf√©adfadh oibr√≠ochta√≠ cr√≠ochn√∫ go seicheamhach san ord a
tosa√≠odh. T√≥g√°lann an chaibidil seo ar √∫s√°id sn√°itheanna i gCaibidil 16 le haghaidh comhthreomhaireachta
agus comhthr√°thachta tr√≠ chur chuige malartach a thabhairt isteach i leith
chl√°reagr√∫_asincr√≥nach: Todhcha√≠, Sruthanna Rust, an comhr√©ir <code>async</code> agus <code>await</code> a
thaca√≠onn leo, agus na huirlis√≠ chun oibr√≠ochta√≠
asincr√≥nacha a bhainisti√∫ agus a chomhord√∫.</p>
<p>Breithn√≠mis ar shampla. Abair go bhfuil t√∫ ag easp√≥rt√°il f√≠se√°n at√° cruthaithe agat de
cheili√∫radh teaghlaigh, oibr√≠ocht a d'fh√©adfadh n√≥im√©ad go huaireanta a th√≥g√°il.
√ös√°idfidh an easp√≥rt√°il f√≠se√°in an oiread cumhachta LAP agus GPU agus is f√©idir leis. D√° mbeadh
cro√≠l√°r LAP amh√°in agat agus mura gcuirfeadh do ch√≥ras oibri√∫ch√°in an easp√≥rt√°il sin ar sos go dt√≠ go
bh√≠ s√© cr√≠ochnaithe‚Äîis √© sin, d√° nd√©anfadh s√© an easp√≥rt√°il <em>go sioncr√≥nach</em>‚Äîn√≠ fh√©adf√°
aon rud eile a dh√©anamh ar do r√≠omhaire agus an tasc sin √° rith. Bheadh ‚Äã‚Äãs√© sin
ina thaith√≠ s√°ch frustrach. Ar √°mhara√≠ an tsaoil, is f√©idir le c√≥ras oibri√∫ch√°in do r√≠omhaire,
agus d√©anann s√©, cur isteach go dofheicthe ar an easp√≥rt√°il go minic go leor chun ligean duit
obair eile a dh√©anamh ag an am c√©anna.</p>
<p>Anois abair go bhfuil t√∫ ag √≠osl√≥d√°il f√≠se√°n a roinneann duine eile, rud a d'fh√©adfadh tamall a th√≥g√°il freisin
ach nach nglacann an oiread sin ama LAP. Sa ch√°s seo, caithfidh an LAP fanacht
le go dtiocfaidh sonra√≠ √≥n l√≠onra. C√© gur f√©idir leat tos√∫ ag l√©amh na sonra√≠ a luaithe
a thosa√≠onn siad ag teacht, d'fh√©adfadh s√© tamall a th√≥g√°il chun iad go l√©ir a thaispe√°int. Fi√∫ nuair a bheidh na sonra√≠ go l√©ir i l√°thair, m√° t√° an f√≠se√°n s√°ch m√≥r, d'fh√©adfadh s√© soicind n√≥ dh√≥ a th√≥g√°il chun √© a lucht√∫ go l√©ir. B'fh√©idir nach bhfuil cuma mh√≥r air sin, ach is tr√©imhse an-fhada √© do phr√≥ise√°la√≠ nua-aimseartha, ar f√©idir leis na billi√∫in oibr√≠ochta√≠ a dh√©anamh gach soicind. Ar√≠s, cuirfidh do ch√≥ras oibri√∫ch√°in isteach go dofheicthe ar do chl√°r chun ligean don LAP obair eile a dh√©anamh agus √© ag fanacht leis an nglao l√≠onra a bheith cr√≠ochnaithe.</p>
<p>Is sampla d'oibr√≠ocht <em>ceangailte le LAP</em> n√≥ <em>ceangailte le r√≠omh</em> √© an onnmhairi√∫ f√≠se√°in.
T√° s√© teoranta ag luas pr√≥ise√°la sonra√≠ f√©ideartha an r√≠omhaire laistigh den LAP n√≥
GPU, agus c√© mh√©ad den luas sin is f√©idir leis a thiomn√∫ don oibr√≠ocht. Is sampla d'oibr√≠ocht <em>ceangailte le hIO</em> √© an √≠osl√≥d√°il f√≠se√°in, toisc go bhfuil s√© teoranta ag
luas <em>ionchuir agus aschuir</em> an r√≠omhaire; n√≠ f√©idir leis dul ach chomh tapa agus is f√©idir na sonra√≠
a sheoladh trasna an l√≠onra.</p>
<p>Sna sampla√≠ seo araon, sol√°thra√≠onn cur isteach dofheicthe an ch√≥rais oibri√∫ch√°in
cine√°l comhthr√°thachta. N√≠ tharla√≠onn an comhthr√°thacht sin ach ag leibh√©al an chl√°ir ioml√°in, √°fach: cuireann an c√≥ras oibri√∫ch√°in isteach ar chl√°r amh√°in chun ligean do chl√°ir eile
obair a dh√©anamh. I go leor c√°sanna, toisc go dtuigeann muid √°r gcl√°ir ar
leibh√©al i bhfad n√≠os mine n√° mar a dh√©anann an c√≥ras oibri√∫ch√°in, is f√©idir linn
deiseanna le haghaidh comhthr√°thachta nach f√©idir leis an gc√≥ras oibri√∫ch√°in a fheice√°il a fheice√°il.</p>
<p>Mar shampla, m√° t√°imid ag t√≥g√°il uirlis chun √≠osl√≥d√°lacha comhad a bhainisti√∫, ba cheart go mbeimid
in ann √°r gcl√°r a scr√≠obh sa chaoi is nach gcuirfidh t√∫s le h√≠osl√≥d√°il amh√°in bac ar an gcomh√©adan √∫s√°ideora,
agus ba cheart go mbeadh √∫s√°ideoir√≠ in ann il-√≠osl√≥d√°lacha a thos√∫ ag an am c√©anna. T√° go leor
APIanna c√≥rais oibri√∫ch√°in chun idirghn√≠omh√∫ leis an l√≠onra ag <em>bloc√°il</em>, √°fach;
is ‚Äã‚Äã√© sin, cuireann siad bac ar dhul chun cinn an chl√°ir go dt√≠ go mbeidh na sonra√≠ at√° √° bpr√≥ise√°il acu
r√©idh go hioml√°n.</p>
<blockquote>
<p>N√≥ta: Seo mar a oibr√≠onn <em>an chuid is m√≥</em> de ghlaonna feidhme, m√° smaoin√≠onn t√∫ air. Mar sin f√©in,
is gn√°ch go mb√≠onn an t√©arma <em>bloc√°il</em> curtha in √°irithe do ghlaonna feidhme a idirghn√≠omha√≠onn le
comhaid, an l√≠onra, n√≥ acmhainn√≠ eile ar an r√≠omhaire, mar is iad sin na
c√°sanna ina mbainfeadh cl√°r aonair leas as an oibr√≠ocht a bheith
<em>neamh</em>-bhloc√°lach.</p>
</blockquote>
<p>D'fh√©adfaimis √°r bpr√≠omhshn√°ithe a sheachaint tr√≠ shn√°ithe tiomnaithe a chruth√∫ chun
gach comhad a √≠osl√≥d√°il. Mar sin f√©in, bheadh ‚Äã‚Äã‚Äã‚Äãforchostais na sn√°itheanna sin ina fhadhb sa deireadh. Bheadh ‚Äã‚Äã‚Äã‚Äãs√© n√≠os fearr mura mbeadh an glao bloc√°ilte sa ch√©ad
√°it. Bheadh ‚Äã‚Äã‚Äã‚Äãs√© n√≠os fearr freisin d√° bhf√©adfaimis scr√≠obh san st√≠l dh√≠reach ch√©anna a √∫s√°idimid
i gc√≥d bloc√°la, cos√∫il leis seo:</p>
<pre><code class="language-rust ignore does_not_compile">let data = fetch_data_from(url).await;
println!("{data}");</code></pre>
<p>Sin go d√≠reach a thugann teib√≠ocht <em>async</em> (gearr do <em>asynchronous</em>) Rust
d√∫inn. Sa chaibidil seo, foghlaimeoidh t√∫ gach rud faoi neamhshioncr√≥nach agus muid ag cl√∫dach na dtopaic√≠ seo a leanas:</p>
<ul>
<li>Conas comhr√©ir <code>async</code> agus <code>await</code> Rust a √∫s√°id</li>
<li>Conas an tsamhail neamhshioncr√≥nach a √∫s√°id chun cuid de na d√∫shl√°in ch√©anna a ndearnamar breathn√∫ orthu i gCaibidil 16 a r√©iteach</li>
<li>Conas a shol√°thra√≠onn il-shn√°ithe agus neamhshioncr√≥nach r√©itigh chomhl√°ntacha, ar f√©idir leat a chomhcheangal i go leor c√°sanna</li>
</ul>
<p>Sula bhfeicfimid conas a oibr√≠onn neamhshioncr√≥nach i gcleachtas, √°fach, n√≠ m√≥r d√∫inn seachbh√≥thar gearr a ghlacadh chun na difr√≠ochta√≠ idir comhthreomhaireacht agus comhthr√°thacht a phl√©.</p>
<h3 id="comhthreomhaireacht-agus-comhthr√°thacht"><a class="header" href="#comhthreomhaireacht-agus-comhthr√°thacht">Comhthreomhaireacht agus Comhthr√°thacht</a></h3>
<p>T√° comhthreomhaireacht agus comhthr√°thacht den chuid is m√≥ inmhalartaithe againn go dt√≠ seo. Anois
n√≠ m√≥r d√∫inn idirdheal√∫ n√≠os cruinne a dh√©anamh eatarthu, mar go
n-√©ireoidh na difr√≠ochta√≠
n√≠os soil√©ire agus muid ag tos√∫ ag obair.</p>
<p>Smaoinigh ar na beala√≠ √©ags√∫la a d'fh√©adfadh foireann obair a roinnt ar thionscadal bogearra√≠.
D'fh√©adf√° tascanna iolracha a shannadh do bhall aonair, tasc amh√°in a shannadh do gach ball, n√≥
measc√°n den d√° chur chuige a √∫s√°id.</p>
<p>Nuair a oibr√≠onn duine aonair ar roinnt tascanna √©ags√∫la sula mb√≠onn aon cheann acu
cr√≠ochnaithe, is <em>comhthr√°thacht</em> √© seo. B‚Äôfh√©idir go bhfuil dh√° thionscadal √©ags√∫la seice√°ilte agat ar do r√≠omhaire, agus nuair a bh√≠onn t√∫ leamh n√≥ s√°innithe ar thionscadal amh√°in, aistr√≠onn t√∫ go dt√≠ an ceann eile. N√≠l ionat ach duine amh√°in, mar sin n√≠ f√©idir leat dul chun cinn a dh√©anamh ar an d√° thasc ag an am c√©anna, ach is f√©idir leat iltascanna a dh√©anamh, ag d√©anamh dul chun cinn ar cheann ag an am tr√≠ athr√∫ eatarthu (f√©ach F√≠or 17-1).</p>
<figure>
<img src="img/trpl17-01.svg" class="center" alt="A diagram with boxes labeled Task A and Task B, with diamonds in them representing subtasks. There are arrows pointing from A1 to B1, B1 to A2, A2 to B2, B2 to A3, A3 to A4, and A4 to B3. The arrows between the subtasks cross the boxes between Task A and Task B." />
<figcaption>Figure 17-1: A concurrent workflow, switching between Task A and Task B</figcaption>
</figure>
<p>Nuair a roinneann an fhoireann gr√∫pa tascanna tr√≠ gach ball a chur ag obair air ina aonar, is <em>comhthreomhaireacht</em> √© seo. Is f√©idir le gach duine ar an bhfoireann
dul chun cinn a dh√©anamh ag an am c√©anna (f√©ach F√≠or 17-2).</p>
<figure>
<img src="img/trpl17-02.svg" class="center" alt="L√©ar√°id le bosca√≠ lip√©adaithe Tasc A agus Tasc B, le diamaint iontu a l√©ir√≠onn fo-thascanna. T√° saigheada ag pointe√°il √≥ A1 go A2, A2 go A3, A3 go A4, B1 go B2, agus B2 go B3. N√≠l aon saigheada ag trasn√∫ idir na bosca√≠ do Thasc A agus Tasc B." />
<figcaption>F√≠or 17-2: Sreabhadh oibre comhthreomhar, √°it a nd√©antar obair ar Thasc A agus Tasc B go neamhsple√°ch</figcaption>
</figure>
<p>Sna sreabhanna oibre seo araon, b'fh√©idir go mbeadh ort comhord√∫ a dh√©anamh idir
tascanna √©ags√∫la. B‚Äôfh√©idir gur cheap t√∫ go raibh an tasc a shanntar do dhuine amh√°in go hioml√°n neamhsple√°ch ar obair gach duine eile, ach i nd√°ir√≠re √©il√≠onn s√© ar dhuine eile ar an bhfoireann a dtasc a chr√≠ochn√∫ ar dt√∫s. D‚Äôfh√©adfa√≠ cuid den obair a dh√©anamh go comhthreomhar, ach bh√≠ cuid di <em>sraitheach</em> i nd√°ir√≠re: n√≠ fh√©adfadh s√© tarl√∫ ach i
sraith, tasc amh√°in i ndiaidh a ch√©ile, mar at√° i bhF√≠or 17-3.</p>
<figure>
<img src="img/trpl17-03.svg" class="center" alt="L√©ar√°id le bosca√≠ lip√©adaithe Tasc A agus Tasc B, le diamaint iontu a l√©ir√≠onn fo-thascanna. T√° saigheada ag pointe√°il √≥ A1 go A2, A2 go p√©ire l√≠nte tiubha ingearacha cos√∫il le siombail ‚Äúsos‚Äù, √≥n tsiombail sin go A3, B1 go B2, B2 go B3, at√° faoin tsiombail sin, B3 go A3, agus B3 go B4." />
<figcaption>F√≠or 17-3: Sreabhadh oibre at√° comhthreomhar go p√°irteach, √°it a nd√©antar obair ar Thasc A agus ar Thasc B go neamhsple√°ch go dt√≠ go mb√≠onn bac ar Thasc A3 ar thortha√≠ Thasc B3.</figcaption>
</figure>
<p>Mar an gc√©anna, b'fh√©idir go dtuigfe√° go mbraitheann ceann de do thascanna f√©in ar cheann eile de do chuid tascanna. Anois t√° do chuid oibre comhthr√°thach sraitheach freisin.</p>
<p>Is f√©idir le comhthreomhaireacht agus comhthr√°thacht trasn√∫ lena ch√©ile freisin. M√° fhoghlaim√≠onn t√∫
go bhfuil comhghleaca√≠ s√°innithe go dt√≠ go gcr√≠ochna√≠onn t√∫ ceann de do thascanna, is d√≥cha go nd√≠reoidh t√∫ do chuid iarrachta√≠ go l√©ir ar an tasc sin chun do chomhghleaca√≠ a "dh√≠bhloc√°il". N√≠ f√©idir leatsa agus do
chomhghleaca√≠ oibri√∫ go comhthreomhar a thuilleadh, agus n√≠ f√©idir leatsa
oibri√∫ go comhthreomhar ar do thascanna f√©in a thuilleadh.</p>
<p>Tagann na dinimic bhun√∫sacha ch√©anna i bhfeidhm le bogearra√≠ agus crua-earra√≠. Ar mheais√≠n
le cro√≠ LAP amh√°in, n√≠ f√©idir leis an LAP ach oibr√≠ocht amh√°in a dh√©anamh ag an am, ach
is f√©idir leis oibri√∫ go comhthreomhar f√≥s. Ag baint √∫s√°ide as uirlis√≠ ar n√≥s sn√°itheanna, pr√≥isis, agus neamhshioncr√≥nach,
is f√©idir leis an r√≠omhaire gn√≠omha√≠ocht amh√°in a chur ar sos agus aistri√∫ go cinn eile sula
bhfilleann s√© ar an gc√©ad ghn√≠omha√≠ocht sin ar√≠s. Ar mheais√≠n le cro√≠leac√°in iolracha LAP,
is f√©idir leis obair a dh√©anamh go comhthreomhar freisin. Is f√©idir le cro√≠ amh√°in tasc amh√°in a dh√©anamh agus
cro√≠ eile ceann nach mbaineann leis ar chor ar bith a dh√©anamh, agus tarla√≠onn na hoibr√≠ochta√≠ sin ag an am c√©anna i nd√°ir√≠re.</p>
<p>Nuair a bh√≠onn muid ag obair le neamhshioncr√≥nach i Rust, b√≠mid i gc√≥na√≠ ag d√©ile√°il le comhthr√°thacht.
Ag brath ar an gcrua-earra√≠, an c√≥ras oibri√∫ch√°in, agus an t-am rith neamhshioncr√≥nach at√° √° √∫s√°id againn (tuilleadh faoi amanna rith neamhshioncr√≥nacha go luath), f√©adfaidh an comhthr√°thacht sin comhthreomhaireacht a √∫s√°id freisin
faoi chochall.</p>
<p>Anois, d√©anaimis ini√∫chadh ar an gcaoi a n-oibr√≠onn cl√°ir neamhshioncr√≥nach i Rust i nd√°ir√≠re.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="todhcha√≠-agus-an-comhr√©ir-asyncr√≥nach"><a class="header" href="#todhcha√≠-agus-an-comhr√©ir-asyncr√≥nach">Todhcha√≠ agus an Comhr√©ir Asyncr√≥nach</a></h2>
<p>Is iad <em>futures</em> agus eochairfhocail Rust
<code>async</code> agus <code>await</code> pr√≠omhghn√©ithe na cl√°ir asyncr√≥na√≠ i Rust.</p>
<p>Is luach √© <em>future</em> nach bhfuil r√©idh anois ach a bheidh r√©idh ag pointe √©igin sa todhcha√≠. (Feictear an coincheap c√©anna seo i go leor teangacha, uaireanta faoi ainmneacha eile ar n√≥s <em>task</em> n√≥ <em>promise</em>.) Sol√°thra√≠onn Rust tr√©ith <code>Future</code> mar bhloc t√≥g√°la ionas gur f√©idir oibr√≠ochta√≠ asyncr√≥nacha √©ags√∫la a chur i bhfeidhm le
strucht√∫ir sonra√≠ √©ags√∫la ach le comh√©adan coiteann. I Rust, is cine√°lacha iad todhcha√≠ a chuireann an tr√©ith <code>Future</code> i bhfeidhm. T√° a fhaisn√©is f√©in ag gach todhcha√≠ faoin dul chun cinn at√° d√©anta agus cad is br√≠ le "r√©idh".</p>
<p>Is f√©idir leat an eochairfhocal <code>async</code> a chur i bhfeidhm ar bhloic agus ar fheidhmeanna chun a shonr√∫ gur f√©idir iad a bhriseadh agus a atos√∫. Laistigh de bhloc asyncr√≥nach n√≥ de fheidhm asyncr√≥nach, is f√©idir leat an eochairfhocal <code>await</code> a √∫s√°id chun <em>await a dh√©anamh ar thodhcha√≠</em> (is √© sin, fanacht go mbeidh s√©
r√©idh). Aon phointe ina bhfuil t√∫ ag fanacht le todhcha√≠ laistigh de bhloc n√≥ feidhm neamhshioncr√≥nach is
√°it fh√©ideartha √© don bhloc n√≥ don fheidhm neamhshioncr√≥nach sin sos a chur air agus atos√∫. Tugtar
<em>polling</em> ar an
pr√≥iseas seice√°il le todhcha√≠ chun a fh√°il amach an bhfuil a luach ar f√°il f√≥s.</p>
<p>√ös√°ideann roinnt teangacha eile, amhail C# agus JavaScript, eochairfhocail <code>async</code> agus <code>await</code>
le haghaidh cl√°ir neamhshioncr√≥nach. M√° t√° t√∫ eolach ar na teangacha sin, f√©adfaidh t√∫
roinnt difr√≠ochta√≠ suntasacha a thabhairt faoi deara i gcaoi a nd√©anann Rust ruda√≠, lena n-√°ir√≠tear conas a
l√°imhse√°lann s√© an comhr√©ir. T√° c√∫is mhaith leis sin, mar a fheicfimid!</p>
<p>Nuair a bh√≠onn Rust neamhshioncr√≥nach √° scr√≠obh againn, √∫s√°idimid na heochairfhocail <code>async</code> agus <code>await</code> an chuid is m√≥ den
am. Tiomsa√≠onn Rust iad i gc√≥d coibh√©iseach ag baint √∫s√°ide as an tr√©ith <code>Future</code>, d√≠reach mar a
thiomsa√≠onn s√© l√∫ba <code>for</code> i gc√≥d coibh√©iseach ag baint √∫s√°ide as an tr√©ith <code>Iterator</code>. Toisc
go sol√°thra√≠onn Rust an tr√©ith <code>Future</code>, √°fach, is f√©idir leat √© a chur i bhfeidhm freisin do do chine√°lacha sonra√≠ f√©in nuair is g√° duit. Tugann go leor de na feidhmeanna a fheicfimid ar fud na caibidle seo cine√°lacha ar ais lena gcur i bhfeidhm f√©in de <code>Future</code>. Fillfimid ar
shainmh√≠ni√∫ an tr√©ithe ag deireadh na caibidle agus d√©anfaimid ini√∫chadh n√≠os doimhne ar conas
a oibr√≠onn s√©, ach is leor an m√©id seo chun sinn a choinne√°il ag bogadh ar aghaidh.</p>
<p>D‚Äôfh√©adfadh s√© seo go l√©ir a bheith beag√°in√≠n teib√≠, mar sin scr√≠obhaimis √°r gc√©ad chl√°r neamhshioncr√≥nach:
scr√≠ob√°n gr√©as√°in beag. Cuirfimid dh√° URL isteach √≥n l√≠ne ordaithe, gheobhaimid an d√° cheann acu ag an am c√©anna, agus cuirfimid toradh cib√© ceann a chr√≠ochna√≠onn ar ais ar dt√∫s. Beidh go leor comhr√©ir nua sa
shampla seo, ach n√° b√≠odh imn√≠ ort - m√≠neoimid
gach rud a theasta√≠onn uait a bheith ar eolas agat de r√©ir mar a th√©imid ar aghaidh.</p>
<h2 id="√År-gc√©ad-chl√°r-neamhshioncr√≥nach"><a class="header" href="#√År-gc√©ad-chl√°r-neamhshioncr√≥nach">√År gC√©ad Chl√°r Neamhshioncr√≥nach</a></h2>
<p>Chun f√≥cas na caibidle seo a choinne√°il ar fhoghlaim neamhshioncr√≥nach seachas p√°irteanna
den √©iceach√≥ras a mheascadh, chrutha√≠omar an cliathbhosca <code>trpl</code> (is giorr√∫ch√°n √© <code>trpl</code> do ‚ÄúThe Rust
Programming Language‚Äù). D√©anann s√© ath-onnmhairi√∫ ar na cine√°lacha, tr√©ithe agus feidhmeanna go l√©ir
a bheidh uait, go pr√≠omha √≥ na cliathbhosca√≠ <a href="https://crates.io/crates/futures"><code>futures</code></a><!-- ignore --> agus
<a href="https://tokio.rs"><code>tokio</code></a><!-- ignore -->. Is baile oifigi√∫il √© an cliathbhosca <code>futures</code>
le haghaidh turgnamha√≠ochta Rust le haghaidh c√≥d asyncr√≥nach, agus is ann a dearadh an tr√©ith <code>Future</code>
ar dt√∫s. Is √© Tokio an t-am rith asyncr√≥nach is m√≥ a √∫s√°idtear i
Rust inniu, go h√°irithe le haghaidh feidhmchl√°r gr√©as√°in. T√° amanna rith iontacha eile amuigh
ann, agus d'fh√©adfadh siad a bheith n√≠os oiri√∫na√≠ do do chusp√≥ir√≠. √ös√°idimid an cliathbhosca <code>tokio</code>
faoin gcochall le haghaidh <code>trpl</code> toisc go bhfuil s√© t√°st√°ilte go maith agus in √∫s√°id go forleathan.</p>
<p>I gc√°sanna √°irithe, athainmn√≠onn n√≥ fillteann <code>trpl</code> na APIanna bunaidh freisin chun t√∫ a choinne√°il d√≠rithe ar na sonra√≠ a bhaineann leis an gcaibidil seo. M√°s mian leat tuiscint a fh√°il ar cad
a dh√©anann an cliathbhosca, molaimid duit <a href="https://github.com/rust-lang/book/tree/main/packages/trpl">a ch√≥d
foinse</a><!-- ignore --> a sheice√°il. Beidh t√∫ in ann a fheice√°il c√©n cliathbhosca as a dtagann gach
ath-onnmhairi√∫, agus t√° tr√°chtanna fairsinge f√°gtha againn ag m√≠ni√∫ cad a dh√©anann an
cliathbhosca.</p>
<p>Cruthaigh tionscadal d√©n√°rtha nua darb ainm <code>hello-async</code> agus cuir an cliathbhosca <code>trpl</code> leis mar
sple√°chas:</p>
<pre><code class="language-console">$ cargo new hello-async
$ cd hello-async
$ cargo add trpl
</code></pre>
<p>Anois is f√©idir linn na p√≠osa√≠ √©ags√∫la a shol√°thra√≠onn <code>trpl</code> a √∫s√°id chun √°r gc√©ad chl√°r neamhshioncr√≥nach a scr√≠obh. T√≥gfaimid uirlis bheag l√≠ne ordaithe a bhail√≠onn dh√° leathanach gr√©as√°in, a tharraing√≠onn an eilimint <code>&lt;title&gt;</code> √≥ gach ceann acu, agus a phriont√°lann teideal cib√© leathanach a chr√≠ochna√≠onn an pr√≥iseas ioml√°n sin ar dt√∫s.</p>
<h3 id="an-fheidhm-page_title-a-shainmh√≠ni√∫"><a class="header" href="#an-fheidhm-page_title-a-shainmh√≠ni√∫">An Fheidhm page_title a Shainmh√≠ni√∫</a></h3>
<p>Tosa√≠mid tr√≠ fheidhm a scr√≠obh a ghlacann URL leathanaigh amh√°in mar pharaim√©adar, a dh√©anann iarratas air, agus a thugann t√©acs an eilimint teidil ar ais (f√©ach Liost√°il 17-1).</p>
<Listing number="17-1" file-name="src/main.rs" caption="Defining an async function to get the title element from an HTML page">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // TODO: we'll add this next!
</span><span class="boring">}
</span><span class="boring">
</span>use trpl::Html;

async fn page_title(url: &amp;str) -&gt; Option&lt;String&gt; {
    let response = trpl::get(url).await;
    let response_text = response.text().await;
    Html::parse(&amp;response_text)
        .select_first("title")
        .map(|title_element| title_element.inner_html())
}</code></pre></pre>
</Listing>
<p>Ar dt√∫s, sainmh√≠n√≠mid feidhm darb ainm <code>page_title</code> agus marc√°laimid √≠ leis an eochairfhocal <code>async</code>. Ansin √∫s√°idimid an fheidhm <code>trpl::get</code> chun cib√© URL a chuirtear isteach a fh√°il agus cuirimid an eochairfhocal <code>await</code> leis chun fanacht leis an bhfreagra. Chun t√©acs an
fhreagra a fh√°il, glaoimid ar a mhodh <code>text</code>, agus fanfaimid air ar√≠s leis an eochairfhocal <code>await</code>. T√° an d√° ch√©im seo asincr√≥nach. Maidir leis an bhfeidhm <code>get</code>, caithfimid
fanacht go seolfaidh an freastala√≠ an ch√©ad chuid d√° fhreagra ar ais, lena n-√°ir√≠tear
ceannt√°sca HTTP, fian√°in, agus mar sin de, agus is f√©idir √© a sheachadadh ar leithligh √≥
chorp an fhreagra. Go h√°irithe m√° t√° an corp an-mh√≥r, f√©adfaidh s√© tamall a th√≥g√°il
chun go dtiocfaidh s√© ar fad. Toisc go gcaithfimid fanacht go dtiocfaidh <em>ioml√°n</em> an fhreagra, t√° an modh <code>text</code> asincr√≥nach freisin. Caithfimid fanacht go sainr√°ite leis an d√° thodhcha√≠ seo, mar go bhfuil todhcha√≠ i Rust
<em>leisci√∫il</em>: n√≠ dh√©anann siad aon rud go dt√≠ go n-iarrann t√∫ orthu √© sin a dh√©anamh leis an eochairfhocal <code>await</code>.
(Go deimhin, taispe√°nfaidh Rust rabhadh tiomsaitheora mura n-√∫s√°ideann t√∫ todhcha√≠.)</p>
<p>D‚Äôfh√©adfadh s√© seo
go gcuirfeadh s√© seo i gcuimhne duit pl√© Chaibidil 13 ar athr√°iteoir√≠ sa chuid
<a href="ch13-02-iterators.html">Sraith M√≠reanna a Phr√≥ise√°il le hAthr√°iteoir√≠</a><!-- neamhaird a dh√©anamh -->.</p>
<p>N√≠ dh√©anann athr√°iteoir√≠ aon rud mura nglaonn t√∫ ar a modh <code>next</code>‚Äîb√≠odh s√© go d√≠reach n√≥ tr√≠
l√∫ba <code>for</code> n√≥ modhanna ar n√≥s <code>map</code> a √∫s√°ideann <code>next</code> faoin gcochall a √∫s√°id.</p>
<p>Mar an gc√©anna, n√≠ dh√©anann todhcha√≠ aon rud mura n-iarrann t√∫ go sainr√°ite orthu √© sin a dh√©anamh. Ligeann an leisci√∫lacht seo
do Rust gan c√≥d neamhshioncr√≥nach a rith go dt√≠ go mbeidh g√° leis i nd√°ir√≠re.</p>
<blockquote>
<p>N√≥ta: T√° s√© seo difri√∫il √≥n iompar a chonaiceamar sa chaibidil roimhe seo agus
ag √∫s√°id <code>thread::spawn</code> i <a href="ch16-01-threads.html#creating-a-new-thread-with-spawn">Sn√°ithe Nua a Chruth√∫ le
spawn</a><!--ignore-->, √°it ar thosaigh an d√∫nadh a thugamar chuig sn√°ithe eile
ag rith l√°ithreach. T√° s√© difri√∫il freisin √≥n gcaoi a dt√©ann go leor teangacha eile
i ngleic le neamhshioncr√≥nach. Ach t√° s√© t√°bhachtach do Rust, agus feicfimid c√©n f√°th
n√≠os d√©ana√≠.</p>
</blockquote>
<p>Nuair a bheidh <code>response_text</code> againn, is f√©idir linn √© a phars√°il i gc√°s den chine√°l <code>Html</code>
ag baint √∫s√°ide as <code>Html::parse</code>. In ionad teaghr√°n amh, t√° cine√°l sonra√≠ againn anois
is f√©idir linn a √∫s√°id chun oibri√∫ leis an HTML mar strucht√∫r sonra√≠ n√≠os saibhre. Go h√°irithe, is f√©idir linn
an modh <code>select_first</code> a √∫s√°id chun an ch√©ad ch√°s de roghn√≥ir CSS ar leith a aimsi√∫. Tr√≠ an teaghr√°n <code>"title"</code> a rith, gheobhaimid an ch√©ad eilimint <code>&lt;title&gt;</code>
sa doicim√©ad, m√°s ann d√≥. √ìs rud √© nach bhf√©adfadh aon eilimint chomhoiri√∫nach a bheith ann, tugann <code>select_first</code> <code>Option&lt;ElementRef&gt;</code> ar ais. Ar deireadh, √∫s√°idimid an modh
<code>Option::map</code>, rud a ligeann d√∫inn oibri√∫ leis an m√≠r sa <code>Option</code> m√° t√° s√©
i l√°thair, agus gan aon rud a dh√©anamh mura bhfuil. (D'fh√©adfaimis abairt <code>match</code> a √∫s√°id
anseo freisin, ach t√° <code>map</code> n√≠os idiomata√≠.) I gcorp na feidhme a shol√°thra√≠mid do
<code>map</code>, glaoimid ar <code>inner_html</code> ar an <code>title_element</code> chun a √°bhar a fh√°il, arb √©
<code>String</code> √©. Nuair a bheidh gach rud r√°ite agus d√©anta, t√° <code>Option&lt;String&gt;</code> againn.</p>
<p>Tabhair faoi deara go dt√©ann eochairfhocal <code>await</code> Rust <em>i ndiaidh</em> an abairt at√° t√∫ ag fanacht leis,
n√≠ roimhe. Is √© sin, is eochairfhocal <em>postfix</em> √©. D'fh√©adfadh s√© seo a bheith difri√∫il √≥n m√©id
a bhfuil t√∫ cleachtaithe leis m√° d'√∫s√°id t√∫ <code>async</code> i dteangacha eile, ach i Rust d√©anann s√©
slabhra√≠ modhanna i bhfad n√≠os deise le hoibri√∫ leo. Mar thoradh air sin, is f√©idir linn corp <code>page_url_for</code> a athr√∫ chun glaonna feidhme <code>trpl::get</code> agus <code>text</code> a shlabhr√∫ le ch√©ile
le <code>await</code> eatarthu, mar a thaispe√°ntar i Liost√°il 17-2.</p>
<Listing number="17-2" file-name="src/main.rs" caption="Chaining with the `await` keyword">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use trpl::Html;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // TODO: we'll add this next!
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">async fn page_title(url: &amp;str) -&gt; Option&lt;String&gt; {
</span>    let response_text = trpl::get(url).await.text().await;
<span class="boring">    Html::parse(&amp;response_text)
</span><span class="boring">        .select_first("title")
</span><span class="boring">        .map(|title_element| title_element.inner_html())
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Leis sin, t√° √°r gc√©ad fheidhm neamhshioncr√≥nach scr√≠ofa againn go rath√∫il! Sula gcuirfimid
roinnt c√≥id i <code>main</code> chun glaoch air, labhraimis beag√°n n√≠os m√≥ faoi na ruda√≠ at√°
scr√≠ofa againn agus cad is br√≠ leis.</p>
<p>Nuair a fheiceann Rust bloc at√° marc√°ilte leis an eochairfhocal <code>async</code>, tiomsa√≠onn s√© √© i
gcine√°l sonra√≠ uath√∫il, gan ainm a chuireann an tr√©ith <code>Future</code> i bhfeidhm. Nuair a fheiceann Rust
feidhm at√° marc√°ilte le <code>async</code>, tiomsa√≠onn s√© √≠ i bhfeidhm neamh-neamhshioncr√≥nach a bhfuil a
corp ina bhloc neamhshioncr√≥nach. Is √© cine√°l an
chine√°il sonra√≠ gan ainm a chrutha√≠onn an tiomsaitheoir don bhloc neamhshioncr√≥nach sin cine√°l tuairisce√°in feidhme neamhshioncr√≥nach.</p>
<p>D√° bhr√≠ sin, is ionann <code>async fn</code> a scr√≠obh agus feidhm a scr√≠obh a thugann
<em>future</em> den chine√°l tuairisce√°in ar ais. Don tiomsaitheoir, is ionann sainmh√≠ni√∫ feidhme amhail an
<code>async fn page_title</code> i Liosta 17-1 agus feidhm neamh-neamhshioncr√≥nach
sainmh√≠nithe mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">extern crate trpl; // required for mdbook test
</span>use std::future::Future;
use trpl::Html;

fn page_title(url: &amp;str) -&gt; impl Future&lt;Output = Option&lt;String&gt;&gt; + '_ {
    async move {
        let text = trpl::get(url).await.text().await;
        Html::parse(&amp;text)
            .select_first("title")
            .map(|title| title.inner_html())
    }
}
<span class="boring">}</span></code></pre></pre>
<p>Si√∫laimis tr√≠ gach cuid den leagan claochlaithe:</p>
<ul>
<li>
<p>√ös√°ideann s√© comhr√©ir <code>impl Trait</code> a phl√©amar siar i gCaibidil 10 sa chuid
<a href="ch10-02-traits.html#traits-as-parameters">‚ÄúTraits as Parameters‚Äù</a><!-- ignore -->.</p>
</li>
<li>
<p>Is √© an tr√©ith a chuirtear ar ais n√° <code>Future</code> le cine√°l gaolmhar de <code>Output</code>. Tabhair faoi deara
gurb √© an cine√°l <code>Output</code> n√° <code>Option&lt;String&gt;</code>, at√° mar an gc√©anna leis an mbunchine√°l tuairisce√°in √≥n leagan <code>async fn</code> de <code>page_title</code>.</p>
</li>
<li>
<p>T√° an c√≥d ar fad a ghlaoitear i gcorp na feidhme bunaidh fillte i mbloc <code>async move</code>. Cuimhnigh gur l√©irithe iad na bloic. Is √© an bloc ioml√°n seo an l√©iri√∫ a chuirtear ar ais √≥n bhfeidhm.</p>
</li>
<li>
<p>Ginfidh an bloc async seo luach leis an gcine√°l <code>Option&lt;String&gt;</code>, mar a thuairisc√≠tear d√≠reach. Meaitse√°lann an luach sin leis an gcine√°l <code>Output</code> sa chine√°l tuairisce√°in. T√° s√© seo d√≠reach cos√∫il le bloic eile a chonaic t√∫.</p>
</li>
<li>
<p>Is bloc <code>async move</code> an corp feidhme nua mar gheall ar an gcaoi a n-√∫s√°ideann s√© an paraim√©adar <code>url</code>. (Labhr√≥imid i bhfad n√≠os m√≥ faoi <code>async</code> i gcoinne <code>async move</code> n√≠os d√©ana√≠ sa chaibidil.)</p>
</li>
<li>
<p>T√° cine√°l saoil ag an leagan nua den fheidhm nach bhfacamar cheana sa chine√°l aschuir: <code>'_</code>. Toisc go dtugann an fheidhm todhcha√≠ ar ais a thagra√≠onn do thagairt‚Äîsa ch√°s seo, an tagairt √≥n bparaim√©adar <code>url</code>‚Äîn√≠ m√≥r d√∫inn a r√° le Rust gur mian linn an tagairt sin a chur san √°ireamh. N√≠ g√° d√∫inn ainm a thabhairt don saolr√© anseo, mar t√° Rust cliste go leor chun a fhios a bheith aige nach bhfuil ach tagairt amh√°in ann a d'fh√©adfadh a bheith i gceist, ach <em>caithfimid</em> a bheith soil√©ir go bhfuil an todhcha√≠ mar thoradh air sin ceangailte leis an saolr√© sin.</p>
</li>
</ul>
<p>Anois is f√©idir linn glaoch ar <code>page_title</code> i <code>main</code>.</p>
<h2 id="teideal-leathanach-aonair-a-chinneadh"><a class="header" href="#teideal-leathanach-aonair-a-chinneadh">Teideal Leathanach Aonair a Chinneadh</a></h2>
<p>Chun t√∫s a chur leis, gheobhaimid teideal do leathanach aonair. I Liosta 17-3, leanann muid an patr√∫n c√©anna a d'√∫s√°ideamar i gCaibidil 12 chun arg√≥int√≠ l√≠ne ordaithe a fh√°il sa chuid
<a href="ch12-01-accepting-command-line-arguments.html">Ag Glacadh le hArg√≥int√≠ L√≠ne Ordaithe</a><!-- neamhaird a dh√©anamh -->. Ansin, cuirimid an ch√©ad URL <code>page_title</code> ar aghaidh agus fanfaimid ar an toradh. √ìs rud √© gur <code>Option&lt;String&gt;</code> an ‚Äã‚Äãluach
a th√°irgeann an todhcha√≠, √∫s√°idimid abairt <code>match</code> chun
teachtaireachta√≠ √©ags√∫la a phriont√°il chun cuntas a thabhairt ar cib√© an raibh <code>&lt;title&gt;</code> ar an leathanach.</p>
<Listing number="17-3" file-name="src/main.rs" caption="Calling the `page_title` function from `main` with a user-supplied argument">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use trpl::Html;
</span><span class="boring">
</span>async fn main() {
    let args: Vec&lt;String&gt; = std::env::args().collect();
    let url = &amp;args[1];
    match page_title(url).await {
        Some(title) =&gt; println!("The title for {url} was {title}"),
        None =&gt; println!("{url} had no title"),
    }
}
<span class="boring">
</span><span class="boring">async fn page_title(url: &amp;str) -&gt; Option&lt;String&gt; {
</span><span class="boring">    let response_text = trpl::get(url).await.text().await;
</span><span class="boring">    Html::parse(&amp;response_text)
</span><span class="boring">        .select_first("title")
</span><span class="boring">        .map(|title_element| title_element.inner_html())
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ar an drochuair, n√≠ thiomsa√≠onn an c√≥d seo. Is i bhfeidhmeanna n√≥ i mbloic async amh√°in is f√©idir linn an eochairfhocal <code>await</code> a √∫s√°id, agus n√≠ ligfidh Rust d√∫inn an fheidhm <code>main</code> speisialta a mharc√°il mar <code>async</code>.</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-03
cargo build
copy just the compiler error
-->
<pre><code class="language-text">error[E0752]: `main` function is not allowed to be `async`
 --&gt; src/main.rs:6:1
  |
6 | async fn main() {
  | ^^^^^^^^^^^^^^^ `main` function is not allowed to be `async`
</code></pre>
<p>Is √© an f√°th nach f√©idir <code>main</code> a mharc√°il mar <code>async</code> n√° go bhfuil <em>runtime</em> ag teast√°il √≥ ch√≥d asyncr√≥nach: cliathbhosca Rust a bhainist√≠onn sonra√≠ fhorghn√≠omh√∫ c√≥d asyncr√≥nach. Is f√©idir le feidhm <code>main</code> cl√°ir am rith a <em>thos√∫</em>, ach n√≠ am rith √©
<em>f√©in</em>. (Feicfimid tuilleadh faoin gc√∫is at√° leis seo i gceann tamaill.) T√° √°it amh√°in ar a laghad ag gach cl√°r Rust
a fhorghn√≠omha√≠onn c√≥d asyncr√≥nach ina socra√≠onn s√©
am rith agus ina bhforghn√≠omha√≠onn s√© na todhcha√≠.</p>
<p>D√©anann formh√≥r na dteangacha a thaca√≠onn le async am rith a phac√°isti√∫, ach n√≠ dh√©anann Rust. Ina √°it sin,
t√° go leor am rith asyncr√≥nach √©ags√∫il ar f√°il, agus d√©anann gach ceann acu
malairt√≠ √©ags√∫la oiri√∫nach don ch√°s √∫s√°ide a spriocdh√≠r√≠onn s√© air. Mar shampla, t√° riachtanais an-difri√∫la ag freastala√≠ gr√©as√°in ard-tr√©chur le go leor cro√≠the LAP agus m√©id m√≥r RAM n√° mar at√° ag micrea-rialaitheoir le cro√≠ amh√°in, m√©id beag RAM, agus gan
chumas leithdh√°ilte carn. Is minic a shol√°thra√≠onn na cliathbhosca√≠ a shol√°thra√≠onn na hamanna rith sin leaganacha neamhshioncr√≥nacha de fheidhmi√∫lacht choitianta amhail comhad n√≥ l√≠onra I/O.</p>
<p>Anseo, agus ar fud an chuid eile den chaibidil seo, √∫s√°idfimid an fheidhm <code>run</code> √≥n gcliathbhosca <code>trpl</code>, a ghlacann todhcha√≠ mar arg√≥int agus a ritheann go dt√≠ go gcr√≠ochna√≠tear √©.
Taobh thiar de na radhairc, socra√≠onn glaoch ar <code>run</code> am rith a √∫s√°idtear chun an todhcha√≠ a rith
a chuirtear isteach. Nuair a chr√≠ochna√≠onn an todhcha√≠, tugann <code>run</code> cib√© luach a th√°irg an todhcha√≠ ar ais.</p>
<p>D‚Äôfh√©adfaimis an todhcha√≠ a thugann <code>page_title</code> ar ais a chur go d√≠reach chuig <code>run</code>, agus nuair a chr√≠ochna√≠onn s√©, d‚Äôfh√©adfaimis meaitse√°il a dh√©anamh ar an <code>Option&lt;String&gt;</code> mar thoradh air sin, mar a rinneamar iarracht a dh√©anamh i Liosta 17-3. Mar sin f√©in, i gc√°s fhormh√≥r na sampla√≠ sa chaibidil (agus formh√≥r an ch√≥id asyncr√≥naigh sa saol r√©ad√∫il), beidh n√≠os m√≥ n√° glao feidhme asyncr√≥nach amh√°in √° dh√©anamh againn, mar sin ina ionad sin cuirfimid bloc <code>async</code> ar aghaidh agus fanfaimid go sainr√°ite ar thoradh an ghlao <code>page_title</code>, mar at√° i Liost√°il 17-4.</p>
<Listing number="17-4" caption="Awaiting an async block with `trpl::run`" file-name="src/main.rs">
<!-- should_panic,noplayground because mdbook test does not pass args -->
<pre><code class="language-rust should_panic noplayground"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use trpl::Html;
</span><span class="boring">
</span>fn main() {
    let args: Vec&lt;String&gt; = std::env::args().collect();

    trpl::run(async {
        let url = &amp;args[1];
        match page_title(url).await {
            Some(title) =&gt; println!("The title for {url} was {title}"),
            None =&gt; println!("{url} had no title"),
        }
    })
}
<span class="boring">
</span><span class="boring">async fn page_title(url: &amp;str) -&gt; Option&lt;String&gt; {
</span><span class="boring">    let response_text = trpl::get(url).await.text().await;
</span><span class="boring">    Html::parse(&amp;response_text)
</span><span class="boring">        .select_first("title")
</span><span class="boring">        .map(|title_element| title_element.inner_html())
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Nuair a ritheann muid an c√≥d seo, faighimid an t-iompar a raibh s√∫il againn leis ar dt√∫s:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-04
cargo build # skip all the build noise
cargo run https://www.rust-lang.org
# copy the output here
-->
<pre><code class="language-console">$ cargo run -- https://www.rust-lang.org
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.05s
     Running `target/debug/async_await 'https://www.rust-lang.org'`
The title for https://www.rust-lang.org was
            Rust Programming Language
</code></pre>
<p>√ì, t√° c√≥d neamhshioncr√≥nach ag obair againn faoi dheireadh! Ach sula gcuirfimid an c√≥d leis chun r√°s a dh√©anamh idir an d√° shu√≠omh, d√©anaimis √°r n-aird a dh√≠ri√∫ go hachomair ar an gcaoi a n-oibr√≠onn
todhcha√≠.</p>
<p>L√©ir√≠onn gach pointe <em>await</em>‚Äîis √© sin, gach √°it a n-√∫s√°ideann an c√≥d an eochairfhocal <code>await</code>‚Äî√°it ina dtugtar smacht ar ais don am rith. Chun
sin a chur ag obair, n√≠ m√≥r do Rust s√∫il a choinne√°il ar an staid at√° i gceist sa bhloc neamhshioncr√≥nach
ionas gur f√©idir leis an am rith obair eile a thos√∫ agus ansin teacht ar ais nuair
a bh√≠onn s√© r√©idh chun iarracht a dh√©anamh an ch√©ad cheann a chur chun cinn ar√≠s. Is meais√≠n st√°it dofheicthe √© seo,
amhail is d√° mba rud √© go raibh enum mar seo scr√≠ofa agat chun an staid reatha a sh√°bh√°il ag gach pointe
await:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>enum PageTitleFuture&lt;'a&gt; {
    Initial { url: &amp;'a str },
    GetAwaitPoint { url: &amp;'a str },
    TextAwaitPoint { response: trpl::Response },
}
<span class="boring">}</span></code></pre></pre>
<p>Bheadh ‚Äã‚Äãs√© leadr√°nach agus seans maith go mbeadh earr√°id√≠ ann an c√≥d a scr√≠obh de l√°imh chun aistri√∫ idir gach st√°t, √°fach, go h√°irithe nuair is g√° duit n√≠os m√≥ feidhmi√∫lachta agus
n√≠os m√≥ st√°t a chur leis an gc√≥d n√≠os d√©ana√≠. Ar √°mhara√≠ an tsaoil, crutha√≠onn agus bainist√≠onn an tiomsaitheoir Rust strucht√∫ir sonra√≠ an mheais√≠n st√°it le haghaidh c√≥d neamhshioncr√≥nach go huathoibr√≠och. T√° feidhm f√≥s ag na
gn√°thrialacha iasachta agus √∫in√©ireachta maidir le strucht√∫ir sonra√≠, agus
ar √°mhara√≠ an tsaoil, l√°imhse√°lann an tiomsaitheoir iad sin a sheice√°il d√∫inn agus sol√°thra√≠onn s√©
teachtaireachta√≠ earr√°ide √∫s√°ideacha. Oibreoimid tr√≠ ch√∫pla ceann d√≠obh sin n√≠os d√©ana√≠ sa chaibidil.</p>
<p>Sa deireadh thiar, caithfidh rud √©igin an meais√≠n st√°it seo a fhorghn√≠omh√∫, agus is
am rith an rud sin. (Sin √© an f√°th gur f√©idir leat teacht ar thagairt√≠ do <em>fhorghn√≠omhaithe</em>
agus t√∫ ag f√©achaint ar amanna rith: is √© forghn√≠omhaitheoir an chuid den am rith at√° freagrach as
an c√≥d neamhshioncr√≥nach a fhorghn√≠omh√∫.)</p>
<p>Anois is f√©idir leat a fheice√°il c√©n f√°th ar stop an tiomsaitheoir sinn √≥ <code>main</code> f√©in a dh√©anamh ina fheidhm neamhshioncr√≥nach ar ais i Liost√°il 17-3. D√° mba fheidhm neamhshioncr√≥nach √≠ <code>main</code>, bheadh ‚Äã‚Äãar rud √©igin eile an meais√≠n st√°it a bhainisti√∫ le haghaidh cib√© <code>main</code> todhcha√≠och a sheoltar ar ais, ach is √© <code>main</code> pointe tosaigh an chl√°ir! Ina √°it sin, thugamar ar an bhfeidhm <code>trpl::run</code> i <code>main</code> chun am rith a bhun√∫ agus an todhcha√≠ a sheoltar ar ais ag an mbloc
<code>async</code> a rith go dt√≠ go seoltar <code>Ready</code> ar ais.</p>
<blockquote>
<p>Tabhair faoi deara: Sol√°thra√≠onn roinnt am rith macra√≠ ionas gur f√©idir leat feidhm neamhshioncr√≥nach <code>main</code> a scr√≠obh. Athscr√≠obhann na macra√≠ sin <code>async fn main() { ... }</code> le bheith ina <code>fn main</code> gn√°th, rud a dh√©anann an rud c√©anna a rinneamar de l√°imh i Liosta 17-5: glaoigh ar fheidhm
a ritheann todhcha√≠ go dt√≠ go gcr√≠ochn√≥far √© ar an mbealach a dh√©anann <code>trpl::run</code>.</p>
</blockquote>
<p>Anois cuirfimid na p√≠osa√≠ seo le ch√©ile agus f√©achfaimid conas is f√©idir linn c√≥d comhuaineach a scr√≠obh.</p>
<h3 id="ag-r√°sa√≠ocht-√År-ndh√°-url-in-aghaidh-a-gc√©ile"><a class="header" href="#ag-r√°sa√≠ocht-√År-ndh√°-url-in-aghaidh-a-gc√©ile">Ag R√°sa√≠ocht √År nDh√° URL in Aghaidh a gC√©ile</a></h3>
<p>I Liosta 17-5, glaoimid ar <code>page_title</code> le dh√° URL √©ags√∫la a chuirtear isteach √≥n l√≠ne ordaithe agus d√©anaimid r√°sa√≠ocht eatarthu.</p>
<Listing number="17-5" caption="" file-name="src/main.rs">
<!-- should_panic,noplayground because mdbook does not pass args -->
<pre><code class="language-rust should_panic noplayground"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>use trpl::{Either, Html};

fn main() {
    let args: Vec&lt;String&gt; = std::env::args().collect();

    trpl::run(async {
        let title_fut_1 = page_title(&amp;args[1]);
        let title_fut_2 = page_title(&amp;args[2]);

        let (url, maybe_title) =
            match trpl::race(title_fut_1, title_fut_2).await {
                Either::Left(left) =&gt; left,
                Either::Right(right) =&gt; right,
            };

        println!("{url} returned first");
        match maybe_title {
            Some(title) =&gt; println!("Its page title is: '{title}'"),
            None =&gt; println!("Its title could not be parsed."),
        }
    })
}

async fn page_title(url: &amp;str) -&gt; (&amp;str, Option&lt;String&gt;) {
    let text = trpl::get(url).await.text().await;
    let title = Html::parse(&amp;text)
        .select_first("title")
        .map(|title| title.inner_html());
    (url, title)
}</code></pre>
</Listing>
<p>Tosa√≠mid tr√≠ ghlaoch ar <code>page_title</code> do gach ceann de na URLanna arna sol√°thar ag an √∫s√°ideoir. S√°bh√°laimid na todhcha√≠ mar thoradh air sin mar <code>title_fut_1</code> agus <code>title_fut_2</code>. Cuimhnigh, n√≠ dh√©anann siad seo aon rud f√≥s, mar go bhfuil todhcha√≠ leisci√∫il agus n√≠limid tar √©is fanacht leo f√≥s. Ansin, cuirimid na todhcha√≠ chuig <code>trpl::race</code>, a thugann luach ar ais chun a l√©iri√∫ c√© acu de na todhcha√≠ a tugadh d√≥ a chr√≠ochna√≠onn ar dt√∫s.</p>
<blockquote>
<p>N√≥ta: Faoin gcochall, t√° <code>race</code> bunaithe ar fheidhm n√≠os ginear√°lta, <code>select</code>,
a chasfaidh t√∫ n√≠os minice air i gc√≥d Rust sa saol r√©ad√∫il. Is f√©idir le feidhm <code>select</code>
a l√°n ruda√≠ a dh√©anamh nach f√©idir leis an bhfeidhm <code>trpl::race</code> a dh√©anamh, ach t√° roinnt castachta breise aici freisin ar f√©idir linn a scipe√°il tharstu faoi l√°thair.</p>
</blockquote>
<p>Is f√©idir le ceachtar todhcha√≠ "bua" go dlisteanach, mar sin n√≠l ciall le <code>Result</code> a thabhairt ar ais. Ina √°it sin, tugann <code>race</code> cine√°l ar ais n√°r chonaiceamar cheana, <code>trpl::Either</code>. T√° an cine√°l <code>Either</code> cos√∫il le <code>Result</code> sa mh√©id is go bhfuil dh√° ch√°s aige. Murab ionann agus <code>Result</code>, √°fach, n√≠l aon choincheap rath n√≥ teip b√°c√°ilte isteach i <code>Either</code>. Ina √°it sin, √∫s√°ideann s√© <code>Left</code> agus <code>Right</code> chun "ceann amh√°in n√≥ an ceann eile" a l√©iri√∫:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Either&lt;A, B&gt; {
    Left(A),
    Right(B),
}
<span class="boring">}</span></code></pre></pre>
<p>Tugann an fheidhm <code>race</code> <code>Left</code> ar ais le haschur an todhcha√≠ sin m√° bhuaigh an ch√©ad
arg√≥int, agus <code>Deas</code> le haschur an dara harg√≥int todhcha√≠ m√° bhuaigh an <em>sin</em>
ceann. Meaitse√°lann s√© seo an t-ord ina bhfuil na harg√≥int√≠ le feice√°il agus an fheidhm √° glaoch: t√° an ch√©ad arg√≥int ar chl√© √≥n dara harg√≥int.</p>
<p>Nuashonra√≠mid <code>page_title</code> freisin chun an URL c√©anna a cuireadh isteach a thabhairt ar ais. Ar an mbealach sin, mura bhfuil <code>&lt;title&gt;</code> ar an leathanach a fhilleann ar dt√∫s is f√©idir linn a r√©iteach, is f√©idir linn
teachtaireacht bhr√≠och a phriont√°il f√≥s. Agus an fhaisn√©is sin ar f√°il, cr√≠ochna√≠mid tr√≠
√°r n-aschur <code>println!</code> a nuashonr√∫ chun a l√©iri√∫ c√© acu URL a chr√≠ochnaigh ar dt√∫s agus
cad √©, m√°s ann d√≥, an <code>&lt;title&gt;</code> don leathanach gr√©as√°in ag an URL sin.</p>
<p>T√° scraper gr√©as√°in beag oibre t√≥gtha agat anois! Roghnaigh c√∫pla URL agus rith an
uirlis l√≠ne ordaithe. B‚Äôfh√©idir go bhfaighidh t√∫ amach go bhfuil roinnt su√≠omhanna n√≠os tap√∫la n√°
ch√©ile, agus i gc√°sanna eile athra√≠onn an su√≠omh n√≠os tap√∫la √≥ rith go rith. N√≠os t√°bhachta√≠ f√≥s, t√° bunghn√©ithe oibre le todhcha√≠ foghlamtha agat, mar sin anois is f√©idir linn ini√∫chadh n√≠os doimhne a dh√©anamh ar a bhf√©adfaimid a dh√©anamh le haisioncr√≥nach.</p>
<!-- TODO: map source link version to version of Rust? -->
<div style="break-before: page; page-break-before: always;"></div><h2 id="comhthr√°thacht-a-chur-i-bhfeidhm-le-has-shioncr√≥nach"><a class="header" href="#comhthr√°thacht-a-chur-i-bhfeidhm-le-has-shioncr√≥nach">Comhthr√°thacht a Chur i bhFeidhm le hAs-Shioncr√≥nach</a></h2>
<!-- Seancheannteidil. N√° bain iad n√≥ d'fh√©adfadh naisc briseadh. -->
<p><a id="concurrency-with-async"></a></p>
<p>Sa chuid seo, cuirfimid as-shioncr√≥nach i bhfeidhm ar chuid de na d√∫shl√°in chomhthr√°thachta c√©anna
a ndearnamar aghaidh orthu le sn√°itheanna i gcaibidil 16. √ìs rud √© gur labhair muid cheana f√©in faoi go leor de na
pr√≠omhsmaointe ansin, d√≠reoimid sa chuid seo ar an difr√≠ocht idir
sn√°itheanna agus todhcha√≠.</p>
<p>I go leor c√°sanna, t√° na APIanna le haghaidh oibri√∫ le comhthr√°thacht ag baint √∫s√°ide as as-shioncr√≥nach an-
chos√∫il leo si√∫d le haghaidh sn√°itheanna a √∫s√°id. I gc√°sanna eile, b√≠onn siad s√°ch
difri√∫il. Fi√∫ nuair a bh√≠onn cuma_chos√∫il_ ar na APIanna idir sn√°itheanna agus as-shioncr√≥nach, is minic a bh√≠onn iompar difri√∫il acu - agus b√≠onn tr√©ithe feidhm√≠ochta √©ags√∫la acu beagnach i gc√≥na√≠.</p>
<!-- Seancheannteidil. N√° bain iad n√≥ d'fh√©adfadh naisc briseadh. -->
<p><a id="counting"></a></p>
<h3 id="tasc-nua-a-chruth√∫-le-spawn_task"><a class="header" href="#tasc-nua-a-chruth√∫-le-spawn_task">Tasc Nua a Chruth√∫ le <code>spawn_task</code></a></h3>
<p>Ba √© an ch√©ad oibr√≠ocht a ndearnamar i ngleic l√©i i <a href="ch16-01-threads.html#creating-a-new-thread-with-spawn">Sn√°ithe Nua a Chruth√∫ le
Spawn</a><!-- ignore --> n√° comhaireamh suas ar dh√° shn√°ithe ar leith.
D√©anaimis an rud c√©anna ag baint √∫s√°ide as async. Sol√°thra√≠onn an cliath <code>trpl</code> feidhm <code>spawn_task</code>
at√° an-chos√∫il leis an API <code>thread::spawn</code>, agus feidhm <code>sleep</code>
at√° ina leagan async den API <code>thread::sleep</code>. Is f√©idir linn iad seo a √∫s√°id le ch√©ile
chun an sampla comhairimh a chur i bhfeidhm, mar a thaispe√°ntar i Liost√°il 17-6.</p>
<Listing number="17-6" caption="Creating a new task to print one thing while the main task prints something else" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>use std::time::Duration;

fn main() {
    trpl::run(async {
        trpl::spawn_task(async {
            for i in 1..10 {
                println!("hi number {i} from the first task!");
                trpl::sleep(Duration::from_millis(500)).await;
            }
        });

        for i in 1..5 {
            println!("hi number {i} from the second task!");
            trpl::sleep(Duration::from_millis(500)).await;
        }
    });
}</code></pre></pre>
</Listing>
<p>Mar phointe tosaigh, shocra√≠omar √°r bhfeidhm <code>main</code> le <code>trpl::run</code> ionas gur f√©idir len√°r bhfeidhm barrleibh√©il a bheith neamhshioncr√≥nach.</p>
<blockquote>
<p>N√≥ta: √ìn bpointe seo ar aghaidh sa chaibidil, beidh an c√≥d fillte c√©anna seo san √°ireamh i ngach sampla le <code>trpl::run</code> i <code>main</code>, mar sin is minic a scipe√°lfaimid √©
d√≠reach mar a dh√©anaimid le <code>main</code>. N√° d√©an dearmad √© a chur san √°ireamh i do ch√≥d!</p>
</blockquote>
<p>Ansin scr√≠obhaimid dh√° l√∫b laistigh den bhloc sin, agus glao <code>trpl::sleep</code> i ngach ceann acu,
a fhanann leathshoicind (500 milleasoicind) sula seoltar an ch√©ad
teachtaireacht eile. Cuirimid l√∫b amh√°in i gcorp <code>trpl::spawn_task</code> agus an ceann eile i
l√∫b <code>for</code> barrleibh√©il. Cuirimid <code>await</code> leis freisin tar √©is na nglaonna <code>sleep</code>.</p>
<p>Iompra√≠onn an c√≥d seo ar bhealach cos√∫il leis an gcur i bhfeidhm bunaithe ar shn√°itheanna‚Äîlena n-√°ir√≠tear an
f√≠ric go bhf√©adfadh t√∫ na teachtaireachta√≠ a fheice√°il in ord difri√∫il i do
chr√≠ochfort f√©in nuair a ritheann t√∫ √©:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">hi number 1 from the second task!
hi number 1 from the first task!
hi number 2 from the first task!
hi number 2 from the second task!
hi number 3 from the first task!
hi number 3 from the second task!
hi number 4 from the first task!
hi number 4 from the second task!
hi number 5 from the first task!
</code></pre>
<p>Stopann an leagan seo a luaithe a chr√≠ochna√≠onn an l√∫b <code>for</code> i gcorp an phr√≠omhbhloic async, toisc go nd√∫nfar an tasc a ghintear le <code>spawn_task</code> nuair a chr√≠ochna√≠onn an fheidhm <code>main</code>. M√°s mian leat go rithfidh s√© an bealach ar fad go dt√≠ go mbeidh an tasc cr√≠ochnaithe, beidh ort l√°imhse√°il join a √∫s√°id chun fanacht go gcr√≠ochn√≥far an ch√©ad tasc. Le
sn√°itheanna, d'√∫s√°ideamar an modh <code>join</code> chun "bac" a chur air go dt√≠ go mbeadh an sn√°ithe cr√≠ochnaithe ag rith.
I Liosta 17-7, is f√©idir linn <code>await</code> a √∫s√°id chun an rud c√©anna a dh√©anamh, toisc gur todhcha√≠ √© an l√°imhse√°il tasc f√©in. Is <code>Result</code> a chine√°l <code>Output</code>, mar sin d√≠phac√°ilimid √© freisin
tar √©is fanacht leis.</p>
<Listing number="17-7" caption="Using `await` with a join handle to run a task to completion" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let handle = trpl::spawn_task(async {
            for i in 1..10 {
                println!("hi number {i} from the first task!");
                trpl::sleep(Duration::from_millis(500)).await;
            }
        });

        for i in 1..5 {
            println!("hi number {i} from the second task!");
            trpl::sleep(Duration::from_millis(500)).await;
        }

        handle.await.unwrap();
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ritheann an leagan nuashonraithe seo go dt√≠ go gcr√≠ochna√≠onn <em>an d√°</em> l√∫b.</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">hi number 1 from the second task!
hi number 1 from the first task!
hi number 2 from the first task!
hi number 2 from the second task!
hi number 3 from the first task!
hi number 3 from the second task!
hi number 4 from the first task!
hi number 4 from the second task!
hi number 5 from the first task!
hi number 6 from the first task!
hi number 7 from the first task!
hi number 8 from the first task!
hi number 9 from the first task!
</code></pre>
<p>Go dt√≠ seo, is cos√∫il go dtugann async agus sn√°itheanna na tortha√≠ bun√∫sacha c√©anna d√∫inn, ach le comhr√©ir dhifri√∫il: ag baint √∫s√°ide as <code>await</code> in ionad glaoch ar <code>join</code> ar an l√°imhse√°il join, agus ag fanacht leis na glaonna <code>sleep</code>.</p>
<p>Is √© an difr√≠ocht is m√≥ n√° nach raibh orainn sn√°ithe c√≥rais oibri√∫ch√°in eile a chruth√∫ chun seo a dh√©anamh. D√©anta na f√≠rinne, n√≠ g√° d√∫inn fi√∫ tasc a chruth√∫ anseo. Toisc go
mb√≠onn bloic async ag tioms√∫ chuig todhcha√≠ gan ainm, is f√©idir linn gach l√∫b a chur i mbloc async agus an t-am rith a chur orthu araon go dt√≠ go mbeidh siad cr√≠ochnaithe ag baint √∫s√°ide as an bhfeidhm <code>trpl::join</code>.</p>
<p>Sa chuid <a href="ch16-01-threads.html#waiting-for-all-threads-to-finish-using-join-handles">Ag fanacht le gach sn√°ithe a chr√≠ochn√∫ ag baint √∫s√°ide as L√°imhse√°lacha <code>join</code></a><!-- ignore -->, thaispe√°namar conas an modh <code>join</code> a √∫s√°id ar an gcine√°l <code>JoinHandle</code> a fhilleann nuair a ghlaonn t√∫ ar <code>std::thread::spawn</code>. T√° an fheidhm <code>trpl::join</code> cos√∫il, ach le haghaidh todhcha√≠. Nuair a thugann t√∫ dh√° thodhcha√≠ d√≥,
t√°irgeann s√© todhcha√≠ nua aonair a bhfuil a aschur ina tuple ina bhfuil aschur
gach todhcha√≠ a chuir t√∫ isteach a luaithe a bheidh siad <em>an d√°</em> gcr√≠ochnaithe. D√° bhr√≠ sin, i Liosta 17-8,
√∫s√°idimid <code>trpl::join</code> chun fanacht go mbeidh <code>fut1</code> agus <code>fut2</code> cr√≠ochnaithe. <em>N√≠</em> fhanfaimid
le <code>fut1</code> agus <code>fut2</code> ach ina ionad sin leis an todhcha√≠ nua a th√°irgeann <code>trpl::join</code>. D√©anaimid neamhaird den
aschur, mar n√≠l ann ach tuple ina bhfuil dh√° luach aonaid.</p>
<Listing number="17-8" caption="Using `trpl::join` to await two anonymous futures" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let fut1 = async {
            for i in 1..10 {
                println!("hi number {i} from the first task!");
                trpl::sleep(Duration::from_millis(500)).await;
            }
        };

        let fut2 = async {
            for i in 1..5 {
                println!("hi number {i} from the second task!");
                trpl::sleep(Duration::from_millis(500)).await;
            }
        };

        trpl::join(fut1, fut2).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Nuair a ritheann muid √© seo, feicimid an d√° thodhcha√≠ ag rith go dt√≠ an cr√≠och:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">hi number 1 from the first task!
hi number 1 from the second task!
hi number 2 from the first task!
hi number 2 from the second task!
hi number 3 from the first task!
hi number 3 from the second task!
hi number 4 from the first task!
hi number 4 from the second task!
hi number 5 from the first task!
hi number 6 from the first task!
hi number 7 from the first task!
hi number 8 from the first task!
hi number 9 from the first task!
</code></pre>
<p>Anois, feicfidh t√∫ an t-ord c√©anna gach uair, rud at√° an-difri√∫il √≥n m√©id a chonaiceamar le sn√°itheanna. T√° s√© sin amhlaidh toisc go bhfuil an fheidhm <code>trpl::join</code> <em>fair</em>,
rud a chialla√≠onn go seice√°lann s√≠ gach todhcha√≠ chomh minic c√©anna, ag malart√∫ eatarthu, agus nach ligeann s√≠ do cheann amh√°in dul chun tosaigh riamh m√° t√° an ceann eile r√©idh. Le sn√°itheanna, cinneann an c√≥ras oibri√∫ch√°in c√©n sn√°ithe at√° le seice√°il agus c√© chomh fada is ceart d√≥ rith. Le async Rust, cinneann an
am rith c√©n tasc at√° le seice√°il. (Go praitici√∫il, b√≠onn na sonra√≠ casta
toisc go bhf√©adfadh am rith async sn√°itheanna c√≥rais oibri√∫ch√°in a √∫s√°id faoin gcochall mar
chuid den chaoi a mbainist√≠onn s√© comhthr√°thacht, mar sin is f√©idir go mbeadh n√≠os m√≥ oibre ann cothroime a r√°th√∫
do am rith - ach is f√©idir f√≥s!) N√≠ g√° d'amanna rith cothroime a r√°th√∫
d'aon oibr√≠ocht ar leith, agus is minic a thairgeann siad APIanna √©ags√∫la chun ligean duit
a roghn√∫ cib√© acu is mian leat cothroime n√≥ nach ea.</p>
<p>Bain triail as cuid de na hathruithe seo ar fanacht leis na todhcha√≠ agus f√©ach cad a dh√©anann siad:</p>
<ul>
<li>Bain an bloc async as timpeall ar cheachtar l√∫b n√≥ an d√° cheann. - Fan le gach bloc neamhshioncr√≥nach d√≠reach tar √©is √© a shaini√∫.</li>
<li>Fill an ch√©ad l√∫b amh√°in i mbloc neamhshioncr√≥nach, agus fan leis an todhcha√≠ a eascra√≠onn as tar √©is chorp an dara l√∫b.</li>
</ul>
<p>Mar dh√∫shl√°n breise, f√©ach an f√©idir leat a dh√©anamh amach cad a bheidh an t-aschur i
ngach c√°s <em>sula</em> ritheann t√∫ an c√≥d!</p>
<h3 id="ag-comhaireamh-suas-ar-dh√°-thasc-ag-√ös√°id-aistri√∫-teachtaireachta√≠"><a class="header" href="#ag-comhaireamh-suas-ar-dh√°-thasc-ag-√ös√°id-aistri√∫-teachtaireachta√≠">Ag Comhaireamh Suas ar Dh√° Thasc ag √ös√°id Aistri√∫ Teachtaireachta√≠</a></h3>
<p>Beidh roinnt sonra√≠ idir todhcha√≠ochta√≠ eolach freisin: √∫s√°idfimid teachtaireachta√≠ aistri√∫
ar√≠s, ach an uair seo le leaganacha neamhshioncr√≥nacha de na cine√°lacha agus na feidhmeanna. Glacfaimid
cos√°n beag√°n difri√∫il n√° mar a rinneamar i <a href="ch16-02-message-passing.html">Ag √ös√°id Aistri√∫ Teachtaireachta√≠ chun Sonra√≠ a Aistri√∫
Idir Sn√°itheanna</a><!-- neamhaird --> chun cuid de na
pr√≠omhdhifr√≠ochta√≠ idir comhthr√°thacht bunaithe ar shn√°itheanna agus todhcha√≠ochta√≠ bunaithe a l√©iri√∫. I
Liost√∫ 17-9, tos√≥imid le bloc neamhshioncr√≥nach amh√°in‚Äî<em>gan</em> tasc ar leithligh a chruth√∫ mar a chrutha√≠omar sn√°ithe ar leithligh.</p>
<Listing number="17-9" caption="Creating an async channel and assigning the two halves to `tx` and `rx`" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let (tx, mut rx) = trpl::channel();

        let val = String::from("hi");
        tx.send(val).unwrap();

        let received = rx.recv().await.unwrap();
        println!("Got: {received}");
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, √∫s√°idimid <code>trpl::channel</code>, leagan neamhshioncr√≥nach den API il-th√°irgeora, aon-tomhalt√≥ra a d'√∫s√°ideamar le sn√°itheanna siar i gCaibidil 16. N√≠l ach beag√°n difr√≠ochta idir an leagan neamhshioncr√≥nach den API agus an leagan sn√°ithe-bhunaithe: √∫s√°ideann s√© <code>rx</code> glacad√≥ir inathraithe seachas glacad√≥ir dochlo√≠te, agus crutha√≠onn a mhodh <code>recv</code> todhcha√≠ a gcaithfimid fanacht leis seachas an luach a th√°irgeadh go d√≠reach. Anois
is f√©idir linn teachtaireachta√≠ a sheoladh √≥n seolt√≥ir chuig an nglacad√≥ir. Tabhair faoi deara nach g√° d√∫inn
sn√°ithe ar leithligh n√≥ fi√∫ tasc a chruth√∫; n√≠l le d√©anamh againn ach fanacht leis an nglao <code>rx.recv</code>.</p>
<p>Bloc√°lann an modh sioncr√≥nach <code>Receiver::recv</code> i <code>std::mpsc::channel</code> go dt√≠
go bhfaigheann s√© teachtaireacht. N√≠ dh√©anann an modh <code>trpl::Receiver::recv</code>, toisc go bhfuil s√© neamhshioncr√≥nach. In ionad bloc√°il, tugann s√© an rial√∫ ar ais don am rith go dt√≠ go
bhfaightear teachtaireacht n√≥ go nd√∫nann taobh seolta an chain√©il. I gcodarsnacht leis sin, n√≠ fhanfaimid leis an nglao <code>send</code>, mar n√≠ chuireann s√© bac air. N√≠ g√° d√≥, mar n√≠l teorainn leis an gcain√©al a bhfuilimid √° sheoladh isteach ann.</p>
<blockquote>
<p>N√≥ta: √ìs rud √© go ritheann an c√≥d async seo go l√©ir i mbloc async i nglao <code>trpl::run</code>
, is f√©idir le gach rud laistigh de bhloc√°il a sheachaint. Mar sin f√©in, cuirfidh an c√≥d <em>lasmuigh</em> de
bac ar an bhfeidhm <code>run</code> at√° ag filleadh. Sin pointe ioml√°n na feidhme
<code>trpl::run</code>: ligeann s√© duit <em>a roghn√∫</em> c√° h√°it le bloc√°il ar shraith √°irithe de ch√≥d async,
agus d√° bhr√≠ sin c√° h√°it le haistri√∫ idir c√≥d sioncr√≥naithe agus async. I bhformh√≥r na rith-amanna async,
tugtar <code>block_on</code> ar <code>run</code> ar an gc√∫is seo go d√≠reach.</p>
</blockquote>
<p>Tabhair faoi deara dh√° rud faoin sampla seo. Ar dt√∫s, tiocfaidh an teachtaireacht l√°ithreach.</p>
<p>Ar an dara dul s√≠os, c√© go n-√∫s√°idimid todhcha√≠ anseo, n√≠l aon chomhthr√°thacht ann f√≥s. Tarla√≠onn gach rud
sa liost√∫ in ord, d√≠reach mar a dh√©anfadh s√© mura mbeadh aon todhcha√≠
i gceist.</p>
<p>D√©anaimis aghaidh ar an gc√©ad chuid tr√≠ shraith teachtaireachta√≠ a sheoladh agus codladh eatarthu, mar a thaispe√°ntar i Liost√°il 17-10.</p>
<!-- We cannot test this one because it never stops! -->
<Listing number="17-10" caption="Sending and receiving multiple messages over the async channel and sleeping with an `await` between each message" file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let (tx, mut rx) = trpl::channel();

        let vals = vec![
            String::from("hi"),
            String::from("from"),
            String::from("the"),
            String::from("future"),
        ];

        for val in vals {
            tx.send(val).unwrap();
            trpl::sleep(Duration::from_millis(500)).await;
        }

        while let Some(value) = rx.recv().await {
            println!("received '{value}'");
        }
<span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Chomh maith leis na teachtaireachta√≠ a sheoladh, n√≠ m√≥r d√∫inn iad a fh√°il. Sa ch√°s seo,
toisc go bhfuil a fhios againn c√© mh√©ad teachtaireacht at√° ag teacht isteach, d'fh√©adfaimis √© sin a dh√©anamh de l√°imh tr√≠
ghlaoch ar <code>rx.recv().await</code> ceithre huaire. Sa saol r√©ad√∫il, √°fach, de ghn√°th beidh muid ag fanacht ar l√≠on <em>anaithnid</em> teachtaireachta√≠, mar sin n√≠ m√≥r d√∫inn fanacht
go dt√≠ go gcinnfimid nach bhfuil a thuilleadh teachtaireachta√≠ ann.</p>
<p>I Liosta 16-10, d'√∫s√°ideamar l√∫b <code>for</code> chun na m√≠reanna go l√©ir a fuarthas √≥
chain√©al sioncr√≥nach a phr√≥ise√°il. N√≠l bealach ag Rust f√≥s chun l√∫b <code>for</code> a scr√≠obh thar shraith
<em>asinchr√≥nach</em> m√≠reanna, √°fach, mar sin n√≠ m√≥r d√∫inn l√∫b nach bhfacamar roimhe seo a √∫s√°id: an l√∫b coinn√≠ollach <code>while let</code>. Seo an leagan l√∫b den
th√≥g√°il <code>if let</code> a chonaiceamar siar sa chuid <a href="ch06-03-if-let.html">Sreabhadh Rialaithe Gonta le <code>if let</code> agus <code>let else</code></a><!-- neamhaird a dh√©anamh -->. Leanfaidh an l√∫b ag feidhmi√∫ chomh fada agus a leanann an patr√∫n a shonra√≠tear de bheith ag teacht leis an luach.</p>
<p>Ginfidh an glao <code>rx.recv</code> todhcha√≠, agus fanfaimid air. Cuirfidh an t-am rith sos ar an todhcha√≠ go dt√≠ go mbeidh s√© r√©idh. Nuair a thiocfaidh teachtaireacht, r√©iteoidh an todhcha√≠ go
<code>Some(message)</code> an oiread uaireanta agus a thagann teachtaireacht. Nuair a dh√∫nann an cain√©al,
beag beann ar cib√© an bhfuil <em>aon</em> teachtaireachta√≠ tagtha, r√©iteoidh an todhcha√≠ go <code>None</code> ina ionad sin chun a l√©iri√∫ nach bhfuil aon luachanna eile ann agus d√° bhr√≠ sin ba ch√≥ir d√∫inn
stop a chur leis an v√≥ta√≠ocht‚Äîis √© sin, stop a chur leis an bhfanacht.</p>
<p>Tarraing√≠onn an l√∫b <code>while let</code> seo go l√©ir le ch√©ile. M√°s √© <code>Some(message)</code> toradh an ghlao ar
<code>rx.recv().await</code>, faighimid rochtain ar an teachtaireacht agus is f√©idir linn
√≠ a √∫s√°id i gcorp an l√∫ibe, d√≠reach mar a d'fh√©adfaimis le <code>if let</code>. M√°s √©
<code>None</code> an toradh, cr√≠ochna√≠onn an l√∫b. Gach uair a chr√≠ochna√≠onn an l√∫b, buaileann s√© an pointe fanachta
ar√≠s, mar sin cuireann an t-am rith sos air ar√≠s go dt√≠ go dtagann teachtaireacht eile.</p>
<p>Seolann agus faigheann an c√≥d na teachtaireachta√≠ go l√©ir go rath√∫il anois. Ar an drochuair,
t√° c√∫pla fadhb ann f√≥s. Ar an gc√©ad dul s√≠os, n√≠ thagann na teachtaireachta√≠
ag eatraimh leathshoicind. Tagann siad go l√©ir ag an am c√©anna, 2 (2,000 milleasoicind) tar √©is
d√∫inn an cl√°r a thos√∫. Ar an dara dul s√≠os, n√≠ scoireann an cl√°r seo riamh! Ina √°it sin,
fanann s√© go deo le haghaidh teachtaireachta√≠ nua. Beidh ort √© a dh√∫nadh s√≠os ag baint √∫s√°ide as <span
class="keystroke">ctrl-c</span>.</p>
<p>Tosa√≠mis tr√≠ scr√∫d√∫ a dh√©anamh ar an gc√∫is a dtagann na teachtaireachta√≠ isteach go l√©ir ag an am c√©anna tar √©is an
mhoill ioml√°in, seachas teacht isteach le moilleanna idir gach ceann. Laistigh de bhloc neamhshioncr√≥nach ar leith,
is √© an t-ord ina bhfeictear eochairfhocail <code>await</code> sa ch√≥d an t-ord ina nd√©antar iad a fhorghn√≠omh√∫ nuair a ritheann an cl√°r.</p>
<p>N√≠l ach bloc neamhshioncr√≥nach amh√°in i Liosta 17-10, mar sin ritheann gach rud ann
go l√≠neach. N√≠l aon chomhthr√°thacht ann f√≥s. Tarla√≠onn na glaonna <code>tx.send</code> go l√©ir,
idircheangailte leis na glaonna <code>trpl::sleep</code> go l√©ir agus a gcuid point√≠ await
gaolmhara. Ansin amh√°in a th√©ann an l√∫b <code>while let</code> tr√≠ aon cheann de na point√≠ <code>await</code>
ar na glaonna <code>recv</code>.</p>
<p>Chun an t-iompar at√° uainn a fh√°il, √°it a dtarla√≠onn an mhoill codlata idir gach teachtaireacht,
n√≠ m√≥r d√∫inn na hoibr√≠ochta√≠ <code>tx</code> agus <code>rx</code> a chur ina mbloic neamhshioncr√≥nacha f√©in, mar a thaispe√°ntar
i Liosta 17-11. Ansin is f√©idir leis an rith-am gach ceann acu a fhorghn√≠omh√∫ ar leithligh ag baint √∫s√°ide as
<code>trpl::join</code>, d√≠reach mar at√° sa sampla comhairimh. Ar√≠s eile, fanfaimid ar thoradh
glaoch ar <code>trpl::join</code>, n√≠ ar na todhcha√≠ aonair. D√° bhfanfaimis ar na
todhcha√≠ aonair in ord, chr√≠ochn√≥imis ar ais i sreabhadh seicheamhach - d√≠reach an rud at√°imid ag iarraidh <em>gan</em> a dh√©anamh.</p>
<!-- We cannot test this one because it never stops! -->
<Listing number="17-11" caption="Separating `send` and `recv` into their own `async` blocks and awaiting the futures for those blocks" file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span>        let tx_fut = async {
            let vals = vec![
                String::from("hi"),
                String::from("from"),
                String::from("the"),
                String::from("future"),
            ];

            for val in vals {
                tx.send(val).unwrap();
                trpl::sleep(Duration::from_millis(500)).await;
            }
        };

        let rx_fut = async {
            while let Some(value) = rx.recv().await {
                println!("received '{value}'");
            }
        };

        trpl::join(tx_fut, rx_fut).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Leis an gc√≥d nuashonraithe i Liosta 17-11, priont√°iltear na teachtaireachta√≠ ag eatraimh 500 milleasoicind, seachas iad go l√©ir ar luas lasrach tar √©is 2 shoicind.</p>
<p>N√≠ scoireann an cl√°r riamh, √°fach, mar gheall ar an gcaoi a n-idirghn√≠omha√≠onn l√∫b <code>while let</code> le <code>trpl::join</code>:</p>
<ul>
<li>
<p>N√≠ chr√≠ochna√≠onn an todhcha√≠ a fhilleann √≥ <code>trpl::join</code> ach amh√°in nuair a bh√≠onn <em>both</em> futures a tugadh d√≥ cr√≠ochnaithe.</p>
</li>
<li>
<p>Cr√≠ochna√≠onn an todhcha√≠ <code>tx</code> nuair a chr√≠ochna√≠onn s√© ina chodladh tar √©is an teachtaireacht dheireanach a sheoladh i <code>vals</code>.</p>
</li>
<li>
<p>N√≠ chr√≠ochn√≥idh an todhcha√≠ <code>rx</code> go dt√≠ go gcr√≠ochn√≥idh l√∫b <code>while let</code>.</p>
</li>
<li>
<p>N√≠ chr√≠ochn√≥idh l√∫b <code>while let</code> go dt√≠ go dt√°irgtear <code>None</code> ag fanacht le <code>rx.recv</code>.</p>
</li>
<li>
<p>N√≠ fhilleann fanacht le <code>rx.recv</code> <code>None</code> ach amh√°in nuair a bheidh ceann eile an chain√©il d√∫nta.</p>
</li>
<li>
<p>N√≠ dh√∫nfaidh an cain√©al ach amh√°in m√° ghlaonn muid <code>rx.close</code> n√≥ nuair a scaoiltear taobh an tseolt√≥ra,
<code>tx</code>.</p>
</li>
<li>
<p>N√≠ ghlaonn muid ar <code>rx.close</code> √°it ar bith, agus n√≠ scaoilfear <code>tx</code> go dt√≠ go mbeidh an bloc neamhshioncr√≥nach is forimealla√≠ a chuirtear ar aghaidh chuig <code>trpl::run</code> cr√≠ochnaithe.</p>
</li>
<li>
<p>N√≠ f√©idir leis an mbloc cr√≠ochn√∫ mar go bhfuil s√© bloc√°ilte nuair a bheidh <code>trpl::join</code> cr√≠ochnaithe, rud a thugann ar ais go barr an liosta seo sinn.</p>
</li>
</ul>
<p>D‚Äôfh√©adfaimis <code>rx</code> a dh√∫nadh de l√°imh tr√≠ ghlaoch ar <code>rx.close</code> √°it √©igin, ach n√≠l m√≥r√°n ciall leis sin. D√° stopfa√≠ tar √©is l√≠on treallach teachtaireachta√≠ a l√°imhse√°il,
dh√©anfadh s√© sin an cl√°r a dh√∫nadh s√≠os, ach d‚Äôfh√©adfaimis teachtaireachta√≠ a chailleadh. Teasta√≠onn bealach eile uainn
chun a chinnti√∫ go scaoilfear <code>tx</code> <em>roimh</em> dheireadh na feidhme.</p>
<p>Faoi l√°thair, n√≠ fhaigheann an bloc neamhshioncr√≥nach ina seolaimid na teachtaireachta√≠ ach <code>tx</code> ar iasacht mar
nach bhfuil √∫in√©ireacht ag teast√°il chun teachtaireacht a sheoladh, ach d√° bhf√©adfaimis <code>tx</code> a bhogadh isteach sa
bhloc neamhshioncr√≥nach sin, scaoilf√≠ √© nuair a bheidh an bloc sin cr√≠ochnaithe. Sa chuid Caibidil 13
<a href="ch13-01-closures.html#capturing-references-or-moving-ownership">Tagairt√≠ a Ghabh√°il n√≥ √öin√©ireacht a Bhogadh</a><!-- neamhaird a dh√©anamh -->, d'fhoghlaim t√∫
conas an eochairfhocal <code>move</code> a √∫s√°id le d√∫nadh, agus, mar a pl√©adh sa
chuid Caibidil 16 <a href="ch16-01-threads.html#using-move-closures-with-threads">D√∫nadh <code>move</code> a √ös√°id le Sn√°itheanna</a><!-- neamhaird a dh√©anamh
-->, is minic a bh√≠onn orainn sonra√≠ a bhogadh isteach i nd√∫nadh agus muid ag obair le sn√°itheanna.</p>
<p>Baineann an dinimic bhun√∫sach ch√©anna le bloic async, mar sin oibr√≠onn an eochairfhocal <code>move</code> le
bloic async d√≠reach mar a dh√©anann s√© le d√∫nadh.</p>
<p>I Liosta 17-12, athra√≠mid an bloc a √∫s√°idtear chun teachtaireachta√≠ a sheoladh √≥ <code>async</code> go
<code>async move</code>. Nuair a ritheann muid an <em>leagan</em> seo den ch√≥d, m√∫chtar √© go gal√°nta
tar √©is an teachtaireacht dheireanach a sheoladh agus a fh√°il.</p>
<Listing number="17-12" caption="A  revision of the code from Listing 17-11 that correctly shuts down when complete" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let (tx, mut rx) = trpl::channel();

        let tx_fut = async move {
            let vals = vec![
                String::from("hi"),
                String::from("from"),
                String::from("the"),
                String::from("future"),
            ];

            for val in vals {
                tx.send(val).unwrap();
                trpl::sleep(Duration::from_millis(500)).await;
            }
        };

        let rx_fut = async {
            while let Some(value) = rx.recv().await {
                println!("received '{value}'");
            }
        };

        trpl::join(tx_fut, rx_fut).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is cain√©al il-th√°irgeoir√≠ √© an cain√©al neamhshioncr√≥nach seo freisin, mar sin is f√©idir linn glaoch ar <code>clone</code> ar <code>tx</code> m√°s mian linn teachtaireachta√≠ a sheoladh √≥ thodhcha√≠ iolracha, mar a thaispe√°ntar i Liost√°il 17-13.</p>
<Listing number="17-13" caption="Using multiple producers with async blocks" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let (tx, mut rx) = trpl::channel();

        let tx1 = tx.clone();
        let tx1_fut = async move {
            let vals = vec![
                String::from("hi"),
                String::from("from"),
                String::from("the"),
                String::from("future"),
            ];

            for val in vals {
                tx1.send(val).unwrap();
                trpl::sleep(Duration::from_millis(500)).await;
            }
        };

        let rx_fut = async {
            while let Some(value) = rx.recv().await {
                println!("received '{value}'");
            }
        };

        let tx_fut = async move {
            let vals = vec![
                String::from("more"),
                String::from("messages"),
                String::from("for"),
                String::from("you"),
            ];

            for val in vals {
                tx.send(val).unwrap();
                trpl::sleep(Duration::from_millis(1500)).await;
            }
        };

        trpl::join3(tx1_fut, tx_fut, rx_fut).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ar dt√∫s, cl√≥n√°laimid <code>tx</code>, ag cruth√∫ <code>tx1</code> lasmuigh den ch√©ad bhloc asyncr√≥nach. Bogaimid <code>tx1</code> isteach sa bhloc sin d√≠reach mar a rinneamar roimhe seo le <code>tx</code>. Ansin, n√≠os d√©ana√≠, bogaimid an <code>tx</code> bunaidh isteach i mbloc asyncr√≥nach <em>new</em>, √°it a seolaimid n√≠os m√≥ teachtaireachta√≠ ar
mhoill beag√°n n√≠os moille. Tarla√≠onn s√© go gcuirimid an bloc asyncr√≥nach nua seo i ndiaidh an bhloic asyncr√≥naigh
chun teachtaireachta√≠ a fh√°il, ach d'fh√©adfadh s√© dul roimhe chomh maith c√©anna. Is √© an eochair
an t-ord ina bhfuiltear ag fanacht leis na todhcha√≠, n√≠ an √°it ina gcrutha√≠tear iad.</p>
<p>N√≠ m√≥r don d√° bhloc asyncr√≥nach chun teachtaireachta√≠ a sheoladh a bheith ina mblocanna <code>bogadh async</code> ionas
go gcaillfear <code>tx</code> agus <code>tx1</code> araon nuair a chr√≠ochna√≠onn na bloic sin. Seachas sin, cr√≠ochn√≥imid ar ais san l√∫b gan teorainn c√©anna inar thosa√≠omar. Ar deireadh, athra√≠mid √≥ <code>trpl::join</code> go <code>trpl::join3</code> chun an todhcha√≠ bhreise a l√°imhse√°il.</p>
<p>Anois feicimid na teachtaireachta√≠ go l√©ir √≥ na todhcha√≠ seolta araon, agus toisc go n-√∫s√°ideann na todhcha√≠ seolta moilleanna beag√°n difri√∫la tar √©is seolta, faightear na teachtaireachta√≠ ag na eatraimh √©ags√∫la sin freisin.</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">received 'hi'
received 'more'
received 'from'
received 'the'
received 'messages'
received 'future'
received 'for'
received 'you'
</code></pre>
<p>Is t√∫s maith √© seo, ach n√≠l ann ach dorn√°n todhcha√≠: dh√° cheann le <code>join</code>, n√≥ tr√≠ cinn le <code>join3</code>. Feicfimid conas a d'fh√©adfaimis oibri√∫ le n√≠os m√≥ todhcha√≠.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ag-obair-le-l√≠on-ar-bith-de-thodhcha√≠"><a class="header" href="#ag-obair-le-l√≠on-ar-bith-de-thodhcha√≠">Ag Obair le L√≠on ar bith de Thodhcha√≠</a></h2>
<p>Nuair a d'athra√≠omar √≥ dh√° thodhcha√≠ a √∫s√°id go tr√≠ cinn sa chuid roimhe seo, b'√©igean d√∫inn
freisin aistri√∫ √≥ <code>join</code> a √∫s√°id go <code>join3</code>. Bheadh ‚Äã‚Äãs√© cr√°ite
feidhm dhifri√∫il a ghlaoch gach uair a d'athra√≠omar l√≠on na dtodhcha√≠ a theastaigh uainn a bheith p√°irteach. Ar √°mhara√≠ an tsaoil, t√° foirm macra de <code>join</code> againn ar f√©idir linn l√≠on treallach arg√≥int√≠ a chur chuici. L√°imhse√°lann s√© fanacht leis na todhcha√≠ f√©in freisin.
D√° bhr√≠ sin, d'fh√©adfaimis an c√≥d √≥ Liost√°il 17-13 a athscr√≠obh chun <code>join!</code> a √∫s√°id in ionad <code>join3</code>, mar at√° i Liost√°il 17-14.</p>
<Listing number="17-14" caption="Using `join!` to wait for multiple futures" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">        let tx1 = tx.clone();
</span><span class="boring">        let tx1_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("hi"),
</span><span class="boring">                String::from("from"),
</span><span class="boring">                String::from("the"),
</span><span class="boring">                String::from("future"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx1.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let rx_fut = async {
</span><span class="boring">            while let Some(value) = rx.recv().await {
</span><span class="boring">                println!("received '{value}'");
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let tx_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("more"),
</span><span class="boring">                String::from("messages"),
</span><span class="boring">                String::from("for"),
</span><span class="boring">                String::from("you"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span>        trpl::join!(tx1_fut, tx_fut, rx_fut);
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is cinnte gur feabhas √© seo ar an malart√∫ idir <code>join</code> agus
<code>join3</code> agus <code>join4</code> agus mar sin de! Mar sin f√©in, n√≠ oibr√≠onn an fhoirm macra seo ach amh√°in
nuair a bh√≠onn a fhios againn c√© mh√©ad todhcha√≠ at√° ann roimh r√©. I Rust sa saol r√©ad√∫il,
√°fach, is patr√∫n coitianta √© todhcha√≠ a bhr√∫ isteach i mbaili√∫ch√°n agus ansin fanacht ar chuid n√≥ ar
gach todhcha√≠ d√≠obh a bheith cr√≠ochnaithe.</p>
<p>Chun na todhcha√≠ go l√©ir i mbaili√∫ch√°n √©igin a sheice√°il, beidh orainn athr√° a dh√©anamh orthu agus
join a dh√©anamh orthu <em>uile</em> acu. Glacann an fheidhm <code>trpl::join_all</code> le haon chine√°l a
chuireann an tr√©ith <code>Iterator</code> i bhfeidhm, a d'fhoghlaim t√∫ faoi i <a href="ch13-02-iterators.html#the-iterator-trait-and-the-next-method">An Tr√©ith Iterator agus an Modh <code>next</code></a><!-- ignore --> Caibidil 13, mar sin
is cos√∫il gurb √© an tic√©ad ceart √©. D√©anaimis iarracht √°r dtodhcha√≠ a chur i veicteoir agus
<code>join!</code> a athshol√°thar le <code>join_all</code> mar a thaispe√°ntar i Liost√°il 17-15.</p>
<Listing  number="17-15" caption="Storing anonymous futures in a vector and calling `join_all`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">        let tx1 = tx.clone();
</span><span class="boring">        let tx1_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("hi"),
</span><span class="boring">                String::from("from"),
</span><span class="boring">                String::from("the"),
</span><span class="boring">                String::from("future"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx1.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let rx_fut = async {
</span><span class="boring">            while let Some(value) = rx.recv().await {
</span><span class="boring">                println!("received '{value}'");
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let tx_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("more"),
</span><span class="boring">                String::from("messages"),
</span><span class="boring">                String::from("for"),
</span><span class="boring">                String::from("you"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span>        let futures = vec![tx1_fut, rx_fut, tx_fut];

        trpl::join_all(futures).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ar an drochuair, n√≠ thiomsa√≠onn an c√≥d seo. Ina √°it sin, faighimid an earr√°id seo:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-15/
cargo build
copy just the compiler error
-->
<pre><code class="language-text">error[E0308]: mismatched types
  --&gt; src/main.rs:45:37
   |
10 |         let tx1_fut = async move {
   |                       ---------- the expected `async` block
...
24 |         let rx_fut = async {
   |                      ----- the found `async` block
...
45 |         let futures = vec![tx1_fut, rx_fut, tx_fut];
   |                                     ^^^^^^ expected `async` block, found a 
different `async` block
   |
   = note: expected `async` block `{async block@src/main.rs:10:23: 10:33}`
              found `async` block `{async block@src/main.rs:24:22: 24:27}`
   = note: no two async blocks, even if identical, have the same type
   = help: consider pinning your async block and casting it to a trait object
</code></pre>
<p>D‚Äôfh√©adfadh s√© seo a bheith ionadh. Tar √©is an tsaoil, n√≠ thugann aon cheann de na bloic asyncr√≥nacha aon rud ar ais,
mar sin t√°irgeann gach ceann acu <code>Future&lt;Output = ()&gt;</code>. Cuimhnigh gur tr√©ith √≠ <code>Future</code>,
ach, agus go gcrutha√≠onn an tiomsaitheoir enum uath√∫il do gach bloc asyncr√≥nach. N√≠ f√©idir leat dh√° strucht√∫r l√°mhscr√≠ofa √©ags√∫la a chur i <code>Vec</code>, agus baineann an riail ch√©anna
leis na enums √©ags√∫la a ghineann an tiomsaitheoir.</p>
<p>Chun seo a chur ag obair, n√≠ m√≥r d√∫inn <em>trait objects</em> a √∫s√°id, d√≠reach mar a rinneamar i <a href="ch12-03-improving-error-handling-and-modularity.html">‚ÄúReturning
Errors from the run function‚Äù</a><!-- ignore --> i gCaibidil 12. (Cl√∫d√≥imid
trait objects go mion i gCaibidil 18.) Tr√≠ √∫s√°id a bhaint as r√©ada tr√©ithe, is f√©idir linn gach
ceann de na todhcha√≠ gan ainm a th√°irgeann na cine√°lacha seo a ch√≥ire√°il mar an gcine√°l c√©anna, toisc go gcuireann siad uile an tr√©ith <code>Future</code> i bhfeidhm.</p>
<blockquote>
<p>N√≥ta: I rann√≥g Chaibidil 8 <a href="ch12-03-improving-error-handling-and-modularity.html#returning-errors-from-the-run-function">√ös√°id Enum chun Illuachanna a St√≥r√°il</a><!-- ignore -->, phl√©amar bealach eile chun ilchine√°lacha a √°ireamh i <code>Vec</code>: enum a √∫s√°id chun gach cine√°l a fh√©adfaidh a bheith le feice√°il sa
veicteoir a l√©iri√∫. N√≠ f√©idir linn √© sin a dh√©anamh anseo, √°fach. Ar an gc√©ad dul s√≠os, n√≠l aon bhealach againn na cine√°lacha √©ags√∫la a ainmni√∫, mar go bhfuil siad gan ainm. Ar an gc√©ad dul s√≠os, ba √© an ch√∫is
ar shroicheamar veicteoir agus <code>join_all</code> ar an gc√©ad dul s√≠os n√° go mbeimid in ann oibri√∫
le baili√∫ch√°n dinimici√∫il todhcha√≠ochta√≠ nuair nach bhfuil c√∫ram orainn ach go bhfuil an cine√°l
aschuir ch√©anna acu.</p>
</blockquote>
<p>Tosa√≠mid tr√≠ gach todhcha√≠ sa <code>vec!</code> a fhilleadh i <code>Box::new</code>, mar a thaispe√°ntar i
Liost√°il 17-16.</p>
<Listing number="17-16" caption="Using `Box::new` to align the types of the futures in a `Vec`" file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">        let tx1 = tx.clone();
</span><span class="boring">        let tx1_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("hi"),
</span><span class="boring">                String::from("from"),
</span><span class="boring">                String::from("the"),
</span><span class="boring">                String::from("future"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx1.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let rx_fut = async {
</span><span class="boring">            while let Some(value) = rx.recv().await {
</span><span class="boring">                println!("received '{value}'");
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let tx_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("more"),
</span><span class="boring">                String::from("messages"),
</span><span class="boring">                String::from("for"),
</span><span class="boring">                String::from("you"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span>        let futures =
            vec![Box::new(tx1_fut), Box::new(rx_fut), Box::new(tx_fut)];

        trpl::join_all(futures).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ar an drochuair, n√≠ thiomsa√≠onn an c√≥d seo f√≥s. D√©anta na f√≠rinne, faighimid an earr√°id bhun√∫sach ch√©anna a fuair muid roimhe seo don dara agus don tr√≠√∫ glao <code>Box::new</code> araon, chomh maith le
earr√°id√≠ nua a thagra√≠onn don tr√©ith <code>Unpin</code>. Fillfimid ar na hearr√°id√≠ <code>Unpin</code> i gceann tamaill. Ar dt√∫s, d√©anaimis na hearr√°id√≠ cine√°il ar na glaonna <code>Box::new</code> a shocr√∫ tr√≠
chine√°l an athr√≥g <code>futures</code> a an√≥t√°il go sainr√°ite (f√©ach Liost√°il 17-17).</p>
<Listing number="17-17" caption="Fixing the rest of the type mismatch errors by using an explicit type declaration" file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{future::Future, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">        let tx1 = tx.clone();
</span><span class="boring">        let tx1_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("hi"),
</span><span class="boring">                String::from("from"),
</span><span class="boring">                String::from("the"),
</span><span class="boring">                String::from("future"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx1.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let rx_fut = async {
</span><span class="boring">            while let Some(value) = rx.recv().await {
</span><span class="boring">                println!("received '{value}'");
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        let tx_fut = async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("more"),
</span><span class="boring">                String::from("messages"),
</span><span class="boring">                String::from("for"),
</span><span class="boring">                String::from("you"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        };
</span><span class="boring">
</span>        let futures: Vec&lt;Box&lt;dyn Future&lt;Output = ()&gt;&gt;&gt; =
            vec![Box::new(tx1_fut), Box::new(rx_fut), Box::new(tx_fut)];
<span class="boring">
</span><span class="boring">        trpl::join_all(futures).await;
</span><span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>T√° an dearbh√∫ cine√°il seo beag√°in√≠n casta, mar sin d√©anaimis scr√∫d√∫ air:</p>
<ol>
<li>
<p>Is √© an todhcha√≠ f√©in an cine√°l is istigh. Tugaimid faoi deara go soil√©ir gurb √© aschur an todhcha√≠ an cine√°l aonaid <code>()</code> tr√≠ <code>Future&lt;Output = ()&gt;</code> a scr√≠obh.</p>
</li>
<li>
<p>Ansin, cuirimid <code>dyn</code> leis an tr√©ith chun √© a mharc√°il mar dhinimici√∫il.</p>
</li>
<li>
<p>T√° an tagairt tr√©ithe ioml√°n fillte i <code>Box</code>.</p>
</li>
<li>
<p>Ar deireadh, luaimid go soil√©ir gur <code>Vec</code> √© <code>futures</code> ina bhfuil na m√≠reanna seo.</p>
</li>
</ol>
<p>Rinne sin difr√≠ocht mh√≥r cheana f√©in. Anois nuair a ritheann muid an tiomsaitheoir, n√≠ bhfaighimid ach
na hearr√°id√≠ ina luaitear <code>Unpin</code>. C√© go bhfuil tr√≠ cinn acu ann, t√° a n-√°bhar
an-chos√∫il.</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-16
cargo build
# copy *only* the errors
# fix the paths
-->
<pre><code class="language-text">error[E0308]: mismatched types
   --&gt; src/main.rs:46:46
    |
10  |         let tx1_fut = async move {
    |                       ---------- the expected `async` block
...
24  |         let rx_fut = async {
    |                      ----- the found `async` block
...
46  |             vec![Box::new(tx1_fut), Box::new(rx_fut), Box::new(tx_fut)];
    |                                     -------- ^^^^^^ expected `async` block, found a different `async` block
    |                                     |
    |                                     arguments to this function are incorrect
    |
    = note: expected `async` block `{async block@src/main.rs:10:23: 10:33}`
               found `async` block `{async block@src/main.rs:24:22: 24:27}`
    = note: no two async blocks, even if identical, have the same type
    = help: consider pinning your async block and casting it to a trait object
note: associated function defined here
   --&gt; file:///home/.rustup/toolchains/1.82/lib/rustlib/src/rust/library/alloc/src/boxed.rs:255:12
    |
255 |     pub fn new(x: T) -&gt; Self {
    |            ^^^

error[E0308]: mismatched types
   --&gt; src/main.rs:46:64
    |
10  |         let tx1_fut = async move {
    |                       ---------- the expected `async` block
...
30  |         let tx_fut = async move {
    |                      ---------- the found `async` block
...
46  |             vec![Box::new(tx1_fut), Box::new(rx_fut), Box::new(tx_fut)];
    |                                                       -------- ^^^^^^ expected `async` block, found a different `async` block
    |                                                       |
    |                                                       arguments to this function are incorrect
    |
    = note: expected `async` block `{async block@src/main.rs:10:23: 10:33}`
               found `async` block `{async block@src/main.rs:30:22: 30:32}`
    = note: no two async blocks, even if identical, have the same type
    = help: consider pinning your async block and casting it to a trait object
note: associated function defined here
   --&gt; file:///home/.rustup/toolchains/1.82/lib/rustlib/src/rust/library/alloc/src/boxed.rs:255:12
    |
255 |     pub fn new(x: T) -&gt; Self {
    |            ^^^

error[E0277]: `{async block@src/main.rs:10:23: 10:33}` cannot be unpinned
   --&gt; src/main.rs:48:24
    |
48  |         trpl::join_all(futures).await;
    |         -------------- ^^^^^^^ the trait `Unpin` is not implemented for `{async block@src/main.rs:10:23: 10:33}`, which is required by `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;: Future`
    |         |
    |         required by a bound introduced by this call
    |
    = note: consider using the `pin!` macro
            consider using `Box::pin` if you need to access the pinned value outside of the current scope
    = note: required for `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;` to implement `Future`
note: required by a bound in `join_all`
   --&gt; file:///home/.cargo/registry/src/index.crates.io-6f17d22bba15001f/futures-util-0.3.30/src/future/join_all.rs:105:14
    |
102 | pub fn join_all&lt;I&gt;(iter: I) -&gt; JoinAll&lt;I::Item&gt;
    |        -------- required by a bound in this function
...
105 |     I::Item: Future,
    |              ^^^^^^ required by this bound in `join_all`

error[E0277]: `{async block@src/main.rs:10:23: 10:33}` cannot be unpinned
  --&gt; src/main.rs:48:9
   |
48 |         trpl::join_all(futures).await;
   |         ^^^^^^^^^^^^^^^^^^^^^^^ the trait `Unpin` is not implemented for `{async block@src/main.rs:10:23: 10:33}`, which is required by `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;: Future`
   |
   = note: consider using the `pin!` macro
           consider using `Box::pin` if you need to access the pinned value outside of the current scope
   = note: required for `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;` to implement `Future`
note: required by a bound in `futures_util::future::join_all::JoinAll`
  --&gt; file:///home/.cargo/registry/src/index.crates.io-6f17d22bba15001f/futures-util-0.3.30/src/future/join_all.rs:29:8
   |
27 | pub struct JoinAll&lt;F&gt;
   |            ------- required by a bound in this struct
28 | where
29 |     F: Future,
   |        ^^^^^^ required by this bound in `JoinAll`

error[E0277]: `{async block@src/main.rs:10:23: 10:33}` cannot be unpinned
  --&gt; src/main.rs:48:33
   |
48 |         trpl::join_all(futures).await;
   |                                 ^^^^^ the trait `Unpin` is not implemented for `{async block@src/main.rs:10:23: 10:33}`, which is required by `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;: Future`
   |
   = note: consider using the `pin!` macro
           consider using `Box::pin` if you need to access the pinned value outside of the current scope
   = note: required for `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;` to implement `Future`
note: required by a bound in `futures_util::future::join_all::JoinAll`
  --&gt; file:///home/.cargo/registry/src/index.crates.io-6f17d22bba15001f/futures-util-0.3.30/src/future/join_all.rs:29:8
   |
27 | pub struct JoinAll&lt;F&gt;
   |            ------- required by a bound in this struct
28 | where
29 |     F: Future,
   |        ^^^^^^ required by this bound in `JoinAll`
</code></pre>
<p>Is <em>a l√°n</em> √© sin le d√≠le√°, mar sin d√©anaimis √© a scaradh √≥na ch√©ile. Ins√≠onn an ch√©ad chuid den teachtaireacht d√∫inn nach gcuireann an ch√©ad bhloc asyncr√≥nach (<code>src/main.rs:8:23: 20:10</code>)
an tr√©ith <code>Unpin</code> i bhfeidhm agus molann s√© <code>pin!</code> n√≥ <code>Box::pin</code> a √∫s√°id chun
√© a r√©iteach. N√≠os d√©ana√≠ sa chaibidil, d√©anfaimid tochailt isteach i roinnt sonra√≠ eile faoi <code>Pin</code> agus
<code>Unpin</code>. I l√°thair na huaire, √°fach, is f√©idir linn comhairle an tiomsaitheora a lean√∫int chun
d√≠cheangal. I Liost√°il 17-18, tosa√≠mid tr√≠d an n√≥ta cine√°il do
<code>futures</code> a nuashonr√∫, le <code>Pin</code> ag timfhilleadh gach <code>Box</code>. Ar an dara dul s√≠os, √∫s√°idimid <code>Box::pin</code> chun
na todhcha√≠ f√©in a phion√°il.</p>
<Listing number="17-18" caption="Using `Pin` and `Box::pin` to make the `Vec` type check" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{
</span><span class="boring">    future::Future,
</span><span class="boring">    pin::{pin, Pin},
</span><span class="boring">    time::Duration,
</span><span class="boring">};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">        let tx1 = tx.clone();
</span><span class="boring">        let tx1_fut = pin!(async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("hi"),
</span><span class="boring">                String::from("from"),
</span><span class="boring">                String::from("the"),
</span><span class="boring">                String::from("future"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx1.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        });
</span><span class="boring">
</span><span class="boring">        let rx_fut = pin!(async {
</span><span class="boring">            while let Some(value) = rx.recv().await {
</span><span class="boring">                println!("received '{value}'");
</span><span class="boring">            }
</span><span class="boring">        });
</span><span class="boring">
</span><span class="boring">        let tx_fut = pin!(async move {
</span><span class="boring">            let vals = vec![
</span><span class="boring">                String::from("more"),
</span><span class="boring">                String::from("messages"),
</span><span class="boring">                String::from("for"),
</span><span class="boring">                String::from("you"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span><span class="boring">        });
</span><span class="boring">
</span>        let futures: Vec&lt;Pin&lt;Box&lt;dyn Future&lt;Output = ()&gt;&gt;&gt;&gt; =
            vec![Box::pin(tx1_fut), Box::pin(rx_fut), Box::pin(tx_fut)];
<span class="boring">
</span><span class="boring">        trpl::join_all(futures).await;
</span><span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>M√° dh√©anaimid √© seo a thioms√∫ agus a rith, gheobhaimid an t-aschur a raibh s√∫il againn leis sa deireadh:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">received 'hi'
received 'more'
received 'from'
received 'messages'
received 'the'
received 'for'
received 'future'
received 'you'
</code></pre>
<p>√ì, a Dhia!</p>
<p>T√° beag√°n eile le fiosr√∫ anseo. Ar an gc√©ad dul s√≠os, cuireann √∫s√°id a bhaint as <code>Pin&lt;Box&lt;T&gt;&gt;</code> beag√°n forchostais leis √≥ na todhcha√≠ seo a chur ar an gcarn le <code>Box</code>‚Äîagus
n√≠limid ag d√©anamh sin ach chun na cine√°lacha a ail√≠ni√∫. N√≠ <em>g√°</em> linn i nd√°ir√≠re an
leithdh√°ileadh carn, tar √©is an tsaoil: t√° na todhcha√≠ seo √°iti√∫il don fheidhm seo.
Mar a luadh cheana, is cine√°l fillte√°in √© <code>Pin</code> f√©in, mar sin is f√©idir linn leas a bhaint as
cine√°l amh√°in a bheith againn sa <code>Vec</code>‚Äîan ch√∫is bhunaidh ar shroicheamar <code>Box</code>‚Äîgan leithdh√°ileadh carn a dh√©anamh. Is f√©idir linn <code>Pin</code> a √∫s√°id go d√≠reach le gach
todhcha√≠, ag baint √∫s√°ide as an macra <code>std::pin::pin</code>.</p>
<p>Mar sin f√©in, n√≠ m√≥r d√∫inn a bheith soil√©ir f√≥s faoin gcine√°l tagartha bior√°ilte;
seach sin, n√≠ bheidh a fhios ag Rust f√≥s conas iad seo a l√©irmh√≠ni√∫ mar r√©ada tr√©ithe dinimici√∫la,
agus sin an rud a theasta√≠onn uainn uathu a bheith sa <code>Vec</code>. D√° bhr√≠ sin, d√©anaimid gach todhcha√≠ a phion√°il nuair a shainmh√≠n√≠mid √≠, agus sainmh√≠n√≠mid <code>futures</code> mar <code>Vec</code> ina bhfuil tagairt√≠ inathraithe bior√°ilte don chine√°l todhcha√≠ dinimici√∫il, mar at√° i Liost√°il 17-19.</p>
<Listing number="17-19" caption="Using `Pin` directly with the `pin!` macro to avoid unnecessary heap allocations" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{
</span><span class="boring">    future::Future,
</span><span class="boring">    pin::{pin, Pin},
</span><span class="boring">    time::Duration,
</span><span class="boring">};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let (tx, mut rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">        let tx1 = tx.clone();
</span>        let tx1_fut = pin!(async move {
            // --snip--
<span class="boring">            let vals = vec![
</span><span class="boring">                String::from("hi"),
</span><span class="boring">                String::from("from"),
</span><span class="boring">                String::from("the"),
</span><span class="boring">                String::from("future"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx1.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span>        });

        let rx_fut = pin!(async {
            // --snip--
<span class="boring">            while let Some(value) = rx.recv().await {
</span><span class="boring">                println!("received '{value}'");
</span><span class="boring">            }
</span>        });

        let tx_fut = pin!(async move {
            // --snip--
<span class="boring">            let vals = vec![
</span><span class="boring">                String::from("more"),
</span><span class="boring">                String::from("messages"),
</span><span class="boring">                String::from("for"),
</span><span class="boring">                String::from("you"),
</span><span class="boring">            ];
</span><span class="boring">
</span><span class="boring">            for val in vals {
</span><span class="boring">                tx.send(val).unwrap();
</span><span class="boring">                trpl::sleep(Duration::from_secs(1)).await;
</span><span class="boring">            }
</span>        });

        let futures: Vec&lt;Pin&lt;&amp;mut dyn Future&lt;Output = ()&gt;&gt;&gt; =
            vec![tx1_fut, rx_fut, tx_fut];
<span class="boring">
</span><span class="boring">        trpl::join_all(futures).await;
</span><span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Shroicheamar an m√©id seo tr√≠ neamhaird a dh√©anamh den fh√≠ric go bhf√©adfadh cine√°lacha √©ags√∫la <code>Output</code> a bheith againn. Mar shampla, i Liosta 17-20, cuireann an todhcha√≠ gan ainm le haghaidh <code>a</code> <code>Future&lt;Output = u32&gt;</code> i bhfeidhm, cuireann an todhcha√≠ gan ainm le haghaidh <code>b</code> <code>Future&lt;Output = &amp;str&gt;</code> i bhfeidhm, agus cuireann an todhcha√≠ gan ainm le haghaidh <code>c</code> <code>Future&lt;Output = bool&gt;</code> i bhfeidhm.</p>
<Listing number="17-20" caption="Three futures with distinct types" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let a = async { 1u32 };
        let b = async { "Hello!" };
        let c = async { true };

        let (a_result, b_result, c_result) = trpl::join!(a, b, c);
        println!("{a_result}, {b_result}, {c_result}");
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Is f√©idir linn <code>trpl::join!</code> a √∫s√°id chun fanacht leo, mar go gceada√≠onn s√© d√∫inn cine√°lacha √©ags√∫la todhcha√≠ a chur isteach agus t√°irgeann s√© tuple de na cine√°lacha sin. N√≠ f√©idir linn <code>trpl::join_all</code> a √∫s√°id, mar √©il√≠onn s√© go mbeidh an cine√°l c√©anna ag na todhcha√≠ go l√©ir a chuirtear isteach. Cuimhnigh, is √© an earr√°id sin a chuir t√∫s linn ar an eachtra seo le
<code>Pin</code>!</p>
<p>Is comhbhabht√°il bhun√∫sach √≠ seo: is f√©idir linn d√©ile√°il le l√≠on dinimici√∫il
todhcha√≠ le <code>join_all</code>, fad is at√° an cine√°l c√©anna acu go l√©ir, n√≥ is f√©idir linn d√©ile√°il
le l√≠on socraithe todhcha√≠ leis na feidhmeanna <code>join</code> n√≥ leis an macra <code>join!</code>,
fi√∫ m√° t√° cine√°lacha difri√∫la acu. Is √© seo an c√°s c√©anna a mbeadh orainn aghaidh a thabhairt air agus muid
ag obair le haon chine√°lacha eile i Rust. N√≠l todhcha√≠ speisialta, c√© go bhfuil
roinnt comhr√©ir deas againn chun oibri√∫ leo, agus is rud maith √© sin.</p>
<h3 id="todhcha√≠-r√°sa√≠ochta"><a class="header" href="#todhcha√≠-r√°sa√≠ochta">Todhcha√≠ R√°sa√≠ochta</a></h3>
<p>Nuair a "cheangla√≠mid" todhcha√≠ leis an teaghlach feidhmeanna agus macra√≠ <code>join</code>,
n√≠ m√≥r d√∫inn <em>gach</em> ceann acu a chr√≠ochn√∫ sula mbogann muid ar aghaidh. Uaireanta, √°fach, n√≠ g√° ach <em>roinnt</em> todhcha√≠ √≥ shraith a chr√≠ochn√∫ sula mbogann muid ar aghaidh‚Äîrud beag cos√∫il le
r√°sa√≠ocht a dh√©anamh idir todhcha√≠ amh√°in agus todhcha√≠ eile.</p>
<p>I Liost√°il 17-21, √∫s√°idimid <code>trpl::race</code> ar√≠s chun dh√° thodhcha√≠, <code>slow</code> agus
<code>fast</code>, a rith i gcoinne a ch√©ile.</p>
<Listing number="17-21" caption="Using `race` to get the result of whichever future finishes first" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let slow = async {
            println!("'slow' started.");
            trpl::sleep(Duration::from_millis(100)).await;
            println!("'slow' finished.");
        };

        let fast = async {
            println!("'fast' started.");
            trpl::sleep(Duration::from_millis(50)).await;
            println!("'fast' finished.");
        };

        trpl::race(slow, fast).await;
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lann gach todhcha√≠ teachtaireacht nuair a thosa√≠onn s√© ag rith, sosann s√© ar feadh tamaill
tr√≠ ghlaoch agus fanacht le <code>sleep</code>, agus ansin priont√°lann s√© teachtaireacht eile nuair a
chr√≠ochna√≠onn s√©. Ansin, cuirimid <code>slow</code> agus <code>fast</code> araon chuig <code>trpl::race</code> agus fanfaimid go gcr√≠ochn√≥idh ceann
d√≥ibh. (N√≠l an toradh anseo r√≥-iontach: buaileann <code>fast</code>.) Murab ionann agus
nuair a d'√∫s√°ideamar <code>race</code> ar ais in <a href="ch17-01-futures-and-syntax.html#our-first-async-program">‚Äú√År gC√©ad Chl√°r Asyncr√≥nach‚Äù</a><!--
ignore -->, n√≠ dh√©anaimid ach neamhaird den ch√°s <code>Either</code> a thugann s√© ar ais anseo, toisc go dtarla√≠onn an t-iompar suimi√∫il go l√©ir i gcorp na mbloc asyncr√≥nach.</p>
<p>Tabhair faoi deara m√° athra√≠onn t√∫ ord na n-arg√≥int√≠ go <code>race</code>, athra√≠onn ord na
dteachtaireachta√≠ ‚Äútosaithe‚Äù, c√© go gcr√≠ochna√≠onn an todhcha√≠ <code>fast</code> i gc√≥na√≠
ar dt√∫s. Sin toisc nach bhfuil cur i bhfeidhm na feidhme <code>race</code> seo cothrom. Ritheann s√© na todhcha√≠ a chuirtear isteach mar arg√≥int√≠ i gc√≥na√≠ san ord ina
ritheann siad. T√° cur i bhfeidhm eile <em>c√≥ir</em> agus roghn√≥idh siad go randamach
c√© acu todhcha√≠ le v√≥ta√≠ocht ar dt√∫s. Beag beann ar cib√© an bhfuil cur i bhfeidhm an chine
at√° √° √∫s√°id againn cothrom, √°fach, rithfidh <em>ceann</em> de na todhcha√≠ suas go dt√≠ an ch√©ad
<code>await</code> ina chorp sula bhf√©adfar tasc eile a thos√∫.</p>
<p>Meabhraigh √≥ <a href="ch17-01-futures-and-syntax.html#our-first-async-program">√År gC√©ad Chl√°r Asyncr√≥nach</a><!-- ignore --> go dtugann Rust deis d'am rith an tasc a chur ar sos agus aistri√∫ go
ceann eile mura bhfuil an todhcha√≠ at√° √° fanacht r√©idh. T√° an rud eile f√≠or freisin:
Cuireann Rust <em>only</em> sos ar bhloic asyncr√≥nacha agus tugann s√© an rial√∫ ar ais go ham rith ag pointe feithimh.
T√° gach rud idir point√≠ feithimh sioncr√≥nach.</p>
<p>Cialla√≠onn s√© sin m√° dh√©anann t√∫ go leor oibre i mbloc asyncr√≥nach gan pointe feithimh,
go gcuirfidh an todhcha√≠ sin bac ar aon todhcha√≠ eile √≥ dhul chun cinn a dh√©anamh. Uaireanta, d'fh√©adf√°
√© seo a chloiste√°il mar thodhcha√≠ amh√°in ag <em>ocras</em> todhcha√≠ eile. I gc√°sanna √°irithe,
b'fh√©idir nach mbeadh s√© sin ina mh√≥rcheist. Mar sin f√©in, m√° t√° t√∫ ag d√©anamh cine√°l √©igin oibre costasa√≠
suite n√≥ oibre fadtr√©imhseach, n√≥ m√° t√° todhcha√≠ agat a leanfaidh ort ag d√©anamh tasc √°irithe
go deo, beidh ort smaoineamh ar cathain agus c√° h√°it le rial√∫ a thabhairt ar ais don am rith.</p>
<p>Ar an gcaoi ch√©anna, m√° t√° oibr√≠ochta√≠ bloc√°la fadtr√©imhseacha agat, is f√©idir le haisioncr√≥nach a bheith ina
uirlis √∫s√°ideach chun beala√≠ a shol√°thar do chodanna √©ags√∫la den chl√°r baint a bheith acu
le ch√©ile.</p>
<p>Ach <em>conas</em> a thabharf√° rial√∫ ar ais don am rith sna c√°sanna sin?</p>
<!-- Seancheannteidil. N√° bain iad n√≥ d'fh√©adfadh naisc briseadh. -->
<p><a id="yielding"></a></p>
<h3 id="rial√∫-a-thabhairt-don-am-rith"><a class="header" href="#rial√∫-a-thabhairt-don-am-rith">Rial√∫ a Thabhairt don Am Rith</a></h3>
<p>D√©anaimis oibr√≠ocht fhada a insamhladh. Tugann liost√∫ 17-22 feidhm <code>slow</code> isteach.</p>
<Listing number="17-22" caption="Using `thread::sleep` to simulate slow operations" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        // We will call `slow` here later
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span>fn slow(name: &amp;str, ms: u64) {
    thread::sleep(Duration::from_millis(ms));
    println!("'{name}' ran for {ms}ms");
}</code></pre></pre>
</Listing>
<p>√ös√°ideann an c√≥d seo <code>std::thread::sleep</code> in ionad <code>trpl::sleep</code> ionas go gcuirfidh glaoch ar <code>slow</code> bac ar an sn√°ithe reatha ar feadh roinnt milleasoicind√≠. Is f√©idir linn <code>slow</code> a √∫s√°id chun seasamh in ionad oibr√≠ochta√≠ f√≠orshaoil ‚Äã‚Äãat√° ag rith ar feadh i bhfad agus
ag bloc√°il.</p>
<p>I Liosta 17-23, √∫s√°idimid <code>slow</code> chun aithris a dh√©anamh ar an gcine√°l seo oibre at√° ceangailte le LAP i
b√©ire todhcha√≠.</p>
<Listing number="17-23" caption="Using `thread::sleep` to simulate slow operations" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let a = async {
            println!("'a' started.");
            slow("a", 30);
            slow("a", 10);
            slow("a", 20);
            trpl::sleep(Duration::from_millis(50)).await;
            println!("'a' finished.");
        };

        let b = async {
            println!("'b' started.");
            slow("b", 75);
            slow("b", 10);
            slow("b", 15);
            slow("b", 350);
            trpl::sleep(Duration::from_millis(50)).await;
            println!("'b' finished.");
        };

        trpl::race(a, b).await;
<span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn slow(name: &amp;str, ms: u64) {
</span><span class="boring">    thread::sleep(Duration::from_millis(ms));
</span><span class="boring">    println!("'{name}' ran for {ms}ms");
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ar dt√∫s, n√≠ thugann gach todhcha√≠ ach an rial√∫ ar ais chuig an am rite <em>tar √©is</em> roinnt oibr√≠ochta√≠ mall a dh√©anamh. M√° ritheann t√∫ an c√≥d seo, feicfidh t√∫ an t-aschur seo:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-23/
cargo run
copy just the output
-->
<pre><code class="language-text">'a' started.
'a' ran for 30ms
'a' ran for 10ms
'a' ran for 20ms
'b' started.
'b' ran for 75ms
'b' ran for 10ms
'b' ran for 15ms
'b' ran for 350ms
'a' finished.
</code></pre>
<p>Mar at√° len√°r sampla n√≠os luaithe, cr√≠ochna√≠onn <code>race</code> a luaithe is a bh√≠onn <code>a</code> cr√≠ochnaithe.
N√≠l aon idirnascadh idir an d√° thodhcha√≠, √°fach. D√©anann an todhcha√≠ <code>a</code> a chuid oibre go l√©ir go dt√≠ go bhfanann an glao <code>trpl::sleep</code>, ansin d√©anann an todhcha√≠ <code>b</code> a chuid oibre go l√©ir go dt√≠ go bhfanann a glao <code>trpl::sleep</code> f√©in, agus ar deireadh cr√≠ochna√≠onn an todhcha√≠ <code>a</code>. Chun ligean don d√° thodhcha√≠ dul chun cinn a dh√©anamh idir a gcuid tascanna mall, teasta√≠onn point√≠ feithimh uainn ionas gur f√©idir linn an rial√∫ a thabhairt ar ais don am rite. Cialla√≠onn s√© sin go
gceann muid rud √©igin ar f√©idir linn fanacht leis!</p>
<p>Is f√©idir linn an cine√°l seo l√°imhse√°la a fheice√°il ag tarl√∫ cheana f√©in i Liost√°il 17-23: d√°
mbaineamar an <code>trpl::sleep</code> ag deireadh thodhcha√≠ <code>a</code>, chr√≠ochn√≥dh s√©
gan an todhcha√≠ <code>b</code> ag rith <em>ar chor ar bith</em>. D√©anaimis iarracht an fheidhm <code>sleep</code> a √∫s√°id mar
phointe tosaigh chun ligean d'oibr√≠ochta√≠ m√∫chadh agus dul chun cinn √° dh√©anamh, mar a thaispe√°ntar i
Liost√°il 17-24.</p>
<Listing number="17-24" caption="Using `sleep` to let operations switch off making progress" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let one_ms = Duration::from_millis(1);

        let a = async {
            println!("'a' started.");
            slow("a", 30);
            trpl::sleep(one_ms).await;
            slow("a", 10);
            trpl::sleep(one_ms).await;
            slow("a", 20);
            trpl::sleep(one_ms).await;
            println!("'a' finished.");
        };

        let b = async {
            println!("'b' started.");
            slow("b", 75);
            trpl::sleep(one_ms).await;
            slow("b", 10);
            trpl::sleep(one_ms).await;
            slow("b", 15);
            trpl::sleep(one_ms).await;
            slow("b", 35);
            trpl::sleep(one_ms).await;
            println!("'b' finished.");
        };
<span class="boring">
</span><span class="boring">        trpl::race(a, b).await;
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn slow(name: &amp;str, ms: u64) {
</span><span class="boring">    thread::sleep(Duration::from_millis(ms));
</span><span class="boring">    println!("'{name}' ran for {ms}ms");
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>I Liosta 17-24, cuirimid glaonna <code>trpl::sleep</code> le point√≠ await idir gach glao le <code>slow</code>. Anois t√° obair an d√° thodhcha√≠ fite fuaite:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-24
cargo run
copy just the output
-->
<pre><code class="language-text">'a' started.
'a' ran for 30ms
'b' started.
'b' ran for 75ms
'a' ran for 10ms
'b' ran for 10ms
'a' ran for 20ms
'b' ran for 15ms
'a' finished.
</code></pre>
<p>Ritheann an todhcha√≠ <code>a</code> ar feadh tamaill f√≥s sula dtugann s√© an smacht do <code>b</code>, mar gheall ar <code>slow</code> sula nglaonn s√© ar <code>trpl::sleep</code> riamh, ach ina dhiaidh sin malarta√≠onn na todhcha√≠
ar ais agus amach gach uair a bhuaileann ceann acu pointe fanachta. Sa ch√°s seo, rinneamar √© sin tar √©is gach glao ar <code>slow</code>, ach d'fh√©adfaimis an obair a bhriseadh suas ar
cib√© bealach is ciallmhaire d√∫inn.</p>
<p>N√≠ mian linn <em>sleep</em> anseo i nd√°ir√≠re, √°fach: ba mhaith linn dul chun cinn a dh√©anamh chomh tapa
agus is f√©idir linn. N√≠ m√≥r d√∫inn ach an smacht a thabhairt ar ais don am rith. Is f√©idir linn √© sin a dh√©anamh
go d√≠reach, ag baint √∫s√°ide as an bhfeidhm <code>yield_now</code>. I Liosta 17-25, cuirimid <code>yield_now</code> in ionad na nglaonna <code>sleep</code> sin go l√©ir.</p>
<Listing number="17-25" caption="Using `yield_now` to let operations switch off making progress" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let a = async {
            println!("'a' started.");
            slow("a", 30);
            trpl::yield_now().await;
            slow("a", 10);
            trpl::yield_now().await;
            slow("a", 20);
            trpl::yield_now().await;
            println!("'a' finished.");
        };

        let b = async {
            println!("'b' started.");
            slow("b", 75);
            trpl::yield_now().await;
            slow("b", 10);
            trpl::yield_now().await;
            slow("b", 15);
            trpl::yield_now().await;
            slow("b", 35);
            trpl::yield_now().await;
            println!("'b' finished.");
        };
<span class="boring">
</span><span class="boring">        trpl::race(a, b).await;
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn slow(name: &amp;str, ms: u64) {
</span><span class="boring">    thread::sleep(Duration::from_millis(ms));
</span><span class="boring">    println!("'{name}' ran for {ms}ms");
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>T√° an c√≥d seo n√≠os soil√©ire faoin aidhm iarbh√≠r agus is f√©idir leis a bheith i bhfad n√≠os tap√∫la n√° <code>codladh</code> a √∫s√°id, mar is minic a bh√≠onn teorainneacha ag lasc ama cos√∫il leis an gceann a √∫s√°ideann <code>codladh</code> maidir le c√© chomh mionsonraithe is f√©idir leo a bheith. Codla√≠onn an leagan de <code>codladh</code> at√° √° √∫s√°id againn,
mar shampla, i gc√≥na√≠ ar feadh milleasoicind ar a laghad, fi√∫ m√° thugaimid <code>Fad</code> nana-soicind amh√°in d√≥. Ar√≠s, t√° r√≠omhair√≠ nua-aimseartha <em>tapa</em>: is f√©idir leo
go leor a dh√©anamh i milleasoicind amh√°in!</p>
<p>Is f√©idir leat √© seo a fheice√°il duit f√©in tr√≠ thagarmharc beag a shocr√∫, mar shampla an ceann
i Liost√°il 17-26. (N√≠ bealach thar a bheith dian √© seo chun t√°st√°il feidhm√≠ochta a dh√©anamh,
ach is leor √© chun an difr√≠ocht a thaispe√°int anseo.)</p>
<Listing number="17-26" caption="Comparing the performance of `sleep` and `yield_now`" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::{Duration, Instant};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let one_ns = Duration::from_nanos(1);
        let start = Instant::now();
        async {
            for _ in 1..1000 {
                trpl::sleep(one_ns).await;
            }
        }
        .await;
        let time = Instant::now() - start;
        println!(
            "'sleep' version finished after {} seconds.",
            time.as_secs_f32()
        );

        let start = Instant::now();
        async {
            for _ in 1..1000 {
                trpl::yield_now().await;
            }
        }
        .await;
        let time = Instant::now() - start;
        println!(
            "'yield' version finished after {} seconds.",
            time.as_secs_f32()
        );
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, scipe√°ilimid an priont√°il st√°dais go l√©ir, cuirimid <code>Duration</code> aon-nana-soicind chuig
<code>trpl::sleep</code>, agus ligimid do gach todhcha√≠ rith leis f√©in, gan aon athr√∫ idir na
todhcha√≠. Ansin rithimid ar feadh 1,000 athr√° agus feicimid c√© chomh fada a th√≥gann an todhcha√≠ ag baint √∫s√°ide as
<code>trpl::sleep</code> i gcompar√°id leis an todhcha√≠ ag baint √∫s√°ide as <code>trpl::yield_now</code>.</p>
<p>T√° an leagan le <code>yield_now</code> <em>i bhfad</em> n√≠os tap√∫la!</p>
<p>Cialla√≠onn s√© seo gur f√©idir le haisioncr√≥n√∫ a bheith √∫s√°ideach fi√∫ le haghaidh tascanna at√° ceangailte le r√≠omh, ag brath ar
cad eile at√° √° dh√©anamh ag do chl√°r, toisc go sol√°thra√≠onn s√© uirlis √∫s√°ideach chun
na caidrimh idir codanna √©ags√∫la den chl√°r a strucht√∫r√∫. Is
foirm <em>iltasc√°la comhoibr√≠och</em> √© seo, √°it a bhfuil an chumhacht ag gach todhcha√≠ a chinneadh
cathain a thugann s√© smacht tr√≠ phoint√≠ feithimh. D√° bhr√≠ sin, t√° an
fhreagracht ar gach todhcha√≠ freisin bac a sheachaint ar feadh r√≥-fhada. I roinnt c√≥ras oibri√∫ch√°in leabaithe bunaithe ar Rust,
is √© seo an <em>t-aon</em> cine√°l iltasc√°la!</p>
<p>I gc√≥d an tsaoil r√©adaigh, n√≠ bheidh t√∫ ag malart√∫ glaonna feidhme le point√≠ feithimh ar gach l√≠ne aonair de ghn√°th, ar nd√≥igh. C√© go bhfuil s√© r√©as√∫nta saor rial√∫ a thabhairt ar an mbealach seo, n√≠l s√© saor in aisce. I go leor c√°sanna, d'fh√©adfadh iarracht tasc at√° ceangailte le r√≠omhaireacht a bhriseadh suas √© a dh√©anamh i bhfad n√≠os moille, mar sin uaireanta is fearr
don fheidhm√≠ocht fhorioml√°n ligean d'oibr√≠ocht bloc√°il go hachomair. D√©an
tomhais i gc√≥na√≠ chun a fheice√°il cad iad na bacainn√≠ feidhm√≠ochta iarbh√≠r at√° i do ch√≥d. T√° s√© t√°bhachtach an
dinimic bhun√∫sach a choinne√°il i gcuimhne, √°fach, m√° <em>t√°</em> t√∫ ag feice√°il
go leor oibre ag tarl√∫ i sraitheach a raibh s√∫il agat a tharl√≥dh ag an am c√©anna!</p>
<h3 id="√År-naistarraingt√≠-aisioncr√≥nacha-f√©in-a-th√≥g√°il"><a class="header" href="#√År-naistarraingt√≠-aisioncr√≥nacha-f√©in-a-th√≥g√°il">√År nAistarraingt√≠ Aisioncr√≥nacha F√©in a Th√≥g√°il</a></h3>
<p>Is f√©idir linn todhcha√≠ a chumadh le ch√©ile freisin chun patr√∫in nua a chruth√∫. Mar shampla, is f√©idir linn
feidhm 'am scoir' a th√≥g√°il le bloic th√≥g√°la aisioncr√≥nacha at√° againn cheana f√©in. Nuair
a bheidh muid cr√≠ochnaithe, beidh an toradh ina bhloc t√≥g√°la eile a d'fh√©adfaimis a √∫s√°id chun
n√≠os m√≥ aistarraingt√≠ aisioncr√≥nacha a chruth√∫.</p>
<p>L√©ir√≠onn liost√∫ 17-27 conas a bheimid ag s√∫il go n-oibreodh an 'tr√©imhse scoir' seo le todhcha√≠ mall.</p>
<p>T√° an c√≥d seo n√≠os soil√©ire faoin aidhm iarbh√≠r agus is f√©idir leis a bheith i bhfad n√≠os tap√∫la n√° <code>codladh</code> a √∫s√°id, mar is minic a bh√≠onn teorainneacha ag lasc ama cos√∫il leis an gceann a √∫s√°ideann <code>codladh</code> maidir le c√© chomh mionsonraithe is f√©idir leo a bheith. Codla√≠onn an leagan de <code>codladh</code> at√° √° √∫s√°id againn,
mar shampla, i gc√≥na√≠ ar feadh milleasoicind ar a laghad, fi√∫ m√° thugaimid <code>Fad</code> nana-soicind amh√°in d√≥. Ar√≠s, t√° r√≠omhair√≠ nua-aimseartha <em>tapa</em>: is f√©idir leo
go leor a dh√©anamh i milleasoicind amh√°in!</p>
<p>Is f√©idir leat √© seo a fheice√°il duit f√©in tr√≠ thagarmharc beag a shocr√∫, mar shampla an ceann
i Liost√°il 17-26. (N√≠ bealach thar a bheith dian √© seo chun t√°st√°il feidhm√≠ochta a dh√©anamh,
ach is leor √© chun an difr√≠ocht a thaispe√°int anseo.)</p>
<p>Priont√°lann gach todhcha√≠ teachtaireacht nuair a thosa√≠onn s√© ag rith, sosann s√© ar feadh tamaill
tr√≠ ghlaoch agus fanacht le <code>sleep</code>, agus ansin priont√°lann s√© teachtaireacht eile nuair a
chr√≠ochna√≠onn s√©. Ansin, cuirimid <code>slow</code> agus <code>fast</code> araon chuig <code>trpl::race</code> agus fanfaimid go gcr√≠ochn√≥idh ceann
d√≥ibh. (N√≠l an toradh anseo r√≥-iontach: buaileann <code>fast</code>.) Murab ionann agus
nuair a d'√∫s√°ideamar <code>race</code> ar ais in <a href="ch17-01-futures-and-syntax.html#our-first-async-program">‚Äú√År gC√©ad Chl√°r Asyncr√≥nach‚Äù</a><!--
ignore -->, n√≠ dh√©anaimid ach neamhaird den ch√°s <code>Either</code> a thugann s√© ar ais anseo, toisc go dtarla√≠onn an t-iompar suimi√∫il go l√©ir i gcorp na mbloc asyncr√≥nach.</p>
<p>Tabhair faoi deara m√° athra√≠onn t√∫ ord na n-arg√≥int√≠ go <code>race</code>, athra√≠onn ord na
dteachtaireachta√≠ ‚Äútosaithe‚Äù, c√© go gcr√≠ochna√≠onn an todhcha√≠ <code>fast</code> i gc√≥na√≠
ar dt√∫s. Sin toisc nach bhfuil cur i bhfeidhm na feidhme <code>race</code> seo cothrom. Ritheann s√© na todhcha√≠ a chuirtear isteach mar arg√≥int√≠ i gc√≥na√≠ san ord ina
ritheann siad. T√° cur i bhfeidhm eile <em>c√≥ir</em> agus roghn√≥idh siad go randamach
c√© acu todhcha√≠ le v√≥ta√≠ocht ar dt√∫s. Beag beann ar cib√© an bhfuil cur i bhfeidhm an chine
at√° √° √∫s√°id againn cothrom, √°fach, rithfidh <em>ceann</em> de na todhcha√≠ suas go dt√≠ an ch√©ad
<code>await</code> ina chorp sula bhf√©adfar tasc eile a thos√∫.</p>
<p>Meabhraigh √≥ <a href="ch17-01-futures-and-syntax.html#our-first-async-program">√År gC√©ad Chl√°r Asyncr√≥nach</a><!-- ignore --> go dtugann Rust deis d'am rith an tasc a chur ar sos agus aistri√∫ go
ceann eile mura bhfuil an todhcha√≠ at√° √° fanacht r√©idh. T√° an rud eile f√≠or freisin:
Cuireann Rust <em>only</em> sos ar bhloic asyncr√≥nacha agus tugann s√© an rial√∫ ar ais go ham rith ag pointe feithimh.
T√° gach rud idir point√≠ feithimh sioncr√≥nach.</p>
<p>Cialla√≠onn s√© sin m√° dh√©anann t√∫ go leor oibre i mbloc asyncr√≥nach gan pointe feithimh,
go gcuirfidh an todhcha√≠ sin bac ar aon todhcha√≠ eile √≥ dhul chun cinn a dh√©anamh. Uaireanta, d'fh√©adf√°
√© seo a chloiste√°il mar thodhcha√≠ amh√°in ag <em>ocras</em> todhcha√≠ eile. I gc√°sanna √°irithe,
b'fh√©idir nach mbeadh s√© sin ina mh√≥rcheist. Mar sin f√©in, m√° t√° t√∫ ag d√©anamh cine√°l √©igin oibre costasa√≠
suite n√≥ oibre fadtr√©imhseach, n√≥ m√° t√° todhcha√≠ agat a leanfaidh ort ag d√©anamh tasc √°irithe
go deo, beidh ort smaoineamh ar cathain agus c√° h√°it le rial√∫ a thabhairt ar ais don am rith.</p>
<p>Ar an gcaoi ch√©anna, m√° t√° oibr√≠ochta√≠ bloc√°la fadtr√©imhseacha agat, is f√©idir le haisioncr√≥nach a bheith ina
uirlis √∫s√°ideach chun beala√≠ a shol√°thar do chodanna √©ags√∫la den chl√°r baint a bheith acu
le ch√©ile.</p>
<p>Ach <em>conas</em> a thabharf√° rial√∫ ar ais don am rith sna c√°sanna sin?</p>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="yielding"></a></p>
<h3 id="rial√∫-a-thabhairt-don-am-rith-1"><a class="header" href="#rial√∫-a-thabhairt-don-am-rith-1">Rial√∫ a Thabhairt don Am Rith</a></h3>
<p>D√©anaimis oibr√≠ocht fhadtr√©imhseach a insamhladh. Tugann liost√∫ 17-22 feidhm <code>slow</code> isteach.</p>
<Listing number="17-22" caption="Using `thread::sleep` to simulate slow operations" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        // We will call `slow` here later
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span>fn slow(name: &amp;str, ms: u64) {
    thread::sleep(Duration::from_millis(ms));
    println!("'{name}' ran for {ms}ms");
}</code></pre></pre>
</Listing>
<p>√ös√°ideann an c√≥d seo <code>std::thread::sleep</code> in ionad <code>trpl::sleep</code> ionas go gcuirfidh glaoch ar <code>slow</code> bac ar an sn√°ithe reatha ar feadh roinnt milleasoicind√≠. Is f√©idir linn <code>slow</code> a √∫s√°id chun seasamh in ionad oibr√≠ochta√≠ f√≠orshaoil ‚Äã‚Äãat√° ag rith ar feadh i bhfad agus
ag bloc√°il.</p>
<p>I Liosta 17-23, √∫s√°idimid <code>slow</code> chun aithris a dh√©anamh ar an gcine√°l seo oibre at√° ceangailte le LAP i
b√©ire todhcha√≠.</p>
<Listing number="17-23" caption="Using `thread::sleep` to simulate slow operations" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let a = async {
            println!("'a' started.");
            slow("a", 30);
            slow("a", 10);
            slow("a", 20);
            trpl::sleep(Duration::from_millis(50)).await;
            println!("'a' finished.");
        };

        let b = async {
            println!("'b' started.");
            slow("b", 75);
            slow("b", 10);
            slow("b", 15);
            slow("b", 350);
            trpl::sleep(Duration::from_millis(50)).await;
            println!("'b' finished.");
        };

        trpl::race(a, b).await;
<span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn slow(name: &amp;str, ms: u64) {
</span><span class="boring">    thread::sleep(Duration::from_millis(ms));
</span><span class="boring">    println!("'{name}' ran for {ms}ms");
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ar dt√∫s, n√≠ thugann gach todhcha√≠ ach an rial√∫ ar ais chuig an am rite <em>tar √©is</em> roinnt oibr√≠ochta√≠ mall a dh√©anamh. M√° ritheann t√∫ an c√≥d seo, feicfidh t√∫ an t-aschur seo:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-23/
cargo run
copy just the output
-->
<pre><code class="language-text">'a' started.
'a' ran for 30ms
'a' ran for 10ms
'a' ran for 20ms
'b' started.
'b' ran for 75ms
'b' ran for 10ms
'b' ran for 15ms
'b' ran for 350ms
'a' finished.
</code></pre>
<p>Mar at√° len√°r sampla n√≠os luaithe, cr√≠ochna√≠onn <code>race</code> a luaithe is a bh√≠onn <code>a</code> cr√≠ochnaithe.
N√≠l aon idirnascadh idir an d√° thodhcha√≠, √°fach. D√©anann an todhcha√≠ <code>a</code> a chuid oibre go l√©ir go dt√≠ go bhfanann an glao <code>trpl::sleep</code>, ansin d√©anann an todhcha√≠ <code>b</code> a chuid oibre go l√©ir go dt√≠ go bhfanann a glao <code>trpl::sleep</code> f√©in, agus ar deireadh cr√≠ochna√≠onn an todhcha√≠ <code>a</code>. Chun ligean don d√° thodhcha√≠ dul chun cinn a dh√©anamh idir a gcuid tascanna mall, teasta√≠onn point√≠ feithimh uainn ionas gur f√©idir linn an rial√∫ a thabhairt ar ais don am rite. Cialla√≠onn s√© sin go
gceann muid rud √©igin ar f√©idir linn fanacht leis!</p>
<p>Is f√©idir linn an cine√°l seo l√°imhse√°la a fheice√°il ag tarl√∫ cheana f√©in i Liost√°il 17-23: d√°
mbaineamar an <code>trpl::sleep</code> ag deireadh thodhcha√≠ <code>a</code>, chr√≠ochn√≥dh s√©
gan an todhcha√≠ <code>b</code> ag rith <em>ar chor ar bith</em>. D√©anaimis iarracht an fheidhm <code>sleep</code> a √∫s√°id mar
phointe tosaigh chun ligean d'oibr√≠ochta√≠ m√∫chadh agus dul chun cinn √° dh√©anamh, mar a thaispe√°ntar i
Liost√°il 17-24.</p>
<Listing number="17-24" caption="Using `sleep` to let operations switch off making progress" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let one_ms = Duration::from_millis(1);

        let a = async {
            println!("'a' started.");
            slow("a", 30);
            trpl::sleep(one_ms).await;
            slow("a", 10);
            trpl::sleep(one_ms).await;
            slow("a", 20);
            trpl::sleep(one_ms).await;
            println!("'a' finished.");
        };

        let b = async {
            println!("'b' started.");
            slow("b", 75);
            trpl::sleep(one_ms).await;
            slow("b", 10);
            trpl::sleep(one_ms).await;
            slow("b", 15);
            trpl::sleep(one_ms).await;
            slow("b", 35);
            trpl::sleep(one_ms).await;
            println!("'b' finished.");
        };
<span class="boring">
</span><span class="boring">        trpl::race(a, b).await;
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn slow(name: &amp;str, ms: u64) {
</span><span class="boring">    thread::sleep(Duration::from_millis(ms));
</span><span class="boring">    println!("'{name}' ran for {ms}ms");
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>I Liosta 17-24, cuirimid glaonna <code>trpl::sleep</code> le point√≠ await idir gach glao le <code>slow</code>. Anois t√° obair an d√° thodhcha√≠ fite fuaite:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-24
cargo run
copy just the output
-->
<pre><code class="language-text">'a' started.
'a' ran for 30ms
'b' started.
'b' ran for 75ms
'a' ran for 10ms
'b' ran for 10ms
'a' ran for 20ms
'b' ran for 15ms
'a' finished.
</code></pre>
<p>Ritheann an todhcha√≠ <code>a</code> ar feadh tamaill f√≥s sula dtugann s√© an smacht do <code>b</code>, mar gheall ar <code>slow</code> sula nglaonn s√© ar <code>trpl::sleep</code> riamh, ach ina dhiaidh sin malarta√≠onn na todhcha√≠
ar ais agus amach gach uair a bhuaileann ceann acu pointe fanachta. Sa ch√°s seo, rinneamar √© sin tar √©is gach glao ar <code>slow</code>, ach d'fh√©adfaimis an obair a bhriseadh suas ar
cib√© bealach is ciallmhaire d√∫inn.</p>
<p>N√≠ mian linn <em>sleep</em> anseo i nd√°ir√≠re, √°fach: ba mhaith linn dul chun cinn a dh√©anamh chomh tapa
agus is f√©idir linn. N√≠ m√≥r d√∫inn ach an smacht a thabhairt ar ais don am rite. Is f√©idir linn √© sin a dh√©anamh
go d√≠reach, ag baint √∫s√°ide as an bhfeidhm <code>yield_now</code>. I Liosta 17-25, cuirimid <code>yield_now</code> in ionad na nglaonna <code>sleep</code> sin go l√©ir.</p>
<Listing number="17-25" caption="Using `yield_now` to let operations switch off making progress" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{thread, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let a = async {
            println!("'a' started.");
            slow("a", 30);
            trpl::yield_now().await;
            slow("a", 10);
            trpl::yield_now().await;
            slow("a", 20);
            trpl::yield_now().await;
            println!("'a' finished.");
        };

        let b = async {
            println!("'b' started.");
            slow("b", 75);
            trpl::yield_now().await;
            slow("b", 10);
            trpl::yield_now().await;
            slow("b", 15);
            trpl::yield_now().await;
            slow("b", 35);
            trpl::yield_now().await;
            println!("'b' finished.");
        };
<span class="boring">
</span><span class="boring">        trpl::race(a, b).await;
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn slow(name: &amp;str, ms: u64) {
</span><span class="boring">    thread::sleep(Duration::from_millis(ms));
</span><span class="boring">    println!("'{name}' ran for {ms}ms");
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>T√° an c√≥d seo n√≠os soil√©ire faoin aidhm iarbh√≠r agus is f√©idir leis a bheith i bhfad n√≠os tap√∫la n√° <code>sleep</code> a √∫s√°id, mar is minic a bh√≠onn teorainneacha ag lasc ama cos√∫il leis an gceann a √∫s√°ideann <code>sleep</code> maidir le c√© chomh mionsonraithe is f√©idir leo a bheith. Codla√≠onn an leagan de <code>sleep</code> at√° √° √∫s√°id againn,
mar shampla, i gc√≥na√≠ ar feadh milleasoicind ar a laghad, fi√∫ m√° thugaimid <code>Fad</code> nana-soicind amh√°in d√≥. Ar√≠s, t√° r√≠omhair√≠ nua-aimseartha <em>tapa</em>: is f√©idir leo
go leor a dh√©anamh i milleasoicind amh√°in!</p>
<p>Is f√©idir leat √© seo a fheice√°il duit f√©in tr√≠ thagarmharc beag a shocr√∫, mar shampla an ceann
i Liost√°il 17-26. (N√≠ bealach thar a bheith dian √© seo chun t√°st√°il feidhm√≠ochta a dh√©anamh,
ach is leor √© chun an difr√≠ocht a thaispe√°int anseo.)</p>
<Listing number="17-26" caption="Comparing the performance of `sleep` and `yield_now`" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::{Duration, Instant};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let one_ns = Duration::from_nanos(1);
        let start = Instant::now();
        async {
            for _ in 1..1000 {
                trpl::sleep(one_ns).await;
            }
        }
        .await;
        let time = Instant::now() - start;
        println!(
            "'sleep' version finished after {} seconds.",
            time.as_secs_f32()
        );

        let start = Instant::now();
        async {
            for _ in 1..1000 {
                trpl::yield_now().await;
            }
        }
        .await;
        let time = Instant::now() - start;
        println!(
            "'yield' version finished after {} seconds.",
            time.as_secs_f32()
        );
<span class="boring">    });
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, scipe√°ilimid an priont√°il st√°dais go l√©ir, cuirimid <code>Duration</code> aon-nana-soicind chuig
<code>trpl::sleep</code>, agus ligimid do gach todhcha√≠ rith leis f√©in, gan aon athr√∫ idir na
todhcha√≠. Ansin rithimid ar feadh 1,000 athr√° agus feicimid c√© chomh fada a th√≥gann an todhcha√≠ ag baint √∫s√°ide as
<code>trpl::sleep</code> i gcompar√°id leis an todhcha√≠ ag baint √∫s√°ide as <code>trpl::yield_now</code>.</p>
<p>T√° an leagan le <code>yield_now</code> <em>i bhfad</em> n√≠os tap√∫la!</p>
<p>Cialla√≠onn s√© seo gur f√©idir le haisioncr√≥n√∫ a bheith √∫s√°ideach fi√∫ le haghaidh tascanna at√° ceangailte le r√≠omhair√≠, ag brath ar
cad eile at√° √° dh√©anamh ag do chl√°r, toisc go sol√°thra√≠onn s√© uirlis √∫s√°ideach chun
na caidrimh idir codanna √©ags√∫la den chl√°r a strucht√∫r√∫. Is
foirm <em>iltasc√°la comhoibr√≠och</em> √© seo, √°it a bhfuil an chumhacht ag gach todhcha√≠ a chinneadh
cathain a thugann s√© smacht tr√≠ phoint√≠ feithimh. D√° bhr√≠ sin, t√° an
fhreagracht ar gach todhcha√≠ freisin bac a sheachaint ar feadh r√≥-fhada. I roinnt c√≥ras oibri√∫ch√°in leabaithe bunaithe ar Rust,
is √© seo an <em>t-aon</em> cine√°l iltasc√°la!</p>
<p>I gc√≥d an tsaoil r√©adaigh, n√≠ bheidh t√∫ ag malart√∫ glaonna feidhme le point√≠ feithimh ar gach l√≠ne aonair de ghn√°th, ar nd√≥igh. C√© go bhfuil s√© r√©as√∫nta saor rial√∫ a thabhairt ar an mbealach seo, n√≠l s√© saor in aisce. I go leor c√°sanna, d'fh√©adfadh iarracht tasc at√° ceangailte le r√≠omhaireacht a bhriseadh suas √© a dh√©anamh i bhfad n√≠os moille, mar sin uaireanta is fearr
don fheidhm√≠ocht fhorioml√°n ligean d'oibr√≠ocht bloc√°il go hachomair. D√©an
tomhais i gc√≥na√≠ chun a fheice√°il cad iad na bacainn√≠ feidhm√≠ochta iarbh√≠r at√° i do ch√≥d. T√° s√© t√°bhachtach an
dinimic bhun√∫sach a choinne√°il i gcuimhne, √°fach, m√° <em>t√°</em> t√∫ ag feice√°il
go leor oibre ag tarl√∫ i sraitheach a raibh s√∫il agat a tharl√≥dh ag an am c√©anna!</p>
<h3 id="√År-naistarraingt√≠-aisioncr√≥nacha-f√©in-a-th√≥g√°il-1"><a class="header" href="#√År-naistarraingt√≠-aisioncr√≥nacha-f√©in-a-th√≥g√°il-1">√År nAistarraingt√≠ Aisioncr√≥nacha F√©in a Th√≥g√°il</a></h3>
<p>Is f√©idir linn todhcha√≠ a chumadh le ch√©ile freisin chun patr√∫in nua a chruth√∫. Mar shampla, is f√©idir linn
feidhm <code>timeout</code> a th√≥g√°il le bloic th√≥g√°la aisioncr√≥nacha at√° againn cheana f√©in. Nuair
a bheidh muid cr√≠ochnaithe, beidh an toradh ina bhloc t√≥g√°la eile a d'fh√©adfaimis a √∫s√°id chun
n√≠os m√≥ aistarraingt√≠ aisioncr√≥nacha a chruth√∫.</p>
<p>L√©ir√≠onn liost√∫ 17-27 conas a bheimid ag s√∫il go n-oibreodh an <code>timeout</code> seo le todhcha√≠
mhall.</p>
<Listing number="17-27" caption="Using our imagined `timeout` to run a slow operation with a time limit" file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::time::Duration;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let slow = async {
            trpl::sleep(Duration::from_millis(100)).await;
            "I finished!"
        };

        match timeout(slow, Duration::from_millis(10)).await {
            Ok(message) =&gt; println!("Succeeded with '{message}'"),
            Err(duration) =&gt; {
                println!("Failed after {} seconds", duration.as_secs())
            }
        }
<span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Cuirimis seo i bhfeidhm! Chun t√∫s a chur leis, smaoin√≠mis ar an API don <code>timeout</code>:</p>
<ul>
<li>Caithfidh s√© a bheith ina fheidhm neamhshioncr√≥nach f√©in ionas gur f√©idir linn fanacht leis.</li>
<li>Ba ch√≥ir go mbeadh a ch√©ad pharaim√©adar ina thodhcha√≠ le rith. Is f√©idir linn √© a dh√©anamh cine√°lach chun ligean d√≥ oibri√∫ le haon thodhcha√≠.</li>
<li>Is √© an dara paraim√©adar an t-uasmh√©id ama le fanacht. M√° √∫s√°idimid <code>Duration</code>,
cuirfidh s√© sin ar aghaidh go h√©asca chuig <code>trpl::sleep</code>.</li>
<li>Ba ch√≥ir d√≥ <code>Result</code> a thabhairt ar ais. M√° chr√≠ochna√≠onn an todhcha√≠ go rath√∫il, beidh an <code>Result</code> ina <code>Ok</code> leis an luach a th√°irg an todhcha√≠. M√° th√©ann an t-am scoir thart ar dt√∫s, beidh an <code>Result</code> ina <code>Err</code> leis an r√© a d'fhan an t-am scoir leis.</li>
</ul>
<p>Taispe√°nann Liost√°il 17-28 an dearbh√∫ seo.</p>
<!-- This is not tested because it intentionally does not compile. -->
<Listing number="17-28" caption="Defining the signature of `timeout`" file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{future::Future, time::Duration};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let slow = async {
</span><span class="boring">            trpl::sleep(Duration::from_secs(5)).await;
</span><span class="boring">            "Finally finished"
</span><span class="boring">        };
</span><span class="boring">
</span><span class="boring">        match timeout(slow, Duration::from_millis(10)).await {
</span><span class="boring">            Ok(message) =&gt; println!("Succeeded with '{message}'"),
</span><span class="boring">            Err(duration) =&gt; {
</span><span class="boring">                println!("Failed after {} seconds", duration.as_secs())
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span>async fn timeout&lt;F: Future&gt;(
    future_to_try: F,
    max_time: Duration,
) -&gt; Result&lt;F::Output, Duration&gt; {
    // Here is where our implementation will go!
}</code></pre>
</Listing>
<p>S√°sa√≠onn s√© sin √°r spriocanna do na cine√°lacha. Anois smaoin√≠mis ar an <em>iompar</em> at√° de dh√≠th orainn: ba mhaith linn r√°s a dh√©anamh idir an todhcha√≠ a chuirtear isteach agus an fad ama. Is f√©idir linn <code>trpl::sleep</code> a √∫s√°id chun todhcha√≠ lasc ama a chruth√∫ √≥n fad ama, agus <code>trpl::race</code> a √∫s√°id chun
an lasc ama sin a rith leis an todhcha√≠ a chuireann an glaoiteoir isteach.</p>
<p>T√° a fhios againn freisin nach bhfuil <code>race</code> cothrom, ag baili√∫ arg√≥int√≠ san ord ina
ritheann siad. D√° bhr√≠ sin, cuirimid <code>future_to_try</code> chuig <code>race</code> ar dt√∫s ionas go mbeidh
seans aige a chr√≠ochn√∫ fi√∫ m√° t√° fad an-ghearr ag <code>max_time</code>. M√° chr√≠ochna√≠onn <code>future_to_try</code> ar dt√∫s, cuirfidh <code>race</code> <code>Left</code> ar ais leis an aschur √≥
<code>future_to_try</code>. M√° chr√≠ochna√≠onn <code>timer</code> ar dt√∫s, cuirfidh <code>race</code> <code>Right</code> ar ais le
aschur an lasc ama de <code>()</code>.</p>
<p>I Liost√°il 17-29, d√©anaimid meaitse√°il ar thoradh fanacht le <code>trpl::race</code>.</p>
<Listing number="17-29" caption="Defining `timeout` with `race` and `sleep`" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{future::Future, time::Duration};
</span><span class="boring">
</span>use trpl::Either;

// --snip--

fn main() {
    trpl::run(async {
        let slow = async {
            trpl::sleep(Duration::from_secs(5)).await;
            "Finally finished"
        };

        match timeout(slow, Duration::from_secs(2)).await {
            Ok(message) =&gt; println!("Succeeded with '{message}'"),
            Err(duration) =&gt; {
                println!("Failed after {} seconds", duration.as_secs())
            }
        }
    });
}

async fn timeout&lt;F: Future&gt;(
    future_to_try: F,
    max_time: Duration,
) -&gt; Result&lt;F::Output, Duration&gt; {
    match trpl::race(future_to_try, trpl::sleep(max_time)).await {
        Either::Left(output) =&gt; Ok(output),
        Either::Right(_) =&gt; Err(max_time),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>M√° √©ir√≠onn leis an <code>future_to_try</code> agus m√° fhaighimid <code>Left(output)</code>, cuirimid <code>Ok(output)</code> ar ais. M√° th√©ann an lasc ama codlata thart ina ionad sin agus m√° fhaighimid <code>Right(())</code>, d√©anaimid neamhaird den <code>()</code> le <code>_</code> agus cuirimid <code>Err(max_time)</code> ar ais ina ionad.</p>
<p>Leis sin, t√° <code>timeout</code> oibre againn at√° t√≥gtha as dh√° ch√∫nt√≥ir neamhshioncr√≥nach eile. M√°
rithimid √°r gc√≥d, priont√°ilfidh s√© an modh teipe tar √©is an ama deiridh:</p>
<pre><code class="language-text">Failed after 2 seconds
</code></pre>
<p>√ìs rud √© go gcuireann todhcha√≠ le ch√©ile todhcha√≠ eile, is f√©idir leat uirlis√≠ an-chumhachtacha a th√≥g√°il
ag baint √∫s√°ide as bloic th√≥g√°la n√≠os l√∫ neamhshioncr√≥nacha. Mar shampla, is f√©idir leat an cur chuige c√©anna seo a √∫s√°id
chun sosanna ama a chomhcheangal le hathiarrachta√≠, agus iad sin a √∫s√°id le hoibr√≠ochta√≠ ar n√≥s
glaonna l√≠onra (ceann de na sampla√≠ √≥ th√∫s na caibidle).</p>
<p>Go praitici√∫il, is gn√°ch go n-oibreoidh t√∫ go d√≠reach le <code>async</code> agus <code>await</code>, agus
sa dara h√°it le feidhmeanna agus macra√≠ ar n√≥s <code>join</code>, <code>join_all</code>, <code>race</code>, agus mar sin de. N√≠ bheidh ort ach teacht ar <code>pin</code> anois is ar√≠s chun todhcha√≠ a √∫s√°id leis na
APIanna sin.</p>
<p>T√° roinnt beala√≠ feicthe againn anois chun oibri√∫ le todhcha√≠ iolracha ag an am c√©anna.
An ch√©ad rud eile, f√©achfaimid ar an gcaoi a bhf√©adfaimid oibri√∫ le todhcha√≠ iolracha i
seicheamh thar am le <em>streams</em>. Seo c√∫pla rud eile a d'fh√©adf√° a mheas ar dt√∫s, √°fach:</p>
<ul>
<li>
<p>D'√∫s√°ideamar <code>Vec</code> le <code>join_all</code> chun fanacht go gcr√≠ochn√≥idh na todhcha√≠ go l√©ir i ngr√∫pa √©igin
le ch√©ile. Conas a d'fh√©adf√° <code>Vec</code> a √∫s√°id chun gr√∫pa todhcha√≠ochta√≠ a phr√≥ise√°il in ord ina ionad? Cad iad na comhbhabht√°lacha a bhaineann leis sin a dh√©anamh?</p>
</li>
<li>
<p>F√©ach ar an gcine√°l <code>futures::stream::FuturesUnordered</code> √≥n gcliathbhosca <code>futures</code>. C√©n chaoi a mbeadh s√© difri√∫il idir √© a √∫s√°id agus <code>Vec</code> a √∫s√°id? (N√° b√≠odh imn√≠ ort faoin bhf√≠ric go bhfuil s√© √≥n gcuid <code>stream</code> den chliathbhosca; oibr√≠onn s√© go bre√° le haon bhaili√∫ch√°n todhcha√≠ochta√≠.)</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="sruthanna-todhcha√≠-i-seicheamh"><a class="header" href="#sruthanna-todhcha√≠-i-seicheamh">Sruthanna: Todhcha√≠ i Seicheamh</a></h2>
<!-- Seancheannteidil. N√° bain iad n√≥ d'fh√©adfadh naisc briseadh. -->
<p><a id="streams"></a></p>
<p>Go dt√≠ seo sa chaibidil seo, t√°imid clo√≠te den chuid is m√≥ le todhcha√≠ aonair. Ba √© an t-aon eisceacht mh√≥r
a d'√∫s√°ideamar n√° an cain√©al asyncr√≥nach. Cuimhnigh ar an gcaoi ar √∫s√°ideamar an glacad√≥ir d√°r
chain√©al asyncr√≥nach n√≠os luaithe sa chaibidil seo sa chuid <a href="ch17-02-concurrency-with-async.html#message-passing">‚ÄúTeachtaireacht
Ag Pas√°il‚Äù</a><!-- neamhaird -->. T√°irgeann an modh async <code>recv</code>
seicheamh m√≠reanna le himeacht ama. Is sampla √© seo de phatr√∫n i bhfad n√≠os
ginear√°lta ar a dtugtar <em>stream</em>.</p>
<p>Chonaiceamar seicheamh m√≠reanna siar i gCaibidil 13, nuair a d'fh√©achamar ar an tr√©ith <code>Iterator</code>
sa chuid <a href="ch13-02-iterators.html#the-iterator-trait-and-the-next-method">An Tr√©ith Iterator agus an Modh <code>next</code></a><!-- neamhaird
-->, ach t√° dh√° dhifr√≠ocht idir atreoraitheoir√≠ agus an glacad√≥ir
cain√©il asyncr√≥nach. Is √© an ch√©ad difr√≠ocht n√° am: b√≠onn athr√°iteoir√≠ sioncr√≥nach, agus
b√≠onn glacad√≥ir an chain√©il neamhshioncr√≥nach. Is √© an dara ceann an API. Agus muid ag obair
go d√≠reach le <code>Iterator</code>, glaoimid ar a mhodh sioncr√≥nach <code>next</code>. Leis an
sruth <code>trpl::Receiver</code> go h√°irithe, thugamar modh neamhshioncr√≥nach <code>recv</code> air ina ionad. Seachas sin, motha√≠onn na APIanna seo an-chos√∫il, agus n√≠ comhtharl√∫ √© an chos√∫lacht sin. T√° sruth cos√∫il le foirm neamhshioncr√≥nach athr√°. C√© go
bhfuil an <code>trpl::Receiver</code> ag fanacht go sonrach le teachtaireachta√≠ a fh√°il, √°fach, t√° an
API srutha ginear√°lta i bhfad n√≠os leithne: sol√°thra√≠onn s√© an ch√©ad mh√≠r eile ar an
mbealach a dh√©anann <code>Iterator</code>, ach go neamhshioncr√≥nach.</p>
<p>Cialla√≠onn an chos√∫lacht idir athr√°iteoir√≠ agus sruthanna i Rust gur f√©idir linn
sruth a chruth√∫ √≥ aon athr√°iteoir. Mar at√° le hathr√°iteoir, is f√©idir linn oibri√∫ le
sruth tr√≠ ghlaoch ar a mhodh <code>next</code> agus ansin fanacht leis an aschur, mar at√° i Liost√°il
17-30.</p>
<Listing number="17-30" caption="Creating a stream from an iterator and printing its values" file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let values = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        let iter = values.iter().map(|n| n * 2);
        let mut stream = trpl::stream_from_iter(iter);

        while let Some(value) = stream.next().await {
            println!("The value was: {value}");
        }
<span class="boring">    });
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Tosa√≠mid le sraith uimhreacha, a thiont√≥imid ina n-athr√°th√≥ir agus ansin glaoimid ar <code>map</code> chun na luachanna go l√©ir a dh√∫bailt. Ansin tiont√≥imid an t-athr√°th√≥ir ina shruth
ag baint √∫s√°ide as an bhfeidhm <code>trpl::stream_from_iter</code>. Ansin, l√∫baimid thar na m√≠reanna sa
sruth de r√©ir mar a thagann siad leis an l√∫b <code>while let</code>.</p>
<p>Ar an drochuair, nuair a dh√©anaimid iarracht an c√≥d a rith, n√≠ thiomsa√≠onn s√©, ach ina ionad sin tuairisc√≠onn s√© nach bhfuil aon mhodh <code>next</code> ar f√°il:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-30
cargo build
copy only the error output
-->
<pre><code class="language-console">error[E0599]: no method named `next` found for struct `Iter` in the current scope
  --&gt; src/main.rs:10:40
   |
10 |         while let Some(value) = stream.next().await {
   |                                        ^^^^
   |
   = note: the full type name has been written to 'file:///projects/async_await/target/debug/deps/async_await-9de943556a6001b8.long-type-1281356139287206597.txt'
   = note: consider using `--verbose` to print the full type name to the console
   = help: items from traits can only be used if the trait is in scope
help: the following traits which provide `next` are implemented but not in scope; perhaps you want to import one of them
   |
1  + use crate::trpl::StreamExt;
   |
1  + use futures_util::stream::stream::StreamExt;
   |
1  + use std::iter::Iterator;
   |
1  + use std::str::pattern::Searcher;
   |
help: there is a method `try_next` with a similar name
   |
10 |         while let Some(value) = stream.try_next().await {
   |                                        ~~~~~~~~
</code></pre>
<p>Mar a mh√≠n√≠onn an t-aschur seo, is √© an ch√∫is at√° leis an earr√°id tiomsaitheora n√° go bhfuil an tr√©ith cheart sa raon feidhme ag teast√°il uainn chun an modh <code>next</code> a √∫s√°id. Agus √°r bpl√©
go dt√≠ seo san √°ireamh, d'fh√©adf√° a bheith ag s√∫il go r√©as√∫nta gurb √© <code>Stream</code> an tr√©ith sin, ach is √© <code>StreamExt</code> at√° ann i nd√°ir√≠re. Giorr√∫ch√°n do <em>extension</em>, is patr√∫n coitianta √© <code>Ext</code> i
bphobal Rust chun tr√©ith amh√°in a sh√≠neadh le tr√©ith eile.</p>
<p>M√≠n√≠mid na tr√©ithe <code>Stream</code> agus <code>StreamExt</code> beag√°n n√≠os mine ag
deireadh na caibidle, ach faoi l√°thair n√≠l le fios agat ach go sainmh√≠n√≠onn an tr√©ith <code>Stream</code>
comh√©adan √≠sealleibh√©il a chomhcheangla√≠onn na tr√©ithe <code>Iterator</code> agus
<code>Future</code> go h√©ifeachtach. Sol√°thra√≠onn <code>StreamExt</code> sraith APIanna ardleibh√©il ar bharr
<code>Stream</code>, lena n-√°ir√≠tear an modh <code>next</code> chomh maith le modhanna f√≥ntais eile cos√∫il
leis na cinn a shol√°thra√≠onn an tr√©ith <code>Iterator</code>. N√≠l <code>Stream</code> agus <code>StreamExt</code>
mar chuid de leabharlann chaighde√°nach Rust f√≥s, ach √∫s√°ideann formh√≥r na gcliathbhosca√≠ √©iceach√≥rais an sainmh√≠ni√∫ c√©anna.</p>
<p>Is √© an r√©iteach ar an earr√°id tiomsaitheora n√° r√°iteas <code>use</code> a chur leis le haghaidh <code>trpl::StreamExt</code>,
mar at√° i Liost√°il 17-31.</p>
<Listing number="17-31" caption="Successfully using an iterator as the basis for a stream" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>use trpl::StreamExt;

fn main() {
    trpl::run(async {
        let values = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        let iter = values.iter().map(|n| n * 2);
        let mut stream = trpl::stream_from_iter(iter);

        while let Some(value) = stream.next().await {
            println!("The value was: {value}");
        }
    });
}</code></pre></pre>
</Listing>
<p>Agus na p√≠osa√≠ sin go l√©ir curtha le ch√©ile, oibr√≠onn an c√≥d seo mar is mian linn! Ina theannta sin, anois go bhfuil <code>StreamExt</code> againn, is f√©idir linn a chuid modhanna f√≥ntais go l√©ir a √∫s√°id, d√≠reach mar a dh√©antar le hathraitheoir√≠. Mar shampla, i Liosta 17-32, √∫s√°idimid an modh <code>filter</code> chun gach rud a scagadh amach ach amh√°in iolraithe de thr√≠ agus c√∫ig.</p>
<Listing number="17-32" caption="Filtering a stream with the `StreamExt::filter` method" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>use trpl::StreamExt;

fn main() {
    trpl::run(async {
        let values = 1..101;
        let iter = values.map(|n| n * 2);
        let stream = trpl::stream_from_iter(iter);

        let mut filtered =
            stream.filter(|value| value % 3 == 0 || value % 5 == 0);

        while let Some(value) = filtered.next().await {
            println!("The value was: {value}");
        }
    });
}</code></pre></pre>
</Listing>
<p>Ar nd√≥igh, n√≠l s√© seo an-suimi√∫il, √≥s rud √© go bhf√©adfaimis an rud c√©anna a dh√©anamh le hathr√°iteoir√≠ gn√°th agus gan aon neamhshioncr√≥n√∫ ar chor ar bith. F√©achfaimid ar a
is f√©idir linn a dh√©anamh at√° <em>uath√∫il</em> do shruthanna.</p>
<h3 id="sruthanna-a-chumadh"><a class="header" href="#sruthanna-a-chumadh">Sruthanna a Chumadh</a></h3>
<p>L√©ir√≠tear go leor coincheap go n√°d√∫rtha mar shruthanna: m√≠reanna ag teacht ar f√°il i
scuaine, p√≠osa√≠ sonra√≠ √° dtarraingt de r√©ir a ch√©ile √≥n gc√≥ras comhad nuair a bh√≠onn an
tacar sonra√≠ ioml√°n r√≥-mh√≥r do thacar sonra√≠ an r√≠omhaire, n√≥ sonra√≠ ag teacht thar an
l√≠onra le himeacht ama. √ìs rud √© gur todhcha√≠ iad sruthanna, is f√©idir linn iad a √∫s√°id le haon
chine√°l eile todhcha√≠ agus iad a chomhcheangal ar bheala√≠ suimi√∫la. Mar shampla, is f√©idir linn imeachta√≠ a bhaisc
chun an iomarca glaonna l√≠onra a sheachaint, sosanna ama a shocr√∫ ar sheichimh
oibr√≠ochta√≠ fada, n√≥ imeachta√≠ comh√©adain √∫s√°ideora a th√≥gadh chun obair
gan gh√° a sheachaint.</p>
<p>Tosa√≠mis tr√≠ shruth beag teachtaireachta√≠ a th√≥g√°il mar ionada√≠ do shruth
sonra√≠ a d'fh√©adfaimis a fheice√°il √≥ WebSocket n√≥ √≥ phr√≥tacal cumars√°ide f√≠or-ama eile, mar a thaispe√°ntar i Liost√°il 17-33.</p>
<Listing number="17-33" caption="Using the `rx` receiver as a `ReceiverStream`" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>use trpl::{ReceiverStream, Stream, StreamExt};

fn main() {
    trpl::run(async {
        let mut messages = get_messages();

        while let Some(message) = messages.next().await {
            println!("{message}");
        }
    });
}

fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
    let (tx, rx) = trpl::channel();

    let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
    for message in messages {
        tx.send(format!("Message: '{message}'")).unwrap();
    }

    ReceiverStream::new(rx)
}</code></pre></pre>
</Listing>
<p>Ar dt√∫s, crutha√≠mid feidhm ar a dtugtar <code>get_messages</code> a thugann <code>impl Stream&lt;Item = String&gt;</code> ar ais. Chun √© a chur i bhfeidhm, crutha√≠mid cain√©al neamhshioncr√≥nach, l√∫baimid thar na ch√©ad 10 litir den aib√≠tir B√©arla, agus seolaimid iad trasna an chain√©il.</p>
<p>√ös√°idimid cine√°l nua freisin: <code>ReceiverStream</code>, a athra√≠onn an glacad√≥ir <code>rx</code> √≥n <code>trpl::channel</code> go <code>Stream</code> le modh <code>next</code>. Ar ais i <code>main</code>, √∫s√°idimid l√∫b <code>while let</code> chun na teachtaireachta√≠ go l√©ir √≥n sruth a phriont√°il.</p>
<p>Nuair a ritheann muid an c√≥d seo, faighimid na tortha√≠ go d√≠reach a mbeimid ag s√∫il leo:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the threads running differently rather than
changes in the compiler -->
<pre><code class="language-text">Message: 'a'
Message: 'b'
Message: 'c'
Message: 'd'
Message: 'e'
Message: 'f'
Message: 'g'
Message: 'h'
Message: 'i'
Message: 'j'
</code></pre>
<p>Ar√≠s, d‚Äôfh√©adfaimis √© seo a dh√©anamh leis an ngn√°th-API <code>Receiver</code> n√≥ fi√∫ leis an ngn√°th-API <code>Iterator</code>, √°fach, mar sin cuirfimid gn√© leis a √©il√≠onn sruthanna: ag cur teorainn ama leis a bhaineann le gach m√≠r sa sruth, agus moill ar na m√≠reanna a asta√≠onn muid, mar a thaispe√°ntar i Liost√°il 17-34.</p>
<Listing number="17-34" caption="Using the `StreamExt::timeout` method to set a time limit on the items in a stream" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span>use std::{pin::pin, time::Duration};
use trpl::{ReceiverStream, Stream, StreamExt};

fn main() {
    trpl::run(async {
        let mut messages =
            pin!(get_messages().timeout(Duration::from_millis(200)));

        while let Some(result) = messages.next().await {
            match result {
                Ok(message) =&gt; println!("{message}"),
                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
            }
        }
    })
}
<span class="boring">
</span><span class="boring">fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
</span><span class="boring">    for message in messages {
</span><span class="boring">        tx.send(format!("Message: '{message}'")).unwrap();
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>We start by adding a timeout to the stream with the <code>timeout</code> method, which
comes from the <code>StreamExt</code> trait. Then we update the body of the <code>while let</code>
loop, because the stream now returns a <code>Result</code>. The <code>Ok</code> variant indicates a
message arrived in time; the <code>Err</code> variant indicates that the timeout elapsed
before any message arrived. We <code>match</code> on that result and either print the
message when we receive it successfully or print a notice about the timeout.
Finally, notice that we pin the messages after applying the timeout to them,
because the timeout helper produces a stream that needs to be pinned to be
polled.</p>
<p>However, because there are no delays between messages, this timeout does not
change the behavior of the program. Let‚Äôs add a variable delay to the messages
we send, as shown in Listing 17-35.</p>
<Listing number="17-35" caption="Sending messages through `tx` with an async delay without making `get_messages` an async function" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let mut messages =
</span><span class="boring">            pin!(get_messages().timeout(Duration::from_millis(200)));
</span><span class="boring">
</span><span class="boring">        while let Some(result) = messages.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(message) =&gt; println!("{message}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    })
</span><span class="boring">}
</span><span class="boring">
</span>fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
    let (tx, rx) = trpl::channel();

    trpl::spawn_task(async move {
        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
        for (index, message) in messages.into_iter().enumerate() {
            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
            trpl::sleep(Duration::from_millis(time_to_sleep)).await;

            tx.send(format!("Message: '{message}'")).unwrap();
        }
    });

    ReceiverStream::new(rx)
}</code></pre></pre>
</Listing>
<p>I <code>get_messages</code>, √∫s√°idimid an modh athr√° <code>enumerate</code> leis an eagar <code>messages</code> ionas gur f√©idir linn inn√©acs gach m√≠re at√° √° sheoladh againn a fh√°il mar aon leis an
m√≠r f√©in. Ansin cuirimid moill 100 milleasoicind i bhfeidhm ar mh√≠reanna cothrom-inn√©acs agus moill 300 milleasoicind ar mh√≠reanna corr-inn√©acs chun na moilleanna √©ags√∫la a d'fh√©adfaimis a fheice√°il √≥ shruth teachtaireachta√≠ sa saol r√©ad√∫il a insamhladh. √ìs rud √© go bhfuil √°r n-am scoir
do 200 milleasoicind, ba cheart go mbeadh tionchar aige seo ar leath na dteachtaireachta√≠.</p>
<p>Chun codladh idir theachtaireachta√≠ sa fheidhm <code>get_messages</code> gan bac a chur,
n√≠ m√≥r d√∫inn async a √∫s√°id. Mar sin f√©in, n√≠ f√©idir linn <code>get_messages</code> f√©in a dh√©anamh ina fheidhm async,
mar ansin chuirfimis <code>Future&lt;Output = Stream&lt;Item = String&gt;&gt;</code> ar ais in ionad <code>Stream&lt;Item = String&gt;&gt;</code>. Bheadh ‚Äã‚Äãar an nglaoiteoir fanacht
le <code>get_messages</code> f√©in chun rochtain a fh√°il ar an sruth. Ach cuimhnigh: tarla√≠onn gach rud i
dtodhcha√≠ ar leith go l√≠neach; tarla√≠onn comhthr√°thacht idir todhcha√≠. D√° mbeadh fanacht
le <code>get_messages</code> ann, bheadh ‚Äã‚Äãair na teachtaireachta√≠ go l√©ir a sheoladh, lena n-√°ir√≠tear an mhoill codlata
idir gach teachtaireacht, sula bhfillf√≠ an sruth glacad√≥ra. Mar thoradh air sin,
bheadh ‚Äã‚Äãan t-am scoir gan √∫s√°id. N√≠ bheadh ‚Äã‚Äãaon mhoilleanna sa sruth f√©in;
tharl√≥dh siad go l√©ir sula mbeadh an sruth ar f√°il fi√∫.</p>
<p>Ina √°it sin, f√°gaimid <code>get_messages</code> mar fheidhm rialta a thugann sruth ar ais,
agus crutha√≠mid tasc chun na glaonna <code>sleep</code> neamhshioncr√≥nacha a l√°imhse√°il.</p>
<blockquote>
<p>N√≥ta: Oibr√≠onn glaoch ar <code>spawn_task</code> ar an mbealach seo toisc go bhfuil √°r
ham rithe socraithe againn cheana f√©in; mura mbeadh, chuirfeadh s√© scaoll faoi deara. Roghna√≠onn cur i bhfeidhm eile
comhbhabht√°lacha difri√∫la: d'fh√©adfadh siad am rithe nua a chruth√∫ agus an scaoll a sheachaint ach
cr√≠ochn√≥idh siad le beag√°n forchostais bhreise, n√≥ d'fh√©adfadh s√© nach sol√°thr√≥idh siad bealach
neamhsple√°ch chun tascanna a chruth√∫ gan tagairt d'am rithe. B√≠ cinnte go bhfuil a fhios agat
c√©n chomhr√©iteach at√° roghnaithe ag do rith-am agus scr√≠obh do ch√≥d d√° r√©ir!</p>
</blockquote>
<p>Anois t√° toradh i bhfad n√≠os suimi√∫la ag √°r gc√≥d. Idir gach p√©ire eile
teachtaireachta, earr√°id <code>Problem: Elapsed(())</code>.</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-35
cargo run
copy only the program output, *not* the compiler output
-->
<pre><code class="language-text">Message: 'a'
Problem: Elapsed(())
Message: 'b'
Message: 'c'
Problem: Elapsed(())
Message: 'd'
Message: 'e'
Problem: Elapsed(())
Message: 'f'
Message: 'g'
Problem: Elapsed(())
Message: 'h'
Message: 'i'
Problem: Elapsed(())
Message: 'j'
</code></pre>
<p>N√≠ chuireann an t-am scoir cosc ‚Äã‚Äãar na teachtaireachta√≠ teacht sa deireadh. Faighimid f√≥s
na teachtaireachta√≠ bunaidh go l√©ir, mar go bhfuil √°r gcain√©al <em>gan teorainn</em>: is f√©idir leis an oiread
teachtaireachta√≠ agus is f√©idir linn a fheisti√∫ sa chuimhne a shealbh√∫. Mura dtagann an teachtaireacht roimh an
am scoir, cuirfidh √°r l√°imhse√°la√≠ srutha san √°ireamh √© sin, ach nuair a dh√©anann s√© suirbh√© ar an sruth
ar√≠s, d'fh√©adfadh an teachtaireacht a bheith tagtha anois.</p>
<p>Is f√©idir leat iompar difri√∫il a fh√°il m√°s g√° tr√≠ chine√°lacha eile cain√©al n√≥
cine√°lacha eile sruthanna a √∫s√°id go ginear√°lta. F√©achfaimid ar cheann acu sin i gcleachtas tr√≠
shruth eatraimh ama a chomhcheangal leis an sruth teachtaireachta√≠ seo.</p>
<h3 id="sruthanna-a-chumasc"><a class="header" href="#sruthanna-a-chumasc">Sruthanna a Chumasc</a></h3>
<p>Ar dt√∫s, crutha√≠mis sruth eile, a scaoilfidh m√≠r gach milleasoicind m√°
ligimid d√≥ rith go d√≠reach. Ar mhaithe le simpl√≠ocht, is f√©idir linn an fheidhm <code>sleep</code> a √∫s√°id chun
teachtaireacht a sheoladh ar mhoill agus √≠ a chomhcheangal leis an gcur chuige c√©anna a d'√∫s√°ideamar i
<code>get_messages</code> chun sruth a chruth√∫ √≥ chain√©al. Is √© an difr√≠ocht n√° go seolfaimid ar ais an comhaireamh eatraimh at√° caite an uair seo, mar sin beidh an cine√°l tuairisce√°in <code>impl Stream&lt;Item = u32&gt;</code>, agus is f√©idir linn glaoch ar an bhfeidhm <code>get_intervals</code> (f√©ach Liost√°il 17-36).</p>
<Listing number="17-36" caption="Creating a stream with a counter that will be emitted once every millisecond" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let mut messages =
</span><span class="boring">            pin!(get_messages().timeout(Duration::from_millis(200)));
</span><span class="boring">
</span><span class="boring">        while let Some(result) = messages.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(message) =&gt; println!("{message}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    })
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
</span><span class="boring">        for (index, message) in messages.into_iter().enumerate() {
</span><span class="boring">            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
</span><span class="boring">            trpl::sleep(Duration::from_millis(time_to_sleep)).await;
</span><span class="boring">
</span><span class="boring">            tx.send(format!("Message: '{message}'")).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}
</span><span class="boring">
</span>fn get_intervals() -&gt; impl Stream&lt;Item = u32&gt; {
    let (tx, rx) = trpl::channel();

    trpl::spawn_task(async move {
        let mut count = 0;
        loop {
            trpl::sleep(Duration::from_millis(1)).await;
            count += 1;
            tx.send(count).unwrap();
        }
    });

    ReceiverStream::new(rx)
}</code></pre></pre>
</Listing>
<p>Tosa√≠mid tr√≠ <code>count</code> a shaini√∫ sa tasc. (D'fh√©adfaimis √© a shaini√∫ lasmuigh den
tasc freisin, ach is soil√©ire raon feidhme aon athr√≥g ar leith a theorann√∫.) Ansin
crutha√≠mid l√∫b gan teorainn. Codla√≠onn gach athr√° den l√∫b go haisioncr√≥nach ar feadh
milleasoicind amh√°in, m√©ada√≠onn s√© an comhaireamh, agus ansin seolann s√© thar an gcain√©al √©.
Toisc go bhfuil s√© seo go l√©ir fillte sa tasc a chruthaigh <code>spawn_task</code>, glanfar suas √© go l√©ir - lena n-√°ir√≠tear an l√∫b gan teorainn - mar aon leis an am rith.</p>
<p>T√° an cine√°l seo l√∫b gan teorainn, nach gcr√≠ochna√≠onn ach amh√°in nuair a dh√©antar an t-am rith ioml√°n a str√≥iceadh, s√°ch coitianta i meirge asyncr√≥nach: n√≠ m√≥r do go leor cl√°r lean√∫int ar aghaidh ag rith
go neamhchinnte. Le haisioncr√≥nach, n√≠ chuireann s√© seo bac ar aon rud eile, fad is at√°
pointe feithimh amh√°in ar a laghad i ngach athr√° tr√≠d an l√∫b.</p>
<p>Anois, ar ais i mbloc asyncr√≥nach √°r bpr√≠omhfheidhme, is f√©idir linn iarracht a dh√©anamh na sruthanna
<code>messages</code> agus <code>intervals</code> a chumasc, mar a thaispe√°ntar i Liost√°il 17-37.</p>
<Listing number="17-37" caption="Attempting to merge the `messages` and `intervals` streams" file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let messages = get_messages().timeout(Duration::from_millis(200));
        let intervals = get_intervals();
        let merged = messages.merge(intervals);
<span class="boring">
</span><span class="boring">        while let Some(result) = merged.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(message) =&gt; println!("{message}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    })
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
</span><span class="boring">        for (index, message) in messages.into_iter().enumerate() {
</span><span class="boring">            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
</span><span class="boring">            trpl::sleep(Duration::from_millis(time_to_sleep)).await;
</span><span class="boring">
</span><span class="boring">            tx.send(format!("Message: '{message}'")).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_intervals() -&gt; impl Stream&lt;Item = u32&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let mut count = 0;
</span><span class="boring">        loop {
</span><span class="boring">            trpl::sleep(Duration::from_millis(1)).await;
</span><span class="boring">            count += 1;
</span><span class="boring">            tx.send(count).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Tosa√≠mid tr√≠ ghlaoch ar <code>get_intervals</code>. Ansin, d√©anaimid na sruthanna <code>messages</code> agus <code>intervals</code> a chumasc leis an modh <code>merge</code>, a chomhcheangla√≠onn ilshruthanna
i sruth amh√°in a th√°irgeann m√≠reanna √≥ aon cheann de na sruthanna foinse a luaithe
a bh√≠onn na m√≠reanna ar f√°il, gan aon ord√∫ ar leith a fhorchur. Ar deireadh, d√©anaimid l√∫b thar an sruth comhcheangailte sin in ionad thar <code>messages</code>.</p>
<p>Ag an bpointe seo, n√≠ g√° <code>messages</code> n√° <code>intervals</code> a phion√°il n√° a athr√∫,
toisc go gcomhcheangl√≥far an d√° cheann sa sruth <code>merged</code> aonair. Mar sin f√©in, n√≠
thiomsa√≠onn an glao seo chun <code>merge</code>! (N√≠ dh√©anann an glao <code>next</code> sa l√∫b <code>while let</code> ach an oiread, ach fillfimid ar sin.) T√° s√© seo amhlaidh toisc go bhfuil
cine√°lacha difri√∫la ag an d√° shruth. T√° an cine√°l <code>Timeout&lt;impl Stream&lt;Item = String&gt;&gt;</code> ag an sruth <code>messages</code>, √°it a bhfuil <code>Timeout</code> an cine√°l a chuireann <code>Stream</code> i bhfeidhm le haghaidh glao <code>timeout</code>. T√° an cine√°l <code>impl Stream&lt;Item = u32&gt;</code> ag an sruth <code>intervals</code>. Chun an d√° shruth seo a chumasc, n√≠ m√≥r d√∫inn ceann acu a chlaochl√∫ chun go n-oireann s√© don cheann eile. D√©anfaimid
athoibri√∫ ar an sruth eatraimh, mar go bhfuil teachtaireachta√≠ cheana f√©in san fhorm√°id bhun√∫sach at√° uainn agus caithfidh s√© earr√°id√≠ ama scoir a l√°imhse√°il (f√©ach Liost√°il 17-38).</p>
<!-- We cannot directly test this one, because it never stops. -->
<Listing number="17-38" caption="Aligning the type of the the `intervals` stream with the type of the `messages` stream" file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let messages = get_messages().timeout(Duration::from_millis(200));
        let intervals = get_intervals()
            .map(|count| format!("Interval: {count}"))
            .timeout(Duration::from_secs(10));
        let merged = messages.merge(intervals);
        let mut stream = pin!(merged);
<span class="boring">
</span><span class="boring">        while let Some(result) = stream.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(message) =&gt; println!("{message}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    })
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
</span><span class="boring">        for (index, message) in messages.into_iter().enumerate() {
</span><span class="boring">            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
</span><span class="boring">            trpl::sleep(Duration::from_millis(time_to_sleep)).await;
</span><span class="boring">
</span><span class="boring">            tx.send(format!("Message: '{message}'")).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_intervals() -&gt; impl Stream&lt;Item = u32&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let mut count = 0;
</span><span class="boring">        loop {
</span><span class="boring">            trpl::sleep(Duration::from_millis(1)).await;
</span><span class="boring">            count += 1;
</span><span class="boring">            tx.send(count).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ar dt√∫s, is f√©idir linn an modh c√∫nta <code>map</code> a √∫s√°id chun na <code>intervals</code> a chlaochl√∫ go
teaghr√°n. Ar an dara dul s√≠os, n√≠ m√≥r d√∫inn an <code>Timeout</code> √≥ <code>messages</code> a mheaitse√°il. √ìs rud √© nach bhfuilimid
i nd√°ir√≠re <em>ag iarraidh</em> teorainn ama do <code>intervals</code>, √°fach, is f√©idir linn teorainn ama a chruth√∫
at√° n√≠os faide n√° na tr√©imhs√≠ eile at√° √° n-√∫s√°id againn. Anseo, crutha√≠mid
tr√©imhse ama 10 soicind le <code>Duration::from_secs(10)</code>. Ar deireadh, n√≠ m√≥r d√∫inn
<code>stream</code> a dh√©anamh inathraithe, ionas gur f√©idir le glaonna <code>next</code> an l√∫b <code>while let</code> athr√°
tr√≠d an sruth, agus √© a phion√°il ionas go mbeidh s√© s√°bh√°ilte √© sin a dh√©anamh. Tugann s√© sin <em>beagnach</em>
sinn go dt√≠ an √°it a gcaithfimid a bheith. Seice√°lann gach cine√°l. M√° ritheann t√∫ √© seo, √°fach,
beidh dh√° fhadhb ann. Ar dt√∫s, n√≠ stopfaidh s√© cho√≠che! Beidh ort √© a stopadh le
<span class="keystroke">ctrl-c</span>. Ar an dara dul s√≠os, beidh na teachtaireachta√≠ √≥n aib√≠tir B√©arla curtha i measc na dteachtaireachta√≠ uile maidir le comhaireamh eatraimh:</p>
<!-- Not extracting output because changes to this output aren't significant;
the changes are likely to be due to the tasks running differently rather than
changes in the compiler -->
<pre><code class="language-text">--snip--
Interval: 38
Interval: 39
Interval: 40
Message: 'a'
Interval: 41
Interval: 42
Interval: 43
--snip--
</code></pre>
<p>Taispe√°nann liost√∫ 17-39 bealach amh√°in chun an d√° fhadhb dheireanacha seo a r√©iteach.</p>
<Listing number="17-39" caption="Using `throttle` and `take` to manage the merged streams" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span>        let messages = get_messages().timeout(Duration::from_millis(200));
        let intervals = get_intervals()
            .map(|count| format!("Interval: {count}"))
            .throttle(Duration::from_millis(100))
            .timeout(Duration::from_secs(10));
        let merged = messages.merge(intervals).take(20);
        let mut stream = pin!(merged);
<span class="boring">
</span><span class="boring">        while let Some(result) = stream.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(message) =&gt; println!("{message}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    })
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
</span><span class="boring">        for (index, message) in messages.into_iter().enumerate() {
</span><span class="boring">            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
</span><span class="boring">            trpl::sleep(Duration::from_millis(time_to_sleep)).await;
</span><span class="boring">
</span><span class="boring">            tx.send(format!("Message: '{message}'")).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_intervals() -&gt; impl Stream&lt;Item = u32&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let mut count = 0;
</span><span class="boring">        loop {
</span><span class="boring">            trpl::sleep(Duration::from_millis(1)).await;
</span><span class="boring">            count += 1;
</span><span class="boring">            tx.send(count).unwrap();
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ar dt√∫s, √∫s√°idimid an modh <code>throttling</code> ar an sruth <code>intervals</code> ionas nach gcuirfidh s√© r√≥-ualach ar an sruth <code>messages</code>. Is bealach √© <em>Throttling</em> chun an r√°ta a theorann√∫ ag
a nglaofar ar fheidhm‚Äîn√≥, sa ch√°s seo, c√© chomh minic a dh√©anfar an sruth a
phoibli√∫. Ba ch√≥ir go nd√©anfadh uair amh√°in gach 100 milleasoicind, mar sin c√© chomh minic
a thagann √°r dteachtaireachta√≠.</p>
<p>Chun l√≠on na m√≠reanna a nglacfaimid √≥ shruth a theorann√∫, cuirimid an modh <code>take</code> i bhfeidhm ar an sruth <code>merged</code>, mar ba mhaith linn an t-aschur deiridh a theorann√∫, n√≠ hamh√°in sruth amh√°in n√≥ an sruth eile.</p>
<p>Anois nuair a ritheann muid an cl√°r, stopann s√© tar √©is 20 m√≠r a tharraingt √≥n sruth,
agus n√≠ chuireann na eatraimh r√≥-ualach ar na teachtaireachta√≠. N√≠ fhaighimid <code>Interval: 100</code> n√° <code>Interval: 200</code> n√≥ mar sin de ach an oiread, ach ina ionad sin faighimid <code>Interval: 1</code>, <code>Interval: 2</code>,
agus mar sin de‚Äîc√© go bhfuil sruth foinse againn ar f√©idir leis imeacht a th√°irgeadh gach
mileasoicind. Sin toisc go dt√°irgeann an glao <code>throttle</code> sruth nua a fhilleann
an sruth bunaidh ionas nach nd√©antar poll ar an sruth bunaidh ach ag an r√°ta
sc√≥ip, n√≠ ag a r√°ta "d√∫chasach" f√©in. N√≠l bunch teachtaireachta√≠ eatraimh neamhl√°imhse√°ilte againn
at√° √° roghn√∫ againn neamhaird a dh√©anamh orthu. Ina √°it sin, n√≠ th√°irgimid na teachtaireachta√≠ eatraimh sin riamh sa ch√©ad √°it! Seo an "leisci√∫lacht" d√∫chasach de thodhcha√≠ Rust
ag obair ar√≠s, rud a ligeann d√∫inn √°r dtr√©ithe feidhm√≠ochta a roghn√∫.</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-39
cargo run
copy and paste only the program output
-->
<pre><code class="language-text">Interval: 1
Message: 'a'
Interval: 2
Interval: 3
Problem: Elapsed(())
Interval: 4
Message: 'b'
Interval: 5
Message: 'c'
Interval: 6
Interval: 7
Problem: Elapsed(())
Interval: 8
Message: 'd'
Interval: 9
Message: 'e'
Interval: 10
Interval: 11
Problem: Elapsed(())
Interval: 12
</code></pre>
<p>T√° rud amh√°in eile ann a chaithfimid a l√°imhse√°il: earr√°id√≠! Leis an d√° shruth seo at√° bunaithe ar chain√©al, d'fh√©adfadh na glaonna <code>send</code> teip nuair a dh√∫nann an taobh eile den
chain√©al‚Äîagus n√≠l ansin ach ceist faoin gcaoi a nd√©anann an t-am rith na todhcha√≠ a fhorghn√≠omh√∫
a dh√©anann suas an sruth. Go dt√≠ seo, n√≠or thugamar aird ar an bhf√©idearthacht seo tr√≠ ghlaoch ar
<code>unwrap</code>, ach in aip dea-iompartha, ba cheart d√∫inn an earr√°id a l√°imhse√°il go sainr√°ite, ar a laghad tr√≠d an l√∫b a chr√≠ochn√∫ ionas nach nd√©anaimid iarracht aon teachtaireachta√≠ eile a sheoladh. Taispe√°nann liost√∫
17-40 strait√©is earr√°ide simpl√≠: priont√°il an cheist agus ansin <code>break</code> √≥ na
l√∫ba.</p>
<Listing number="17-40" caption="Handling errors and shutting down the loops">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let messages = get_messages().timeout(Duration::from_millis(200));
</span><span class="boring">        let intervals = get_intervals()
</span><span class="boring">            .map(|count| format!("Interval #{count}"))
</span><span class="boring">            .throttle(Duration::from_millis(500))
</span><span class="boring">            .timeout(Duration::from_secs(10));
</span><span class="boring">        let merged = messages.merge(intervals).take(20);
</span><span class="boring">        let mut stream = pin!(merged);
</span><span class="boring">
</span><span class="boring">        while let Some(result) = stream.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(item) =&gt; println!("{item}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span>fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
    let (tx, rx) = trpl::channel();

    trpl::spawn_task(async move {
        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];

        for (index, message) in messages.into_iter().enumerate() {
            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
            trpl::sleep(Duration::from_millis(time_to_sleep)).await;

            if let Err(send_error) = tx.send(format!("Message: '{message}'")) {
                eprintln!("Cannot send message '{message}': {send_error}");
                break;
            }
        }
    });

    ReceiverStream::new(rx)
}

fn get_intervals() -&gt; impl Stream&lt;Item = u32&gt; {
    let (tx, rx) = trpl::channel();

    trpl::spawn_task(async move {
        let mut count = 0;
        loop {
            trpl::sleep(Duration::from_millis(1)).await;
            count += 1;

            if let Err(send_error) = tx.send(count) {
                eprintln!("Could not send interval {count}: {send_error}");
                break;
            };
        }
    });

    ReceiverStream::new(rx)
}</code></pre></pre>
</Listing>
<p>Mar is gn√°ch, beidh an bealach ceart chun d√©ile√°il le hearr√°id seolta teachtaireachta √©ags√∫il; d√©an cinnte go bhfuil strait√©is agat.</p>
<p>Anois go bhfuil go leor neamhshioncr√≥nacha feicthe againn i gcleachtas, d√©anaimis c√©im siar agus d√©anaimis tochailt isteach i roinnt de na sonra√≠ faoi conas a √∫s√°ideann <code>Future</code>, <code>Stream</code>, agus na pr√≠omhthr√©ithe eile a √∫s√°ideann Rust chun neamhshioncr√≥n a chur ag obair.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="breathn√∫-n√≠os-g√©ire-ar-na-tr√©ithe-le-haghaidh-asyncr√≥nach"><a class="header" href="#breathn√∫-n√≠os-g√©ire-ar-na-tr√©ithe-le-haghaidh-asyncr√≥nach">Breathn√∫ n√≠os g√©ire ar na tr√©ithe le haghaidh Asyncr√≥nach</a></h2>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="digging-into-the-traits-for-async"></a></p>
<p>Ar fud na caibidle, √∫s√°idimid na tr√©ithe <code>Future</code>, <code>Pin</code>, <code>Unpin</code>, <code>Stream</code>, agus
<code>StreamExt</code> ar bheala√≠ √©ags√∫la. Go dt√≠ seo, √°fach, sheachain muid dul r√≥-dhomhain isteach sna sonra√≠ maidir le conas a oibr√≠onn siad n√≥ conas a oireann siad le ch√©ile, rud at√° go bre√°
an chuid is m√≥ den am do d'obair laeth√∫il Rust. Uaireanta, √°fach,
tiocfaidh t√∫ trasna ar ch√°sanna ina mbeidh ort c√∫pla ceann eile de na sonra√≠ seo a thuiscint. Sa chuid seo, d√©anfaimid tochailt isteach go leor chun cabhr√∫ sna c√°sanna sin,
ag f√°g√°il an tumadh <em>an-domhain</em> f√≥s le haghaidh doicim√©ad√∫ eile.</p>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="future"></a></p>
<h3 id="tr√©ith-an-todhcha√≠"><a class="header" href="#tr√©ith-an-todhcha√≠">Tr√©ith an ‚ÄòTodhcha√≠‚Äô</a></h3>
<p>Tosa√≠mis tr√≠ bhreathn√∫ n√≠os g√©ire ar an gcaoi a n-oibr√≠onn tr√©ith an ‚ÄòTodhcha√≠‚Äô. Seo mar a shainmh√≠n√≠onn Rust √≠:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::pin::Pin;
use std::task::{Context, Poll};

pub trait Future {
    type Output;

    fn poll(self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;Self::Output&gt;;
}
<span class="boring">}</span></code></pre></pre>
<p>√Åir√≠tear leis an sainmh√≠ni√∫ tr√©ithe sin roinnt cine√°lacha nua agus roinnt comhr√©ir nach bhfacamar cheana, mar sin d√©anaimis si√∫l tr√≠d an sainmh√≠ni√∫ p√≠osa ar ph√≠osa.</p>
<p>Ar dt√∫s, deir cine√°l gaolmhar <code>Future</code>, <code>Output</code>, cad a r√©it√≠onn an todhcha√≠.</p>
<p>T√° s√© seo cos√∫il leis an gcine√°l gaolmhar <code>Item</code> don tr√©ith <code>Iterator</code>.
Ar an dara dul s√≠os, t√° an modh <code>poll</code> ag <code>Future</code> freisin, a ghlacann tagairt speisialta <code>Pin</code> d√° pharaim√©adar <code>self</code> agus tagairt inathraithe do chine√°l <code>Context</code>,
agus a thugann <code>Poll&lt;Self::Output&gt;</code> ar ais. Labhr√≥imid n√≠os m√≥ faoi <code>Pin</code> agus
<code>Context</code> i gceann n√≥im√©id. Anois, d√≠reoimid ar a dtugann an modh ar ais,
an cine√°l <code>Poll</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Poll&lt;T&gt; {
    Ready(T),
    Pending,
}
<span class="boring">}</span></code></pre></pre>
<p>T√° an cine√°l <code>Poll</code> seo cos√∫il le <code>Option</code>. T√° malairt amh√°in ann a bhfuil luach aige,
<code>Ready(T)</code>, agus ceann nach bhfuil, <code>Pending</code>. Cialla√≠onn <code>Poll</code> rud √©igin go hioml√°n difri√∫il √≥ <code>Option</code>, √°fach! L√©ir√≠onn an malairt <code>Pending</code> go bhfuil obair le d√©anamh ag an todhcha√≠
f√≥s, mar sin beidh ar an nglaoiteoir seice√°il ar√≠s n√≠os d√©ana√≠. L√©ir√≠onn an malairt <code>Ready</code> go bhfuil a chuid oibre cr√≠ochnaithe ag an todhcha√≠ agus go bhfuil an luach <code>T</code>
ar f√°il.</p>
<blockquote>
<p>N√≥ta: Le formh√≥r na dtodhcha√≠, n√≠or cheart don ghlaoiteoir glaoch ar <code>poll</code> ar√≠s tar √©is don todhcha√≠ <code>Ready</code> a thabhairt ar ais. Beidh scaoll ar go leor todhcha√≠ m√° dh√©antar poll√°il orthu ar√≠s tar √©is
d√≥ibh a bheith r√©idh. D√©arfaidh todhcha√≠ at√° s√°bh√°ilte le poll√°il ar√≠s √© sin go sainr√°ite ina
ndoicim√©adacht. T√° s√© seo cos√∫il leis an gcaoi a n-iompra√≠onn <code>Iterator::next</code>.</p>
</blockquote>
<p>Nuair a fheiceann t√∫ c√≥d a √∫s√°ideann <code>await</code>, tiomsa√≠onn Rust √© faoi chochall chun c√≥d a ghlaonn ar <code>poll</code>. M√° fh√©achann t√∫ siar ar Liost√°il 17-4, √°it ar phriont√°ileamar amach teideal an leathanaigh le haghaidh URL aonair nuair a r√©it√≠odh √©, tiomsa√≠onn Rust √© i rud √©igin cos√∫il le seo (c√© nach bhfuil s√© go d√≠reach):</p>
<pre><code class="language-rust ignore">match page_title(url).poll() {
    Ready(page_title) =&gt; match page_title {
        Some(title) =&gt; println!("The title for {url} was {title}"),
        None =&gt; println!("{url} had no title"),
    }
    Pending =&gt; {
        // But what goes here?
    }
}</code></pre>
<p>Cad ba cheart d√∫inn a dh√©anamh nuair at√° an todhcha√≠ f√≥s 'Ar Feitheamh'? Teasta√≠onn bealach √©igin uainn chun iarracht a dh√©anamh ar√≠s, agus ar√≠s, agus ar√≠s eile, go dt√≠ go mbeidh an todhcha√≠ r√©idh faoi dheireadh. I bhfocail eile, teasta√≠onn l√∫b uainn:</p>
<pre><code class="language-rust ignore">let mut page_title_fut = page_title(url);
loop {
    match page_title_fut.poll() {
        Ready(value) =&gt; match page_title {
            Some(title) =&gt; println!("The title for {url} was {title}"),
            None =&gt; println!("{url} had no title"),
        }
        Pending =&gt; {
            // continue
        }
    }
}</code></pre>
<p>D√° mba rud √© gur thiomsaigh Rust √© leis an gc√≥d sin go d√≠reach, √°fach, bheadh ‚Äã‚Äãgach 'await' ina
bhac - d√≠reach os coinne an rud a bh√≠omar ag iarraidh! Ina √°it sin, cinnt√≠onn Rust
go bhf√©adann an l√∫b smacht a thabhairt do rud √©igin ar f√©idir leis obair ar an
todhcha√≠ seo a chur ar sos chun oibri√∫ ar thodhcha√≠ eile agus ansin an ceann seo a sheice√°il ar√≠s n√≠os d√©ana√≠. Mar a
fheicimid, is rith-am neamhshioncr√≥nach √© an rud sin, agus is √© an obair sceidealaithe agus chomhordaithe seo
ceann d√° phr√≠omhphoist.</p>
<p>N√≠os luaithe sa chaibidil, rinneamar cur s√≠os ar fanacht ar <code>rx.recv</code>. Tugann an glao <code>recv</code>
todhcha√≠ ar ais, agus d√©anann fanacht ar an todhcha√≠ pobalbhreith air. Thugamar faoi deara go gcuirfidh rith-am
an todhcha√≠ ar sos go dt√≠ go mbeidh s√© r√©idh le <code>Some(message)</code> n√≥ <code>None</code> nuair a dh√∫nann an
cain√©al. Leis an tuiscint n√≠os doimhne at√° againn ar an tr√©ith <code>Future</code>, agus
go sonrach <code>Future::poll</code>, is f√©idir linn a fheice√°il conas a oibr√≠onn s√© sin. T√° a fhios ag an rith-am nach bhfuil an
todhcha√≠ r√©idh nuair a thugann s√© <code>Poll::Pending</code> ar ais. Os a choinne sin, t√° a fhios ag an am reatha go bhfuil an todhcha√≠ <em>r√©idh</em> agus cuireann s√© chun cinn √© nuair a thugann <code>poll</code> <code>Poll::Ready(Some(sessage))</code> n√≥ <code>Poll::Ready(None)</code> ar ais.</p>
<p>T√° na sonra√≠ beachta maidir le conas a dh√©anann am reatha √© sin lasmuigh de raon feidhme an leabhair seo,
ach is √© an eochair n√° meicnic bhun√∫sacha na dtodhcha√≠ a fheice√°il: d√©anann am reatha <em>polls</em> ar gach
todhcha√≠ a bhfuil s√© freagrach as, ag cur an todhcha√≠ ar ais ina chodladh nuair nach bhfuil s√©
r√©idh f√≥s.</p>
<!-- Old headings. Do not remove or links may break. -->
<p><a id="pinning-and-the-pin-and-unpin-traits"></a></p>
<h3 id="tr√©ithe-pin-agus-unpin"><a class="header" href="#tr√©ithe-pin-agus-unpin">Tr√©ithe <code>Pin</code> agus <code>Unpin</code></a></h3>
<p>Nuair a thugamar isteach an coincheap maidir le bior√°in i Liosta 17-16, th√°inig teachtaireacht earr√°ide an-deacair orainn. Seo an chuid √°bhartha di ar√≠s:</p>
<!-- manual-regeneration
cd listings/ch17-async-await/listing-17-16
cargo build
copy *only* the final `error` block from the errors
-->
<pre><code class="language-text">error[E0277]: `{async block@src/main.rs:10:23: 10:33}` cannot be unpinned
  --&gt; src/main.rs:48:33
   |
48 |         trpl::join_all(futures).await;
   |                                 ^^^^^ the trait `Unpin` is not implemented for `{async block@src/main.rs:10:23: 10:33}`, which is required by `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;: Future`
   |
   = note: consider using the `pin!` macro
           consider using `Box::pin` if you need to access the pinned value outside of the current scope
   = note: required for `Box&lt;{async block@src/main.rs:10:23: 10:33}&gt;` to implement `Future`
note: required by a bound in `futures_util::future::join_all::JoinAll`
  --&gt; file:///home/.cargo/registry/src/index.crates.io-6f17d22bba15001f/futures-util-0.3.30/src/future/join_all.rs:29:8
   |
27 | pub struct JoinAll&lt;F&gt;
   |            ------- required by a bound in this struct
28 | where
29 |     F: Future,
   |        ^^^^^^ required by this bound in `JoinAll`
</code></pre>
<p>Ins√≠onn an teachtaireacht earr√°ide seo d√∫inn n√≠ hamh√°in go gcaithfimid na luachanna a phion√°il ach freisin c√©n f√°th go bhfuil
pion√°il ag teast√°il. Tugann an fheidhm <code>trpl::join_all</code> strucht√∫r ar ais ar a dtugtar
<code>JoinAll</code>. T√° an strucht√∫r sin cine√°lach thar chine√°l <code>F</code>, at√° srianta chun
an tr√©ith <code>Future</code> a chur i bhfeidhm. Tr√≠ thodhcha√≠ a choinne√°il go d√≠reach le <code>await</code>, prion√°lann t√∫ an
todhcha√≠ go hint√≠reach. Sin an f√°th nach g√° d√∫inn <code>pin!</code> a √∫s√°id i ngach √°it ar mhaith linn
todhcha√≠ a choinne√°il.</p>
<p>Mar sin f√©in, n√≠limid ag fanacht go d√≠reach le todhcha√≠ anseo. Ina √°it sin, t√≥gfaimid
todhcha√≠ nua, <code>JoinAll</code>, tr√≠ bhaili√∫ch√°n todhcha√≠ a rith chuig an bhfeidhm <code>join_all</code>. √âil√≠onn an s√≠ni√∫ do <code>join_all</code> go gcuireann na cine√°lacha m√≠reanna sa
bhaili√∫ch√°n an tr√©ith <code>Future</code> i bhfeidhm go l√©ir, agus nach gcuireann <code>Box&lt;T&gt;</code> <code>Future</code> i bhfeidhm ach amh√°in m√° t√° an <code>T</code> a fhilleann s√© ina thodhcha√≠ a chuireann an tr√©ith <code>Unpin</code> i bhfeidhm.</p>
<p>Is m√≥r an m√©id sin le glacadh! Chun tuiscint cheart a fh√°il air, d√©anaimis ini√∫chadh n√≠os doimhne ar an gcaoi a n-oibr√≠onn an tr√©ith ‚ÄòTodhcha√≠‚Äô i nd√°ir√≠re, go h√°irithe maidir le <em>pinning</em>.</p>
<p>F√©ach ar√≠s ar shainmh√≠ni√∫ na tr√©ithe ‚ÄòTodhcha√≠‚Äô:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::pin::Pin;
use std::task::{Context, Poll};

pub trait Future {
    type Output;

    // Required method
    fn poll(self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;Self::Output&gt;;
}
<span class="boring">}</span></code></pre></pre>
<p>Is iad an paraim√©adar <code>cx</code> agus a chine√°l <code>Context</code> an eochair do conas a bh√≠onn a fhios ag rith-am cathain is ceart aon todhcha√≠ ar leith a sheice√°il agus f√≥s leisci√∫il. Ar√≠s, t√° sonra√≠
an chaoi a n-oibr√≠onn s√© sin lasmuigh de raon feidhme na caibidle seo, agus de ghn√°th n√≠ g√° duit ach
smaoineamh air seo agus t√∫ ag scr√≠obh cur i bhfeidhm saincheaptha <code>Future</code>. D√≠reoimid
ina ionad sin ar an gcine√°l do <code>self</code>, mar is √© seo an ch√©ad uair a chonaiceamar
modh ina bhfuil an√≥t√°il cine√°il ag <code>self</code>. Oibr√≠onn an√≥t√°il cine√°il do <code>self</code>
cos√∫il le han√≥t√°lacha cine√°il do pharaim√©adair feidhme eile, ach le dh√° phr√≠omhdhifr√≠ocht:</p>
<ul>
<li>
<p>Ins√≠onn s√© do Rust c√©n cine√°l a chaithfidh <code>self</code> a bheith ann chun go nglaofar ar an modh.</p>
</li>
<li>
<p>N√≠ f√©idir leis a bheith ina chine√°l ar bith. T√° s√© srianta don chine√°l ar a bhfuil an modh curtha i bhfeidhm, tagairt n√≥ pointeoir cliste don chine√°l sin, n√≥ <code>pin</code> ag timfhilleadh
tagairt don chine√°l sin.</p>
</li>
</ul>
<p>Feicfimid tuilleadh ar an gcomhr√©ir seo i <a href="ch18-00-oop.html">Caibidil 18</a><!-- neamhaird -->. Faoi l√°thair,
is leor a fhios go m√°s mian linn todhcha√≠ a v√≥t√°il chun a sheice√°il an bhfuil s√©
<code>Pending</code> n√≥ <code>Ready(Output)</code>, teasta√≠onn tagairt inathraithe fillte le <code>Pin</code> uainn don
chine√°l.</p>
<p>Is fillte√°n √© <code>Pin</code> do chine√°lacha cos√∫il le pointeoir ar n√≥s <code>&amp;</code>, <code>&amp;mut</code>, <code>Box</code>, agus <code>Rc</code>.</p>
<p>(Go teicni√∫il, oibr√≠onn <code>Pin</code> le cine√°lacha a chuireann tr√©ithe <code>Deref</code> n√≥ <code>DerefMut</code> i bhfeidhm,
ach is ionann √© seo go h√©ifeachtach agus oibri√∫ le pointeoir√≠ amh√°in.) N√≠ pointeoir √© f√©in √© <code>Pin</code> agus n√≠l aon iompar aige f√©in mar at√° ag <code>Rc</code> agus
<code>Arc</code> le comhaireamh tagartha; is uirlis amh√°in √© is f√©idir leis an tiomsaitheoir a √∫s√°id chun
srianta a fhorfheidhmi√∫ ar √∫s√°id pointeora.</p>
<p>Ag cuimhneamh go gcuirtear <code>await</code> i bhfeidhm i dt√©arma√≠ glaonna chuig <code>poll</code>, tosa√≠onn s√© ag
m√≠ni√∫ an teachtaireacht earr√°ide a chonaiceamar n√≠os luaithe, ach bh√≠ s√© sin i dt√©arma√≠ <code>Unpin</code>, n√≠
<code>Pin</code>. Mar sin, c√©n bhaint at√° ag <code>Pin</code> le <code>Unpin</code> go d√≠reach, agus c√©n f√°th a gcaithfidh <code>Future</code> <code>self</code> a bheith i gcine√°l <code>Pin</code> chun <code>poll</code> a ghlaoch?</p>
<p>Cuimhnigh √≥ n√≠os luaithe sa chaibidil seo go nd√©antar sraith point√≠ feithimh i bhfuture a thioms√∫ i meais√≠n st√°it, agus cinnt√≠onn an tiomsaitheoir go leanann an meais√≠n st√°it sin gach gn√°thriail de chuid Rust maidir le s√°bh√°ilteacht, lena n-√°ir√≠tear iasacht agus
√∫in√©ireacht. Chun sin a chur ag obair, f√©achann Rust ar na sonra√≠ at√° ag teast√°il idir pointe
faitimh amh√°in agus an ch√©ad phointe feithimh eile n√≥ deireadh an bhloic neamhshioncr√≥naigh. Ansin crutha√≠onn s√© malairt chomhfhreagrach sa mheais√≠n st√°it tiomsaithe. Faigheann gach malairt
an rochtain at√° ag teast√°il uaidh ar na sonra√≠ a √∫s√°idfear sa chuid sin den
ch√≥d foinse, b√≠odh s√© tr√≠ √∫in√©ireacht a ghlacadh ar na sonra√≠ sin n√≥ tr√≠ thagairt inathraithe n√≥
neamhathraithe a fh√°il d√≥.</p>
<p>Go dt√≠ seo, t√° gach rud go bre√°: m√° fhaighimid aon rud m√≠cheart faoin √∫in√©ireacht n√≥ faoi na tagairt√≠ i
bhloc neamhshioncr√≥nach ar leith, inseoidh an seice√°la√≠ iasachta d√∫inn √©. Nuair is mian linn bogadh timpeall
an todhcha√≠ a fhreagra√≠onn don bhloc sin‚Äîmar shampla √© a bhogadh isteach i <code>Vec</code> le cur ar aghaidh chuig
<code>join_all</code>‚Äî√©ir√≠onn ruda√≠ n√≠os casta.</p>
<p>Nuair a bhogaimid todhcha√≠‚Äîcib√© acu tr√≠na bhr√∫ isteach i strucht√∫r sonra√≠ le h√∫s√°id mar
athraitheoir le <code>join_all</code> n√≥ tr√≠na thabhairt ar ais √≥ fheidhm‚Äîcialla√≠onn s√© sin i nd√°ir√≠re
an meais√≠n st√°it a chrutha√≠onn Rust d√∫inn a bhogadh. Agus murab ionann agus an chuid is m√≥ de na cine√°lacha eile i
Rust, is f√©idir leis na todhcha√≠ a chrutha√≠onn Rust do bhloic neamhshioncr√≥nacha tagairt√≠ a bheith acu
d√≥ibh f√©in i r√©ims√≠ aon athraithe ar leith, mar a thaispe√°ntar sa l√©ar√°id shimplithe i bhF√≠or 17-4.</p>
<figure>
<img alt="T√°bla aonchol√∫n, tr√≠ shraith a l√©ir√≠onn todhcha√≠, fut1, a bhfuil luachanna sonra√≠ 0 agus 1 sna ch√©ad d√° shraith agus saighead ag pointe√°il √≥n tr√≠√∫ sraith ar ais go dt√≠ an dara sraith, ag l√©iri√∫ tagairt inmhe√°nach laistigh den todhcha√≠." src="img/trpl17-04.svg" class="center" />
<figcaption>F√≠or 17-4: Cine√°l sonra√≠ f√©in-thagartha.</figcaption>
</figure>
<p>De r√©ir r√©amhshocraithe, √°fach, n√≠l aon r√©ad a bhfuil tagairt d√≥ f√©in s√°bh√°ilte a bhogadh,
toisc go mb√≠onn tagairt√≠ i gc√≥na√≠ ag tagairt don seoladh cuimhne iarbh√≠r de cib√© rud a
dtagra√≠onn siad d√≥ (f√©ach F√≠or 17-5). M√° bhogann t√∫ an strucht√∫r sonra√≠ f√©in, f√°gfar na
tagairt√≠ inmhe√°nacha sin ag pointe√°il chuig an sean-su√≠omh. Mar sin f√©in, t√° an
su√≠omh cuimhne sin neamhbhail√≠ anois. Ar an gc√©ad dul s√≠os, n√≠ dh√©anfar a luach a nuashonr√∫
nuair a dh√©anann t√∫ athruithe ar an strucht√∫r sonra√≠. Ar an gc√©ad dul s√≠os - rud n√≠os t√°bhachta√≠ - t√° an r√≠omhaire saor anois an chuimhne sin a ath√∫s√°id chun cr√≠ocha eile! D‚Äôfh√©adf√°
sonra√≠ nach mbaineann leis ar chor ar bith a l√©amh n√≠os d√©ana√≠.</p>
<figure>
<img alt="Dh√° th√°bla, a l√©ir√≠onn dh√° thodhcha√≠, fut1 agus fut2, agus col√∫n amh√°in agus tr√≠ shraith i ngach ceann acu, rud a l√©ir√≠onn toradh todhcha√≠ a bhogadh amach as fut1 isteach i fut2. T√° an ch√©ad cheann, fut1, liath, le comhartha ceiste i ngach inn√©acs, rud a l√©ir√≠onn cuimhne anaithnid. T√° 0 agus 1 sa ch√©ad agus sa dara sraith ag an dara ceann, fut2, agus saighead ag pointe√°il √≥na thr√≠√∫ sraith ar ais go dt√≠ an dara sraith de fut1, rud a l√©ir√≠onn pointeoir at√° ag tagairt don sean-su√≠omh i gcuimhne an todhcha√≠ sular aistr√≠odh √©." src="img/trpl17-05.svg" class="center" />
<figcaption>F√≠or 17-5: An toradh neamhsh√°bh√°ilte a bhaineann le cine√°l sonra√≠ f√©in-thagartha a bhogadh</figcaption>
</figure>
<p>Go teoirici√∫il, d'fh√©adfadh an tiomsaitheoir Rust iarracht a dh√©anamh gach tagairt do
r√©ad a nuashonr√∫ aon uair a bhogtar √©, ach d'fh√©adfadh s√© sin go leor forchostais feidhm√≠ochta a chur leis,
go h√°irithe m√° t√° g√° le gr√©as√°n ioml√°n tagairt√≠ a nuashonr√∫. D√° bhf√©adfaimis a chinnti√∫ ina ionad sin nach mbogann an strucht√∫r sonra√≠ at√° i gceist <em>sa chuimhne</em>, n√≠ bheadh ‚Äã‚Äãorainn
aon tagairt√≠ a nuashonr√∫. Seo go d√≠reach a √©il√≠onn seice√°la√≠ iasachta Rust:
i gc√≥d s√°bh√°ilte, cuireann s√© cosc ‚Äã‚Äã‚Äã‚Äãort aon mh√≠r a bhogadh a bhfuil tagairt ghn√≠omhach aici
d√≥.</p>
<p>T√≥gann <code>Pin</code> air sin chun an r√°tha√≠ocht chruinn at√° de dh√≠th orainn a thabhairt d√∫inn. Nuair a <em>phion√°naimid</em> luach
tr√≠ phointeoir chuig an luach sin a fhilleadh i <code>Pin</code>, n√≠ f√©idir leis bogadh a thuilleadh. D√° bhr√≠ sin,
m√° t√° <code>Pin&lt;Box&lt;SomeType&gt;&gt;</code> agat, bior√°nn t√∫ an luach <code>SomeType</code> i nd√°ir√≠re, <em>n√≠</em> an pointeoir <code>Box</code>. L√©ir√≠onn F√≠or 17-6 an pr√≥iseas seo.</p>
<figure>
<img alt="Tr√≠ bhosca leagtha amach taobh le taobh. T√° lip√©ad ‚ÄúPin‚Äù ar an gc√©ad cheann, ‚Äúb1‚Äù ar an dara ceann, agus ‚Äúpinned‚Äù ar an tr√≠√∫ ceann. Laistigh de ‚Äúpinned‚Äù t√° t√°bla lip√©adaithe ‚Äúfut‚Äù, le col√∫n amh√°in; seasann s√© do thodhcha√≠ le cealla do gach cuid den strucht√∫r sonra√≠. T√° an luach ‚Äú0‚Äù ar a ch√©ad chill, t√° saighead ag teacht amach as an dara cill agus ag pointe√°il chuig an gceathr√∫ cill agus an chill dheireanach, a bhfuil an luach ‚Äú1‚Äù inti, agus t√° l√≠nte str√≥icthe agus eilipsis ar an tr√≠√∫ cill chun a l√©iri√∫ go bhf√©adfadh codanna eile a bheith sa strucht√∫r sonra√≠. Le ch√©ile, seasann an t√°bla ‚Äúfut‚Äù do thodhcha√≠ at√° f√©in-thagartha. F√°gann saighead an bosca lip√©adaithe ‚ÄúPin‚Äù, t√©ann s√≠ tr√≠d an mbosca lip√©adaithe ‚Äúb1‚Äù agus cr√≠ochna√≠onn s√≠ taobh istigh den bhosca ‚Äúpinned‚Äù ag an t√°bla ‚Äúfut‚Äù." src="img/trpl17-06.svg" class="center" />
<figcaption>F√≠or 17-6: Ag bior√°n√°il `Box` a dh√≠r√≠onn ar chine√°l todhcha√≠ f√©in-thagartha.</figcaption>
</figure>
<p>D√©anta na f√≠rinne, is f√©idir leis an pointeoir <code>Box</code> bogadh timpeall go saor f√≥s. Cuimhnigh: is c√∫ram d√∫inn a chinnti√∫ go bhfanann na sonra√≠ at√° √° dtagairt sa deireadh ina n-√°it. M√° bhogann pointeoir
timpeall, <em>ach go bhfuil na sonra√≠ a bhfuil s√© ag pointe√°il orthu san √°it ch√©anna</em>, mar at√° i bhF√≠or
17-7, n√≠l aon fhadhb ann. Mar chleachtadh neamhsple√°ch, f√©ach ar na doicim√©id
do na cine√°lacha chomh maith leis an mod√∫l <code>std::pin</code> agus d√©an iarracht a fh√°il amach conas a dh√©anf√°
√© seo le <code>Pin</code> ag timfhilleadh <code>Box</code>.) Is √© an rud is t√°bhachta√≠ n√° nach f√©idir leis an gcine√°l f√©in-thagartha
f√©in bogadh, toisc go bhfuil s√© f√≥s bior√°ilte.</p>
<figure>
<img alt="Ceithre bhosca leagtha amach i dtr√≠ chol√∫n garbha, mar an gc√©anna leis an l√©ar√°id roimhe seo le hathr√∫ ar an dara col√∫n. Anois t√° dh√° bhosca sa dara col√∫n, lip√©adaithe ‚Äúb1‚Äù agus ‚Äúb2‚Äù, t√° ‚Äúb1‚Äù liath, agus t√©ann an tsaighead √≥ ‚ÄúPin‚Äù tr√≠ ‚Äúb2‚Äù in ionad ‚Äúb1‚Äù, rud a l√©ir√≠onn gur bhog an pointeoir √≥ ‚Äúb1‚Äù go ‚Äúb2‚Äù, ach n√≠or bhog na sonra√≠ i ‚Äúpinned‚Äù." src="img/trpl17-07.svg" class="center" />
<figcaption>F√≠or 17-7: Bogadh ‚ÄòBosca‚Äô a dh√≠r√≠onn ar chine√°l todhcha√≠ f√©in-thagartha.</figcaption>
</figure>
<p>Mar sin f√©in, t√° s√© s√°bh√°ilte bogadh timpeall an chuid is m√≥ de na cine√°lacha, fi√∫ m√° tharla√≠onn siad a bheith
taobh thiar de phointeoir ‚ÄòPin‚Äô. N√≠ g√° d√∫inn smaoineamh ar phion√°il ach nuair a bh√≠onn
tagairt√≠ inmhe√°nacha ag m√≠reanna. T√° luachanna pr√≠omh√∫la ar n√≥s uimhreacha agus Booleans s√°bh√°ilte
√≥s rud √© nach bhfuil aon tagairt√≠ inmhe√°nacha acu ar nd√≥igh, mar sin t√° siad
s√°bh√°ilte ar nd√≥igh. N√≠ bh√≠onn formh√≥r na gcine√°lacha a n-oibr√≠onn t√∫ leo de ghn√°th i Rust s√°bh√°ilte ach an oiread. Is f√©idir leat bogadh timpeall
<code>Vec</code>, mar shampla, gan a bheith buartha. Ag smaoineamh ar an m√©id at√° feicthe againn go dt√≠ seo amh√°in, m√°
t√° <code>Pin&lt;Vec&lt;String&gt;&gt;</code> agat, bheadh ‚Äã‚Äã‚Äã‚Äãort gach rud a dh√©anamh tr√≠ na APIanna s√°bh√°ilte ach
srianta a shol√°thra√≠onn <code>Pin</code>, c√© go bhfuil <code>Vec&lt;String&gt;</code> s√°bh√°ilte i gc√≥na√≠
le bogadh mura bhfuil aon tagairt√≠ eile ann d√≥. Teasta√≠onn bealach uainn chun a r√° leis an
tiomsaitheoir go bhfuil s√© ceart go leor m√≠reanna a bhogadh timpeall i gc√°sanna mar seo - agus sin
an √°it a dtagann <code>Unpin</code> i bhfeidhm.</p>
<p>Is tr√©ith marc√≥ra √© <code>Unpin</code>, cos√∫il leis na tr√©ithe <code>Send</code> agus <code>Sync</code> a chonaiceamar i
gCaibidil 16, agus mar sin n√≠l aon fheidhmi√∫lacht aige f√©in. N√≠l tr√©ithe marc√≥ra ann ach chun a chur in i√∫l don tiomsaitheoir go bhfuil s√© s√°bh√°ilte an cine√°l a √∫s√°id a chuireann tr√©ith √°irithe i bhfeidhm i gcomhth√©acs ar leith. Cuireann <code>Unpin</code> in i√∫l don tiomsaitheoir nach g√° do chine√°l √°irithe aon r√°tha√≠ochta√≠ a choinne√°il faoi cib√© an f√©idir an luach at√° i gceist a bhogadh go s√°bh√°ilte.</p>
<!--
Is √© an aidhm at√° leis an `<code>` inl√≠ne sa ch√©ad bhloc eile n√° an `<em>` inl√≠ne a chead√∫ istigh ann,
ag teacht leis an m√©id a dh√©anann NoStarch √≥ thaobh st√≠l de, agus ag b√©imni√∫ laistigh den t√©acs anseo
gur rud √©igin difri√∫il √© √≥ ghn√°thchine√°l.
-->
<p>D√≠reach mar at√° le <code>Send</code> agus <code>Sync</code>, cuireann an tiomsaitheoir <code>Unpin</code> i bhfeidhm go huathoibr√≠och
do gach cine√°l ina bhf√©adann s√© a chruth√∫ go bhfuil s√© s√°bh√°ilte. C√°s speisialta, ar√≠s cos√∫il le
<code>Send</code> agus <code>Sync</code>, n√° nuair nach gcuirtear <code>Unpin</code> i bhfeidhm le haghaidh cine√°l. Is √© an
n√≥ta√≠ocht don seo n√° <code>impl !Unpin do <em>SomeType</em></code>, √°it a bhfuil
<code><em>SomeType</em></code> ina ainm ar chine√°l a <em>n√≠ m√≥r</em> d√≥ na r√°tha√≠ochta√≠ sin a choinne√°il sl√°n
a bheith s√°bh√°ilte aon uair a √∫s√°idtear pointeoir chuig an gcine√°l sin i <code>Pin</code>.</p>
<p>I bhfocail eile, t√° dh√° rud le coinne√°il i gcuimhne faoin ngaol
idir <code>Pin</code> agus <code>Unpin</code>. Ar dt√∫s, is √© <code>Unpin</code> an c√°s ‚Äúgn√°th‚Äù, agus is √© <code>!Unpin</code> an c√°s speisialta. Ar an dara dul s√≠os, n√≠l aon t√°bhacht ach nuair a bh√≠onn pointeoir bior√°ilte √° √∫s√°id agat don chine√°l sin cos√∫il le <code>Pin&lt;&amp;mut
<em>SomeType</em>&gt;</code>.</p>
<p>Chun sin a dh√©anamh soil√©ir, smaoinigh ar <code>String</code>: t√° fad aige agus na carachtair Unicode
a dh√©anann suas √©. Is f√©idir linn <code>String</code> a fhilleadh i <code>Pin</code>, mar a fheictear i bhF√≠or
17-8. Mar sin f√©in, cuireann <code>String</code> <code>Unpin</code> i bhfeidhm go huathoibr√≠och, mar a dh√©anann formh√≥r na gcine√°lacha eile
i Rust.</p>
<figure>
<img alt="Sreabhadh oibre comhthr√°thach" src="img/trpl17-08.svg" class="center" />
<figcaption>F√≠or 17-8: `String` a phion√°il; L√©ir√≠onn an l√≠ne phoncaithe go gcuireann an `String` an tr√©ith `Unpin` i bhfeidhm, agus d√° bhr√≠ sin nach bhfuil s√© bior√°ilte.</figcaption>
</figure>
<p>Mar thoradh air sin, is f√©idir linn ruda√≠ a dh√©anamh a bheadh ‚Äã‚Äã‚Äã‚Äãm√≠dhleathach d√° gcuirfeadh <code>String</code> <code>!Unpin</code> i bhfeidhm ina ionad, amhail teaghr√°n amh√°in a athshol√°thar le ceann eile ag an su√≠omh c√©anna sa chuimhne mar at√° i bhF√≠or 17-9. N√≠ sh√°ra√≠onn s√© seo an conradh <code>Pin</code>,
toisc nach bhfuil aon tagairt√≠ inmhe√°nacha ag <code>String</code> a fh√°gann go bhfuil s√© neamhsh√°bh√°ilte bogadh timpeall!
Sin √© an f√°th go d√≠reach a gcuireann s√© <code>Unpin</code> i bhfeidhm seachas <code>!Unpin</code>.</p>
<figure>
<img alt="Sreabhadh oibre comhuaineach" src="img/trpl17-09.svg" class="center" />
<figcaption>F√≠or 17-9: An `String` √° athshol√°thar le `String` at√° go hioml√°n difri√∫il sa chuimhne.</figcaption>
</figure>
<p>Anois t√° a fhios againn go leor chun na hearr√°id√≠ a tuairisc√≠odh don ghlao <code>join_all</code> sin a thuiscint
√≥ ch√∫l i Liosta 17-17. Ar dt√∫s rinneamar iarracht na todhcha√≠ a th√°irgtear ag
bloic async a bhogadh isteach i <code>Vec&lt;Box&lt;dyn Future&lt;Output = ()&gt;&gt;&gt;</code>, ach mar a chonaiceamar,
d‚Äôfh√©adfadh tagairt√≠ inmhe√°nacha a bheith ag na todhcha√≠ sin, mar sin n√≠ chuireann siad <code>Unpin</code> i bhfeidhm.
N√≠ m√≥r iad a phion√°il, agus ansin is f√©idir linn an cine√°l <code>Pin</code> a chur isteach sa <code>Vec</code>,
muin√≠neach nach mbogfar na sonra√≠ bun√∫sacha sna todhcha√≠.</p>
<p>T√° <code>Pin</code> agus <code>Unpin</code> t√°bhachtach den chuid is m√≥ chun leabharlanna √≠ochtaracha a th√≥g√°il, n√≥
nuair at√° t√∫ ag t√≥g√°il rith-ama f√©in, seachas le haghaidh c√≥d Rust laeth√∫il.
Nuair a fheiceann t√∫ na tr√©ithe seo i dteachtaireachta√≠ earr√°ide, √°fach, beidh tuiscint n√≠os fearr agat anois ar conas do ch√≥d a shocr√∫!</p>
<blockquote>
<p>N√≥ta: Leis an teaglaim seo de <code>Pin</code> agus <code>Unpin</code> is f√©idir rang ioml√°n cine√°lacha casta a chur i bhfeidhm go s√°bh√°ilte i Rust a bheadh ‚Äã‚Äãd√∫shl√°nach murach sin
toisc go bhfuil siad f√©in-thagartha. Is minic a fheictear cine√°lacha a √©il√≠onn <code>Pin</code> i Rust neamhshioncr√≥nach inniu, ach √≥ am go ham, d'fh√©adf√° iad a fheice√°il
i gcomhth√©acsanna eile freisin.</p>
</blockquote>
<blockquote>
<p>T√° na sonra√≠ maidir le conas a oibr√≠onn <code>Pin</code> agus <code>Unpin</code>, agus na rialacha a bhfuil orthu
a choinne√°il, cl√∫daithe go fairsing sa doicim√©adacht API do <code>std::pin</code>, mar sin
m√°s sp√©is leat tuilleadh a fhoghlaim, is √°it iontach √© sin le tos√∫. &gt;
M√°s mian leat tuiscint n√≠os mine a fh√°il ar an gcaoi a n-oibr√≠onn ruda√≠ faoin gcochall,
f√©ach ar Chaibidl√≠ [2][faoi chochall] agus [4][bior√°in] de <a href="https://rust-lang.github.io/async-book/"><em>Asynchronous
Programming in Rust</em></a>.</p>
</blockquote>
<h3 id="tr√©ith-an-stream"><a class="header" href="#tr√©ith-an-stream">Tr√©ith an <code>Stream</code></a></h3>
<p>Anois go bhfuil tuiscint n√≠os doimhne agat ar na tr√©ithe <code>Future</code>, <code>Pin</code>, agus <code>Unpin</code>, is f√©idir linn √°r n-aird a dh√≠ri√∫ ar an tr√©ith <code>Stream</code>. Mar a d'fhoghlaim t√∫ n√≠os luaithe sa
chaibidil, t√° sruthanna cos√∫il le hathraitheoir√≠ neamhshioncr√≥nacha. Murab ionann agus <code>Iterator</code> agus
<code>Future</code>, √°fach, n√≠l aon sainmh√≠ni√∫ ar <code>Stream</code> sa leabharlann chaighde√°nach tr√°th scr√≠ofa na tr√©imhse seo,
ach t√° <em>sainmh√≠ni√∫</em> an-choitianta ann √≥n gcliathbhosca <code>futures</code> a √∫s√°idtear
ar fud an √©iceach√≥rais.</p>
<p>D√©anaimis athbhreithni√∫ ar shainmh√≠nithe na dtr√©ithe <code>Iterator</code> agus <code>Future</code> sula
mbreathna√≠mid ar an gcaoi a bhf√©adfadh tr√©ith <code>Stream</code> iad a chumasc le ch√©ile. √ì <code>Iterator</code>, t√°
an smaoineamh againn ar sheicheamh: sol√°thra√≠onn a mhodh <code>next</code> <code>Option&lt;Self::Item&gt;</code>.
√ì <code>Future</code>, t√° an smaoineamh againn ar ullmhacht le himeacht ama: sol√°thra√≠onn a mhodh <code>poll</code> <code>Poll&lt;Self::Output&gt;</code>. Chun sraith m√≠reanna a l√©iri√∫ a bh√≠onn r√©idh le himeacht ama, sainmh√≠n√≠mid tr√©ith <code>Stream</code> a chuireann na gn√©ithe sin le ch√©ile:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::pin::Pin;
use std::task::{Context, Poll};

trait Stream {
    type Item;

    fn poll_next(
        self: Pin&lt;&amp;mut Self&gt;,
        cx: &amp;mut Context&lt;'_&gt;
    ) -&gt; Poll&lt;Option&lt;Self::Item&gt;&gt;;
}
<span class="boring">}</span></code></pre></pre>
<p>Sainmh√≠n√≠onn an tr√©ith <code>Stream</code> cine√°l gaolmhar ar a dtugtar <code>M√≠r</code> don chine√°l
m√≠reanna a th√°irgeann an sruth. T√° s√© seo cos√∫il le <code>Iterator</code>, √°it a bhf√©adfadh
nialas m√≠reanna a bheith ann go leor, agus murab ionann agus <code>Future</code>, √°it a mb√≠onn <code>Output</code> aonair i gc√≥na√≠, fi√∫ m√°s √© an cine√°l aonaid <code>()</code> √©.</p>
<p>Sainmh√≠n√≠onn <code>Stream</code> modh freisin chun na m√≠reanna sin a fh√°il. Tugtar <code>poll_next</code> air, chun
a shoil√©iri√∫ go nd√©anann s√© pobalbhreith ar an mbealach c√©anna a dh√©anann <code>Future::poll</code> agus go dt√°irgeann s√©
seicheamh m√≠reanna ar an mbealach c√©anna a dh√©anann <code>Iterator::next</code>. Comhcheangla√≠onn a chine√°l fillte <code>Poll</code> le <code>Rogha</code>. Is √© <code>Poll</code> an cine√°l seachtrach, mar go gcaithfear a sheice√°il le haghaidh ullmhachta, d√≠reach mar a dh√©anann todhcha√≠. Is √© <code>Rogha</code> an cine√°l inmhe√°nach,
mar go gcaithfidh s√© comhartha a thabhairt an bhfuil n√≠os m√≥ teachtaireachta√≠ ann, d√≠reach mar a dh√©anann athr√°iteoir.</p>
<p>Is d√≥cha go mbeidh rud √©igin an-chos√∫il leis an sainmh√≠ni√∫ seo mar chuid de
leabharlann chaighde√°nach Rust. Idir an d√° linn, is cuid de threalamh fhormh√≥r na rith-amanna √©, mar sin
is f√©idir leat brath air, agus ba cheart go mbeadh feidhm ag gach rud a chl√∫d√≥imid ina dhiaidh seo go ginear√°lta!</p>
<p>Sa sampla a chonaiceamar sa chuid ar shruth√∫, √°fach, n√≠or √∫s√°ideadh
<code>poll_next</code> <em>n√≥</em> <code>Stream</code>, ach ina ionad sin √∫s√°ideadh <code>next</code> agus <code>StreamExt</code>. <em>D'fh√©adfaimis</em>
oibri√∫ go d√≠reach i dt√©arma√≠ API <code>poll_next</code> tr√≠ √°r meais√≠n√≠ st√°it <code>Stream</code> f√©in a scr√≠obh de l√°imh, ar nd√≥igh, d√≠reach mar a <em>d'fh√©adfaimis</em> oibri√∫ le todhcha√≠ go d√≠reach tr√≠na modh <code>poll</code>. T√° √∫s√°id <code>await</code> i bhfad n√≠os deise, √°fach, agus sol√°thra√≠onn an tr√©ith <code>StreamExt</code> an modh <code>next</code> ionas gur f√©idir linn √© sin a dh√©anamh:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">use std::pin::Pin;
</span><span class="boring">use std::task::{Context, Poll};
</span><span class="boring">
</span><span class="boring">trait Stream {
</span><span class="boring">    type Item;
</span><span class="boring">    fn poll_next(
</span><span class="boring">        self: Pin&lt;&amp;mut Self&gt;,
</span><span class="boring">        cx: &amp;mut Context&lt;'_&gt;,
</span><span class="boring">    ) -&gt; Poll&lt;Option&lt;Self::Item&gt;&gt;;
</span><span class="boring">}
</span><span class="boring">
</span>trait StreamExt: Stream {
    async fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;
    where
        Self: Unpin;

    // other methods...
}
<span class="boring">}</span></code></pre></pre>
<!--
LE DO DH√âANAMH: nuashonraigh √© seo m√°/nuair a nuashonra√≠onn tokio/etc. a MSRV agus aistrigh go feidhmeanna neamhshioncr√≥nacha a √∫s√°id
i dtr√©ithe, √≥s rud √© gurb √© an easpa sin an ch√∫is nach bhfuil s√© seo acu f√≥s.
-->
<blockquote>
<p>N√≥ta: T√° cuma beag√°n difri√∫il ar an sainmh√≠ni√∫ iarbh√≠r a d'√∫s√°ideamar n√≠os luaithe sa chaibidil n√° seo, toisc go dtaca√≠onn s√© le leaganacha de Rust n√°r thacaigh
le feidhmeanna neamhshioncr√≥nacha a √∫s√°id i dtr√©ithe f√≥s. Mar thoradh air sin, t√° cuma mar seo air:</p>
<pre><code class="language-rust ignore">fn next(&amp;mut self) -&gt; Next&lt;'_, Self&gt; where Self: Unpin;</code></pre>
<p>Is <code>struct</code> an cine√°l <code>Next</code> sin a chuireann <code>Future</code> i bhfeidhm agus a ligeann d√∫inn saolr√© an tagartha do <code>self</code> a ainmni√∫
le <code>Next&lt;'_, Self&gt;</code>, ionas gur f√©idir le <code>await</code>
oibri√∫ leis an modh seo.</p>
</blockquote>
<p>Is √© an tr√©ith <code>StreamExt</code> baile na modhanna suimi√∫la go l√©ir at√° ar f√°il
le h√∫s√°id le sruthanna freisin. Cuirtear <code>StreamExt</code> i bhfeidhm go huathoibr√≠och do gach cine√°l
a chuireann <code>Stream</code> i bhfeidhm, ach sainmh√≠n√≠tear na tr√©ithe seo ar leithligh chun go mbeidh an pobal in ann athr√° a dh√©anamh ar APIanna √°ise gan cur isteach ar an
tr√©ith bhun√∫sach.</p>
<p>Sa leagan de <code>StreamExt</code> a √∫s√°idtear sa chliath√°n <code>trpl</code>, n√≠ hamh√°in go sainmh√≠n√≠onn an tr√©ith an modh <code>next</code> ach sol√°thra√≠onn s√≠ cur i bhfeidhm r√©amhshocraithe de <code>next</code>
a l√°imhse√°lann sonra√≠ glao <code>Stream::poll_next</code> i gceart. Cialla√≠onn s√© seo
fi√∫ nuair is g√° duit do chine√°l sonra√≠ sruth√∫ f√©in a scr√≠obh, nach g√° duit ach <code>Stream</code> a chur i bhfeidhm, agus ansin is f√©idir le duine ar bith a √∫s√°ideann do chine√°l sonra√≠ <code>StreamExt</code> agus a mhodhanna a √∫s√°id leis go huathoibr√≠och.</p>
<p>Sin a bhfuilimid chun a chl√∫dach le haghaidh na sonra√≠ n√≠os √≠sle ar na tr√©ithe seo. Chun
mar fhocal scoir, d√©anaimis machnamh ar an gcaoi a n-oireann todhcha√≠ (lena n-√°ir√≠tear sruthanna), tascanna, agus sn√°itheanna
le ch√©ile!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ag-cur-gach-rud-le-ch√©ile-todhcha√≠-tascanna-agus-sn√°itheanna"><a class="header" href="#ag-cur-gach-rud-le-ch√©ile-todhcha√≠-tascanna-agus-sn√°itheanna">Ag Cur Gach Rud le Ch√©ile: Todhcha√≠, Tascanna, agus Sn√°itheanna</a></h2>
<p>Mar a chonaiceamar i <a href="http://localhost:3000/ch16-00-concurrency.html">Caibidil 16</a><!-- neamhaird -->, cuireann sn√°itheanna cur chuige amh√°in ar f√°il maidir le
comhthr√°thacht. Chonaiceamar cur chuige eile sa chaibidil seo: √∫s√°id a bhaint as neamhshioncr√≥nach le
todhcha√≠ agus sruthanna. M√°s mian leat a fh√°il amach cathain is ceart modh a roghn√∫ thar an gceann eile,
is √© an freagra: braitheann s√©! Agus i go leor c√°sanna, n√≠ sn√°itheanna <em>n√≥</em> neamhshioncr√≥nach an rogha ach sn√°itheanna <em>agus</em> neamhshioncr√≥nach.</p>
<p>T√° samhlacha comhthr√°thachta bunaithe ar shn√°itheanna √° sol√°thar ag go leor c√≥ras oibri√∫ch√°in le
blianta fada anois, agus taca√≠onn go leor teangacha r√≠omhchl√°r√∫ch√°in leo d√° bharr. Mar sin f√©in,
n√≠l na samhlacha seo gan a gcomhbhabht√°lacha. Ar go leor c√≥ras oibri√∫ch√°in,
√∫s√°ideann siad go leor cuimhne do gach sn√°ithe, agus tagann roinnt forchostais leo le haghaidh
tos√∫ agus m√∫chadh. N√≠ rogha iad sn√°itheanna ach amh√°in nuair a thaca√≠onn do
ch√≥ras oibri√∫ch√°in agus do chrua-earra√≠ leo. Murab ionann agus r√≠omhair√≠ deisce agus soghluaiste pr√≠omhshrutha, n√≠l aon ch√≥ras oibri√∫ch√°in ag roinnt c√≥ras leabaithe ar chor ar bith, mar sin n√≠l aon sn√°itheanna acu ach an oiread.</p>
<p>Sol√°thra√≠onn an tsamhail asyncr√≥nach sraith chomhbhabht√°lacha dhifri√∫il - agus comhl√°ntach sa deireadh. Sa tsamhail asyncr√≥nach, n√≠ theasta√≠onn a sn√°itheanna f√©in √≥ oibr√≠ochta√≠ comhthr√°thacha. Ina √°it sin, is f√©idir leo rith ar thascanna, mar a d'√∫s√°ideamar <code>trpl::spawn_task</code> chun
obair a thos√∫ √≥ fheidhm shioncr√≥nach sa chuid sruthanna. T√° tasc
cos√∫il le sn√°ithe, ach in ionad √© a bhainisti√∫ ag an gc√≥ras oibri√∫ch√°in, d√©antar √© a
bhainisti√∫ ag c√≥d leibh√©al na leabharlainne: an t-am rith.</p>
<p>Sa chuid roimhe seo, chonaiceamar gur f√©idir linn sruth a th√≥g√°il tr√≠ chain√©al asyncr√≥nach
a √∫s√°id agus tasc asyncr√≥nach a sceitheadh ‚Äã‚Äã‚Äã‚Äãa d'fh√©adfaimis glaoch air √≥ ch√≥d sioncr√≥nach. Is f√©idir linn
an rud c√©anna a dh√©anamh le sn√°ithe. I Liost√°il 17-40, d'√∫s√°ideamar
<code>trpl::spawn_task</code> agus <code>trpl::sleep</code>. I Liosta 17-41, cuirimid na hAPIanna <code>thread::spawn</code> agus <code>thread::sleep</code> √≥n leabharlann chaighde√°nach san fheidhm <code>get_intervals</code> ina n-√°it.</p>
<Listing number="17-41" caption="Using the `std::thread` APIs instead of the async `trpl` APIs for the `get_intervals` function" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // required for mdbook test
</span><span class="boring">
</span><span class="boring">use std::{pin::pin, thread, time::Duration};
</span><span class="boring">
</span><span class="boring">use trpl::{ReceiverStream, Stream, StreamExt};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    trpl::run(async {
</span><span class="boring">        let messages = get_messages().timeout(Duration::from_millis(200));
</span><span class="boring">        let intervals = get_intervals()
</span><span class="boring">            .map(|count| format!("Interval #{count}"))
</span><span class="boring">            .throttle(Duration::from_millis(500))
</span><span class="boring">            .timeout(Duration::from_secs(10));
</span><span class="boring">        let merged = messages.merge(intervals).take(20);
</span><span class="boring">        let mut stream = pin!(merged);
</span><span class="boring">
</span><span class="boring">        while let Some(result) = stream.next().await {
</span><span class="boring">            match result {
</span><span class="boring">                Ok(item) =&gt; println!("{item}"),
</span><span class="boring">                Err(reason) =&gt; eprintln!("Problem: {reason:?}"),
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn get_messages() -&gt; impl Stream&lt;Item = String&gt; {
</span><span class="boring">    let (tx, rx) = trpl::channel();
</span><span class="boring">
</span><span class="boring">    trpl::spawn_task(async move {
</span><span class="boring">        let messages = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j"];
</span><span class="boring">
</span><span class="boring">        for (index, message) in messages.into_iter().enumerate() {
</span><span class="boring">            let time_to_sleep = if index % 2 == 0 { 100 } else { 300 };
</span><span class="boring">            trpl::sleep(Duration::from_millis(time_to_sleep)).await;
</span><span class="boring">
</span><span class="boring">            if let Err(send_error) = tx.send(format!("Message: '{message}'")) {
</span><span class="boring">                eprintln!("Cannot send message '{message}': {send_error}");
</span><span class="boring">                break;
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    ReceiverStream::new(rx)
</span><span class="boring">}
</span><span class="boring">
</span>fn get_intervals() -&gt; impl Stream&lt;Item = u32&gt; {
    let (tx, rx) = trpl::channel();

    // This is *not* `trpl::spawn` but `std::thread::spawn`!
    thread::spawn(move || {
        let mut count = 0;
        loop {
            // Likewise, this is *not* `trpl::sleep` but `std::thread::sleep`!
            thread::sleep(Duration::from_millis(1));
            count += 1;

            if let Err(send_error) = tx.send(count) {
                eprintln!("Could not send interval {count}: {send_error}");
                break;
            };
        }
    });

    ReceiverStream::new(rx)
}</code></pre></pre>
</Listing>
<p>M√° ritheann t√∫ an c√≥d seo, t√° an t-aschur mar an gc√©anna le haschur Liosta 17-40. Agus
tabhair faoi deara c√© chomh beag is at√° na hathruithe anseo √≥ pheirspict√≠ocht an ch√≥id ghlaoigh. Ina theannta sin, c√© gur ghin ceann d√°r bhfeidhmeanna tasc neamhshioncr√≥nach ar an am rith agus
gur ghin an ceann eile sn√°ithe OS, n√≠or chuir na difr√≠ochta√≠ isteach ar na sruthanna a lean as.</p>
<p>In ainneoin a gcos√∫lachta√≠, iompra√≠onn an d√° chur chuige seo go han-difri√∫il,
c√© go mb‚Äôfh√©idir go mbeadh s√© deacair orainn √© a thomhas sa sampla an-simpl√≠ seo. D‚Äôfh√©adfaimis
na milli√∫in tascanna neamhshioncr√≥nacha a ghini√∫int ar aon r√≠omhaire pearsanta nua-aimseartha. D√° nd√©anfaimis iarracht
√© sin a dh√©anamh le sn√°itheanna, rithfeadh an chuimhne asainn go litri√∫il!</p>
<p>Mar sin f√©in, t√° c√∫is ann go bhfuil na APIanna seo chomh cos√∫il sin. Feidhm√≠onn sn√°itheanna mar theorainn
do shraitheanna d‚Äôoibr√≠ochta√≠ sioncr√≥nacha; is f√©idir comhthr√°thacht a bheith ann <em>idir</em> sn√°itheanna.
Feidhm√≠onn tascanna mar theorainn do shraitheanna d‚Äôoibr√≠ochta√≠ <em>neamhshioncr√≥nacha</em>; is f√©idir comhthr√°thacht a bheith ann
idir_ agus <em>laistigh</em> de thascanna, toisc gur f√©idir le tasc aistri√∫ idir
todhcha√≠ ina chorp. Ar deireadh, is iad todhcha√≠ochta√≠ an t-aonad comhthr√°thachta is mine de chuid Rust, agus f√©adfaidh gach todhcha√≠ crann de thodhcha√≠ eile a l√©iri√∫. Bainist√≠onn an t-am rithe‚Äîgo sonrach, a fhorghn√≠omhaitheoir‚Äîtascanna, agus bainist√≠onn tascanna todhcha√≠ochta√≠. Sa chomhth√©acs sin, t√° tascanna cos√∫il le sn√°itheanna √©adroma, bainistithe ag am rithe le
cumas breise a thagann √≥ bheith √° mbainisti√∫ ag am rithe seachas ag an
gc√≥ras oibri√∫ch√°in.</p>
<p>N√≠ chialla√≠onn s√© seo go bhfuil tascanna neamhshioncr√≥nacha i gc√≥na√≠ n√≠os fearr n√° sn√°itheanna (n√≥ a mhalairt). Is samhail r√≠omhchl√°r√∫ch√°in n√≠os simpl√≠ √© comhthr√°thacht le sn√°itheanna ar bheala√≠ √°irithe
n√° comhthr√°thacht le <code>async</code>. Is f√©idir gur neart n√≥ laige √© sin. T√° sn√°itheanna
rud beag "tine agus dearmad"; n√≠l aon choibh√©is dh√∫chasach acu le todhcha√≠, mar sin ritheann siad go dt√≠ go mbeidh siad cr√≠ochnaithe gan cur isteach orthu ach amh√°in ag an
gc√≥ras oibri√∫ch√°in f√©in. Is √© sin le r√°, n√≠l aon taca√≠ocht ionsuite acu do <em>comthr√°thacht intratask</em> ar an mbealach a dh√©anann todhcha√≠ochta√≠. N√≠l aon mheicn√≠ochta√≠ ag sn√°itheanna i Rust le haghaidh
cealaithe ach an oiread‚Äî√°bhar n√°r phl√©amar go sonrach sa chaibidil seo ach a
tugtar le fios leis an bhf√≠ric gur glanadh a staid i gceart aon uair a chr√≠ochna√≠omar todhcha√≠.</p>
<p>D√©anann na teorainneacha seo n√≠os deacra sn√°itheanna a chumadh n√° todhcha√≠ freisin. T√° s√© i bhfad
n√≠os deacra, mar shampla, sn√°itheanna a √∫s√°id chun c√∫nt√≥ir√≠ a th√≥g√°il ar n√≥s na
modhanna <code>timeout</code> agus <code>throttle</code> a th√≥gamar n√≠os luaithe sa chaibidil seo. Cialla√≠onn an fh√≠ric go bhfuil
strucht√∫ir sonra√≠ n√≠os saibhre i dtodhcha√≠ gur f√©idir iad a chumadh le ch√©ile n√≠os
n√°d√∫rtha, mar a chonaiceamar.</p>
<p>Tugann tascanna, mar sin, <em>smacht</em> breise_ d√∫inn ar thodhcha√≠, rud a ligeann d√∫inn a roghn√∫
c√° h√°it agus conas iad a ghr√∫p√°il. Agus is cos√∫il go n-oibr√≠onn sn√°itheanna agus tascanna go minic
go han-mhaith le ch√©ile, toisc gur f√©idir tascanna (ar a laghad i roinnt amanna reatha) a bhogadh
idir sn√°itheanna. D√©anta na f√≠rinne, faoin gcochall, t√° an t-am reatha at√°
√° √∫s√°id againn‚Äîlena n-√°ir√≠tear na feidhmeanna <code>spawn_blocking</code> agus <code>spawn_task</code>‚Äîilshn√°ithe√°ilte
de r√©ir r√©amhshocraithe! √ös√°ideann go leor rith-amanna cur chuige ar a dtugtar <em>goid oibre</em> chun
tascanna a bhogadh go tr√©dhearcach idir sn√°itheanna, bunaithe ar an gcaoi a bhfuil na sn√°itheanna
√° n-√∫s√°id faoi l√°thair, chun feidhm√≠ocht fhorioml√°n an ch√≥rais a fheabhs√∫. √âil√≠onn an
cur chuige sin sn√°itheanna <em>agus</em> tascanna i nd√°ir√≠re, agus d√° bhr√≠ sin todhcha√≠.</p>
<p>Nuair at√° t√∫ ag smaoineamh ar an modh le h√∫s√°id cathain, smaoinigh ar na rialacha seo:</p>
<ul>
<li>M√°s <em>an-chomhthreomhar</em> an obair, amhail pr√≥ise√°il a dh√©anamh ar ghr√∫pa sonra√≠ ina bhf√©adfar gach cuid a phr√≥ise√°il ar leithligh, is rogha n√≠os fearr iad sn√°itheanna.</li>
<li>M√°s <em>an-chomhthr√°thach</em> an obair, amhail l√°imhse√°il teachtaireachta√≠ √≥ ghr√∫pa foins√≠ √©ags√∫la a d'fh√©adfadh teacht isteach ag eatraimh √©ags√∫la n√≥ r√°ta√≠ √©ags√∫la,
is rogha n√≠os fearr √© neamhshioncr√≥nach.</li>
</ul>
<p>Agus m√° theasta√≠onn comhthreomharacht agus comhthr√°thacht uait, n√≠ g√° duit rogha a dh√©anamh
idir sn√°itheanna agus neamhshioncr√≥nach. Is f√©idir leat iad a √∫s√°id le ch√©ile go saor, ag ligean do gach duine
an r√≥l is fearr a imirt. Mar shampla, taispe√°nann Liost√°il 17-42 sampla s√°ch coitianta
den chine√°l seo measc√°in i gc√≥d Rust an tsaoil r√©adaigh.</p>
<Listing number="17-42" caption="Sending messages with blocking code in a thread and awaiting the messages in an async block" file-name="src/main.rs">
<pre><pre class="playground"><code class="language-rust"><span class="boring">extern crate trpl; // for mdbook test
</span><span class="boring">
</span>use std::{thread, time::Duration};

fn main() {
    let (tx, mut rx) = trpl::channel();

    thread::spawn(move || {
        for i in 1..11 {
            tx.send(i).unwrap();
            thread::sleep(Duration::from_secs(1));
        }
    });

    trpl::run(async {
        while let Some(message) = rx.recv().await {
            println!("{message}");
        }
    });
}</code></pre></pre>
</Listing>
<p>Tosa√≠mid tr√≠ chain√©al neamhshioncr√≥nach a chruth√∫, agus ansin sceithimid sn√°ithe a ghlacann √∫in√©ireacht ar thaobh an tseolt√≥ra den chain√©al. Laistigh den sn√°ithe, seolaimid na huimhreacha 1 go 10, ag codladh ar feadh soicind idir gach ceann. Ar deireadh, rithimid todhcha√≠ a crutha√≠odh le bloc neamhshioncr√≥nach a ritheadh ‚Äã‚Äãchuig <code>trpl::run</code> d√≠reach mar at√° d√©anta againn ar fud na caibidle. Sa todhcha√≠ sin, fanfaimid leis na teachtaireachta√≠ sin, d√≠reach mar at√° sna sampla√≠ eile de sheoladh teachtaireachta√≠ a chonaiceamar.</p>
<p>Chun filleadh ar an gc√°s a d‚Äôoscail muid an chaibidil leis, samhlaigh sraith tascanna ionch√≥daithe f√≠se a rith ag baint √∫s√°ide as sn√°ithe tiomnaithe (toisc go bhfuil ionch√≥d√∫ f√≠se
ceangailte le r√≠omhaireacht) ach ag cur in i√∫l don Chomh√©adan √ös√°ideora go nd√©antar na hoibr√≠ochta√≠ sin le cain√©al neamhshioncr√≥nach. T√° sampla√≠ gan √°ireamh de na cine√°lacha teaglaim seo i gc√°sanna √∫s√°ide f√≠orshaoil.</p>
<h2 id="achoimre-16"><a class="header" href="#achoimre-16">Achoimre</a></h2>
<p>N√≠ h√© seo an uair dheireanach a fheicfidh t√∫ comhthr√°thacht sa leabhar seo. Cuirfidh an tionscadal i
<a href="ch21-00-final-project-a-web-server.html">Caibidil 21</a> na coincheapa seo i bhfeidhm i gc√°s n√≠os r√©ad√∫la
n√° na sampla√≠ n√≠os simpl√≠ a phl√©itear anseo agus d√©anfaidh s√© compar√°id n√≠os d√≠r√≠ idir r√©iteach fadhbanna agus sn√°ithe√°il i gcoinne tascanna.</p>
<p>Is cuma c√©n cur chuige seo a roghna√≠onn t√∫, tugann Rust na huirlis√≠ duit a theasta√≠onn uait chun c√≥d s√°bh√°ilte, tapa, comhuaineach a scr√≠obh
‚Äîb√≠odh s√© le haghaidh freastala√≠ gr√©as√°in ard-tr√©chur n√≥ c√≥ras oibri√∫ch√°in leabaithe.</p>
<p>Ansin, labhr√≥imid faoi bheala√≠ idiomatacha chun fadhbanna a shamhalt√∫ agus r√©itigh a strucht√∫r√∫
de r√©ir mar a fh√°sann do chl√°ir Rust. Ina theannta sin, pl√©ifimid conas a bhaineann idiomacha Rust
leis na cinn a d'fh√©adf√° a bheith eolach orthu √≥ chl√°reagr√∫ d√≠rithe ar r√©ada.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gn√©ithe-cl√°rsceidealaithe-d√≠rithe-ar-r√©ada"><a class="header" href="#gn√©ithe-cl√°rsceidealaithe-d√≠rithe-ar-r√©ada">Gn√©ithe Cl√°rsceidealaithe D√≠rithe ar R√©ada</a></h1>
<p>Is bealach chun cl√°ir a shamhalt√∫ √© cl√°rsceideal√∫ d√≠rithe ar r√©ada (OOP). Tugadh isteach r√©ada mar
choincheap cl√°rsceidealaithe sa teanga r√≠omhsceidealaithe Simula sna
1960id√≠. Bh√≠ tionchar ag na r√©ada sin ar ailtireacht r√≠omhsceidealaithe Alan Kay ina
dtugann r√©ada teachtaireachta√≠ d√° ch√©ile. Chun an ailtireacht seo a chur s√≠os, chum s√©
an t√©arma <em>cl√°rsceideal√∫ d√≠rithe ar r√©ada</em> i 1967. D√©anann go leor sainmh√≠nithe ioma√≠ocha
cur s√≠os ar cad is OOP ann, agus de r√©ir cuid de na sainmh√≠nithe seo t√° Rust d√≠rithe ar r√©ada,
ach de r√©ir cinn eile n√≠l. Sa chaibidil seo, d√©anfaimid ini√∫chadh ar shaintr√©ithe √°irithe
a mheastar a bheith d√≠rithe ar r√©ada go coitianta agus conas a aistr√≠tear na saintr√©ithe sin
go Rust idiomach. Ansin taispe√°nfaimid duit conas
patr√∫n dearaidh d√≠rithe ar r√©ada a chur i bhfeidhm i Rust agus pl√©ifimid na comhbhabht√°lacha a bhaineann leis sin a dh√©anamh
i gcompar√°id le r√©iteach a chur i bhfeidhm ag baint √∫s√°ide as cuid de l√°idreachta√≠ Rust ina ionad.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="saintr√©ithe-teangacha-d√≠rithe-ar-r√©ada"><a class="header" href="#saintr√©ithe-teangacha-d√≠rithe-ar-r√©ada">Saintr√©ithe Teangacha D√≠rithe ar R√©ada</a></h2>
<p>N√≠l aon chomhthuiscint sa phobal r√≠omhchl√°r√∫ch√°in faoi na gn√©ithe a chaithfidh a bheith ag
teanga le go measfa√≠ gur teanga dh√≠rithe ar r√©ada √≠. T√° tionchar ag go leor
paraid√≠m√≠ r√≠omhchl√°r√∫ch√°in ar meirg, lena n-√°ir√≠tear OOP; mar shampla, rinneamar ini√∫chadh ar na gn√©ithe
a th√°inig √≥ r√≠omhchl√°r√∫ feidhmi√∫il i gCaibidil 13. Is f√©idir a r√° go bhfuil tr√©ithe coitianta √°irithe ag teangacha OOP, eadhon r√©ada, ionchapsl√∫, agus
oidhreacht. F√©achfaimid ar a bhfuil i gceist le gach ceann de na tr√©ithe sin agus an
taca√≠onn
Rust leis.</p>
<h3 id="t√°-sonra√≠-agus-iompar-i-r√©ada"><a class="header" href="#t√°-sonra√≠-agus-iompar-i-r√©ada">T√° Sonra√≠ agus Iompar i R√©ada</a></h3>
<p>Is catal√≥g de phatr√∫in dearaidh d√≠rithe ar r√©ada √© an leabhar <em>Design Patterns: Elements of Reusable Object-Oriented Software</em> le
Erich Gamma, Richard Helm, Ralph Johnson, agus John Vlissides (Addison-Wesley
Professional, 1994), ar a dtugtar <em>The Gang of Four</em> go comhr√°iteach. Sainmh√≠n√≠onn s√© OOP ar an mbealach seo:</p>
<blockquote>
<p>T√° cl√°ir dh√≠rithe ar r√©ada d√©anta suas de r√©ada. Pac√°lann <em>object</em> sonra√≠ agus na n√≥sanna imeachta a oibr√≠onn ar na sonra√≠ sin araon. De ghn√°th, tugtar <em>methods</em> n√≥ <em>operations</em> ar na n√≥sanna imeachta.</p>
</blockquote>
<p>Ag baint √∫s√°ide as an sainmh√≠ni√∫ seo, t√° Rust d√≠rithe ar r√©ada: b√≠onn sonra√≠ ag strucht√∫ir agus enums,
agus sol√°thra√≠onn bloic <code>impl</code> modhanna ar strucht√∫ir agus enums. C√© nach dtugtar <em>r√©ada</em> ar strucht√∫ir agus
enums le modhanna, sol√°thra√≠onn siad an
fheidhmi√∫lacht ch√©anna, de r√©ir sainmh√≠ni√∫ Gang of Four ar r√©ada.</p>
<h3 id="caps√∫l√∫-a-cheileann-sonra√≠-cur-i-bhfeidhm"><a class="header" href="#caps√∫l√∫-a-cheileann-sonra√≠-cur-i-bhfeidhm">Caps√∫l√∫ a Cheileann Sonra√≠ Cur i bhFeidhm</a></h3>
<p>Gn√© eile a bhaineann go coitianta le OOP n√° an coincheap <em>caps√∫l√∫</em>,
rud a chialla√≠onn nach bhfuil sonra√≠ cur i bhfeidhm r√©ada inrochtana ag
c√≥d a √∫s√°ideann an r√©ada sin. D√° bhr√≠ sin, is √© an t-aon bhealach chun idirghn√≠omh√∫ le r√©ad n√°
tr√≠na API poibl√≠; n√≠or cheart go mbeadh c√≥d a √∫s√°ideann an r√©ada in ann teacht isteach in
inmhe√°naigh an r√©ada agus sonra√≠ n√≥ iompar a athr√∫ go d√≠reach. Cuireann s√© seo ar chumas an
chl√°raitheora inmhe√°nacha r√©ada a athr√∫ agus a athfhacht√≥ireacht gan a bheith orthu
an c√≥d a √∫s√°ideann an r√©ad a athr√∫.</p>
<p>Phl√©amar conas an ionchapsl√∫ a rial√∫ i gCaibidil 7: is f√©idir linn an eochairfhocal <code>pub</code> a √∫s√°id chun a chinneadh c√© na mod√∫il, na cine√°lacha, na feidhmeanna agus na modhanna in√°r gc√≥d
ba ch√≥ir a bheith poibl√≠, agus de r√©ir r√©amhshocraithe b√≠onn gach rud eile pr√≠obh√°ideach. Mar shampla, is f√©idir linn
strucht√∫r <code>AveragedCollection</code> a shaini√∫ ina bhfuil r√©imse ina bhfuil veicteoir
de luachanna <code>i32</code>. Is f√©idir leis an strucht√∫r r√©imse a bheith aige freisin ina bhfuil me√°n na
luachanna sa veicteoir, rud a chialla√≠onn nach g√° an me√°n a r√≠omh
ar √©ileamh aon uair a bh√≠onn s√© de dh√≠th ar aon duine. I bhfocail eile, d√©anfaidh <code>AveragedCollection</code>
an me√°n r√≠ofa a thaisceadh d√∫inn. T√° sainmh√≠ni√∫ an
strucht√∫ir <code>AveragedCollection</code> i Liost√°il 18-1:</p>
<Listing number="18-1" file-name="src/lib.rs" caption="An `AveragedCollection` struct that maintains a list of integers and the average of the items in the collection">
<pre><code class="language-rust noplayground">pub struct AveragedCollection {
    list: Vec&lt;i32&gt;,
    average: f64,
}</code></pre>
</Listing>
<p>T√° an strucht√∫r marc√°ilte mar <code>pub</code> ionas gur f√©idir le c√≥d eile √© a √∫s√°id, ach fanann na r√©ims√≠ laistigh den strucht√∫r pr√≠obh√°ideach. T√° s√© seo t√°bhachtach sa ch√°s seo mar ba mhaith linn a chinnti√∫ go nd√©antar an me√°n a nuashonr√∫ freisin aon uair a chuirtear luach leis an liosta n√≥ a bhaintear den liosta. D√©anaimid √© seo tr√≠ mhodhanna <code>add</code>, <code>remove</code>, agus <code>average</code> a chur i bhfeidhm ar an strucht√∫r, mar a thaispe√°ntar i Liost√°il 18-2:</p>
<Listing number="18-2" file-name="src/lib.rs" caption="Implementations of the public methods `add`, `remove`, and `average` on `AveragedCollection`">
<pre><code class="language-rust noplayground"><span class="boring">pub struct AveragedCollection {
</span><span class="boring">    list: Vec&lt;i32&gt;,
</span><span class="boring">    average: f64,
</span><span class="boring">}
</span><span class="boring">
</span>impl AveragedCollection {
    pub fn add(&amp;mut self, value: i32) {
        self.list.push(value);
        self.update_average();
    }

    pub fn remove(&amp;mut self) -&gt; Option&lt;i32&gt; {
        let result = self.list.pop();
        match result {
            Some(value) =&gt; {
                self.update_average();
                Some(value)
            }
            None =&gt; None,
        }
    }

    pub fn average(&amp;self) -&gt; f64 {
        self.average
    }

    fn update_average(&amp;mut self) {
        let total: i32 = self.list.iter().sum();
        self.average = total as f64 / self.list.len() as f64;
    }
}</code></pre>
</Listing>
<p>Is iad na modhanna poibl√≠ <code>add</code>, <code>remove</code>, agus <code>average</code> na beala√≠ amh√°in chun rochtain a fh√°il ar shonra√≠ n√≥ iad a mhodhn√∫ i gc√°s de <code>AveragedCollection</code>. Nuair a chuirtear m√≠r le <code>list</code> ag baint √∫s√°ide as an modh <code>add</code> n√≥ a bhaintear √≠ ag baint √∫s√°ide as an modh <code>remove</code>, glaonn cur i bhfeidhm gach ceann acu ar an modh pr√≠obh√°ideach <code>update_average</code> a l√°imhse√°lann
nuashonr√∫ an r√©imse <code>average</code> chomh maith.</p>
<p>F√°gaimid na r√©ims√≠ <code>list</code> agus <code>average</code> pr√≠obh√°ideach ionas nach bhfuil aon bhealach ann do ch√≥d seachtrach m√≠reanna a chur leis an r√©imse <code>list</code> n√≥ a bhaint de go d√≠reach; ar shl√≠ eile, d'fh√©adfadh an r√©imse <code>me√°n</code> a bheith as sioncr√≥n nuair a athra√≠onn an <code>liosta</code>. Tugann an modh <code>me√°n</code> an luach ar ais sa r√©imse <code>me√°n</code>, rud a ligeann don ch√≥d seachtrach an <code>me√°n</code> a l√©amh ach gan √© a mhodhn√∫.</p>
<p>Toisc gur chuireamar sonra√≠ cur i bhfeidhm an strucht√∫ir <code>AveragedCollection</code> i bhfolach, is f√©idir linn gn√©ithe, amhail an strucht√∫r sonra√≠, a athr√∫ go h√©asca sa todhcha√≠. Mar shampla, d'fh√©adfaimis <code>HashSet&lt;i32&gt;</code> a √∫s√°id in ionad
<code>Vec&lt;i32&gt;</code> don r√©imse <code>liosta</code>. Chomh fada agus a fhanann s√≠nithe na modhanna poibl√≠ <code>add</code>,
<code>remove</code>, agus <code>me√°n</code> mar a ch√©ile, n√≠ bheadh ‚Äã‚Äã‚Äã‚Äãg√° le c√≥d a √∫s√°ideann
<code>AveragedCollection</code> a athr√∫ chun √© a thioms√∫. D√° nd√©anfaimis <code>list</code> a phoibli√∫ ina ionad sin, n√≠ bheadh ‚Äã‚Äãs√© seo amhlaidh go riachtanach: t√° modhanna difri√∫la ag <code>HashSet&lt;i32&gt;</code> agus <code>Vec&lt;i32&gt;</code> chun m√≠reanna a chur leis agus a bhaint, mar sin is d√≥cha go mbeadh ar an gc√≥d seachtrach
athr√∫ d√° mbeadh s√© ag modhn√∫ <code>list</code> go d√≠reach.</p>
<p>M√°s gn√© riachtanach √© an t-ionchapsl√∫ chun go measfa√≠ teanga a bheith
d√≠rithe ar r√©ada, comhl√≠onann Rust an riachtanas sin. Cuireann an rogha <code>pub</code> n√≥
gan a √∫s√°id le haghaidh codanna √©ags√∫la den ch√≥d ar chumas sonra√≠ cur i bhfeidhm a ionchapsl√∫.</p>
<h3 id="oidhreacht-mar-ch√≥ras-cine√°l-agus-mar-chomhroinnt-c√≥d"><a class="header" href="#oidhreacht-mar-ch√≥ras-cine√°l-agus-mar-chomhroinnt-c√≥d">Oidhreacht mar Ch√≥ras Cine√°l agus mar Chomhroinnt C√≥d</a></h3>
<p>Is meicn√≠ocht √≠ <em>Oidhreacht</em> tr√≠na bhf√©adann r√©ad eilimint√≠ a oidhreacht √≥
shainmh√≠ni√∫ r√©ada eile, agus ar an gcaoi sin sonra√≠ agus iompar an r√©ada tuismitheora a fh√°il
gan ort iad a shainmh√≠ni√∫ ar√≠s.</p>
<p>Mura gcaithfidh oidhreacht a bheith ag teanga le bheith ina teanga dh√≠rithe ar r√©ada, ansin
n√≠ teanga √≠ Rust. N√≠l aon bhealach ann strucht√∫r a shaini√∫ a oidhreachta√≠onn r√©ims√≠ agus cur i bhfeidhm modhanna an
strucht√∫ir tuismitheora gan macra a √∫s√°id.</p>
<p>Mar sin f√©in, m√° t√° t√∫ cleachtaithe le hoidhreacht a bheith i do bhosca uirlis√≠ cl√°ir, is f√©idir leat
r√©itigh eile i Rust a √∫s√°id, ag brath ar do ch√∫is le teacht ar
oidhreacht sa ch√©ad √°it.</p>
<p>Roghn√≥f√° oidhreacht ar dh√° phr√≠omhch√∫is. Ceann amh√°in n√° ath√∫s√°id c√≥d:
is f√©idir leat iompar ar leith a chur i bhfeidhm do chine√°l amh√°in, agus cuireann oidhreacht ar do chumas
an cur i bhfeidhm sin a ath√∫s√°id do chine√°l difri√∫il. Is f√©idir leat √© seo a dh√©anamh ar bhealach teoranta i gc√≥d Rust ag baint √∫s√°ide as cur i bhfeidhm modhanna tr√©ithe r√©amhshocraithe, a chonaic t√∫ i
Liost√°il 10-14 nuair a chuireamar cur i bhfeidhm r√©amhshocraithe den mhodh <code>summarize</code> leis an tr√©ith <code>Summary</code>. Bheadh ‚Äã‚Äãan modh <code>summarize</code> ar f√°il ar aon chine√°l a chuireann an tr√©ith <code>Summary</code> i bhfeidhm gan aon ch√≥d breise. T√° s√© seo
cos√∫il le rang tuismitheora a bhfuil cur i bhfeidhm modha aige agus rang linbh oidhreachta a bhfuil cur i bhfeidhm an mhodha aige freisin. Is f√©idir linn
cur i bhfeidhm r√©amhshocraithe an mhodha <code>summarize</code> a sh√°r√∫ freisin nuair a
chuirimid an tr√©ith <code>Summary</code> i bhfeidhm, at√° cos√∫il le rang linbh a sh√°ra√≠onn
cur i bhfeidhm modha a oidhreachta√≠odh √≥ rang tuismitheora.</p>
<p>Baineann an ch√∫is eile le hoidhreacht a √∫s√°id leis an gc√≥ras cine√°il: chun
cine√°l linbh a chumas√∫ a √∫s√°id sna h√°iteanna c√©anna leis an gcine√°l tuismitheora. Tugtar <em>polamorfacht</em> air seo freisin, rud a chialla√≠onn gur f√©idir leat ilr√©ad a chur in ionad
a ch√©ile ag am rith m√° roinneann siad tr√©ithe √°irithe.</p>
<blockquote>
<h3 id="polamorfacht"><a class="header" href="#polamorfacht">Polamorfacht</a></h3>
<p>Do go leor daoine, is comhchiallach le hoidhreacht an focal polamorfacht. Ach is
coincheap n√≠os ginear√°lta √© i nd√°ir√≠re a thagra√≠onn do ch√≥d ar f√©idir leis oibri√∫ le sonra√≠
de chine√°lacha √©ags√∫la. Maidir le hoidhreacht, is fo-aicm√≠ iad na cine√°lacha sin de ghn√°th.</p>
<p>Ina √°it sin, √∫s√°ideann Rust cine√°lacha chun teib√≠ a dh√©anamh thar chine√°lacha √©ags√∫la f√©ideartha agus
teorainneacha tr√©ithe chun srianta a fhorchur ar a gcaithfidh na cine√°lacha sin a shol√°thar. Tugtar <em>polamorfacht pharaim√©adrach teoranta</em> air seo uaireanta.</p>
</blockquote>
<p>T√° oidhreacht imithe as fabhar le d√©ana√≠ mar r√©iteach dearaidh r√≠omhchl√°r√∫ch√°in
i go leor teangacha r√≠omhchl√°r√∫ch√°in toisc go mb√≠onn baol ann go minic go roinnfear n√≠os m√≥ c√≥id
n√° mar is g√°. N√≠or cheart go roinnfeadh fo-aicm√≠ tr√©ithe uile a
ranga tuismitheora i gc√≥na√≠ ach d√©anfaidh siad amhlaidh le hoidhreacht. Is f√©idir leis seo dearadh cl√°ir a dh√©anamh
n√≠os l√∫ sol√∫btha. Tugann s√© seo isteach an fh√©idearthacht freisin modhanna a ghlaoch ar
fho-aicm√≠ nach bhfuil ciall leo n√≥ a chrutha√≠onn earr√°id√≠ toisc nach mbaineann na modhanna
leis an bhfo-aicme. Ina theannta sin, n√≠ chead√≥idh roinnt teangacha ach oidhreacht aonair (rud a chialla√≠onn nach f√©idir le fo-aicme ach oidhreacht a fh√°il √≥ aon aicme amh√°in), rud a chuireann srian breise ar shol√∫bthacht dhearadh cl√°ir.</p>
<p>Ar na c√∫iseanna seo, glacann Rust cur chuige difri√∫il maidir le h√∫s√°id a bhaint as r√©ada tr√©ithe in ionad oidhreachta. F√©achfaimid ar an gcaoi a gcuireann r√©ada tr√©ithe polamorfacht ar chumas i Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="√ös√°id-r√©ada-tr√©ithe-a-cheada√≠onn-luachanna-de-chine√°lacha-√âags√∫la"><a class="header" href="#√ös√°id-r√©ada-tr√©ithe-a-cheada√≠onn-luachanna-de-chine√°lacha-√âags√∫la">√ös√°id R√©ada Tr√©ithe a Cheada√≠onn Luachanna de Chine√°lacha √âags√∫la</a></h2>
<p>I gCaibidil 8, luaigh muid gur teorann√∫ amh√°in a bhaineann le veicteoir√≠ n√° gur f√©idir leo
eilimint√≠ de chine√°l amh√°in a st√≥r√°il. Chrutha√≠omar r√©iteach sealadach i Liosta 8-9 inar
shain√≠omar enum <code>SpreadsheetCell</code> a raibh malairt√≠ ann chun sl√°nuimhreacha, sn√°mh√°in,
agus t√©acs a shealbh√∫. Chiallaigh s√© seo go bhf√©adfaimis cine√°lacha √©ags√∫la sonra√≠ a st√≥r√°il i ngach cill agus
veicteoir a bheith againn f√≥s a l√©irigh sraith cealla. Is r√©iteach bre√° maith √© seo
nuair is sraith sheasta cine√°lacha iad √°r m√≠reanna inmhalartaithe a bhfuil aithne againn orthu
nuair a chuirtear √°r gc√≥d le ch√©ile.</p>
<p>Mar sin f√©in, uaireanta ba mhaith linn go mbeadh √°r n-√∫s√°ideoir leabharlainne in ann an tsraith
cine√°lacha at√° bail√≠ i gc√°s ar leith a leathn√∫. Chun a thaispe√°int conas a d'fh√©adfaimis √© seo a bhaint amach,
crutha√≠mid uirlis chomh√©adain √∫s√°ideora grafach (GUI) samplach a dh√©anann athr√°
tr√≠ liosta m√≠reanna, ag glaoch modh <code>draw</code> ar gach ceann acu chun √© a tharraingt chuig an
sc√°ile√°n - teicn√≠c choitianta d'uirlis√≠ GUI. Cruth√≥imid cliathbhosca leabharlainne ar a dtugtar
<code>gui</code> ina bhfuil strucht√∫r leabharlainne GUI. D‚Äôfh√©adfadh go mbeadh cine√°lacha √°irithe sa chliath√°n seo le h√∫s√°id ag daoine, amhail ‚ÄòCnaipe‚Äô n√≥ ‚ÄòR√©imseText‚Äô. Ina theannta sin,
beidh √∫s√°ideoir√≠ ‚Äògui‚Äô ag iarraidh a gcine√°lacha f√©in a chruth√∫ ar f√©idir iad a tharraingt: mar
shampla, d‚Äôfh√©adfadh r√≠omhchl√°raitheoir amh√°in ‚Äò√çomh√°‚Äô a chur leis agus d‚Äôfh√©adfadh duine eile ‚ÄòBoscaRoghnaithe‚Äô a chur leis.</p>
<p>N√≠ chuirfimid leabharlann GUI l√°nfheidhmi√∫il i bhfeidhm don sampla seo ach taispe√°nfaimid
conas a d‚Äôoirfeadh na p√≠osa√≠ le ch√©ile. Tr√°th scr√≠ofa na leabharlainne, n√≠ f√©idir linn
na cine√°lacha go l√©ir a d‚Äôfh√©adfadh r√≠omhchl√°raitheoir√≠ eile a chruth√∫ a bheith ar eolas againn agus a shaini√∫. Ach t√° a fhios againn
go gcaithfidh ‚Äògui‚Äô s√∫il a choinne√°il ar go leor luachanna de chine√°lacha √©ags√∫la, agus go gcaithfidh s√© modh ‚Äòtarraingthe‚Äô a ghlaoch ar gach ceann de na luachanna seo at√° cl√≥scr√≠ofa go difri√∫il. N√≠ g√° d√≥ a fhios a bheith aige go d√≠reach cad a tharl√≥idh nuair a ghlaonn muid ar an modh ‚Äòtarraingthe‚Äô,
ach go mbeidh an modh sin ar f√°il d√∫inn don luach le glaoch air.</p>
<p>Chun seo a dh√©anamh i dteanga le hoidhreacht, d‚Äôfh√©adfaimis rang darb ainm
‚ÄòComhph√°irt‚Äô a shaini√∫ a bhfuil modh darb ainm ‚Äòtarraingthe‚Äô air. Gheobhadh na ranganna eile, amhail
<code>Button</code>, <code>Image</code>, agus <code>SelectBox</code>, oidhreacht √≥ <code>Component</code> agus d√° bhr√≠ sin
oidhreacht an modh <code>draw</code>. D‚Äôfh√©adfaid√≠s gach ceann acu an modh <code>draw</code> a sh√°r√∫ chun a n-iompar saincheaptha a shaini√∫, ach d‚Äôfh√©adfadh an creatlach na cine√°lacha go l√©ir a l√°imhse√°il amhail is d√° mba ch√°sanna <code>Component</code> iad agus glaoch ar <code>draw</code> orthu. Ach toisc nach bhfuil oidhreacht ag Rust, teasta√≠onn bealach eile uainn chun an leabharlann <code>gui</code> a strucht√∫r√∫ chun
ligean d‚Äô√∫s√°ideoir√≠ √≠ a leathn√∫ le cine√°lacha nua.</p>
<h3 id="tr√©ith-a-shaini√∫-le-haghaidh-iompra√≠ochta-coitianta"><a class="header" href="#tr√©ith-a-shaini√∫-le-haghaidh-iompra√≠ochta-coitianta">Tr√©ith a Shaini√∫ le haghaidh Iompra√≠ochta Coitianta</a></h3>
<p>Chun an t-iompar is mian linn a bheith ag <code>gui</code> a chur i bhfeidhm, sainmh√≠n√≠mid tr√©ith darb ainm
<code>Draw</code> a mbeidh modh amh√°in darb ainm <code>draw</code> aige. Ansin is f√©idir linn veicteoir a shaini√∫ a
ghlacann <em>trait object</em>. D√≠r√≠onn r√©ad tr√©ithe ar ch√°s de chine√°l
a chuireann √°r dtr√©ith shonraithe i bhfeidhm agus t√°bla a √∫s√°idtear chun modhanna tr√©ithe a chuardach ar
an gcine√°l sin ag am rite. Crutha√≠mid r√©ad tr√©ithe tr√≠ chine√°l √©igin pointeora a shonr√∫, amhail tagairt <code>&amp;</code> n√≥ pointeoir cliste <code>Box&lt;T&gt;</code>, ansin an eochairfhocal <code>dyn</code>, agus ansin an tr√©ith √°bhartha a shonr√∫. (Pl√©ifimid faoin gc√∫is
a gcaithfidh r√©ada tr√©ithe pointeoir a √∫s√°id i gCaibidil 20 sa chuid [‚ÄúCine√°lacha M√©ide Dinimici√∫la agus an Tr√©ith ‚ÄòM√©ide‚Äô.‚Äù][dinimici√∫il-mh√©ide]<!-- neamhaird a dh√©anamh -->) Is f√©idir linn
r√©ada tr√©ithe a √∫s√°id in ionad cine√°il ghinear√°lta n√≥ coincr√©ite. P√© √°it a n-√∫s√°idimid
r√©ad tr√©ithe, cinnteoidh c√≥ras cine√°il Rust ag am tiomsaithe go gcuirfidh aon luach
a √∫s√°idtear sa chomhth√©acs sin tr√©ith an r√©ada tr√©ithe i bhfeidhm. D√° bhr√≠ sin, n√≠ g√° d√∫inn na cine√°lacha f√©ideartha go l√©ir a bheith ar eolas againn ag am tiomsaithe.</p>
<p>Luaigh muid, i Rust, nach nglaoimid ar strucht√∫ir agus ar enums
‚Äúr√©ada‚Äù chun iad a idirdheal√∫ √≥ r√©ada teangacha eile. I strucht√∫r n√≥
enum, d√©antar na sonra√≠ sna r√©ims√≠ strucht√∫r agus an t-iompar i mbloic <code>impl</code> a
scaradh, ach i dteangacha eile, is minic a lip√©ada√≠tear an sonra√≠ agus an t-iompar a chuirtear le ch√©ile i gcoincheap amh√°in mar r√©ad. Mar sin f√©in, t√° r√©ada tr√©ithe n√≠os cos√∫la
le r√©ada i dteangacha eile sa mh√©id is go gcomhcheangla√≠onn siad sonra√≠ agus iompar.
Ach t√° r√©ada tr√©ithe difri√∫il √≥ r√©ada traidisi√∫nta sa mh√©id is nach f√©idir linn sonra√≠ a chur le
r√©ad tr√©ithe. N√≠l r√©ada tr√©ithe chomh h√∫s√°ideach le r√©ada i dteangacha
eile: is √© a gcusp√≥ir sonrach n√° ligean do bhaint amach trasna
iompar
coitianta.</p>
<p>L√©ir√≠onn Liost√°il 18-3 conas tr√©ith darb ainm <code>Draw</code> a shaini√∫ le modh amh√°in darb ainm
<code>draw</code>:</p>
<Listing number="18-3" file-name="src/lib.rs" caption="Definition of the `Draw` trait">
<pre><code class="language-rust noplayground">pub trait Draw {
    fn draw(&amp;self);
}</code></pre>
</Listing>
<p>Ba ch√≥ir go mbeadh an comhr√©ir seo eolach √≥n√°r bpl√© ar conas tr√©ithe a shaini√∫ i gCaibidil 10. Ansin tagann roinnt comhr√©ir nua: Sainmh√≠n√≠onn Liost√°il 18-4 strucht√∫r darb ainm <code>Screen</code> a bhfuil veicteoir darb ainm <code>components</code> ann. Is de chine√°l <code>Box&lt;dyn Draw&gt;</code> an ‚Äã‚Äãveicteoir seo, arb √© r√©ad tr√©ithe √©; is ionada√≠ √© d'aon chine√°l laistigh de <code>Box</code> a chuireann an tr√©ith <code>Draw</code> i bhfeidhm.</p>
<Listing number="18-4" file-name="src/lib.rs" caption="Definition of the `Screen` struct with a `components` field holding a vector of trait objects that implement the `Draw` trait">
<pre><code class="language-rust noplayground"><span class="boring">pub trait Draw {
</span><span class="boring">    fn draw(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span>pub struct Screen {
    pub components: Vec&lt;Box&lt;dyn Draw&gt;&gt;,
}</code></pre>
</Listing>
<p>Ar an strucht√∫r <code>Screen</code>, sainmh√≠n√≠mid modh darb ainm <code>run</code> a ghlaofaidh ar an modh <code>draw</code> ar gach ceann d√° <code>components</code>, mar a thaispe√°ntar i Liost√°il 18-5:</p>
<Listing number="18-5" file-name="src/lib.rs" caption="A `run` method on `Screen` that calls the `draw` method on each component">
<pre><code class="language-rust noplayground"><span class="boring">pub trait Draw {
</span><span class="boring">    fn draw(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct Screen {
</span><span class="boring">    pub components: Vec&lt;Box&lt;dyn Draw&gt;&gt;,
</span><span class="boring">}
</span><span class="boring">
</span>impl Screen {
    pub fn run(&amp;self) {
        for component in self.components.iter() {
            component.draw();
        }
    }
}</code></pre>
</Listing>
<p>Oibr√≠onn s√© seo ar bhealach difri√∫il √≥ strucht√∫r a shaini√∫ a √∫s√°ideann paraim√©adar cine√°l cine√°lach le teorainneacha tr√©ithe. N√≠ f√©idir paraim√©adar cine√°l cine√°lach a chur in ionad ach cine√°l coincr√©ite amh√°in ag an am, ach ceada√≠onn r√©ada tr√©ithe do chine√°lacha coincr√©ite iolracha a l√≠onadh isteach don r√©ad tr√©ithe ag am rite. Mar shampla, d'fh√©adfaimis an strucht√∫r <code>Screen</code> a shaini√∫ ag baint √∫s√°ide as cine√°l cine√°lach agus teorainn tr√©ithe mar at√° i Liost√°il 18-6:</p>
<Listing number="18-6" file-name="src/lib.rs" caption="An alternate implementation of the `Screen` struct and its `run` method using generics and trait bounds">
<pre><code class="language-rust noplayground"><span class="boring">pub trait Draw {
</span><span class="boring">    fn draw(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span>pub struct Screen&lt;T: Draw&gt; {
    pub components: Vec&lt;T&gt;,
}

impl&lt;T&gt; Screen&lt;T&gt;
where
    T: Draw,
{
    pub fn run(&amp;self) {
        for component in self.components.iter() {
            component.draw();
        }
    }
}</code></pre>
</Listing>
<p>Cuireann s√© seo srian orainn go dt√≠ sampla <code>Screen</code> ina bhfuil liosta comhph√°irteanna den chine√°l <code>Button</code> n√≥ den chine√°l <code>TextField</code>. M√°s rud √© nach mbeidh ach baili√∫ch√°in aonchine√°lacha agat, is fearr cine√°lacha agus teorainneacha tr√©ithe a √∫s√°id mar go nd√©anfar na
sainmh√≠nithe a mhonamorf√∫ ag am tiomsaithe chun na cine√°lacha coincr√©iteacha a √∫s√°id.</p>
<p>Ar an l√°imh eile, leis an modh a √∫s√°ideann r√©ada tr√©ithe, is f√©idir le sampla amh√°in <code>Screen</code> <code>Vec&lt;T&gt;</code> a shealbh√∫ ina bhfuil <code>Box&lt;Button&gt;</code> chomh maith le
<code>Box&lt;TextField&gt;</code>. F√©achfaimid ar an gcaoi a n-oibr√≠onn s√© seo, agus ansin labhr√≥imid faoi na
impleachta√≠ feidhm√≠ochta ag an am rith.</p>
<h3 id="an-tr√©ith-a-chur-i-bhfeidhm"><a class="header" href="#an-tr√©ith-a-chur-i-bhfeidhm">An Tr√©ith a Chur i bhFeidhm</a></h3>
<p>Anois cuirfimid roinnt cine√°lacha leis a chuireann an tr√©ith <code>Draw</code> i bhfeidhm. Sol√°thr√≥imid an cine√°l
<code>Button</code>. Ar√≠s, t√° cur i bhfeidhm leabharlann GUI lasmuigh de raon feidhme
an leabhair seo, mar sin n√≠ bheidh aon chur i bhfeidhm √∫s√°ideach ag an modh <code>draw</code> ina
chorp. Chun a shamhl√∫ c√©n chuma a bheadh ‚Äã‚Äãar an gcur i bhfeidhm, d'fh√©adfadh r√©ims√≠ le haghaidh <code>width</code>, <code>height</code>, agus <code>label</code> a bheith i strucht√∫r <code>Button</code>, mar a thaispe√°ntar i Liost√°il 18-7:</p>
<Listing number="18-7" file-name="src/lib.rs" caption="A `Button` struct that implements the `Draw` trait">
<pre><code class="language-rust noplayground"><span class="boring">pub trait Draw {
</span><span class="boring">    fn draw(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct Screen {
</span><span class="boring">    pub components: Vec&lt;Box&lt;dyn Draw&gt;&gt;,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Screen {
</span><span class="boring">    pub fn run(&amp;self) {
</span><span class="boring">        for component in self.components.iter() {
</span><span class="boring">            component.draw();
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>pub struct Button {
    pub width: u32,
    pub height: u32,
    pub label: String,
}

impl Draw for Button {
    fn draw(&amp;self) {
        // code to actually draw a button
    }
}</code></pre>
</Listing>
<p>Beidh na r√©ims√≠ <code>width</code>, <code>height</code>, agus <code>label</code> ar <code>Button</code> difri√∫il √≥ na
r√©ims√≠ ar chomhph√°irteanna eile; mar shampla, d'fh√©adfadh na
r√©ims√≠ c√©anna sin m√≥ide r√©imse <code>placeholder</code> a bheith ag cine√°l <code>TextField</code>. Cuirfidh gach ceann de na cine√°lacha ar mhaith linn a tharraingt ar
an sc√°ile√°n an tr√©ith <code>Draw</code> i bhfeidhm ach √∫s√°idfidh siad c√≥d difri√∫il sa
mhodh <code>draw</code> chun a shaini√∫ conas an cine√°l sin a tharraingt, mar at√° ag <code>Button</code> anseo
(gan an c√≥d GUI iarbh√≠r, mar a luadh). D'fh√©adfadh bloc breise <code>impl</code> a bheith ag an gcine√°l <code>Button</code>, mar shampla, ina bhfuil modhanna a bhaineann leis an m√©id
a tharla√≠onn nuair a chlice√°lann √∫s√°ideoir an cnaipe. N√≠ bheidh feidhm ag na cine√°lacha modhanna seo maidir le
cine√°lacha cos√∫il le <code>TextField</code>.</p>
<p>M√° chinneann duine at√° ag baint √∫s√°ide as √°r leabharlann strucht√∫r <code>SelectBox</code> a chur i bhfeidhm a bhfuil
r√©ims√≠ <code>width</code>, <code>height</code>, agus <code>options</code> ann, cuirfidh siad an tr√©ith <code>Draw</code> i bhfeidhm ar an
chine√°l
<code>SelectBox</code> chomh maith, mar a thaispe√°ntar i Liost√°il 18-8:</p>
<Listing number="18-8" file-name="src/main.rs" caption="Another crate using `gui` and implementing the `Draw` trait on a `SelectBox` struct">
<pre><code class="language-rust ignore">use gui::Draw;

struct SelectBox {
    width: u32,
    height: u32,
    options: Vec&lt;String&gt;,
}

impl Draw for SelectBox {
    fn draw(&amp;self) {
        // code to actually draw a select box
    }
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre>
</Listing>
<p>Is f√©idir le h√∫s√°ideoir √°r leabharlainne a bhfeidhm <code>main</code> a scr√≠obh anois chun sampla <code>Screen</code> a chruth√∫. Leis an sampla <code>Screen</code>, is f√©idir leo <code>SelectBox</code> agus <code>Button</code> a chur leis tr√≠ gach ceann acu a chur i <code>Box&lt;T&gt;</code> chun r√©ad tr√©ithe a bheith ann. Ansin is f√©idir leo glaoch ar an modh <code>run</code> ar an sampla <code>Screen</code>, a ghlaoidh <code>draw</code> ar gach ceann de na comhph√°irteanna. Taispe√°nann Liost√°il 18-9 an cur i bhfeidhm seo:</p>
<Listing number="18-9" file-name="src/main.rs" caption="Using trait objects to store values of different types that implement the same trait">
<pre><code class="language-rust ignore"><span class="boring">use gui::Draw;
</span><span class="boring">
</span><span class="boring">struct SelectBox {
</span><span class="boring">    width: u32,
</span><span class="boring">    height: u32,
</span><span class="boring">    options: Vec&lt;String&gt;,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Draw for SelectBox {
</span><span class="boring">    fn draw(&amp;self) {
</span><span class="boring">        // code to actually draw a select box
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>use gui::{Button, Screen};

fn main() {
    let screen = Screen {
        components: vec![
            Box::new(SelectBox {
                width: 75,
                height: 10,
                options: vec![
                    String::from("Yes"),
                    String::from("Maybe"),
                    String::from("No"),
                ],
            }),
            Box::new(Button {
                width: 50,
                height: 10,
                label: String::from("OK"),
            }),
        ],
    };

    screen.run();
}</code></pre>
</Listing>
<p>Nuair a scr√≠obhamar an leabharlann, n√≠ raibh a fhios againn go bhf√©adfadh duine √©igin an cine√°l <code>SelectBox</code> a chur leis, ach bh√≠ √°r gcur i bhfeidhm <code>Screen</code> in ann oibri√∫ ar an
gcine√°l nua agus √© a tharraingt toisc go gcuireann <code>SelectBox</code> an tr√©ith <code>Draw</code> i bhfeidhm, rud a chialla√≠onn go gcuireann s√© an modh <code>draw</code> i bhfeidhm.</p>
<p>T√° an coincheap seo - a bheith ag pl√© leis na teachtaireachta√≠ a bhfreagra√≠onn luach d√≥ibh amh√°in - cos√∫il le cine√°l coincr√©iteach an luacha - cos√∫il le coincheap cl√≥scr√≠ofa <em>duck</em> i dteangacha cl√≥scr√≠ofa go dinimici√∫il: m√° shi√∫lann s√© cos√∫il le lacha agus m√° dh√©anann s√© g√°ire
cos√∫il le lacha, ansin caithfidh s√© a bheith ina lacha! I gcur i bhfeidhm <code>run</code> ar <code>Screen</code> i Liosta 18-5, n√≠ g√° do <code>run</code> a bheith ar an eolas faoi chine√°l coincr√©iteach gach
comhph√°irte. N√≠ dh√©anann s√© seice√°il an sampla de <code>Button</code>
n√≥ de <code>SelectBox</code> at√° i gcomhph√°irt, glaonn s√© ar an modh <code>draw</code> ar an gcomhph√°irt. Tr√≠ <code>Box&lt;dyn Draw&gt;</code> a shonr√∫ mar chine√°l na luachanna sa veicteoir <code>components</code>, t√° <code>Screen</code> sainmh√≠nithe againn chun luachanna a theasta√≠onn uainn ar f√©idir linn an modh <code>draw</code> a ghlaoch orthu.</p>
<p>Is √© an bunt√°iste a bhaineann le h√∫s√°id r√©ada tr√©ithe agus c√≥ras cine√°il Rust chun c√≥d a scr√≠obh
cos√∫il le c√≥d ag baint √∫s√°ide as cl√≥scr√≠obh lachan n√° nach g√° d√∫inn a sheice√°il riamh an gcuireann luach modh √°irithe i bhfeidhm ag am rite n√° a bheith buartha faoi earr√°id√≠ a fh√°il
mura gcuireann luach modh i bhfeidhm ach go nglaoimid air ar aon n√≥s. N√≠ thioms√≥idh Rust
√°r gc√≥d mura gcuireann na luachanna na tr√©ithe a theasta√≠onn √≥ na r√©ada tr√©ithe i bhfeidhm.</p>
<p>Mar shampla, taispe√°nann Liost√°il 18-10 cad a tharla√≠onn m√° dh√©anaimid iarracht <code>Screen</code> a chruth√∫
le <code>String</code> mar chomhph√°irt:</p>
<Listing number="18-10" file-name="src/main.rs" caption="Attempting to use a type that doesn‚Äôt implement the trait object‚Äôs trait">
<pre><code class="language-rust ignore does_not_compile">use gui::Screen;

fn main() {
    let screen = Screen {
        components: vec![Box::new(String::from("Hi"))],
    };

    screen.run();
}</code></pre>
</Listing>
<p>Gheobhaimid an earr√°id seo mar nach gcuireann <code>String</code> an tr√©ith <code>Draw</code> i bhfeidhm:</p>
<pre><code class="language-console">$ cargo run
   Compiling gui v0.1.0 (file:///projects/gui)
error[E0277]: the trait bound `String: Draw` is not satisfied
 --&gt; src/main.rs:5:26
  |
5 |         components: vec![Box::new(String::from("Hi"))],
  |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Draw` is not implemented for `String`
  |
  = help: the trait `Draw` is implemented for `Button`
  = note: required for the cast from `Box&lt;String&gt;` to `Box&lt;dyn Draw&gt;`

For more information about this error, try `rustc --explain E0277`.
error: could not compile `gui` (bin "gui") due to 1 previous error
</code></pre>
<p>Cuireann an earr√°id seo in i√∫l d√∫inn go bhfuil rud √©igin √° chur ar aghaidh againn chuig <code>Screen</code> nach raibh s√© i gceist againn a chur ar aghaidh agus mar sin ba ch√≥ir d√∫inn cine√°l difri√∫il a chur ar aghaidh n√≥ ba ch√≥ir d√∫inn <code>Draw</code> a chur i bhfeidhm ar <code>String</code> ionas go mbeidh <code>Screen</code> in ann glaoch ar <code>draw</code> air.</p>
<h3 id="trait-objects-perform-dynamic-dispatch"><a class="header" href="#trait-objects-perform-dynamic-dispatch">Trait Objects Perform Dynamic Dispatch</a></h3>
<p>Meabhraigh sa chuid <a href="ch10-01-syntax.html#performance-of-code-using-generics">‚ÄúPerformance of Code Using
Generics‚Äù</a><!-- ignore --> i gCaibidil
10 √°r bpl√© ar an bpr√≥iseas monam√≥rf√∫ch√°in a dh√©antar ar ghinear√°lacha ag an
comhdaitheoir: gineann an comhdaitheoir cur i bhfeidhm neamhghinear√°lacha feidhmeanna agus
modhanna do gach cine√°l coincr√©ite a √∫s√°idimid in ionad paraim√©adar cine√°il ghinear√°lta.
T√° an c√≥d a eascra√≠onn as monam√≥rf√∫ch√°n ag d√©anamh <em>static dispatch</em>, is √© sin
nuair a bh√≠onn a fhios ag an comhdaitheoir c√©n modh at√° √° ghlaoch agat ag am an chomdaithe. T√° s√© seo
i gcodarsnacht le <em>dynamic dispatch</em>, is √© sin nuair nach f√©idir leis an comhdaitheoir a r√° ag am an chomdaithe
c√© acu modh at√° √° ghlaoch agat. I gc√°sanna seolta dinimici√∫la, asta√≠onn an tiomsaitheoir
c√≥d a chinnfidh ag am rith c√©n modh at√° le glaoch.</p>
<p>Nuair a √∫s√°idimid r√©ada tr√©ithe, n√≠ m√≥r do Rust seolta dinimici√∫il a √∫s√°id. N√≠l a fhios ag an tiomsaitheoir
na cine√°lacha go l√©ir a d'fh√©adfa√≠ a √∫s√°id leis an gc√≥d at√° ag √∫s√°id r√©ada tr√©ithe,
mar sin n√≠l a fhios aige c√©n modh at√° curtha i bhfeidhm ar c√©n cine√°l at√° le glaoch. Ina √°it sin, ag
am rith, √∫s√°ideann Rust na pointeoir√≠ taobh istigh den r√©ad tr√©ithe chun a fh√°il amach c√©n modh at√° le
ghlao. Tabha√≠onn an cuardach seo costas rith-ama nach dtarla√≠onn le seolta
statach. Cuireann seolta dinimici√∫il cosc ‚Äã‚Äã‚Äã‚Äãar an tiomsaitheoir freisin c√≥d modh a ionchl√≥, rud a chuireann cosc ‚Äã‚Äã‚Äã‚Äãar roinnt optamuithe, agus t√° roinnt rialacha ag Rust faoi c√° h√°it ar f√©idir agus nach f√©idir leat seolta dinimici√∫il a √∫s√°id, ar a dtugtar <a href="https://doc.rust-lang.org/reference/items/traits.html#dyn-compatibility"><em>dyn compatibility</em></a>. Mar sin f√©in, fuair muid sol√∫bthacht bhreise sa ch√≥d
a scr√≠obhamar i Liost√°il 18-5 agus a raibh muid in ann tac√∫ leis i Liost√°il 18-9, mar sin is
tr√°bhl√≥id le breithni√∫ √©.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="patr√∫n-dearaidh-d√≠rithe-ar-r√©ada-a-chur-i-bhfeidhm"><a class="header" href="#patr√∫n-dearaidh-d√≠rithe-ar-r√©ada-a-chur-i-bhfeidhm">Patr√∫n Dearaidh D√≠rithe ar R√©ada a Chur i bhFeidhm</a></h2>
<p>Is patr√∫n dearaidh d√≠rithe ar r√©ada √© an <em>patr√∫n st√°it</em>. Is √© cro√≠l√°r an
phatr√∫in n√° go sainmh√≠n√≠mid sraith st√°t a d'fh√©adfadh a bheith ag luach go hinmhe√°nach. L√©ir√≠tear na
st√°it le sraith de <em>r√©ada st√°it</em>, agus athra√≠onn iompar an luacha
bunaithe ar a staid. Oibreoimid tr√≠ shampla de strucht√∫r
post bhlag a bhfuil r√©imse ann chun a staid a choinne√°il, a bheidh ina r√©ad st√°it
√≥n tsraith "dr√©acht", "athbhreithni√∫", n√≥ "foilsithe".</p>
<p>Roinneann na r√©ada st√°it feidhmi√∫lacht: i Rust, ar nd√≥igh, √∫s√°idimid strucht√∫ir agus
tr√©ithe seachas r√©ada agus oidhreacht. T√° gach r√©ad st√°it freagrach
as a iompar f√©in agus as rial√∫ cathain ba ch√≥ir d√≥ athr√∫ go st√°t
eile. N√≠l a fhios ag an luach a shealbha√≠onn r√©ad st√°it aon rud faoi iompar difri√∫il na st√°t n√° cathain is ceart aistri√∫ idir st√°it.</p>
<p>Is √© an bunt√°iste a bhaineann le patr√∫n an st√°it a √∫s√°id n√°, nuair a athra√≠onn
riachtanais ghn√≥ an chl√°ir, nach mbeidh orainn c√≥d an
luacha ina bhfuil an st√°t n√° an c√≥d a √∫s√°ideann an luach a athr√∫. N√≠ bheidh orainn ach an c√≥d a nuashonr√∫ taobh istigh de cheann de na r√©ada st√°it chun a rialacha a athr√∫ n√≥ b'fh√©idir
n√≠os m√≥ r√©ada st√°it a chur leis.</p>
<p>Ar dt√∫s, cuirfimid patr√∫n an st√°it i bhfeidhm ar bhealach n√≠os traidisi√∫nta
at√° d√≠rithe ar r√©ada, ansin √∫s√°idfimid cur chuige at√° beag√°n n√≠os n√°d√∫rtha i
Rust. D√©anaimis ini√∫chadh ar shreabhadh oibre post blag a chur i bhfeidhm de r√©ir a ch√©ile ag baint √∫s√°ide as an
patr√∫n st√°it.</p>
<p>Beidh an fheidhmi√∫lacht dheireanach mar seo a leanas:</p>
<ol>
<li>Tosa√≠onn post blag mar dhr√©acht folamh.</li>
<li>Nuair a bheidh an dr√©acht d√©anta, iarrtar athbhreithni√∫ ar an bpost.</li>
<li>Nuair a cheada√≠tear an post, foils√≠tear √©.</li>
<li>N√≠ thugann ach poist bhlag foilsithe √°bhar ar ais le priont√°il, mar sin n√≠ f√©idir poist neamhcheadaithe a fhoilsi√∫ de thaisme.</li>
</ol>
<p>N√≠or cheart go mbeadh aon √©ifeacht ag aon athruithe eile a dh√©antar ar phost. Mar shampla, m√° dh√©anaimid iarracht dr√©achtphost blag a chead√∫ sula n-iarraimid athbhreithni√∫, ba ch√≥ir go bhfanfadh an post ina dhr√©acht neamhfhoilsithe.</p>
<p>L√©ir√≠onn Liost√°il 18-11 an sreabhadh oibre seo i bhfoirm c√≥id: seo sampla √∫s√°ide den
API a chuirfimid i bhfeidhm i gcliathbhosca leabharlainne darb ainm <code>blog</code>. N√≠ thioms√≥far √© seo f√≥s
toisc nach bhfuil an cliathbhosca <code>blog</code> curtha i bhfeidhm againn.</p>
<Listing number="18-11" file-name="src/main.rs" caption="Code that demonstrates the desired behavior we want our `blog` crate to have">
<pre><code class="language-rust ignore does_not_compile">use blog::Post;

fn main() {
    let mut post = Post::new();

    post.add_text("I ate a salad for lunch today");
    assert_eq!("", post.content());

    post.request_review();
    assert_eq!("", post.content());

    post.approve();
    assert_eq!("I ate a salad for lunch today", post.content());
}</code></pre>
</Listing>
<p>Ba mhaith linn ligean don √∫s√°ideoir dr√©achtphost nua blag a chruth√∫ le <code>Post::new</code>. Ba mhaith linn ligean do th√©acs a chur leis an bpost blag. M√° dh√©anaimid iarracht √°bhar an phoist a fh√°il l√°ithreach, roimh chead√∫, n√≠or cheart d√∫inn aon t√©acs a fh√°il mar go bhfuil an post f√≥s ina dhr√©acht. Chuireamar <code>assert_eq!</code> leis an gc√≥d chun cr√≠ocha taispe√°na. Bheadh ‚Äã‚Äãt√°st√°il aonaid den scoth chuige seo n√° a dhearbh√∫ go dtugann dr√©achtphost blag teaghr√°n folamh ar ais √≥n modh <code>content</code>, ach n√≠limid chun t√°st√°lacha a scr√≠obh don sampla seo.</p>
<p>Ansin, ba mhaith linn iarratas ar athbhreithni√∫ ar an bpost a chumas√∫, agus ba mhaith linn go dtabharfadh <code>content</code> teaghr√°n folamh ar ais agus muid ag fanacht leis an athbhreithni√∫. Nuair a fhaigheann an post cead√∫, ba ch√≥ir √© a fhoilsi√∫, rud a chialla√≠onn go dtabharfar t√©acs an phoist ar ais nuair a ghlaoitear ar <code>content</code>.</p>
<p>Tabhair faoi deara gurb √© an t-aon chine√°l a bhfuilimid ag idirghn√≠omh√∫ leis √≥n gcliathbhosca n√° an cine√°l <code>Post</code>. √ös√°idfidh an cine√°l seo an patr√∫n st√°it agus coinneoidh s√© luach a bheidh ar cheann de thr√≠ r√©ad st√°it a l√©ir√≠onn na st√°it √©ags√∫la a d'fh√©adfadh post a bheith
i ndr√©acht, ag fanacht le hathbhreithni√∫, n√≥ foilsithe. D√©anfar athr√∫ √≥ st√°t amh√°in go st√°t eile
a bhainisti√∫ go hinmhe√°nach laistigh den chine√°l <code>Post</code>. Athra√≠onn na st√°it mar
fhreagra ar na modhanna a ghlaonn √∫s√°ideoir√≠ √°r leabharlainne ar an gc√°s <code>Post</code>,
ach n√≠ g√° d√≥ibh na hathruithe st√°it a bhainisti√∫ go d√≠reach. Chomh maith leis sin, n√≠ f√©idir le h√∫s√°ideoir√≠
bot√∫n a dh√©anamh leis na st√°it, mar shampla post a fhoilsi√∫ sula nd√©antar athbhreithni√∫ air.</p>
<h3 id="sainmh√≠ni√∫-post-agus-c√°s-nua-a-chruth√∫-sa-st√°das-dr√©achta"><a class="header" href="#sainmh√≠ni√∫-post-agus-c√°s-nua-a-chruth√∫-sa-st√°das-dr√©achta">Sainmh√≠ni√∫ <code>Post</code> agus C√°s Nua a Chruth√∫ sa St√°das Dr√©achta</a></h3>
<p>Tosa√≠mis ar chur i bhfeidhm na leabharlainne! T√° a fhios againn go bhfuil
strucht√∫r <code>Post</code> poibl√≠ de dh√≠th orainn a bhfuil roinnt √°bhair ann, mar sin tos√≥imid leis an
sainmh√≠ni√∫ ar an strucht√∫r agus feidhm phoibl√≠ <code>nua</code> ghaolmhar chun c√°s de <code>Post</code> a chruth√∫, mar a thaispe√°ntar i Liost√°il 18-12. D√©anfaimid tr√©ith phr√≠obh√°ideach <code>State</code> freisin a shaineoidh an t-iompar a chaithfidh gach r√©ad st√°it le haghaidh <code>Post</code> a bheith aige.</p>
<p>Ansin coinneoidh <code>Post</code> r√©ad tr√©ithe de <code>Box&lt;dyn State&gt;</code> taobh istigh de <code>Option&lt;T&gt;</code> i r√©imse pr√≠obh√°ideach darb ainm <code>state</code> chun an r√©ad st√°it a choinne√°il. Feicfidh t√∫ c√©n f√°th go bhfuil an
<code>Option&lt;T&gt;</code> riachtanach i gceann tamaill.</p>
<Listing number="18-12" file-name="src/lib.rs" caption="Definition of a `Post` struct and a `new` function that creates a new `Post` instance, a `State` trait, and a `Draft` struct">
<pre><code class="language-rust noplayground">pub struct Post {
    state: Option&lt;Box&lt;dyn State&gt;&gt;,
    content: String,
}

impl Post {
    pub fn new() -&gt; Post {
        Post {
            state: Some(Box::new(Draft {})),
            content: String::new(),
        }
    }
}

trait State {}

struct Draft {}

impl State for Draft {}</code></pre>
</Listing>
<p>Sainmh√≠n√≠onn an tr√©ith <code>State</code> an t-iompar a roinneann st√°it √©ags√∫la poist. Is iad na r√©ada st√°it <code>Draft</code>, <code>PendingReview</code>, agus <code>Published</code>, agus cuirfidh siad go l√©ir an tr√©ith <code>State</code> i bhfeidhm. Faoi l√°thair, n√≠l aon mhodhanna ag an tr√©ith, agus
tosa√≠mid tr√≠d an st√°t <code>Draft</code> amh√°in a shaini√∫ mar is √© sin an st√°t inar mian linn
go dtos√≥dh post.</p>
<p>Nuair a chrutha√≠mid <code>Post</code> nua, socra√≠mid a r√©imse <code>state</code> go luach <code>Some</code> a
shealbha√≠onn <code>Box</code>. Point√≠onn an <code>Box</code> seo chuig sampla nua den strucht√∫r <code>Draft</code>.
Cinnt√≠onn s√© seo aon uair a chrutha√≠mid sampla nua de <code>Post</code>, go dtos√≥idh s√© mar
dhr√©acht. Toisc go bhfuil r√©imse <code>state</code> an <code>Post</code> pr√≠obh√°ideach, n√≠l aon bhealach ann
<code>Post</code> a chruth√∫ in aon st√°t eile! Sa fheidhm <code>Post::new</code>, socra√≠mid an r√©imse
<code>content</code> go <code>String</code> nua, folamh.</p>
<h3 id="st√≥r√°il-t√©acs-√Åbhar-an-phoist"><a class="header" href="#st√≥r√°il-t√©acs-√Åbhar-an-phoist">St√≥r√°il T√©acs √Åbhar an Phoist</a></h3>
<p>Chonaiceamar i Liost√°il 18-11 gur mhaith linn a bheith in ann glaoch ar mhodh darb ainm <code>add_text</code> agus <code>&amp;str</code> a chur air a chuirtear leis ansin mar √°bhar t√©acs an
phoist bhlag. Cuirimid √© seo i bhfeidhm mar mhodh, seachas an r√©imse <code>content</code> a nochtadh mar <code>pub</code>, ionas gur f√©idir linn modh a chur i bhfeidhm n√≠os d√©ana√≠ a rial√≥idh conas a
l√©itear sonra√≠ an r√©imse <code>content</code>. T√° an modh <code>add_text</code> s√°ch
simpl√≠, mar sin cuirimis an cur i bhfeidhm i Liost√°il 18-13 leis an mbloc <code>impl Post</code>:</p>
<Listing number="18-13" file-name="src/lib.rs" caption="Implementing the `add_text` method to add text to a post‚Äôs `content`">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Post {
</span><span class="boring">    state: Option&lt;Box&lt;dyn State&gt;&gt;,
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Post {
    // --snip--
<span class="boring">    pub fn new() -&gt; Post {
</span><span class="boring">        Post {
</span><span class="boring">            state: Some(Box::new(Draft {})),
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span>    pub fn add_text(&amp;mut self, text: &amp;str) {
        self.content.push_str(text);
    }
}
<span class="boring">
</span><span class="boring">trait State {}
</span><span class="boring">
</span><span class="boring">struct Draft {}
</span><span class="boring">
</span><span class="boring">impl State for Draft {}</span></code></pre>
</Listing>
<p>Glacann an modh <code>add_text</code> tagairt inathraithe do <code>self</code>, mar go bhfuilimid ag athr√∫ an tsampla <code>Post</code> a bhfuilimid ag glaoch <code>add_text</code> air. Ansin glaoimid <code>push_str</code> ar an <code>String</code> i <code>content</code> agus cuirimid an arg√≥int <code>text</code> ar aghaidh chun √© a chur leis
an <code>content</code> s√°bh√°ilte. N√≠ bhraitheann an t-iompar seo ar an staid ina bhfuil an post,
mar sin n√≠l s√© mar chuid den phatr√∫n staide. N√≠ idirghn√≠omha√≠onn an modh <code>add_text</code>
leis an r√©imse <code>state</code> ar chor ar bith, ach is cuid den iompar √© ar mhaith linn
taca√≠ocht a thabhairt d√≥.</p>
<h3 id="a-chinnti√∫-go-bhfuil-√Åbhar-dr√©achta-poist-folamh"><a class="header" href="#a-chinnti√∫-go-bhfuil-√Åbhar-dr√©achta-poist-folamh">A Chinnti√∫ go bhfuil √Åbhar Dr√©achta-Poist Folamh</a></h3>
<p>Fi√∫ tar √©is d√∫inn <code>add_text</code> a ghlaoch agus roinnt √°bhair a chur len√°r bpost, ba mhaith linn f√≥s go dtabharfadh an modh <code>content</code> slisne teaghr√°in folamh ar ais mar go bhfuil an post
f√≥s i staid an dr√©achta, mar a thaispe√°ntar ar l√≠ne 7 de Liost√°il 18-11. Faoi l√°thair, d√©anaimis an modh <code>√°bhar</code> a chur i bhfeidhm leis an rud is simpl√≠ a chomhl√≠onfaidh an riachtanas seo: slisne teaghr√°in folamh a thabhairt ar ais i gc√≥na√≠. Athr√≥imid √© seo n√≠os d√©ana√≠ nuair a chuirfimid an cumas i bhfeidhm staid poist a athr√∫ ionas gur f√©idir √© a fhoilsi√∫.
Go dt√≠ seo, n√≠ f√©idir le poist a bheith ach i staid dr√©achta, mar sin ba ch√≥ir go mbeadh √°bhar an phoist folamh i gc√≥na√≠. Taispe√°nann Liost√°il 18-14 an cur i bhfeidhm √°itchoinne√°la√≠ seo:</p>
<Listing number="18-14" file-name="src/lib.rs" caption="Adding a placeholder implementation for the `content` method on `Post` that always returns an empty string slice">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Post {
</span><span class="boring">    state: Option&lt;Box&lt;dyn State&gt;&gt;,
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Post {
    // --snip--
<span class="boring">    pub fn new() -&gt; Post {
</span><span class="boring">        Post {
</span><span class="boring">            state: Some(Box::new(Draft {})),
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn add_text(&amp;mut self, text: &amp;str) {
</span><span class="boring">        self.content.push_str(text);
</span><span class="boring">    }
</span><span class="boring">
</span>    pub fn content(&amp;self) -&gt; &amp;str {
        ""
    }
}
<span class="boring">
</span><span class="boring">trait State {}
</span><span class="boring">
</span><span class="boring">struct Draft {}
</span><span class="boring">
</span><span class="boring">impl State for Draft {}</span></code></pre>
</Listing>
<p>Leis an modh <code>√°bhar</code> breise seo, oibr√≠onn gach rud i Liost√°il 18-11 suas go dt√≠ l√≠ne 7 mar a bh√≠ beartaithe.</p>
<h3 id="athra√≠onn-athbhreithni√∫-ar-an-bpost-a-st√°das"><a class="header" href="#athra√≠onn-athbhreithni√∫-ar-an-bpost-a-st√°das">Athra√≠onn Athbhreithni√∫ ar an bPost a St√°das</a></h3>
<p>Ansin, n√≠ m√≥r d√∫inn feidhmi√∫lacht a chur leis chun athbhreithni√∫ ar phost a iarraidh, agus ba cheart go n-athr√≥dh s√© a staid √≥ <code>Draft</code> go <code>PendingReview</code>. Taispe√°nann Liost√°il 18-15 an c√≥d seo:</p>
<Listing number="18-15" file-name="src/lib.rs" caption="Implementing `request_review` methods on `Post` and the `State` trait">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Post {
</span><span class="boring">    state: Option&lt;Box&lt;dyn State&gt;&gt;,
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Post {
    // --snip--
<span class="boring">    pub fn new() -&gt; Post {
</span><span class="boring">        Post {
</span><span class="boring">            state: Some(Box::new(Draft {})),
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn add_text(&amp;mut self, text: &amp;str) {
</span><span class="boring">        self.content.push_str(text);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn content(&amp;self) -&gt; &amp;str {
</span><span class="boring">        ""
</span><span class="boring">    }
</span><span class="boring">
</span>    pub fn request_review(&amp;mut self) {
        if let Some(s) = self.state.take() {
            self.state = Some(s.request_review())
        }
    }
}

trait State {
    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
}

struct Draft {}

impl State for Draft {
    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
        Box::new(PendingReview {})
    }
}

struct PendingReview {}

impl State for PendingReview {
    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
        self
    }
}</code></pre>
</Listing>
<p>Tugaimid modh poibl√≠ darb ainm <code>request_review</code> do <code>Post</code> a ghlacfaidh tagairt inathraithe
do <code>self</code>. Ansin glaoimid ar mhodh inmhe√°nach <code>request_review</code> ar an
st√°das reatha de <code>Post</code>, agus √≠d√≠onn an dara modh <code>request_review</code> seo an
st√°das reatha agus tugann s√© staid nua ar ais.</p>
<p>Cuirimid an modh <code>request_review</code> leis an tr√©ith <code>State</code>; beidh ar gach cine√°l a
chuireann an tr√©ith i bhfeidhm an modh <code>request_review</code> a chur i bhfeidhm anois.
Tabhair faoi deara, seachas <code>self</code>, <code>&amp;self</code>, n√≥ <code>&amp;mut self</code> a bheith mar an ch√©ad
pharaim√©adar den mhodh, go bhfuil <code>self: Box&lt;Self&gt;</code> againn. Cialla√≠onn an comhr√©ir seo nach bhfuil an
modh bail√≠ ach amh√°in nuair a ghlaotar air ar <code>Box</code> ina bhfuil an cine√°l. Glacann an comhr√©ir seo
√∫in√©ireacht ar <code>Box&lt;Self&gt;</code>, ag cur an tseanstaid ar neamhn√≠ ionas gur f√©idir luach st√°dais an
<code>Post</code> a athr√∫ go staid nua.</p>
<p>Chun an seanst√°das a √≠di√∫, n√≠ m√≥r don mhodh <code>request_review</code> √∫in√©ireacht
a ghlacadh ar an luach st√°dais. Seo an √°it a dtagann an <code>Option</code> sa r√©imse <code>state</code> de <code>Post</code> isteach: glaoimid ar an modh <code>take</code> chun an luach <code>Some</code> a bhaint as an r√©imse <code>state</code> agus <code>None</code> a fh√°g√°il ina √°it, mar n√≠ ligeann Rust d√∫inn r√©ims√≠ neamhl√≠onta a bheith againn i strucht√∫ir. Ligeann s√© seo d√∫inn an luach <code>state</code> a bhogadh amach as
<code>Post</code> seachas √© a fh√°il ar iasacht. Ansin socr√≥imid luach <code>state</code> an phoist mar
thoradh na hoibr√≠ochta seo.</p>
<p>N√≠ m√≥r d√∫inn <code>state</code> a shocr√∫ go <code>None</code> go sealadach seachas √© a shocr√∫ go d√≠reach
le c√≥d cos√∫il le <code>self.state = self.state.request_review();</code> chun √∫in√©ireacht a fh√°il ar
luach an <code>state</code>. Cinnt√≠onn s√© seo nach f√©idir le <code>Post</code> an seanluach <code>state</code> a √∫s√°id tar √©is
d√∫inn √© a chlaochl√∫ go st√°t nua.</p>
<p>Tugann an modh <code>request_review</code> ar <code>Draft</code> sampla nua, boscaithe de strucht√∫r nua <code>PendingReview</code> ar ais, a l√©ir√≠onn an st√°t nuair a bh√≠onn post ag fanacht le
hathbhreithni√∫. Cuireann an strucht√∫r <code>PendingReview</code> an modh <code>request_review</code> i bhfeidhm freisin
ach n√≠ dh√©anann s√© aon chlaochluithe. Ina √°it sin, filleann s√© √© f√©in, mar nuair a
iarraimid athbhreithni√∫ ar phost at√° cheana f√©in sa st√°t <code>PendingReview</code>, ba ch√≥ir d√≥ fanacht
sa st√°t <code>PendingReview</code>.</p>
<p>Anois is f√©idir linn tos√∫ ag feice√°il bunt√°ist√≠ an phatr√∫in st√°it: t√° an
modh <code>request_review</code> ar <code>Post</code> mar an gc√©anna is cuma c√©n luach <code>state</code> at√° air. T√° gach
st√°das freagrach as a rialacha f√©in.</p>
<p>F√°gfaimid an modh <code>content</code> ar <code>Post</code> mar at√°, ag filleadh slisne teaghr√°in folamh. Is f√©idir linn <code>Post</code> a bheith againn anois sa st√°t <code>PendingReview</code> chomh maith leis an
st√°das <code>Draft</code>, ach ba mhaith linn an t-iompar c√©anna sa st√°t <code>PendingReview</code>.
Oibr√≠onn Liost√°il 18-11 anois suas go dt√≠ l√≠ne 10!</p>
<!-- Seancheannteidil. N√° bain iad n√≥ d'fh√©adfadh naisc briseadh. -->
<p><a id="adding-the-approve-method-that-changes-the-behavior-of-content"></a></p>
<h3 id="ag-cur-approve-leis-chun-iompar-content-a-athr√∫"><a class="header" href="#ag-cur-approve-leis-chun-iompar-content-a-athr√∫">Ag cur <code>approve</code> leis chun Iompar <code>content</code> a Athr√∫</a></h3>
<p>Beidh an modh <code>approve</code> cos√∫il leis an modh <code>request_review</code>: socr√≥idh s√© <code>state</code> go dt√≠ an luach a deir an staid reatha ba ch√≥ir a bheith aige nuair a cheada√≠tear an staid sin, mar a thaispe√°ntar i Liost√°il 18-16:</p>
<Listing number="18-16" file-name="src/lib.rs" caption="Implementing the `approve` method on `Post` and the `State` trait">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Post {
</span><span class="boring">    state: Option&lt;Box&lt;dyn State&gt;&gt;,
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Post {
    // --snip--
<span class="boring">    pub fn new() -&gt; Post {
</span><span class="boring">        Post {
</span><span class="boring">            state: Some(Box::new(Draft {})),
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn add_text(&amp;mut self, text: &amp;str) {
</span><span class="boring">        self.content.push_str(text);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn content(&amp;self) -&gt; &amp;str {
</span><span class="boring">        ""
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn request_review(&amp;mut self) {
</span><span class="boring">        if let Some(s) = self.state.take() {
</span><span class="boring">            self.state = Some(s.request_review())
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span>    pub fn approve(&amp;mut self) {
        if let Some(s) = self.state.take() {
            self.state = Some(s.approve())
        }
    }
}

trait State {
    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
}

struct Draft {}

impl State for Draft {
    // --snip--
<span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        Box::new(PendingReview {})
</span><span class="boring">    }
</span><span class="boring">
</span>    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
        self
    }
}

struct PendingReview {}

impl State for PendingReview {
    // --snip--
<span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">
</span>    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
        Box::new(Published {})
    }
}

struct Published {}

impl State for Published {
    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
        self
    }

    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
        self
    }
}</code></pre>
</Listing>
<p>Cuirimid an modh <code>approve</code> leis an tr√©ith <code>State</code> agus cuirimid strucht√∫r nua leis a chuireann <code>State</code> i bhfeidhm, an staid <code>Published</code>.</p>
<p>Cos√∫il leis an gcaoi a n-oibr√≠onn <code>request_review</code> ar <code>PendingReview</code>, m√° ghlaonn muid ar an modh <code>approve</code> ar <code>Draft</code>, n√≠ bheidh aon √©ifeacht aige mar go dtabharfaidh <code>approve</code> <code>self</code> ar ais. Nuair a ghlaonn muid ar <code>approve</code> ar <code>PendingReview</code>, tugann s√© sampla nua, boscaithe, den strucht√∫r <code>Published</code> ar ais. Cuireann an strucht√∫r <code>Published</code> an tr√©ith <code>State</code> i bhfeidhm, agus i gc√°s an mhodha <code>request_review</code> agus an mhodha <code>approve</code> araon, tugann s√© √© f√©in ar ais, mar ba ch√≥ir don phost fanacht sa staid <code>Published</code> sna c√°sanna sin.</p>
<p>Anois n√≠ m√≥r d√∫inn an modh <code>content</code> a nuashonr√∫ ar <code>Post</code>. Ba mhaith linn go mbeadh an luach a thugtar ar ais √≥ <code>content</code> ag brath ar staid reatha an <code>Post</code>, mar sin beidh an <code>Post</code> toscaire chuig modh <code>content</code> at√° sainmh√≠nithe ar a <code>state</code>,
mar a thaispe√°ntar i Liost√°il 18-17:</p>
<Listing number="18-17" file-name="src/lib.rs" caption="Updating the `content` method on `Post` to delegate to a `content` method on `State`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">pub struct Post {
</span><span class="boring">    state: Option&lt;Box&lt;dyn State&gt;&gt;,
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span>impl Post {
    // --snip--
<span class="boring">    pub fn new() -&gt; Post {
</span><span class="boring">        Post {
</span><span class="boring">            state: Some(Box::new(Draft {})),
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn add_text(&amp;mut self, text: &amp;str) {
</span><span class="boring">        self.content.push_str(text);
</span><span class="boring">    }
</span><span class="boring">
</span>    pub fn content(&amp;self) -&gt; &amp;str {
        self.state.as_ref().unwrap().content(self)
    }
    // --snip--
<span class="boring">
</span><span class="boring">    pub fn request_review(&amp;mut self) {
</span><span class="boring">        if let Some(s) = self.state.take() {
</span><span class="boring">            self.state = Some(s.request_review())
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn approve(&amp;mut self) {
</span><span class="boring">        if let Some(s) = self.state.take() {
</span><span class="boring">            self.state = Some(s.approve())
</span><span class="boring">        }
</span><span class="boring">    }
</span>}
<span class="boring">
</span><span class="boring">trait State {
</span><span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Draft {}
</span><span class="boring">
</span><span class="boring">impl State for Draft {
</span><span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        Box::new(PendingReview {})
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct PendingReview {}
</span><span class="boring">
</span><span class="boring">impl State for PendingReview {
</span><span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        Box::new(Published {})
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Published {}
</span><span class="boring">
</span><span class="boring">impl State for Published {
</span><span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>√ìs rud √© gurb √© an sprioc na rialacha seo go l√©ir a choinne√°il laistigh de na strucht√∫ir a chuireann <code>State</code> i bhfeidhm, glaoimid modh <code>content</code> ar an luach i <code>state</code> agus cuirimid an sampla <code>post</code> (is √© sin, <code>self</code>) ar aghaidh mar arg√≥int. Ansin, cuirimid an luach ar ais a
fhilleann tr√≠ √∫s√°id a bhaint as an modh <code>content</code> ar an luach <code>state</code>.</p>
<p>Tugaimid an modh <code>as_ref</code> ar an <code>Option</code> mar ba mhaith linn tagairt don
luach laistigh den <code>Option</code> seachas √∫in√©ireacht an luacha. √ìs rud √© gur <code>Option&lt;Box&lt;dyn State&gt;&gt;</code> √© <code>state</code>, nuair a ghlaonn muid ar <code>as_ref</code>, cuirtear <code>Option&lt;&amp;Box&lt;dyn State&gt;&gt;</code> ar ais. Mura nglaonn muid ar <code>as_ref</code>, gheobhaimis earr√°id mar
n√≠ f√©idir linn <code>state</code> a bhogadh amach as an <code>&amp;self</code> iasachta den pharaim√©adar feidhme.</p>
<p>Ansin glaoimid ar an modh <code>unwrap</code>, rud nach mbeidh scaoll orainn cho√≠che, mar t√° a fhios againn go gcinnt√≠onn na modhanna ar <code>Post</code> go mbeidh luach <code>Some</code> i <code>state</code> i gc√≥na√≠ nuair a bheidh na modhanna sin d√©anta. Seo ceann de na c√°sanna a phl√©amar sa
chuid <a href="ch09-03-to-panic-or-not-to-panic.html#cases-in-which-you-have-more-information-than-the-compiler">‚ÄúC√°sanna ina bhfuil Tuilleadh Eolais Agat N√° an
Tiomsaitheoir‚Äù</a><!-- ignore --> de Chaibidil 9 nuair a
bhfuil a fhios againn nach f√©idir luach <code>None</code> a bheith ann cho√≠che, c√© nach bhfuil an tiomsaitheoir in ann
√© sin a thuiscint.</p>
<p>Ag an bpointe seo, nuair a ghlaonn muid ar <code>content</code> ar an <code>&amp;Box&lt;dyn State&gt;</code>, beidh √©ifeacht ag deref coercion ar an <code>&amp;</code> agus ar an <code>Box</code> agus mar sin glaofar ar an modh <code>content</code> sa deireadh ar an gcine√°l a chuireann an tr√©ith <code>State</code> i bhfeidhm. Cialla√≠onn s√© sin go gcaithfimid <code>√°bhar</code> a chur leis an sainmh√≠ni√∫ tr√©ithe <code>State</code>, agus sin an √°it a gcuirfimid an loighic maidir leis an √°bhar at√° le tabhairt ar ais ag brath ar an st√°t at√° againn, mar a thaispe√°ntar i Liost√°il 18-18:</p>
<Listing number="18-18" file-name="src/lib.rs" caption="Adding the `content` method to the `State` trait">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Post {
</span><span class="boring">    state: Option&lt;Box&lt;dyn State&gt;&gt;,
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Post {
</span><span class="boring">    pub fn new() -&gt; Post {
</span><span class="boring">        Post {
</span><span class="boring">            state: Some(Box::new(Draft {})),
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn add_text(&amp;mut self, text: &amp;str) {
</span><span class="boring">        self.content.push_str(text);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn content(&amp;self) -&gt; &amp;str {
</span><span class="boring">        self.state.as_ref().unwrap().content(self)
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn request_review(&amp;mut self) {
</span><span class="boring">        if let Some(s) = self.state.take() {
</span><span class="boring">            self.state = Some(s.request_review())
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn approve(&amp;mut self) {
</span><span class="boring">        if let Some(s) = self.state.take() {
</span><span class="boring">            self.state = Some(s.approve())
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>trait State {
    // --snip--
<span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt;;
</span><span class="boring">
</span>    fn content&lt;'a&gt;(&amp;self, post: &amp;'a Post) -&gt; &amp;'a str {
        ""
    }
}

// --snip--
<span class="boring">
</span><span class="boring">struct Draft {}
</span><span class="boring">
</span><span class="boring">impl State for Draft {
</span><span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        Box::new(PendingReview {})
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct PendingReview {}
</span><span class="boring">
</span><span class="boring">impl State for PendingReview {
</span><span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        Box::new(Published {})
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>struct Published {}

impl State for Published {
    // --snip--
<span class="boring">    fn request_review(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    fn approve(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn State&gt; {
</span><span class="boring">        self
</span><span class="boring">    }
</span><span class="boring">
</span>    fn content&lt;'a&gt;(&amp;self, post: &amp;'a Post) -&gt; &amp;'a str {
        &amp;post.content
    }
}</code></pre>
</Listing>
<p>Cuirimid cur i bhfeidhm r√©amhshocraithe leis don mhodh <code>content</code> a thugann slisne teaghr√°n folamh ar ais. Cialla√≠onn s√© sin nach g√° d√∫inn <code>content</code> a chur i bhfeidhm ar na strucht√∫ir <code>Draft</code> agus <code>PendingReview</code>. S√°r√≥idh an strucht√∫r <code>Published</code> an modh <code>content</code> agus cuirfidh s√© an luach i <code>post.content</code> ar ais.</p>
<p>Tabhair faoi deara go bhfuil n√≥ta√≠ saoil ag teast√°il uainn ar an modh seo, mar a phl√©amar i
gCaibidil 10. T√°imid ag glacadh tagairt do <code>post</code> mar arg√≥int agus ag filleadh tagairt do chuid den <code>post</code> sin, mar sin t√° saolr√© an tagartha a tugadh ar ais gaolmhar le saolr√© an arg√≥int <code>post</code>.</p>
<p>Agus t√°imid cr√≠ochnaithe‚Äîoibr√≠onn Liosta 18-11 anois! T√° an patr√∫n st√°it curtha i bhfeidhm againn le rialacha shreabhadh oibre an phoist bhlag. T√° an loighic a bhaineann leis na
rialacha ina gc√≥na√≠ sna r√©ada st√°it seachas a bheith scaipthe ar fud <code>Post</code>.</p>
<blockquote>
<h4 id="c√©n-f√°th-nach-bhfuil-enum-ann"><a class="header" href="#c√©n-f√°th-nach-bhfuil-enum-ann">C√©n F√°th Nach bhfuil Enum ann?</a></h4>
<p>B‚Äôfh√©idir go raibh t√∫ ag smaoineamh c√©n f√°th n√°r √∫s√°id muid <code>enum</code> leis na st√°it phoist √©ags√∫la
mar athr√≥ga. Is r√©iteach f√©ideartha √© sin cinnte, bain triail as
agus d√©an compar√°id idir na tortha√≠ deiridh chun a fheice√°il c√© acu is fearr leat! M√≠bhunt√°iste amh√°in a bhaineann le
enum a √∫s√°id n√° go mbeidh g√° le
abairt <code>match</code> n√≥ a leith√©id i ngach √°it a sheice√°lann luach an enum chun gach athr√≥g f√©ideartha a l√°imhse√°il. D‚Äôfh√©adfadh s√© seo a bheith n√≠os athchleachtach n√° an r√©iteach tr√©ith r√©ada seo.</p>
</blockquote>
<h3 id="comhbhabht√°lacha-an-phatr√∫in-st√°it"><a class="header" href="#comhbhabht√°lacha-an-phatr√∫in-st√°it">Comhbhabht√°lacha an Phatr√∫in St√°it</a></h3>
<p>T√° s√© l√©irithe againn go bhfuil Rust in ann an patr√∫n st√°it at√° d√≠rithe ar r√©ada a chur i bhfeidhm chun na cine√°lacha √©ags√∫la iompair ba ch√≥ir a bheith ag post i
ngach st√°t a chuimsi√∫. N√≠l aon rud ar eolas ag na modhanna ar <code>Post</code> faoi na hiompra√≠ochta√≠ √©ags√∫la. An
tsl√≠ ar eagra√≠omar an c√≥d, n√≠ m√≥r d√∫inn breathn√∫ in aon √°it amh√°in chun na
beala√≠ √©ags√∫la a fh√°il amach inar f√©idir le post foilsithe iompar: cur i bhfeidhm an tr√©ith <code>State</code>
ar an strucht√∫r <code>Published</code>.</p>
<p>D√° mbeadh orainn cur i bhfeidhm malartach a chruth√∫ nach n-√∫s√°idfeadh an patr√∫n st√°it, d'fh√©adfaimis nathanna <code>match</code> a √∫s√°id sna modhanna ar <code>Post</code> n√≥ fi√∫ sa ch√≥d <code>main</code> a sheice√°lann staid an phoist agus a athra√≠onn iompar sna h√°iteanna sin. Chiall√≥dh s√© sin go mbeadh orainn breathn√∫ i roinnt √°iteanna chun
tuigbhe√°il a dh√©anamh ar na himpleachta√≠ go l√©ir a bhaineann le post a bheith sa staid fhoilsithe! N√≠ dh√©anfadh s√© seo ach m√©ad√∫ d√° mh√©ad staid a chuirfimis leis: bheadh ‚Äã‚Äã‚Äã‚Äãl√°mh eile ag teast√°il √≥ gach ceann de na nathanna <code>match</code> sin.</p>
<p>Leis an patr√∫n st√°it, n√≠l nathanna <code>match</code> ag teast√°il √≥ na modhanna <code>Post</code> agus na h√°iteanna ina n-√∫s√°idimid <code>Post</code>, agus chun staid nua a chur leis, n√≠ bheadh ‚Äã‚Äã‚Äã‚Äãort ach
strucht√∫r nua a chur leis agus na modhanna tr√©ithe a chur i bhfeidhm ar an strucht√∫r sin.</p>
<p>Is furasta an cur i bhfeidhm a √∫s√°ideann an patr√∫n st√°it a leathn√∫ chun n√≠os m√≥
feidhmi√∫lachta a chur leis. Chun simpl√≠ocht an ch√≥id a chothabh√°il a √∫s√°ideann an
patr√∫n st√°it a fheice√°il, bain triail as c√∫pla ceann de na molta√≠ seo:</p>
<ul>
<li>Cuir modh <code>reject</code> leis a athra√≠onn staid an phoist √≥ 'Ag Feitheamh Athbhreithnithe' ar ais
go <code>Draft</code>.</li>
<li>√âil√≠tear dh√° ghlao chun <code>approve</code> a dh√©anamh sula bhf√©adfar an st√°t a athr√∫ go <code>Published</code>.</li>
<li>Ceada√≠tear d'√∫s√°ideoir√≠ √°bhar t√©acs a chur leis ach amh√°in nuair at√° post i st√°t <code>Draft</code>.
Leid: b√≠odh an r√©ad st√°it freagrach as a bhf√©adfadh athr√∫ a dh√©anamh faoin
√°bhar ach n√≠ bheidh s√© freagrach as an <code>Post</code> a mhodhn√∫.</li>
</ul>
<p>M√≠bhunt√°iste amh√°in a bhaineann leis an bpatr√∫n st√°it n√°, toisc go gcuireann na st√°it na
haistrithe idir st√°it i bhfeidhm, go bhfuil cuid de na st√°it c√∫pl√°ilte lena ch√©ile. D√°
mbeadh
st√°t eile √° chur againn idir <code>PendingReview</code> agus <code>Published</code>, amhail <code>Scheduled</code>,
bheadh ‚Äã‚Äãorainn an c√≥d i <code>PendingReview</code> a athr√∫ chun aistri√∫ go
<code>Scheduled</code> ina ionad. Bheadh ‚Äã‚Äã‚Äã‚Äãs√© n√≠os l√∫ oibre mura mbeadh ar <code>PendingReview</code>
athr√∫ le st√°t nua a chur leis, ach chiall√≥dh s√© sin aistri√∫ go
patr√∫n dearaidh eile.</p>
<p>M√≠bhunt√°iste eile is ea gur dh√∫bla√≠omar roinnt loighce. Chun cuid den
d√∫bl√°il a dh√≠chur, d'fh√©adfaimis iarracht a dh√©anamh cur i bhfeidhm r√©amhshocraithe a dh√©anamh do na modhanna
<code>request_review</code> agus <code>approve</code> ar an tr√©ith <code>State</code> a thugann <code>self</code> ar ais;
mar sin f√©in, n√≠ bheadh ‚Äã‚Äãs√© seo comhoiri√∫nach le dyn, mar n√≠l a fhios ag an tr√©ith cad
a bheidh sa <code>self</code> coincr√©iteach go d√≠reach. Ba mhaith linn a bheith in ann <code>State</code> a √∫s√°id mar
r√©ad tr√©ithe, mar sin n√≠ m√≥r d√∫inn a mhodhanna a bheith comhoiri√∫nach le dyn.</p>
<p>I measc d√∫bl√°il eile t√° cur i bhfeidhm comhchos√∫la na modhanna <code>request_review</code>
agus <code>approve</code> ar <code>Post</code>. D√©anann an d√° mhodh tarmligean chuig cur i bhfeidhm
an mhodha ch√©anna ar an luach sa r√©imse <code>state</code> de <code>Option::take</code> agus socra√≠onn siad an luach
nua den r√©imse <code>state</code> don toradh. D√° mbeadh go leor modhanna againn ar <code>Post</code>
a lean an patr√∫n seo, d'fh√©adfaimis smaoineamh ar mhacra a shaini√∫ chun an
athr√° a dh√≠chur (f√©ach an chuid <a href="ch20-05-macros.html#macros">‚ÄúMacros‚Äù</a><!-- ignore --> i gCaibidil 20).</p>
<p>Tr√≠ an patr√∫n st√°it a chur i bhfeidhm d√≠reach mar at√° s√© sainmh√≠nithe do theangacha r√©ada-dh√≠rithe, n√≠limid ag baint an leasa is m√≥ as l√°idreachta√≠ Rust agus a d'fh√©adfaimis.
F√©achaimid ar roinnt athruithe is f√©idir linn a dh√©anamh ar an gcliathbhosca <code>blog</code> a fh√©adann st√°it neamhbhail√≠ agus aistrithe a dh√©anamh ina n-earr√°id√≠ ag am tiomsaithe.</p>
<h4 id="ionch√≥d√∫-st√°it-agus-iompair-mar-chine√°lacha"><a class="header" href="#ionch√≥d√∫-st√°it-agus-iompair-mar-chine√°lacha">Ionch√≥d√∫ St√°it agus Iompair mar Chine√°lacha</a></h4>
<p>Taispe√°nfaimid duit conas athmhachnamh a dh√©anamh ar an bpatr√∫n st√°it chun sraith dhifri√∫il de
chomhr√©itigh a fh√°il. In ionad na st√°it agus na haistrithe a chuimsi√∫ go hioml√°n ionas nach mbeidh aon eolas ag an gc√≥d seachtrach orthu, d√©anfaimid na st√°it a ionch√≥d√∫ i gcine√°lacha
difri√∫la. D√° bhr√≠ sin, cuirfidh c√≥ras seice√°la cine√°il Rust cosc ‚Äã‚Äãar iarrachta√≠ chun
poist dr√©achta a √∫s√°id i gc√°s nach gceada√≠tear ach poist fhoilsithe tr√≠ earr√°id tiomsaitheora a eisi√∫int.</p>
<p>Breithn√≠mis an ch√©ad chuid de <code>main</code> i Liost√°il 18-11:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore"><span class="boring">use blog::Post;
</span><span class="boring">
</span>fn main() {
    let mut post = Post::new();

    post.add_text("I ate a salad for lunch today");
    assert_eq!("", post.content());
<span class="boring">
</span><span class="boring">    post.request_review();
</span><span class="boring">    assert_eq!("", post.content());
</span><span class="boring">
</span><span class="boring">    post.approve();
</span><span class="boring">    assert_eq!("I ate a salad for lunch today", post.content());
</span>}</code></pre>
</Listing>
<p>Cuirimid ar √°r gcumas f√≥s poist nua a chruth√∫ i riocht dr√©achta ag baint √∫s√°ide as <code>Post::new</code>
agus an cumas t√©acs a chur le h√°bhar an phoist. Ach in ionad modh <code>content</code> a bheith againn ar phost dr√©achta a thugann teaghr√°n folamh ar ais, d√©anfaimid amhlaidh nach mbeidh an modh <code>content</code> ar chor ar bith ag poist dr√©achta. Ar an mbealach sin, m√° dh√©anaimid iarracht √°bhar phost dr√©achta a fh√°il, gheobhaidh muid earr√°id tiomsaitheora ag insint d√∫inn nach bhfuil an modh ann. Mar thoradh air sin, beidh s√© dodh√©anta d√∫inn √°bhar an phoist dr√©achta a thaispe√°int de thaisme i dt√°irgeadh, mar n√≠ thioms√≥idh an c√≥d sin fi√∫.
L√©ir√≠onn liost√∫ 18-19 sainmh√≠ni√∫ strucht√∫r <code>Post</code> agus strucht√∫r <code>DraftPost</code>,
chomh maith le modhanna ar gach ceann acu:</p>
<Listing number="18-19" file-name="src/lib.rs" caption="A `Post` with a `content` method and `DraftPost` without a `content` method">
<pre><code class="language-rust noplayground">pub struct Post {
    content: String,
}

pub struct DraftPost {
    content: String,
}

impl Post {
    pub fn new() -&gt; DraftPost {
        DraftPost {
            content: String::new(),
        }
    }

    pub fn content(&amp;self) -&gt; &amp;str {
        &amp;self.content
    }
}

impl DraftPost {
    pub fn add_text(&amp;mut self, text: &amp;str) {
        self.content.push_str(text);
    }
}</code></pre>
</Listing>
<p>T√° r√©imse pr√≠obh√°ideach <code>content</code> ag an strucht√∫r <code>Post</code> agus <code>DraftPost</code> araon a
st√≥r√°lann t√©acs an phoist bhlag. N√≠l an r√©imse <code>state</code> ag na strucht√∫ir a thuilleadh mar
t√°imid ag bogadh ionch√≥d√∫ an st√°it go dt√≠ cine√°lacha na strucht√∫r. L√©ireoidh an strucht√∫r <code>Post</code> post foilsithe, agus t√° modh <code>content</code> aige
a thugann an <code>content</code> ar ais.</p>
<p>T√° feidhm <code>Post::new</code> againn f√≥s, ach in ionad sampla de
<code>Post</code> a thabhairt ar ais, tugann s√© sampla de <code>DraftPost</code> ar ais. √ìs rud √© go bhfuil <code>content</code> pr√≠obh√°ideach
agus nach bhfuil aon fheidhmeanna ann a thugann <code>Post</code> ar ais, n√≠ f√©idir sampla de <code>Post</code> a chruth√∫ faoi l√°thair.</p>
<p>T√° modh <code>add_text</code> ag an strucht√∫r <code>DraftPost</code>, mar sin is f√©idir linn t√©acs a chur le
<code>content</code> mar a bh√≠ roimhe, ach tabhair faoi deara nach bhfuil modh <code>content</code> sainmh√≠nithe ag <code>DraftPost</code>! Mar sin, cinnt√≠onn an cl√°r anois go dtosa√≠onn gach post mar dhr√©achtphoist, agus nach bhfuil a n-√°bhar ar f√°il le taispe√°int i ndr√©achtphoist. Mar thoradh ar aon iarracht na srianta seo a sheachaint, beidh earr√°id tiomsaitheora ann.</p>
<h4 id="aistrithe-a-chur-i-bhfeidhm-mar-chlaochluithe-i-gcine√°lacha-√âags√∫la"><a class="header" href="#aistrithe-a-chur-i-bhfeidhm-mar-chlaochluithe-i-gcine√°lacha-√âags√∫la">Aistrithe a Chur i bhFeidhm mar Chlaochluithe i gCine√°lacha √âags√∫la</a></h4>
<p>Mar sin, conas a fhaighimid post foilsithe? Ba mhaith linn an riail a fhorfheidhmi√∫ go gcaithfear dr√©achtphost a athbhreithni√∫ agus a chead√∫ sula bhf√©adfar √© a fhoilsi√∫. N√≠or cheart go mbeadh aon √°bhar le feice√°il i bpost at√° sa st√°t
athbhreithni√∫ ar feitheamh. Cuirfimid na srianta seo i bhfeidhm tr√≠ strucht√∫r eile, <code>PendingReviewPost</code>, a chur leis, an modh <code>request_review</code> a shaini√∫ ar <code>DraftPost</code> chun <code>PendingReviewPost</code> a thabhairt ar ais, agus modh <code>approve</code> a shaini√∫ ar <code>PendingReviewPost</code> chun <code>Post</code> a thabhairt ar ais, mar a thaispe√°ntar i Liost√°il 18-20:</p>
<Listing number="18-20" file-name="src/lib.rs" caption="A `PendingReviewPost` that gets created by calling `request_review` on `DraftPost` and an `approve` method that turns a `PendingReviewPost` into a published `Post`">
<pre><code class="language-rust noplayground"><span class="boring">pub struct Post {
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub struct DraftPost {
</span><span class="boring">    content: String,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Post {
</span><span class="boring">    pub fn new() -&gt; DraftPost {
</span><span class="boring">        DraftPost {
</span><span class="boring">            content: String::new(),
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    pub fn content(&amp;self) -&gt; &amp;str {
</span><span class="boring">        &amp;self.content
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>impl DraftPost {
    // --snip--
<span class="boring">    pub fn add_text(&amp;mut self, text: &amp;str) {
</span><span class="boring">        self.content.push_str(text);
</span><span class="boring">    }
</span><span class="boring">
</span>    pub fn request_review(self) -&gt; PendingReviewPost {
        PendingReviewPost {
            content: self.content,
        }
    }
}

pub struct PendingReviewPost {
    content: String,
}

impl PendingReviewPost {
    pub fn approve(self) -&gt; Post {
        Post {
            content: self.content,
        }
    }
}</code></pre>
</Listing>
<p>Glacann na modhanna <code>request_review</code> agus <code>approve</code> √∫in√©ireacht ar <code>self</code>, agus ar an gcaoi sin
g√°√≠onn siad na sampla√≠ <code>DraftPost</code> agus <code>PendingReviewPost</code> agus claochla√≠onn siad
iad ina <code>PendingReviewPost</code> agus ina <code>Post</code> foilsithe, faoi seach. Ar an mbealach seo,
n√≠ bheidh aon sampla√≠ <code>DraftPost</code> f√°gtha againn tar √©is d√∫inn <code>request_review</code> a ghlaoch orthu, agus mar sin de. N√≠l modh <code>content</code> sainmh√≠nithe ar strucht√∫r <code>PendingReviewPost</code>, mar sin b√≠onn earr√°id tiomsaithe mar thoradh ar iarracht a √°bhar a l√©amh,
mar at√° le <code>DraftPost</code>. √ìs rud √© gurb √© an t-aon bhealach chun sampla <code>Post</code> foilsithe a fh√°il a bhfuil modh <code>content</code> sainmh√≠nithe ann n√° glaoch ar an modh <code>approve</code> ar <code>PendingReviewPost</code>, agus gurb √© an t-aon bhealach chun <code>PendingReviewPost</code> a fh√°il n√° glaoch ar an modh <code>request_review</code> ar <code>DraftPost</code>,
t√° sreabhadh oibre an phoist bhlag ionch√≥daithe againn anois isteach sa ch√≥ras cine√°il.</p>
<p>Ach n√≠ m√≥r d√∫inn roinnt athruithe beaga a dh√©anamh ar <code>main</code> freisin. Tugann na modhanna <code>request_review</code> agus <code>approve</code> c√°sanna nua ar ais seachas an strucht√∫r a nglaotar orthu a mhodhn√∫, mar sin n√≠ m√≥r d√∫inn n√≠os m√≥ sannadh sc√°thaithe <code>let post =</code> a chur leis chun na c√°sanna a tugadh ar ais a sh√°bh√°il. N√≠ f√©idir linn na dearbhuithe faoi √°bhar an dr√©achta agus
√°bhar na bpost athbhreithnithe at√° ar feitheamh a bheith ina dteaghr√°in fholmha ach an oiread, agus n√≠l siad de dh√≠th orainn ach an oiread: n√≠ f√©idir linn
c√≥d a thioms√∫ a dh√©anann iarracht √°bhar na bpost sna st√°it sin a √∫s√°id a thuilleadh.
Taispe√°ntar an c√≥d nuashonraithe i <code>main</code> i Liost√°il 18-21:</p>
<Listing number="18-21" file-name="src/main.rs" caption="Modifications to `main` to use the new implementation of the blog post workflow">
<pre><code class="language-rust ignore">use blog::Post;

fn main() {
    let mut post = Post::new();

    post.add_text("I ate a salad for lunch today");

    let post = post.request_review();

    let post = post.approve();

    assert_eq!("I ate a salad for lunch today", post.content());
}</code></pre>
</Listing>
<p>Cialla√≠onn na hathruithe a bh√≠ orainn a dh√©anamh ar <code>main</code> chun <code>post</code> a athshannadh nach leanann an
cur i bhfeidhm seo an patr√∫n st√°it at√° d√≠rithe ar r√©ada a thuilleadh:
n√≠l na claochluithe idir na st√°it curtha i bhfeidhm go hioml√°n a thuilleadh
laistigh den chur i bhfeidhm <code>Post</code>. Mar sin f√©in, is √© an bunt√°iste at√° againn n√° go bhfuil st√°it neamhbhail√≠
dodh√©anta anois mar gheall ar an gc√≥ras cine√°il agus an tseice√°il cine√°il a tharla√≠onn ag
am an tiomsaithe! Cinnt√≠onn s√© seo go bhfaighfear fabhtanna √°irithe, amhail taispe√°int √°bhar
post neamhfhoilsithe, sula sroicheann siad an t√°irgeadh.</p>
<p>Bain triail as na tascanna a mholtar ag t√∫s an ailt seo ar an gcliathbhosca <code>blog</code> mar at√°
s√© tar √©is Liost√°il 18-21 chun a fheice√°il cad a cheapann t√∫ faoi dhearadh an leagan seo
den ch√≥d. Tabhair faoi deara go bhf√©adfadh cuid de na tascanna a bheith cr√≠ochnaithe cheana f√©in sa
dhearadh seo.</p>
<p>T√° feicthe againn, c√© go bhfuil Rust in ann patr√∫in dearaidh at√° d√≠rithe ar r√©ada a chur i bhfeidhm, go bhfuil patr√∫in eile, amhail ionch√≥d√∫ st√°it isteach sa ch√≥ras cine√°il,
ar f√°il i Rust freisin. T√° comhbhabht√°lacha √©ags√∫la ag na patr√∫in seo. C√© go mb‚Äôfh√©idir go bhfuil t√∫ an-eolach ar phatr√∫in at√° d√≠rithe ar r√©ada, is f√©idir le hathmhachnamh a dh√©anamh ar an
fhadhb chun leas a bhaint as gn√©ithe Rust bunt√°ist√≠ a shol√°thar, amhail
cosc a chur ar roinnt fabhtanna ag am tiomsaithe. N√≠ bheidh patr√∫in at√° d√≠rithe ar r√©ada i gc√≥na√≠
an r√©iteach is fearr i Rust mar gheall ar ghn√©ithe √°irithe, cos√∫il le h√∫in√©ireacht, nach
bhfuil ag teangacha at√° d√≠rithe ar r√©ada.</p>
<h2 id="achoimre-17"><a class="header" href="#achoimre-17">Achoimre</a></h2>
<p>Is cuma an gceapann t√∫ gur teanga r√©ada-dh√≠rithe √≠ Rust n√≥ nach gceapann tar √©is duit an chaibidil seo a l√©amh, t√° a fhios agat anois gur f√©idir leat tr√©ithe r√©ada a √∫s√°id chun roinnt gn√©ithe r√©ada-dh√≠rithe a fh√°il i Rust. Is f√©idir le seoladh dinimici√∫il roinnt sol√∫bthachta a thabhairt do do ch√≥d mar mhalairt ar fheidhm√≠ocht rith-ama. Is f√©idir leat an tsol√∫bthacht seo a √∫s√°id chun patr√∫in r√©ada-dh√≠rithe a chur i bhfeidhm a chabhr√≥idh le hinchothabh√°il do ch√≥id. T√° gn√©ithe eile ag Rust freisin, cos√∫il le h√∫in√©ireacht, nach bhfuil ag teangacha r√©ada-dh√≠rithe. N√≠ bheidh patr√∫n r√©ada-dh√≠rithe i gc√≥na√≠ ar an mbealach is fearr chun leas a bhaint as l√°idreachta√≠ Rust, ach is rogha at√° ar f√°il √©.</p>
<p>Ansin, f√©achfaimid ar phatr√∫in, arb iad gn√©ithe eile de chuid Rust iad a chuireann go leor sol√∫bthachta ar f√°il. T√°imid tar √©is breathn√∫ orthu go hachomair ar fud an leabhair ach n√≠ fhaca muid a gcumas ioml√°n f√≥s. A ligean ar aghaidh linn!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="patr√∫in-agus-meaitse√°il"><a class="header" href="#patr√∫in-agus-meaitse√°il">Patr√∫in agus Meaitse√°il</a></h1>
<p>Is comhr√©ir speisialta i Rust iad <em>Patr√∫in</em> le haghaidh meaitse√°il i gcoinne strucht√∫r
cine√°lacha, casta agus simpl√≠ araon. Tr√≠ phatr√∫in a √∫s√°id i gcomhar le habairt√≠ <code>match</code>
agus coincheapa eile, tugtar n√≠os m√≥ smachta duit ar shreabhadh rialaithe
cl√°ir. Is √©ard at√° i bpatr√∫n measc√°n √©igin de na nithe seo a leanas:</p>
<ul>
<li>Litreacha</li>
<li>Eagair, enums, strucht√∫ir, n√≥ tuples d√≠strucht√∫rtha</li>
<li>Athr√≥ga</li>
<li>C√°rta√≠ Fi√°ine</li>
<li>Sealbh√≥ir√≠ √Åit</li>
</ul>
<p>I measc roinnt patr√∫n samplach t√° <code>x</code>, <code>(a, 3)</code>, agus <code>Some(Color::Red)</code>. Sna
comhth√©acsanna ina bhfuil patr√∫in bail√≠, d√©anann na comhph√°irteanna seo cur s√≠os ar chruth na
sonra√≠. Ansin, d√©anann √°r gcl√°r luachanna a mheaitse√°il i gcoinne na bpatr√∫n chun a chinneadh an
bhfuil an cruth ceart sonra√≠ aige chun lean√∫int ar aghaidh ag rith p√≠osa √°irithe c√≥id.</p>
<p>Chun patr√∫n a √∫s√°id, d√©anaimid compar√°id idir √© agus luach √©igin. M√° mheaitse√°lann an patr√∫n an
luach, √∫s√°idimid na codanna luacha in√°r gc√≥d. Cuimhnigh ar na habairt√≠ <code>match</code> i
gCaibidil 6 a d'√∫s√°id patr√∫in, amhail an sampla den mheais√≠n s√≥rt√°la mona. M√°
oireann an luach do chruth an phatr√∫in, is f√©idir linn na p√≠osa√≠ ainmnithe a √∫s√°id. Mura
n-oireann, n√≠ rithfidh an c√≥d a bhaineann leis an bpatr√∫n.</p>
<p>Is tagairt √≠ an chaibidil seo do gach rud a bhaineann le patr√∫in. Cl√∫d√≥imid na
√°iteanna bail√≠ chun patr√∫in a √∫s√°id, an difr√≠ocht idir patr√∫in inch√©illithe agus neamh-inch√©illithe,
agus na cine√°lacha √©ags√∫la comhr√©ir patr√∫n a d'fh√©adf√° a fheice√°il. Faoi
dheireadh na caibidle, beidh a fhios agat conas patr√∫in a √∫s√°id chun go leor coincheapa a chur in i√∫l ar
bhealach soil√©ir.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="na-h√Åiteanna-uile-ar-f√©idir-patr√∫in-a-√ös√°id"><a class="header" href="#na-h√Åiteanna-uile-ar-f√©idir-patr√∫in-a-√ös√°id">Na h√Åiteanna Uile ar F√©idir Patr√∫in a √ös√°id</a></h2>
<p>Tagann patr√∫in an√≠os i roinnt √°iteanna i Rust, agus t√° t√∫ ag baint √∫s√°ide astu go minic
gan a bheith ar an eolas faoi! Pl√©ann an chuid seo na h√°iteanna uile ina bhfuil patr√∫in
bail√≠.</p>
<h3 id="l√°mha-match"><a class="header" href="#l√°mha-match">L√°mha <code>match</code></a></h3>
<p>Mar a pl√©adh i gCaibidil 6, √∫s√°idimid patr√∫in in airm nathanna <code>match</code>.
Go foirmi√∫il, sainmh√≠n√≠tear nathanna <code>match</code> mar an eochairfhocal <code>match</code>, luach le
meaitse√°il air, agus l√°mh mheaitse√°la amh√°in n√≥ n√≠os m√≥ ina bhfuil patr√∫n agus
l√©iri√∫ le rith m√° chomhl√≠onann an luach patr√∫n na l√°imhe sin, mar seo:</p>
<pre><code class="language-text">match VALUE {
    PATTERN =&gt; EXPRESSION,
    PATTERN =&gt; EXPRESSION,
    PATTERN =&gt; EXPRESSION,
}
</code></pre>
<p>Mar shampla, seo an abairt <code>match</code> √≥ Liosta 6-5 a mheaitse√°lann ar luach <code>Option&lt;i32&gt;</code> san athr√≥g <code>x</code>:</p>
<pre><code class="language-rust ignore">match x {
    None =&gt; None,
    Some(i) =&gt; Some(i + 1),
}</code></pre>
<p>Is iad na patr√∫in sa l√©iri√∫ <code>match</code> seo n√° <code>None</code> agus <code>Some(i)</code> ar thaobh na
cl√© de gach saighead.</p>
<p>Riachtanas amh√°in do l√©irithe <code>match</code> n√° go gcaithfidh siad a bheith <em>uileghabh√°lach</em> sa
mh√©id is go gcaithfear gach f√©idearthacht don luach sa l√©iri√∫ <code>match</code> a chur san √°ireamh. Bealach amh√°in chun a chinnti√∫ go bhfuil gach f√©idearthacht cl√∫daithe agat n√° patr√∫n
gabh√°lach a bheith agat don l√°mh dheireanach: mar shampla, n√≠ f√©idir le hainm athr√≥g a mheaitse√°lann aon
luach teip riamh agus d√° bhr√≠ sin cl√∫da√≠onn s√© gach c√°s at√° f√°gtha.</p>
<p>Mheaitse√°lfaidh an patr√∫n √°irithe <code>_</code> aon rud, ach n√≠ cheangla√≠onn s√© le
athr√≥g riamh, mar sin is minic a √∫s√°idtear √© sa l√°mh mheaitse√°la dheireanach. Is f√©idir leis an patr√∫n <code>_</code> a bheith
√∫s√°ideach nuair is mian leat neamhaird a dh√©anamh d'aon luach nach bhfuil sonraithe, mar shampla. Cl√∫d√≥imid an patr√∫n <code>_</code> n√≠os mine sa chuid [‚ÄúNeamhaird a thabhairt ar Luachanna i
Patr√∫n‚Äù][neamhaird-luachanna-i-patr√∫n]<!-- neamhaird --> n√≠os d√©ana√≠ sa
chaibidil seo.</p>
<h3 id="l√©irithe-coinn√≠ollacha-if-let"><a class="header" href="#l√©irithe-coinn√≠ollacha-if-let">L√©irithe Coinn√≠ollacha <code>if let</code></a></h3>
<p>I gCaibidil 6 phl√©amar conas l√©irithe <code>if let</code> a √∫s√°id go pr√≠omha mar bhealach n√≠os giorra
chun coibh√©is <code>match</code> a scr√≠obh nach n-oireann ach do ch√°s amh√°in.
De rogha air sin, is f√©idir le <code>if let</code> <code>else</code> comhfhreagrach a bheith aige ina bhfuil c√≥d le rith mura
n-oireann an patr√∫n sa <code>if let</code>.</p>
<p>L√©ir√≠onn Liost√°il 19-1 gur f√©idir l√©irithe <code>if let</code>, <code>else if</code>, agus <code>else if let</code> a mheascadh agus a mheaitse√°il freisin. Tugann s√© sin n√≠os m√≥ sol√∫bthachta d√∫inn n√°
l√©iri√∫ <code>match</code> ina bhf√©adfaimid luach amh√°in a chur in i√∫l le compar√°id a dh√©anamh leis na
patr√∫in. Chomh maith leis sin, n√≠ √©il√≠onn Rust go mbeadh baint ag na coinn√≠ollacha i sraith de gh√©aga <code>if let</code>, <code>else if</code>, <code>else if let</code> lena ch√©ile.</p>
<p>Cinneann an c√≥d i Liost√°il 19-1 c√©n dath at√° le cur ar do ch√∫lra bunaithe ar
shraith seice√°lacha le haghaidh roinnt coinn√≠ollacha. Don sampla seo, chrutha√≠omar athr√≥ga le luachanna crua-ch√≥daithe a d'fh√©adfadh cl√°r f√≠or a fh√°il √≥ ionchur √∫s√°ideora.</p>
<Listing number="19-1" file-name="src/main.rs" caption="Mixing `if let`, `else if`, `else if let`, and `else`">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let favorite_color: Option&lt;&amp;str&gt; = None;
    let is_tuesday = false;
    let age: Result&lt;u8, _&gt; = "34".parse();

    if let Some(color) = favorite_color {
        println!("Using your favorite color, {color}, as the background");
    } else if is_tuesday {
        println!("Tuesday is green day!");
    } else if let Ok(age) = age {
        if age &gt; 30 {
            println!("Using purple as the background color");
        } else {
            println!("Using orange as the background color");
        }
    } else {
        println!("Using blue as the background color");
    }
}</code></pre></pre>
</Listing>
<p>M√° shonra√≠onn an t-√∫s√°ideoir dath is fearr leis, √∫s√°idtear an dath sin mar ch√∫lra.
Mura sonra√≠tear aon dath is fearr leis agus gur D√© M√°irt at√° ann inniu, is glas an dath c√∫lra. Seachas sin, m√° shonra√≠onn an t-√∫s√°ideoir a n-aois mar shreang agus gur f√©idir linn √© a phars√°il mar uimhir go rath√∫il, is corcra n√≥ or√°iste an dath ag brath ar luach na huimhreach. Mura bhfuil feidhm ag aon cheann de na coinn√≠ollacha seo, is gorm an dath c√∫lra.</p>
<p>Ligeann an strucht√∫r coinn√≠ollach seo d√∫inn tac√∫ le riachtanais chasta. Leis na luachanna crua-ch√≥daithe at√° againn anseo, priont√°lfaidh an sampla seo <code>Using purple as the  background color</code>.</p>
<p>Is f√©idir leat a fheice√°il gur f√©idir le <code>if let</code> athr√≥ga nua a thabhairt isteach freisin a sc√°tha√≠onn athr√≥ga at√° ann cheana f√©in ar an mbealach c√©anna a fh√©adann <code>match</code> arms: tugann an l√≠ne <code>if let Ok(age) = age</code> athr√≥g nua <code>age</code> isteach ina bhfuil an luach taobh istigh den athraitheach <code>Ok</code>,
ag sc√°th√∫ an athr√≥g <code>age</code> at√° ann cheana f√©in. Cialla√≠onn s√© seo go gcaithfimid an coinn√≠oll <code>if age &gt; 30</code> a chur laistigh den bhloc sin: n√≠ f√©idir linn an d√° choinn√≠oll seo a chomhcheangal i <code>if let Ok(age) = age &amp;&amp; age &gt; 30</code>. N√≠l an <code>age</code> nua ar mhaith linn a chur i gcompar√°id le 30 bail√≠ go dt√≠ go dtosa√≠onn an raon feidhme nua leis an l√∫ib√≠n chatach.</p>
<p>Is √© an m√≠bhunt√°iste a bhaineann le h√∫s√°id nathanna <code>if let</code> n√° nach nd√©anann an tiomsaitheoir seice√°il
le haghaidh uileghabh√°lachta, ach le nathanna <code>match</code> d√©anann s√©. D√° mba rud √© go bhf√°gfaimis an
bloc <code>else</code> deireanach ar l√°r agus d√° bhr√≠ sin go gcaillfimis l√°imhse√°il roinnt c√°sanna, n√≠ chuirfeadh an tiomsaitheoir fol√°ireamh orainn faoin bhfadhb loighce f√©ideartha.</p>
<h3 id="l√∫ba-coinn√≠ollach-while-let"><a class="header" href="#l√∫ba-coinn√≠ollach-while-let">L√∫ba Coinn√≠ollach <code>while let</code></a></h3>
<p>Cos√∫il le <code>if let</code> i dt√≥g√°il, ceada√≠onn an l√∫b coinn√≠ollach <code>while let</code> do l√∫b
<code>while</code> rith chomh fada agus a leanann patr√∫n ag meaitse√°il. Chonaiceamar l√∫b
<code>while let</code> den ch√©ad uair i gCaibidil 17, √°it ar √∫s√°ideadh √© chun lean√∫int ar aghaidh ag l√∫badh chomh fada agus a th√°irg sruth luachanna nua. Ar an gcaoi ch√©anna, i Liost√°il 19-2 taispe√°naimid l√∫b <code>while let</code> a fhanann ar theachtaireachta√≠ a sheoltar idir sn√°itheanna, ach sa ch√°s seo seice√°lann s√© <code>Result</code> in ionad <code>Option</code>.</p>
<Listing number="19-2" caption="Using a `while let` loop to print values for as long as `rx.recv()` returns `Ok`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let (tx, rx) = std::sync::mpsc::channel();
    std::thread::spawn(move || {
        for val in [1, 2, 3] {
            tx.send(val).unwrap();
        }
    });

    while let Ok(value) = rx.recv() {
        println!("{value}");
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lann an sampla seo 1, 2, agus 3. Nuair a chonaiceamar <code>recv</code> siar i gCaibidil 16, dh√≠phac√°ileamar an earr√°id go d√≠reach, n√≥ idirghn√≠omha√≠omar l√©i mar athr√° ag baint √∫s√°ide as l√∫b <code>for</code>. Mar a l√©ir√≠onn Liost√°il 19-2, √°fach, is f√©idir linn <code>while let</code> a √∫s√°id freisin, mar go dtugann an
modh <code>recv</code> <code>Ok</code> ar ais chomh fada agus a bh√≠onn an seolt√≥ir ag t√°irgeadh teachtaireachta√≠, agus ansin
gineann s√© <code>Err</code> nuair a dh√≠cheangla√≠onn taobh an tseolt√≥ra.</p>
<h3 id="l√∫ba-for"><a class="header" href="#l√∫ba-for">L√∫ba <code>for</code></a></h3>
<p>I l√∫b <code>for</code>, is patr√∫n √© an luach a leanann an eochairfhocal <code>for</code> go d√≠reach. Mar shampla, i <code>for x in y</code> is √© an <code>x</code> an patr√∫n. L√©ir√≠onn Liost√°il 19-3
conas patr√∫n a √∫s√°id i l√∫b <code>for</code> chun tuple a dh√≠strucht√∫r√∫, n√≥ a bhriseadh √≥na ch√©ile, mar chuid den l√∫b <code>for</code>.</p>
<Listing number="19-3" caption="Using a pattern in a `for` loop to destructure a tuple">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let v = vec!['a', 'b', 'c'];

    for (index, value) in v.iter().enumerate() {
        println!("{value} is at index {index}");
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d i Liosta 19-3 an m√©id seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.52s
     Running `target/debug/patterns`
a is at index 0
b is at index 1
c is at index 2
</code></pre>
<p>D√©anaimid oiri√∫n√∫ ar athr√°iteoir ag baint √∫s√°ide as an modh <code>enumerate</code> ionas go dt√°irgeann s√© luach agus
an t-inn√©acs don luach sin, curtha i dtuple. Is √© an ch√©ad luach a th√°irgtear n√° an
tuple <code>(0, 'a')</code>. Nuair a mheaitse√°iltear an luach seo leis an bpatr√∫n <code>(index, value)</code>,
beidh <code>index</code> ina <code>0</code> agus beidh <code>value</code> ina <code>'a'</code>, ag priont√°il an ch√©ad l√≠ne den
aschur.</p>
<h3 id="r√°itis-let"><a class="header" href="#r√°itis-let">R√°itis <code>let</code></a></h3>
<p>Roimh an gcaibidil seo, n√≠ raibh pl√©ite againn ach go sainr√°ite ar √∫s√°id patr√∫n le
<code>match</code> agus <code>if let</code>, ach i nd√°ir√≠re, √∫s√°ideadh patr√∫in in √°iteanna eile chomh maith,
lena n-√°ir√≠tear i r√°itis <code>let</code>. Mar shampla, smaoinigh ar an sannadh athr√≥g simpl√≠ seo le <code>let</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
<span class="boring">}</span></code></pre></pre>
<p>Gach uair a d'√∫s√°id t√∫ r√°iteas <code>let</code> mar seo, bh√≠ t√∫ ag √∫s√°id patr√∫in, c√© nach mbeadh a fhios agat √© b'fh√©idir! Ar bhealach n√≠os foirmi√∫la, breathna√≠onn r√°iteas <code>let</code> mar seo:</p>
<pre><code class="language-text">let PATTERN = EXPRESSION;
</code></pre>
<p>I r√°itis cos√∫il le <code>let x = 5;</code> le hainm athr√≥g sa sliot√°n <code>PATTERN</code>, n√≠l san
ainm athr√≥g ach foirm thar a bheith simpl√≠ de phatr√∫n. D√©anann Rust compar√°id idir an abairt agus an patr√∫n agus sannadh aon ainmneacha a aims√≠onn s√©. Mar sin, sa
shampla <code>let x = 5;</code>, is patr√∫n √© <code>x</code> a chialla√≠onn "ceangail an rud a mheaitse√°lann anseo leis an
athr√≥g <code>x</code>." Toisc gurb √© an t-ainm <code>x</code> an patr√∫n ioml√°n, cialla√≠onn an patr√∫n seo
go h√©ifeachtach "ceangail gach rud leis an athr√≥g <code>x</code>, cib√© luach √©."</p>
<p>Chun gn√© meaitse√°la patr√∫n <code>let</code> a fheice√°il n√≠os soil√©ire, smaoinigh ar Liost√°il
19-4, a √∫s√°ideann patr√∫n le <code>let</code> chun tuple a dh√≠strucht√∫r√∫.</p>
<Listing number="19-4" caption="Using a pattern to destructure a tuple and create three variables at once">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let (x, y, z) = (1, 2, 3);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Anseo, d√©anaimid tupla a mheaitse√°il le patr√∫n. D√©anann Rust compar√°id idir an luach <code>(1, 2, 3)</code> agus an patr√∫n <code>(x, y, z)</code> agus feiceann s√© go bhfuil an luach ag teacht leis an patr√∫n, mar sin ceangla√≠onn Rust <code>1</code> le <code>x</code>, <code>2</code> le <code>y</code>, agus <code>3</code> le <code>z</code>. Is f√©idir leat smaoineamh ar an patr√∫n tupla seo
mar phatr√∫n ina bhfuil tr√≠ phatr√∫n athr√≥g aonair neadaithe ann.</p>
<p>Mura bhfuil l√≠on na n-eilimint√≠ sa phatr√∫n ag teacht le l√≠on na n-eilimint√≠
sa tupla, n√≠ bheidh an cine√°l forioml√°n ag teacht leis agus gheobhaidh muid earr√°id tiomsaitheora. Mar
shampla, taispe√°nann Liost√°il 19-5 iarracht tupla le tr√≠
eilimint a dh√≠strucht√∫r√∫ ina dh√° athr√≥g, rud nach n-oibreoidh.</p>
<Listing number="19-5" caption="Incorrectly constructing a pattern whose variables don‚Äôt match the number of elements in the tuple">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let (x, y) = (1, 2, 3);
<span class="boring">}</span></code></pre>
</Listing>
<p>M√° dh√©antar iarracht an c√≥d seo a thioms√∫, tagann an cine√°l earr√°ide seo chun cinn:</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
error[E0308]: mismatched types
 --&gt; src/main.rs:2:9
  |
2 |     let (x, y) = (1, 2, 3);
  |         ^^^^^^   --------- this expression has type `({integer}, {integer}, {integer})`
  |         |
  |         expected a tuple with 3 elements, found one with 2 elements
  |
  = note: expected tuple `({integer}, {integer}, {integer})`
             found tuple `(_, _)`

For more information about this error, try `rustc --explain E0308`.
error: could not compile `patterns` (bin "patterns") due to 1 previous error
</code></pre>
<p>Chun an earr√°id a shocr√∫, d'fh√©adfaimis neamhaird a dh√©anamh de cheann amh√°in n√≥ n√≠os m√≥ de na luachanna sa tuple ag baint √∫s√°ide as
<code>_</code> n√≥ <code>..</code>, mar a fheicfidh t√∫ sa chuid [‚ÄúNeamhaird a dh√©anamh de Luachanna i
Patr√∫n‚Äù][neamhaird-luachanna-i-patr√∫n]<!-- neamhaird a dh√©anamh -->. M√°s √© an fhadhb
go bhfuil an iomarca athr√≥g againn sa phatr√∫n, is √© an r√©iteach n√° na
cine√°lacha a mheaitse√°il tr√≠ athr√≥ga a bhaint ionas go mbeidh l√≠on na n-athr√≥g cothrom le l√≠on
na n-eilimint√≠ sa tuple.</p>
<h3 id="paraim√©adair-fheidhme"><a class="header" href="#paraim√©adair-fheidhme">Paraim√©adair Fheidhme</a></h3>
<p>Is f√©idir le paraim√©adair feidhme a bheith ina bpatr√∫in freisin. Ba ch√≥ir go mbeadh an c√≥d i Liosta 19-6, a
dhearbha√≠onn feidhm darb ainm <code>foo</code> a ghlacann paraim√©adar amh√°in darb ainm <code>x</code> den chine√°l
<code>i32</code>, eolach anois.</p>
<Listing number="19-6" caption="A function signature uses patterns in the parameters">
<pre><pre class="playground"><code class="language-rust">fn foo(x: i32) {
    // code goes here
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Is patr√∫n √© an chuid <code>x</code>! Mar a rinneamar le <code>let</code>, d‚Äôfh√©adfaimis tuple in arg√≥int√≠ feidhme a mheaitse√°il leis an patr√∫n. Roinntear na luachanna i tuple agus muid √° chur ar aghaidh chuig feidhm tr√≠ 19-7 a liost√°il.</p>
<Listing number="19-7" file-name="src/main.rs" caption="A function with parameters that destructure a tuple">
<pre><pre class="playground"><code class="language-rust">fn print_coordinates(&amp;(x, y): &amp;(i32, i32)) {
    println!("Current location: ({x}, {y})");
}

fn main() {
    let point = (3, 5);
    print_coordinates(&amp;point);
}</code></pre></pre>
</Listing>
<p>Priont√°lann an c√≥d seo <code>Current location: (3, 5)</code>. Meaitse√°lann na luachanna <code>&amp;(3, 5)</code> an patr√∫n <code>&amp;(x, y)</code>, mar sin is √© <code>x</code> an luach <code>3</code> agus is √© <code>y</code> an luach <code>5</code>.</p>
<p>Is f√©idir linn patr√∫in a √∫s√°id i liosta√≠ paraim√©adair d√∫nta ar an mbealach c√©anna agus at√° i
liosta√≠ paraim√©adair feidhme, toisc go bhfuil d√∫nta cos√∫il le feidhmeanna, mar a
phl√©itear i gCaibidil 13.</p>
<p>Ag an bpointe seo, t√° roinnt beala√≠ feicthe agat chun patr√∫in a √∫s√°id, ach n√≠
oibr√≠onn patr√∫in mar an gc√©anna i ngach √°it is f√©idir linn iad a √∫s√°id. I roinnt √°iteanna, n√≠ m√≥r na patr√∫in a bheith
dochlo√≠te; i gc√∫ins√≠ eile, is f√©idir iad a bhr√©agn√∫. Pl√©ifimid
an d√° choincheap seo ina dhiaidh seo.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="inbhr√©agn√∫-an-bhf√©adfadh-patr√∫n-teip-a-mheaitse√°il"><a class="header" href="#inbhr√©agn√∫-an-bhf√©adfadh-patr√∫n-teip-a-mheaitse√°il">Inbhr√©agn√∫: An bhf√©adfadh Patr√∫n Teip a Mheaitse√°il</a></h2>
<p>Tagann patr√∫in i nd√° fhoirm: inbhr√©agnaithe agus neamh-inbhr√©agnaithe. Is <em>neamh-inbhr√©agnaithe</em> patr√∫in a mheaitse√°lfaidh
le haghaidh aon luach f√©ideartha a rithtear. Sampla amh√°in is ea <code>x</code> sa
r√°iteas <code>let x = 5;</code> mar go meaitse√°lann <code>x</code> aon rud agus d√° bhr√≠ sin n√≠ f√©idir leis teip
a mheaitse√°il. Is <em>neamh-inbhr√©agnaithe</em> patr√∫in nach f√©idir leo meaitse√°il le haghaidh luach f√©ideartha √©igin. Sampla amh√°in is ea <code>Some(x)</code> sa abairt <code>if let Some(x) = a_value</code> mar mura bhfuil an luach san athr√≥g <code>a_value</code> ach <code>None</code> seachas
<code>Some</code>, n√≠ bheidh an patr√∫n <code>Some(x)</code> comhoiri√∫nach.</p>
<p>N√≠ f√©idir le paraim√©adair feidhme, r√°itis <code>let</code>, agus l√∫ba <code>for</code> ach patr√∫in neamh-inbhr√©agnaithe a ghlacadh, mar n√≠ f√©idir leis an gcl√°r aon rud br√≠och a dh√©anamh nuair nach
mbeidh luachanna ag teacht le ch√©ile. Glacann na habairt√≠ <code>if let</code> agus <code>while let</code> agus an r√°iteas
<code>let</code>-<code>else</code> le patr√∫in inbhr√©agnaithe agus neamh-inbhr√©agnaithe, ach tugann an
comhl√©adaitheoir rabhadh i gcoinne patr√∫in neamh-inbhr√©agnaithe toisc go bhfuil siad de r√©ir sainmh√≠nithe
beartaithe chun d√©ile√°il le teip fh√©ideartha: t√° feidhmi√∫lacht coinn√≠ollach ina
chumas feidhmi√∫ ar bhealach difri√∫il ag brath ar rath n√≥ teip.</p>
<p>Go ginear√°lta, n√≠or cheart go mbeadh ort a bheith buartha faoin idirdheal√∫ idir patr√∫in inbhr√©agnaithe
agus neamh-inbhr√©agnaithe; √°fach, n√≠ m√≥r duit a bheith eolach ar choincheap
na hinbhr√©agnaitheachta ionas gur f√©idir leat freagairt nuair a fheiceann t√∫ √© i dteachtaireacht earr√°ide. Sna
c√°sanna sin, beidh ort an patr√∫n n√≥ an t√≥g√°il a bhfuil t√∫ ag
√∫s√°id an phatr√∫in leis a athr√∫, ag brath ar an iompar at√° beartaithe don ch√≥d.</p>
<p>F√©achfaimid ar shampla de na ruda√≠ a tharla√≠onn nuair a dh√©anaimid iarracht patr√∫n inbhr√©agnaithe a √∫s√°id
i gc√°s ina n-√©il√≠onn Rust patr√∫n neamh-inbhr√©agnaithe agus a mhalairt. Taispe√°nann Liost√°il 19-8 r√°iteas
<code>let</code>, ach don phatr√∫n t√° <code>Some(x)</code> sonraithe againn, patr√∫n
inbhr√©agnaithe. Mar a bheife√° ag s√∫il leis, n√≠ thioms√≥far an c√≥d seo.</p>
<Listing number="19-8" caption="Attempting to use a refutable pattern with `let`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span><span class="boring">    let some_option_value: Option&lt;i32&gt; = None;
</span>    let Some(x) = some_option_value;
<span class="boring">}</span></code></pre>
</Listing>
<p>D√° mba luach <code>None</code> √© <code>some_option_value</code>, theipfeadh air an patr√∫n <code>Some(x)</code> a mheaitse√°il, rud a chialla√≠onn gur f√©idir an patr√∫n a bhr√©agn√∫. Mar sin f√©in, n√≠ f√©idir leis an r√°iteas <code>let</code> glacadh le patr√∫n dochlo√≠te amh√°in mar n√≠l aon rud bail√≠ is f√©idir leis an gc√≥d a dh√©anamh le luach <code>None</code>. Ag am an tiomsaithe, gear√°nfaidh Rust gur thriail muid patr√∫n dochlo√≠te a √∫s√°id nuair a bh√≠onn patr√∫n dochlo√≠te ag teast√°il:</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
error[E0005]: refutable pattern in local binding
 --&gt; src/main.rs:3:9
  |
3 |     let Some(x) = some_option_value;
  |         ^^^^^^^ pattern `None` not covered
  |
  = note: `let` bindings require an "irrefutable pattern", like a `struct` or an `enum` with only one variant
  = note: for more information, visit https://doc.rust-lang.org/book/ch18-02-refutability.html
  = note: the matched value is of type `Option&lt;i32&gt;`
help: you might want to use `let else` to handle the variant that isn't matched
  |
3 |     let Some(x) = some_option_value else { todo!() };
  |                                     ++++++++++++++++

For more information about this error, try `rustc --explain E0005`.
error: could not compile `patterns` (bin "patterns") due to 1 previous error
</code></pre>
<p>√ìs rud √© n√°r chl√∫da√≠omar (agus n√°rbh fh√©idir linn!) gach luach bail√≠ a chl√∫dach leis an
patr√∫n <code>Some(x)</code>, t√°irgeann Rust earr√°id tiomsaitheora go dlisteanach.</p>
<p>M√° t√° patr√∫n inbhr√©agnaithe againn ina bhfuil g√° le patr√∫n dochlo√≠te, is f√©idir linn
√© a shocr√∫ tr√≠d an gc√≥d a √∫s√°ideann an patr√∫n a athr√∫: in ionad <code>let</code> a √∫s√°id, is f√©idir linn <code>if let</code> a √∫s√°id. Ansin mura n-oireann an patr√∫n, scipe√°lfaidh an c√≥d
an c√≥d sna l√∫ib√≠n√≠ casta, rud a thugann bealach d√≥ lean√∫int ar aghaidh go bail√≠. Taispe√°nann Liost√°il
19-9 conas an c√≥d i Liost√°il 19-8 a shocr√∫.</p>
<Listing number="19-9" caption="Using `if let` and a block with refutable patterns instead of `let`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    let some_option_value: Option&lt;i32&gt; = None;
</span>    if let Some(x) = some_option_value {
        println!("{x}");
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>T√° an c√≥d curtha as againn! T√° an c√≥d seo bail√≠ go hioml√°n anois. Mar sin f√©in, m√° thugaimid patr√∫n dochlo√≠te <code>if let</code> (patr√∫n a bheidh i gc√≥na√≠ ag teacht leis), amhail <code>x</code>, mar a thaispe√°ntar i Liost√°il 19-10, tabharfaidh an tiomsaitheoir rabhadh.</p>
<Listing number="19-10" caption="Attempting to use an irrefutable pattern with `if let`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    if let x = 5 {
        println!("{x}");
    };
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Gear√°nann Rust nach bhfuil ciall le <code>if let</code> a √∫s√°id le patr√∫n dochlo√≠te:</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
warning: irrefutable `if let` pattern
 --&gt; src/main.rs:2:8
  |
2 |     if let x = 5 {
  |        ^^^^^^^^^
  |
  = note: this pattern will always match, so the `if let` is useless
  = help: consider replacing the `if let` with a `let`
  = note: `#[warn(irrefutable_let_patterns)]` on by default

warning: `patterns` (bin "patterns") generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.39s
     Running `target/debug/patterns`
5
</code></pre>
<p>Ar an gc√∫is seo, n√≠ m√≥r do na hairm mheaitse√°la patr√∫in inbhr√©agnaithe a √∫s√°id, seachas an l√°mh dheireanach, ar cheart di aon luachanna at√° f√°gtha a mheaitse√°il le patr√∫n dochlo√≠te. Ligeann Rust d√∫inn patr√∫n dochlo√≠te a √∫s√°id i <code>match</code> le l√°mh amh√°in, ach
n√≠l an comhr√©ir seo thar a bheith √∫s√°ideach agus d'fh√©adfa√≠ r√°iteas <code>let</code> n√≠os simpl√≠ a athshol√°thar.</p>
<p>Anois go bhfuil a fhios agat c√° h√°it le patr√∫in a √∫s√°id agus an difr√≠ocht idir patr√∫in inbhr√©agnaithe
agus dochlo√≠te, d√©anaimis an comhr√©ir go l√©ir is f√©idir linn a √∫s√°id chun patr√∫in
a chruth√∫ a chl√∫dach.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="comhr√©ir-patr√∫in"><a class="header" href="#comhr√©ir-patr√∫in">Comhr√©ir Patr√∫in</a></h2>
<p>Sa chuid seo, bail√≠mid an comhr√©ir go l√©ir at√° bail√≠ i bpatr√∫in agus pl√©imid c√©n f√°th agus cathain a d'fh√©adf√° gach ceann acu a √∫s√°id.</p>
<h3 id="meaitse√°il-litreacha"><a class="header" href="#meaitse√°il-litreacha">Meaitse√°il Litreacha</a></h3>
<p>Mar a chonaic t√∫ i gCaibidil 6, is f√©idir leat patr√∫in a mheaitse√°il le litreacha go d√≠reach. Tugann an c√≥d seo a leanas roinnt sampla√≠:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 1;

    match x {
        1 =&gt; println!("one"),
        2 =&gt; println!("two"),
        3 =&gt; println!("three"),
        _ =&gt; println!("anything"),
    }
<span class="boring">}</span></code></pre></pre>
<p>Priont√°lann an c√≥d seo <code>aon</code> mar go bhfuil an luach in <code>x</code> 1. T√° an comhr√©ir seo √∫s√°ideach
nuair is mian leat go nd√©anfadh do ch√≥d gn√≠omh m√° fhaigheann s√© luach coincr√©ite ar leith.</p>
<h3 id="athr√≥ga-ainmnithe-a-mheaitse√°il"><a class="header" href="#athr√≥ga-ainmnithe-a-mheaitse√°il">Athr√≥ga Ainmnithe a Mheaitse√°il</a></h3>
<p>Is patr√∫in dhochlo√≠te iad athr√≥ga ainmnithe a mheaitse√°lann aon luach, agus t√° siad √∫s√°idte againn
go minic sa leabhar. Mar sin f√©in, b√≠onn deacracht ann nuair a √∫s√°ideann t√∫ athr√≥ga ainmnithe in nathanna <code>match</code>, <code>if let</code>, n√≥ <code>while let</code>. Toisc go dtosa√≠onn gach ceann de na cine√°lacha seo raon feidhme nua, cuirfidh athr√≥ga a dhearbha√≠tear mar chuid de phatr√∫n
laistigh den abairt sc√°th ar na cinn leis an ainm c√©anna lasmuigh, mar at√°
an c√°s le gach athr√≥g. I Liosta 19-11, dearbha√≠mid athr√≥g darb ainm
<code>x</code> leis an luach <code>Some(5)</code> agus athr√≥g <code>y</code> leis an luach <code>10</code>. Ansin
crutha√≠mid abairt <code>match</code> ar an luach <code>x</code>. F√©ach ar na patr√∫in sa mheaitse√°il
arms agus <code>println!</code> ag an deireadh, agus d√©an iarracht a dh√©anamh amach cad a phriont√°lfaidh an c√≥d
sula ritheann t√∫ an c√≥d seo n√≥ sula l√©ann t√∫ tuilleadh.</p>
<Listing number="19-11" file-name="src/main.rs" caption="A `match` expression with an arm that introduces a new variable which shadows an existing variable `y`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = Some(5);
    let y = 10;

    match x {
        Some(50) =&gt; println!("Got 50"),
        Some(y) =&gt; println!("Matched, y = {y}"),
        _ =&gt; println!("Default case, x = {x:?}"),
    }

    println!("at the end: x = {x:?}, y = {y}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>D√©anaimis ini√∫chadh ar a tharla√≠onn nuair a ritheann an abairt <code>match</code>. N√≠ mheaitse√°lann an patr√∫n
sa ch√©ad l√°mh mheaitse√°la an luach sainithe de <code>x</code>, mar sin leanann an c√≥d
ar aghaidh.</p>
<p>Tugann an patr√∫n sa dara l√°mh mheaitse√°la isteach athr√≥g nua darb ainm <code>y</code> a
mheaitse√°lfaidh aon luach laistigh de luach <code>Some</code>. √ìs rud √© go bhfuilimid i raon feidhme nua laistigh
den abairt <code>match</code>, is athr√≥g nua <code>y</code> √≠ seo, n√≠ an <code>y</code> a dhearbha√≠omar ag an
t√∫s leis an luach 10. Meaitse√°lfaidh an ceangal nua <code>y</code> seo aon luach
laistigh de <code>Some</code>, arb √© at√° againn in <code>x</code>. D√° bhr√≠ sin, ceangla√≠onn an <code>y</code> nua seo le
luach inmhe√°nach an <code>Some</code> in <code>x</code>. Is √© an luach sin <code>5</code>, mar sin forghn√≠omha√≠tear agus priont√°lann an abairt don
l√°mh sin <code>Matched, y = 5</code>.</p>
<p>D√° mba luach <code>None</code> a bh√≠ i <code>x</code> in ionad <code>Some(5)</code>, n√≠ bheadh ‚Äã‚Äãna patr√∫in sna ch√©ad
dh√° l√°mh meaitse√°ilte, mar sin bheadh ‚Äã‚Äãan luach meaitse√°ilte leis an
fo-score. N√≠or thugamar isteach an athr√≥g <code>x</code> i bpatr√∫n na l√°imhe
fo-score, mar sin is √© an <code>x</code> sa slonn an <code>x</code> seachtrach nach bhfuil
sc√°th√°ilte. Sa ch√°s hipit√©iseach seo, phriont√°lfadh an <code>match</code> an c√°s <code>Default</code>, x = None`.</p>
<p>Nuair a bheidh an slonn <code>match</code> d√©anta, cr√≠ochna√≠onn a raon feidhme, agus mar sin cr√≠ochna√≠onn raon feidhme
an <code>y</code> istigh. T√°irgeann an <code>println!</code> deireanach <code>at the end: x = Some(5), y = 10</code>.</p>
<p>Chun slonn <code>match</code> a chruth√∫ a dh√©anann compar√°id idir luachanna an <code>x</code> sheachtraigh agus
<code>y</code>, seachas athr√≥g nua a thabhairt isteach a sc√°tha√≠onn an athr√≥g <code>y</code> at√° ann cheana f√©in, bheadh ‚Äã‚Äãorainn coinn√≠ollach garda meaitse√°la a √∫s√°id ina ionad. Labhr√≥imid faoi gharda√≠ meaitse√°la n√≠os d√©ana√≠ sa chuid <a href="ch19-03-pattern-syntax.html#extra-conditionals-with-match-guards">‚ÄúCoinn√≠ollach Breise le Garda√≠
Meaitse√°la‚Äù</a><!-- ignore -->.</p>
<h3 id="patr√∫in-ilghn√©itheacha"><a class="header" href="#patr√∫in-ilghn√©itheacha">Patr√∫in Ilghn√©itheacha</a></h3>
<p>Is f√©idir leat patr√∫in iolracha a mheaitse√°il ag baint √∫s√°ide as an gcomhr√©ir <code>|</code>, arb √© an t-oibreoir patr√∫n <em>n√≥</em> √©. Mar shampla, sa ch√≥d seo a leanas, d√©anaimid luach <code>x</code> a mheaitse√°il i gcoinne
na n-arm meaitse√°la, agus t√° rogha <em>n√≥</em> ag an gc√©ad cheann acu, rud a chialla√≠onn m√° mheaitse√°lann luach
<code>x</code> ceachtar de na luachanna sa arm sin, rithfidh c√≥d na l√°imhe sin:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 1;

    match x {
        1 | 2 =&gt; println!("one or two"),
        3 =&gt; println!("three"),
        _ =&gt; println!("anything"),
    }
<span class="boring">}</span></code></pre></pre>
<p>Priont√°lann an c√≥d seo <code>ceann amh√°in n√≥ dh√≥</code>.</p>
<h3 id="raonta-luachanna-a-mheaitse√°il-le-"><a class="header" href="#raonta-luachanna-a-mheaitse√°il-le-">Raonta Luachanna a Mheaitse√°il le <code>..=</code></a></h3>
<p>Ligeann comhr√©ir <code>..=</code> d√∫inn raon luachanna cuimsitheacha a mheaitse√°il. Sa
ch√≥d seo a leanas, nuair a mheaitse√°lann patr√∫n aon cheann de na luachanna laistigh den raon tugtha, d√©anfaidh an l√°mh sin a fhorghn√≠omh√∫:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 5;

    match x {
        1..=5 =&gt; println!("one through five"),
        _ =&gt; println!("something else"),
    }
<span class="boring">}</span></code></pre></pre>
<p>M√°s ionann <code>x</code> agus <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, n√≥ <code>5</code>, beidh an ch√©ad l√°mh comhoiri√∫nach. T√° an comhr√©ir seo n√≠os √°isi√∫la do luachanna meaitse√°la iolracha n√° an t-oibreoir <code>|</code> a √∫s√°id chun an
smaoineamh c√©anna a chur in i√∫l; d√° n-√∫s√°idfimis <code>|</code> bheadh ‚Äã‚Äãorainn <code>1 | 2 | 3 | 4 | 5</code> a shonr√∫.</p>
<p>T√° s√© i bhfad n√≠os giorra raon a shonr√∫, go h√°irithe m√°s mian linn, abair, aon uimhir idir 1 agus 1,000 a mheaitse√°il!</p>
<p>Seice√°lann an tiomsaitheoir nach bhfuil an raon folamh ag am an tiomsaithe, agus toisc gurb iad na
cine√°lacha amh√°in ar f√©idir le Rust a r√° an bhfuil raon folamh n√≥ nach bhfuil n√° <code>char</code> agus
luachanna uimhri√∫la, n√≠ cheada√≠tear raonta ach le luachanna uimhri√∫la n√≥ <code>char</code>.</p>
<p>Seo sampla ag baint √∫s√°ide as raonta de luachanna <code>char</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 'c';

    match x {
        'a'..='j' =&gt; println!("early ASCII letter"),
        'k'..='z' =&gt; println!("late ASCII letter"),
        _ =&gt; println!("something else"),
    }
<span class="boring">}</span></code></pre></pre>
<p>Is f√©idir le Rust a r√° go bhfuil <code>'c'</code> laistigh de raon an ch√©ad phatr√∫in agus priont√°ileann s√© <code>early ASCII letter</code>.</p>
<h3 id="d√≠strucht√∫r√∫-chun-luachanna-a-bhriseadh-√≥na-ch√©ile"><a class="header" href="#d√≠strucht√∫r√∫-chun-luachanna-a-bhriseadh-√≥na-ch√©ile">D√≠strucht√∫r√∫ chun Luachanna a Bhriseadh √≥na ch√©ile</a></h3>
<p>Is f√©idir linn patr√∫in a √∫s√°id freisin chun strucht√∫ir, enums, agus tuples a dh√≠strucht√∫r√∫ chun
codanna √©ags√∫la de na luachanna seo a √∫s√°id. Si√∫laimis tr√≠ gach luach.</p>
<h4 id="strucht√∫ir-a-bhriseadh-√≥na-ch√©ile"><a class="header" href="#strucht√∫ir-a-bhriseadh-√≥na-ch√©ile">Strucht√∫ir a Bhriseadh √≥na ch√©ile</a></h4>
<p>Taispe√°nann Liost√°il 19-12 strucht√∫r <code>Point</code> le dh√° r√©imse, <code>x</code> agus <code>y</code>, ar f√©idir linn
a bhriseadh √≥na ch√©ile ag baint √∫s√°ide as patr√∫n le r√°iteas <code>let</code>.</p>
<Listing number="19-12" file-name="src/main.rs" caption="Destructuring a struct‚Äôs fields into separate variables">
<pre><pre class="playground"><code class="language-rust">struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p = Point { x: 0, y: 7 };

    let Point { x: a, y: b } = p;
    assert_eq!(0, a);
    assert_eq!(7, b);
}</code></pre></pre>
</Listing>
<p>Crutha√≠onn an c√≥d seo na hathr√≥ga <code>a</code> agus <code>b</code> a mheaitse√°lann luachanna na r√©ims√≠ <code>x</code>
agus <code>y</code> den strucht√∫r <code>p</code>. Taispe√°nann an sampla seo nach g√° go mbeadh ainmneacha na n-athr√≥g sa phatr√∫n ag teacht le hainmneacha r√©ims√≠ an strucht√∫ir.
Mar sin f√©in, is gn√°ch ainmneacha na n-athr√≥g a mheaitse√°il le hainmneacha na r√©ims√≠ chun go mbeidh s√©
√©asca cuimhneamh c√© na hathr√≥ga a th√°inig √≥ r√©ims√≠ √©ags√∫la. Mar gheall ar an
√∫s√°id choitianta seo, agus toisc go bhfuil go leor d√∫bl√°la i scr√≠obh <code>let Point { x: x, y: y } = p;</code>, t√° giorr√∫ch√°n ag Rust do phatr√∫in a mheaitse√°lann r√©ims√≠ strucht√∫ir:
n√≠ g√° duit ach ainm an r√©imse strucht√∫ir a liost√°il, agus beidh na hainmneacha c√©anna ar na hathr√≥ga a crutha√≠odh
√≥n bpatr√∫n. Iompra√≠onn Liost√°il 19-13 ar an mbealach c√©anna
leis an gc√≥d i Liost√°il 19-12, ach is iad na hathr√≥ga a crutha√≠odh sa phatr√∫n <code>let</code> n√° <code>x</code> agus <code>y</code> in ionad <code>a</code> agus <code>b</code>.</p>
<Listing number="19-13" file-name="src/main.rs" caption="Destructuring struct fields using struct field shorthand">
<pre><pre class="playground"><code class="language-rust">struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p = Point { x: 0, y: 7 };

    let Point { x, y } = p;
    assert_eq!(0, x);
    assert_eq!(7, y);
}</code></pre></pre>
</Listing>
<p>Crutha√≠onn an c√≥d seo na hathr√≥ga <code>x</code> agus <code>y</code> a mheaitse√°lann na r√©ims√≠ <code>x</code> agus <code>y</code> den athr√≥g <code>p</code>. Is √© an toradh n√° go bhfuil na
luachanna √≥n strucht√∫r <code>p</code> sna hathr√≥ga <code>x</code> agus <code>y</code>.</p>
<p>Is f√©idir linn d√≠strucht√∫r√∫ a dh√©anamh le luachanna liteartha mar chuid den phatr√∫n strucht√∫ir
seachas athr√≥ga a chruth√∫ do na r√©ims√≠ go l√©ir. Tr√≠ sin a dh√©anamh, is f√©idir linn
cuid de na r√©ims√≠ a th√°st√°il le haghaidh luachanna √°irithe agus athr√≥ga √° gcruth√∫ againn chun
na r√©ims√≠ eile a dh√≠strucht√∫r√∫.</p>
<p>I Liosta 19-14, t√° l√©iri√∫ <code>match</code> againn a scarann ‚Äã‚Äãluachanna <code>Point</code>
i dtr√≠ ch√°s: point√≠ at√° suite go d√≠reach ar ais <code>x</code> (rud at√° f√≠or nuair a
<code>y = 0</code>), ar ais <code>y</code> (<code>x = 0</code>), n√≥ ceachtar acu.</p>
<Listing number="19-14" file-name="src/main.rs" caption="Destructuring and matching literal values in one pattern">
<pre><pre class="playground"><code class="language-rust"><span class="boring">struct Point {
</span><span class="boring">    x: i32,
</span><span class="boring">    y: i32,
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let p = Point { x: 0, y: 7 };

    match p {
        Point { x, y: 0 } =&gt; println!("On the x axis at {x}"),
        Point { x: 0, y } =&gt; println!("On the y axis at {y}"),
        Point { x, y } =&gt; {
            println!("On neither axis: ({x}, {y})");
        }
    }
}</code></pre></pre>
</Listing>
<p>D√©anfaidh an ch√©ad l√°mh aon phointe at√° suite ar an ais <code>x</code> a mheaitse√°il tr√≠ shonr√∫ go bhfuil an r√©imse <code>y</code> ag teacht leis m√° t√° a luach ag teacht leis an liteartha <code>0</code>. Crutha√≠onn an patr√∫n athr√≥g <code>x</code> f√≥s is f√©idir linn a √∫s√°id sa ch√≥d don l√°mh seo.</p>
<p>Ar an gcaoi ch√©anna, d√©anann an dara l√°mh aon phointe ar an ais <code>y</code> a mheaitse√°il tr√≠ shonr√∫ go bhfuil an r√©imse <code>x</code> ag teacht leis m√° t√° a luach <code>0</code> agus crutha√≠onn s√≠ athr√≥g <code>y</code> do luach an r√©imse <code>y</code>. N√≠ shonra√≠onn an tr√≠√∫ l√°mh aon liteartha, mar sin d√©anann s√≠ aon <code>Point</code> eile a mheaitse√°il agus crutha√≠onn s√≠ athr√≥ga do na r√©ims√≠ <code>x</code> agus <code>y</code> araon.</p>
<p>Sa sampla seo, d√©anann an luach <code>p</code> an dara l√°mh a mheaitse√°il de bhua <code>x</code> ina bhfuil 0, mar sin priont√°lfaidh an c√≥d seo <code>On the y axis at 7</code>.</p>
<p>Cuimhnigh go stopann abairt <code>match</code> seice√°il arm a luaithe a aims√≠tear an
ch√©ad phatr√∫n meaitse√°la, mar sin c√© go bhfuil <code>Point { x: 0, y: 0}</code> ar an ais <code>x</code>
agus an ais <code>y</code>, n√≠ phriont√°lfadh an c√≥d seo ach  <code>On the x axis at 0</code>.</p>
<h4 id="d√≠strucht√∫r√∫-√Åinim√≠"><a class="header" href="#d√≠strucht√∫r√∫-√Åinim√≠">D√≠strucht√∫r√∫ √Åinim√≠</a></h4>
<p>T√° d√≠strucht√∫r√∫ d√©anta againn ar √°inim√≠ sa leabhar seo (mar shampla, Liost√°il 6-5 i gCaibidil 6),
ach n√≠or phl√©amar go sainr√°ite f√≥s go gcomhfhreagra√≠onn an patr√∫n chun √°inim a dh√≠strucht√∫r√∫
don chaoi a sainmh√≠n√≠tear na sonra√≠ at√° st√≥r√°ilte laistigh den √°inim. Mar
shampla, i Liost√°il 19-15 √∫s√°idimid an t-√°inim <code>Message</code> √≥ Liost√°il 6-2 agus scr√≠obhaimid
<code>match</code> le patr√∫in a dh√≠strucht√∫r√≥idh gach luach inmhe√°nach.</p>
<Listing number="19-15" file-name="src/main.rs" caption="Destructuring enum variants that hold different kinds of values">
<pre><pre class="playground"><code class="language-rust">enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}

fn main() {
    let msg = Message::ChangeColor(0, 160, 255);

    match msg {
        Message::Quit =&gt; {
            println!("The Quit variant has no data to destructure.");
        }
        Message::Move { x, y } =&gt; {
            println!("Move in the x direction {x} and in the y direction {y}");
        }
        Message::Write(text) =&gt; {
            println!("Text message: {text}");
        }
        Message::ChangeColor(r, g, b) =&gt; {
            println!("Change the color to red {r}, green {g}, and blue {b}");
        }
    }
}</code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d seo <code>Change the color to red 0, green 160, and blue 255</code>. Bain triail as
luach <code>msg</code> a athr√∫ chun an c√≥d √≥ na hairm eile a fheice√°il.</p>
<p>I gc√°s malairt√≠ enum gan aon sonra√≠, cos√∫il le <code>Message::Quit</code>, n√≠ f√©idir linn an luach a dh√≠strucht√∫r√∫
tuilleadh. N√≠ f√©idir linn meaitse√°il ach ar an luach liteartha <code>Message::Quit</code>,
agus n√≠l aon athr√≥ga sa phatr√∫n sin.</p>
<p>I gc√°s malairt√≠ enum cos√∫il le strucht√∫r, mar shampla <code>Message::Move</code>, is f√©idir linn patr√∫n a √∫s√°id
cos√∫il leis an patr√∫n a shonra√≠mid chun strucht√∫ir a mheaitse√°il. Tar √©is ainm an athraithe, cuirimid
l√∫ib√≠n√≠ casta agus ansin liosta√≠mid na r√©ims√≠ le hathr√≥ga ionas go mbrisfimid √≥na ch√©ile
na p√≠osa√≠ le h√∫s√°id sa ch√≥d don l√°mh seo. Anseo √∫s√°idimid an fhoirm ghiorraithe mar
a rinneamar i Liost√°il 19-13.</p>
<p>I gc√°s malairt√≠ enum cos√∫il le tupla√≠, cos√∫il le <code>Message::Write</code> a bhfuil tupla le heilimint amh√°in ann agus <code>Message::ChangeColor</code> a bhfuil tupla le tr√≠ eilimint ann, t√° an
patr√∫n cos√∫il leis an patr√∫n a shonra√≠mid chun tupla√≠ a mheaitse√°il. Caithfidh l√≠on na
n-athr√≥g sa phatr√∫n a bheith ag teacht le l√≠on na n-eilimint√≠ sa malairt at√° √°
mheaitse√°il againn.</p>
<h4 id="strucht√∫ir-agus-enuma√≠-neadaithe-a-scriosadh"><a class="header" href="#strucht√∫ir-agus-enuma√≠-neadaithe-a-scriosadh">Strucht√∫ir agus Enuma√≠ Neadaithe a Scriosadh</a></h4>
<p>Go dt√≠ seo, bh√≠ √°r sampla√≠ go l√©ir ag meaitse√°il strucht√∫ir n√≥ enuma√≠ leibh√©al amh√°in domhain,
ach is f√©idir meaitse√°il a dh√©anamh ar mh√≠reanna neadaithe freisin! Mar shampla, is f√©idir linn an
c√≥d i Liost√°il 19-15 a athfhacht√≥ireacht chun tac√∫ le dathanna RGB agus HSV sa teachtaireacht <code>ChangeColor</code>, mar a thaispe√°ntar i Liost√°il 19-16.</p>
<Listing number="19-16" caption="Matching on nested enums">
<pre><pre class="playground"><code class="language-rust">enum Color {
    Rgb(i32, i32, i32),
    Hsv(i32, i32, i32),
}

enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(Color),
}

fn main() {
    let msg = Message::ChangeColor(Color::Hsv(0, 160, 255));

    match msg {
        Message::ChangeColor(Color::Rgb(r, g, b)) =&gt; {
            println!("Change color to red {r}, green {g}, and blue {b}");
        }
        Message::ChangeColor(Color::Hsv(h, s, v)) =&gt; {
            println!("Change color to hue {h}, saturation {s}, value {v}");
        }
        _ =&gt; (),
    }
}</code></pre></pre>
</Listing>
<p>Meaitse√°lann patr√∫n na ch√©ad l√°imhe san abairt <code>match</code> malairt enum <code>Message::ChangeColor</code> ina bhfuil malairt <code>Color::Rgb</code>; ansin
ceangla√≠onn an patr√∫n leis na tr√≠ luach istigh <code>i32</code>. Meaitse√°lann patr√∫n an dara
l√°imh malairt enum <code>Message::ChangeColor</code> freisin, ach meaitse√°lann an enum istigh <code>Color::Hsv</code> ina ionad. Is f√©idir linn na coinn√≠ollacha casta seo a shonr√∫ in aon abairt amh√°in
<code>match</code>, c√© go bhfuil dh√° enum i gceist.</p>
<h4 id="strucht√∫ir-agus-tupla√≠-a-scriosadh"><a class="header" href="#strucht√∫ir-agus-tupla√≠-a-scriosadh">Strucht√∫ir agus Tupla√≠ a Scriosadh</a></h4>
<p>Is f√©idir linn patr√∫in d√≠strucht√∫rtha a mheascadh, a mheaitse√°il agus a nead√∫ ar bheala√≠ n√≠os casta f√≥s.
L√©ir√≠onn an sampla seo a leanas d√≠strucht√∫r√∫ casta ina neada√≠mid strucht√∫ir agus
tupla√≠ laistigh de thupla agus na luachanna primitive go l√©ir a dh√≠strucht√∫r√∫ amach:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span><span class="boring">    struct Point {
</span><span class="boring">        x: i32,
</span><span class="boring">        y: i32,
</span><span class="boring">    }
</span><span class="boring">
</span>    let ((feet, inches), Point { x, y }) = ((3, 10), Point { x: 3, y: -10 });
<span class="boring">}</span></code></pre></pre>
<p>This code lets us break complex types into their component parts so we can use
the values we‚Äôre interested in separately.</p>
<p>Destructuring with patterns is a convenient way to use pieces of values, such
as the value from each field in a struct, separately from each other.</p>
<h3 id="ignoring-values-in-a-pattern"><a class="header" href="#ignoring-values-in-a-pattern">Ignoring Values in a Pattern</a></h3>
<p>You‚Äôve seen that it‚Äôs sometimes useful to ignore values in a pattern, such as
in the last arm of a <code>match</code>, to get a catchall that doesn‚Äôt actually do
anything but does account for all remaining possible values. There are a few
ways to ignore entire values or parts of values in a pattern: using the <code>_</code>
pattern (which you‚Äôve seen), using the <code>_</code> pattern within another pattern,
using a name that starts with an underscore, or using <code>..</code> to ignore remaining
parts of a value. Let‚Äôs explore how and why to use each of these patterns.</p>
<h4 id="ignoring-an-entire-value-with-_"><a class="header" href="#ignoring-an-entire-value-with-_">Ignoring an Entire Value with <code>_</code></a></h4>
<p>We‚Äôve used the underscore as a wildcard pattern that will match any value but
not bind to the value. This is especially useful as the last arm in a <code>match</code>
expression, but we can also use it in any pattern, including function
parameters, as shown in Listing 19-17.</p>
<Listing number="19-17" file-name="src/main.rs" caption="Using `_` in a function signature">
<pre><pre class="playground"><code class="language-rust">fn foo(_: i32, y: i32) {
    println!("This code only uses the y parameter: {y}");
}

fn main() {
    foo(3, 4);
}</code></pre></pre>
</Listing>
<p>D√©anfaidh an c√≥d seo neamhaird ioml√°n ar an luach <code>3</code> a ritheadh ‚Äã‚Äãmar an ch√©ad arg√≥int,
agus priont√°ilfidh s√© <code>This code only uses the y parameter: 4</code>.</p>
<p>I bhformh√≥r na gc√°sanna nuair nach bhfuil paraim√©adar feidhme √°irithe ag teast√°il uait a thuilleadh,
d'athr√≥f√° an s√≠ni√∫ ionas nach n-√°ireofar an paraim√©adar neamh√∫s√°idte ann. Is f√©idir neamhaird a dh√©anamh ar
pharaim√©adar feidhme a bheith √∫s√°ideach go h√°irithe i gc√°sanna nuair, mar shampla,
at√° t√∫ ag cur tr√©ith i bhfeidhm nuair a bh√≠onn s√≠ni√∫ cine√°il √°irithe ag teast√°il uait ach nach bhfuil ceann de na paraim√©adair ag teast√°il √≥
chorp na feidhme i do chur i bhfeidhm. Seachna√≠onn t√∫ ansin rabhadh tiomsaitheora a fh√°il faoi pharaim√©adair feidhme neamh√∫s√°idte, mar a dh√©anf√°
d√° n-√∫s√°idfe√° ainm ina ionad.</p>
<h4 id="neamhaird-a-dh√©anamh-ar-chodanna-de-luach-le-_-neadaithe"><a class="header" href="#neamhaird-a-dh√©anamh-ar-chodanna-de-luach-le-_-neadaithe">Neamhaird a dh√©anamh ar Chodanna de Luach le <code>_</code> Neadaithe</a></h4>
<p>Is f√©idir linn <code>_</code> a √∫s√°id laistigh de phatr√∫n eile chun neamhaird a dh√©anamh ar chuid de luach amh√°in,
mar shampla, nuair is mian linn t√°st√°il a dh√©anamh ar chuid de luach amh√°in ach nach bhfuil aon √∫s√°id againn as na
codanna eile sa ch√≥d comhfhreagrach is mian linn a rith. Taispe√°nann liost√∫ 19-18 an c√≥d
at√° freagrach as luach socraithe a bhainisti√∫. Is iad na ceanglais ghn√≥ n√° nach gceada√≠tear don √∫s√°ideoir saincheapadh at√° ann cheana f√©in ar shocr√∫ a athscr√≠obh ach gur f√©idir leis an socr√∫ a dh√≠shocr√∫ agus luach a thabhairt d√≥ mura bhfuil s√© socraithe faoi l√°thair.</p>
<Listing number="19-18" caption=" Using an underscore within patterns that match `Some` variants when we don‚Äôt need to use the value inside the `Some`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut setting_value = Some(5);
    let new_setting_value = Some(10);

    match (setting_value, new_setting_value) {
        (Some(_), Some(_)) =&gt; {
            println!("Can't overwrite an existing customized value");
        }
        _ =&gt; {
            setting_value = new_setting_value;
        }
    }

    println!("setting is {setting_value:?}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d seo <code>Can't overwrite an existing customized value</code> agus ansin
<code>setting is Some(5)</code> Sa ch√©ad l√°mh mheaitse√°la, n√≠ g√° d√∫inn meaitse√°il a dh√©anamh ar na luachanna laistigh de cheachtar den d√° chine√°l <code>Some</code> n√° iad a √∫s√°id, ach n√≠ m√≥r d√∫inn t√°st√°il a dh√©anamh don ch√°s
nuair is iad <code>setting_value</code> agus <code>new_setting_value</code> an cine√°l <code>Some</code>. Sa
ch√°s sin, priont√°laimid an ch√∫is gan <code>setting_value</code> a athr√∫, agus n√≠
athra√≠tear √©.</p>
<p>I ngach c√°s eile (m√°s rud √© go bhfuil <code>setting_value</code> n√≥ <code>new_setting_value</code>
<code>None</code>) arna l√©iri√∫ ag an bpatr√∫n <code>_</code> sa dara l√°mh, ba mhaith linn ligean do
<code>new_setting_value</code> a bheith ina <code>setting_value</code>.</p>
<p>Is f√©idir linn fo-l√≠nte a √∫s√°id in √°iteanna √©ags√∫la laistigh de phatr√∫n amh√°in chun neamhaird a dh√©anamh ar
luachanna ar leith. Taispe√°nann liost√∫ 19-19 sampla de neamhaird a dh√©anamh ar an dara agus an
ceathr√∫ luach i dtuple de ch√∫ig mh√≠r.</p>
<Listing number="19-19" caption="Ignoring multiple parts of a tuple">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let numbers = (2, 4, 8, 16, 32);

    match numbers {
        (first, _, third, _, fifth) =&gt; {
            println!("Some numbers: {first}, {third}, {fifth}")
        }
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an c√≥d seo <code>Some numbers: 2, 8, 32</code>, agus d√©anfar neamhaird de na luachanna 4 agus 16.</p>
<h4 id="neamhaird-a-thabhairt-dathr√≥g-neamh√∫s√°idte-tr√≠na-hainm-a-thos√∫-le-_"><a class="header" href="#neamhaird-a-thabhairt-dathr√≥g-neamh√∫s√°idte-tr√≠na-hainm-a-thos√∫-le-_">Neamhaird a Thabhairt d'Athr√≥g Neamh√∫s√°idte tr√≠na hainm a thos√∫ le <code>_</code></a></h4>
<p>M√° chrutha√≠onn t√∫ athr√≥g ach mura n-√∫s√°ideann t√∫ √≠ in √°it ar bith, eiseoidh Rust rabhadh de ghn√°th toisc go bhf√©adfadh fabht a bheith in athr√≥g neamh√∫s√°idte. Mar sin f√©in, uaireanta b√≠onn s√©
√∫s√°ideach a bheith in ann athr√≥g nach n-√∫s√°idfidh t√∫ f√≥s a chruth√∫, amhail nuair a bh√≠onn t√∫ ag
fr√©amhsham√°iri√∫ n√≥ ag tos√∫ tionscadail. Sa ch√°s seo, is f√©idir leat a r√° le Rust
gan rabhadh a thabhairt duit faoin athr√≥g neamh√∫s√°idte tr√≠ ainm na hathr√≥ige a thos√∫
le fo-l√≠ne. I Liosta 19-20, crutha√≠mid dh√° athr√≥g neamh√∫s√°idte, ach nuair a
thiomsa√≠onn muid an c√≥d seo, n√≠or cheart d√∫inn ach rabhadh a fh√°il faoi cheann acu.</p>
<Listing number="19-20" file-name="src/main.rs" caption="Starting a variable name with an underscore to avoid getting unused variable warnings">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let _x = 5;
    let y = 10;
}</code></pre></pre>
</Listing>
<p>Anseo faighimid rabhadh faoi gan an athr√≥g <code>y</code> a √∫s√°id, ach n√≠ fhaighimid rabhadh faoi gan <code>_x</code> a √∫s√°id.</p>
<p>Tabhair faoi deara go bhfuil difr√≠ocht bheag idir <code>_</code> amh√°in a √∫s√°id agus ainm a √∫s√°id a thosa√≠onn le fo-l√≠ne. Ceangla√≠onn an comhr√©ir <code>_x</code> an luach leis an
athr√≥g f√≥s, ach n√≠ cheangla√≠onn <code>_</code> ar chor ar bith. Chun c√°s a thaispe√°int ina bhfuil an
idirdheal√∫ seo t√°bhachtach, cuirfidh Liost√°il 19-21 earr√°id ar f√°il d√∫inn.</p>
<Listing number="19-21" caption="An unused variable starting with an underscore still binds the value, which might take ownership of the value">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let s = Some(String::from("Hello!"));

    if let Some(_s) = s {
        println!("found a string");
    }

    println!("{s:?}");
<span class="boring">}</span></code></pre>
</Listing>
<p>Gheobhaimid earr√°id mar go mbogfar an luach <code>s</code> isteach i <code>_s</code> f√≥s,
rud a chuireann cosc ‚Äã‚Äãorainn <code>s</code> a √∫s√°id ar√≠s. Mar sin f√©in, n√≠ cheangla√≠onn √∫s√°id an fho-l√≠nte leis f√©in leis an luach riamh. Tioms√≥far Liost√°il 19-22 gan aon earr√°id√≠
toisc nach mbogtar <code>s</code> isteach i <code>_</code>.</p>
<Listing number="19-22" caption="Using an underscore does not bind the value">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let s = Some(String::from("Hello!"));

    if let Some(_) = s {
        println!("found a string");
    }

    println!("{s:?}");
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Oibr√≠onn an c√≥d seo go bre√° mar n√≠ cheangla√≠mid <code>s</code> le haon rud riamh; n√≠ bhogtar √©.</p>
<h4 id="neamhaird-a-dh√©anamh-ar-na-codanna-at√°-f√°gtha-de-luach-le-"><a class="header" href="#neamhaird-a-dh√©anamh-ar-na-codanna-at√°-f√°gtha-de-luach-le-">Neamhaird a dh√©anamh ar na Codanna at√° f√°gtha de Luach le <code>..</code></a></h4>
<p>Le luachanna a bhfuil go leor codanna iontu, is f√©idir linn comhr√©ir <code>..</code> a √∫s√°id chun codanna sonracha a √∫s√°id agus neamhaird a dh√©anamh den chuid eile, ag seachaint an gh√° le fo-l√≠nte a liost√°il do gach luach
a nd√©antar neamhaird de. D√©anann an patr√∫n <code>..</code> neamhaird d'aon chodanna de luach nach bhfuil
meaitse√°ilte go sainr√°ite againn sa chuid eile den phatr√∫n. I Liost√°il 19-23, t√° strucht√∫r
<code>Point</code> againn a choinn√≠onn comhordan√°id i sp√°s tr√≠thoiseach. Sa
sloinnt <code>match</code>, ba mhaith linn oibri√∫ ar an gcomhordan√°id <code>x</code> amh√°in agus neamhaird a dh√©anamh ar na luachanna sna r√©ims√≠ <code>y</code> agus <code>z</code>.</p>
<Listing number="19-23" caption="Ignoring all fields of a `Point` except for `x` by using `..`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    struct Point {
        x: i32,
        y: i32,
        z: i32,
    }

    let origin = Point { x: 0, y: 0, z: 0 };

    match origin {
        Point { x, .. } =&gt; println!("x is {x}"),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Liosta√≠mid an luach <code>x</code> agus ansin n√≠ chuireann muid ach an patr√∫n <code>..</code> san √°ireamh. T√° s√© seo n√≠os tap√∫la n√° <code>y: _</code> agus <code>z: _</code> a liost√°il, go h√°irithe nuair a bh√≠onn muid ag obair le
strucht√∫ir a bhfuil a l√°n r√©ims√≠ iontu i gc√°sanna nach bhfuil ach r√©imse amh√°in n√≥ dh√≥ √°bhartha.</p>
<p>Leathn√≥idh an comhr√©ir <code>..</code> go dt√≠ an oiread luachanna agus is g√°. Taispe√°nann liost√∫ 19-24
conas <code>..</code> a √∫s√°id le tuple.</p>
<Listing number="19-24" file-name="src/main.rs" caption="Matching only the first and last values in a tuple and ignoring all other values">
<pre><pre class="playground"><code class="language-rust">fn main() {
    let numbers = (2, 4, 8, 16, 32);

    match numbers {
        (first, .., last) =&gt; {
            println!("Some numbers: {first}, {last}");
        }
    }
}</code></pre></pre>
</Listing>
<p>Sa ch√≥d seo, d√©antar an ch√©ad luach agus an luach deireanach a mheaitse√°il le <code>first</code> agus <code>last</code>. D√©anfaidh an <code>..</code> meaitse√°il agus neamhaird a dh√©anamh ar gach rud sa l√°r.</p>
<p>Mar sin f√©in, n√≠ m√≥r √∫s√°id <code>..</code> a bheith neamhbhr√≠och. Mura bhfuil s√© soil√©ir c√© na luachanna at√° beartaithe le haghaidh meaitse√°il agus c√© acu ba ch√≥ir neamhaird a dh√©anamh orthu, tabharfaidh Rust earr√°id d√∫inn.
L√©ir√≠onn liost√∫ 19-25 sampla d'√∫s√°id <code>..</code> go d√©bhr√≠och, mar sin n√≠
thioms√≥idh s√©.</p>
<Listing number="19-25" file-name="src/main.rs" caption="An attempt to use `..` in an ambiguous way">
<pre><code class="language-rust ignore does_not_compile">fn main() {
    let numbers = (2, 4, 8, 16, 32);

    match numbers {
        (.., second, ..) =&gt; {
            println!("Some numbers: {second}")
        },
    }
}</code></pre>
</Listing>
<p>Nuair a dh√©anaimid an sampla seo a thioms√∫, faighimid an earr√°id seo:</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
error: `..` can only be used once per tuple pattern
 --&gt; src/main.rs:5:22
  |
5 |         (.., second, ..) =&gt; {
  |          --          ^^ can only be used once per tuple pattern
  |          |
  |          previously used here

error: could not compile `patterns` (bin "patterns") due to 1 previous error
</code></pre>
<p>T√° s√© dodh√©anta do Rust a chinneadh c√© mh√©ad luach sa tuple le neamhaird a dh√©anamh orthu
sula nd√©antar luach a mheaitse√°il le <code>second</code> agus ansin c√© mh√©ad luach eile le
neamhaird a dh√©anamh orthu ina dhiaidh sin. D‚Äôfh√©adfadh an c√≥d seo a chialla√≠onn gur mian linn neamhaird a dh√©anamh de <code>2</code>, <code>second</code> a cheangal le <code>4</code>, agus ansin neamhaird a dh√©anamh de <code>8</code>, <code>16</code>, agus <code>32</code>; n√≥ gur mian linn neamhaird a dh√©anamh de
<code>2</code> agus <code>4</code>, <code>second</code> a cheangal le <code>8</code>, agus ansin neamhaird a dh√©anamh de <code>16</code> agus <code>32</code>; agus mar sin de.
N√≠ chialla√≠onn an t-ainm athr√≥g <code>second</code> aon rud speisialta do Rust, mar sin faighimid
earr√°id tiomsaitheora toisc go bhfuil s√© d√©bhr√≠och <code>..</code> a √∫s√°id in dh√° √°it mar seo.</p>
<h3 id="coinn√≠ollacha-breise-le-garda√≠-meaitse√°la"><a class="header" href="#coinn√≠ollacha-breise-le-garda√≠-meaitse√°la">Coinn√≠ollacha Breise le Garda√≠ Meaitse√°la</a></h3>
<p>Is coinn√≠oll breise <code>m√°</code> √© <em>garda meaitse√°la</em>, a shonra√≠tear tar √©is an phatr√∫in i
l√°mh <code>match</code>, a chaithfidh a bheith oiri√∫nach freisin chun go roghn√≥far an l√°mh sin. T√° garda√≠ meaitse√°la
√∫s√°ideach chun smaointe n√≠os casta a chur in i√∫l n√° mar a cheada√≠onn patr√∫n ina aonar. N√≠l siad ar f√°il ach amh√°in i l√©irithe <code>match</code>, n√≠ i l√©irithe <code>if let</code> n√≥ <code>while let</code>.</p>
<p>Is f√©idir leis an gcoinn√≠oll athr√≥ga a crutha√≠odh sa phatr√∫n a √∫s√°id. Taispe√°nann Liost√°il 19-26 <code>match</code> ina bhfuil an patr√∫n <code>Some(x)</code> ag an gc√©ad l√°mh agus ina bhfuil garda meaitse√°la <code>if x % 2 == 0</code> aici freisin (a bheidh f√≠or m√° t√° an uimhir cothrom).</p>
<Listing number="19-26" caption="Adding a match guard to a pattern">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let num = Some(4);

    match num {
        Some(x) if x % 2 == 0 =&gt; println!("The number {x} is even"),
        Some(x) =&gt; println!("The number {x} is odd"),
        None =&gt; (),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an sampla seo <code>The number 4 is even</code>. Nuair a dh√©antar compar√°id idir <code>num</code> agus an
patr√∫n sa ch√©ad l√°mh, meaitse√°lann s√©, mar go meaitse√°lann <code>Some(4)</code> <code>Some(x)</code>. Ansin
seice√°lann an garda meaitse√°la an bhfuil an chuid eile de roinnt <code>x</code> ar 2 cothrom le
0, agus toisc go bhfuil, roghna√≠tear an ch√©ad l√°mh.</p>
<p>D√° mba rud √© go raibh <code>num</code> ina <code>Some(5)</code> ina ionad, bheadh ‚Äã‚Äãan garda meaitse√°la sa ch√©ad l√°mh
br√©agach mar go bhfuil an chuid eile de 5 roinnte ar 2 cothrom le 1, nach
comhionann le 0. Ansin rachadh an meirge go dt√≠ an dara l√°mh, a mheaitse√°lfadh mar nach bhfuil garda meaitse√°la ag an
dara l√°mh agus d√° bhr√≠ sin meaitse√°lann s√© aon athraitheach <code>Some</code>.</p>
<p>N√≠l aon bhealach ann an coinn√≠oll <code>if x % 2 == 0</code> a chur in i√∫l laistigh de phatr√∫n, mar sin
tugann an garda meaitse√°la an cumas d√∫inn an loighic seo a chur in i√∫l. Is √© an m√≠bhunt√°iste a bhaineann leis an
l√©iritheacht bhreise seo n√° nach nd√©anann an tiomsaitheoir iarracht seice√°il le haghaidh
uileghabh√°lachta nuair a bh√≠onn l√©irithe garda meaitse√°la i gceist.</p>
<p>I Liost√°il 19-11, luaigh muid go bhf√©adfaimis garda√≠ meaitse√°la a √∫s√°id chun √°r
fhadhb sc√°th√∫ patr√∫n a r√©iteach. Cuimhnigh gur chrutha√≠omar athr√≥g nua laistigh den
phatr√∫n san abairt <code>match</code> in ionad an athr√≥g lasmuigh den
<code>match</code> a √∫s√°id. Chiallaigh an athr√≥g nua sin nach bhf√©adfaimis t√°st√°il a dh√©anamh i gcoinne luach na
hathr√≥ige seachtra√≠. Taispe√°nann Liost√°il 19-27 conas is f√©idir linn garda√≠ meaitse√°la a √∫s√°id chun an
fhadhb seo a r√©iteach.</p>
<Listing number="19-28" caption="Combining multiple patterns with a match guard">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let x = 4;
    let y = false;

    match x {
        4 | 5 | 6 if y =&gt; println!("yes"),
        _ =&gt; println!("no"),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Deir an coinn√≠oll meaitse√°la nach n-oireann an l√°mh ach amh√°in m√° t√° luach <code>x</code> cothrom le <code>4</code>, <code>5</code>, n√≥ <code>6</code> <em>agus</em> m√° t√° <code>y</code> f√≠or. Nuair a ritheann an c√≥d seo, oibr√≠onn patr√∫n na ch√©ad l√°imhe mar go bhfuil <code>x</code> cothrom le <code>4</code>, ach t√° an garda meaitse√°la <code>if y</code> br√©agach, mar sin n√≠ roghna√≠tear an ch√©ad l√°mh. Bogann an c√≥d ar aghaidh go dt√≠ an dara l√°mh,
a mheaitse√°lann, agus priont√°ileann an cl√°r seo <code>no</code>. Is √© an ch√∫is at√° leis n√° go mbaineann an coinn√≠oll <code>if</code> leis an patr√∫n ioml√°n <code>4 | 5 | 6</code>, n√≠ hamh√°in leis an luach deireanach
<code>6</code>. I bhfocail eile, iompra√≠onn tosa√≠ocht garda meaitse√°la i nd√°il le patr√∫n mar seo:</p>
<pre><code class="language-text">(4 | 5 | 6) if y =&gt; ...
</code></pre>
<p>seachas seo:</p>
<pre><code class="language-text">4 | 5 | (6 if y) =&gt; ...
</code></pre>
<p>Tar √©is an c√≥d a rith, is l√©ir an t-iompar tosa√≠ochta: d√° gcuirf√≠ an garda meaitse√°la i bhfeidhm ar an luach deiridh sa liosta luachanna a shonra√≠tear ag baint √∫s√°ide as an oibreoir <code>|</code> amh√°in, bheadh ‚Äã‚Äãan l√°mh meaitse√°ilte agus bheadh ‚Äã‚Äãan cl√°r tar √©is <code>yes</code> a phriont√°il.</p>
<h3 id="ceangail-"><a class="header" href="#ceangail-">Ceangail <code>@</code></a></h3>
<p>Ligeann an t-oibreoir <em>ag</em> <code>@</code> d√∫inn athr√≥g a chruth√∫ a choinn√≠onn luach ag an am c√©anna
agus muid ag t√°st√°il an luacha sin le haghaidh meaitse√°il patr√∫n. I Liost√°il 19-29, ba mhaith linn
t√°st√°il a dh√©anamh go bhfuil r√©imse <code>Message::Hello</code> <code>id</code> laistigh den raon <code>3..=7</code>. Ba mhaith linn freisin
an luach a cheangal leis an athr√≥g <code>id_variable</code> ionas gur f√©idir linn √© a √∫s√°id sa
ch√≥d a bhaineann leis an l√°mh. D'fh√©adfaimis an t-athr√≥g seo a ainmni√∫ <code>id</code>, mar an gc√©anna leis an
r√©imse, ach don sampla seo √∫s√°idfimid ainm difri√∫il.</p>
<Listing number="19-29" caption="Using `@` to bind to a value in a pattern while also testing it">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    enum Message {
        Hello { id: i32 },
    }

    let msg = Message::Hello { id: 5 };

    match msg {
        Message::Hello {
            id: id_variable @ 3..=7,
        } =&gt; println!("Found an id in range: {id_variable}"),
        Message::Hello { id: 10..=12 } =&gt; {
            println!("Found an id in another range")
        }
        Message::Hello { id } =&gt; println!("Found some other id: {id}"),
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Priont√°lfaidh an sampla seo <code>Found an id in range: 5</code>. Tr√≠ <code>id_variable @</code> a shonr√∫ roimh an raon <code>3..=7</code>, t√°imid ag gabh√°il cib√© luach a mheaitse√°lann an raon
agus ag t√°st√°il freisin an raibh an luach ag teacht leis an bpatr√∫n raoin.</p>
<p>Sa dara l√°mh, √°it nach bhfuil ach raon sonraithe sa phatr√∫n, n√≠l aon athr√≥g sa ch√≥d
a bhaineann leis an l√°mh ina bhfuil luach iarbh√≠r
an r√©imse <code>id</code>. D‚Äôfh√©adfadh luach an r√©imse <code>id</code> a bheith 10, 11, n√≥ 12, ach
n√≠l a fhios ag an gc√≥d a th√©ann leis an bpatr√∫n sin c√© acu √©. N√≠l an c√≥d patr√∫n
in ann an luach √≥n r√©imse <code>id</code> a √∫s√°id, mar nach bhfuil an luach
<code>id</code> s√°bh√°ilte againn in athr√≥g.</p>
<p>Sa l√°mh dheireanach, √°it ar shonraigh muid athr√≥g gan raon, t√° an luach againn ar f√°il le h√∫s√°id i gc√≥d na l√°imhe in athr√≥g darb ainm <code>id</code>. Is √© an
c√∫is n√° gur √∫s√°id muid comhr√©ir giorraithe an r√©imse strucht√∫r. Ach n√≠or
chuireamar aon t√°st√°il i bhfeidhm ar an luach sa r√©imse <code>id</code> sa bhrainse seo, mar a rinneamar leis an
dh√° bhrainse tosaigh: bheadh ‚Äã‚Äãaon luach ag teacht leis an bpatr√∫n seo.</p>
<p>Tr√≠ <code>@</code> a √∫s√°id, is f√©idir linn luach a th√°st√°il agus √© a sh√°bh√°il in athr√≥g laistigh d'aon phatr√∫n amh√°in.</p>
<h2 id="achoimre-18"><a class="header" href="#achoimre-18">Achoimre</a></h2>
<p>T√° patr√∫in Rust an-√∫s√°ideach chun idirdheal√∫ a dh√©anamh idir cine√°lacha √©ags√∫la
sonra√≠. Nuair a √∫s√°idtear iad i l√©irithe <code>match</code>, cinnt√≠onn Rust go gcl√∫da√≠onn do phatr√∫in gach
luach is f√©idir, n√≥ n√≠ thioms√≥idh do chl√°r. D√©anann patr√∫in i r√°itis <code>let</code> agus
paraim√©adair feidhme na coincheapa sin n√≠os √∫s√°id√≠, rud a chuireann ar chumas
luachanna a athstrucht√∫r√∫ i gcodanna n√≠os l√∫ ag an am c√©anna le hathr√≥ga a shannadh. Is f√©idir linn patr√∫in shimpl√≠ n√≥ chasta a chruth√∫ chun freastal ar √°r riachtanais.</p>
<p>Ansin, don dara caibidil dheireanach den leabhar, f√©achfaimid ar roinnt gn√©ithe ardleibh√©il de ghn√©ithe √©ags√∫la Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gn√©ithe-ardleibh√©il"><a class="header" href="#gn√©ithe-ardleibh√©il">Gn√©ithe Ardleibh√©il</a></h1>
<p>Faoin am seo, t√° na codanna is coitianta a √∫s√°idtear den teanga r√≠omhchl√°r√∫ch√°in Rust foghlamtha agat. Sula nd√©anaimid tionscadal eile i gCaibidil 21, f√©achfaimid ar ch√∫pla gn√© den teanga a d'fh√©adf√° a fheice√°il √≥ am go ham, ach nach n-√∫s√°idfe√° gach l√°. Is f√©idir leat an chaibidil seo a √∫s√°id mar thagairt nuair a thagann t√∫ ar aon rud anaithnid. T√° na gn√©ithe at√° cl√∫daithe anseo √∫s√°ideach i gc√°sanna an-sonracha.
C√© nach mbeadh t√∫ ag baint √∫s√°ide astu go minic, ba mhaith linn a chinnti√∫ go bhfuil tuiscint agat ar na gn√©ithe go l√©ir at√° le tairiscint ag Rust. Sa chaibidil seo, cl√∫d√≥imid:</p>
<ul>
<li>Rust Neamhsh√°bh√°ilte: conas rogha an di√∫ltaithe a dh√©anamh ar chuid de r√°tha√≠ochta√≠ Rust agus freagracht a ghlacadh as na r√°tha√≠ochta√≠ sin a choinne√°il de l√°imh</li>
<li>Tr√©ithe ardleibh√©il: cine√°lacha gaolmhara, paraim√©adair chine√°il r√©amhshocraithe, comhr√©ir l√°nch√°ilithe, s√°rthr√©ithe, agus an patr√∫n cine√°l nua i nd√°il le tr√©ithe</li>
<li>Cine√°lacha ardleibh√©il: tuilleadh faoin patr√∫n cine√°l nua, leasaithigh chine√°il, an cine√°l riamh,
agus cine√°lacha m√©ide dinimici√∫la</li>
<li>Feidhmeanna agus d√∫nta ardleibh√©il: pointeoir√≠ feidhme agus d√∫nta fillte</li>
<li>Macra√≠: beala√≠ chun c√≥d a shaini√∫ a shain√≠onn n√≠os m√≥ c√≥id ag am tiomsaithe</li>
</ul>
<p>Is r√©imse leathan gn√©ithe Rust √© le rud √©igin do gach duine! D√©anaimis tumadh isteach!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="rust-neamhsh√°bh√°ilte"><a class="header" href="#rust-neamhsh√°bh√°ilte">Rust Neamhsh√°bh√°ilte</a></h2>
<p>T√° r√°tha√≠ochta√≠ s√°bh√°ilteachta cuimhne Rust curtha i bhfeidhm ag am an tiomsaithe i ngach c√≥d a phl√©amar go dt√≠ seo. Mar sin f√©in, t√° teanga eile i bhfolach i Rust
nach gcuireann na r√°tha√≠ochta√≠ s√°bh√°ilteachta cuimhne seo i bhfeidhm: tugtar <em>unsafe Rust</em> air
agus oibr√≠onn s√© d√≠reach cos√∫il le Rust rialta, ach tugann s√© s√°rchumhachta√≠ breise d√∫inn.</p>
<p>T√° Rust Neamhsh√°bh√°ilte ann toisc, de r√©ir n√°d√∫ir, go bhfuil anail√≠s statach coime√°dach. Nuair
a dh√©anann an tiomsaitheoir iarracht a chinneadh an gcomhl√≠onann an c√≥d na r√°tha√≠ochta√≠ n√≥ nach gcomhl√≠onann,
is fearr d√≥ roinnt cl√°r bail√≠ a dhi√∫lt√∫ n√° roinnt cl√°r neamhbhail√≠ a ghlacadh.</p>
<p>C√© go bhf√©adfadh an c√≥d a bheith ceart go leor, mura bhfuil
d√≥thain faisn√©ise ag tiomsaitheoir Rust le bheith muin√≠neach, di√∫lt√≥idh s√© don ch√≥d. Sna c√°sanna seo,
is f√©idir leat c√≥d neamhsh√°bh√°ilte a √∫s√°id chun a r√° leis an tiomsaitheoir, "Creid dom, t√° a fhios agam cad at√° √° dh√©anamh agam." B√≠ c√∫ramach, √°fach, go n-√∫s√°ideann t√∫ Rust neamhsh√°bh√°ilte ar do phriacal f√©in: m√°
√∫s√°ideann t√∫ c√≥d neamhsh√°bh√°ilte go m√≠cheart, is f√©idir fadhbanna a bheith ann mar gheall ar neamhsh√°bh√°ilteacht cuimhne, amhail
d√≠-thagairt pointeora nialasach.</p>
<p>C√∫is eile a bhfuil alter ego neamhsh√°bh√°ilte ag Rust n√° go bhfuil an crua-earra√≠ r√≠omhaireachta bun√∫sach neamhsh√°bh√°ilte √≥ dh√∫chas. Mura lig Rust duit oibr√≠ochta√≠ neamhsh√°bh√°ilte a dh√©anamh, n√≠ fh√©adf√° tascanna √°irithe a dh√©anamh. Caithfidh Rust ligean duit cl√°ir ch√≥rais √≠sealleibh√©il a dh√©anamh, amhail idirghn√≠omh√∫ go d√≠reach leis an gc√≥ras oibri√∫ch√°in n√≥ fi√∫ do ch√≥ras oibri√∫ch√°in f√©in a scr√≠obh. T√° obair le cl√°ir ch√≥rais √≠sealleibh√©il ar cheann de spriocanna na teanga. D√©anaimis ini√∫chadh ar a bhf√©adfaimid a dh√©anamh le Rust neamhsh√°bh√°ilte agus conas √© a dh√©anamh.</p>
<h3 id="s√°rchumhachta√≠-neamhsh√°bh√°ilte"><a class="header" href="#s√°rchumhachta√≠-neamhsh√°bh√°ilte">S√°rchumhachta√≠ Neamhsh√°bh√°ilte</a></h3>
<p>Chun aistri√∫ go Rust neamhsh√°bh√°ilte, bain √∫s√°id as an eochairfhocal <code>unsafe</code> agus ansin tosaigh bloc nua ina bhfuil an c√≥d neamhsh√°bh√°ilte. Is f√©idir leat c√∫ig ghn√≠omh a dh√©anamh i Rust neamhsh√°bh√°ilte nach f√©idir leat a dh√©anamh i Rust s√°bh√°ilte, ar a dtugaimid <em>s√°rchumhachta√≠ neamhsh√°bh√°ilte</em>. I measc na s√°rchumhachta√≠ sin
t√° an cumas chun:</p>
<ul>
<li>D√≠thagairt a dh√©anamh ar phointeoir amh</li>
<li>Feidhm n√≥ modh neamhsh√°bh√°ilte a ghlaoch</li>
<li>Athr√≥g statach inathraithe a rochtain n√≥ a mhodhn√∫</li>
<li>Tr√©ith neamhsh√°bh√°ilte a chur i bhfeidhm</li>
<li>Rochtain a fh√°il ar r√©ims√≠ <code>union</code></li>
</ul>
<p>T√° s√© t√°bhachtach a thuiscint nach m√∫chann <code>unsafe</code> an seice√°la√≠ iasachta
n√° nach nd√≠chumasa√≠onn s√© aon cheann eile de sheice√°lacha s√°bh√°ilteachta Rust: m√° √∫s√°ideann t√∫ tagairt i gc√≥d neamhsh√°bh√°ilte,
d√©anfar seice√°il air f√≥s. N√≠ thugann an eochairfhocal <code>unsafe</code> ach rochtain duit ar
na c√∫ig ghn√© seo nach nd√©anann an tiomsaitheoir seice√°il orthu ansin le haghaidh s√°bh√°ilteachta
cuimhne. Gheobhaidh t√∫ leibh√©al √°irithe s√°bh√°ilteachta f√≥s taobh istigh de bhloc neamhsh√°bh√°ilte.</p>
<p>Ina theannta sin, n√≠ chialla√≠onn <code>unsafe</code> go bhfuil an c√≥d taobh istigh den bhloc cont√∫irteach go riachtanach
n√≥ go mbeidh fadhbanna s√°bh√°ilteachta cuimhne aige cinnte: is √© an cusp√≥ir
go gcinnteoidh t√∫, mar chl√°raitheoir, go nd√©anfaidh an c√≥d taobh istigh de bhloc <code>unsafe</code>
rochtain ar chuimhne ar bhealach bail√≠.</p>
<p>B√≠onn daoine earr√°ideach, agus tarl√≥idh bot√∫in, ach tr√≠ cheangal a chur ar na c√∫ig oibr√≠ocht neamhsh√°bh√°ilte seo a bheith laistigh de bhloic a bhfuil n√≥ta√≠ orthu le <code>unsafe</code> beidh a fhios agat go gcaithfidh aon earr√°id√≠ a bhaineann le s√°bh√°ilteacht cuimhne a bheith laistigh de bhloc <code>unsafe</code>. Coinnigh
bloic <code>unsafe</code> beag; beidh t√∫ bu√≠och n√≠os d√©ana√≠ nuair a dh√©anfaidh t√∫ imscr√∫d√∫ ar fhabhtanna cuimhne.</p>
<p>Chun c√≥d neamhsh√°bh√°ilte a leithlisi√∫ a oiread agus is f√©idir, is fearr c√≥d neamhsh√°bh√°ilte a iamh
laistigh d'eastarraingt sh√°bh√°ilte agus API s√°bh√°ilte a shol√°thar, a phl√©ifimid n√≠os d√©ana√≠ sa
chaibidil nuair a scr√∫d√≥imid feidhmeanna agus modhanna neamhsh√°bh√°ilte. Cuirtear codanna den
leabharlann chaighde√°nach i bhfeidhm mar eastarraingt√≠ s√°bh√°ilte thar ch√≥d neamhsh√°bh√°ilte at√°
ini√∫chta. Cuireann timfhilleadh c√≥d neamhsh√°bh√°ilte in eastarraingt sh√°bh√°ilte cosc ‚Äã‚Äãar √∫s√°id√≠ <code>unsafe</code>
√≥ sceitheadh ‚Äã‚Äã‚Äã‚Äã‚Äã‚Äãamach sna h√°iteanna go l√©ir a bhf√©adfadh t√∫ f√©in n√≥ d'√∫s√°ideoir√≠ a bheith ag iarraidh an fheidhmi√∫lacht a cuireadh i bhfeidhm le c√≥d <code>unsafe</code> a √∫s√°id, toisc go bhfuil √∫s√°id eastarraingthe s√°bh√°ilte s√°bh√°ilte.</p>
<p>F√©achfaimid ar gach ceann de na c√∫ig chumhacht mh√≥r neamhsh√°bh√°ilte ina dhiaidh sin. F√©achfaimid freisin ar
roinnt teib√≠ a shol√°thra√≠onn comh√©adan s√°bh√°ilte do ch√≥d neamhsh√°bh√°ilte.</p>
<h3 id="d√≠thagairt-pointeoir-amh"><a class="header" href="#d√≠thagairt-pointeoir-amh">D√≠thagairt Pointeoir Amh</a></h3>
<p>I gCaibidil 4, sa chuid <a href="ch04-02-references-and-borrowing.html#dangling-references">‚ÄúCrochta agus Tagairt√≠‚Äù</a><!-- ignore
-->, luaigh muid go gcinnt√≠onn an tiomsaitheoir go bhfuil tagairt√≠ i gc√≥na√≠
bail√≠. T√° dh√° chine√°l nua ag Unsafe Rust ar a dtugtar <em>point√©ir√≠</em> at√° cos√∫il le
tagairt√≠. Mar at√° le tagairt√≠, is f√©idir le pointeoir√≠ amha a bheith dochlo√≠te n√≥ inathraithe agus
scr√≠obhtar iad mar <code>*const T</code> agus <code>*mut T</code>, faoi seach. N√≠ h√© an r√©alta an
oibreoir d√≠thagairt; is cuid den ainm cine√°il √©. I gcomhth√©acs pointeoir√≠
amha, cialla√≠onn <em>immutable</em> nach f√©idir an pointeoir a shannadh go d√≠reach
tar √©is √© a dh√≠thagairt.</p>
<p>Difri√∫il √≥ thagairt√≠ agus pointeoir√≠ cliste, pointeoir√≠ amha:</p>
<ul>
<li>Ceada√≠tear d√≥ibh neamhaird a dh√©anamh de na rialacha iasachta tr√≠ phointeoir√≠ dochlo√≠te agus inathraithe araon a bheith acu
n√≥ ilphointeoir√≠ inathraithe chuig an su√≠omh c√©anna</li>
<li>N√≠ r√°tha√≠tear go bpointeoidh siad chuig cuimhne bhail√≠</li>
<li>Ceada√≠tear d√≥ibh a bheith nialasach</li>
<li>N√≠ chuireann siad aon ghlanadh uathoibr√≠och i bhfeidhm</li>
</ul>
<p>Tr√≠ rogha a dh√©anamh gan na r√°tha√≠ochta√≠ seo a fhorfheidhmi√∫ ag Rust, is f√©idir leat s√°bh√°ilteacht r√°thaithe a thabhairt suas ar mhaithe le feidhm√≠ocht n√≠os fearr n√≥ an cumas
comh√©adan a dh√©anamh le teanga n√≥ crua-earra√≠ eile nach bhfuil feidhm ag r√°tha√≠ochta√≠ Rust.</p>
<p>L√©ir√≠onn Liost√°il 20-1 conas pointeoir amh dochlo√≠te agus inathraithe a chruth√∫.</p>
<Listing number="20-1" caption="Creating raw pointers with the raw borrow operators">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut num = 5;

    let r1 = &amp;raw const num;
    let r2 = &amp;raw mut num;
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Tabhair faoi deara nach gcuirimid an eochairfhocal <code>unsafe</code> san √°ireamh sa ch√≥d seo. Is f√©idir linn pointeoir√≠ amha a chruth√∫ i gc√≥d s√°bh√°ilte; n√≠ f√©idir linn pointeoir√≠ amha a dh√≠thagairt lasmuigh de bhloc
unsafe, mar a fheicfidh t√∫ i gceann tamaill.</p>
<p>Chrutha√≠omar pointeoir√≠ amha tr√≠ √∫s√°id a bhaint as na hoibreoir√≠ iasachta amha: crutha√≠onn <code>&amp;raw const num</code> pointeoir amh dochlo√≠te <code>*const i32</code>, agus crutha√≠onn <code>&amp;raw mut num</code> pointeoir amh inathraithe <code>*mut i32</code>. Toisc gur chrutha√≠omar iad go d√≠reach √≥ athr√≥g
√°iti√∫il, t√° a fhios againn go bhfuil na pointeoir√≠ amha seo bail√≠, ach n√≠ f√©idir linn an toimhde sin a dh√©anamh faoi aon phointeoir amh.</p>
<p>Chun seo a l√©iri√∫, ansin cruth√≥imid pointeoir amh nach f√©idir linn a bheith
cinnte faoi a bhail√≠ocht, ag baint √∫s√°ide as <code>as</code> chun luach a chaitheamh in ionad na n-oibreoir√≠
tagartha amha a √∫s√°id. Taispe√°nann Liost√°il 20-2 conas pointeoir amh a chruth√∫ chuig su√≠omh treallach
sa chuimhne. N√≠l aon sainmh√≠ni√∫ ar √∫s√°id chuimhne treallach: d'fh√©adfadh sonra√≠ a bheith ag an seoladh sin n√≥ nach mbeadh, d'fh√©adfadh an tiomsaitheoir an c√≥d a bharrfheabhs√∫ ionas nach mbeadh rochtain chuimhne ann, n√≥ d'fh√©adfadh earr√°id deighilte a bheith sa chl√°r.
De ghn√°th, n√≠ bh√≠onn aon ch√∫is mhaith ann c√≥d mar seo a scr√≠obh, go h√°irithe i gc√°sanna
inar f√©idir leat oibreoir iasachta amh a √∫s√°id ina ionad, ach is f√©idir √©.</p>
<Listing number="20-2" caption="Creating a raw pointer to an arbitrary memory address">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let address = 0x012345usize;
    let r = address as *const i32;
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>Cuimhnigh gur f√©idir linn pointeoir√≠ amha a chruth√∫ i gc√≥d s√°bh√°ilte, ach n√≠ f√©idir linn pointeoir√≠ amha a <em>d√≠threor√∫</em> agus na sonra√≠ at√° √° dtagairt a l√©amh. I Liosta 20-3, √∫s√°idimid an t-oibreoir
d√≠threor√∫ <code>*</code> ar phointeoir amh a √©il√≠onn bloc <code>unsafe</code>.</p>
<Listing number="20-3" caption="Dereferencing raw pointers within an `unsafe` block">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut num = 5;

    let r1 = &amp;raw const num;
    let r2 = &amp;raw mut num;

    unsafe {
        println!("r1 is: {}", *r1);
        println!("r2 is: {}", *r2);
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>N√≠ dh√©anann cruth√∫ pointeora aon dochar; n√≠ f√©idir linn d√©ile√°il le luach neamhbhail√≠ ach amh√°in nuair a dh√©anaimid iarracht rochtain a fh√°il ar an luach a bhfuil s√© ag pointe√°il air.</p>
<p>Tabhair faoi deara freisin gur chrutha√≠omar i Liosta 20-1 agus 20-3 pointeoir√≠ amha <code>*const i32</code> agus <code>*mut i32</code> a bh√≠ ag pointe√°il chuig an su√≠omh cuimhne c√©anna, √°it a bhfuil <code>num</code>
st√≥r√°ilte. D√° nd√©anfaimis iarracht tagairt neamh-inathraithe agus tagairt inathraithe a chruth√∫ chuig
<code>num</code>, n√≠ bheadh ‚Äã‚Äãan c√≥d tiomsaithe mar n√≠ cheada√≠onn rialacha √∫in√©ireachta Rust
tagairt inathraithe ag an am c√©anna le haon tagairt√≠ neamh-inathraithe. Le
pointeoir√≠ amha, is f√©idir linn pointeoir inathraithe agus pointeoir neamh-inathraithe a chruth√∫ chuig an
su√≠omh c√©anna agus sonra√≠ a athr√∫ tr√≠d an bpointeoir inathraithe, rud a d'fh√©adfadh
r√°s sonra√≠ a chruth√∫. B√≠ c√∫ramach!</p>
<p>Leis na cont√∫irt√≠ seo go l√©ir, c√©n f√°th a n-√∫s√°idfe√° pointeoir√≠ amha riamh? C√°s √∫s√°ide m√≥r amh√°in is ea nuair a bh√≠onn comh√©adan √° dh√©anamh le c√≥d C, mar a fheicfidh t√∫ sa ch√©ad chuid eile,
<a href="ch20-01-unsafe-rust.html#glaoch-ar-fheidhm-n%C3%B3-modh-neamhsh%C3%A1bh%C3%A1ilte">‚ÄúGlaoch ar Fheidhm n√≥
Modh Neamhsh√°bh√°ilte.‚Äù</a><!-- neamhaird a dh√©anamh --> C√°s eile is ea
nuair a bh√≠onn teib√≠ s√°bh√°ilte √° dt√≥g√°il nach dtuigeann an seice√°la√≠ iasachta.</p>
<p>Tabharfaimid isteach feidhmeanna neamhsh√°bh√°ilte agus ansin f√©achfaimid ar shampla d‚Äôeib√≠ s√°bh√°ilte a √∫s√°ideann c√≥d neamhsh√°bh√°ilte.</p>
<h3 id="glaoch-ar-fheidhm-n√≥-modh-neamhsh√°bh√°ilte"><a class="header" href="#glaoch-ar-fheidhm-n√≥-modh-neamhsh√°bh√°ilte">Glaoch ar Fheidhm n√≥ Modh Neamhsh√°bh√°ilte</a></h3>
<p>Is √© an dara cine√°l oibr√≠ochta is f√©idir leat a dh√©anamh i mbloc neamhsh√°bh√°ilte n√° glaoch ar
fheidhmeanna neamhsh√°bh√°ilte. Breathna√≠onn feidhmeanna agus modhanna neamhsh√°bh√°ilte d√≠reach cos√∫il le feidhmeanna agus modhanna rialta,
ach t√° <code>unsafe</code> breise acu roimh an gcuid eile den
sainmh√≠ni√∫. L√©ir√≠onn an eochairfhocal <code>unsafe</code> sa chomhth√©acs seo go bhfuil
riachtanais ag an bhfeidhm a chaithfimid a chomhl√≠onadh nuair a ghlaoimid ar an bhfeidhm seo, mar n√≠ f√©idir le Rust
a r√°th√∫ go bhfuil na ceanglais seo comhl√≠onta againn. Tr√≠ fheidhm neamhsh√°bh√°ilte a ghlaoch laistigh de bhloc <code>unsafe</code>, t√°imid ag r√° gur l√©igh muid doicim√©adacht na feidhme seo agus go nglacaimid freagracht as conartha√≠ na feidhme a choinne√°il.</p>
<p>Seo feidhm neamhsh√°bh√°ilte darb ainm <code>dangerous</code> nach nd√©anann aon rud ina corp:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    unsafe fn dangerous() {}

    unsafe {
        dangerous();
    }
<span class="boring">}</span></code></pre></pre>
<p>N√≠ m√≥r d√∫inn glaoch ar an bhfeidhm <code>dangerous</code> laistigh de bhloc <code>unsafe</code> ar leithligh. M√° dh√©anaimid iarracht glaoch ar <code>dangerous</code> gan an bloc <code>unsafe</code>, gheobhaidh muid earr√°id:</p>
<pre><code class="language-console">$ cargo run
   Compiling unsafe-example v0.1.0 (file:///projects/unsafe-example)
error[E0133]: call to unsafe function `dangerous` is unsafe and requires unsafe function or block
 --&gt; src/main.rs:4:5
  |
4 |     dangerous();
  |     ^^^^^^^^^^^ call to unsafe function
  |
  = note: consult the function's documentation for information on how to avoid undefined behavior

For more information about this error, try `rustc --explain E0133`.
error: could not compile `unsafe-example` (bin "unsafe-example") due to 1 previous error
</code></pre>
<p>Leis an mbloc <code>unsafe</code>, t√°imid ag dearbh√∫ do Rust gur l√©igh muid doicim√©adacht na feidhme, go dtuigeann muid conas √≠ a √∫s√°id i gceart, agus gur fh√≠oraigh muid go bhfuilimid ag comhl√≠onadh chonradh na feidhme.</p>
<p>Chun oibr√≠ochta√≠ neamhsh√°bh√°ilte a dh√©anamh i gcorp feidhme neamhsh√°bh√°ilte, n√≠ m√≥r duit f√≥s
bloc <code>unsafe</code> a √∫s√°id d√≠reach mar at√° laistigh de ghn√°thfheidhm, agus tabharfaidh an tiomsaitheoir
rabhadh duit m√° dh√©anann t√∫ dearmad. Cuid√≠onn s√© seo le bloic <code>unsafe</code> a choinne√°il chomh beag agus
is f√©idir, toisc nach mbeadh g√° le hoibr√≠ochta√≠ neamhsh√°bh√°ilte ar fud
chorp ioml√°n na feidhme.</p>
<h4 id="aistarraingt-sh√°bh√°ilte-a-chruth√∫-thar-ch√≥d-neamhsh√°bh√°ilte"><a class="header" href="#aistarraingt-sh√°bh√°ilte-a-chruth√∫-thar-ch√≥d-neamhsh√°bh√°ilte">Aistarraingt Sh√°bh√°ilte a Chruth√∫ thar Ch√≥d Neamhsh√°bh√°ilte</a></h4>
<p>N√≠ chialla√≠onn s√© go gcaithfimid an
fheidhm ioml√°n a mharc√°il mar neamhsh√°bh√°ilte d√≠reach toisc go bhfuil c√≥d neamhsh√°bh√°ilte i bhfeidhm. D√©anta na f√≠rinne, is
aistarraingt choitianta √© c√≥d neamhsh√°bh√°ilte a fhilleadh i bhfeidhm sh√°bh√°ilte. Mar shampla, d√©anaimis staid√©ar a dh√©anamh ar an bhfeidhm <code>split_at_mut</code>
√≥n leabharlann chaighde√°nach, a √©il√≠onn roinnt c√≥d neamhsh√°bh√°ilte. D√©anfaimid ini√∫chadh ar conas
a d'fh√©adfaimis √≠ a chur i bhfeidhm. Sainmh√≠n√≠tear an modh s√°bh√°ilte seo ar shlisn√≠ inathraithe: t√≥gann s√© slisne amh√°in agus d√©anann s√© dh√° cheann de tr√≠d an slisne a scoilt ag an inn√©acs a thugtar mar arg√≥int. Taispe√°nann liost√∫ 20-4 conas <code>split_at_mut</code> a √∫s√°id.</p>
<Listing number="20-4" caption="Using the safe `split_at_mut` function">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let mut v = vec![1, 2, 3, 4, 5, 6];

    let r = &amp;mut v[..];

    let (a, b) = r.split_at_mut(3);

    assert_eq!(a, &amp;mut [1, 2, 3]);
    assert_eq!(b, &amp;mut [4, 5, 6]);
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>N√≠ f√©idir linn an fheidhm seo a chur i bhfeidhm ag baint √∫s√°ide as Rust s√°bh√°ilte amh√°in. D‚Äôfh√©adfadh iarracht breathn√∫ cos√∫il le Liosta 20-5, nach nd√©anfaidh tioms√∫. Ar mhaithe le simpl√≠ocht, cuirfimid <code>split_at_mut</code> i bhfeidhm mar fheidhm seachas mar mhodh agus le haghaidh slisn√≠ de luachanna <code>i32</code> seachas le haghaidh cine√°l cine√°lach <code>T</code>.</p>
<Listing number="20-5" caption="An attempted implementation of `split_at_mut` using only safe Rust">
<pre><code class="language-rust ignore does_not_compile">fn split_at_mut(values: &amp;mut [i32], mid: usize) -&gt; (&amp;mut [i32], &amp;mut [i32]) {
    let len = values.len();

    assert!(mid &lt;= len);

    (&amp;mut values[..mid], &amp;mut values[mid..])
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let mut vector = vec![1, 2, 3, 4, 5, 6];
</span><span class="boring">    let (left, right) = split_at_mut(&amp;mut vector, 3);
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Faigheann an fheidhm seo fad ioml√°n an tslisne ar dt√∫s. Ansin dearbha√≠onn s√≠ go bhfuil
an t-inn√©acs a thugtar mar pharaim√©adar laistigh den tslisne tr√≠ sheice√°il an bhfuil s√©
n√≠os l√∫ n√° n√≥ cothrom leis an fhad. Cialla√≠onn an dearbh√∫ m√° ritheann muid inn√©acs
at√° n√≠os m√≥ n√° an fad chun an tslisne a roinnt ag, go mbeidh scaoll ar an bhfeidhm
sula nd√©anann s√≠ iarracht an t-inn√©acs sin a √∫s√°id.</p>
<p>Ansin, cuirimid dh√° shlisne inathraithe ar ais i dtupla: ceann √≥ th√∫s an
tslisne bhunaidh go dt√≠ an t-inn√©acs <code>mid</code> agus ceann eile √≥ <code>mid</code> go dt√≠ deireadh an
tslisne.</p>
<p>Nuair a dh√©anaimid iarracht an c√≥d i Liosta 20-5 a thioms√∫, gheobhaidh muid earr√°id.</p>
<pre><code class="language-console">$ cargo run
   Compiling unsafe-example v0.1.0 (file:///projects/unsafe-example)
error[E0499]: cannot borrow `*values` as mutable more than once at a time
 --&gt; src/main.rs:6:31
  |
1 | fn split_at_mut(values: &amp;mut [i32], mid: usize) -&gt; (&amp;mut [i32], &amp;mut [i32]) {
  |                         - let's call the lifetime of this reference `'1`
...
6 |     (&amp;mut values[..mid], &amp;mut values[mid..])
  |     --------------------------^^^^^^--------
  |     |     |                   |
  |     |     |                   second mutable borrow occurs here
  |     |     first mutable borrow occurs here
  |     returning this value requires that `*values` is borrowed for `'1`
  |
  = help: use `.split_at_mut(position)` to obtain two mutable non-overlapping sub-slices

For more information about this error, try `rustc --explain E0499`.
error: could not compile `unsafe-example` (bin "unsafe-example") due to 1 previous error
</code></pre>
<p>N√≠ thuigfidh seice√°la√≠ iasachta Rust go bhfuil codanna difri√∫la den slisne √° n-iasacht againn; n√≠l a fhios aige ach go bhfuilimid ag iasacht √≥n slisne c√©anna faoi dh√≥.
T√° s√© ceart go bun√∫sach codanna difri√∫la de shlisne a fh√°il ar iasacht toisc nach bhfuil an d√°
shlisne ag forlu√≠, ach n√≠l Rust cliste go leor chun √© seo a fhios. Nuair a
bheimid
cinnte go bhfuil an c√≥d ceart go leor, ach nach bhfuil Rust, t√° s√© in am dul i muin√≠n c√≥d neamhsh√°bh√°ilte.</p>
<p>L√©ir√≠onn liost√∫ 20-6 conas bloc <code>unsafe</code>, pointeoir amh, agus roinnt glaonna
chuig feidhmeanna neamhsh√°bh√°ilte a √∫s√°id chun cur i bhfeidhm <code>split_at_mut</code> a chur ag obair.</p>
<Listing number="20-6" caption="Using unsafe code in the implementation of the `split_at_mut` function">
<pre><pre class="playground"><code class="language-rust">use std::slice;

fn split_at_mut(values: &amp;mut [i32], mid: usize) -&gt; (&amp;mut [i32], &amp;mut [i32]) {
    let len = values.len();
    let ptr = values.as_mut_ptr();

    assert!(mid &lt;= len);

    unsafe {
        (
            slice::from_raw_parts_mut(ptr, mid),
            slice::from_raw_parts_mut(ptr.add(mid), len - mid),
        )
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let mut vector = vec![1, 2, 3, 4, 5, 6];
</span><span class="boring">    let (left, right) = split_at_mut(&amp;mut vector, 3);
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Meabhraigh √≥n alt <a href="ch04-03-slices.html#the-slice-type">‚ÄúThe Slice Type‚Äù</a><!-- ignore --> i
Caibidil 4 go bhfuil slisn√≠ ina dtuairimeoir chuig sonra√≠ √°irithe agus fad na slisne.
√ös√°idimid an modh <code>len</code> chun fad slisne a fh√°il agus an modh <code>as_mut_ptr</code>
chun rochtain a fh√°il ar an dtuairimeoir amh de shlisne. Sa ch√°s seo, toisc go bhfuil slisne inathraithe againn go luachanna <code>i32</code>, tugann <code>as_mut_ptr</code> pointeoir amh ar ais leis an gcine√°l
<code>*mut i32</code>, at√° st√≥r√°ilte againn san athr√≥g <code>ptr</code>.</p>
<p>Coinn√≠mid an dearbh√∫ go bhfuil an t-inn√©acs <code>mid</code> laistigh den slisne. Ansin tagaimid chuig
an c√≥d neamhsh√°bh√°ilte: glacann an fheidhm <code>slice::from_raw_parts_mut</code> pointeoir amh
agus fad, agus crutha√≠onn s√≠ slisne. √ös√°idimid an fheidhm seo chun slisne a chruth√∫
a thosa√≠onn √≥ <code>ptr</code> agus at√° ina m√≠reanna <code>mid</code> ar fhad. Ansin glaoimid ar an modh <code>add</code> ar <code>ptr</code> le <code>mid</code> mar arg√≥int chun pointeoir amh a fh√°il a thosa√≠onn ag
<code>mid</code>, agus crutha√≠mid slisne ag baint √∫s√°ide as an pointeoir sin agus an l√≠on at√° f√°gtha de
mh√≠reanna i ndiaidh <code>mid</code> mar an fad.</p>
<p>T√° an fheidhm <code>slice::from_raw_parts_mut</code> neamhsh√°bh√°ilte mar go nglacann s√≠ pointeoir amh agus n√≠ m√≥r di muin√≠n a bheith aici go bhfuil an pointeoir seo bail√≠. T√° an modh <code>add</code> ar phointeoir√≠ amha
neamhsh√°bh√°ilte freisin, mar n√≠ m√≥r di muin√≠n a bheith aici go bhfuil an su√≠omh frith√°ireamh ina phointeoir bail√≠ freisin. D√° bhr√≠ sin, b'√©igean d√∫inn bloc <code>unsafe</code> a chur timpeall ar √°r nglaonna chuig
<code>slice::from_raw_parts_mut</code> agus <code>add</code> ionas go bhf√©adfaimis glaoch orthu. Tr√≠ fh√©achaint ar
an gc√≥d agus tr√≠d an dearbh√∫ a chur leis go gcaithfidh <code>mid</code> a bheith n√≠os l√∫ n√° n√≥ cothrom le
<code>len</code>, is f√©idir linn a r√° go mbeidh na pointeoir√≠ amha go l√©ir a √∫s√°idtear laistigh den bhloc <code>unsafe</code>
ina dtuairim√≠ bail√≠ chuig sonra√≠ laistigh den slisne. Is √∫s√°id inghlactha agus
iomchu√≠ de <code>unsafe</code> √© seo.</p>
<p>Tabhair faoi deara nach g√° d√∫inn an fheidhm <code>split_at_mut</code> mar thoradh air sin a mharc√°il mar
<code>unsafe</code>, agus is f√©idir linn an fheidhm seo a ghlaoch √≥ Rust s√°bh√°ilte. Chrutha√≠omar teib√≠ s√°bh√°ilte chuig an gc√≥d neamhsh√°bh√°ilte le cur i bhfeidhm den fheidhm a √∫s√°ideann
c√≥d <code>unsafe</code> ar bhealach s√°bh√°ilte, toisc nach gcrutha√≠onn s√© ach pointeoir√≠ bail√≠ √≥ na
sonra√≠ a bhfuil rochtain ag an bhfeidhm seo orthu.</p>
<p>I gcodarsnacht leis sin, is d√≥cha go dtitfeadh √∫s√°id <code>slice::from_raw_parts_mut</code> i Liosta 20-7 nuair a √∫s√°idtear an slisne. Glacann an c√≥d seo su√≠omh cuimhne treallach
agus crutha√≠onn s√© slisne 10,000 m√≠r ar fhad.</p>
<Listing number="20-7" caption="Creating a slice from an arbitrary memory location">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    use std::slice;

    let address = 0x01234usize;
    let r = address as *mut i32;

    let values: &amp;[i32] = unsafe { slice::from_raw_parts_mut(r, 10000) };
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>N√≠ linn an chuimhne ag an su√≠omh treallach seo, agus n√≠l aon r√°tha√≠ocht ann go bhfuil luachanna bail√≠ <code>i32</code> sa tslis a chrutha√≠onn an c√≥d seo. M√° dh√©antar iarracht <code>values</code> a √∫s√°id amhail is d√° mba tslis bhail√≠ √≠, n√≠ bheidh aon sainmh√≠ni√∫ ar iompar.</p>
<h4 id="feidhmeanna-extern-a-√ös√°id-chun-c√≥d-seachtrach-a-ghlaoch"><a class="header" href="#feidhmeanna-extern-a-√ös√°id-chun-c√≥d-seachtrach-a-ghlaoch">Feidhmeanna <code>extern</code> a √ös√°id chun C√≥d Seachtrach a Ghlaoch</a></h4>
<p>Uaireanta, b'fh√©idir go mbeadh ar do ch√≥d Rust idirghn√≠omh√∫ le c√≥d at√° scr√≠ofa i dteanga eile. Chuige seo, t√° an eochairfhocal <code>extern</code> ag Rust a √©asca√≠onn cruth√∫
agus √∫s√°id <em>Foreign Function Interface (FFI)</em>. Is bealach √© FFI do
theanga r√≠omhchl√°r√∫ch√°in feidhmeanna a shaini√∫ agus teanga r√≠omhchl√°r√∫ch√°in (eachtrannach) eile a chumas√∫ chun na feidhmeanna sin a ghlaoch.</p>
<p>L√©ir√≠onn Liost√°il 20-8 conas comhth√°th√∫ a bhun√∫ leis an bhfeidhm <code>abs</code>
√≥n leabharlann chaighde√°nach C. De ghn√°th, b√≠onn feidhmeanna a dhearbha√≠tear laistigh de bhloic <code>extern</code>
neamhsh√°bh√°ilte le glaoch orthu √≥ ch√≥d Rust, mar sin n√≠ m√≥r iad a mharc√°il mar <code>unsafe</code> freisin. Is √© an ch√∫is at√° leis n√° nach gcuireann teangacha eile rialacha agus r√°tha√≠ochta√≠ Rust i bhfeidhm, agus n√≠ f√©idir le Rust iad a sheice√°il, mar sin t√° an fhreagracht ar an r√≠omhchl√°raitheoir s√°bh√°ilteacht a chinnti√∫.</p>
<Listing number="20-8" file-name="src/main.rs" caption="Declaring and calling an `extern` function defined in another language">
<pre><pre class="playground"><code class="language-rust">unsafe extern "C" {
    fn abs(input: i32) -&gt; i32;
}

fn main() {
    unsafe {
        println!("Absolute value of -3 according to C: {}", abs(-3));
    }
}</code></pre></pre>
</Listing>
<p>Laistigh den bhloc <code>unsafe extern "C"</code>, liosta√≠mid ainmneacha agus s√≠nithe feidhmeanna seachtracha √≥ theanga eile ar mhaith linn glaoch uirthi. Sainmh√≠n√≠onn an chuid <code>"C"</code> c√©n <em>comh√©adan d√©n√°rtha feidhmchl√°ir (ABI)</em> a √∫s√°ideann an fheidhm sheachtrach: sainmh√≠n√≠onn an ABI conas glaoch ar an bhfeidhm ag leibh√©al an tion√≥il. Is √© an ABI <code>"C"</code> an ceann is coitianta agus leanann s√© ABI na teanga r√≠omhchl√°r√∫ch√°in C.</p>
<p>N√≠l aon bhreithnithe s√°bh√°ilteachta cuimhne ag baint leis an bhfeidhm seo, √°fach.
Go deimhin, t√° a fhios againn go mbeidh aon ghlao ar <code>abs</code> s√°bh√°ilte i gc√≥na√≠ d'aon <code>i32</code>, mar sin is f√©idir linn an eochairfhocal <code>safe</code> a √∫s√°id chun a r√° go bhfuil s√© s√°bh√°ilte glaoch ar an bhfeidhm shonrach seo c√© go bhfuil s√≠ i mbloc <code>unsafe extern</code>. Nuair a dh√©anaimid an t-athr√∫ sin, n√≠ g√° bloc <code>unsafe</code> a thuilleadh le glaoch uirthi, mar a thaispe√°ntar i Liost√°il 20-9.</p>
<Listing number="20-9" file-name="src/main.rs" caption="Explicitly marking a function as `safe` within an `unsafe extern` block and calling it safely">
<pre><pre class="playground"><code class="language-rust">unsafe extern "C" {
    safe fn abs(input: i32) -&gt; i32;
}

fn main() {
    println!("Absolute value of -3 according to C: {}", abs(-3));
}</code></pre></pre>
</Listing>
<p>N√≠ chialla√≠onn s√© go bhfuil feidhm s√°bh√°ilte m√° mharc√°lann t√∫ √≠ mar <code>safe</code>! Ina √°it sin, is cos√∫il le gealltanas at√° √° thabhairt agat do Rust <em>go bhfuil s√≠</em> s√°bh√°ilte √≠. Is ortsa at√° an fhreagracht f√≥s a chinnti√∫ go gcomhl√≠ontar an gealltanas sin!</p>
<blockquote>
<h4 id="ag-glaoch-ar-fheidhmeanna-rust-√≥-theangacha-eile"><a class="header" href="#ag-glaoch-ar-fheidhmeanna-rust-√≥-theangacha-eile">Ag Glaoch ar Fheidhmeanna Rust √≥ Theangacha Eile</a></h4>
<p>Is f√©idir linn <code>extern</code> a √∫s√°id freisin chun comh√©adan a chruth√∫ a ligeann do theangacha eile
glaoch ar fheidhmeanna Rust. In ionad bloc ioml√°n <code>extern</code> a chruth√∫, cuirimid an
eochairfhocal <code>extern</code> leis agus sonra√≠mid an ABI le h√∫s√°id d√≠reach roimh an eochairfhocal <code>fn</code> don
fheidhm √°bhartha. N√≠ m√≥r d√∫inn an√≥t√°il <code>#[unsafe(no_mangle)]</code> a chur leis freisin
chun a r√° leis an tiomsaitheoir Rust gan ainm na feidhme seo a mhilleadh. Is √© <em>Mhangling</em>
n√° nuair a athra√≠onn tiomsaitheoir an t-ainm a thugamar d'fheidhm go hainm difri√∫il
ina bhfuil n√≠os m√≥ faisn√©ise do chodanna eile den phr√≥iseas tiomsaithe le
a √∫s√°id ach at√° n√≠os l√∫ inl√©ite ag daoine. D√©anann gach tiomsaitheoir teanga r√≠omhchl√°r√∫ch√°in
ainmneacha a mhilleadh beag√°n difri√∫il, mar sin chun go mbeidh feidhm Rust inainmnithe ag
teangacha eile, n√≠ m√≥r d√∫inn mangling ainmneacha an tiomsaitheora Rust a dh√≠chumas√∫. T√° s√© seo
neamhsh√°bh√°ilte mar d'fh√©adfadh imbhuailt√≠ ainmneacha a bheith ann trasna leabharlanna gan an
mangling ionsuite, mar sin is orainne at√° an fhreagracht a chinnti√∫ go bhfuil an t-ainm at√°
easp√≥rt√°ilte againn s√°bh√°ilte le heasp√≥rt√°il gan mangling.</p>
<p>Sa sampla seo a leanas, d√©anaimid an fheidhm <code>call_from_c</code> inrochtana √≥
ch√≥d C, tar √©is √≠ a thioms√∫ chuig leabharlann chomhroinnte agus a nascadh √≥ C:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[unsafe(no_mangle)]
pub extern "C" fn call_from_c() {
println!("Glaoite ar fheidhm Rust √≥ C d√≠reach!");
}
<span class="boring">}</span></code></pre></pre>
<p>N√≠ g√° <code>unsafe</code> a √∫s√°id don √∫s√°id seo de <code>extern</code>.</p>
</blockquote>
<h3 id="rochtain-ar-athr√≥g-statach-inathraithe-n√≥-√≠-a-mhodhn√∫"><a class="header" href="#rochtain-ar-athr√≥g-statach-inathraithe-n√≥-√≠-a-mhodhn√∫">Rochtain ar Athr√≥g Statach Inathraithe n√≥ √≠ a Mhodhn√∫</a></h3>
<p>Sa leabhar seo, n√≠or phl√©amar <em>athr√≥ga domhanda</em> go f√≥ill, a dtaca√≠onn Rust leo
ach is f√©idir leo a bheith ina gc√∫is le rialacha √∫in√©ireachta Rust. M√° t√° dh√° shn√°ithe ag
rochtain ar an athr√≥g dhomhanda inathraithe ch√©anna, is f√©idir leis r√°s sonra√≠ a chur faoi deara.</p>
<p>I Rust, tugtar athr√≥ga <em>statacha</em> ar athr√≥ga domhanda. Taispe√°nann liost√°il 20-10
sampla dearbhaithe agus √∫s√°id athr√≥g statach le slisne teaghr√°in mar
luach.</p>
<Listing number="20-10" file-name="src/main.rs" caption="Defining and using an immutable static variable">
<pre><pre class="playground"><code class="language-rust">static HELLO_WORLD: &amp;str = "Hello, world!";

fn main() {
    println!("name is: {HELLO_WORLD}");
}</code></pre></pre>
</Listing>
<p>T√° athr√≥ga statach cos√∫il le tairiseacha, a phl√©amar sa chuid
<a href="ch03-01-variables-and-mutability.html#constants">‚ÄúTairiseacha‚Äù</a><!-- neamhaird -->
i gCaibidil 3. T√° ainmneacha na n-athr√≥g statach i <code>SCREAMING_SNAKE_CASE</code> de r√©ir
choinbhinsi√∫in. N√≠ f√©idir le hathr√≥ga statach tagairt√≠ a st√≥r√°il ach leis an saolr√© <code>'static</code>, rud a chialla√≠onn gur f√©idir leis an tiomsaitheoir Rust an saolr√© a r√≠omh agus nach bhfuil orainn √© a an√≥t√°il go sainr√°ite. T√° s√© s√°bh√°ilte rochtain a fh√°il ar athr√≥g statach
neamh-athraithe.</p>
<p>Difr√≠ocht bheag idir tairiseacha agus athr√≥ga statach neamh-athraithe n√° go
bhfuil seoladh seasta sa chuimhne ag luachanna in athr√≥g statach. Tr√≠ √∫s√°id a bhaint as an luach
rochtaineofar ar na sonra√≠ c√©anna i gc√≥na√≠. Ar an l√°imh eile, ceada√≠tear do thairiseacha
a gcuid sonra√≠ a dh√∫bailt aon uair a √∫s√°idtear iad. Difr√≠ocht eile is ea gur f√©idir le hathr√≥ga statach
a bheith inathraithe. T√° s√©
<em>neamhsh√°bh√°ilte</em> rochtain a fh√°il ar athr√≥ga statach inathraithe agus iad a mhodhn√∫. Taispe√°nann liost√∫ 20-11 conas athr√≥g statach inathraithe darb ainm <code>COUNTER</code> a dhearbh√∫, rochtain a fh√°il uirthi agus √≠ a mhodhn√∫.</p>
<Listing number="20-11" file-name="src/main.rs" caption="Reading from or writing to a mutable static variable is unsafe">
<pre><pre class="playground"><code class="language-rust">static mut COUNTER: u32 = 0;

/// SAFETY: Calling this from more than a single thread at a time is undefined
/// behavior, so you *must* guarantee you only call it from a single thread at
/// a time.
unsafe fn add_to_count(inc: u32) {
    unsafe {
        COUNTER += inc;
    }
}

fn main() {
    unsafe {
        // SAFETY: This is only called from a single thread in `main`.
        add_to_count(3);
        println!("COUNTER: {}", *(&amp;raw const COUNTER));
    }
}</code></pre></pre>
</Listing>
<p>Mar is amhlaidh le hathr√≥ga rialta, sonra√≠mid inathraitheacht ag baint √∫s√°ide as an eochairfhocal <code>mut</code>. Aon
ch√≥d a l√©ann n√≥ a scr√≠obhann √≥ <code>COUNTER</code>, n√≠ m√≥r d√≥ a bheith laistigh de bhloc <code>unsafe</code>. Tiomsa√≠onn agus priont√°lann an
c√≥d i Liosta 20-11 <code>COUNTER: 3</code> mar a bheimid ag s√∫il leis
toisc go bhfuil s√© sn√°ithithe aonair. D√° mbeadh rochtain ag il-sn√°itheanna ar <code>COUNTER</code>, is d√≥cha go mbeadh r√°sa√≠ sonra√≠ mar thoradh air, mar sin is iompar neamhshainithe √©. D√° bhr√≠ sin, n√≠ m√≥r d√∫inn
an fheidhm ioml√°n a mharc√°il mar <code>unsafe</code>, agus an teorainn s√°bh√°ilteachta a dhoicim√©ad√∫, ionas
go mbeidh a fhios ag aon duine a ghlaonn ar an bhfeidhm cad at√° ceadaithe agus nach bhfuil ceadaithe d√≥ibh a dh√©anamh
go s√°bh√°ilte.</p>
<p>Aon uair a scr√≠obhaimid feidhm neamhsh√°bh√°ilte, is gn√°ch tr√°cht a scr√≠obh
ag tos√∫ le <code>SAFETY</code> agus ag m√≠ni√∫ cad is g√° don ghlaoiteoir a dh√©anamh chun an
fheidhm a ghlaoch go s√°bh√°ilte. Mar an gc√©anna, aon uair a dh√©anaimid oibr√≠ocht neamhsh√°bh√°ilte, is gn√°ch tr√°cht a scr√≠obh ag tos√∫ le <code>SAFETY</code> chun a mh√≠ni√∫ conas a chotha√≠tear na
rialacha s√°bh√°ilteachta.</p>
<p>Ina theannta sin, n√≠ chead√≥idh an tiomsaitheoir duit tagairt√≠ a chruth√∫ d'athr√≥g statach inathraithe. N√≠ f√©idir leat rochtain a fh√°il air ach tr√≠ phointeoir amh, a crutha√≠odh le ceann de na hoibreoir√≠ iasachta amh. √Åir√≠tear leis sin c√°sanna ina gcrutha√≠tear an tagairt go dofheicthe, mar nuair a √∫s√°idtear √© sa <code>println!</code> sa liost√∫ c√≥d seo. Cuid√≠onn an
riachtanas nach f√©idir tagairt√≠ d'athr√≥ga statach inathraithe a chruth√∫ ach tr√≠
phointeoir√≠ amha le riachtanais s√°bh√°ilteachta a dh√©anamh n√≠os soil√©ire maidir lena n-√∫s√°id.</p>
<p>Le sonra√≠ inathraithe at√° inrochtana go domhanda, t√° s√© deacair a chinnti√∫ nach bhfuil aon r√°sa√≠ sonra√≠ ann, agus is √© sin an f√°th a mheasann Rust go bhfuil athr√≥ga statach inathraithe neamhsh√°bh√°ilte. M√°s f√©idir, is fearr na teicn√≠c√≠ comhthr√°thachta agus na
pointeoir√≠ cliste sn√°ithe-sh√°bh√°ilte a phl√©amar i gCaibidil 16 a √∫s√°id ionas go seice√°lann an tiomsaitheoir go nd√©antar sonra√≠ a rochtaintear √≥ shn√°itheanna √©ags√∫la go s√°bh√°ilte.</p>
<h3 id="tr√©ith-neamhsh√°bh√°ilte-a-chur-i-bhfeidhm"><a class="header" href="#tr√©ith-neamhsh√°bh√°ilte-a-chur-i-bhfeidhm">Tr√©ith Neamhsh√°bh√°ilte a Chur i bhFeidhm</a></h3>
<p>Is f√©idir linn <code>unsafe</code> a √∫s√°id chun tr√©ith neamhsh√°bh√°ilte a chur i bhfeidhm. T√° tr√©ith neamhsh√°bh√°ilte nuair a bh√≠onn roinnt neamhathr√≥g ag ceann amh√°in ar a laghad d√° modhanna nach f√©idir leis an tiomsaitheoir a fh√≠or√∫. Dearbha√≠mid go bhfuil tr√©ith <code>unsafe</code> tr√≠d an eochairfhocal <code>unsafe</code> a chur roimh <code>trait</code> agus cur i bhfeidhm na tr√©ithe a mharc√°il mar <code>unsafe</code> freisin, mar a thaispe√°ntar i
Liost√∫ 20-12.</p>
<Listing number="20-12" caption="Defining and implementing an unsafe trait">
<pre><pre class="playground"><code class="language-rust">unsafe trait Foo {
    // methods go here
}

unsafe impl Foo for i32 {
    // method implementations go here
}

fn main() {}</code></pre></pre>
</Listing>
<p>Tr√≠ √∫s√°id a bhaint as <code>unsafe impl</code>, t√°imid ag gealladh go gcoime√°dfaimid na neamhathraithe nach f√©idir leis an tiomsaitheoir a fh√≠or√∫.</p>
<p>Mar shampla, cuimhnigh ar na tr√©ithe marc√≥ra <code>Sync</code> agus <code>Send</code> a phl√©amar sa chuid
<a href="ch16-04-extensible-concurrency-sync-and-send.html#extensible-concurrency-with-the-sync-and-send-traits">‚ÄúExtensible Concurrency with the <code>Sync</code> and <code>Send</code>
Traits‚Äù</a><!-- ignore -->
i gCaibidil 16: cuireann an tiomsaitheoir na tr√©ithe seo i bhfeidhm go huathoibr√≠och m√°
t√° √°r gcine√°lacha comhdh√©anta go hioml√°n de chine√°lacha <code>Send</code> agus <code>Sync</code>. M√° chuireann muid cine√°l i bhfeidhm
ina bhfuil cine√°l nach <code>Send</code> n√≥ <code>Sync</code> √©, amhail pointeoir√≠ amha,
agus m√°s mian linn an cine√°l sin a mharc√°il mar <code>Send</code> n√≥ <code>Sync</code>, n√≠ m√≥r d√∫inn <code>unsafe</code> a √∫s√°id. N√≠ f√©idir le Rust
a fh√≠or√∫ go gcoime√°dann √°r gcine√°l na r√°tha√≠ochta√≠ gur f√©idir √© a sheoladh go s√°bh√°ilte
trasna sn√°itheanna n√≥ rochtain a fh√°il air √≥ il-sn√°itheanna; d√° bhr√≠ sin, n√≠ m√≥r d√∫inn na seice√°lacha sin a dh√©anamh de l√°imh agus a l√©iri√∫ mar sin le <code>unsafe</code>.</p>
<h3 id="rochtain-ar-r√©ims√≠-aontais"><a class="header" href="#rochtain-ar-r√©ims√≠-aontais">Rochtain ar R√©ims√≠ Aontais</a></h3>
<p>Is √© an gn√≠omh deireanach nach n-oibr√≠onn ach le <code>unsafe</code> n√° rochtain a fh√°il ar r√©ims√≠
<em>union</em>. T√° <code>union</code> cos√∫il le <code>struct</code>, ach n√≠ √∫s√°idtear ach r√©imse dearbhaithe amh√°in
i gc√°s √°irithe ag an am c√©anna. √ös√°idtear aontais go pr√≠omha chun
idirghn√≠omh√∫ le haontais i gc√≥d C. T√° rochtain a fh√°il ar r√©ims√≠ aontais neamhsh√°bh√°ilte toisc nach f√©idir le Rust
cine√°l na sonra√≠ at√° st√≥r√°ilte faoi l√°thair san aontais a r√°th√∫.
Is f√©idir leat tuilleadh eolais a fh√°il faoi aontais i <a href="../reference/items/unions.html">an Tagairt Rust</a>.</p>
<h3 id="√ös√°id-a-bhaint-as-miri-chun-c√≥d-neamhsh√°bh√°ilte-a-sheice√°il"><a class="header" href="#√ös√°id-a-bhaint-as-miri-chun-c√≥d-neamhsh√°bh√°ilte-a-sheice√°il">√ös√°id a bhaint as Miri chun c√≥d neamhsh√°bh√°ilte a sheice√°il</a></h3>
<p>Nuair at√° c√≥d neamhsh√°bh√°ilte √° scr√≠obh agat, b'fh√©idir gur mhaith leat a sheice√°il go bhfuil an rud at√° scr√≠ofa agat
s√°bh√°ilte agus ceart i nd√°ir√≠re. Ceann de na beala√≠ is fearr chun √© sin a dh√©anamh n√°
<a href="https://github.com/rust-lang/miri">Miri</a> a √∫s√°id, uirlis oifigi√∫il Rust chun iompar neamhshainithe a bhrath. C√© gur uirlis <em>statach</em> √© an seice√°la√≠ iasachta a oibr√≠onn ag am tiomsaithe, is uirlis
<em>dinimici√∫il</em> √© Miri a oibr√≠onn ag am rith. Seice√°lann s√© do ch√≥d tr√≠ do
chl√°r, n√≥ a shraith t√°st√°la, a rith, agus a bhrath nuair a sh√°ra√≠onn t√∫ na rialacha a thuigeann s√© faoi conas ba ch√≥ir do Rust oibri√∫.</p>
<p>√âil√≠onn √∫s√°id Miri t√≥g√°il o√≠che de Rust (a labhra√≠mid faoi n√≠os m√≥ i
<a href="appendix-07-nightly-rust.html">Aguis√≠n G: Conas a dh√©antar Rust agus ‚ÄúRust O√≠che‚Äù</a>). Is f√©idir leat
leagan o√≠che de Rust agus an uirlis Miri a shuite√°il tr√≠ <code>rustup +nightly component add miri</code> a chl√≥scr√≠obh. N√≠ athra√≠onn s√© seo c√©n leagan de Rust a √∫s√°ideann do thionscadal; n√≠ chuireann s√© ach an uirlis le do ch√≥ras ionas gur f√©idir leat √© a √∫s√°id nuair is mian leat.
Is f√©idir leat Miri a rith ar thionscadal tr√≠ <code>cargo +nightly miri run</code> n√≥ <code>cargo +nightly miri test</code> a chl√≥scr√≠obh.</p>
<p>Mar shampla de c√© chomh cabhrach is f√©idir leis seo a bheith, smaoinigh ar a tharla√≠onn nuair a ritheann muid √©
i gcoinne Liost√°la 20-11:</p>
<pre><code class="language-console">$ cargo +nightly miri run
   Compiling unsafe-example v0.1.0 (file:///projects/unsafe-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.01s
     Running `/Users/chris/.rustup/toolchains/nightly-aarch64-apple-darwin/bin/cargo-miri runner target/miri/aarch64-apple-darwin/debug/unsafe-example`
warning: creating a shared reference to mutable static is discouraged
  --&gt; src/main.rs:14:33
   |
14 |         println!("COUNTER: {}", COUNTER);
   |                                 ^^^^^^^ shared reference to mutable static
   |
   = note: for more information, see &lt;https://doc.rust-lang.org/nightly/edition-guide/rust-2024/static-mut-references.html&gt;
   = note: shared references to mutable statics are dangerous; it's undefined behavior if the static is mutated or if a mutable reference is created for it while the shared reference lives
   = note: `#[warn(static_mut_refs)]` on by default

COUNTER: 3
</code></pre>
<p>Tugann s√© faoi deara go cabhrach agus go cruinn go bhfuil tagairt√≠ comhroinnte againn do shonra√≠ inathraithe,
agus tugann s√© rabhadh faoi. Sa ch√°s seo, n√≠ ins√≠onn s√© d√∫inn conas an
fhadhb a r√©iteach,
ach cialla√≠onn s√© go bhfuil a fhios againn go bhfuil fadhb fh√©ideartha ann agus gur f√©idir linn smaoineamh ar
conas a chinnti√∫ go bhfuil s√≠ s√°bh√°ilte. I gc√°sanna eile, is f√©idir leis a r√° linn i nd√°ir√≠re go bhfuil roinnt
c√≥d <em>cinnte</em> a bheith m√≠cheart agus molta√≠ a dh√©anamh maidir le conas √© a shocr√∫.</p>
<p>N√≠ ghabhann Miri <em>gach</em> rud_ a d'fh√©adf√° a dh√©anamh m√≠cheart agus c√≥d neamhsh√°bh√°ilte √° scr√≠obh agat.</p>
<p>Ar an gc√©ad dul s√≠os, √≥s rud √© gur seice√°il dhinimici√∫il √≠, n√≠ ghabhann s√© ach fadhbanna le c√≥d
a ritheann i nd√°ir√≠re. Cialla√≠onn s√© sin go mbeidh ort √© a √∫s√°id i gcomhar le
teicn√≠c√≠ t√°st√°la maithe chun do mhuin√≠n faoin gc√≥d neamhsh√°bh√°ilte a
scr√≠obh t√∫ a mh√©ad√∫. Ar an gc√©ad dul s√≠os, n√≠ chl√∫da√≠onn s√© gach bealach is f√©idir a bhf√©adfadh do ch√≥d
a bheith lochtach. M√° <em>ghabhann</em> Miri fadhb, t√° a fhios agat go bhfuil fabht ann, ach n√≠ chialla√≠onn s√© nach bhfuil fadhb ann d√≠reach toisc nach <em>ghabhann</em> Miri fabht. Is f√©idir le Miri
go leor a ghabh√°il, √°fach. Bain triail as √© a rith ar na sampla√≠ eile de ch√≥d neamhsh√°bh√°ilte sa
chaibidil seo agus f√©ach cad a deir s√©!</p>
<h3 id="cathain-is-ceart-c√≥d-neamhsh√°bh√°ilte-a-√ös√°id"><a class="header" href="#cathain-is-ceart-c√≥d-neamhsh√°bh√°ilte-a-√ös√°id">Cathain is Ceart C√≥d Neamhsh√°bh√°ilte a √ös√°id</a></h3>
<p>N√≠l s√© m√≠cheart n√° fi√∫ neamhaird a thabhairt ar <code>unsafe</code> a √∫s√°id chun ceann de na c√∫ig ghn√≠omh (s√°rchumhachta√≠) a pl√©adh d√≠reach a dh√©anamh. Ach t√° s√© n√≠os deacra c√≥d <code>unsafe</code> a fh√°il
ceart mar n√≠ f√©idir leis an tiomsaitheoir cabhr√∫ le s√°bh√°ilteacht cuimhne a choinne√°il. Nuair a bh√≠onn
c√∫is agat c√≥d <code>unsafe</code> a √∫s√°id, is f√©idir leat √© sin a dh√©anamh, agus m√° t√° an n√≥ta <code>unsafe</code> soil√©ir agat, is fusa foinse na bhfadhbanna a rian√∫ nuair a tharla√≠onn siad.
Aon uair a scr√≠obhann t√∫ c√≥d neamhsh√°bh√°ilte, is f√©idir leat Miri a √∫s√°id chun cabhr√∫ leat a bheith n√≠os muin√≠n√≠
go gcomhl√≠onann an c√≥d at√° scr√≠ofa agat rialacha Rust.</p>
<p>Chun ini√∫chadh i bhfad n√≠os doimhne a dh√©anamh ar conas oibri√∫ go h√©ifeachtach le Rust neamhsh√°bh√°ilte, l√©igh
treoir oifigi√∫il Rust don √°bhar, an <a href="https://doc.rust-lang.org/nomicon/">Rustonomicon</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tr√©ithe-ardleibh√©il"><a class="header" href="#tr√©ithe-ardleibh√©il">Tr√©ithe Ardleibh√©il</a></h2>
<p>Phl√©amar tr√©ithe ar dt√∫s sa chuid <a href="ch10-02-traits.html#traits-defining-shared-behavior">‚ÄúTr√©ithe: Sainmh√≠ni√∫ Iompair
Chomhroinnte‚Äù</a><!-- ignore --> de Chaibidil
10, ach n√≠or phl√©amar na sonra√≠ n√≠os airde. Anois go bhfuil tuilleadh eolais agat
faoi Rust, is f√©idir linn dul isteach sa mhionsonra√≠.</p>
<h3 id="cine√°lacha-√Åitshealbh√≥ir√≠-a-shonr√∫-i-sainmh√≠nithe-tr√©ithe-le-cine√°lacha-gaolmhara"><a class="header" href="#cine√°lacha-√Åitshealbh√≥ir√≠-a-shonr√∫-i-sainmh√≠nithe-tr√©ithe-le-cine√°lacha-gaolmhara">Cine√°lacha √Åitshealbh√≥ir√≠ a Shonr√∫ i Sainmh√≠nithe Tr√©ithe le Cine√°lacha Gaolmhara</a></h3>
<p>Ceangla√≠onn <em>cine√°lacha gaolmhara</em> √°itshealbh√≥ir cine√°il le tr√©ith sa chaoi is gur f√©idir leis na sainmh√≠nithe
modhanna na dtr√©ithe na cine√°lacha √°itshealbh√≥ir√≠ seo a √∫s√°id ina s√≠nithe. Sonr√≥idh
cur i bhfeidhm tr√©ithe an cine√°l coincr√©ite at√° le h√∫s√°id in ionad an
chine√°il
√°itshealbh√≥ra don chur i bhfeidhm ar leith. Ar an mbealach sin, is f√©idir linn
tr√©ith a shaini√∫ a √∫s√°ideann cine√°lacha √°irithe gan a bheith ar an eolas go d√≠reach cad iad na cine√°lacha sin
go dt√≠ go gcuirtear an tr√©ith i bhfeidhm.</p>
<p>T√° cur s√≠os d√©anta againn ar an gcuid is m√≥ de na gn√©ithe ardleibh√©il sa chaibidil seo mar rud nach bhfuil
g√° leo go minic. T√° cine√°lacha gaolmhara √°it √©igin sa l√°r: √∫s√°idtear iad n√≠os annamh n√° gn√©ithe a mh√≠n√≠tear sa chuid eile den leabhar ach n√≠os coitianta n√° go leor de na gn√©ithe eile a phl√©itear sa chaibidil seo.</p>
<p>Sampla amh√°in de thr√©ith le cine√°l gaolmhar n√° an tr√©ith <code>Iterator</code> a shol√°thra√≠onn an
leabharlann chaighde√°nach. Tugtar <code>Item</code> ar an gcine√°l gaolmhar agus seasann s√©
do chine√°l na luachanna a bhfuil an cine√°l a chuireann an tr√©ith <code>Iterator</code> i bhfeidhm ag
athr√° orthu. T√° sainmh√≠ni√∫ an tr√©ithe <code>Iterator</code> mar a thaispe√°ntar i Liosta
20-13.</p>
<Listing number="20-13" caption="The definition of the `Iterator` trait that has an associated type `Item`">
<pre><code class="language-rust noplayground">pub trait Iterator {
    type Item;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;
}</code></pre>
</Listing>
<p>Is √°itchoinne√°la√≠ √© an cine√°l <code>Item</code>, agus l√©ir√≠onn sainmh√≠ni√∫ an mhodha <code>next</code> go dtabharfaidh s√© luachanna den chine√°l <code>Option&lt;Self::Item&gt;</code> ar ais. Sonr√≥idh feidhmitheoir√≠ an tr√©ith <code>Iterator</code> an cine√°l coincr√©ite do <code>Item</code>, agus tabharfaidh an modh <code>next</code> <code>Option</code> ar ais ina bhfuil luach den chine√°l coincr√©ite sin.</p>
<p>D‚Äôfh√©adfadh s√© go mbeadh cuma choincheap cos√∫il le cine√°lacha comhlachaithe le cine√°lacha, sa mh√©id is go gceada√≠onn an dara ceann d√∫inn feidhm a shaini√∫ gan a shonr√∫ c√© na cine√°lacha is f√©idir l√©i a l√°imhse√°il. Chun an difr√≠ocht idir an d√° choincheap a scr√∫d√∫, f√©achfaimid ar
chur i bhfeidhm an tr√©ith <code>Iterator</code> ar chine√°l darb ainm <code>Counter</code> a shonra√≠onn
gurb √© an cine√°l <code>Item</code> n√° <code>u32</code>:</p>
<Listing file-name="src/lib.rs">
<pre><code class="language-rust ignore"><span class="boring">struct Counter {
</span><span class="boring">    count: u32,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Counter {
</span><span class="boring">    fn new() -&gt; Counter {
</span><span class="boring">        Counter { count: 0 }
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>impl Iterator for Counter {
    type Item = u32;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {
        // --snip--
<span class="boring">        if self.count &lt; 5 {
</span><span class="boring">            self.count += 1;
</span><span class="boring">            Some(self.count)
</span><span class="boring">        } else {
</span><span class="boring">            None
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Is cos√∫il go bhfuil an comhr√©ir seo inchompar√°ide le comhr√©ir na gcine√°l. Mar sin, c√©n f√°th nach sainmh√≠n√≠tear an tr√©ith <code>Iterator</code> le cinn ghinear√°lta, mar a thaispe√°ntar i Liosta 20-14?</p>
<Listing number="20-14" caption="A hypothetical definition of the `Iterator` trait using generics">
<pre><code class="language-rust noplayground">pub trait Iterator&lt;T&gt; {
    fn next(&amp;mut self) -&gt; Option&lt;T&gt;;
}</code></pre>
</Listing>
<p>Is √© an difr√≠ocht n√° nuair a √∫s√°idtear cine√°lacha, mar at√° i Liost√°il 20-14, n√≠ m√≥r d√∫inn na cine√°lacha i ngach cur i bhfeidhm a an√≥t√°il; toisc gur f√©idir linn <code>Iterator&lt;String&gt; for Counter</code> n√≥ aon chine√°l eile a chur i bhfeidhm freisin, d'fh√©adfaimis il-chur i bhfeidhm de <code>Iterator</code> a bheith againn le haghaidh <code>Counter</code>. I bhfocail eile, nuair a bh√≠onn paraim√©adar cine√°lach ag tr√©ith, is f√©idir √© a chur i bhfeidhm do chine√°l ar√≠s agus ar√≠s eile, ag athr√∫
na gcine√°lacha coincr√©iteacha de na paraim√©adair chine√°lacha cine√°lacha gach uair. Nuair a √∫s√°idimid an modh
<code>next</code> ar <code>Counter</code>, bheadh ‚Äã‚Äãorainn an√≥t√°lacha cine√°il a shol√°thar chun
a l√©iri√∫ c√©n cur i bhfeidhm de <code>Iterator</code> is mian linn a √∫s√°id.</p>
<p>Le cine√°lacha gaolmhara, n√≠ g√° d√∫inn cine√°lacha a an√≥t√°il toisc nach f√©idir linn
tr√©ith a chur i bhfeidhm ar chine√°l ar√≠s agus ar√≠s eile. I Liost√°il 20-13 leis an
sainmh√≠ni√∫ a √∫s√°ideann cine√°lacha gaolmhara, n√≠ f√©idir linn a roghn√∫ ach uair amh√°in c√©n cine√°l
<code>Item</code> a bheidh ann, toisc nach f√©idir ach <code>impl Iterator for Counter</code> amh√°in a bheith ann. N√≠ g√° d√∫inn a shonr√∫ go dteasta√≠onn athr√° de luachanna <code>u32</code> uainn i ngach √°it
a dtugaimid <code>next</code> air ar <code>Counter</code>.</p>
<p>B√≠onn cine√°lacha gaolmhara mar chuid de chonradh an tr√©ithe freisin: n√≠ m√≥r do chur i bhfeidhm an
tr√©ithe cine√°l a shol√°thar chun seasamh in ionad an √°itchoinne√°la√≠ cine√°l gaolmhar.
Is minic a bh√≠onn ainm ag cine√°lacha gaolmhara a chuireann s√≠os ar an gcaoi a n-√∫s√°idfear an cine√°l,
agus is dea-chleachtas √© an cine√°l gaolmhar a dhoicim√©ad√∫ sa doicim√©ad√∫ API.</p>
<h3 id="paraim√©adair-r√©amhshocraithe-cine√°l-gin√©ireach-agus-r√≥-ualach-oibreora"><a class="header" href="#paraim√©adair-r√©amhshocraithe-cine√°l-gin√©ireach-agus-r√≥-ualach-oibreora">Paraim√©adair R√©amhshocraithe Cine√°l Gin√©ireach agus R√≥-Ualach Oibreora</a></h3>
<p>Nuair a √∫s√°idimid paraim√©adair chine√°l gin√©ireacha, is f√©idir linn cine√°l coincr√©ite r√©amhshocraithe a shonr√∫ don
chine√°l gin√©ireach. Cuireann s√© seo deireadh leis an ng√° at√° ag cur i bhfeidhm an tr√©ithe
cine√°l coincr√©ite a shonr√∫ m√° oibr√≠onn an cine√°l r√©amhshocraithe. Sonra√≠onn t√∫ cine√°l r√©amhshocraithe
nuair a bh√≠onn cine√°l gin√©ireach √° dhearbh√∫ leis an gcomhr√©ir <code>&lt;PlaceholderType=ConcreteType&gt;</code>.</p>
<p>Sampla iontach de ch√°s ina bhfuil an teicn√≠c seo √∫s√°ideach n√° le <em>operator
overloading</em>, ina nd√©anann t√∫ iompar oibreora (mar shampla <code>+</code>) a shaincheapadh
i gc√°sanna √°irithe.</p>
<p>N√≠ cheada√≠onn Rust duit d‚Äôoibreoir√≠ f√©in a chruth√∫ n√° r√≥-ualach a chur ar oibreoir√≠ treallacha. Ach is f√©idir leat r√≥-ualach a chur ar na hoibr√≠ochta√≠ agus na tr√©ithe comhfhreagracha at√° liostaithe i <code>std::ops</code> tr√≠ na tr√©ithe a bhaineann leis an oibreoir a chur i bhfeidhm. Mar shampla, i Liosta 20-15 r√≥-ualach a chur ar an oibreoir <code>+</code> chun dh√° ch√°s <code>Point</code> a chur le ch√©ile. D√©anaimid √© seo tr√≠d an tr√©ith <code>Add</code> a chur i bhfeidhm ar strucht√∫r <code>Point</code>:</p>
<Listing number="20-15" file-name="src/main.rs" caption="Implementing the `Add` trait to overload the `+` operator for `Point` instances">
<pre><pre class="playground"><code class="language-rust">use std::ops::Add;

#[derive(Debug, Copy, Clone, PartialEq)]
struct Point {
    x: i32,
    y: i32,
}

impl Add for Point {
    type Output = Point;

    fn add(self, other: Point) -&gt; Point {
        Point {
            x: self.x + other.x,
            y: self.y + other.y,
        }
    }
}

fn main() {
    assert_eq!(
        Point { x: 1, y: 0 } + Point { x: 2, y: 3 },
        Point { x: 3, y: 3 }
    );
}</code></pre></pre>
</Listing>
<p>Cuireann an modh <code>add</code> luachanna <code>x</code> dh√° ch√°s <code>Point</code> agus luachanna <code>y</code> dh√° ch√°s <code>Point</code> le ch√©ile chun <code>Point</code> nua a chruth√∫. T√° cine√°l gaolmhar leis an tr√©ith <code>Add</code> darb ainm <code>Output</code> a chinneann an cine√°l a fhilleann an modh <code>add</code>.</p>
<p>T√° an cine√°l cine√°lach r√©amhshocraithe sa ch√≥d seo laistigh den tr√©ith <code>Add</code>. Seo a shainmh√≠ni√∫:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Add&lt;Rhs=Self&gt; {
    type Output;

    fn add(self, rhs: Rhs) -&gt; Self::Output;
}
<span class="boring">}</span></code></pre></pre>
<p>Ba ch√≥ir go mbeadh an c√≥d seo cos√∫il le rud √©igin eolach: tr√©ith le modh amh√°in agus
cine√°l gaolmhar. Is √© <code>Rhs=Self</code> an chuid nua: tugtar <em>paraim√©adair
cine√°il</em> r√©amhshocraithe_ ar an gcomhr√©ir seo. Sainmh√≠n√≠onn an paraim√©adar cine√°il cine√°lach <code>Rhs</code> (gearr do ‚Äútaobh na l√°imhe deise‚Äù) cine√°l an pharaim√©adair <code>rhs</code> sa mhodh <code>add</code>. Mura
shonra√≠mid
cine√°l coincr√©ite do <code>Rhs</code> nuair a chuirfimid an tr√©ith <code>Add</code> i bhfeidhm, beidh cine√°l
<code>Rhs</code> r√©amhshocraithe go <code>Self</code>, arb √© an cine√°l a bheidh √° chur i bhfeidhm againn
<code>Add</code> air.</p>
<p>Nuair a chuireamar <code>Add</code> i bhfeidhm do <code>Point</code>, d'√∫s√°ideamar an r√©amhshocr√∫ do <code>Rhs</code> mar gur
theastaigh uainn dh√° ch√°s <code>Point</code> a chur leis. F√©achfaimid ar shampla de chur i bhfeidhm
na tr√©ithe <code>Add</code> √°it ar mian linn an cine√°l <code>Rhs</code> a shaincheapadh seachas an
r√©amhshocr√∫ a √∫s√°id.</p>
<p>T√° dh√° strucht√∫r againn, <code>Millimeters</code> agus <code>Meters</code>, a bhfuil luachanna acu in aonaid
difri√∫la. Tugtar an patr√∫n <em>newtype</em> ar an bhfillte√°n tana√≠ seo de chine√°l at√° ann cheana f√©in i strucht√∫r eile, a dh√©anaimid cur s√≠os n√≠os mine air sa chuid <a href="ch20-02-advanced-traits.html#using-the-newtype-pattern-to-implement-external-traits-on-external-types">‚ÄúAg √ös√°id an Phatr√∫in Newtype
chun Tr√©ithe Seachtracha a Chur i bhFeidhm ar Chine√°lacha Seachtracha‚Äù</a><!-- ignore
-->. Ba mhaith linn luachanna i millim√©adair a chur le luachanna i m√©adair agus go
nd√©anfadh cur i bhfeidhm <code>Add</code> an tiont√∫ i gceart. Is f√©idir linn <code>Add</code> a chur i bhfeidhm
le haghaidh <code>Millimeters</code> le <code>Meters</code> mar an <code>Rhs</code>, mar a thaispe√°ntar i Liost√°il 20-16.</p>
<Listing number="20-16" file-name="src/lib.rs" caption="Implementing the `Add` trait on `Millimeters` to add `Millimeters` to `Meters`">
<pre><code class="language-rust noplayground">use std::ops::Add;

struct Millimeters(u32);
struct Meters(u32);

impl Add&lt;Meters&gt; for Millimeters {
    type Output = Millimeters;

    fn add(self, other: Meters) -&gt; Millimeters {
        Millimeters(self.0 + (other.0 * 1000))
    }
}</code></pre>
</Listing>
<p>Chun <code>Millimeters</code> agus <code>Meters</code> a chur leis, sonra√≠mid <code>impl Add&lt;Meters&gt;</code> chun luach an pharaim√©adair chine√°il <code>Rhs</code> a shocr√∫ in ionad an r√©amhshocraithe <code>Self</code> a √∫s√°id.</p>
<p>√ös√°idfidh t√∫ paraim√©adair chine√°il r√©amhshocraithe ar dh√° phr√≠omhbhealach:</p>
<ul>
<li>Chun cine√°l a leathn√∫ gan an c√≥d at√° ann cheana a bhriseadh</li>
<li>Chun saincheapadh a chead√∫ i gc√°sanna sonracha nach mbeidh g√° ag formh√≥r na n-√∫s√°ideoir√≠ leis</li>
</ul>
<p>Is sampla den dara cusp√≥ir √© tr√©ith <code>Add</code> na leabharlainne caighde√°na√≠:
de ghn√°th, cuirfidh t√∫ dh√° chine√°l cos√∫il leis, ach sol√°thra√≠onn an tr√©ith <code>Add</code> an cumas
saincheapadh n√≠os faide n√° sin. M√° √∫s√°idtear paraim√©adar cine√°il r√©amhshocraithe sa sainmh√≠ni√∫ tr√©ithe <code>Add</code>, cialla√≠onn s√© nach g√° duit an paraim√©adar breise a shonr√∫ an chuid is m√≥ den
am. I bhfocail eile, n√≠l g√° le beag√°n cur i bhfeidhm, rud a fh√°gann
go bhfuil s√© n√≠os √©asca an tr√©ith a √∫s√°id.</p>
<p>T√° an ch√©ad chusp√≥ir cos√∫il leis an dara ceann ach ar a mhalairt: m√°s mian leat
paraim√©adar cine√°il a chur le tr√©ith at√° ann cheana f√©in, is f√©idir leat r√©amhshocr√∫ a thabhairt d√≥ chun
s√≠neadh feidhmi√∫lacht na tr√©ithe a chead√∫ gan an
c√≥d cur chun feidhme at√° ann cheana a bhriseadh.</p>
<h3 id="comhr√©ir-l√°nch√°ilithe-le-haghaidh-d√≠-athbhr√≠-glaoch-ar-mhodhanna-leis-an-ainm-c√©anna"><a class="header" href="#comhr√©ir-l√°nch√°ilithe-le-haghaidh-d√≠-athbhr√≠-glaoch-ar-mhodhanna-leis-an-ainm-c√©anna">Comhr√©ir L√°nch√°ilithe le haghaidh D√≠-athbhr√≠: Glaoch ar Mhodhanna leis an Ainm C√©anna</a></h3>
<p>N√≠l aon rud i Rust a chuireann cosc ‚Äã‚Äãar thr√©ith modh a bheith aici leis an ainm c√©anna
le
modh tr√©ithe eile, agus n√≠ chuireann Rust cosc ‚Äã‚Äãort an d√° thr√©ith a chur i bhfeidhm
ar chine√°l amh√°in. Is f√©idir freisin modh a chur i bhfeidhm go d√≠reach ar an gcine√°l leis
an t-ainm c√©anna le modhanna √≥ thr√©ithe.</p>
<p>Nuair a bh√≠onn t√∫ ag glaoch ar mhodhanna leis an ainm c√©anna, beidh ort a insint do Rust c√© acu ceann is mian leat a √∫s√°id. Smaoinigh ar an gc√≥d i Liost√°il 20-17 √°it a bhfuil dh√° thr√©ith sainmh√≠nithe againn,
<code>Pilot</code> agus <code>Wizard</code>, a bhfuil modh ar a dtugtar <code>fly</code> acu araon. Ansin cuirimid an d√° thr√©ith i bhfeidhm ar chine√°l <code>Human</code> a bhfuil modh ar a dtugtar <code>fly</code> curtha i bhfeidhm air cheana f√©in. D√©anann gach modh <code>fly</code> rud √©igin difri√∫il.</p>
<Listing number="20-17" file-name="src/main.rs" caption="Two traits are defined to have a ` method and are implemented on the `Human` type, and a `fly` method is implemented on `Human` directly">
<pre><pre class="playground"><code class="language-rust">trait Pilot {
    fn fly(&amp;self);
}

trait Wizard {
    fn fly(&amp;self);
}

struct Human;

impl Pilot for Human {
    fn fly(&amp;self) {
        println!("This is your captain speaking.");
    }
}

impl Wizard for Human {
    fn fly(&amp;self) {
        println!("Up!");
    }
}

impl Human {
    fn fly(&amp;self) {
        println!("*waving arms furiously*");
    }
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>Nuair a ghlaonn muid <code>fly</code> ar shampla de <code>Human</code>, glaonn an tiomsaitheoir ar an modh at√° curtha i bhfeidhm go d√≠reach ar an gcine√°l de r√©ir r√©amhshocraithe, mar a thaispe√°ntar i Liost√°il 20-18.</p>
<Listing number="20-18" file-name="src/main.rs" caption="Calling `fly` on an instance of `Human`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">trait Pilot {
</span><span class="boring">    fn fly(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">trait Wizard {
</span><span class="boring">    fn fly(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Human;
</span><span class="boring">
</span><span class="boring">impl Pilot for Human {
</span><span class="boring">    fn fly(&amp;self) {
</span><span class="boring">        println!("This is your captain speaking.");
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Wizard for Human {
</span><span class="boring">    fn fly(&amp;self) {
</span><span class="boring">        println!("Up!");
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Human {
</span><span class="boring">    fn fly(&amp;self) {
</span><span class="boring">        println!("*waving arms furiously*");
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let person = Human;
    person.fly();
}</code></pre></pre>
</Listing>
<p>Tr√≠ an c√≥d seo a rith, priont√°lfar <code>*waving arms furiously*</code>, rud a thaispe√°nann gur ghlaoigh Rust ar an modh <code>fly</code> a cuireadh i bhfeidhm ar <code>Human</code> go d√≠reach.</p>
<p>Chun na modhanna <code>fly</code> a ghlaoch √≥n tr√©ith <code>Pilot</code> n√≥ √≥n tr√©ith <code>Wizard</code>,
n√≠ m√≥r d√∫inn comhr√©ir n√≠os soil√©ire a √∫s√°id chun a shonr√∫ c√©n modh <code>fly</code> at√° i gceist againn.
L√©ir√≠onn liost√∫ 20-19 an comhr√©ir seo.</p>
<Listing number="20-19" file-name="src/main.rs" caption="Specifying which trait‚Äôs `fly` method we want to call">
<pre><pre class="playground"><code class="language-rust"><span class="boring">trait Pilot {
</span><span class="boring">    fn fly(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">trait Wizard {
</span><span class="boring">    fn fly(&amp;self);
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Human;
</span><span class="boring">
</span><span class="boring">impl Pilot for Human {
</span><span class="boring">    fn fly(&amp;self) {
</span><span class="boring">        println!("This is your captain speaking.");
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Wizard for Human {
</span><span class="boring">    fn fly(&amp;self) {
</span><span class="boring">        println!("Up!");
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Human {
</span><span class="boring">    fn fly(&amp;self) {
</span><span class="boring">        println!("*waving arms furiously*");
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    let person = Human;
    Pilot::fly(&amp;person);
    Wizard::fly(&amp;person);
    person.fly();
}</code></pre></pre>
</Listing>
<p>Tr√≠ ainm na tr√©ithe a shonr√∫ roimh ainm na modha, soil√©ir√≠tear do Rust c√©n cur i bhfeidhm de <code>fly</code> ar mhaith linn glaoch air. D‚Äôfh√©adfaimis <code>Human::fly(&amp;person)</code> a scr√≠obh freisin, at√° coibh√©iseach leis an <code>person.fly()</code> a d‚Äô√∫s√°ideamar i Liosta 20-19, ach t√° s√© seo beag√°n n√≠os faide le scr√≠obh mura g√° d√∫inn
d√≠bhri√∫.</p>
<p>Nuair a ritheann t√∫ an c√≥d seo, priont√°iltear an m√©id seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling traits-example v0.1.0 (file:///projects/traits-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.46s
     Running `target/debug/traits-example`
This is your captain speaking.
Up!
*waving arms furiously*
</code></pre>
<p>√ìs rud √© go nglacann an modh <code>fly</code> paraim√©adar <code>self</code>, d√° mbeadh dh√° <em>chine√°l</em> againn a
chuireann <em>trait</em> amh√°in i bhfeidhm, d'fh√©adfadh Rust a dh√©anamh amach c√©n cur i bhfeidhm de
thr√©ith le h√∫s√°id bunaithe ar an gcine√°l <code>self</code>.</p>
<p>Mar sin f√©in, n√≠ bh√≠onn paraim√©adar <code>self</code> ag feidhmeanna gaolmhara nach modhanna iad. Nuair a bh√≠onn cine√°lacha n√≥ tr√©ithe iolracha ann a shain√≠onn feidhmeanna neamh-mhodhacha
leis an ainm feidhme c√©anna, n√≠ bh√≠onn a fhios ag Rust i gc√≥na√≠ c√©n cine√°l at√° i gceist agat
mura n-√∫s√°ideann t√∫ <em>syntax l√°nch√°ilithe</em>. Mar shampla, i Liosta 20-20
crutha√≠mid tr√©ith do dh√≠dean ainmhithe ar mian leis <em>Spot</em> a thabhairt ar gach madra √≥g.
D√©anaimid tr√©ith <code>Animal</code> le feidhm neamh-mhodhach ghaolmhar <code>baby_name</code>.
Cuirtear an tr√©ith <code>Animal</code> i bhfeidhm don strucht√∫r <code>Dog</code>, ar a sol√°thra√≠mid
feidhm neamh-mhodhach ghaolmhar <code>baby_name</code> go d√≠reach freisin.</p>
<Listing number="20-20" file-name="src/main.rs" caption="A trait with an associated function and a type with an associated function of the same name that also implements the trait">
<pre><pre class="playground"><code class="language-rust">trait Animal {
    fn baby_name() -&gt; String;
}

struct Dog;

impl Dog {
    fn baby_name() -&gt; String {
        String::from("Spot")
    }
}

impl Animal for Dog {
    fn baby_name() -&gt; String {
        String::from("puppy")
    }
}

fn main() {
    println!("A baby dog is called a {}", Dog::baby_name());
}</code></pre></pre>
</Listing>
<p>Cuirimid an c√≥d chun ainm a thabhairt do na coile√°in√≠n√≠ go l√©ir Spot i bhfeidhm sa fheidhm <code>baby_name</code> a bhaineann le <code>Dog</code>. Cuireann an cine√°l <code>Dog</code> an tr√©ith <code>Animal</code> i bhfeidhm freisin, a chuireann s√≠os ar thr√©ithe at√° ag gach ainmh√≠. Tugtar coile√°in√≠n√≠ ar mhadra√≠ √≥ga, agus l√©ir√≠tear √© sin i gcur i bhfeidhm na tr√©ithe <code>Animal</code> ar <code>Dog</code> sa fheidhm <code>baby_name</code> a bhaineann leis an tr√©ith <code>Animal</code>.</p>
<p>I <code>main</code>, glaoimid ar an bhfeidhm <code>Dog::baby_name</code>, a ghlaonn ar an bhfeidhm
ghaolmhar a shainmh√≠n√≠tear ar <code>Dog</code> go d√≠reach. Priont√°lann an c√≥d seo an m√©id seo a leanas:</p>
<pre><code class="language-console">$ cargo run
   Compiling traits-example v0.1.0 (file:///projects/traits-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.54s
     Running `target/debug/traits-example`
A baby dog is called a Spot
</code></pre>
<p>N√≠ h√© seo an t-aschur a theastaigh uainn. Ba mhaith linn glaoch ar an bhfeidhm <code>baby_name</code> at√° mar chuid den tr√©ith <code>Animal</code> a chuireamar i bhfeidhm ar <code>Dog</code> ionas go bpriont√°lann an c√≥d <code>A baby dog is called a puppy</code>. N√≠ chabhra√≠onn an teicn√≠c chun ainm na tr√©ithe a shonr√∫ a
√∫s√°ideamar i Liost√°il 20-19 anseo; m√° athra√≠mid <code>main</code> go dt√≠ an c√≥d i
Liost√°il 20-21, gheobhaimid earr√°id tiomsaithe.</p>
<Listing number="20-21" file-name="src/main.rs" caption="Attempting to call the `baby_name` function from the `Animal` trait, but Rust doesn‚Äôt know which implementation to use">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">trait Animal {
</span><span class="boring">    fn baby_name() -&gt; String;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Dog;
</span><span class="boring">
</span><span class="boring">impl Dog {
</span><span class="boring">    fn baby_name() -&gt; String {
</span><span class="boring">        String::from("Spot")
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Animal for Dog {
</span><span class="boring">    fn baby_name() -&gt; String {
</span><span class="boring">        String::from("puppy")
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    println!("A baby dog is called a {}", Animal::baby_name());
}</code></pre>
</Listing>
<p>√ìs rud √© nach bhfuil paraim√©adar <code>self</code> ag <code>Animal::baby_name</code>, agus go bhf√©adfadh cine√°lacha eile a bheith ann a chuireann an tr√©ith <code>Animal</code> i bhfeidhm, n√≠ f√©idir le Rust a dh√©anamh amach c√©n
cur i bhfeidhm de <code>Animal::baby_name</code> at√° uainn. Gheobhaimid an earr√°id tiomsaitheora seo:</p>
<Listing number="20-22" file-name="src/main.rs" caption="Using fully qualified syntax to specify that we want to call the `baby_name` function from the `Animal` trait as implemented on `Dog`">
<pre><pre class="playground"><code class="language-rust"><span class="boring">trait Animal {
</span><span class="boring">    fn baby_name() -&gt; String;
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Dog;
</span><span class="boring">
</span><span class="boring">impl Dog {
</span><span class="boring">    fn baby_name() -&gt; String {
</span><span class="boring">        String::from("Spot")
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl Animal for Dog {
</span><span class="boring">    fn baby_name() -&gt; String {
</span><span class="boring">        String::from("puppy")
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>fn main() {
    println!("A baby dog is called a {}", &lt;Dog as Animal&gt;::baby_name());
}</code></pre></pre>
</Listing>
<p>T√°imid ag sol√°thar n√≥ta cine√°il do Rust laistigh de na l√∫ib√≠n√≠ uillinne, rud a l√©ir√≠onn gur mian linn glaoch ar an modh <code>baby_name</code> √≥n tr√©ith <code>Animal</code> mar at√° curtha i bhfeidhm ar <code>Dog</code> tr√≠na r√° gur mian linn an cine√°l <code>Dog</code> a ch√≥ire√°il mar <code>Animal</code> don ghlao feidhme seo. Priont√°lfaidh an c√≥d seo anois an rud at√° uainn:</p>
<pre><code class="language-console">$ cargo run
   Compiling traits-example v0.1.0 (file:///projects/traits-example)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.48s
     Running `target/debug/traits-example`
A baby dog is called a puppy
</code></pre>
<p>Go ginear√°lta, sainmh√≠n√≠tear comhr√©ir l√°nch√°ilithe mar seo a leanas:</p>
<pre><code class="language-rust ignore">&lt;Type as Trait&gt;::function(receiver_if_method, next_arg, ...);</code></pre>
<p>I gc√°s feidhmeanna gaolmhara nach modhanna iad, n√≠ bheadh ‚Äã‚Äã‚Äã‚Äã<code>glacad√≥ir</code> ann:
n√≠ bheadh ‚Äã‚Äã‚Äã‚Äãann ach liosta d'arg√≥int√≠ eile. D'fh√©adf√° comhr√©ir l√°nch√°ilithe a √∫s√°id i ngach √°it a nglaonn t√∫ ar fheidhmeanna n√≥ ar mhodhanna. Mar sin f√©in, ceada√≠tear duit
aon chuid den chomhr√©ir seo a fh√°g√°il ar l√°r is f√©idir le Rust a dh√©anamh amach √≥ fhaisn√©is eile
sa chl√°r. N√≠ g√° duit an comhr√©ir n√≠os foclach seo a √∫s√°id ach amh√°in i gc√°sanna ina
bhfuil il-chur i bhfeidhm ann a √∫s√°ideann an t-ainm c√©anna agus go dteasta√≠onn cabhair √≥ Rust
chun a aithint c√©n cur i bhfeidhm ar mhaith leat glaoch air.</p>
<h3 id="√ös√°id-a-bhaint-as-supertr√©ithe-chun-feidhmi√∫lacht-tr√©ithe-amh√°in-a-√âileamh-laistigh-de-thr√©ith-eile"><a class="header" href="#√ös√°id-a-bhaint-as-supertr√©ithe-chun-feidhmi√∫lacht-tr√©ithe-amh√°in-a-√âileamh-laistigh-de-thr√©ith-eile">√ös√°id a bhaint as Supertr√©ithe chun Feidhmi√∫lacht Tr√©ithe amh√°in a √âileamh laistigh de Thr√©ith Eile</a></h3>
<p>Uaireanta, d'fh√©adf√° sainmh√≠ni√∫ tr√©ithe a scr√≠obh a bhraitheann ar thr√©ith eile:
chun go gcuirfidh cine√°l an ch√©ad tr√©ith i bhfeidhm, ba mhaith leat a cheangal ar an gcine√°l sin
an dara tr√©ith a chur i bhfeidhm freisin. Dh√©anf√° √© seo ionas gur f√©idir le do shainmh√≠ni√∫ tr√©ithe
√∫s√°id a bhaint as m√≠reanna gaolmhara an dara tr√©ith. Tugtar <em>supertr√©ith</em> de do thr√©ith ar an tr√©ith a bhfuil do shainmh√≠ni√∫ tr√©ithe ag brath uirthi.</p>
<p>Mar shampla, abair gur mian linn tr√©ith <code>OutlinePrint</code> a chruth√∫ le modh <code>outline_print</code> a phriont√°lfaidh luach ar leith at√° form√°idithe sa chaoi is go bhfuil s√©
fr√°maithe i r√©alta√≠. Is √© sin le r√°, i gc√°s strucht√∫r <code>Point</code> a chuireann an
tr√©ith chaighde√°nach leabharlainne <code>Display</code> i bhfeidhm chun <code>(x, y)</code> a thabhairt, nuair a ghlaonn muid <code>outline_print</code> ar shampla <code>Point</code> a bhfuil <code>1</code> aige do <code>x</code> agus <code>3</code> do <code>y</code>, ba ch√≥ir d√≥
an m√©id seo a leanas a phriont√°il:</p>
<pre><code class="language-text">**********
*        *
* (1, 3) *
*        *
**********
</code></pre>
<p>Agus an modh <code>outline_print</code> √° chur i bhfeidhm, ba mhaith linn feidhmi√∫lacht an tr√©ithe <code>Display</code> a √∫s√°id. D√° bhr√≠ sin, n√≠ m√≥r d√∫inn a shonr√∫ nach n-oibreoidh an tr√©ith <code>OutlinePrint</code> ach amh√°in do chine√°lacha a chuireann <code>Display</code> i bhfeidhm freisin agus a shol√°thra√≠onn an fheidhmi√∫lacht a theasta√≠onn √≥ <code>OutlinePrint</code>. Is f√©idir linn √© sin a dh√©anamh sa
sainmh√≠ni√∫ tr√©ithe tr√≠ <code>OutlinePrint: Display</code> a shonr√∫. T√° an teicn√≠c seo
cos√∫il le tr√©ith at√° ceangailte leis an tr√©ith a chur leis. Taispe√°nann liost√∫ 20-23
cur i bhfeidhm an tr√©ithe <code>OutlinePrint</code>.</p>
<Listing number="20-23" file-name="src/main.rs" caption="Implementing the `OutlinePrint` trait that requires the functionality from `Display`">
<pre><pre class="playground"><code class="language-rust">use std::fmt;

trait OutlinePrint: fmt::Display {
    fn outline_print(&amp;self) {
        let output = self.to_string();
        let len = output.len();
        println!("{}", "*".repeat(len + 4));
        println!("*{}*", " ".repeat(len + 2));
        println!("* {output} *");
        println!("*{}*", " ".repeat(len + 2));
        println!("{}", "*".repeat(len + 4));
    }
}
<span class="boring">
</span><span class="boring">fn main() {}</span></code></pre></pre>
</Listing>
<p>√ìs rud √© gur shonraigh muid go n-√©il√≠onn <code>OutlinePrint</code> an tr√©ith <code>Display</code>, is f√©idir linn an fheidhm <code>to_string</code> a √∫s√°id a chuirtear i bhfeidhm go huathoibr√≠och d'aon chine√°l
a chuireann <code>Display</code> i bhfeidhm. D√° nd√©anfaimis iarracht <code>to_string</code> a √∫s√°id gan
colon a chur leis agus an tr√©ith <code>Display</code> a shonr√∫ i ndiaidh ainm na tr√©ithe, gheobhaimis
earr√°id ag r√° nach bhfuarthas aon mhodh darb ainm <code>to_string</code> don chine√°l <code>&amp;Self</code> sa
raon feidhme reatha.</p>
<p>Feicfimid cad a tharla√≠onn nuair a dh√©anaimid iarracht <code>OutlinePrint</code> a chur i bhfeidhm ar chine√°l
nach gcuireann <code>Display</code> i bhfeidhm, amhail an strucht√∫r <code>Point</code>:</p>
<Listing file-name="src/main.rs">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">use std::fmt;
</span><span class="boring">
</span><span class="boring">trait OutlinePrint: fmt::Display {
</span><span class="boring">    fn outline_print(&amp;self) {
</span><span class="boring">        let output = self.to_string();
</span><span class="boring">        let len = output.len();
</span><span class="boring">        println!("{}", "*".repeat(len + 4));
</span><span class="boring">        println!("*{}*", " ".repeat(len + 2));
</span><span class="boring">        println!("* {output} *");
</span><span class="boring">        println!("*{}*", " ".repeat(len + 2));
</span><span class="boring">        println!("{}", "*".repeat(len + 4));
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span>struct Point {
    x: i32,
    y: i32,
}

impl OutlinePrint for Point {}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let p = Point { x: 1, y: 3 };
</span><span class="boring">    p.outline_print();
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Faighimid earr√°id ag r√° go bhfuil <code>Display</code> riachtanach ach nach bhfuil s√© curtha i bhfeidhm:</p>
<pre><code class="language-console">$ cargo run
   Compiling traits-example v0.1.0 (file:///projects/traits-example)
error[E0277]: `Point` doesn't implement `std::fmt::Display`
  --&gt; src/main.rs:20:23
   |
20 | impl OutlinePrint for Point {}
   |                       ^^^^^ `Point` cannot be formatted with the default formatter
   |
   = help: the trait `std::fmt::Display` is not implemented for `Point`
   = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
note: required by a bound in `OutlinePrint`
  --&gt; src/main.rs:3:21
   |
3  | trait OutlinePrint: fmt::Display {
   |                     ^^^^^^^^^^^^ required by this bound in `OutlinePrint`

error[E0277]: `Point` doesn't implement `std::fmt::Display`
  --&gt; src/main.rs:24:7
   |
24 |     p.outline_print();
   |       ^^^^^^^^^^^^^ `Point` cannot be formatted with the default formatter
   |
   = help: the trait `std::fmt::Display` is not implemented for `Point`
   = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
note: required by a bound in `OutlinePrint::outline_print`
  --&gt; src/main.rs:3:21
   |
3  | trait OutlinePrint: fmt::Display {
   |                     ^^^^^^^^^^^^ required by this bound in `OutlinePrint::outline_print`
4  |     fn outline_print(&amp;self) {
   |        ------------- required by a bound in this associated function

For more information about this error, try `rustc --explain E0277`.
error: could not compile `traits-example` (bin "traits-example") due to 2 previous errors
</code></pre>
<p>Chun seo a shocr√∫, cuirimid <code>Display</code> i bhfeidhm ar <code>Point</code> agus s√°sa√≠mid an srian a √©il√≠onn <code>OutlinePrint</code>, mar seo:
<Listing file-name="src/main.rs"></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">trait OutlinePrint: fmt::Display {
</span><span class="boring">    fn outline_print(&amp;self) {
</span><span class="boring">        let output = self.to_string();
</span><span class="boring">        let len = output.len();
</span><span class="boring">        println!("{}", "*".repeat(len + 4));
</span><span class="boring">        println!("*{}*", " ".repeat(len + 2));
</span><span class="boring">        println!("* {output} *");
</span><span class="boring">        println!("*{}*", " ".repeat(len + 2));
</span><span class="boring">        println!("{}", "*".repeat(len + 4));
</span><span class="boring">    }
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">struct Point {
</span><span class="boring">    x: i32,
</span><span class="boring">    y: i32,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">impl OutlinePrint for Point {}
</span><span class="boring">
</span>use std::fmt;

impl fmt::Display for Point {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result {
        write!(f, "({}, {})", self.x, self.y)
    }
}
<span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    let p = Point { x: 1, y: 3 };
</span><span class="boring">    p.outline_print();
</span><span class="boring">}</span></code></pre></pre>
</Listing>
<p>Ansin, m√° chuirtear an tr√©ith <code>OutlinePrint</code> i bhfeidhm ar <code>Point</code>, d√©anfar tioms√∫ go rath√∫il, agus is f√©idir linn glaoch ar <code>outline_print</code> ar shampla <code>Point</code> chun √© a thaispe√°int
laistigh d'iml√≠ne r√©alta√≠.</p>
<h3 id="ag-√ös√°id-an-phatr√∫in-newtype-chun-tr√©ithe-seachtracha-a-chur-i-bhfeidhm-ar-chine√°lacha-seachtracha"><a class="header" href="#ag-√ös√°id-an-phatr√∫in-newtype-chun-tr√©ithe-seachtracha-a-chur-i-bhfeidhm-ar-chine√°lacha-seachtracha">Ag √ös√°id an Phatr√∫in Newtype chun Tr√©ithe Seachtracha a Chur i bhFeidhm ar Chine√°lacha Seachtracha</a></h3>
<p>I gCaibidil 10 sa chuid <a href="ch10-02-traits.html#implementing-a-trait-on-a-type">‚ÄúImplementing a Trait on a
Cine√°l‚Äù</a><!-- ignore -->, luaigh muid an
riail d√≠lleachta a deir nach gceada√≠tear d√∫inn tr√©ith a chur i bhfeidhm ar chine√°l ach amh√°in m√° t√° an tr√©ith n√≥ an cine√°l √°iti√∫il d√°r gcliathbhosca. Is f√©idir an
srian seo a sheachaint tr√≠ √∫s√°id a bhaint as an pattern <em>newtype</em>, rud a bhaineann le cine√°l nua a chruth√∫ i strucht√∫r tuple. (Phl√©amar strucht√∫ir tupla sa chuid <a href="ch05-01-defining-structs.html#using-tuple-structs-without-named-fields-to-create-different-types">‚Äú√ös√°id Strucht√∫ir Tupla gan R√©ims√≠ Ag √ös√°id le R√©ims√≠ Ag Cruth√∫ Cine√°lacha Difri√∫la‚Äù</a><!-- ignore --> de Chaibidil 5.) Beidh r√©imse amh√°in ag an strucht√∫r tupla agus beidh s√© ina fhillte√°n tana√≠ timpeall an chine√°il ar mhaith linn tr√©ith a chur i bhfeidhm d√≥. Ansin, beidh an cine√°l fillte√°in √°iti√∫il d√°r gcliathbhosca, agus is f√©idir linn an tr√©ith a chur i bhfeidhm ar an bhfillte√°n.</p>
<p>Is t√©arma √© <em>Newtype</em> a thagann √≥n teanga r√≠omhchl√°r√∫ch√°in Haskell.
N√≠l aon phion√≥s feidhm√≠ochta rith-ama ann as an patr√∫n seo a √∫s√°id, agus baintear an
cine√°l fillte√°in as ag am tiomsaithe.</p>
<p>Mar shampla, abair gur mhaith linn <code>Display</code> a chur i bhfeidhm ar <code>Vec&lt;T&gt;</code>, rud a choisceann an riail d√≠lleachta orainn a dh√©anamh go d√≠reach toisc go bhfuil an tr√©ith <code>Display</code> agus an cine√°l <code>Vec&lt;T&gt;</code> sainmh√≠nithe lasmuigh d√°r gcliathbhosca. Is f√©idir linn strucht√∫r <code>Wrapper</code> a dh√©anamh a bhfuil sampla de <code>Vec&lt;T&gt;</code> ann; ansin is f√©idir linn <code>Display</code> a chur i bhfeidhm ar <code>Wrapper</code> agus an luach <code>Vec&lt;T&gt;</code> a √∫s√°id, mar a thaispe√°ntar i Liosta 20-24.</p>
<Listing number="20-24" file-name="src/main.rs" caption="Creating a `Wrapper` type around `Vec<String>` to implement `Display`">
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Wrapper(Vec&lt;String&gt;);

impl fmt::Display for Wrapper {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result {
        write!(f, "[{}]", self.0.join(", "))
    }
}

fn main() {
    let w = Wrapper(vec![String::from("hello"), String::from("world")]);
    println!("w = {w}");
}</code></pre></pre>
</Listing>
<p>√ös√°ideann cur i bhfeidhm <code>Display</code> <code>self.0</code> chun rochtain a fh√°il ar an <code>Vec&lt;T&gt;</code> istigh,
toisc gur strucht√∫r tupla √© <code>Wrapper</code> agus gurb √© <code>Vec&lt;T&gt;</code> an ‚Äã‚Äãmh√≠r ag inn√©acs 0 sa
tupla. Ansin is f√©idir linn feidhmi√∫lacht an tr√©ithe <code>Display</code> a √∫s√°id ar <code>Wrapper</code>.</p>
<p>Is √© an m√≠bhunt√°iste a bhaineann leis an teicn√≠c seo a √∫s√°id n√° gur cine√°l nua √© <code>Wrapper</code>, mar sin n√≠l na modhanna den luach at√° aige aige. Bheadh ‚Äã‚Äãorainn gach modh de <code>Vec&lt;T&gt;</code> a chur i bhfeidhm go d√≠reach ar <code>Wrapper</code> sa chaoi is go dtarmligfidh na modhanna chuig <code>self.0</code>, rud a ligfeadh d√∫inn <code>Wrapper</code> a ch√≥ire√°il d√≠reach mar
<code>Vec&lt;T&gt;</code>. D√° mba mhian linn go mbeadh gach modh at√° ag an gcine√°l istigh ag an gcine√°l nua,
bheadh ‚Äã‚Äãan tr√©ith <code>Deref</code> (a phl√©itear i gCaibidil 15 sa rann√°n <a href="ch15-02-deref.html#treating-smart-pointers-like-regular-references-with-the-deref-trait">‚ÄúTreating Smart
Pointers Like Regular References with the <code>Deref</code>
Trait‚Äù</a><!-- ignore -->) ar an <code>Wrapper</code> chun an cine√°l istigh a thabhairt ar ais ina r√©iteach. Mura mian linn go mbeadh gach modh den chine√°l istigh ag an gcine√°l <code>Wrapper</code>‚Äîmar shampla, chun iompar an chine√°il <code>Wrapper</code> a shrianadh‚Äîbheadh ‚Äã‚Äãorainn na modhanna amh√°in at√° uainn a chur i bhfeidhm de l√°imh.</p>
<p>T√° an patr√∫n cine√°l nua seo √∫s√°ideach fi√∫ nuair nach bhfuil tr√©ithe i gceist. D√©anaimis an f√≥cas a athr√∫ agus breathn√∫ ar roinnt beala√≠ chun cinn chun idirghn√≠omh√∫ le c√≥ras cine√°il Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="cine√°lacha-ardleibh√©il"><a class="header" href="#cine√°lacha-ardleibh√©il">Cine√°lacha Ardleibh√©il</a></h2>
<p>T√° roinnt gn√©ithe ag c√≥ras cine√°il Rust at√° luaite againn go dt√≠ seo ach n√°r phl√©amar f√≥s. Tosa√≠mid tr√≠ phl√© a dh√©anamh ar newtypes i gcoitinne agus muid ag scr√∫d√∫ c√©n f√°th
a bhfuil newtypes √∫s√°ideach mar chine√°lacha. Ansin bogfaimid ar aghaidh chuig leasainmneacha cine√°il, gn√©
at√° cos√∫il le newtypes ach le s√©imeantaic beag√°n difri√∫il. Pl√©ifimid freisin
an cine√°l <code>!</code> agus cine√°lacha m√©ide dinimici√∫la.</p>
<h3 id="ag-√ös√°id-an-phatr√∫in-newtype-le-haghaidh-s√°bh√°ilteachta-agus-astarraingt-cine√°il"><a class="header" href="#ag-√ös√°id-an-phatr√∫in-newtype-le-haghaidh-s√°bh√°ilteachta-agus-astarraingt-cine√°il">Ag √ös√°id an Phatr√∫in Newtype le haghaidh S√°bh√°ilteachta agus Astarraingt Cine√°il</a></h3>
<blockquote>
<p>N√≥ta: Glacann an chuid seo leis gur l√©igh t√∫ an chuid roimhe seo <a href="ch20-02-advanced-traits.html#using-the-newtype-pattern-to-implement-external-traits-on-external-types">‚ÄúAg √ös√°id an
Phatr√∫in Newtype chun Tr√©ithe Seachtracha a Chur i bhFeidhm ar Chine√°lacha
Seachtracha.‚Äù</a><!-- neamhaird --></p>
</blockquote>
<p>T√° an patr√∫n newtype √∫s√°ideach freisin le haghaidh tascanna thar na cinn at√° pl√©ite againn go dt√≠ seo, lena n-√°ir√≠tear a fhorfheidhmi√∫ go statach nach mb√≠onn luachanna mearbhall riamh agus
aonaid luacha a l√©iri√∫. Chonaic t√∫ sampla d'√∫s√°id cine√°lacha nua chun
aonaid a l√©iri√∫ i Liosta 20-16: cuimhnigh gur fhill na strucht√∫ir <code>Millimeters</code> agus <code>Meters</code> luachanna <code>u32</code> i gcine√°l nua. D√° scr√≠obhfaimis feidhm le
paraim√©adar de chine√°l <code>Millimeters</code>, n√≠ fh√©adfaimis cl√°r a thioms√∫ a
dh√©anadh iarracht tr√≠ thimpiste an fheidhm sin a ghlaoch le luach de chine√°l <code>Meters</code> n√≥
<code>u32</code> simpl√≠.</p>
<p>Is f√©idir linn an patr√∫n cine√°l nua a √∫s√°id freisin chun roinnt sonra√≠ cur i bhfeidhm de chine√°l a bhaint amach: is f√©idir leis an gcine√°l nua API poibl√≠ a nochtadh at√° difri√∫il √≥
API an chine√°il inmhe√°naigh phr√≠obh√°idigh.</p>
<p>Is f√©idir le cine√°lacha nua cur i bhfeidhm inmhe√°nach a cheilt freisin. Mar shampla, d'fh√©adfaimis cine√°l
<code>People</code> a shol√°thar chun <code>HashMap&lt;i32, String&gt;</code> a fhilleadh a st√≥r√°lann aitheantas duine
a bhaineann lena ainm. N√≠ idirghn√≠omh√≥dh c√≥d a √∫s√°ideann <code>People</code> ach leis an
API poibl√≠ a shol√°thra√≠mid, amhail modh chun teaghr√°n ainm a chur leis an mbaili√∫ch√°n <code>People</code>; N√≠ bheadh ‚Äã‚Äãar an gc√≥d sin a fhios a bheith aige go sannta√≠mid ID <code>i32</code> d'ainmneacha
go hinmhe√°nach. Is bealach √©adrom √© an patr√∫n newtype chun ionchapsl√∫ a bhaint amach
chun sonra√≠ cur i bhfeidhm a cheilt, rud a phl√©amar sa chuid <a href="ch18-01-what-is-oo.html#encapsulation-that-hides-implementation-details">‚ÄúEncapsulation that
Hides Implementation
Details‚Äù</a><!-- ignore -->
de Chaibidil 18.</p>
<h3 id="comhchiallaigh-chine√°il-a-chruth√∫-le-hailiasanna-chine√°il"><a class="header" href="#comhchiallaigh-chine√°il-a-chruth√∫-le-hailiasanna-chine√°il">Comhchiallaigh Chine√°il a Chruth√∫ le hAiliasanna Chine√°il</a></h3>
<p>Sol√°thra√≠onn Rust an cumas chun <em>alias</em> cine√°l a dhearbh√∫ chun ainm eile a thabhairt do chine√°l at√° ann cheana
. Chuige seo √∫s√°idimid an eochairfhocal <code>type</code>. Mar shampla, is f√©idir linn
an t-ailias <code>Kilometers</code> a chruth√∫ go <code>i32</code> mar seo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    type Kilometers = i32;
<span class="boring">
</span><span class="boring">    let x: i32 = 5;
</span><span class="boring">    let y: Kilometers = 5;
</span><span class="boring">
</span><span class="boring">    println!("x + y = {}", x + y);
</span><span class="boring">}</span></code></pre></pre>
<p>Anois, is <em>comhchiallach</em> √© an leasainm <code>Kilometers</code> le haghaidh <code>i32</code>; murab ionann agus na cine√°lacha <code>Millimeters</code> agus <code>Meters</code> a chrutha√≠omar i Liosta 20-16, n√≠ cine√°l nua ar leithligh √© <code>Kilometers</code>. D√©ile√°lfar le luachanna den chine√°l <code>Kilometers</code> ar an mbealach c√©anna le luachanna den chine√°l <code>i32</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    type Kilometers = i32;

    let x: i32 = 5;
    let y: Kilometers = 5;

    println!("x + y = {}", x + y);
<span class="boring">}</span></code></pre></pre>
<p>√ìs rud √© gur den chine√°l c√©anna iad <code>Kilometers</code> agus <code>i32</code>, is f√©idir linn luachanna den d√° chine√°l a chur leis agus is f√©idir linn luachanna <code>Kilometers</code> a chur ar aghaidh chuig feidhmeanna a ghlacann paraim√©adair <code>i32</code>. Mar sin f√©in, ag baint √∫s√°ide as an modh seo, n√≠ fhaighimid na bunt√°ist√≠ seice√°la cine√°il a fhaighimid √≥n patr√∫n nuachine√°il a pl√©adh n√≠os luaithe. I bhfocail eile, m√° mheascann muid luachanna <code>Kilometers</code> agus <code>i32</code> √°it √©igin, n√≠ thabharfaidh an tiomsaitheoir earr√°id d√∫inn.</p>
<p>Is √© an pr√≠omhch√°s √∫s√°ide le haghaidh comhchiallaigh cine√°il n√° athr√° a laghd√∫. Mar shampla, d'fh√©adfadh cine√°l fada a bheith againn mar seo:</p>
<pre><code class="language-rust ignore">Box&lt;dyn Fn() + Send + 'static&gt;</code></pre>
<p>Is f√©idir go mbeadh s√© tuirsi√∫il agus seans maith go dtarl√≥idh earr√°id√≠ an cine√°l fada seo a scr√≠obh i s√≠nithe feidhme agus mar an√≥t√°lacha cine√°il ar fud an ch√≥id. Samhlaigh tionscadal l√°n de ch√≥d mar at√° i Liosta 20-25.</p>
<Listing number="20-25" caption="Using a long type in many places">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    let f: Box&lt;dyn Fn() + Send + 'static&gt; = Box::new(|| println!("hi"));

    fn takes_long_type(f: Box&lt;dyn Fn() + Send + 'static&gt;) {
        // --snip--
    }

    fn returns_long_type() -&gt; Box&lt;dyn Fn() + Send + 'static&gt; {
        // --snip--
<span class="boring">        Box::new(|| ())
</span>    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>D√©anann leasainm cine√°il an c√≥d seo n√≠os inbhainistithe tr√≠d an athr√° a laghd√∫. I Liost√°lacha 20-26, thugamar isteach leasainm darb ainm <code>Thunk</code> don chine√°l focal agus is f√©idir leis gach √∫s√°id den chine√°l a athshol√°thar leis an leasainm n√≠os giorra <code>Thunk</code>.</p>
<Listing number="20-26" caption="Introducing a type alias `Thunk` to reduce repetition">
<pre><pre class="playground"><code class="language-rust"><span class="boring">fn main() {
</span>    type Thunk = Box&lt;dyn Fn() + Send + 'static&gt;;

    let f: Thunk = Box::new(|| println!("hi"));

    fn takes_long_type(f: Thunk) {
        // --snip--
    }

    fn returns_long_type() -&gt; Thunk {
        // --snip--
<span class="boring">        Box::new(|| ())
</span>    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>T√° an c√≥d seo i bhfad n√≠os √©asca le l√©amh agus le scr√≠obh! Is f√©idir le hainm br√≠och a roghn√∫ do
bhr√©ag√°n cine√°il cabhr√∫ le do r√∫n a chur in i√∫l freisin (is focal √© <em>thunk</em> do ch√≥d
at√° le meast√≥ireacht ag tr√°th n√≠os d√©ana√≠, mar sin is ainm oiri√∫nach √© do dh√∫nadh a
st√≥r√°iltear).</p>
<p>√ös√°idtear br√©ag√°in cine√°il go coitianta leis an gcine√°l <code>Result&lt;T, E&gt;</code> chun athr√° a laghd√∫. Smaoinigh ar an mod√∫l <code>std::io</code> sa leabharlann chaighde√°nach. Is minic a thugann oibr√≠ochta√≠ ionchuir/aschur <code>Result&lt;T, E&gt;</code> ar ais chun d√©ile√°il le c√°sanna nuair a
theipeann ar oibr√≠ochta√≠ oibri√∫. T√° strucht√∫r <code>std::io::Error</code> ag an leabharlann seo a l√©ir√≠onn gach
earr√°id ionchuir/aschur f√©ideartha. Beidh go leor de na feidhmeanna i <code>std::io</code> ag filleadh
<code>Result&lt;T, E&gt;</code> √°it a bhfuil an <code>E</code> ina <code>std::io::Error</code>, amhail na feidhmeanna seo sa
tr√©ith <code>Write</code>:</p>
<pre><code class="language-rust noplayground">use std::fmt;
use std::io::Error;

pub trait Write {
    fn write(&amp;mut self, buf: &amp;[u8]) -&gt; Result&lt;usize, Error&gt;;
    fn flush(&amp;mut self) -&gt; Result&lt;(), Error&gt;;

    fn write_all(&amp;mut self, buf: &amp;[u8]) -&gt; Result&lt;(), Error&gt;;
    fn write_fmt(&amp;mut self, fmt: fmt::Arguments) -&gt; Result&lt;(), Error&gt;;
}</code></pre>
<p>D√©antar an <code>Result&lt;..., Error&gt;</code> a athdh√©anamh go minic. D√° bhr√≠ sin, t√° an cine√°l dearbhaithe ailias seo ag <code>std::io</code>:</p>
<pre><code class="language-rust noplayground"><span class="boring">use std::fmt;
</span><span class="boring">
</span>type Result&lt;T&gt; = std::result::Result&lt;T, std::io::Error&gt;;
<span class="boring">
</span><span class="boring">pub trait Write {
</span><span class="boring">    fn write(&amp;mut self, buf: &amp;[u8]) -&gt; Result&lt;usize&gt;;
</span><span class="boring">    fn flush(&amp;mut self) -&gt; Result&lt;()&gt;;
</span><span class="boring">
</span><span class="boring">    fn write_all(&amp;mut self, buf: &amp;[u8]) -&gt; Result&lt;()&gt;;
</span><span class="boring">    fn write_fmt(&amp;mut self, fmt: fmt::Arguments) -&gt; Result&lt;()&gt;;
</span><span class="boring">}</span></code></pre>
<p>√ìs rud √© go bhfuil an dearbh√∫ seo sa mhod√∫l <code>std::io</code>, is f√©idir linn an leasainm l√°nch√°ilithe <code>std::io::Result&lt;T&gt;</code> a √∫s√°id; is √© sin, <code>Result&lt;T, E&gt;</code> leis an <code>E</code> l√≠onta isteach mar <code>std::io::Error</code>. Seo mar a chr√≠ochna√≠onn s√≠nithe na feidhme tr√©ithe <code>Write</code>:</p>
<pre><code class="language-rust noplayground"><span class="boring">use std::fmt;
</span><span class="boring">
</span><span class="boring">type Result&lt;T&gt; = std::result::Result&lt;T, std::io::Error&gt;;
</span><span class="boring">
</span>pub trait Write {
    fn write(&amp;mut self, buf: &amp;[u8]) -&gt; Result&lt;usize&gt;;
    fn flush(&amp;mut self) -&gt; Result&lt;()&gt;;

    fn write_all(&amp;mut self, buf: &amp;[u8]) -&gt; Result&lt;()&gt;;
    fn write_fmt(&amp;mut self, fmt: fmt::Arguments) -&gt; Result&lt;()&gt;;
}
</code></pre>
<p>Cuid√≠onn an cine√°l leasainm ar dh√° bhealach: d√©anann s√© n√≠os √©asca c√≥d a scr√≠obh <em>agus</em> tugann s√©
comh√©adan comhsheasmhach d√∫inn ar fud <code>std::io</code> ar fad. Toisc gur leasainm √©, n√≠l ann
ach <code>Result&lt;T, E&gt;</code> eile, rud a chialla√≠onn gur f√©idir linn aon mhodhanna a oibr√≠onn ar
<code>Result&lt;T, E&gt;</code> a √∫s√°id leis, chomh maith le comhr√©ir speisialta cos√∫il leis an oibreoir <code>?</code>.</p>
<h3 id="an-cine√°l-n√°r-fhill-n√°r-fhill-n√°r-fhill"><a class="header" href="#an-cine√°l-n√°r-fhill-n√°r-fhill-n√°r-fhill">An Cine√°l N√°r Fhill N√°r Fhill N√°r Fhill</a></h3>
<p>T√° cine√°l speisialta ag Rust darb ainm <code>!</code> ar a dtugtar i dteanga teoiric an chine√°il mar an
<em>cine√°l folamh</em> toisc nach bhfuil aon luachanna aige. Is fearr linn an cine√°l <em>n√°imh</em> a thabhairt air
toisc go seasann s√© in √°it an chine√°il fillte nuair nach bhfillfidh feidhm
n√°r fhill. Seo sampla:</p>
<pre><code class="language-rust noplayground">fn bar() -&gt; ! {
    // --snip--
<span class="boring">    panic!();
</span>}</code></pre>
<p>L√©itear an c√≥d seo mar ‚Äún√≠ thugann an fheidhm <code>bar</code> riamh ar ais.‚Äù Tugtar <em>feidhmeanna divergacha</em> ar fheidhmeanna a thugann
riamh ar ais. N√≠ f√©idir linn luachanna den chine√°l <code>!</code> a chruth√∫
mar sin n√≠ f√©idir le <code>bar</code> riamh ar ais.</p>
<p>Ach c√©n √∫s√°id at√° i gcine√°l nach f√©idir leat luachanna a chruth√∫ d√≥ riamh? Cuimhnigh ar an gc√≥d √≥
Liost√∫ 2-5, cuid den chluiche tomhaise uimhreacha; t√° cuid de at√°irgthe againn
anseo i Liost√∫ 20-27.</p>
<Listing number="20-27" caption="A `match` with an arm that ends in `continue`">
<pre><code class="language-rust ignore"><span class="boring">use rand::Rng;
</span><span class="boring">use std::cmp::Ordering;
</span><span class="boring">use std::io;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    println!("Guess the number!");
</span><span class="boring">
</span><span class="boring">    let secret_number = rand::thread_rng().gen_range(1..=100);
</span><span class="boring">
</span><span class="boring">    println!("The secret number is: {secret_number}");
</span><span class="boring">
</span><span class="boring">    loop {
</span><span class="boring">        println!("Please input your guess.");
</span><span class="boring">
</span><span class="boring">        let mut guess = String::new();
</span><span class="boring">
</span><span class="boring">        // --snip--
</span><span class="boring">
</span><span class="boring">        io::stdin()
</span><span class="boring">            .read_line(&amp;mut guess)
</span><span class="boring">            .expect("Failed to read line");
</span><span class="boring">
</span>        let guess: u32 = match guess.trim().parse() {
            Ok(num) =&gt; num,
            Err(_) =&gt; continue,
        };
<span class="boring">
</span><span class="boring">        println!("You guessed: {guess}");
</span><span class="boring">
</span><span class="boring">        // --snip--
</span><span class="boring">
</span><span class="boring">        match guess.cmp(&amp;secret_number) {
</span><span class="boring">            Ordering::Less =&gt; println!("Too small!"),
</span><span class="boring">            Ordering::Greater =&gt; println!("Too big!"),
</span><span class="boring">            Ordering::Equal =&gt; {
</span><span class="boring">                println!("You win!");
</span><span class="boring">                break;
</span><span class="boring">            }
</span><span class="boring">        }
</span><span class="boring">    }
</span><span class="boring">}</span></code></pre>
</Listing>
<p>Ag an am, scipe√°ileamar thar roinnt sonra√≠ sa ch√≥d seo. I gCaibidil 6 sa rann√≥g <a href="ch06-02-match.html#the-match-control-flow-operator">‚ÄúAn
<code>match</code> Control Flow Operator‚Äù</a><!-- ignore -->
phl√©amar go gcaithfidh gach arm <code>match</code> an cine√°l c√©anna a thabhairt ar ais. Mar sin, mar shampla, n√≠ oibr√≠onn an c√≥d seo a leanas:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span><span class="boring">    let guess = "3";
</span>    let guess = match guess.trim().parse() {
        Ok(_) =&gt; 5,
        Err(_) =&gt; "hello",
    };
<span class="boring">}</span></code></pre>
<p>Bheadh ‚Äã‚Äãar an gcine√°l <code>guess</code> sa ch√≥d seo a bheith ina shl√°nuimhir <em>agus</em> teaghr√°n,
agus √©il√≠onn Rust nach mbeadh ach cine√°l amh√°in ag <code>guess</code>. Mar sin, cad a thugann <code>continue</code>
ar ais? Conas a ceada√≠odh d√∫inn <code>u32</code> a thabhairt ar ais √≥ l√°mh amh√°in agus l√°mh eile a bheith againn
a chr√≠ochna√≠onn le <code>continue</code> i Liosta 20-27?</p>
<p>Mar a bheife√° ag s√∫il leis, t√° luach <code>!</code> ag <code>continue</code>. Is √© sin le r√°, nuair a r√≠omhann Rust
an cine√°l <code>guess</code>, f√©achann s√© ar an d√° l√°mh mheaitse√°la, an ch√©ad cheann le
luach <code>u32</code> agus an dara ceann le luach <code>!</code>. Toisc nach f√©idir le <code>!</code> luach a bheith aige
cho√≠che, socra√≠onn Rust gurb √© <code>u32</code> an cine√°l <code>guess</code>.</p>
<p>Is √© an bealach foirmi√∫il chun an t-iompar seo a chur s√≠os n√° gur f√©idir l√©irithe de chine√°l <code>!</code> a
bhr√∫ isteach in aon chine√°l eile. Ceada√≠tear d√∫inn an l√°mh <code>match</code> seo a chr√≠ochn√∫ le
<code>continue</code> toisc nach dtugann <code>continue</code> luach ar ais; ina ionad sin, bogann s√© an rial√∫ ar ais go barr an l√∫ibe, mar sin i gc√°s <code>Err</code>, n√≠ shanntar luach riamh do
<code>guess</code>.</p>
<p>T√° an cine√°l never √∫s√°ideach leis an macra <code>panic!</code> chomh maith. Cuimhnigh ar an bhfeidhm <code>unwrap</code>
a nglaoimid ar luachanna <code>Option&lt;T&gt;</code> chun luach n√≥ panic a th√°irgeadh leis an
sainmh√≠ni√∫ seo:</p>
<pre><code class="language-rust ignore"><span class="boring">enum Option&lt;T&gt; {
</span><span class="boring">    Some(T),
</span><span class="boring">    None,
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">use crate::Option::*;
</span><span class="boring">
</span>impl&lt;T&gt; Option&lt;T&gt; {
    pub fn unwrap(self) -&gt; T {
        match self {
            Some(val) =&gt; val,
            None =&gt; panic!("called `Option::unwrap()` on a `None` value"),
        }
    }
}</code></pre>
<p>Sa ch√≥d seo, tarla√≠onn an rud c√©anna agus at√° sa <code>match</code> i Liosta 20-27: Feiceann Rust go bhfuil an cine√°l <code>T</code> ag <code>val</code> agus go bhfuil an cine√°l <code>!</code> ag <code>panic!</code>, mar sin is √© <code>T</code> toradh an abairt <code>match</code> ioml√°in. Oibr√≠onn an c√≥d seo toisc nach dt√°irgeann <code>panic!</code> luach; cr√≠ochna√≠onn s√© an cl√°r. Sa ch√°s <code>None</code>, n√≠ bheimid
ag filleadh luach √≥ <code>unwrap</code>, mar sin t√° an c√≥d seo bail√≠.</p>
<p>Is l√©iri√∫ deiridh amh√°in √© <code>loop</code> a bhfuil an cine√°l <code>!</code> aige:</p>
<pre><code class="language-rust ignore"><span class="boring">fn main() {
</span>    print!("forever ");

    loop {
        print!("and ever ");
    }
<span class="boring">}</span></code></pre>
<p>Anseo, n√≠ chr√≠ochna√≠onn an l√∫b cho√≠che, mar sin is √© <code>!</code> luach an abairt. Mar sin f√©in, n√≠ bheadh ‚Äã‚Äãs√© seo f√≠or d√° gcuirfimis <code>break</code> san √°ireamh, mar go gcr√≠ochn√≥dh an l√∫b
nuair a shroichfeadh s√© an <code>break</code>.</p>
<h3 id="cine√°lacha-m√©ide-dinimici√∫la-agus-an-tr√©ith-m√©ide"><a class="header" href="#cine√°lacha-m√©ide-dinimici√∫la-agus-an-tr√©ith-m√©ide">Cine√°lacha M√©ide Dinimici√∫la agus an Tr√©ith <code>M√©ide</code></a></h3>
<p>Caithfidh Rust sonra√≠ √°irithe a bheith ar eolas aige faoina chine√°lacha, amhail c√© mh√©ad sp√°is at√° le
leithdh√°ileadh do luach de chine√°l √°irithe. F√°gann s√© seo c√∫inne amh√°in d√° ch√≥ras
cine√°lacha beag√°n mearbhall ar dt√∫s: coincheap na <em>cine√°lacha m√©ide dinimici√∫la</em>.
Uaireanta tugtar <em>DSTanna</em> n√≥ <em>cine√°lacha neamhmh√©ide</em> orthu, ligeann na cine√°lacha seo d√∫inn
c√≥d a scr√≠obh ag baint √∫s√°ide as luachanna nach f√©idir linn a m√©id a bheith ar eolas againn ach ag am rith.</p>
<p>D√©anaimis tochailt isteach i sonra√≠ cine√°l m√©ide dinimici√∫il ar a dtugtar <code>str</code>, a
bh√≠omar ag √∫s√°id ar fud an leabhair. Sin ceart, n√≠ <code>&amp;str</code>, ach <code>str</code> leis f√©in, is DST √©. N√≠ f√©idir linn a fh√°il amach c√© chomh fada is at√° an teaghr√°n go dt√≠ go mbeidh an t-am rite ann, rud a chialla√≠onn nach f√©idir linn athr√≥g de chine√°l <code>str</code> a chruth√∫, n√° n√≠ f√©idir linn arg√≥int de chine√°l <code>str</code> a ghlacadh. Smaoinigh ar an gc√≥d seo a leanas, nach n-oibr√≠onn:</p>
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span>    let s1: str = "Hello there!";
    let s2: str = "How's it going?";
<span class="boring">}</span></code></pre>
<p>Caithfidh Rust a fhios a bheith aige c√© mh√©ad cuimhne at√° le leithdh√°ileadh d'aon luach de chine√°l √°irithe, agus n√≠ m√≥r do gach luach de chine√°l an m√©id c√©anna cuimhne a √∫s√°id. D√° gcead√≥dh Rust d√∫inn an c√≥d seo a scr√≠obh, bheadh ‚Äã‚Äãar an d√° luach <code>str</code> seo an m√©id c√©anna sp√°is a th√≥g√°il. Ach t√° faid √©ags√∫la acu: teasta√≠onn 12 bheart st√≥r√°la √≥ <code>s1</code> agus teasta√≠onn 15 √≥ <code>s2</code>. Sin √© an f√°th nach f√©idir athr√≥g a chruth√∫ ina bhfuil cine√°l m√©ide dinimici√∫il.</p>
<p>Mar sin, cad a dh√©anaimid? Sa ch√°s seo, t√° an freagra ar eolas agat cheana f√©in: d√©anaimid na cine√°lacha <code>s1</code> agus <code>s2</code> ina <code>&amp;str</code> seachas ina <code>str</code>. Cuimhnigh √≥n rann√≥g <a href="ch04-03-slices.html#string-slices">‚ÄúString
Slices‚Äù</a><!-- ignore --> de Chaibidil 4 nach st√≥r√°lann strucht√∫r sonra√≠ an tslis ach an su√≠omh tosaigh agus fad an tslis. Mar sin
c√© gur luach aonair √© <code>&amp;T</code> a st√≥r√°lann seoladh cuimhne an √°it a bhfuil an
<code>T</code> suite, is <em>dh√°</em> luach √© <code>&amp;str</code>: seoladh an <code>str</code> agus a
fhad. D√° bhr√≠ sin, is f√©idir linn m√©id luacha <code>&amp;str</code> a fh√°il amach ag am tiomsaithe: t√° s√©
dh√° oiread fad <code>usize</code>. Is √© sin le r√°, b√≠onn a fhios againn i gc√≥na√≠ m√©id <code>&amp;str</code>, is cuma c√© chomh fada is at√° an teaghr√°n a dtagra√≠onn s√© d√≥. Go ginear√°lta, seo an chaoi
a n-√∫s√°idtear cine√°lacha dinimici√∫la i Rust: t√° p√≠osa breise
meiteashonra√≠ acu a st√≥r√°lann m√©id na faisn√©ise dinimici√∫la. Is √© an riail √≥rga maidir le
cine√°lacha dinimici√∫la n√° go gcaithfimid luachanna de chine√°lacha dinimici√∫la a chur i gc√≥na√≠ taobh thiar de phointeoir de chine√°l √©igin.</p>
<p>Is f√©idir linn <code>str</code> a chomhcheangal le gach cine√°l pointeora: mar shampla, <code>Box&lt;str&gt;</code> n√≥
<code>Rc&lt;str&gt;</code>. Go deimhin, chonaic t√∫ √© seo cheana ach le cine√°l dinimici√∫il difri√∫il: traits. Is cine√°l m√©ide dinimici√∫il √© gach tr√©ith ar f√©idir linn tagairt a dh√©anamh d√≥ tr√≠
ainm na tr√©ithe a √∫s√°id. I gCaibidil 18 sa chuid <a href="ch18-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types">‚Äú√ös√°id R√©ada Tr√©ithe a
Ligeann Luachanna de
Chine√°lacha
Difri√∫la‚Äù</a><!--
ignore -->, luaigh muid, chun tr√©ithe a √∫s√°id mar r√©ada tr√©ithe, go gcaithfimid
iad a chur taobh thiar de phointeoir, amhail <code>&amp;dyn Trait</code> n√≥ <code>Box&lt;dyn Trait&gt;</code> (oibreodh <code>Rc&lt;dyn Trait&gt;</code> freisin).</p>
<p>Chun oibri√∫ le DSTanna, sol√°thra√≠onn Rust an tr√©ith <code>Sized</code> chun a chinneadh an bhfuil m√©id cine√°il ar eolas ag am tiomsaithe n√≥ nach bhfuil. Cuirtear an tr√©ith seo i bhfeidhm go huathoibr√≠och
do gach rud a bhfuil a mh√©id ar eolas ag am tiomsaithe. Ina theannta sin, cuireann Rust
teorainn ar <code>Sized</code> go hintuigthe le gach feidhm ghinear√°lta. Is √© sin,
sainmh√≠ni√∫ feidhme ghinear√°lta mar seo:</p>
<pre><code class="language-rust ignore">fn generic&lt;T&gt;(t: T) {
    // --snip--
}</code></pre>
<p>d√©antar √© a l√°imhse√°il amhail is d√° mba rud √© gur scr√≠obhamar √© seo:</p>
<pre><code class="language-rust ignore">fn generic&lt;T: Sized&gt;(t: T) {
    // --snip--
}</code></pre>
<p>De r√©ir r√©amhshocraithe, n√≠ oibreoidh feidhmeanna cine√°lacha ach ar chine√°lacha a bhfuil m√©id ar eolas acu tr√°th an tiomsaithe. Mar sin f√©in, is f√©idir leat an comhr√©ir speisialta seo a leanas a √∫s√°id chun an srian seo a mhaol√∫:</p>
<pre><code class="language-rust ignore">fn generic&lt;T: ?Sized&gt;(t: &amp;T) {
    // --snip--
}</code></pre>
<p>Cialla√≠onn tr√©ith at√° ceangailte ar <code>?Sized</code> go bhf√©adfadh n√≥ nach bhf√©adfadh <code>T</code> a bheith <code>Sized</code> agus go s√°ra√≠onn an n√≥ta√≠ocht seo an r√©amhshocr√∫ go gcaithfidh m√©id aitheanta a bheith ag cine√°lacha cine√°lacha ag
am an tiomsaithe. N√≠l an comhr√©ir <code>?Trait</code> leis an gciall seo ar f√°il ach do
<code>Sized</code>, n√≠ d'aon tr√©ithe eile.</p>
<p>Tabhair faoi deara freisin gur athra√≠omar cine√°l an pharaim√©adair <code>t</code> √≥ <code>T</code> go <code>&amp;T</code>.
Toisc nach bhf√©adfadh an cine√°l a bheith <code>Sized</code>, n√≠ m√≥r d√∫inn √© a √∫s√°id taobh thiar de chine√°l √©igin pointeora. Sa ch√°s seo, t√° tagairt roghnaithe againn.</p>
<p>Ansin, labhr√≥imid faoi fheidhmeanna agus d√∫nta!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-functions-and-closures"><a class="header" href="#advanced-functions-and-closures">Advanced Functions and Closures</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="macros"><a class="header" href="#macros">Macros</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="final-project-building-a-multithreaded-web-server"><a class="header" href="#final-project-building-a-multithreaded-web-server">Final Project: Building a Multithreaded Web Server</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-a-single-threaded-web-server"><a class="header" href="#building-a-single-threaded-web-server">Building a Single-Threaded Web Server</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="turning-our-single-threaded-server-into-a-multithreaded-server"><a class="header" href="#turning-our-single-threaded-server-into-a-multithreaded-server">Turning Our Single-Threaded Server into a Multithreaded Server</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graceful-shutdown-and-cleanup"><a class="header" href="#graceful-shutdown-and-cleanup">Graceful Shutdown and Cleanup</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="aguis√≠n"><a class="header" href="#aguis√≠n">Aguis√≠n</a></h1>
<p>T√° √°bhar tagartha sna hailt seo a leanas a d'fh√©adfadh a bheith √∫s√°ideach duit ar do thuras
Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="aguis√≠n-a-eochairfhocail"><a class="header" href="#aguis√≠n-a-eochairfhocail">Aguis√≠n A: Eochairfhocail</a></h2>
<p>T√° eochairfhocail sa liosta seo a leanas at√° curtha in √°irithe le haghaidh √∫s√°ide reatha n√≥ √∫s√°ide amach anseo ag an teanga Rust. D√° bhr√≠ sin, n√≠ f√©idir iad a √∫s√°id mar aitheant√≥ir√≠ (seachas
mar aitheant√≥ir√≠ amha mar a phl√©ifimid sa chuid ‚Äú[Aitheant√≥ir√≠ Amha][aitheant√≥ir√≠-amh]<!-- neamhaird a dh√©anamh -->‚Äù). Is ainmneacha
feidhmeanna, athr√≥g, paraim√©adair, r√©ims√≠ strucht√∫r, mod√∫l, cliathbhosca√≠, tairiseacha,
macra, luachanna statach, tr√©ithe, cine√°lacha, tr√©ithe, n√≥ saolr√©anna iad aitheant√≥ir√≠.</p>
<h3 id="eochairfhocail-at√°-in-√ös√°id-faoi-l√°thair"><a class="header" href="#eochairfhocail-at√°-in-√ös√°id-faoi-l√°thair">Eochairfhocail at√° in √ös√°id faoi L√°thair</a></h3>
<p>Seo a leanas liosta d'eochairfhocail at√° in √∫s√°id faoi l√°thair, agus a bhfeidhmi√∫lacht
cur s√≠os orthu.</p>
<ul>
<li><code>as</code> - r√©itigh phrimiti√∫la a dh√©anamh, an tr√©ith shonrach ina bhfuil m√≠r a dh√≠-athbhri√∫, n√≥ m√≠reanna a athainmni√∫ i r√°itis <code>use</code></li>
<li><code>async</code> - <code>Future</code> a thabhairt ar ais in ionad an sn√°ithe reatha a bhloc√°il</li>
<li><code>await</code> - forghn√≠omh√∫ a chur ar fionra√≠ go dt√≠ go mbeidh toradh <code>Future</code> r√©idh</li>
<li><code>break</code> - l√∫b a scoir l√°ithreach</li>
<li><code>const</code> - m√≠reanna tairiseacha n√≥ pointeoir√≠ amha tairiseacha a shaini√∫</li>
<li><code>continue</code> - lean√∫int ar aghaidh go dt√≠ an ch√©ad athr√° l√∫b eile</li>
<li><code>crate</code> - i gcos√°n mod√∫il, tagra√≠onn s√© don fhr√©amh cliathbhosca</li>
<li><code>dyn</code> - seolta dinimici√∫il chuig r√©ad tr√©ithe</li>
<li><code>else</code> - c√∫ltaca do <code>if</code> agus <code>if let</code> t√≥g√°lacha sreabhadh rialaithe</li>
<li><code>enum</code> - √°ireamh a shaini√∫</li>
<li><code>extern</code> - feidhm n√≥ athr√≥g sheachtrach a nascadh</li>
<li><code>false</code> - Litri√∫il br√©agach Booleanach</li>
<li><code>fn</code> - feidhm n√≥ an cine√°l pointeora feidhme a shaini√∫</li>
<li><code>for</code> - l√∫b a chur thar mh√≠reanna √≥ athr√°, tr√©ith a chur i bhfeidhm, n√≥ saolr√© n√≠os airde a shonr√∫</li>
<li><code>if</code> - brainse bunaithe ar toradh ar shliocht coinn√≠ollach</li>
<li><code>impl</code> - feidhmi√∫lacht dh√∫chasach n√≥ tr√©ith a chur i bhfeidhm</li>
<li><code>in</code> - cuid de chomhr√©ir l√∫b <code>for</code></li>
<li><code>let</code> - athr√≥g a cheangal</li>
<li><code>loop</code> - l√∫badh gan choinn√≠oll</li>
<li><code>match</code> - luach a mheaitse√°il le patr√∫in</li>
<li><code>mod</code> - mod√∫l a shaini√∫</li>
<li><code>move</code> - d√∫nadh a dh√©anamh chun √∫in√©ireacht a ghlacadh ar a ghabh√°lacha go l√©ir</li>
<li><code>mut</code> - inathraitheacht a l√©iri√∫ i dtagairt√≠, pointeoir√≠ amha, n√≥ ceangail patr√∫n</li>
<li><code>pub</code> - infheictheacht phoibl√≠ a l√©iri√∫ i r√©ims√≠ strucht√∫r, bloic <code>impl</code>, n√≥ mod√∫il</li>
<li><code>ref</code> - ceangal tr√≠ thagairt</li>
<li><code>return</code> - filleadh √≥ fheidhm</li>
<li><code>Self</code> - leasainm cine√°il don chine√°l at√° √° shaini√∫ n√≥ √° chur i bhfeidhm againn</li>
<li><code>self</code> - √°bhar modha n√≥ mod√∫l reatha</li>
<li><code>static</code> - athr√≥g dhomhanda n√≥ saolr√© a mhaireann ar feadh fhorghn√≠omh√∫ ioml√°n an chl√°ir</li>
<li><code>struct</code> - strucht√∫r a shaini√∫</li>
<li><code>super</code> - mod√∫l tuismitheora an mhod√∫il reatha</li>
<li><code>trait</code> - tr√©ith a shaini√∫</li>
<li><code>true</code> - f√≠or-litri√∫il Booleanach</li>
<li><code>type</code> - leasainm cine√°il n√≥ gaolmhar a shaini√∫ cine√°l</li>
<li><code>aontas</code> - sainmh√≠nigh <a href="https://doc.rust-lang.org/stable/reference/items/unions.html">aontas</a><!-- neamhaird a dh√©anamh -->; n√≠ eochairfhocal √© ach nuair a √∫s√°idtear √© i ndearbh√∫ aontas</li>
<li><code>neamhs√°bh√°ilte</code> - cuir c√≥d, feidhmeanna, tr√©ithe n√≥ cur i bhfeidhm neamhsh√°bh√°ilte in i√∫l</li>
<li><code>√∫s√°id</code> - tabhair siombail√≠ isteach sa raon feidhme; sonraigh gabh√°lacha beachta le haghaidh teorainneacha cine√°lacha agus saoil</li>
<li><code>c√° h√°it</code> - cuir cl√°sail in i√∫l a chuireann srian ar chine√°l</li>
<li><code>c√© go</code> - l√∫b bunaithe go coinn√≠ollach ar thoradh na habairte</li>
</ul>
<!--[union]: ../reference/items/unions.html --> 
<h3 id="eochairfhocail-at√°-curtha-in-√°irithe-le-h√∫s√°id-sa-todhcha√≠"><a class="header" href="#eochairfhocail-at√°-curtha-in-√°irithe-le-h√∫s√°id-sa-todhcha√≠">Eochairfhocail at√° curtha in √°irithe le h√∫s√°id sa todhcha√≠</a></h3>
<p>N√≠l aon fheidhmi√∫lacht ag na heochairfhocail seo a leanas go f√≥ill ach t√° siad curtha in √°irithe ag
Rust le h√∫s√°id amach anseo.</p>
<ul>
<li><code>abstract</code></li>
<li><code>become</code></li>
<li><code>box</code></li>
<li><code>do</code></li>
<li><code>final</code></li>
<li><code>gen</code></li>
<li><code>macro</code></li>
<li><code>override</code></li>
<li><code>priv</code></li>
<li><code>try</code></li>
<li><code>typeof</code></li>
<li><code>unsized</code></li>
<li><code>virtual</code></li>
<li><code>yield</code></li>
</ul>
<h3 id="aitheant√≥ir√≠-amha"><a class="header" href="#aitheant√≥ir√≠-amha">Aitheant√≥ir√≠ Amha</a></h3>
<p>Is iad <em>Raw Identifiers</em> an comhr√©ir a ligeann duit eochairfhocail a √∫s√°id i gc√°s nach mbeadh siad ceadaithe de ghn√°th. √ös√°ideann t√∫ aitheant√≥ir amh tr√≠ r√©im√≠r <code>r#</code> a chur le heochairfhocal.</p>
<p>Mar shampla, is eochairfhocal √© <code>match</code>. M√° dh√©anann t√∫ iarracht an fheidhm seo a leanas a thioms√∫
a √∫s√°ideann <code>match</code> mar ainm:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><code class="language-rust ignore does_not_compile">fn match(needle: &amp;str, haystack: &amp;str) -&gt; bool {
    haystack.contains(needle)
}</code></pre>
<p>gheobhaidh t√∫ an earr√°id seo:</p>
<pre><code class="language-text">error: expected identifier, found keyword `match`
 --&gt; src/main.rs:4:4
  |
4 | fn match(needle: &amp;str, haystack: &amp;str) -&gt; bool {
  |    ^^^^^ expected identifier, found keyword
</code></pre>
<p>L√©ir√≠onn an earr√°id nach f√©idir leat an eochairfhocal <code>match</code> a √∫s√°id mar aitheant√≥ir feidhme. Chun <code>match</code> a √∫s√°id mar ainm feidhme, n√≠ m√≥r duit comhr√©ir amh an aitheant√≥ra a √∫s√°id, mar seo:</p>
<p><span class="filename">Ainm comhaid: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust">fn r#match(needle: &amp;str, haystack: &amp;str) -&gt; bool {
    haystack.contains(needle)
}

fn main() {
    assert!(r#match("foo", "foobar"));
}</code></pre></pre>
<p>Tioms√≥idh an c√≥d seo gan aon earr√°id√≠. Tabhair faoi deara an r√©im√≠r <code>r#</code> ar ainm na feidhme ina sainmh√≠ni√∫ chomh maith leis an √°it a nglaotar ar an bhfeidhm i <code>main</code>.</p>
<p>Ligeann aitheant√≥ir√≠ amha duit aon fhocal a roghna√≠onn t√∫ a √∫s√°id mar aitheant√≥ir, fi√∫ m√°
thiteann an focal sin mar eochairfhocal forchoime√°dta. Tugann s√© seo n√≠os m√≥ saoirse d√∫inn ainmneacha aitheant√≥ir√≠ a roghn√∫, chomh maith le ligeann s√© d√∫inn comhth√°th√∫ le cl√°ir at√° scr√≠ofa i
dteanga nach eochairfhocail iad na focail seo. Ina theannta sin, ligeann aitheant√≥ir√≠ amha duit leabharlanna at√° scr√≠ofa in eagr√°n Rust difri√∫il a √∫s√°id n√° mar a √∫s√°ideann do chliath√°n.
Mar shampla, n√≠ eochairfhocal √© <code>try</code> san eagr√°n 2015 ach t√° s√© sna heagr√°in 2018, 2021,
agus 2024. M√° bhraitheann t√∫ ar leabharlann at√° scr√≠ofa ag baint √∫s√°ide as eagr√°n 2015
agus a bhfuil feidhm <code>try</code> aici, beidh ort comhr√©ir an aitheant√≥ra amh,
<code>r#try</code> sa ch√°s seo, a √∫s√°id chun an fheidhm sin a ghlaoch √≥ do ch√≥d eagr√°n 2018. F√©ach
<a href="appendix-05-editions.html">Aguis√≠n E</a><!-- neamhaird a dh√©anamh --> le haghaidh tuilleadh eolais faoi eagr√°in.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="b---operators-and-symbols"><a class="header" href="#b---operators-and-symbols">B - Operators and Symbols</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="c---derivable-traits"><a class="header" href="#c---derivable-traits">C - Derivable Traits</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="d---useful-development-tools"><a class="header" href="#d---useful-development-tools">D - Useful Development Tools</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="e---editions"><a class="header" href="#e---editions">E - Editions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="f---translations-of-the-book"><a class="header" href="#f---translations-of-the-book">F - Translations of the Book</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="g---how-rust-is-made-and-nightly-rust"><a class="header" href="#g---how-rust-is-made-and-nightly-rust">G - How Rust is Made and ‚ÄúNightly Rust‚Äù</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="src/css/ferris.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
